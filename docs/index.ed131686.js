let t,e;function i(t){return t&&t.__esModule?t.default:t}function n(t,e,i,n){Object.defineProperty(t,e,{get:i,set:n,enumerable:!0,configurable:!0})}var r,o,a,s,l,h,u,c,d,p,f,g,m,y,w,b,x,S,C,_,M,T,I,R,E,A,k,D,O,P,L,N,H,V,B,F,W,z,j,U,G,Y,X,$,Z,q,K,Q,J,tt,te,ti,tn,tr,to,ta,ts,tl,th,tu,tc,td,tp,tf,tg,tm,ty,tv,tw,tb,tx,tS,tC,t_,tM,tT,tI,tR,tE,tA,tk,tD,tO,tP,tL,tN,tH,tV,tB,tF,tW,tz,tj,tU,tG,tY,tX,t$,tZ,tq,tK,tQ,tJ,t0,t1,t2=globalThis,t5={},t3={},t4=t2.parcelRequire94c2;null==t4&&((t4=function(t){if(t in t5)return t5[t].exports;if(t in t3){var e=t3[t];delete t3[t];var i={id:t,exports:{}};return t5[t]=i,e.call(i.exports,i,i.exports),i.exports}var n=Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){t3[t]=e},t2.parcelRequire94c2=t4);var t6=t4.register;t6("45fvw",function(t,e){var i;i=function(){function e(){return W.apply(null,arguments)}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function n(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t){var e;if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;for(e in t)if(r(t,e))return!1;return!0}function a(t){return void 0===t}function s(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function l(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function h(t,e){var i,n=[],r=t.length;for(i=0;i<r;++i)n.push(e(t[i],i));return n}function u(t,e){for(var i in e)r(e,i)&&(t[i]=e[i]);return r(e,"toString")&&(t.toString=e.toString),r(e,"valueOf")&&(t.valueOf=e.valueOf),t}function c(t,e,i,n){return eo(t,e,i,n,!0).utc()}function d(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function p(t){var e=null,i=!1,n=t._d&&!isNaN(t._d.getTime());return(n&&(e=d(t),i=z.call(e.parsedDateParts,function(t){return null!=t}),n=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i),t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)),null!=Object.isFrozen&&Object.isFrozen(t))?n:(t._isValid=n,t._isValid)}function f(t){var e=c(NaN);return null!=t?u(d(e),t):d(e).userInvalidated=!0,e}z=Array.prototype.some?Array.prototype.some:function(t){var e,i=Object(this),n=i.length>>>0;for(e=0;e<n;e++)if(e in i&&t.call(this,i[e],e,i))return!0;return!1};var g,m,y=e.momentProperties=[],w=!1;function b(t,e){var i,n,r,o=y.length;if(a(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),a(e._i)||(t._i=e._i),a(e._f)||(t._f=e._f),a(e._l)||(t._l=e._l),a(e._strict)||(t._strict=e._strict),a(e._tzm)||(t._tzm=e._tzm),a(e._isUTC)||(t._isUTC=e._isUTC),a(e._offset)||(t._offset=e._offset),a(e._pf)||(t._pf=d(e)),a(e._locale)||(t._locale=e._locale),o>0)for(i=0;i<o;i++)a(r=e[n=y[i]])||(t[n]=r);return t}function x(t){b(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,e.updateOffset(this),w=!1)}function S(t){return t instanceof x||null!=t&&null!=t._isAMomentObject}function C(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function _(t,i){var n=!0;return u(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),n){var o,a,s,l=[],h=arguments.length;for(a=0;a<h;a++){if(o="","object"==typeof arguments[a]){for(s in o+="\n["+a+"] ",arguments[0])r(arguments[0],s)&&(o+=s+": "+arguments[0][s]+", ");o=o.slice(0,-2)}else o=arguments[a];l.push(o)}C(t+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+Error().stack),n=!1}return i.apply(this,arguments)},i)}var M={};function T(t,i){null!=e.deprecationHandler&&e.deprecationHandler(t,i),M[t]||(C(i),M[t]=!0)}function I(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function R(t,e){var i,o=u({},t);for(i in e)r(e,i)&&(n(t[i])&&n(e[i])?(o[i]={},u(o[i],t[i]),u(o[i],e[i])):null!=e[i]?o[i]=e[i]:delete o[i]);for(i in t)r(t,i)&&!r(e,i)&&n(t[i])&&(o[i]=u({},o[i]));return o}function E(t){null!=t&&this.set(t)}function A(t,e,i){var n=""+Math.abs(t);return(t>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,e-n.length)).toString().substr(1)+n}e.suppressDeprecationWarnings=!1,e.deprecationHandler=null,j=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)r(t,e)&&i.push(e);return i};var k=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,D=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,O={},P={};function L(t,e,i,n){var r=n;"string"==typeof n&&(r=function(){return this[n]()}),t&&(P[t]=r),e&&(P[e[0]]=function(){return A(r.apply(this,arguments),e[1],e[2])}),i&&(P[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function N(t,e){return t.isValid()?(O[e=H(e,t.localeData())]=O[e]||function(t){var e,i,n,r=t.match(k);for(i=0,n=r.length;i<n;i++)P[r[i]]?r[i]=P[r[i]]:r[i]=(e=r[i]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){var i,o="";for(i=0;i<n;i++)o+=I(r[i])?r[i].call(e,t):r[i];return o}}(e),O[e](t)):t.localeData().invalidDate()}function H(t,e){var i=5;function n(t){return e.longDateFormat(t)||t}for(D.lastIndex=0;i>=0&&D.test(t);)t=t.replace(D,n),D.lastIndex=0,i-=1;return t}var V={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function B(t){return"string"==typeof t?V[t]||V[t.toLowerCase()]:void 0}function F(t){var e,i,n={};for(i in t)r(t,i)&&(e=B(i))&&(n[e]=t[i]);return n}var W,z,j,U,G={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1},Y=/\d/,X=/\d\d/,$=/\d{3}/,Z=/\d{4}/,q=/[+-]?\d{6}/,K=/\d\d?/,Q=/\d\d\d\d?/,J=/\d\d\d\d\d\d?/,tt=/\d{1,3}/,te=/\d{1,4}/,ti=/[+-]?\d{1,6}/,tn=/\d+/,tr=/[+-]?\d+/,to=/Z|[+-]\d\d:?\d\d/gi,ta=/Z|[+-]\d\d(?::?\d\d)?/gi,ts=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,tl=/^[1-9]\d?/,th=/^([1-9]\d|\d)/;function tu(t,e,i){U[t]=I(e)?e:function(t,n){return t&&i?i:e}}function tc(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function td(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function tp(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=td(e)),i}U={};var tf={};function tg(t,e){var i,n,r=e;for("string"==typeof t&&(t=[t]),s(e)&&(r=function(t,i){i[e]=tp(t)}),n=t.length,i=0;i<n;i++)tf[t[i]]=r}function tm(t,e){tg(t,function(t,i,n,r){n._w=n._w||{},e(t,n._w,n,r)})}function ty(t){return t%4==0&&t%100!=0||t%400==0}function tv(t){return ty(t)?366:365}L("Y",0,0,function(){var t=this.year();return t<=9999?A(t,4):"+"+t}),L(0,["YY",2],0,function(){return this.year()%100}),L(0,["YYYY",4],0,"year"),L(0,["YYYYY",5],0,"year"),L(0,["YYYYYY",6,!0],0,"year"),tu("Y",tr),tu("YY",K,X),tu("YYYY",te,Z),tu("YYYYY",ti,q),tu("YYYYYY",ti,q),tg(["YYYYY","YYYYYY"],0),tg("YYYY",function(t,i){i[0]=2===t.length?e.parseTwoDigitYear(t):tp(t)}),tg("YY",function(t,i){i[0]=e.parseTwoDigitYear(t)}),tg("Y",function(t,e){e[0]=parseInt(t,10)}),e.parseTwoDigitYear=function(t){return tp(t)+(tp(t)>68?1900:2e3)};var tw=tb("FullYear",!0);function tb(t,i){return function(n){return null!=n?(tS(this,t,n),e.updateOffset(this,i),this):tx(this,t)}}function tx(t,e){if(!t.isValid())return NaN;var i=t._d,n=t._isUTC;switch(e){case"Milliseconds":return n?i.getUTCMilliseconds():i.getMilliseconds();case"Seconds":return n?i.getUTCSeconds():i.getSeconds();case"Minutes":return n?i.getUTCMinutes():i.getMinutes();case"Hours":return n?i.getUTCHours():i.getHours();case"Date":return n?i.getUTCDate():i.getDate();case"Day":return n?i.getUTCDay():i.getDay();case"Month":return n?i.getUTCMonth():i.getMonth();case"FullYear":return n?i.getUTCFullYear():i.getFullYear();default:return NaN}}function tS(t,e,i){var n,r,o,a;if(!(!t.isValid()||isNaN(i))){switch(n=t._d,r=t._isUTC,e){case"Milliseconds":return void(r?n.setUTCMilliseconds(i):n.setMilliseconds(i));case"Seconds":return void(r?n.setUTCSeconds(i):n.setSeconds(i));case"Minutes":return void(r?n.setUTCMinutes(i):n.setMinutes(i));case"Hours":return void(r?n.setUTCHours(i):n.setHours(i));case"Date":return void(r?n.setUTCDate(i):n.setDate(i));case"FullYear":break;default:return}o=t.month(),a=29!==(a=t.date())||1!==o||ty(i)?a:28,r?n.setUTCFullYear(i,o,a):n.setFullYear(i,o,a)}}function tC(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=(e%12+12)%12;return t+=(e-i)/12,1===i?ty(t)?29:28:31-i%7%2}tj=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return -1},L("M",["MM",2],"Mo",function(){return this.month()+1}),L("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),L("MMMM",0,0,function(t){return this.localeData().months(this,t)}),tu("M",K,tl),tu("MM",K,X),tu("MMM",function(t,e){return e.monthsShortRegex(t)}),tu("MMMM",function(t,e){return e.monthsRegex(t)}),tg(["M","MM"],function(t,e){e[1]=tp(t)-1}),tg(["MMM","MMMM"],function(t,e,i,n){var r=i._locale.monthsParse(t,n,i._strict);null!=r?e[1]=r:d(i).invalidMonth=t});var t_="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),tM=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;function tT(t,e,i){var n,r,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(n=0,this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[];n<12;++n)o=c([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return i?"MMM"===e?-1!==(r=tj.call(this._shortMonthsParse,a))?r:null:-1!==(r=tj.call(this._longMonthsParse,a))?r:null:"MMM"===e?-1!==(r=tj.call(this._shortMonthsParse,a))?r:-1!==(r=tj.call(this._longMonthsParse,a))?r:null:-1!==(r=tj.call(this._longMonthsParse,a))?r:-1!==(r=tj.call(this._shortMonthsParse,a))?r:null}function tI(t,e){if(!t.isValid())return t;if("string"==typeof e){if(/^\d+$/.test(e))e=tp(e);else if(!s(e=t.localeData().monthsParse(e)))return t}var i=e,n=t.date();return n=n<29?n:Math.min(n,tC(t.year(),i)),t._isUTC?t._d.setUTCMonth(i,n):t._d.setMonth(i,n),t}function tR(t){return null!=t?(tI(this,t),e.updateOffset(this,!0),this):tx(this,"Month")}function tE(){function t(t,e){return e.length-t.length}var e,i,n,r,o=[],a=[],s=[];for(e=0;e<12;e++)i=c([2e3,e]),n=tc(this.monthsShort(i,"")),r=tc(this.months(i,"")),o.push(n),a.push(r),s.push(r),s.push(n);o.sort(t),a.sort(t),s.sort(t),this._monthsRegex=RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=RegExp("^("+o.join("|")+")","i")}function tA(t,e,i,n,r,o,a){var s;return t<100&&t>=0?isFinite((s=new Date(t+400,e,i,n,r,o,a)).getFullYear())&&s.setFullYear(t):s=new Date(t,e,i,n,r,o,a),s}function tk(t){var e,i;return t<100&&t>=0?(i=Array.prototype.slice.call(arguments),i[0]=t+400,isFinite((e=new Date(Date.UTC.apply(null,i))).getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function tD(t,e,i){var n=7+e-i;return-((7+tk(t,0,n).getUTCDay()-e)%7)+n-1}function tO(t,e,i,n,r){var o,a,s=1+7*(e-1)+(7+i-n)%7+tD(t,n,r);return s<=0?a=tv(o=t-1)+s:s>tv(t)?(o=t+1,a=s-tv(t)):(o=t,a=s),{year:o,dayOfYear:a}}function tP(t,e,i){var n,r,o=tD(t.year(),e,i),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?n=a+tL(r=t.year()-1,e,i):a>tL(t.year(),e,i)?(n=a-tL(t.year(),e,i),r=t.year()+1):(r=t.year(),n=a),{week:n,year:r}}function tL(t,e,i){var n=tD(t,e,i),r=tD(t+1,e,i);return(tv(t)-n+r)/7}function tN(t,e){return t.slice(e,7).concat(t.slice(0,e))}L("w",["ww",2],"wo","week"),L("W",["WW",2],"Wo","isoWeek"),tu("w",K,tl),tu("ww",K,X),tu("W",K,tl),tu("WW",K,X),tm(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=tp(t)}),L("d",0,"do","day"),L("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),L("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),L("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),L("e",0,0,"weekday"),L("E",0,0,"isoWeekday"),tu("d",K),tu("e",K),tu("E",K),tu("dd",function(t,e){return e.weekdaysMinRegex(t)}),tu("ddd",function(t,e){return e.weekdaysShortRegex(t)}),tu("dddd",function(t,e){return e.weekdaysRegex(t)}),tm(["dd","ddd","dddd"],function(t,e,i,n){var r=i._locale.weekdaysParse(t,n,i._strict);null!=r?e.d=r:d(i).invalidWeekday=t}),tm(["d","e","E"],function(t,e,i,n){e[n]=tp(t)});var tH="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function tV(t,e,i){var n,r,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(n=0,this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[];n<7;++n)o=c([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return i?"dddd"===e?-1!==(r=tj.call(this._weekdaysParse,a))?r:null:"ddd"===e?-1!==(r=tj.call(this._shortWeekdaysParse,a))?r:null:-1!==(r=tj.call(this._minWeekdaysParse,a))?r:null:"dddd"===e?-1!==(r=tj.call(this._weekdaysParse,a))||-1!==(r=tj.call(this._shortWeekdaysParse,a))?r:-1!==(r=tj.call(this._minWeekdaysParse,a))?r:null:"ddd"===e?-1!==(r=tj.call(this._shortWeekdaysParse,a))||-1!==(r=tj.call(this._weekdaysParse,a))?r:-1!==(r=tj.call(this._minWeekdaysParse,a))?r:null:-1!==(r=tj.call(this._minWeekdaysParse,a))||-1!==(r=tj.call(this._weekdaysParse,a))?r:-1!==(r=tj.call(this._shortWeekdaysParse,a))?r:null}function tB(){function t(t,e){return e.length-t.length}var e,i,n,r,o,a=[],s=[],l=[],h=[];for(e=0;e<7;e++)i=c([2e3,1]).day(e),n=tc(this.weekdaysMin(i,"")),r=tc(this.weekdaysShort(i,"")),o=tc(this.weekdays(i,"")),a.push(n),s.push(r),l.push(o),h.push(n),h.push(r),h.push(o);a.sort(t),s.sort(t),l.sort(t),h.sort(t),this._weekdaysRegex=RegExp("^("+h.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=RegExp("^("+a.join("|")+")","i")}function tF(){return this.hours()%12||12}function tW(t,e){L(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function tz(t,e){return e._meridiemParse}L("H",["HH",2],0,"hour"),L("h",["hh",2],0,tF),L("k",["kk",2],0,function(){return this.hours()||24}),L("hmm",0,0,function(){return""+tF.apply(this)+A(this.minutes(),2)}),L("hmmss",0,0,function(){return""+tF.apply(this)+A(this.minutes(),2)+A(this.seconds(),2)}),L("Hmm",0,0,function(){return""+this.hours()+A(this.minutes(),2)}),L("Hmmss",0,0,function(){return""+this.hours()+A(this.minutes(),2)+A(this.seconds(),2)}),tW("a",!0),tW("A",!1),tu("a",tz),tu("A",tz),tu("H",K,th),tu("h",K,tl),tu("k",K,tl),tu("HH",K,X),tu("hh",K,X),tu("kk",K,X),tu("hmm",Q),tu("hmmss",J),tu("Hmm",Q),tu("Hmmss",J),tg(["H","HH"],3),tg(["k","kk"],function(t,e,i){var n=tp(t);e[3]=24===n?0:n}),tg(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),tg(["h","hh"],function(t,e,i){e[3]=tp(t),d(i).bigHour=!0}),tg("hmm",function(t,e,i){var n=t.length-2;e[3]=tp(t.substr(0,n)),e[4]=tp(t.substr(n)),d(i).bigHour=!0}),tg("hmmss",function(t,e,i){var n=t.length-4,r=t.length-2;e[3]=tp(t.substr(0,n)),e[4]=tp(t.substr(n,2)),e[5]=tp(t.substr(r)),d(i).bigHour=!0}),tg("Hmm",function(t,e,i){var n=t.length-2;e[3]=tp(t.substr(0,n)),e[4]=tp(t.substr(n))}),tg("Hmmss",function(t,e,i){var n=t.length-4,r=t.length-2;e[3]=tp(t.substr(0,n)),e[4]=tp(t.substr(n,2)),e[5]=tp(t.substr(r))});var tj,tU,tG=tb("Hours",!0),tY={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:t_,week:{dow:0,doy:6},weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysShort:tH,meridiemParse:/[ap]\.?m?\.?/i},tX={},t$={};function tZ(t){return t?t.toLowerCase().replace("_","-"):t}function tq(e){var i=null;if(void 0===tX[e]&&t&&t.exports&&e&&e.match("^[^/\\\\]*$"))try{i=tU._abbr,(void 0)("./locale/"+e),tK(i)}catch(t){tX[e]=null}return tX[e]}function tK(t,e){var i;return t&&((i=a(e)?tJ(t):tQ(t,e))?tU=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),tU._abbr}function tQ(t,e){if(null===e)return delete tX[t],null;var i,n=tY;if(e.abbr=t,null!=tX[t])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=tX[t]._config;else if(null!=e.parentLocale){if(null!=tX[e.parentLocale])n=tX[e.parentLocale]._config;else{if(null==(i=tq(e.parentLocale)))return t$[e.parentLocale]||(t$[e.parentLocale]=[]),t$[e.parentLocale].push({name:t,config:e}),null;n=i._config}}return tX[t]=new E(R(n,e)),t$[t]&&t$[t].forEach(function(t){tQ(t.name,t.config)}),tK(t),tX[t]}function tJ(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return tU;if(!i(t)){if(e=tq(t))return e;t=[t]}return function(t){for(var e,i,n,r,o=0;o<t.length;){for(e=(r=tZ(t[o]).split("-")).length,i=(i=tZ(t[o+1]))?i.split("-"):null;e>0;){if(n=tq(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&function(t,e){var i,n=Math.min(t.length,e.length);for(i=0;i<n;i+=1)if(t[i]!==e[i])return i;return n}(r,i)>=e-1)break;e--}o++}return tU}(t)}function t0(t){var e,i=t._a;return i&&-2===d(t).overflow&&(e=i[1]<0||i[1]>11?1:i[2]<1||i[2]>tC(i[0],i[1])?2:i[3]<0||i[3]>24||24===i[3]&&(0!==i[4]||0!==i[5]||0!==i[6])?3:i[4]<0||i[4]>59?4:i[5]<0||i[5]>59?5:i[6]<0||i[6]>999?6:-1,d(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),d(t)._overflowWeeks&&-1===e&&(e=7),d(t)._overflowWeekday&&-1===e&&(e=8),d(t).overflow=e),t}var t1=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,t2=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,t5=/Z|[+-]\d\d(?::?\d\d)?/,t3=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],t4=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],t6=/^\/?Date\((-?\d+)/i,t8=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,t9={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function t7(t){var e,i,n,r,o,a,s=t._i,l=t1.exec(s)||t2.exec(s),h=t3.length,u=t4.length;if(l){for(e=0,d(t).iso=!0,i=h;e<i;e++)if(t3[e][1].exec(l[1])){r=t3[e][0],n=!1!==t3[e][2];break}if(null==r){t._isValid=!1;return}if(l[3]){for(e=0,i=u;e<i;e++)if(t4[e][1].exec(l[3])){o=(l[2]||" ")+t4[e][0];break}if(null==o){t._isValid=!1;return}}if(!n&&null!=o){t._isValid=!1;return}if(l[4]){if(t5.exec(l[4]))a="Z";else{t._isValid=!1;return}}t._f=r+(o||"")+(a||""),en(t)}else t._isValid=!1}function et(t){var e,i,n,r,o,a,s,l,h,u=t8.exec(t._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(u){if(i=u[4],n=u[3],r=u[2],o=u[5],a=u[6],s=u[7],l=[(e=parseInt(i,10))<=49?2e3+e:e<=999?1900+e:e,t_.indexOf(n),parseInt(r,10),parseInt(o,10),parseInt(a,10)],s&&l.push(parseInt(s,10)),(h=u[1])&&tH.indexOf(h)!==new Date(l[0],l[1],l[2]).getDay()&&(d(t).weekdayMismatch=!0,t._isValid=!1,1))return;t._a=l,t._tzm=function(t,e,i){if(t)return t9[t];if(e)return 0;var n=parseInt(i,10),r=n%100;return(n-r)/100*60+r}(u[8],u[9],u[10]),t._d=tk.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),d(t).rfc2822=!0}else t._isValid=!1}function ee(t,e,i){return null!=t?t:null!=e?e:i}function ei(t){var i,n,r,o,a,s,l,h,u,c,p,f,g,m,y,w=[];if(!t._d){for(c=new Date(e.now()),g=t._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()],t._w&&null==t._a[2]&&null==t._a[1]&&(null!=(i=t._w).GG||null!=i.W||null!=i.E?(a=1,s=4,n=ee(i.GG,t._a[0],tP(ea(),1,4).year),r=ee(i.W,1),((o=ee(i.E,1))<1||o>7)&&(h=!0)):(a=t._locale._week.dow,s=t._locale._week.doy,u=tP(ea(),a,s),n=ee(i.gg,t._a[0],u.year),r=ee(i.w,u.week),null!=i.d?((o=i.d)<0||o>6)&&(h=!0):null!=i.e?(o=i.e+a,(i.e<0||i.e>6)&&(h=!0)):o=a),r<1||r>tL(n,a,s)?d(t)._overflowWeeks=!0:null!=h?d(t)._overflowWeekday=!0:(l=tO(n,r,o,a,s),t._a[0]=l.year,t._dayOfYear=l.dayOfYear)),null!=t._dayOfYear&&(y=ee(t._a[0],g[0]),(t._dayOfYear>tv(y)||0===t._dayOfYear)&&(d(t)._overflowDayOfYear=!0),f=tk(y,0,t._dayOfYear),t._a[1]=f.getUTCMonth(),t._a[2]=f.getUTCDate()),p=0;p<3&&null==t._a[p];++p)t._a[p]=w[p]=g[p];for(;p<7;p++)t._a[p]=w[p]=null==t._a[p]?2===p?1:0:t._a[p];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?tk:tA).apply(null,w),m=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&void 0!==t._w.d&&t._w.d!==m&&(d(t).weekdayMismatch=!0)}}function en(t){if(t._f===e.ISO_8601){t7(t);return}if(t._f===e.RFC_2822){et(t);return}t._a=[],d(t).empty=!0;var i,n,o,a,s,l,h,u,c,p,f,g=""+t._i,m=g.length,y=0;for(s=0,f=(h=H(t._f,t._locale).match(k)||[]).length;s<f;s++)(u=h[s],(l=(g.match(r(U,u)?U[u](t._strict,t._locale):new RegExp(tc(u.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,r){return e||i||n||r}))))||[])[0])&&((c=g.substr(0,g.indexOf(l))).length>0&&d(t).unusedInput.push(c),g=g.slice(g.indexOf(l)+l.length),y+=l.length),P[u])?(l?d(t).empty=!1:d(t).unusedTokens.push(u),null!=l&&r(tf,u)&&tf[u](l,t._a,t,u)):t._strict&&!l&&d(t).unusedTokens.push(u);d(t).charsLeftOver=m-y,g.length>0&&d(t).unusedInput.push(g),t._a[3]<=12&&!0===d(t).bigHour&&t._a[3]>0&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[3]=(i=t._locale,n=t._a[3],null==(o=t._meridiem)?n:null!=i.meridiemHour?i.meridiemHour(n,o):(null!=i.isPM&&((a=i.isPM(o))&&n<12&&(n+=12),a||12!==n||(n=0)),n)),null!==(p=d(t).era)&&(t._a[0]=t._locale.erasConvertYear(p,t._a[0])),ei(t),t0(t)}function er(t){var r,o=t._i,c=t._f;return(t._locale=t._locale||tJ(t._l),null===o||void 0===c&&""===o)?f({nullInput:!0}):("string"==typeof o&&(t._i=o=t._locale.preparse(o)),S(o))?new x(t0(o)):(l(o)?t._d=o:i(c)?function(t){var e,i,n,r,o,a,s=!1,l=t._f.length;if(0===l){d(t).invalidFormat=!0,t._d=new Date(NaN);return}for(r=0;r<l;r++)o=0,a=!1,e=b({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],en(e),p(e)&&(a=!0),o+=d(e).charsLeftOver+10*d(e).unusedTokens.length,d(e).score=o,s?o<n&&(n=o,i=e):(null==n||o<n||a)&&(n=o,i=e,a&&(s=!0));u(t,i||e)}(t):c?en(t):a(r=t._i)?t._d=new Date(e.now()):l(r)?t._d=new Date(r.valueOf()):"string"==typeof r?function(t){var i=t6.exec(t._i);if(null!==i){t._d=new Date(+i[1]);return}t7(t),!1===t._isValid&&(delete t._isValid,et(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:e.createFromInputFallback(t)))}(t):i(r)?(t._a=h(r.slice(0),function(t){return parseInt(t,10)}),ei(t)):n(r)?function(t){if(!t._d){var e=F(t._i),i=void 0===e.day?e.date:e.day;t._a=h([e.year,e.month,i,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),ei(t)}}(t):s(r)?t._d=new Date(r):e.createFromInputFallback(t),p(t)||(t._d=null),t)}function eo(t,e,r,a,s){var l,h={};return(!0===e||!1===e)&&(a=e,e=void 0),(!0===r||!1===r)&&(a=r,r=void 0),(n(t)&&o(t)||i(t)&&0===t.length)&&(t=void 0),h._isAMomentObject=!0,h._useUTC=h._isUTC=s,h._l=r,h._i=t,h._f=e,h._strict=a,(l=new x(t0(er(h))))._nextDay&&(l.add(1,"d"),l._nextDay=void 0),l}function ea(t,e,i,n){return eo(t,e,i,n,!1)}e.createFromInputFallback=_("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){};var es=_("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ea.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:f()}),el=_("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ea.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:f()});function eh(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return ea();for(r=1,n=e[0];r<e.length;++r)(!e[r].isValid()||e[r][t](n))&&(n=e[r]);return n}var eu=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ec(t){var e=F(t),i=e.year||0,n=e.quarter||0,o=e.month||0,a=e.week||e.isoWeek||0,s=e.day||0,l=e.hour||0,h=e.minute||0,u=e.second||0,c=e.millisecond||0;this._isValid=function(t){var e,i,n=!1,o=eu.length;for(e in t)if(r(t,e)&&!(-1!==tj.call(eu,e)&&(null==t[e]||!isNaN(t[e]))))return!1;for(i=0;i<o;++i)if(t[eu[i]]){if(n)return!1;parseFloat(t[eu[i]])!==tp(t[eu[i]])&&(n=!0)}return!0}(e),this._milliseconds=+c+1e3*u+6e4*h+36e5*l,this._days=+s+7*a,this._months=+o+3*n+12*i,this._data={},this._locale=tJ(),this._bubble()}function ed(t){return t instanceof ec}function ep(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function ef(t,e){L(t,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+A(~~(t/60),2)+e+A(~~t%60,2)})}ef("Z",":"),ef("ZZ",""),tu("Z",ta),tu("ZZ",ta),tg(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=em(ta,t)});var eg=/([\+\-]|\d\d)/gi;function em(t,e){var i,n,r=(e||"").match(t);return null===r?null:0===(n=+(60*(i=((r[r.length-1]||[])+"").match(eg)||["-",0,0])[1])+tp(i[2]))?0:"+"===i[0]?n:-n}function ey(t,i){var n,r;return i._isUTC?(n=i.clone(),r=(S(t)||l(t)?t.valueOf():ea(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),e.updateOffset(n,!1),n):ea(t).local()}function ev(t){return-Math.round(t._d.getTimezoneOffset())}function ew(){return!!this.isValid()&&this._isUTC&&0===this._offset}e.updateOffset=function(){};var eb=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,ex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function eS(t,e){var i,n,o,a,l,h,u=t,c=null;return ed(t)?u={ms:t._milliseconds,d:t._days,M:t._months}:s(t)||!isNaN(+t)?(u={},e?u[e]=+t:u.milliseconds=+t):(c=eb.exec(t))?(a="-"===c[1]?-1:1,u={y:0,d:tp(c[2])*a,h:tp(c[3])*a,m:tp(c[4])*a,s:tp(c[5])*a,ms:tp(ep(1e3*c[6]))*a}):(c=ex.exec(t))?(a="-"===c[1]?-1:1,u={y:eC(c[2],a),M:eC(c[3],a),w:eC(c[4],a),d:eC(c[5],a),h:eC(c[6],a),m:eC(c[7],a),s:eC(c[8],a)}):null==u?u={}:"object"==typeof u&&("from"in u||"to"in u)&&(i=ea(u.from),n=ea(u.to),h=i.isValid()&&n.isValid()?(n=ey(n,i),i.isBefore(n)?o=e_(i,n):((o=e_(n,i)).milliseconds=-o.milliseconds,o.months=-o.months),o):{milliseconds:0,months:0},(u={}).ms=h.milliseconds,u.M=h.months),l=new ec(u),ed(t)&&r(t,"_locale")&&(l._locale=t._locale),ed(t)&&r(t,"_isValid")&&(l._isValid=t._isValid),l}function eC(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function e_(t,e){var i={};return i.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function eM(t,e){return function(i,n){var r;return null===n||isNaN(+n)||(T(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=i,i=n,n=r),eT(this,eS(i,n),t),this}}function eT(t,i,n,r){var o=i._milliseconds,a=ep(i._days),s=ep(i._months);t.isValid()&&(r=null==r||r,s&&tI(t,tx(t,"Month")+s*n),a&&tS(t,"Date",tx(t,"Date")+a*n),o&&t._d.setTime(t._d.valueOf()+o*n),r&&e.updateOffset(t,a||s))}eS.fn=ec.prototype,eS.invalid=function(){return eS(NaN)};var eI=eM(1,"add"),eR=eM(-1,"subtract");function eE(t){return"string"==typeof t||t instanceof String}function eA(t,e){if(t.date()<e.date())return-eA(e,t);var i,n=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(n,"months");return i=e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r),-(n+i)||0}function ek(t){var e;return void 0===t?this._locale._abbr:(null!=(e=tJ(t))&&(this._locale=e),this)}e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var eD=_("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function eO(){return this._locale}function eP(t,e,i){return t<100&&t>=0?new Date(t+400,e,i)-126227808e5:new Date(t,e,i).valueOf()}function eL(t,e,i){return t<100&&t>=0?Date.UTC(t+400,e,i)-126227808e5:Date.UTC(t,e,i)}function eN(t,e){return e.erasAbbrRegex(t)}function eH(){var t,e,i,n,r,o=[],a=[],s=[],l=[],h=this.eras();for(t=0,e=h.length;t<e;++t)i=tc(h[t].name),n=tc(h[t].abbr),r=tc(h[t].narrow),a.push(i),o.push(n),s.push(r),l.push(i),l.push(n),l.push(r);this._erasRegex=RegExp("^("+l.join("|")+")","i"),this._erasNameRegex=RegExp("^("+a.join("|")+")","i"),this._erasAbbrRegex=RegExp("^("+o.join("|")+")","i"),this._erasNarrowRegex=RegExp("^("+s.join("|")+")","i")}function eV(t,e){L(0,[t,t.length],0,e)}function eB(t,e,i,n,r){var o;return null==t?tP(this,n,r).year:(e>(o=tL(t,n,r))&&(e=o),eF.call(this,t,e,i,n,r))}function eF(t,e,i,n,r){var o=tO(t,e,i,n,r),a=tk(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}L("N",0,0,"eraAbbr"),L("NN",0,0,"eraAbbr"),L("NNN",0,0,"eraAbbr"),L("NNNN",0,0,"eraName"),L("NNNNN",0,0,"eraNarrow"),L("y",["y",1],"yo","eraYear"),L("y",["yy",2],0,"eraYear"),L("y",["yyy",3],0,"eraYear"),L("y",["yyyy",4],0,"eraYear"),tu("N",eN),tu("NN",eN),tu("NNN",eN),tu("NNNN",function(t,e){return e.erasNameRegex(t)}),tu("NNNNN",function(t,e){return e.erasNarrowRegex(t)}),tg(["N","NN","NNN","NNNN","NNNNN"],function(t,e,i,n){var r=i._locale.erasParse(t,n,i._strict);r?d(i).era=r:d(i).invalidEra=t}),tu("y",tn),tu("yy",tn),tu("yyy",tn),tu("yyyy",tn),tu("yo",function(t,e){return e._eraYearOrdinalRegex||tn}),tg(["y","yy","yyy","yyyy"],0),tg(["yo"],function(t,e,i,n){var r;i._locale._eraYearOrdinalRegex&&(r=t.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?e[0]=i._locale.eraYearOrdinalParse(t,r):e[0]=parseInt(t,10)}),L(0,["gg",2],0,function(){return this.weekYear()%100}),L(0,["GG",2],0,function(){return this.isoWeekYear()%100}),eV("gggg","weekYear"),eV("ggggg","weekYear"),eV("GGGG","isoWeekYear"),eV("GGGGG","isoWeekYear"),tu("G",tr),tu("g",tr),tu("GG",K,X),tu("gg",K,X),tu("GGGG",te,Z),tu("gggg",te,Z),tu("GGGGG",ti,q),tu("ggggg",ti,q),tm(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=tp(t)}),tm(["gg","GG"],function(t,i,n,r){i[r]=e.parseTwoDigitYear(t)}),L("Q",0,"Qo","quarter"),tu("Q",Y),tg("Q",function(t,e){e[1]=(tp(t)-1)*3}),L("D",["DD",2],"Do","date"),tu("D",K,tl),tu("DD",K,X),tu("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),tg(["D","DD"],2),tg("Do",function(t,e){e[2]=tp(t.match(K)[0])});var eW=tb("Date",!0);L("DDD",["DDDD",3],"DDDo","dayOfYear"),tu("DDD",tt),tu("DDDD",$),tg(["DDD","DDDD"],function(t,e,i){i._dayOfYear=tp(t)}),L("m",["mm",2],0,"minute"),tu("m",K,th),tu("mm",K,X),tg(["m","mm"],4);var ez=tb("Minutes",!1);L("s",["ss",2],0,"second"),tu("s",K,th),tu("ss",K,X),tg(["s","ss"],5);var ej=tb("Seconds",!1);for(L("S",0,0,function(){return~~(this.millisecond()/100)}),L(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),L(0,["SSS",3],0,"millisecond"),L(0,["SSSS",4],0,function(){return 10*this.millisecond()}),L(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),L(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),L(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),L(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),L(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),tu("S",tt,Y),tu("SS",tt,X),tu("SSS",tt,$),g="SSSS";g.length<=9;g+="S")tu(g,tn);function eU(t,e){e[6]=tp(("0."+t)*1e3)}for(g="S";g.length<=9;g+="S")tg(g,eU);m=tb("Milliseconds",!1),L("z",0,0,"zoneAbbr"),L("zz",0,0,"zoneName");var eG=x.prototype;function eY(t){return t}eG.add=eI,eG.calendar=function(t,a){if(1==arguments.length){if(arguments[0]){var h,u,c;(h=arguments[0],S(h)||l(h)||eE(h)||s(h)||(u=i(h),c=!1,u&&(c=0===h.filter(function(t){return!s(t)&&eE(h)}).length),u&&c)||function(t){var e,i,a=n(t)&&!o(t),s=!1,l=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],h=l.length;for(e=0;e<h;e+=1)i=l[e],s=s||r(t,i);return a&&s}(h)||null==h)?(t=arguments[0],a=void 0):function(t){var e,i,a=n(t)&&!o(t),s=!1,l=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<l.length;e+=1)i=l[e],s=s||r(t,i);return a&&s}(arguments[0])&&(a=arguments[0],t=void 0)}else t=void 0,a=void 0}var d=t||ea(),p=ey(d,this).startOf("day"),f=e.calendarFormat(this,p)||"sameElse",g=a&&(I(a[f])?a[f].call(this,d):a[f]);return this.format(g||this.localeData().calendar(f,this,ea(d)))},eG.clone=function(){return new x(this)},eG.diff=function(t,e,i){var n,r,o;if(!this.isValid()||!(n=ey(t,this)).isValid())return NaN;switch(r=(n.utcOffset()-this.utcOffset())*6e4,e=B(e)){case"year":o=eA(this,n)/12;break;case"month":o=eA(this,n);break;case"quarter":o=eA(this,n)/3;break;case"second":o=(this-n)/1e3;break;case"minute":o=(this-n)/6e4;break;case"hour":o=(this-n)/36e5;break;case"day":o=(this-n-r)/864e5;break;case"week":o=(this-n-r)/6048e5;break;default:o=this-n}return i?o:td(o)},eG.endOf=function(t){var i,n;if(void 0===(t=B(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?eL:eP,t){case"year":i=n(this.year()+1,0,1)-1;break;case"quarter":i=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":i=n(this.year(),this.month()+1,1)-1;break;case"week":i=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":i=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":i=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":i=this._d.valueOf(),i+=36e5-((i+(this._isUTC?0:6e4*this.utcOffset()))%36e5+36e5)%36e5-1;break;case"minute":i=this._d.valueOf(),i+=6e4-(i%6e4+6e4)%6e4-1;break;case"second":i=this._d.valueOf(),i+=1e3-(i%1e3+1e3)%1e3-1}return this._d.setTime(i),e.updateOffset(this,!0),this},eG.format=function(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var i=N(this,t);return this.localeData().postformat(i)},eG.from=function(t,e){return this.isValid()&&(S(t)&&t.isValid()||ea(t).isValid())?eS({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},eG.fromNow=function(t){return this.from(ea(),t)},eG.to=function(t,e){return this.isValid()&&(S(t)&&t.isValid()||ea(t).isValid())?eS({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},eG.toNow=function(t){return this.to(ea(),t)},eG.get=function(t){return I(this[t=B(t)])?this[t]():this},eG.invalidAt=function(){return d(this).overflow},eG.isAfter=function(t,e){var i=S(t)?t:ea(t);return!!(this.isValid()&&i.isValid())&&("millisecond"===(e=B(e)||"millisecond")?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())},eG.isBefore=function(t,e){var i=S(t)?t:ea(t);return!!(this.isValid()&&i.isValid())&&("millisecond"===(e=B(e)||"millisecond")?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())},eG.isBetween=function(t,e,i,n){var r=S(t)?t:ea(t),o=S(e)?e:ea(e);return!!(this.isValid()&&r.isValid()&&o.isValid())&&("("===(n=n||"()")[0]?this.isAfter(r,i):!this.isBefore(r,i))&&(")"===n[1]?this.isBefore(o,i):!this.isAfter(o,i))},eG.isSame=function(t,e){var i,n=S(t)?t:ea(t);return!!(this.isValid()&&n.isValid())&&("millisecond"===(e=B(e)||"millisecond")?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))},eG.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},eG.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},eG.isValid=function(){return p(this)},eG.lang=eD,eG.locale=ek,eG.localeData=eO,eG.max=el,eG.min=es,eG.parsingFlags=function(){return u({},d(this))},eG.set=function(t,e){if("object"==typeof t){var i,n=function(t){var e,i=[];for(e in t)r(t,e)&&i.push({unit:e,priority:G[e]});return i.sort(function(t,e){return t.priority-e.priority}),i}(t=F(t)),o=n.length;for(i=0;i<o;i++)this[n[i].unit](t[n[i].unit])}else if(I(this[t=B(t)]))return this[t](e);return this},eG.startOf=function(t){var i,n;if(void 0===(t=B(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?eL:eP,t){case"year":i=n(this.year(),0,1);break;case"quarter":i=n(this.year(),this.month()-this.month()%3,1);break;case"month":i=n(this.year(),this.month(),1);break;case"week":i=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":i=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":i=n(this.year(),this.month(),this.date());break;case"hour":i=this._d.valueOf(),i-=((i+(this._isUTC?0:6e4*this.utcOffset()))%36e5+36e5)%36e5;break;case"minute":i=this._d.valueOf(),i-=(i%6e4+6e4)%6e4;break;case"second":i=this._d.valueOf(),i-=(i%1e3+1e3)%1e3}return this._d.setTime(i),e.updateOffset(this,!0),this},eG.subtract=eR,eG.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},eG.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},eG.toDate=function(){return new Date(this.valueOf())},eG.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return 0>i.year()||i.year()>9999?N(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):I(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+6e4*this.utcOffset()).toISOString().replace("Z",N(i,"Z")):N(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},eG.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,i,n,r="moment",o="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),t="["+r+'("]',e=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",n=o+'[")]',this.format(t+e+i+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(eG[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),eG.toJSON=function(){return this.isValid()?this.toISOString():null},eG.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},eG.unix=function(){return Math.floor(this.valueOf()/1e3)},eG.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},eG.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},eG.eraName=function(){var t,e,i,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(i=this.clone().startOf("day").valueOf(),n[t].since<=i&&i<=n[t].until||n[t].until<=i&&i<=n[t].since)return n[t].name;return""},eG.eraNarrow=function(){var t,e,i,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(i=this.clone().startOf("day").valueOf(),n[t].since<=i&&i<=n[t].until||n[t].until<=i&&i<=n[t].since)return n[t].narrow;return""},eG.eraAbbr=function(){var t,e,i,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(i=this.clone().startOf("day").valueOf(),n[t].since<=i&&i<=n[t].until||n[t].until<=i&&i<=n[t].since)return n[t].abbr;return""},eG.eraYear=function(){var t,i,n,r,o=this.localeData().eras();for(t=0,i=o.length;t<i;++t)if(n=o[t].since<=o[t].until?1:-1,r=this.clone().startOf("day").valueOf(),o[t].since<=r&&r<=o[t].until||o[t].until<=r&&r<=o[t].since)return(this.year()-e(o[t].since).year())*n+o[t].offset;return this.year()},eG.year=tw,eG.isLeapYear=function(){return ty(this.year())},eG.weekYear=function(t){return eB.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)},eG.isoWeekYear=function(t){return eB.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},eG.quarter=eG.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)},eG.month=tR,eG.daysInMonth=function(){return tC(this.year(),this.month())},eG.week=eG.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add((t-e)*7,"d")},eG.isoWeek=eG.isoWeeks=function(t){var e=tP(this,1,4).week;return null==t?e:this.add((t-e)*7,"d")},eG.weeksInYear=function(){var t=this.localeData()._week;return tL(this.year(),t.dow,t.doy)},eG.weeksInWeekYear=function(){var t=this.localeData()._week;return tL(this.weekYear(),t.dow,t.doy)},eG.isoWeeksInYear=function(){return tL(this.year(),1,4)},eG.isoWeeksInISOWeekYear=function(){return tL(this.isoWeekYear(),1,4)},eG.date=eW,eG.day=eG.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e,i,n=tx(this,"Day");return null==t?n:(e=t,i=this.localeData(),t="string"!=typeof e?e:isNaN(e)?"number"==typeof(e=i.weekdaysParse(e))?e:null:parseInt(e,10),this.add(t-n,"d"))},eG.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},eG.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null==t)return this.day()||7;var e,i=(e=this.localeData(),"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?i:i-7)},eG.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},eG.hour=eG.hours=tG,eG.minute=eG.minutes=ez,eG.second=eG.seconds=ej,eG.millisecond=eG.milliseconds=m,eG.utcOffset=function(t,i,n){var r,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?o:ev(this);if("string"==typeof t){if(null===(t=em(ta,t)))return this}else 16>Math.abs(t)&&!n&&(t*=60);return!this._isUTC&&i&&(r=ev(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),o===t||(!i||this._changeInProgress?eT(this,eS(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this},eG.utc=function(t){return this.utcOffset(0,t)},eG.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(ev(this),"m")),this},eG.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=em(to,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},eG.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?ea(t).utcOffset():0,(this.utcOffset()-t)%60==0)},eG.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},eG.isLocal=function(){return!!this.isValid()&&!this._isUTC},eG.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},eG.isUtc=ew,eG.isUTC=ew,eG.zoneAbbr=function(){return this._isUTC?"UTC":""},eG.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},eG.dates=_("dates accessor is deprecated. Use date instead.",eW),eG.months=_("months accessor is deprecated. Use month instead",tR),eG.years=_("years accessor is deprecated. Use year instead",tw),eG.zone=_("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),eG.isDSTShifted=_("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var t,e={};return b(e,this),(e=er(e))._a?(t=e._isUTC?c(e._a):ea(e._a),this._isDSTShifted=this.isValid()&&function(t,e,i){var n,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(n=0;n<r;n++)tp(t[n])!==tp(e[n])&&a++;return a+o}(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var eX=E.prototype;function e$(t,e,i,n){var r=tJ(),o=c().set(n,e);return r[i](o,t)}function eZ(t,e,i){if(s(t)&&(e=t,t=void 0),t=t||"",null!=e)return e$(t,e,i,"month");var n,r=[];for(n=0;n<12;n++)r[n]=e$(t,n,i,"month");return r}function eq(t,e,i,n){"boolean"==typeof t||(i=e=t,t=!1),s(e)&&(i=e,e=void 0),e=e||"";var r,o=tJ(),a=t?o._week.dow:0,l=[];if(null!=i)return e$(e,(i+a)%7,n,"day");for(r=0;r<7;r++)l[r]=e$(e,(r+a)%7,n,"day");return l}eX.calendar=function(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return I(n)?n.call(e,i):n},eX.longDateFormat=function(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.match(k).map(function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t}).join(""),this._longDateFormat[t])},eX.invalidDate=function(){return this._invalidDate},eX.ordinal=function(t){return this._ordinal.replace("%d",t)},eX.preparse=eY,eX.postformat=eY,eX.relativeTime=function(t,e,i,n){var r=this._relativeTime[i];return I(r)?r(t,e,i,n):r.replace(/%d/i,t)},eX.pastFuture=function(t,e){var i=this._relativeTime[t>0?"future":"past"];return I(i)?i(e):i.replace(/%s/i,e)},eX.set=function(t){var e,i;for(i in t)r(t,i)&&(I(e=t[i])?this[i]=e:this["_"+i]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},eX.eras=function(t,i){var n,r,o,a=this._eras||tJ("en")._eras;for(n=0,r=a.length;n<r;++n)switch("string"==typeof a[n].since&&(o=e(a[n].since).startOf("day"),a[n].since=o.valueOf()),typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":o=e(a[n].until).startOf("day").valueOf(),a[n].until=o.valueOf()}return a},eX.erasParse=function(t,e,i){var n,r,o,a,s,l=this.eras();for(n=0,t=t.toUpperCase(),r=l.length;n<r;++n)if(o=l[n].name.toUpperCase(),a=l[n].abbr.toUpperCase(),s=l[n].narrow.toUpperCase(),i)switch(e){case"N":case"NN":case"NNN":if(a===t)return l[n];break;case"NNNN":if(o===t)return l[n];break;case"NNNNN":if(s===t)return l[n]}else if([o,a,s].indexOf(t)>=0)return l[n]},eX.erasConvertYear=function(t,i){var n=t.since<=t.until?1:-1;return void 0===i?e(t.since).year():e(t.since).year()+(i-t.offset)*n},eX.erasAbbrRegex=function(t){return r(this,"_erasAbbrRegex")||eH.call(this),t?this._erasAbbrRegex:this._erasRegex},eX.erasNameRegex=function(t){return r(this,"_erasNameRegex")||eH.call(this),t?this._erasNameRegex:this._erasRegex},eX.erasNarrowRegex=function(t){return r(this,"_erasNarrowRegex")||eH.call(this),t?this._erasNarrowRegex:this._erasRegex},eX.months=function(t,e){return t?i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||tM).test(e)?"format":"standalone"][t.month()]:i(this._months)?this._months:this._months.standalone},eX.monthsShort=function(t,e){return t?i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[tM.test(e)?"format":"standalone"][t.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},eX.monthsParse=function(t,e,i){var n,r,o;if(this._monthsParseExact)return tT.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++)if(r=c([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=RegExp(o.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t)||i&&"MMM"===e&&this._shortMonthsParse[n].test(t)||!i&&this._monthsParse[n].test(t))return n},eX.monthsRegex=function(t){return this._monthsParseExact?(r(this,"_monthsRegex")||tE.call(this),t)?this._monthsStrictRegex:this._monthsRegex:(r(this,"_monthsRegex")||(this._monthsRegex=ts),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},eX.monthsShortRegex=function(t){return this._monthsParseExact?(r(this,"_monthsRegex")||tE.call(this),t)?this._monthsShortStrictRegex:this._monthsShortRegex:(r(this,"_monthsShortRegex")||(this._monthsShortRegex=ts),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},eX.week=function(t){return tP(t,this._week.dow,this._week.doy).week},eX.firstDayOfYear=function(){return this._week.doy},eX.firstDayOfWeek=function(){return this._week.dow},eX.weekdays=function(t,e){var n=i(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?tN(n,this._week.dow):t?n[t.day()]:n},eX.weekdaysMin=function(t){return!0===t?tN(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},eX.weekdaysShort=function(t){return!0===t?tN(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},eX.weekdaysParse=function(t,e,i){var n,r,o;if(this._weekdaysParseExact)return tV.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(r=c([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=RegExp(o.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t)||i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}},eX.weekdaysRegex=function(t){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||tB.call(this),t)?this._weekdaysStrictRegex:this._weekdaysRegex:(r(this,"_weekdaysRegex")||(this._weekdaysRegex=ts),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},eX.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||tB.call(this),t)?this._weekdaysShortStrictRegex:this._weekdaysShortRegex:(r(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ts),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},eX.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||tB.call(this),t)?this._weekdaysMinStrictRegex:this._weekdaysMinRegex:(r(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ts),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},eX.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},eX.meridiem=function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},tK("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===tp(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),e.lang=_("moment.lang is deprecated. Use moment.locale instead.",tK),e.langData=_("moment.langData is deprecated. Use moment.localeData instead.",tJ);var eK=Math.abs;function eQ(t,e,i,n){var r=eS(e,i);return t._milliseconds+=n*r._milliseconds,t._days+=n*r._days,t._months+=n*r._months,t._bubble()}function eJ(t){return t<0?Math.floor(t):Math.ceil(t)}function e0(t){return 4800*t/146097}function e1(t){return 146097*t/4800}function e2(t){return function(){return this.as(t)}}var e5=e2("ms"),e3=e2("s"),e4=e2("m"),e6=e2("h"),e8=e2("d"),e9=e2("w"),e7=e2("M"),it=e2("Q"),ie=e2("y");function ii(t){return function(){return this.isValid()?this._data[t]:NaN}}var ir=ii("milliseconds"),io=ii("seconds"),ia=ii("minutes"),is=ii("hours"),il=ii("days"),ih=ii("months"),iu=ii("years"),ic=Math.round,id={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ip(t,e,i,n,r){return r.relativeTime(e||1,!!i,t,n)}var ig=Math.abs;function im(t){return(t>0)-(t<0)||+t}function iy(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i,n,r,o,a,s,l=ig(this._milliseconds)/1e3,h=ig(this._days),u=ig(this._months),c=this.asSeconds();return c?(t=td(l/60),e=td(t/60),l%=60,t%=60,i=td(u/12),u%=12,n=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=c<0?"-":"",o=im(this._months)!==im(c)?"-":"",a=im(this._days)!==im(c)?"-":"",s=im(this._milliseconds)!==im(c)?"-":"",r+"P"+(i?o+i+"Y":"")+(u?o+u+"M":"")+(h?a+h+"D":"")+(e||t||l?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(l?s+n+"S":"")):"P0D"}var iv=ec.prototype;return iv.isValid=function(){return this._isValid},iv.abs=function(){var t=this._data;return this._milliseconds=eK(this._milliseconds),this._days=eK(this._days),this._months=eK(this._months),t.milliseconds=eK(t.milliseconds),t.seconds=eK(t.seconds),t.minutes=eK(t.minutes),t.hours=eK(t.hours),t.months=eK(t.months),t.years=eK(t.years),this},iv.add=function(t,e){return eQ(this,t,e,1)},iv.subtract=function(t,e){return eQ(this,t,e,-1)},iv.as=function(t){if(!this.isValid())return NaN;var e,i,n=this._milliseconds;if("month"===(t=B(t))||"quarter"===t||"year"===t)switch(e=this._days+n/864e5,i=this._months+e0(e),t){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(e=this._days+Math.round(e1(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw Error("Unknown unit "+t)}},iv.asMilliseconds=e5,iv.asSeconds=e3,iv.asMinutes=e4,iv.asHours=e6,iv.asDays=e8,iv.asWeeks=e9,iv.asMonths=e7,iv.asQuarters=it,iv.asYears=ie,iv.valueOf=e5,iv._bubble=function(){var t,e,i,n,r,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*eJ(e1(s)+a),a=0,s=0),l.milliseconds=o%1e3,t=td(o/1e3),l.seconds=t%60,e=td(t/60),l.minutes=e%60,i=td(e/60),l.hours=i%24,a+=td(i/24),s+=r=td(e0(a)),a-=eJ(e1(r)),n=td(s/12),s%=12,l.days=a,l.months=s,l.years=n,this},iv.clone=function(){return eS(this)},iv.get=function(t){return t=B(t),this.isValid()?this[t+"s"]():NaN},iv.milliseconds=ir,iv.seconds=io,iv.minutes=ia,iv.hours=is,iv.days=il,iv.weeks=function(){return td(this.days()/7)},iv.months=ih,iv.years=iu,iv.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var i,n,r,o,a,s,l,h,u,c,d,p,f,g=!1,m=id;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(g=t),"object"==typeof e&&(m=Object.assign({},id,e),null!=e.s&&null==e.ss&&(m.ss=e.s-1)),p=this.localeData(),i=!g,n=m,r=eS(this).abs(),o=ic(r.as("s")),a=ic(r.as("m")),s=ic(r.as("h")),l=ic(r.as("d")),h=ic(r.as("M")),u=ic(r.as("w")),c=ic(r.as("y")),d=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l],null!=n.w&&(d=d||u<=1&&["w"]||u<n.w&&["ww",u]),(d=d||h<=1&&["M"]||h<n.M&&["MM",h]||c<=1&&["y"]||["yy",c])[2]=i,d[3]=+this>0,d[4]=p,f=ip.apply(null,d),g&&(f=p.pastFuture(+this,f)),p.postformat(f)},iv.toISOString=iy,iv.toString=iy,iv.toJSON=iy,iv.locale=ek,iv.localeData=eO,iv.toIsoString=_("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",iy),iv.lang=eD,L("X",0,0,"unix"),L("x",0,0,"valueOf"),tu("x",tr),tu("X",/[+-]?\d+(\.\d{1,3})?/),tg("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t))}),tg("x",function(t,e,i){i._d=new Date(tp(t))}),e.version="2.30.1",W=ea,e.fn=eG,e.min=function(){var t=[].slice.call(arguments,0);return eh("isBefore",t)},e.max=function(){var t=[].slice.call(arguments,0);return eh("isAfter",t)},e.now=function(){return Date.now?Date.now():+new Date},e.utc=c,e.unix=function(t){return ea(1e3*t)},e.months=function(t,e){return eZ(t,e,"months")},e.isDate=l,e.locale=tK,e.invalid=f,e.duration=eS,e.isMoment=S,e.weekdays=function(t,e,i){return eq(t,e,i,"weekdays")},e.parseZone=function(){return ea.apply(null,arguments).parseZone()},e.localeData=tJ,e.isDuration=ed,e.monthsShort=function(t,e){return eZ(t,e,"monthsShort")},e.weekdaysMin=function(t,e,i){return eq(t,e,i,"weekdaysMin")},e.defineLocale=tQ,e.updateLocale=function(t,e){if(null!=e){var i,n,r=tY;null!=tX[t]&&null!=tX[t].parentLocale?tX[t].set(R(tX[t]._config,e)):(null!=(n=tq(t))&&(r=n._config),e=R(r,e),null==n&&(e.abbr=t),(i=new E(e)).parentLocale=tX[t],tX[t]=i),tK(t)}else null!=tX[t]&&(null!=tX[t].parentLocale?(tX[t]=tX[t].parentLocale,t===tK()&&tK(t)):null!=tX[t]&&delete tX[t]);return tX[t]},e.locales=function(){return j(tX)},e.weekdaysShort=function(t,e,i){return eq(t,e,i,"weekdaysShort")},e.normalizeUnits=B,e.relativeTimeRounding=function(t){return void 0===t?ic:"function"==typeof t&&(ic=t,!0)},e.relativeTimeThreshold=function(t,e){return void 0!==id[t]&&(void 0===e?id[t]:(id[t]=e,"s"===t&&(id.ss=e-1),!0))},e.calendarFormat=function(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},e.prototype=eG,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e},t.exports=i()}),t6("bTWiY",function(t,e){n(t.exports,"dateValidator",()=>l);var r=t4("45fvw"),o=t4("jxqWV"),a=t4("iMgTM"),s=t4("7cVHX");function l(t,e){let n=(0,o.getEditorInstance)(a.EDITOR_TYPE,this.instance),l=t,h=!0;null==l&&(l="");let u=i(r)(l,this.dateFormat||n.defaultDateFormat,!0).isValid(),c=i(r)(new Date(l)).isValid()||u;if(this.allowEmpty&&""===l&&(c=!0,u=!0),c||(h=!1),!c&&u&&(h=!0),c&&!u){if(!0===this.correctFormat){let t=function(t,e){let n=i(r)((0,s.getNormalizedDate)(t)),o=i(r)(t,e),a=t.search(/[A-z]/g)>-1;return(n.isValid()&&n.format("x")===o.format("x")||!o.isValid()||a?n:o).format(e)}(l,this.dateFormat);this.instance.setDataAtCell(this.visualRow,this.visualCol,t,"dateValidator"),h=!0}else h=!1}e(h)}l.VALIDATOR_TYPE="date"}),t6("jxqWV",function(t,e){n(t.exports,"hasEditor",()=>l),n(t.exports,"getRegisteredEditorNames",()=>h),n(t.exports,"registerEditor",()=>f),n(t.exports,"getEditor",()=>p),n(t.exports,"getEditorInstance",()=>d),t4("1C6fS");var i=t4("10euP"),r=t4("lSZ9A");let o=new WeakMap,{register:a,getItem:s,hasItem:l,getNames:h,getValues:u}=(0,r.default)("editors");function c(t){let e={};this.getConstructor=function(){return t},this.getInstance=function(i){return i.guid in e||(e[i.guid]=new t(i)),e[i.guid]},(0,i.default).getSingleton().add("afterDestroy",function(){e[this.guid]=null})}function d(t,e){let i;if("function"==typeof t)o.get(t)||f(null,t),i=o.get(t);else if("string"==typeof t)i=s(t);else throw Error('Only strings and functions can be passed as "editor" parameter');if(!i)throw Error(`No editor registered under name "${t}"`);return i.getInstance(e)}function p(t){if("function"==typeof t)return t;if(!l(t))throw Error(`No registered editor found under "${t}" name`);return s(t).getConstructor()}function f(t,e){t&&"string"!=typeof t&&(t=(e=t).EDITOR_TYPE);let i=new c(e);"string"==typeof t&&a(t,i),o.set(e,i)}}),t6("1C6fS",function(t,e){var i=t4("hmx0d"),n=t4("7mb70"),r=t4("5dW2a"),o=t4("g4JpJ"),a="WebAssembly",s=n[a],l=7!==Error("e",{cause:7}).cause,h=function(t,e){var n={};n[t]=o(t,e,l),i({global:!0,constructor:!0,arity:1,forced:l},n)},u=function(t,e){if(s&&s[t]){var n={};n[t]=o(a+"."+t,e,l),i({target:a,stat:!0,constructor:!0,arity:1,forced:l},n)}};h("Error",function(t){return function(e){return r(t,this,arguments)}}),h("EvalError",function(t){return function(e){return r(t,this,arguments)}}),h("RangeError",function(t){return function(e){return r(t,this,arguments)}}),h("ReferenceError",function(t){return function(e){return r(t,this,arguments)}}),h("SyntaxError",function(t){return function(e){return r(t,this,arguments)}}),h("TypeError",function(t){return function(e){return r(t,this,arguments)}}),h("URIError",function(t){return function(e){return r(t,this,arguments)}}),u("CompileError",function(t){return function(e){return r(t,this,arguments)}}),u("LinkError",function(t){return function(e){return r(t,this,arguments)}}),u("RuntimeError",function(t){return function(e){return r(t,this,arguments)}})}),t6("hmx0d",function(t,e){var i=t4("7mb70"),n=t4("9po1L").f,r=t4("bylnm"),o=t4("5zwnU"),a=t4("6BhPC"),s=t4("kwCyx"),l=t4("hm2ET");t.exports=function(t,e){var h,u,c,d,p,f=t.target,g=t.global,m=t.stat;if(h=g?i:m?i[f]||a(f,{}):i[f]&&i[f].prototype)for(u in e){if(d=e[u],c=t.dontCallGetSet?(p=n(h,u))&&p.value:h[u],!l(g?u:f+(m?".":"#")+u,t.forced)&&void 0!==c){if(typeof d==typeof c)continue;s(d,c)}(t.sham||c&&c.sham)&&r(d,"sham",!0),o(h,u,d,t)}}}),t6("7mb70",function(t,e){var i=function(t){return t&&t.Math===Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof t2&&t2)||i("object"==typeof t.exports&&t.exports)||function(){return this}()||Function("return this")()}),t6("9po1L",function(t,e){n(t.exports,"f",()=>i,t=>i=t);var i,r=t4("kxexm"),o=t4("bGtV7"),a=t4("2zQpY"),s=t4("fEYls"),l=t4("6CGth"),h=t4("aUydt"),u=t4("2HOcD"),c=t4("ieeYC"),d=Object.getOwnPropertyDescriptor;i=r?d:function(t,e){if(t=l(t),e=h(e),c)try{return d(t,e)}catch(t){}if(u(t,e))return s(!o(a.f,t,e),t[e])}}),t6("kxexm",function(t,e){var i=t4("8lFU3");t.exports=!i(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})}),t6("8lFU3",function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}}),t6("bGtV7",function(t,e){var i=t4("gcG3g"),n=Function.prototype.call;t.exports=i?n.bind(n):function(){return n.apply(n,arguments)}}),t6("gcG3g",function(t,e){var i=t4("8lFU3");t.exports=!i(function(){var t=(function(){}).bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})}),t6("2zQpY",function(t,e){n(t.exports,"f",()=>i,t=>i=t);var i,r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor;i=o&&!r.call({1:2},1)?function(t){var e=o(this,t);return!!e&&e.enumerable}:r}),t6("fEYls",function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}}),t6("6CGth",function(t,e){var i=t4("bbbU8"),n=t4("gMtBp");t.exports=function(t){return i(n(t))}}),t6("bbbU8",function(t,e){var i=t4("5Okwt"),n=t4("8lFU3"),r=t4("faIBy"),o=Object,a=i("".split);t.exports=n(function(){return!o("z").propertyIsEnumerable(0)})?function(t){return"String"===r(t)?a(t,""):o(t)}:o}),t6("5Okwt",function(t,e){var i=t4("gcG3g"),n=Function.prototype,r=n.call,o=i&&n.bind.bind(r,r);t.exports=i?o:function(t){return function(){return r.apply(t,arguments)}}}),t6("faIBy",function(t,e){var i=t4("5Okwt"),n=i({}.toString),r=i("".slice);t.exports=function(t){return r(n(t),8,-1)}}),t6("gMtBp",function(t,e){var i=t4("aIKND"),n=TypeError;t.exports=function(t){if(i(t))throw new n("Can't call method on "+t);return t}}),t6("aIKND",function(t,e){t.exports=function(t){return null==t}}),t6("aUydt",function(t,e){var i=t4("cmpCY"),n=t4("XW8Vm");t.exports=function(t){var e=i(t,"string");return n(e)?e:e+""}}),t6("cmpCY",function(t,e){var i=t4("bGtV7"),n=t4("96Da4"),r=t4("XW8Vm"),o=t4("kdzTk"),a=t4("fc07P"),s=t4("blCy8"),l=TypeError,h=s("toPrimitive");t.exports=function(t,e){if(!n(t)||r(t))return t;var s,u=o(t,h);if(u){if(void 0===e&&(e="default"),!n(s=i(u,t,e))||r(s))return s;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}}),t6("96Da4",function(t,e){var i=t4("9GTLg");t.exports=function(t){return"object"==typeof t?null!==t:i(t)}}),t6("9GTLg",function(t,e){var i="object"==typeof document&&document.all;t.exports=void 0===i&&void 0!==i?function(t){return"function"==typeof t||t===i}:function(t){return"function"==typeof t}}),t6("XW8Vm",function(t,e){var i=t4("eaZdY"),n=t4("9GTLg"),r=t4("5Ef1u"),o=t4("6aX88"),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return n(e)&&r(e.prototype,a(t))}}),t6("eaZdY",function(t,e){var i=t4("7mb70"),n=t4("9GTLg");t.exports=function(t,e){var r;return arguments.length<2?n(r=i[t])?r:void 0:i[t]&&i[t][e]}}),t6("5Ef1u",function(t,e){var i=t4("5Okwt");t.exports=i({}.isPrototypeOf)}),t6("6aX88",function(t,e){var i=t4("6n5Js");t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}),t6("6n5Js",function(t,e){var i=t4("dbmhE"),n=t4("8lFU3"),r=t4("7mb70").String;t.exports=!!Object.getOwnPropertySymbols&&!n(function(){var t=Symbol("symbol detection");return!r(t)||!(Object(t) instanceof Symbol)||!Symbol.sham&&i&&i<41})}),t6("dbmhE",function(t,e){var i,n,r=t4("7mb70"),o=t4("6hv4b"),a=r.process,s=r.Deno,l=a&&a.versions||s&&s.version,h=l&&l.v8;h&&(n=(i=h.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!n&&o&&(!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/))&&(n=+i[1]),t.exports=n}),t6("6hv4b",function(t,e){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""}),t6("kdzTk",function(t,e){var i=t4("eXHxq"),n=t4("aIKND");t.exports=function(t,e){var r=t[e];return n(r)?void 0:i(r)}}),t6("eXHxq",function(t,e){var i=t4("9GTLg"),n=t4("chuuX"),r=TypeError;t.exports=function(t){if(i(t))return t;throw new r(n(t)+" is not a function")}}),t6("chuuX",function(t,e){var i=String;t.exports=function(t){try{return i(t)}catch(t){return"Object"}}}),t6("fc07P",function(t,e){var i=t4("bGtV7"),n=t4("9GTLg"),r=t4("96Da4"),o=TypeError;t.exports=function(t,e){var a,s;if("string"===e&&n(a=t.toString)&&!r(s=i(a,t))||n(a=t.valueOf)&&!r(s=i(a,t))||"string"!==e&&n(a=t.toString)&&!r(s=i(a,t)))return s;throw new o("Can't convert object to primitive value")}}),t6("blCy8",function(t,e){var i=t4("7mb70"),n=t4("2axMY"),r=t4("2HOcD"),o=t4("84zlK"),a=t4("6n5Js"),s=t4("6aX88"),l=i.Symbol,h=n("wks"),u=s?l.for||l:l&&l.withoutSetter||o;t.exports=function(t){return r(h,t)||(h[t]=a&&r(l,t)?l[t]:u("Symbol."+t)),h[t]}}),t6("2axMY",function(t,e){var i=t4("hRrSO");t.exports=function(t,e){return i[t]||(i[t]=e||{})}}),t6("hRrSO",function(t,e){var i=t4("jfGLK"),n=t4("7mb70"),r=t4("6BhPC"),o="__core-js_shared__",a=t.exports=n[o]||r(o,{});(a.versions||(a.versions=[])).push({version:"3.37.0",mode:i?"pure":"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),t6("jfGLK",function(t,e){t.exports=!1}),t6("6BhPC",function(t,e){var i=t4("7mb70"),n=Object.defineProperty;t.exports=function(t,e){try{n(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}}),t6("2HOcD",function(t,e){var i=t4("5Okwt"),n=t4("dZoqA"),r=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return r(n(t),e)}}),t6("dZoqA",function(t,e){var i=t4("gMtBp"),n=Object;t.exports=function(t){return n(i(t))}}),t6("84zlK",function(t,e){var i=t4("5Okwt"),n=0,r=Math.random(),o=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++n+r,36)}}),t6("ieeYC",function(t,e){var i=t4("kxexm"),n=t4("8lFU3"),r=t4("1RN1j");t.exports=!i&&!n(function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a})}),t6("1RN1j",function(t,e){var i=t4("7mb70"),n=t4("96Da4"),r=i.document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}}),t6("bylnm",function(t,e){var i=t4("kxexm"),n=t4("3RKYQ"),r=t4("fEYls");t.exports=i?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}}),t6("3RKYQ",function(t,e){n(t.exports,"f",()=>i,t=>i=t);var i,r=t4("kxexm"),o=t4("ieeYC"),a=t4("1TEKD"),s=t4("hc2VB"),l=t4("aUydt"),h=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d="enumerable",p="configurable",f="writable";i=r?a?function(t,e,i){if(s(t),e=l(e),s(i),"function"==typeof t&&"prototype"===e&&"value"in i&&f in i&&!i[f]){var n=c(t,e);n&&n[f]&&(t[e]=i.value,i={configurable:p in i?i[p]:n[p],enumerable:d in i?i[d]:n[d],writable:!1})}return u(t,e,i)}:u:function(t,e,i){if(s(t),e=l(e),s(i),o)try{return u(t,e,i)}catch(t){}if("get"in i||"set"in i)throw new h("Accessors not supported");return"value"in i&&(t[e]=i.value),t}}),t6("1TEKD",function(t,e){var i=t4("kxexm"),n=t4("8lFU3");t.exports=i&&n(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})}),t6("hc2VB",function(t,e){var i=t4("96Da4"),n=String,r=TypeError;t.exports=function(t){if(i(t))return t;throw new r(n(t)+" is not an object")}}),t6("5zwnU",function(t,e){var i=t4("9GTLg"),n=t4("3RKYQ"),r=t4("Q0KqA"),o=t4("6BhPC");t.exports=function(t,e,a,s){s||(s={});var l=s.enumerable,h=void 0!==s.name?s.name:e;if(i(a)&&r(a,h,s),s.global)l?t[e]=a:o(e,a);else{try{s.unsafe?t[e]&&(l=!0):delete t[e]}catch(t){}l?t[e]=a:n.f(t,e,{value:a,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}}),t6("Q0KqA",function(t,e){var i=t4("5Okwt"),n=t4("8lFU3"),r=t4("9GTLg"),o=t4("2HOcD"),a=t4("kxexm"),s=t4("b8MME").CONFIGURABLE,l=t4("dbqDy"),h=t4("51DEQ"),u=h.enforce,c=h.get,d=String,p=Object.defineProperty,f=i("".slice),g=i("".replace),m=i([].join),y=a&&!n(function(){return 8!==p(function(){},"length",{value:8}).length}),w=String(String).split("String"),b=t.exports=function(t,e,i){"Symbol("===f(d(e),0,7)&&(e="["+g(d(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(e="get "+e),i&&i.setter&&(e="set "+e),(!o(t,"name")||s&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),y&&i&&o(i,"arity")&&t.length!==i.arity&&p(t,"length",{value:i.arity});try{i&&o(i,"constructor")&&i.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=u(t);return o(n,"source")||(n.source=m(w,"string"==typeof e?e:"")),t};Function.prototype.toString=b(function(){return r(this)&&c(this).source||l(this)},"toString")}),t6("b8MME",function(t,e){var i=t4("kxexm"),n=t4("2HOcD"),r=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=n(r,"name"),s=a&&(!i||i&&o(r,"name").configurable);t.exports={EXISTS:a,PROPER:a&&"something"===(function(){}).name,CONFIGURABLE:s}}),t6("dbqDy",function(t,e){var i=t4("5Okwt"),n=t4("9GTLg"),r=t4("hRrSO"),o=i(Function.toString);n(r.inspectSource)||(r.inspectSource=function(t){return o(t)}),t.exports=r.inspectSource}),t6("51DEQ",function(t,e){var i,n,r,o=t4("6amDj"),a=t4("7mb70"),s=t4("96Da4"),l=t4("bylnm"),h=t4("2HOcD"),u=t4("hRrSO"),c=t4("bgRz0"),d=t4("dGabS"),p="Object already initialized",f=a.TypeError,g=a.WeakMap;if(o||u.state){var m=u.state||(u.state=new g);m.get=m.get,m.has=m.has,m.set=m.set,i=function(t,e){if(m.has(t))throw new f(p);return e.facade=t,m.set(t,e),e},n=function(t){return m.get(t)||{}},r=function(t){return m.has(t)}}else{var y=c("state");d[y]=!0,i=function(t,e){if(h(t,y))throw new f(p);return e.facade=t,l(t,y,e),e},n=function(t){return h(t,y)?t[y]:{}},r=function(t){return h(t,y)}}t.exports={set:i,get:n,has:r,enforce:function(t){return r(t)?n(t):i(t,{})},getterFor:function(t){return function(e){var i;if(!s(e)||(i=n(e)).type!==t)throw new f("Incompatible receiver, "+t+" required");return i}}}}),t6("6amDj",function(t,e){var i=t4("7mb70"),n=t4("9GTLg"),r=i.WeakMap;t.exports=n(r)&&/native code/.test(String(r))}),t6("bgRz0",function(t,e){var i=t4("2axMY"),n=t4("84zlK"),r=i("keys");t.exports=function(t){return r[t]||(r[t]=n(t))}}),t6("dGabS",function(t,e){t.exports={}}),t6("kwCyx",function(t,e){var i=t4("2HOcD"),n=t4("4qMpp"),r=t4("9po1L"),o=t4("3RKYQ");t.exports=function(t,e,a){for(var s=n(e),l=o.f,h=r.f,u=0;u<s.length;u++){var c=s[u];i(t,c)||a&&i(a,c)||l(t,c,h(e,c))}}}),t6("4qMpp",function(t,e){var i=t4("eaZdY"),n=t4("5Okwt"),r=t4("lbvB0"),o=t4("1gYLQ"),a=t4("hc2VB"),s=n([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=r.f(a(t)),i=o.f;return i?s(e,i(t)):e}}),t6("lbvB0",function(t,e){n(t.exports,"f",()=>i,t=>i=t);var i,r=t4("gUxdt"),o=t4("jQUZd").concat("length","prototype");i=Object.getOwnPropertyNames||function(t){return r(t,o)}}),t6("gUxdt",function(t,e){var i=t4("5Okwt"),n=t4("2HOcD"),r=t4("6CGth"),o=t4("kBDFQ").indexOf,a=t4("dGabS"),s=i([].push);t.exports=function(t,e){var i,l=r(t),h=0,u=[];for(i in l)!n(a,i)&&n(l,i)&&s(u,i);for(;e.length>h;)n(l,i=e[h++])&&(~o(u,i)||s(u,i));return u}}),t6("kBDFQ",function(t,e){var i=t4("6CGth"),n=t4("2ES4E"),r=t4("ptmgx"),o=function(t){return function(e,o,a){var s,l=i(e),h=r(l);if(0===h)return!t&&-1;var u=n(a,h);if(t&&o!=o){for(;h>u;)if((s=l[u++])!=s)return!0}else for(;h>u;u++)if((t||u in l)&&l[u]===o)return t||u||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}}),t6("2ES4E",function(t,e){var i=t4("fBlGn"),n=Math.max,r=Math.min;t.exports=function(t,e){var o=i(t);return o<0?n(o+e,0):r(o,e)}}),t6("fBlGn",function(t,e){var i=t4("7aV2g");t.exports=function(t){var e=+t;return e!=e||0===e?0:i(e)}}),t6("7aV2g",function(t,e){var i=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var e=+t;return(e>0?n:i)(e)}}),t6("ptmgx",function(t,e){var i=t4("6pMmI");t.exports=function(t){return i(t.length)}}),t6("6pMmI",function(t,e){var i=t4("fBlGn"),n=Math.min;t.exports=function(t){var e=i(t);return e>0?n(e,9007199254740991):0}}),t6("jQUZd",function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),t6("1gYLQ",function(t,e){var i;n(t.exports,"f",()=>i,t=>i=t),i=Object.getOwnPropertySymbols}),t6("hm2ET",function(t,e){var i=t4("8lFU3"),n=t4("9GTLg"),r=/#|\.prototype\./,o=function(t,e){var r=s[a(t)];return r===h||r!==l&&(n(e)?i(e):!!e)},a=o.normalize=function(t){return String(t).replace(r,".").toLowerCase()},s=o.data={},l=o.NATIVE="N",h=o.POLYFILL="P";t.exports=o}),t6("5dW2a",function(t,e){var i=t4("gcG3g"),n=Function.prototype,r=n.apply,o=n.call;t.exports="object"==typeof Reflect&&Reflect.apply||(i?o.bind(r):function(){return o.apply(r,arguments)})}),t6("g4JpJ",function(t,e){var i=t4("eaZdY"),n=t4("2HOcD"),r=t4("bylnm"),o=t4("5Ef1u"),a=t4("86ypM"),s=t4("kwCyx"),l=t4("4N46w"),h=t4("hc27f"),u=t4("kZ0Uj"),c=t4("uRxC1"),d=t4("fze5Y"),p=t4("kxexm"),f=t4("jfGLK");t.exports=function(t,e,g,m){var y="stackTraceLimit",w=m?2:1,b=t.split("."),x=b[b.length-1],S=i.apply(null,b);if(S){var C=S.prototype;if(!f&&n(C,"cause")&&delete C.cause,!g)return S;var _=i("Error"),M=e(function(t,e){var i=u(m?e:t,void 0),n=m?new S(t):new S;return void 0!==i&&r(n,"message",i),d(n,M,n.stack,2),this&&o(C,this)&&h(n,this,M),arguments.length>w&&c(n,arguments[w]),n});if(M.prototype=C,"Error"!==x?a?a(M,_):s(M,_,{name:!0}):p&&y in S&&(l(M,S,y),l(M,S,"prepareStackTrace")),s(M,S),!f)try{C.name!==x&&r(C,"name",x),C.constructor=M}catch(t){}return M}}}),t6("86ypM",function(t,e){var i=t4("eH2QD"),n=t4("96Da4"),r=t4("gMtBp"),o=t4("igRk2");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,a={};try{(t=i(Object.prototype,"__proto__","set"))(a,[]),e=a instanceof Array}catch(t){}return function(i,a){return r(i),o(a),n(i)&&(e?t(i,a):i.__proto__=a),i}}():void 0)}),t6("eH2QD",function(t,e){var i=t4("5Okwt"),n=t4("eXHxq");t.exports=function(t,e,r){try{return i(n(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}}),t6("igRk2",function(t,e){var i=t4("64ANw"),n=String,r=TypeError;t.exports=function(t){if(i(t))return t;throw new r("Can't set "+n(t)+" as a prototype")}}),t6("64ANw",function(t,e){var i=t4("96Da4");t.exports=function(t){return i(t)||null===t}}),t6("4N46w",function(t,e){var i=t4("3RKYQ").f;t.exports=function(t,e,n){n in t||i(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}}),t6("hc27f",function(t,e){var i=t4("9GTLg"),n=t4("96Da4"),r=t4("86ypM");t.exports=function(t,e,o){var a,s;return r&&i(a=e.constructor)&&a!==o&&n(s=a.prototype)&&s!==o.prototype&&r(t,s),t}}),t6("kZ0Uj",function(t,e){var i=t4("jqSLA");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:i(t)}}),t6("jqSLA",function(t,e){var i=t4("f9qXf"),n=String;t.exports=function(t){if("Symbol"===i(t))throw TypeError("Cannot convert a Symbol value to a string");return n(t)}}),t6("f9qXf",function(t,e){var i=t4("dYl9B"),n=t4("9GTLg"),r=t4("faIBy"),o=t4("blCy8")("toStringTag"),a=Object,s="Arguments"===r(function(){return arguments}()),l=function(t,e){try{return t[e]}catch(t){}};t.exports=i?r:function(t){var e,i,h;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=l(e=a(t),o))?i:s?r(e):"Object"===(h=r(e))&&n(e.callee)?"Arguments":h}}),t6("dYl9B",function(t,e){var i=t4("blCy8")("toStringTag"),n={};n[i]="z",t.exports="[object z]"===String(n)}),t6("uRxC1",function(t,e){var i=t4("96Da4"),n=t4("bylnm");t.exports=function(t,e){i(e)&&"cause"in e&&n(t,"cause",e.cause)}}),t6("fze5Y",function(t,e){var i=t4("bylnm"),n=t4("aqrkN"),r=t4("gmQfy"),o=Error.captureStackTrace;t.exports=function(t,e,a,s){r&&(o?o(t,e):i(t,"stack",n(a,s)))}}),t6("aqrkN",function(t,e){var i=t4("5Okwt"),n=Error,r=i("".replace),o=String(new n("zxcasd").stack),a=/\n\s*at [^:]*:[^\n]*/,s=a.test(o);t.exports=function(t,e){if(s&&"string"==typeof t&&!n.prepareStackTrace)for(;e--;)t=r(t,a,"");return t}}),t6("gmQfy",function(t,e){var i=t4("8lFU3"),n=t4("fEYls");t.exports=!i(function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",n(1,7)),7!==t.stack)})}),t6("10euP",function(t,e){n(t.exports,"default",()=>m),t4("1C6fS"),t4("1hIp0"),t4("6u6Md");var i=t4("ceXML"),r=t4("hwT6B"),o=t4("bO142"),a=t4("jlXkd"),s=t4("iCsRe"),l=t4("f3221");let h=["afterCellMetaReset","afterChange","afterContextMenuDefaultOptions","beforeContextMenuSetItems","afterDropdownMenuDefaultOptions","beforeDropdownMenuSetItems","afterContextMenuHide","beforeContextMenuShow","afterContextMenuShow","afterCopyLimit","beforeCreateCol","afterColumnSequenceChange","afterCreateCol","beforeCreateRow","afterCreateRow","afterDeselect","afterDestroy","afterDocumentKeyDown","afterDrawSelection","beforeRemoveCellClassNames","afterGetCellMeta","afterGetColHeader","afterGetRowHeader","afterInit","afterLoadData","afterUpdateData","afterMomentumScroll","afterOnCellCornerMouseDown","afterOnCellCornerDblClick","afterOnCellMouseDown","afterOnCellMouseUp","afterOnCellContextMenu","afterOnCellMouseOver","afterOnCellMouseOut","afterRemoveCol","afterRemoveRow","beforeRenderer","afterRenderer","afterRowSequenceChange","beforeViewportScrollVertically","beforeViewportScrollHorizontally","beforeViewportScroll","afterScrollHorizontally","afterScrollVertically","afterScroll","afterSelection","afterSelectionByProp","afterSelectionEnd","afterSelectionEndByProp","afterSelectionFocusSet","beforeSelectColumns","afterSelectColumns","beforeSelectRows","afterSelectRows","afterSetCellMeta","afterRemoveCellMeta","afterSetDataAtCell","afterSetDataAtRowProp","afterSetSourceDataAtCell","afterUpdateSettings","afterValidate","beforeLanguageChange","afterLanguageChange","beforeAutofill","afterAutofill","beforeCellAlignment","beforeChange","beforeChangeRender","beforeDrawBorders","beforeGetCellMeta","beforeRemoveCellMeta","beforeInit","beforeInitWalkontable","beforeLoadData","beforeUpdateData","beforeKeyDown","beforeOnCellMouseDown","beforeOnCellMouseUp","beforeOnCellContextMenu","beforeOnCellMouseOver","beforeOnCellMouseOut","beforeRemoveCol","beforeRemoveRow","beforeViewRender","afterViewRender","beforeRender","afterRender","beforeRowWrap","beforeColumnWrap","beforeSetCellMeta","beforeSelectionFocusSet","beforeSetRangeStartOnly","beforeSetRangeStart","beforeSetRangeEnd","beforeSelectionHighlightSet","beforeTouchScroll","beforeValidate","beforeValueRender","construct","init","modifyColHeader","modifyColWidth","modifyFiltersMultiSelectValue","modifyFocusedElement","modifyRowHeader","modifyRowHeight","modifyRowHeightByOverlayName","modifyData","modifySourceData","modifyRowData","modifyGetCellCoords","modifyFocusOnTabNavigation","beforeHighlightingRowHeader","beforeHighlightingColumnHeader","persistentStateLoad","persistentStateReset","persistentStateSave","beforeColumnSort","afterColumnSort","modifyAutofillRange","modifyCopyableRange","beforeCut","afterCut","beforeCopy","afterCopy","beforePaste","afterPaste","beforeColumnFreeze","afterColumnFreeze","beforeColumnMove","afterColumnMove","beforeColumnUnfreeze","afterColumnUnfreeze","beforeRowMove","afterRowMove","beforeColumnResize","afterColumnResize","beforeRowResize","afterRowResize","afterGetColumnHeaderRenderers","afterGetRowHeaderRenderers","beforeStretchingColumnWidth","beforeFilter","afterFilter","afterFormulasValuesUpdate","afterNamedExpressionAdded","afterNamedExpressionRemoved","afterSheetAdded","afterSheetRenamed","afterSheetRemoved","modifyColumnHeaderHeight","modifyColumnHeaderValue","beforeUndo","beforeUndoStackChange","afterUndo","afterUndoStackChange","beforeRedo","beforeRedoStackChange","afterRedo","afterRedoStackChange","modifyRowHeaderWidth","modifyTransformFocus","modifyTransformStart","modifyTransformEnd","afterModifyTransformFocus","afterModifyTransformStart","afterModifyTransformEnd","afterViewportRowCalculatorOverride","afterViewportColumnCalculatorOverride","afterPluginsInitialized","beforeHideRows","afterHideRows","beforeUnhideRows","afterUnhideRows","beforeHideColumns","afterHideColumns","beforeUnhideColumns","afterUnhideColumns","beforeTrimRow","afterTrimRow","beforeUntrimRow","afterUntrimRow","beforeDropdownMenuShow","afterDropdownMenuShow","afterDropdownMenuHide","beforeAddChild","afterAddChild","beforeDetachChild","afterDetachChild","beforeBeginEditing","afterBeginEditing","beforeMergeCells","afterMergeCells","beforeUnmergeCells","afterUnmergeCells","afterListen","afterUnlisten","afterRefreshDimensions","beforeRefreshDimensions","beforeColumnCollapse","afterColumnCollapse","beforeColumnExpand","afterColumnExpand","modifyAutoColumnSizeSeed"],u=(0,s.toSingleLine)`The plugin hook "[hookName]" was removed in Handsontable [removedInVersion].\x20
  Please consult release notes https://github.com/handsontable/handsontable/releases/tag/[removedInVersion] to\x20
  learn about the migration path.`,c=new Map([["modifyRow","8.0.0"],["modifyCol","8.0.0"],["unmodifyRow","8.0.0"],["unmodifyCol","8.0.0"],["skipLengthCache","8.0.0"],["hiddenColumn","8.0.0"],["hiddenRow","8.0.0"]]),d=new Map([[]]),p=new WeakMap;class f{static getSingleton(){return g}constructor(){var t,e,i;e=void 0,(t="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t="globalBucket","string"))?i:i+"")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e,this.globalBucket=this.createEmptyBucket()}createEmptyBucket(){let t=Object.create(null);return(0,i.arrayEach)(h,e=>{t[e]=[],this.initOrderMap(t,e)}),t}getBucket(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?(t.pluginHookBucket||(t.pluginHookBucket=this.createEmptyBucket()),t.pluginHookBucket):this.globalBucket}add(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;if(Array.isArray(e))(0,i.arrayEach)(e,e=>this.add(t,e,n));else{c.has(t)&&(0,a.warn)((0,o.substitute)(u,{hookName:t,removedInVersion:c.get(t)})),d.has(t)&&(0,a.warn)(d.get(t));let s=this.getBucket(n);if(void 0===s[t]&&(this.register(t),s[t]=[],this.initOrderMap(s,t)),e.skip=!1,-1===s[t].indexOf(e)){let n=!1;e.initialHook&&(0,i.arrayEach)(s[t],(i,r)=>{if(i.initialHook)return s[t][r]=e,n=!0,!1}),n||s[t].push(e)}this.setCallbackOrderIndex(s,t,e,r),this.orderBucketByOrderIndex(s,t)}return this}once(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;Array.isArray(e)?(0,i.arrayEach)(e,e=>this.once(t,e,n)):(e.runOnce=!0,this.add(t,e,n,r))}remove(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.getBucket(i);return!!(void 0!==n[t]&&n[t].indexOf(e)>=0)&&(e.skip=!0,!0)}has(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.getBucket(e);return!!(void 0!==i[t]&&i[t].length)}run(t,e,i,n,r,o,a,s){{let h=this.globalBucket[e],u=h?h.length:0,c=0;if(u)for(;c<u;){if(!h[c]||h[c].skip){c+=1;continue}let u=(0,l.fastCall)(h[c],t,i,n,r,o,a,s);void 0!==u&&(i=u),h[c]&&h[c].runOnce&&this.remove(e,h[c]),c+=1}}{let h=this.getBucket(t)[e],u=h?h.length:0,c=0;if(u)for(;c<u;){if(!h[c]||h[c].skip){c+=1;continue}let u=(0,l.fastCall)(h[c],t,i,n,r,o,a,s);void 0!==u&&(i=u),h[c]&&h[c].runOnce&&this.remove(e,h[c],t),c+=1}}return i}destroy(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,r.objectEach)(this.getBucket(t),(t,e,i)=>i[e].length=0)}register(t){this.isRegistered(t)||h.push(t)}deregister(t){this.isRegistered(t)&&h.splice(h.indexOf(t),1)}isDeprecated(t){return d.has(t)||c.has(t)}isRegistered(t){return h.indexOf(t)>=0}getRegistered(){return h}setCallbackOrderIndex(t,e,i,n){let r=Number.isInteger(n)?n:0,o=this.getCallbackOrderMap(t,e);o.set(r,[...o.get(r)||[],i])}orderBucketByOrderIndex(t,e){let i=this.getCallbackOrderMap(t,e);void 0===i||0===i.size||1===i.size&&i.has(0)||(t[e]=[...i].sort((t,e)=>t[0]-e[0]).flatMap(t=>{let[,e]=t;return e}))}initOrderMap(t,e){p.has(t)||p.set(t,[]),p.get(t)[e]=new Map}getCallbackOrderMap(t,e){return p.get(t)[e]}}let g=new f;var m=f}),t6("1hIp0",function(t,e){var i=t4("hmx0d"),n=t4("dZoqA"),r=t4("ptmgx"),o=t4("6BH0Y"),a=t4("6Rnn4");i({target:"Array",proto:!0,arity:1,forced:t4("8lFU3")(function(){return 4294967297!==[].push.call({length:4294967296},1)})||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=n(this),i=r(e),s=arguments.length;a(i+s);for(var l=0;l<s;l++)e[i]=arguments[l],i++;return o(e,i),i}})}),t6("6BH0Y",function(t,e){var i=t4("kxexm"),n=t4("h6ycM"),r=TypeError,o=Object.getOwnPropertyDescriptor,a=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(n(t)&&!o(t,"length").writable)throw new r("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}}),t6("h6ycM",function(t,e){var i=t4("faIBy");t.exports=Array.isArray||function(t){return"Array"===i(t)}}),t6("6Rnn4",function(t,e){var i=TypeError;t.exports=function(t){if(t>9007199254740991)throw i("Maximum allowed index exceeded");return t}}),t6("6u6Md",function(t,e){t4("lHUxa")("flatMap")}),t6("lHUxa",function(t,e){var i=t4("blCy8"),n=t4("7TMtU"),r=t4("3RKYQ").f,o=i("unscopables"),a=Array.prototype;void 0===a[o]&&r(a,o,{configurable:!0,value:n(null)}),t.exports=function(t){a[o][t]=!0}}),t6("7TMtU",function(t,e){var i,n=t4("hc2VB"),r=t4("6yuKb"),o=t4("jQUZd"),a=t4("dGabS"),s=t4("fRIdv"),l=t4("1RN1j"),h=t4("bgRz0"),u="prototype",c="script",d=h("IE_PROTO"),p=function(){},f=function(t){return"<"+c+">"+t+"</"+c+">"},g=function(t){t.write(f("")),t.close();var e=t.parentWindow.Object;return t=null,e},m=function(){var t,e=l("iframe");return e.style.display="none",s.appendChild(e),e.src=String("java"+c+":"),(t=e.contentWindow.document).open(),t.write(f("document.F=Object")),t.close(),t.F},y=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}y="undefined"!=typeof document?document.domain&&i?g(i):m():g(i);for(var t=o.length;t--;)delete y[u][o[t]];return y()};a[d]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(p[u]=n(t),i=new p,p[u]=null,i[d]=t):i=y(),void 0===e?i:r.f(i,e)}}),t6("6yuKb",function(t,e){n(t.exports,"f",()=>i,t=>i=t);var i,r=t4("kxexm"),o=t4("1TEKD"),a=t4("3RKYQ"),s=t4("hc2VB"),l=t4("6CGth"),h=t4("fJEBY");i=r&&!o?Object.defineProperties:function(t,e){s(t);for(var i,n=l(e),r=h(e),o=r.length,u=0;o>u;)a.f(t,i=r[u++],n[i]);return t}}),t6("fJEBY",function(t,e){var i=t4("gUxdt"),n=t4("jQUZd");t.exports=Object.keys||function(t){return i(t,n)}}),t6("fRIdv",function(t,e){var i=t4("eaZdY");t.exports=i("document","documentElement")}),t6("ceXML",function(t,e){function i(t){let e=t.length,i=0;for(;i<e;)t[i]=[t[i]],i+=1}function r(t,e){let i=e.length,n=0;for(;n<i;)t.push(e[n]),n+=1}function o(t){let e=[];if(!t||0===t.length||!t[0]||0===t[0].length)return e;let i=t.length,n=t[0].length;for(let r=0;r<i;r++)for(let i=0;i<n;i++)e[i]||(e[i]=[]),e[i][r]=t[r][i];return e}function a(t,e,i,n){let r=-1,o=t,a=i;Array.isArray(t)||(o=Array.from(t));let s=o.length;for(n&&s&&(r+=1,a=o[r]),r+=1;r<s;)a=e(a,o[r],r,o),r+=1;return a}function s(t,e){let i=0,n=t;Array.isArray(t)||(n=Array.from(t));let r=n.length,o=[],a=-1;for(;i<r;){let t=n[i];e(t,i,n)&&(o[a+=1]=t),i+=1}return o}function l(t,e){let i=0,n=t;Array.isArray(t)||(n=Array.from(t));let r=n.length,o=[],a=-1;for(;i<r;){let t=n[i];o[a+=1]=e(t,i,n),i+=1}return o}function h(t,e){let i=0,n=t;Array.isArray(t)||(n=Array.from(t));let r=n.length;for(;i<r&&!1!==e(n[i],i,n);)i+=1;return t}function u(t){return a(t,(t,e)=>t+e,0)}function c(t){return a(t,(t,e)=>t>e?t:e,Array.isArray(t)?t[0]:void 0)}function d(t){return a(t,(t,e)=>t<e?t:e,Array.isArray(t)?t[0]:void 0)}function p(t){return t.length?u(t)/t.length:0}function f(t){let e=[];return h(t,t=>{-1===e.indexOf(t)&&e.push(t)}),e}function g(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];let[n,...r]=[...e],o=n;return h(r,t=>{o=o.filter(e=>!t.includes(e))}),o}function m(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];let[n,...r]=[...e],o=n;return h(r,t=>{o=o.filter(e=>t.includes(e))}),o}function y(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];let[n,...r]=[...e],o=new Set(n);return h(r,t=>{h(t,t=>{o.has(t)||o.add(t)})}),Array.from(o)}function w(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return t.split(e)}n(t.exports,"to2dArray",()=>i),n(t.exports,"extendArray",()=>r),n(t.exports,"pivot",()=>o),n(t.exports,"arrayReduce",()=>a),n(t.exports,"arrayFilter",()=>s),n(t.exports,"arrayMap",()=>l),n(t.exports,"arrayEach",()=>h),n(t.exports,"arraySum",()=>u),n(t.exports,"arrayMax",()=>c),n(t.exports,"arrayMin",()=>d),n(t.exports,"arrayAvg",()=>p),n(t.exports,"arrayFlatten",()=>function t(e){return a(e,(e,i)=>e.concat(Array.isArray(i)?t(i):i),[])}),n(t.exports,"arrayUnique",()=>f),n(t.exports,"getDifferenceOfArrays",()=>g),n(t.exports,"getIntersectionOfArrays",()=>m),n(t.exports,"getUnionOfArrays",()=>y),n(t.exports,"stringToArray",()=>w),t4("1hIp0"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI")}),t6("k39HK",function(t,e){var i=t4("hmx0d"),n=t4("5XtIQ");i({target:"Set",proto:!0,real:!0,forced:!t4("dqV5L")("difference")},{difference:n})}),t6("5XtIQ",function(t,e){var i=t4("24mO2"),n=t4("l2fOj"),r=t4("iv645"),o=t4("5He4m"),a=t4("ecVty"),s=t4("lvxoc"),l=t4("gNGLF"),h=n.has,u=n.remove;t.exports=function(t){var e=i(this),n=a(t),c=r(e);return o(e)<=n.size?s(e,function(t){n.includes(t)&&u(c,t)}):l(n.getIterator(),function(t){h(e,t)&&u(c,t)}),c}}),t6("24mO2",function(t,e){var i=t4("l2fOj").has;t.exports=function(t){return i(t),t}}),t6("l2fOj",function(t,e){var i=t4("5Okwt"),n=Set.prototype;t.exports={Set:Set,add:i(n.add),has:i(n.has),remove:i(n.delete),proto:n}}),t6("iv645",function(t,e){var i=t4("l2fOj"),n=t4("lvxoc"),r=i.Set,o=i.add;t.exports=function(t){var e=new r;return n(t,function(t){o(e,t)}),e}}),t6("lvxoc",function(t,e){var i=t4("5Okwt"),n=t4("gNGLF"),r=t4("l2fOj"),o=r.Set,a=r.proto,s=i(a.forEach),l=i(a.keys),h=l(new o).next;t.exports=function(t,e,i){return i?n({iterator:l(t),next:h},e):s(t,e)}}),t6("gNGLF",function(t,e){var i=t4("bGtV7");t.exports=function(t,e,n){for(var r,o,a=n?t:t.iterator,s=t.next;!(r=i(s,a)).done;)if(void 0!==(o=e(r.value)))return o}}),t6("5He4m",function(t,e){var i=t4("eH2QD"),n=t4("l2fOj");t.exports=i(n.proto,"size","get")||function(t){return t.size}}),t6("ecVty",function(t,e){var i=t4("eXHxq"),n=t4("hc2VB"),r=t4("bGtV7"),o=t4("fBlGn"),a=t4("6eH3D"),s="Invalid size",l=RangeError,h=TypeError,u=Math.max,c=function(t,e){this.set=t,this.size=u(e,0),this.has=i(t.has),this.keys=i(t.keys)};c.prototype={getIterator:function(){return a(n(r(this.keys,this.set)))},includes:function(t){return r(this.has,this.set,t)}},t.exports=function(t){n(t);var e=+t.size;if(e!=e)throw new h(s);var i=o(e);if(i<0)throw new l(s);return new c(t,i)}}),t6("6eH3D",function(t,e){t.exports=function(t){return{iterator:t,next:t.next,done:!1}}}),t6("dqV5L",function(t,e){var i=t4("eaZdY"),n=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};t.exports=function(t){var e=i("Set");try{new e()[t](n(0));try{return new e()[t](n(-1)),!1}catch(t){return!0}}catch(t){return!1}}}),t6("aV15b",function(t,e){var i=t4("hmx0d"),n=t4("8lFU3"),r=t4("aFKKL");i({target:"Set",proto:!0,real:!0,forced:!t4("dqV5L")("intersection")||n(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))})},{intersection:r})}),t6("aFKKL",function(t,e){var i=t4("24mO2"),n=t4("l2fOj"),r=t4("5He4m"),o=t4("ecVty"),a=t4("lvxoc"),s=t4("gNGLF"),l=n.Set,h=n.add,u=n.has;t.exports=function(t){var e=i(this),n=o(t),c=new l;return r(e)>n.size?s(n.getIterator(),function(t){u(e,t)&&h(c,t)}):a(e,function(t){n.includes(t)&&h(c,t)}),c}}),t6("dnHaV",function(t,e){var i=t4("hmx0d"),n=t4("hWo6S");i({target:"Set",proto:!0,real:!0,forced:!t4("dqV5L")("isDisjointFrom")},{isDisjointFrom:n})}),t6("hWo6S",function(t,e){var i=t4("24mO2"),n=t4("l2fOj").has,r=t4("5He4m"),o=t4("ecVty"),a=t4("lvxoc"),s=t4("gNGLF"),l=t4("5A6El");t.exports=function(t){var e=i(this),h=o(t);if(r(e)<=h.size)return!1!==a(e,function(t){if(h.includes(t))return!1},!0);var u=h.getIterator();return!1!==s(u,function(t){if(n(e,t))return l(u,"normal",!1)})}}),t6("5A6El",function(t,e){var i=t4("bGtV7"),n=t4("hc2VB"),r=t4("kdzTk");t.exports=function(t,e,o){var a,s;n(t);try{if(!(a=r(t,"return"))){if("throw"===e)throw o;return o}a=i(a,t)}catch(t){s=!0,a=t}if("throw"===e)throw o;if(s)throw a;return n(a),o}}),t6("5gWvu",function(t,e){var i=t4("hmx0d"),n=t4("hxYA2");i({target:"Set",proto:!0,real:!0,forced:!t4("dqV5L")("isSubsetOf")},{isSubsetOf:n})}),t6("hxYA2",function(t,e){var i=t4("24mO2"),n=t4("5He4m"),r=t4("lvxoc"),o=t4("ecVty");t.exports=function(t){var e=i(this),a=o(t);return!(n(e)>a.size)&&!1!==r(e,function(t){if(!a.includes(t))return!1},!0)}}),t6("e15eH",function(t,e){var i=t4("hmx0d"),n=t4("iyw4J");i({target:"Set",proto:!0,real:!0,forced:!t4("dqV5L")("isSupersetOf")},{isSupersetOf:n})}),t6("iyw4J",function(t,e){var i=t4("24mO2"),n=t4("l2fOj").has,r=t4("5He4m"),o=t4("ecVty"),a=t4("gNGLF"),s=t4("5A6El");t.exports=function(t){var e=i(this),l=o(t);if(r(e)<l.size)return!1;var h=l.getIterator();return!1!==a(h,function(t){if(!n(e,t))return s(h,"normal",!1)})}}),t6("jPPWz",function(t,e){var i=t4("hmx0d"),n=t4("iuHP4");i({target:"Set",proto:!0,real:!0,forced:!t4("dqV5L")("symmetricDifference")},{symmetricDifference:n})}),t6("iuHP4",function(t,e){var i=t4("24mO2"),n=t4("l2fOj"),r=t4("iv645"),o=t4("ecVty"),a=t4("gNGLF"),s=n.add,l=n.has,h=n.remove;t.exports=function(t){var e=i(this),n=o(t).getIterator(),u=r(e);return a(n,function(t){l(e,t)?h(u,t):s(u,t)}),u}}),t6("hgmxI",function(t,e){var i=t4("hmx0d"),n=t4("3DY65");i({target:"Set",proto:!0,real:!0,forced:!t4("dqV5L")("union")},{union:n})}),t6("3DY65",function(t,e){var i=t4("24mO2"),n=t4("l2fOj").add,r=t4("iv645"),o=t4("ecVty"),a=t4("gNGLF");t.exports=function(t){var e=i(this),s=o(t).getIterator(),l=r(e);return a(s,function(t){n(l,t)}),l}}),t6("hwT6B",function(t,e){n(t.exports,"duckSchema",()=>function t(e){let i;return Array.isArray(e)?i=e.length?Array(e.length).fill(null):[]:(i={},d(e,(e,n)=>{"__children"!==n&&(e&&"object"==typeof e&&!Array.isArray(e)?i[n]=t(e):Array.isArray(e)?e.length&&"object"==typeof e[0]&&!Array.isArray(e[0])?i[n]=[t(e[0])]:i[n]=[]:i[n]=null)})),i}),n(t.exports,"objectEach",()=>d),n(t.exports,"inherit",()=>r),n(t.exports,"extend",()=>o),n(t.exports,"deepExtend",()=>function t(e,i){d(i,(n,r)=>{i[r]&&"object"==typeof i[r]?(e[r]||(Array.isArray(i[r])?e[r]=[]:"[object Date]"===Object.prototype.toString.call(i[r])?e[r]=i[r]:e[r]={}),t(e[r],i[r])):e[r]=i[r]})}),n(t.exports,"deepClone",()=>a),n(t.exports,"clone",()=>s),n(t.exports,"mixin",()=>l),n(t.exports,"isObject",()=>u),n(t.exports,"isObjectEqual",()=>h),n(t.exports,"defineGetter",()=>c),n(t.exports,"getProperty",()=>p),n(t.exports,"setProperty",()=>f),n(t.exports,"hasOwnProperty",()=>y),n(t.exports,"deepObjectSize",()=>g),n(t.exports,"createObjectPropListener",()=>m),t4("1C6fS"),t4("1hIp0"),t4("euqEx");var i=t4("ceXML");function r(t,e){return e.prototype.constructor=e,t.prototype=new e,t.prototype.constructor=t,t}function o(t,e,i){let n=Array.isArray(i);return d(e,(e,r)=>{(!1===n||i.includes(r))&&(t[r]=e)}),t}function a(t){return"object"==typeof t?JSON.parse(JSON.stringify(t)):t}function s(t){let e={};return d(t,(t,i)=>{e[i]=t}),e}function l(t){t.MIXINS||(t.MIXINS=[]);for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return(0,i.arrayEach)(n,e=>{t.MIXINS.push(e.MIXIN_NAME),d(e,(e,i)=>{if(void 0!==t.prototype[i])throw Error(`Mixin conflict. Property '${i}' already exist and cannot be overwritten.`);"function"==typeof e?t.prototype[i]=e:Object.defineProperty(t.prototype,i,{get:function(t,e){let i=`_${t}`,n=t=>{let e=t;return(Array.isArray(e)||u(e))&&(e=a(e)),e};return function(){return void 0===this[i]&&(this[i]=n(e)),this[i]}}(i,e),set:function(t){let e=`_${t}`;return function(t){this[e]=t}}(i),configurable:!0})})}),t}function h(t,e){return JSON.stringify(t)===JSON.stringify(e)}function u(t){return"[object Object]"===Object.prototype.toString.call(t)}function c(t,e,i,n){n.value=i,n.writable=!1!==n.writable,n.enumerable=!1!==n.enumerable,n.configurable=!1!==n.configurable,Object.defineProperty(t,e,n)}function d(t,e){for(let i in t)if((!t.hasOwnProperty||t.hasOwnProperty&&Object.prototype.hasOwnProperty.call(t,i))&&!1===e(t[i],i,t))break;return t}function p(t,e){let i=e.split("."),n=t;return d(i,t=>{if(void 0===(n=n[t]))return n=void 0,!1}),n}function f(t,e,i){let n=e.split("."),r=t;n.forEach((t,e)=>{e!==n.length-1?(y(r,t)||(r[t]={}),r=r[t]):r[t]=i})}function g(t){if(!u(t))return 0;let e=function(t){let i=0;return u(t)?d(t,(t,n)=>{"__children"!==n&&(i+=e(t))}):i+=1,i};return e(t)}function m(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value",i=`_${e}`,n={_touched:!1,[i]:t,isTouched(){return this._touched}};return Object.defineProperty(n,e,{get(){return this[i]},set(t){this._touched=!0,this[i]=t},enumerable:!0,configurable:!0}),n}function y(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}),t6("euqEx",function(t,e){var i=t4("hmx0d"),n=t4("eaZdY"),r=t4("5dW2a"),o=t4("bGtV7"),a=t4("5Okwt"),s=t4("8lFU3"),l=t4("9GTLg"),h=t4("XW8Vm"),u=t4("BsNAl"),c=t4("lkYqI"),d=t4("6n5Js"),p=String,f=n("JSON","stringify"),g=a(/./.exec),m=a("".charAt),y=a("".charCodeAt),w=a("".replace),b=a(1..toString),x=/[\uD800-\uDFFF]/g,S=/^[\uD800-\uDBFF]$/,C=/^[\uDC00-\uDFFF]$/,_=!d||s(function(){var t=n("Symbol")("stringify detection");return"[null]"!==f([t])||"{}"!==f({a:t})||"{}"!==f(Object(t))}),M=s(function(){return'"\udf06\ud834"'!==f("\uDF06\uD834")||'"\udead"'!==f("\uDEAD")}),T=function(t,e){var i=u(arguments),n=c(e);if(!(!l(n)&&(void 0===t||h(t))))return i[1]=function(t,e){if(l(n)&&(e=o(n,this,p(t),e)),!h(e))return e},r(f,null,i)},I=function(t,e,i){var n=m(i,e-1),r=m(i,e+1);return g(S,t)&&!g(C,r)||g(C,t)&&!g(S,n)?"\\u"+b(y(t,0),16):t};f&&i({target:"JSON",stat:!0,arity:3,forced:_||M},{stringify:function(t,e,i){var n=u(arguments),o=r(_?T:f,null,n);return M&&"string"==typeof o?w(o,x,I):o}})}),t6("BsNAl",function(t,e){var i=t4("5Okwt");t.exports=i([].slice)}),t6("lkYqI",function(t,e){var i=t4("5Okwt"),n=t4("h6ycM"),r=t4("9GTLg"),o=t4("faIBy"),a=t4("jqSLA"),s=i([].push);t.exports=function(t){if(r(t))return t;if(n(t)){for(var e=t.length,i=[],l=0;l<e;l++){var h=t[l];"string"==typeof h?s(i,h):("number"==typeof h||"Number"===o(h)||"String"===o(h))&&s(i,a(h))}var u=i.length,c=!0;return function(t,e){if(c)return c=!1,e;if(n(this))return e;for(var r=0;r<u;r++)if(i[r]===t)return e}}}}),t6("bO142",function(t,e){n(t.exports,"toUpperCaseFirst",()=>a),n(t.exports,"equalsIgnoreCase",()=>s),n(t.exports,"randomString",()=>l),n(t.exports,"isPercentValue",()=>h),n(t.exports,"substitute",()=>u),n(t.exports,"stripTags",()=>c),n(t.exports,"sanitize",()=>d),t4("1hIp0");var r=t4("i8Fxz"),o=t4("gnaTS");function a(t){return t[0].toUpperCase()+t.substr(1)}function s(){let t=[];for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];let r=i.length;for(;r;){r-=1;let e=(0,o.stringify)(i[r]).toLowerCase();-1===t.indexOf(e)&&t.push(e)}return 1===t.length}function l(){function t(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return t()+t()+t()+t()}function h(t){return/^([0-9][0-9]?%$)|(^100%$)/.test(t)}function u(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return`${t}`.replace(/(?:\\)?\[([^[\]]+)]/g,(t,i)=>"\\"===t.charAt(0)?t.substr(1,t.length-1):void 0===e[i]?"":e[i])}function c(t){return d(`${t}`,{ALLOWED_TAGS:[]})}function d(t,e){return i(r).sanitize(t,e)}}),t6("i8Fxz",function(t,e){var i;t.exports,i=function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,i){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,i)}function i(t,n,r){return(i=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}()?function(t,i,n){var r=[null];r.push.apply(r,i);var o=new(Function.bind.apply(t,r));return n&&e(o,n.prototype),o}:Reflect.construct).apply(null,arguments)}function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,void 0);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}var o,a=Object.hasOwnProperty,s=Object.setPrototypeOf,l=Object.isFrozen,h=Object.getPrototypeOf,u=Object.getOwnPropertyDescriptor,c=Object.freeze,d=Object.seal,p=Object.create,f="undefined"!=typeof Reflect&&Reflect,g=f.apply,m=f.construct;g||(g=function(t,e,i){return t.apply(e,i)}),c||(c=function(t){return t}),d||(d=function(t){return t}),m||(m=function(t,e){return i(t,n(e))});var y=E(Array.prototype.forEach),w=E(Array.prototype.pop),b=E(Array.prototype.push),x=E(String.prototype.toLowerCase),S=E(String.prototype.toString),C=E(String.prototype.match),_=E(String.prototype.replace),M=E(String.prototype.indexOf),T=E(String.prototype.trim),I=E(RegExp.prototype.test),R=(o=TypeError,function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return m(o,e)});function E(t){return function(e){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return g(t,e,n)}}function A(t,e,i){i=null!==(n=i)&&void 0!==n?n:x,s&&s(t,null);for(var n,r=e.length;r--;){var o=e[r];if("string"==typeof o){var a=i(o);a!==o&&(l(e)||(e[r]=a),o=a)}t[o]=!0}return t}function k(t){var e,i=p(null);for(e in t)!0===g(a,t,[e])&&(i[e]=t[e]);return i}function D(t,e){for(;null!==t;){var i=u(t,e);if(i){if(i.get)return E(i.get);if("function"==typeof i.value)return E(i.value)}t=h(t)}return function(t){return console.warn("fallback value for",t),null}}var O=c(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),P=c(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),L=c(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),N=c(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),H=c(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),V=c(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),B=c(["#text"]),F=c(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),W=c(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),z=c(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),j=c(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),U=d(/\{\{[\w\W]*|[\w\W]*\}\}/gm),G=d(/<%[\w\W]*|[\w\W]*%>/gm),Y=d(/\${[\w\W]*}/gm),X=d(/^data-[\-\w.\u00B7-\uFFFF]+$/),$=d(/^aria-[\-\w]+$/),Z=d(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),q=d(/^(?:\w+script|data):/i),K=d(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Q=d(/^html$/i),J=d(/^[a-z][.\w]*(-[.\w]+)+$/i),tt=function(e,i){if("object"!==t(e)||"function"!=typeof e.createPolicy)return null;var n=null,r="data-tt-policy-suffix";i.currentScript&&i.currentScript.hasAttribute(r)&&(n=i.currentScript.getAttribute(r));var o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};return function e(){var i,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,a=function(t){return e(t)};if(a.version="2.5.8",a.removed=[],!o||!o.document||9!==o.document.nodeType)return a.isSupported=!1,a;var s=o.document,l=o.document,h=o.DocumentFragment,u=o.HTMLTemplateElement,d=o.Node,p=o.Element,f=o.NodeFilter,g=o.NamedNodeMap,m=void 0===g?o.NamedNodeMap||o.MozNamedAttrMap:g,E=o.HTMLFormElement,te=o.DOMParser,ti=o.trustedTypes,tn=p.prototype,tr=D(tn,"cloneNode"),to=D(tn,"nextSibling"),ta=D(tn,"childNodes"),ts=D(tn,"parentNode");if("function"==typeof u){var tl=l.createElement("template");tl.content&&tl.content.ownerDocument&&(l=tl.content.ownerDocument)}var th=tt(ti,s),tu=th?th.createHTML(""):"",tc=l,td=tc.implementation,tp=tc.createNodeIterator,tf=tc.createDocumentFragment,tg=tc.getElementsByTagName,tm=s.importNode,ty={};try{ty=k(l).documentMode?l.documentMode:{}}catch(t){}var tv={};a.isSupported="function"==typeof ts&&td&&void 0!==td.createHTMLDocument&&9!==ty;var tw=Z,tb=null,tx=A({},[].concat(n(O),n(P),n(L),n(H),n(B))),tS=null,tC=A({},[].concat(n(F),n(W),n(z),n(j))),t_=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),tM=null,tT=null,tI=!0,tR=!0,tE=!1,tA=!0,tk=!1,tD=!0,tO=!1,tP=!1,tL=!1,tN=!1,tH=!1,tV=!1,tB=!0,tF=!1,tW=!0,tz=!1,tj={},tU=null,tG=A({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),tY=null,tX=A({},["audio","video","img","source","image","track"]),t$=null,tZ=A({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tq="http://www.w3.org/1998/Math/MathML",tK="http://www.w3.org/2000/svg",tQ="http://www.w3.org/1999/xhtml",tJ=tQ,t0=!1,t1=null,t2=A({},[tq,tK,tQ],S),t5=["application/xhtml+xml","text/html"],t3=null,t4=l.createElement("form"),t6=function(t){return t instanceof RegExp||t instanceof Function},t8=function(e){t3&&t3===e||(e&&"object"===t(e)||(e={}),e=k(e),r="application/xhtml+xml"===(i=i=-1===t5.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE)?S:x,tb="ALLOWED_TAGS"in e?A({},e.ALLOWED_TAGS,r):tx,tS="ALLOWED_ATTR"in e?A({},e.ALLOWED_ATTR,r):tC,t1="ALLOWED_NAMESPACES"in e?A({},e.ALLOWED_NAMESPACES,S):t2,t$="ADD_URI_SAFE_ATTR"in e?A(k(tZ),e.ADD_URI_SAFE_ATTR,r):tZ,tY="ADD_DATA_URI_TAGS"in e?A(k(tX),e.ADD_DATA_URI_TAGS,r):tX,tU="FORBID_CONTENTS"in e?A({},e.FORBID_CONTENTS,r):tG,tM="FORBID_TAGS"in e?A({},e.FORBID_TAGS,r):{},tT="FORBID_ATTR"in e?A({},e.FORBID_ATTR,r):{},tj="USE_PROFILES"in e&&e.USE_PROFILES,tI=!1!==e.ALLOW_ARIA_ATTR,tR=!1!==e.ALLOW_DATA_ATTR,tE=e.ALLOW_UNKNOWN_PROTOCOLS||!1,tA=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,tk=e.SAFE_FOR_TEMPLATES||!1,tD=!1!==e.SAFE_FOR_XML,tO=e.WHOLE_DOCUMENT||!1,tN=e.RETURN_DOM||!1,tH=e.RETURN_DOM_FRAGMENT||!1,tV=e.RETURN_TRUSTED_TYPE||!1,tL=e.FORCE_BODY||!1,tB=!1!==e.SANITIZE_DOM,tF=e.SANITIZE_NAMED_PROPS||!1,tW=!1!==e.KEEP_CONTENT,tz=e.IN_PLACE||!1,tw=e.ALLOWED_URI_REGEXP||tw,tJ=e.NAMESPACE||tQ,t_=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&t6(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(t_.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&t6(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(t_.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(t_.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),tk&&(tR=!1),tH&&(tN=!0),tj&&(tb=A({},n(B)),tS=[],!0===tj.html&&(A(tb,O),A(tS,F)),!0===tj.svg&&(A(tb,P),A(tS,W),A(tS,j)),!0===tj.svgFilters&&(A(tb,L),A(tS,W),A(tS,j)),!0===tj.mathMl&&(A(tb,H),A(tS,z),A(tS,j))),e.ADD_TAGS&&(tb===tx&&(tb=k(tb)),A(tb,e.ADD_TAGS,r)),e.ADD_ATTR&&(tS===tC&&(tS=k(tS)),A(tS,e.ADD_ATTR,r)),e.ADD_URI_SAFE_ATTR&&A(t$,e.ADD_URI_SAFE_ATTR,r),e.FORBID_CONTENTS&&(tU===tG&&(tU=k(tU)),A(tU,e.FORBID_CONTENTS,r)),tW&&(tb["#text"]=!0),tO&&A(tb,["html","head","body"]),tb.table&&(A(tb,["tbody"]),delete tM.tbody),c&&c(e),t3=e)},t9=A({},["mi","mo","mn","ms","mtext"]),t7=A({},["annotation-xml"]),et=A({},["title","style","font","a","script"]),ee=A({},P);A(ee,L),A(ee,N);var ei=A({},H);A(ei,V);var en=function(t){var e=ts(t);e&&e.tagName||(e={namespaceURI:tJ,tagName:"template"});var n=x(t.tagName),r=x(e.tagName);return!!t1[t.namespaceURI]&&(t.namespaceURI===tK?e.namespaceURI===tQ?"svg"===n:e.namespaceURI===tq?"svg"===n&&("annotation-xml"===r||t9[r]):!!ee[n]:t.namespaceURI===tq?e.namespaceURI===tQ?"math"===n:e.namespaceURI===tK?"math"===n&&t7[r]:!!ei[n]:t.namespaceURI===tQ?(e.namespaceURI!==tK||!!t7[r])&&(e.namespaceURI!==tq||!!t9[r])&&!ei[n]&&(et[n]||!ee[n]):"application/xhtml+xml"===i&&!!t1[t.namespaceURI])},er=function(t){b(a.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=tu}catch(e){t.remove()}}},eo=function(t,e){try{b(a.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){b(a.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!tS[t]){if(tN||tH)try{er(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}}},ea=function(t){if(tL)t="<remove></remove>"+t;else{var e,n,r=C(t,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===i&&tJ===tQ&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var o=th?th.createHTML(t):t;if(tJ===tQ)try{e=new te().parseFromString(o,i)}catch(t){}if(!e||!e.documentElement){e=td.createDocument(tJ,"template",null);try{e.documentElement.innerHTML=t0?tu:o}catch(t){}}var a=e.body||e.documentElement;return(t&&n&&a.insertBefore(l.createTextNode(n),a.childNodes[0]||null),tJ===tQ)?tg.call(e,tO?"html":"body")[0]:tO?e.documentElement:a},es=function(t){return tp.call(t.ownerDocument||t,t,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT|f.SHOW_PROCESSING_INSTRUCTION|f.SHOW_CDATA_SECTION,null,!1)},el=function(t){return t instanceof E&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof m)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},eh=function(e){return"object"===t(d)?e instanceof d:e&&"object"===t(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},eu=function(t,e,i){tv[t]&&y(tv[t],function(t){t.call(a,e,i,t3)})},ec=function(t){if(eu("beforeSanitizeElements",t,null),el(t)||I(/[\u0080-\uFFFF]/,t.nodeName))return er(t),!0;var e,i=r(t.nodeName);if(eu("uponSanitizeElement",t,{tagName:i,allowedTags:tb}),t.hasChildNodes()&&!eh(t.firstElementChild)&&(!eh(t.content)||!eh(t.content.firstElementChild))&&I(/<[/\w]/g,t.innerHTML)&&I(/<[/\w]/g,t.textContent)||"select"===i&&I(/<template/i,t.innerHTML)||7===t.nodeType||tD&&8===t.nodeType&&I(/<[/\w]/g,t.data))return er(t),!0;if(!tb[i]||tM[i]){if(!tM[i]&&ep(i)&&(t_.tagNameCheck instanceof RegExp&&I(t_.tagNameCheck,i)||t_.tagNameCheck instanceof Function&&t_.tagNameCheck(i)))return!1;if(tW&&!tU[i]){var n=ts(t)||t.parentNode,o=ta(t)||t.childNodes;if(o&&n)for(var s=o.length,l=s-1;l>=0;--l){var h=tr(o[l],!0);h.__removalCount=(t.__removalCount||0)+1,n.insertBefore(h,to(t))}}return er(t),!0}return t instanceof p&&!en(t)||("noscript"===i||"noembed"===i||"noframes"===i)&&I(/<\/no(script|embed|frames)/i,t.innerHTML)?(er(t),!0):(tk&&3===t.nodeType&&(e=_(e=t.textContent,U," "),e=_(e,G," "),e=_(e,Y," "),t.textContent!==e&&(b(a.removed,{element:t.cloneNode()}),t.textContent=e)),eu("afterSanitizeElements",t,null),!1)},ed=function(t,e,i){if(tB&&("id"===e||"name"===e)&&(i in l||i in t4))return!1;if(tR&&!tT[e]&&I(X,e));else if(tI&&I($,e));else if(!tS[e]||tT[e]){if(!(ep(t)&&(t_.tagNameCheck instanceof RegExp&&I(t_.tagNameCheck,t)||t_.tagNameCheck instanceof Function&&t_.tagNameCheck(t))&&(t_.attributeNameCheck instanceof RegExp&&I(t_.attributeNameCheck,e)||t_.attributeNameCheck instanceof Function&&t_.attributeNameCheck(e))||"is"===e&&t_.allowCustomizedBuiltInElements&&(t_.tagNameCheck instanceof RegExp&&I(t_.tagNameCheck,i)||t_.tagNameCheck instanceof Function&&t_.tagNameCheck(i))))return!1}else if(t$[e]);else if(I(tw,_(i,K,"")));else if(("src"===e||"xlink:href"===e||"href"===e)&&"script"!==t&&0===M(i,"data:")&&tY[t]);else if(tE&&!I(q,_(i,K,"")));else if(i)return!1;return!0},ep=function(t){return"annotation-xml"!==t&&C(t,J)},ef=function(e){eu("beforeSanitizeAttributes",e,null);var i,n,o,s,l=e.attributes;if(!(!l||el(e))){var h={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:tS};for(s=l.length;s--;){var u=(i=l[s]).name,c=i.namespaceURI;if(n="value"===u?i.value:T(i.value),o=r(u),h.attrName=o,h.attrValue=n,h.keepAttr=!0,h.forceKeepAttr=void 0,eu("uponSanitizeAttribute",e,h),n=h.attrValue,!h.forceKeepAttr&&(eo(u,e),h.keepAttr)){if(!tA&&I(/\/>/i,n)){eo(u,e);continue}tk&&(n=_(n,U," "),n=_(n,G," "),n=_(n,Y," "));var d=r(e.nodeName);if(ed(d,o,n)){if(tF&&("id"===o||"name"===o)&&(eo(u,e),n="user-content-"+n),tD&&I(/((--!?|])>)|<\/(style|title)/i,n)){eo(u,e);continue}if(th&&"object"===t(ti)&&"function"==typeof ti.getAttributeType){if(c);else switch(ti.getAttributeType(d,o)){case"TrustedHTML":n=th.createHTML(n);break;case"TrustedScriptURL":n=th.createScriptURL(n)}}try{c?e.setAttributeNS(c,u,n):e.setAttribute(u,n),el(e)?er(e):w(a.removed)}catch(t){}}}}eu("afterSanitizeAttributes",e,null)}},eg=function t(e){var i,n=es(e);for(eu("beforeSanitizeShadowDOM",e,null);i=n.nextNode();)eu("uponSanitizeShadowNode",i,null),ec(i),ef(i),i.content instanceof h&&t(i.content);eu("afterSanitizeShadowDOM",e,null)};return a.sanitize=function(e){var i,n,l,u,c,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((t0=!e)&&(e="<!-->"),"string"!=typeof e&&!eh(e)){if("function"==typeof e.toString){if("string"!=typeof(e=e.toString()))throw R("dirty is not a string, aborting")}else throw R("toString is not a function")}if(!a.isSupported){if("object"===t(o.toStaticHTML)||"function"==typeof o.toStaticHTML){if("string"==typeof e)return o.toStaticHTML(e);if(eh(e))return o.toStaticHTML(e.outerHTML)}return e}if(tP||t8(p),a.removed=[],"string"==typeof e&&(tz=!1),tz){if(e.nodeName){var f=r(e.nodeName);if(!tb[f]||tM[f])throw R("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof d)1===(n=(i=ea("<!---->")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===n.nodeName?i=n:"HTML"===n.nodeName?i=n:i.appendChild(n);else{if(!tN&&!tk&&!tO&&-1===e.indexOf("<"))return th&&tV?th.createHTML(e):e;if(!(i=ea(e)))return tN?null:tV?tu:""}i&&tL&&er(i.firstChild);for(var g=es(tz?e:i);l=g.nextNode();)(3!==l.nodeType||l!==u)&&(ec(l),ef(l),l.content instanceof h&&eg(l.content),u=l);if(u=null,tz)return e;if(tN){if(tH)for(c=tf.call(i.ownerDocument);i.firstChild;)c.appendChild(i.firstChild);else c=i;return(tS.shadowroot||tS.shadowrootmod)&&(c=tm.call(s,c,!0)),c}var m=tO?i.outerHTML:i.innerHTML;return tO&&tb["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&I(Q,i.ownerDocument.doctype.name)&&(m="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+m),tk&&(m=_(m,U," "),m=_(m,G," "),m=_(m,Y," ")),th&&tV?th.createHTML(m):m},a.setConfig=function(t){t8(t),tP=!0},a.clearConfig=function(){t3=null,tP=!1},a.isValidAttribute=function(t,e,i){return t3||t8({}),ed(r(t),r(e),i)},a.addHook=function(t,e){"function"==typeof e&&(tv[t]=tv[t]||[],b(tv[t],e))},a.removeHook=function(t){if(tv[t])return w(tv[t])},a.removeHooks=function(t){tv[t]&&(tv[t]=[])},a.removeAllHooks=function(){tv={}},a}()},t.exports=i()}),t6("gnaTS",function(t,e){n(t.exports,"stringify",()=>a),n(t.exports,"isDefined",()=>s),n(t.exports,"isUndefined",()=>l),n(t.exports,"isEmpty",()=>h),n(t.exports,"isRegExp",()=>u),n(t.exports,"_injectProductInfo",()=>C);var r=t4("45fvw"),o=t4("iCsRe");function a(t){let e;switch(typeof t){case"string":case"number":e=`${t}`;break;case"object":e=null===t?"":t.toString();break;case"undefined":e="";break;default:e=t.toString()}return e}function s(t){return void 0!==t}function l(t){return void 0===t}function h(t){return null===t||""===t||l(t)}function u(t){return"[object RegExp]"===Object.prototype.toString.call(t)}let c="length",d=t=>parseInt(t,16),p=t=>parseInt(t,10),f=(t,e,i)=>t.substr(e,i),g=t=>t.codePointAt(0)-65,m=t=>`${t}`.replace(/\-/g,""),y=t=>d(f(m(t),d("12"),g("F")))/(d(f(m(t),g("B"),~~![][c]))||9),w=()=>"undefined"!=typeof location&&/^([a-z0-9\-]+\.)?\x68\x61\x6E\x64\x73\x6F\x6E\x74\x61\x62\x6C\x65\x2E\x63\x6F\x6D$/i.test(location.host),b=!1,x={invalid:()=>(0,o.toSingleLine)`
    The license key for Handsontable is invalid.\x20
    If you need any help, contact us at support@handsontable.com.`,expired:t=>{let{keyValidityDate:e,hotVersion:i}=t;return(0,o.toSingleLine)`
    The license key for Handsontable expired on ${e}, and is not valid for the installed\x20
    version ${i}. Renew your license key at handsontable.com or downgrade to a version released prior\x20
    to ${e}. If you need any help, contact us at sales@handsontable.com.`},missing:()=>(0,o.toSingleLine)`
    The license key for Handsontable is missing. Use your purchased key to activate the product.\x20
    Alternatively, you can activate Handsontable to use for non-commercial purposes by\x20
    passing the key: 'non-commercial-and-evaluation'. If you need any help, contact\x20
    us at support@handsontable.com.`,non_commercial:()=>""},S={invalid:()=>(0,o.toSingleLine)`
    The license key for Handsontable is invalid.\x20
    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> on how to\x20
    install it properly or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.`,expired:t=>{let{keyValidityDate:e,hotVersion:i}=t;return(0,o.toSingleLine)`
    The license key for Handsontable expired on ${e}, and is not valid for the installed\x20
    version ${i}. <a href="https://handsontable.com/pricing" target="_blank">Renew</a> your\x20
    license key or downgrade to a version released prior to ${e}. If you need any\x20
    help, contact us at <a href="mailto:sales@handsontable.com">sales@handsontable.com</a>.`},missing:()=>(0,o.toSingleLine)`
    The license key for Handsontable is missing. Use your purchased key to activate the product.\x20
    Alternatively, you can activate Handsontable to use for non-commercial purposes by\x20
    passing the key: 'non-commercial-and-evaluation'.\x20
    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> about it in\x20
    the documentation or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.`,non_commercial:()=>""};function C(t,e){let n;let o=!h(t),a="string"==typeof t&&"non-commercial-and-evaluation"===t.toLowerCase(),s="14.6.2",l="invalid",u="invalid",C=function(t){let e=[][c],i=e;if(t[c]!==g("Z"))return!1;for(let e="",n="B<H4P+".split(""),r=g(n.shift());r;r=g(n.shift()||"A"))--r<""[c]?i|=(p(`${p(d(e)+(d(f(t,Math.abs(r),2))+[]).padStart(2,"0"))}`)%97||2)>>1:e=f(t,r,r?1===n[c]?9:8:6);return i===e}(t=m(t||""));if(o||a||C){if(C){let e=Math.floor(i(r)("10/02/2025","DD/MM/YYYY").toDate().getTime()/864e5),o=y(t);n=i(r)((o+1)*864e5,"x").format("MMMM DD, YYYY"),e>o?(l="expired",u="expired"):(l="valid",u="valid")}else a?(l="non_commercial",u="valid"):(l="invalid",u="invalid")}else l="missing",u="missing";if(w()&&(l="valid",u="valid"),b||"valid"===l||(x[l]({keyValidityDate:n,hotVersion:s})&&console["non_commercial"===l?"info":"warn"](x[l]({keyValidityDate:n,hotVersion:s})),b=!0),"valid"!==u&&e.parentNode&&S[u]({keyValidityDate:n,hotVersion:s})){let t=document.createElement("div");t.className="hot-display-license-info",t.innerHTML=S[u]({keyValidityDate:n,hotVersion:s}),e.parentNode.insertBefore(t,e.nextSibling)}}}),t6("iCsRe",function(t,e){n(t.exports,"toSingleLine",()=>r);var i=t4("ceXML");function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return(0,i.arrayReduce)(t,(t,e,i)=>t+e.replace(/\r?\n\s*/g,"")+(n[i]?n[i]:""),"").trim()}}),t6("jlXkd",function(t,e){n(t.exports,"warn",()=>r),n(t.exports,"error",()=>o);var i=t4("gnaTS");function r(){(0,i.isDefined)(console)&&console.warn(...arguments)}function o(){(0,i.isDefined)(console)&&console.error(...arguments)}}),t6("f3221",function(t,e){n(t.exports,"isFunction",()=>o),n(t.exports,"throttle",()=>a),n(t.exports,"throttleAfterHits",()=>s),n(t.exports,"debounce",()=>l),n(t.exports,"pipe",()=>h),n(t.exports,"partial",()=>u),n(t.exports,"curry",()=>c),n(t.exports,"curryRight",()=>d),n(t.exports,"fastCall",()=>p);var i=t4("ceXML"),r=t4("gnaTS");function o(t){return"function"==typeof t}function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=0,n={lastCallThrottled:!0},r=null;return function(){for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];let l=Date.now(),h=!1;n.lastCallThrottled=!0,i||(i=l,h=!0);let u=e-(l-i);return h?(n.lastCallThrottled=!1,t.apply(this,a)):(r&&clearTimeout(r),r=setTimeout(()=>{n.lastCallThrottled=!1,t.apply(this,a),i=0,r=void 0},u)),n}}function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=a(t,e),r=i;function o(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return r?(r-=1,t.apply(this,i)):n.apply(this,i)}return o.clearHits=function(){r=i},o}function l(t){let e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=null;return function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return n&&clearTimeout(n),n=setTimeout(()=>{e=t.apply(this,o)},i),e}}function h(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];let[r,...o]=e;return function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,i.arrayReduce)(o,(t,e)=>e(t),r.apply(this,e))}}function u(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,i.concat(n))}}function c(t){let e=t.length;return function i(n){return function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];let s=n.concat(o);return s.length>=e?t.apply(this,s):i(s)}}([])}function d(t){let e=t.length;return function i(n){return function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];let s=n.concat(o.reverse());return s.length>=e?t.apply(this,s):i(s)}}([])}function p(t,e,i,n,o,a,s,l){return(0,r.isDefined)(l)?t.call(e,i,n,o,a,s,l):(0,r.isDefined)(s)?t.call(e,i,n,o,a,s):(0,r.isDefined)(a)?t.call(e,i,n,o,a):(0,r.isDefined)(o)?t.call(e,i,n,o):(0,r.isDefined)(n)?t.call(e,i,n):(0,r.isDefined)(i)?t.call(e,i):t.call(e)}}),t6("lSZ9A",function(t,e){n(t.exports,"default",()=>r);let i=new Map;function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"common";i.has(t)||i.set(t,new Map);let e=i.get(t);return{register:function(t,i){e.set(t,i)},getItem:function(t){return e.get(t)},hasItem:function(t){return e.has(t)},getNames:function(){return[...e.keys()]},getValues:function(){return[...e.values()]}}}}),t6("iMgTM",function(t,e){n(t.exports,"EDITOR_TYPE",()=>d),n(t.exports,"DateEditor",()=>f),t4("1C6fS");var r=t4("45fvw"),o=t4("e5bJ0"),a=t4("3BsF4"),s=t4("9PLwv"),l=t4("gFbQZ"),h=t4("hwT6B"),u=t4("bCtEl");function c(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let d="date",p="dateEditor";class f extends s.TextEditor{constructor(){super(...arguments),c(this,"defaultDateFormat","DD/MM/YYYY"),c(this,"parentDestroyed",!1),c(this,"$datePicker",null)}static get EDITOR_TYPE(){return d}init(){if("function"!=typeof i(r))throw Error("You need to include moment.js to your project.");if("function"!=typeof o.default)throw Error("You need to include Pikaday to your project.");super.init(),this.hot.addHook("afterDestroy",()=>{this.parentDestroyed=!0,this.destroyElements()})}createElements(){super.createElements(),this.datePicker=this.hot.rootDocument.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,this.datePicker.setAttribute("dir",this.hot.isRtl()?"rtl":"ltr"),(0,l.addClass)(this.datePicker,"htDatepickerHolder"),this.hot.rootDocument.body.appendChild(this.datePicker),this.eventManager.addEventListener(this.datePicker,"mousedown",t=>{(0,l.hasClass)(t.target,"pika-day")&&this.hideDatepicker(),t.stopPropagation()})}destroyElements(){let t=this.datePicker.parentNode;this.$datePicker&&this.$datePicker.destroy(),t&&t.removeChild(this.datePicker)}prepare(t,e,i,n,r,o){super.prepare(t,e,i,n,r,o)}open(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.hot.getShortcutManager().getContext("editor");this.showDatepicker(t),super.open(),e.addShortcuts([{keys:[["ArrowLeft"]],callback:()=>{this.$datePicker.adjustDate("subtract",1)}},{keys:[["ArrowRight"]],callback:()=>{this.$datePicker.adjustDate("add",1)}},{keys:[["ArrowUp"]],callback:()=>{this.$datePicker.adjustDate("subtract",7)}},{keys:[["ArrowDown"]],callback:()=>{this.$datePicker.adjustDate("add",7)}}],{group:p})}close(){var t;this._opened=!1,null!==(t=this.$datePicker)&&void 0!==t&&t.destroy&&this.$datePicker.destroy(),this.hot._registerTimeout(()=>{let t=this.hot._getEditorManager();t.closeEditor(),this.hot.view.render(),t.prepareEditor()}),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(p),super.close()}finishEditing(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.finishEditing(t,e)}showDatepicker(t){let e;let n=this.cellProperties.dateFormat||this.defaultDateFormat,a=this.hot.view.isMouseDown(),s=!!t&&(0,u.isFunctionKey)(t.keyCode);this.datePicker.style.display="block",this.$datePicker=new o.default(this.getDatePickerConfig()),"function"==typeof this.$datePicker.useMoment&&this.$datePicker.useMoment(i(r)),this.$datePicker._onInputFocus=function(){},this.originalValue?(e=this.originalValue,i(r)(e,n,!0).isValid()&&this.$datePicker.setMoment(i(r)(e,n),!0),this.getValue()!==this.originalValue&&this.setValue(this.originalValue),s||a||this.setValue("")):this.cellProperties.defaultDate?(e=this.cellProperties.defaultDate,i(r)(e,n,!0).isValid()&&this.$datePicker.setMoment(i(r)(e,n),!0),s||a||this.setValue("")):this.$datePicker.gotoToday()}hideDatepicker(){this.datePickerStyle.display="none",this.$datePicker.hide()}getDatePickerConfig(){let t=this.TEXTAREA,e={};this.cellProperties&&this.cellProperties.datePickerConfig&&(0,h.deepExtend)(e,this.cellProperties.datePickerConfig);let n=e.onSelect,o=e.onClose;return e.field=t,e.trigger=t,e.container=this.datePicker,e.bound=!1,e.keyboardInput=!1,e.format=e.format||this.defaultDateFormat,e.reposition=e.reposition||!1,e.isRTL=!1,e.onSelect=t=>{let e=t;isNaN(e.getTime())||(e=i(r)(e).format(this.cellProperties.dateFormat||this.defaultDateFormat)),this.setValue(e),n&&n()},e.onClose=()=>{this.parentDestroyed||this.finishEditing(!1),o&&o()},e}refreshDimensions(t){var e;if(super.refreshDimensions(t),this.state!==a.EDITOR_STATE.EDITING)return;if(this.TD=this.getEditedCell(),!this.TD){this.hideDatepicker();return}let{rowIndexMapper:i,columnIndexMapper:n}=this.hot,{wtOverlays:r}=this.hot.view._wt,{wtTable:o}=null!==(e=r.getParentOverlay(this.TD))&&void 0!==e?e:this.hot.view._wt,s=i.getVisualFromRenderableIndex(o.getFirstPartiallyVisibleRow()),h=i.getVisualFromRenderableIndex(o.getLastPartiallyVisibleRow()),u=n.getVisualFromRenderableIndex(o.getFirstPartiallyVisibleColumn()),c=n.getVisualFromRenderableIndex(o.getLastPartiallyVisibleColumn());if(this.row>=s&&this.row<=h&&this.col>=u&&this.col<=c){let t=this.TD.getBoundingClientRect();this.datePickerStyle.top=`${this.hot.rootWindow.pageYOffset+t.top+(0,l.outerHeight)(this.TD)}px`;let e=this.hot.rootWindow.pageXOffset;this.hot.isRtl()?e+=t.right-(0,l.outerWidth)(this.datePicker):e+=t.left,this.datePickerStyle.left=`${e}px`}else this.hideDatepicker()}}}),t6("e5bJ0",function(t,e){n(t.exports,"default",()=>R);/*!
 * Pikaday
 *
 * Copyright  2014 David Bushell | BSD & MIT license | https://github.com/Pikaday/Pikaday
 */let i=()=>window,r=()=>window.document,o=(t,e)=>window.setTimeout(t,e),a=function(t,e,i,n){t.addEventListener(e,i,!!n)},s=function(t,e,i,n){t.removeEventListener(e,i,!!n)},l=function(t,e){return -1!==(" "+t.className+" ").indexOf(" "+e+" ")},h=function(t,e){l(t,e)||(t.className=""===t.className?e:t.className+" "+e)},u=function(t,e){var i;t.className=(i=(" "+t.className+" ").replace(" "+e+" "," ")).trim?i.trim():i.replace(/^\s+|\s+$/g,"")},c=function(t){return/Array/.test(Object.prototype.toString.call(t))},d=function(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())},p=function(t){let e=t.getDay();return 0===e||6===e},f=function(t,e){return[31,t%4==0&&t%100!=0||t%400==0?29:28,31,30,31,30,31,31,30,31,30,31][e]},g=function(t){d(t)&&t.setHours(0,0,0,0)},m=function(t,e){return t.getTime()===e.getTime()},y=function(t,e,i){let n,r;for(n in e)(r=void 0!==t[n])&&"object"==typeof e[n]&&null!==e[n]&&void 0===e[n].nodeName?d(e[n])?i&&(t[n]=new Date(e[n].getTime())):c(e[n])?i&&(t[n]=e[n].slice(0)):t[n]=y({},e[n],i):(i||!r)&&(t[n]=e[n]);return t},w=function(t,e,i){let n=r().createEvent("HTMLEvents");n.initEvent(e,!0,!1),n=y(n,i),t.dispatchEvent(n)},b=function(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),t.month>11&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t},x={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,firstWeekOfYearMinDays:4,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},S=function(t,e,i){for(e+=t.firstDay;e>=7;)e-=7;return i?t.i18n.weekdaysShort[e]:t.i18n.weekdays[e]},C=function(t){let e=[],i="false";if(t.isEmpty){if(!t.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';e.push("is-outside-current-month"),t.enableSelectionDaysInNextAndPreviousMonths||e.push("is-selection-disabled")}return t.isDisabled&&e.push("is-disabled"),t.isToday&&e.push("is-today"),t.isSelected&&(e.push("is-selected"),i="true"),t.hasEvent&&e.push("has-event"),t.isInRange&&e.push("is-inrange"),t.isStartRange&&e.push("is-startrange"),t.isEndRange&&e.push("is-endrange"),'<td data-day="'+t.day+'" class="'+e.join(" ")+'" aria-selected="'+i+'"><button class="pika-button pika-day" type="button" data-pika-year="'+t.year+'" data-pika-month="'+t.month+'" data-pika-day="'+t.day+'">'+t.day+"</button></td>"},_=function(t,e){t.setHours(0,0,0,0);let i=t.getDate(),n=t.getDay(),r=e-1,o=function(t){return(t+7-1)%7};t.setDate(i+r-o(n));let a=new Date(t.getFullYear(),0,e);return 1+Math.round(((t.getTime()-a.getTime())/864e5-r+o(a.getDay()))/7)},M=function(t,e,i,n,r){let o=new Date(n,i,e);return'<td class="pika-week">'+(t.hasMoment?t.moment(o).isoWeek():_(o,r))+"</td>"},T=function(t){let e,i=[];for(t.showWeekNumber&&i.push("<th></th>"),e=0;e<7;e++)i.push('<th scope="col"><abbr title="'+S(t,e)+'">'+S(t,e,!0)+"</abbr></th>");return"<thead><tr>"+(t.isRTL?i.reverse():i).join("")+"</tr></thead>"},I=function(t,e,i,n,r,o){let a,s,l,h=t._o,u=i===h.minYear,d=i===h.maxYear,p='<div id="'+o+'" class="pika-title" role="heading" aria-live="polite">',f,g,m=!0,y=!0;for(l=[],a=0;a<12;a++)l.push('<option value="'+(i===r?a-e:12+a-e)+'"'+(a===n?' selected="selected"':"")+(u&&a<h.minMonth||d&&a>h.maxMonth?' disabled="disabled"':"")+">"+h.i18n.months[a]+"</option>");for(f='<div class="pika-label">'+h.i18n.months[n]+'<select class="pika-select pika-select-month" tabindex="-1">'+l.join("")+"</select></div>",c(h.yearRange)?(a=h.yearRange[0],s=h.yearRange[1]+1):(a=i-h.yearRange,s=1+i+h.yearRange),l=[];a<s&&a<=h.maxYear;a++)a>=h.minYear&&l.push('<option value="'+a+'"'+(a===i?' selected="selected"':"")+">"+a+"</option>");return g='<div class="pika-label">'+i+h.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+l.join("")+"</select></div>",h.showMonthAfterYear?p+=g+f:p+=f+g,u&&(0===n||h.minMonth>=n)&&(m=!1),d&&(11===n||h.maxMonth<=n)&&(y=!1),0===e&&(p+='<button class="pika-prev'+(m?"":" is-disabled")+'" type="button">'+h.i18n.previousMonth+"</button>"),e===t._o.numberOfMonths-1&&(p+='<button class="pika-next'+(y?"":" is-disabled")+'" type="button">'+h.i18n.nextMonth+"</button>"),p+"</div>"};function R(t){let e=this,n=e.config(t);e._onMouseDown=function(t){if(!e._v)return;let r=(t=t||i().event).target||t.srcElement;if(r){if(!l(r,"is-disabled")&&(!l(r,"pika-button")||l(r,"is-empty")||l(r.parentNode,"is-disabled")?l(r,"pika-prev")?e.prevMonth():l(r,"pika-next")&&e.nextMonth():(e.setDate(new Date(r.getAttribute("data-pika-year"),r.getAttribute("data-pika-month"),r.getAttribute("data-pika-day"))),n.bound&&o(function(){e.hide(),n.blurFieldOnSelect&&n.field&&n.field.blur()},100))),l(r,"pika-select"))e._c=!0;else{if(!t.preventDefault)return t.returnValue=!1,!1;t.preventDefault()}}},e._onChange=function(t){let n=(t=t||i().event).target||t.srcElement;n&&(l(n,"pika-select-month")?e.gotoMonth(n.value):l(n,"pika-select-year")&&e.gotoYear(n.value))},e._onKeyChange=function(t){if(t=t||i().event,e.isVisible())switch(t.keyCode){case 13:case 27:n.field&&n.field.blur();break;case 37:e.adjustDate("subtract",1);break;case 38:e.adjustDate("subtract",7);break;case 39:e.adjustDate("add",1);break;case 40:e.adjustDate("add",7);break;case 8:case 46:e.setDate(null)}},e._parseFieldValue=function(){if(n.parse)return n.parse(n.field.value,n.format);if(!this.hasMoment)return new Date(Date.parse(n.field.value));{let t=this.moment(n.field.value,n.format,n.formatStrict);return t&&t.isValid()?t.toDate():null}},e._onInputChange=function(t){let i;t.firedBy===e||(d(i=e._parseFieldValue())&&e.setDate(i),e._v||e.show())},e._onInputFocus=function(){e.show()},e._onInputClick=function(){e.show()},e._onInputBlur=function(){let t=r().activeElement;do if(l(t,"pika-single"))return;while(t=t.parentNode)e._c||(e._b=o(function(){e.hide()},50)),e._c=!1},e._onClick=function(t){let r=(t=t||i().event).target||t.srcElement,o=r;if(r){!hasEventListeners&&l(r,"pika-select")&&!r.onchange&&(r.setAttribute("onchange","return;"),a(r,"change",e._onChange));do if(l(o,"pika-single")||o===n.trigger)return;while(o=o.parentNode)e._v&&r!==n.trigger&&o!==n.trigger&&e.hide()}},e.el=r().createElement("div"),e.el.className="pika-single"+(n.isRTL?" is-rtl":"")+(n.theme?" "+n.theme:""),a(e.el,"mousedown",e._onMouseDown,!0),a(e.el,"touchend",e._onMouseDown,!0),a(e.el,"change",e._onChange),n.keyboardInput&&a(r(),"keydown",e._onKeyChange),n.field&&(n.container?n.container.appendChild(e.el):n.bound?r().body.appendChild(e.el):n.field.parentNode.insertBefore(e.el,n.field.nextSibling),a(n.field,"change",e._onInputChange),n.defaultDate||(n.defaultDate=e._parseFieldValue(),n.setDefaultDate=!0));let s=n.defaultDate;d(s)?n.setDefaultDate?e.setDate(s,!0):e.gotoDate(s):e.gotoDate(new Date),n.bound?(this.hide(),e.el.className+=" is-bound",a(n.trigger,"click",e._onInputClick),a(n.trigger,"focus",e._onInputFocus),a(n.trigger,"blur",e._onInputBlur)):this.show()}R.prototype={config:function(t){this._o||(this._o=y({},x,!0));let e=y(this._o,t,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.theme="string"==typeof e.theme&&e.theme?e.theme:null,e.bound=!!(void 0!==e.bound?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field,e.disableWeekends=!!e.disableWeekends,e.disableDayFn="function"==typeof e.disableDayFn?e.disableDayFn:null;let i=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=i>4?4:i,d(e.minDate)||(e.minDate=!1),d(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&this.setMinDate(e.minDate),e.maxDate&&this.setMaxDate(e.maxDate),c(e.yearRange)){let t=new Date().getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||t,e.yearRange[1]=parseInt(e.yearRange[1],10)||t}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||x.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(t){return(t=t||this._o.format,d(this._d))?this._o.toString?this._o.toString(this._d,t):this.hasMoment?this.moment(this._d).format(t):this._d.toDateString():""},getMoment:function(){return this.hasMoment?this.moment(this._d):null},setMoment:function(t,e){this.hasMoment&&this.moment.isMoment(t)&&this.setDate(t.toDate(),e)},useMoment:function(t){this.hasMoment=!0,this.moment=t},getDate:function(){return d(this._d)?new Date(this._d.getTime()):null},setDate:function(t,e){if(!t)return this._d=null,this._o.field&&(this._o.field.value="",w(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof t&&(t=new Date(Date.parse(t))),!d(t))return;let i=this._o.minDate,n=this._o.maxDate;d(i)&&t<i?t=i:d(n)&&t>n&&(t=n),this._d=new Date(t.getTime()),g(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),w(this._o.field,"change",{firedBy:this})),e||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())},clear:function(){this.setDate(null)},gotoDate:function(t){let e=!0;if(d(t)){if(this.calendars){let i=new Date(this.calendars[0].year,this.calendars[0].month,1),n=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),r=t.getTime();n.setMonth(n.getMonth()+1),n.setDate(n.getDate()-1),e=r<i.getTime()||n.getTime()<r}e&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(t,e){let i,n=this.getDate()||new Date,r=864e5*parseInt(e);"add"===t?i=new Date(n.valueOf()+r):"subtract"===t&&(i=new Date(n.valueOf()-r)),this.setDate(i)},adjustCalendars:function(){this.calendars[0]=b(this.calendars[0]);for(let t=1;t<this._o.numberOfMonths;t++)this.calendars[t]=b({month:this.calendars[0].month+t,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())},setMinDate:function(t){t instanceof Date?(g(t),this._o.minDate=t,this._o.minYear=t.getFullYear(),this._o.minMonth=t.getMonth()):(this._o.minDate=x.minDate,this._o.minYear=x.minYear,this._o.minMonth=x.minMonth,this._o.startRange=x.startRange),this.draw()},setMaxDate:function(t){t instanceof Date?(g(t),this._o.maxDate=t,this._o.maxYear=t.getFullYear(),this._o.maxMonth=t.getMonth()):(this._o.maxDate=x.maxDate,this._o.maxYear=x.maxYear,this._o.maxMonth=x.maxMonth,this._o.endRange=x.endRange),this.draw()},setStartRange:function(t){this._o.startRange=t},setEndRange:function(t){this._o.endRange=t},draw:function(t){if(!this._v&&!t)return;let e=this._o,i=e.minYear,n=e.maxYear,r=e.minMonth,a=e.maxMonth,s="",l;this._y<=i&&(this._y=i,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=n&&(this._y=n,!isNaN(a)&&this._m>a&&(this._m=a));for(let t=0;t<e.numberOfMonths;t++)l="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),s+='<div class="pika-lendar">'+I(this,t,this.calendars[t].year,this.calendars[t].month,this.calendars[0].year,l)+this.render(this.calendars[t].year,this.calendars[t].month,l)+"</div>";this.el.innerHTML=s,e.bound&&"hidden"!==e.field.type&&o(function(){e.trigger.focus()},1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),e.bound&&e.field.setAttribute("aria-label",e.ariaLabel)},adjustPosition:function(){let t,e,n,o,a,s,l,c,d,p,f;this._o.container||(this.el.style.position="absolute",t=this._o.trigger,e=this.el.offsetWidth,n=this.el.offsetHeight,o=i().innerWidth||r().documentElement.clientWidth,a=i().innerHeight||r().documentElement.clientHeight,s=r().body.scrollTop||r().documentElement.scrollTop,p=!0,f=!0,l=(d=t.getBoundingClientRect()).left+i().pageXOffset,c=d.bottom+i().pageYOffset,(this._o.reposition&&l+e>o||this._o.position.indexOf("right")>-1&&l-e+t.offsetWidth>0)&&(l=l-e+t.offsetWidth,p=!1),(this._o.reposition&&c+n>a+s||this._o.position.indexOf("top")>-1&&c-n-t.offsetHeight>0)&&(c=c-n-t.offsetHeight,f=!1),l<0&&(l=0),c<0&&(c=0),this.el.style.left=l+"px",this.el.style.top=c+"px",h(this.el,p?"left-aligned":"right-aligned"),h(this.el,f?"bottom-aligned":"top-aligned"),u(this.el,p?"right-aligned":"left-aligned"),u(this.el,f?"top-aligned":"bottom-aligned"))},render:function(t,e,i){var n,r;let o=this._o,a=new Date,s=f(t,e),l=new Date(t,e,1).getDay(),h=[],u=[];g(a),o.firstDay>0&&(l-=o.firstDay)<0&&(l+=7);let c=0===e?11:e-1,y=11===e?0:e+1,w=0===e?t-1:t,b=11===e?t+1:t,x=f(w,c),S=s+l,_=S;for(;_>7;)_-=7;S+=7-_;let I=!1;for(let i=0,f=0;i<S;i++){let g=new Date(t,e,1+(i-l)),S=!!d(this._d)&&m(g,this._d),_=m(g,a),T=-1!==o.events.indexOf(g.toDateString()),R=i<l||i>=s+l,E=1+(i-l),A=e,k=t,D=o.startRange&&m(o.startRange,g),O=o.endRange&&m(o.endRange,g),P=o.startRange&&o.endRange&&o.startRange<g&&g<o.endRange,L=o.minDate&&g<o.minDate||o.maxDate&&g>o.maxDate||o.disableWeekends&&p(g)||o.disableDayFn&&o.disableDayFn(g);R&&(i<l?(E=x+E,A=c,k=w):(E-=s,A=y,k=b));let N={day:E,month:A,year:k,hasEvent:T,isSelected:S,isToday:_,isDisabled:L,isEmpty:R,isStartRange:D,isEndRange:O,isInRange:P,showDaysInNextAndPreviousMonths:o.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:o.enableSelectionDaysInNextAndPreviousMonths};o.pickWholeWeek&&S&&(I=!0),u.push(C(N)),7==++f&&(o.showWeekNumber&&u.unshift(M(this,i-l,e,t,o.firstWeekOfYearMinDays)),h.push((n=u,r=o.isRTL,'<tr class="pika-row'+(o.pickWholeWeek?" pick-whole-week":"")+(I?" is-selected":"")+'">'+(r?n.reverse():n).join("")+"</tr>")),u=[],f=0,I=!1)}return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+i+'">'+T(o)+"<tbody>"+h.join("")+"</tbody></table>"},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),u(this.el,"is-hidden"),this._o.bound&&(a(r(),"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){let t=this._v;!1!==t&&(this._o.bound&&s(r(),"click",this._onClick),this._o.container||(this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto"),h(this.el,"is-hidden"),this._v=!1,void 0!==t&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){let t=this._o;this.hide(),s(this.el,"mousedown",this._onMouseDown,!0),s(this.el,"touchend",this._onMouseDown,!0),s(this.el,"change",this._onChange),t.keyboardInput&&s(r(),"keydown",this._onKeyChange),t.field&&(s(t.field,"change",this._onInputChange),t.bound&&(s(t.trigger,"click",this._onInputClick),s(t.trigger,"focus",this._onInputFocus),s(t.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}}),t6("3BsF4",function(t,e){n(t.exports,"EDITOR_STATE",()=>l),n(t.exports,"BaseEditor",()=>h),t4("1C6fS");var i=t4("gnaTS"),r=t4("hwT6B"),o=t4("kdwDx"),a=t4("gFbQZ");function s(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let l=Object.freeze({VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"});class h{static get EDITOR_TYPE(){return"base"}constructor(t){s(this,"hot",void 0),s(this,"state",l.VIRGIN),s(this,"_opened",!1),s(this,"_fullEditMode",!1),s(this,"_closeCallback",null),s(this,"TD",null),s(this,"row",null),s(this,"col",null),s(this,"prop",null),s(this,"originalValue",null),s(this,"cellProperties",null),this.hot=t,this.init()}_fireCallbacks(t){this._closeCallback&&(this._closeCallback(t),this._closeCallback=null)}init(){}getValue(){throw Error("Editor getValue() method unimplemented")}setValue(){throw Error("Editor setValue() method unimplemented")}open(){throw Error("Editor open() method unimplemented")}close(){throw Error("Editor close() method unimplemented")}prepare(t,e,i,n,r,o){this.TD=n,this.row=t,this.col=e,this.prop=i,this.originalValue=r,this.cellProperties=o,this.state=this.isOpened()?this.state:l.VIRGIN}extend(){return class extends this.constructor{}}saveValue(t,e){let i,n,r,o;if(e){let t=this.hot.getSelectedLast();i=Math.max(Math.min(t[0],t[2]),0),n=Math.max(Math.min(t[1],t[3]),0),r=Math.max(t[0],t[2]),o=Math.max(t[1],t[3])}else[i,n,r,o]=[this.row,this.col,null,null];let a=this.hot.runHooks("modifyGetCellCoords",i,n);Array.isArray(a)&&([i,n]=a),this.hot.populateFromArray(i,n,t,r,o,"edit")}beginEditing(t,e){if(this.state!==l.VIRGIN)return;let n=this.hot,r=n.rowIndexMapper.getRenderableFromVisualIndex(this.row),o=n.columnIndexMapper.getRenderableFromVisualIndex(this.col);if(n.view.scrollViewport(n._createCellCoords(r,o)),this.state=l.EDITING,this.isInFullEditMode()){let e="string"==typeof t?t:(0,i.stringify)(this.originalValue);this.setValue(e)}this.open(e),this._opened=!0,this.focus(),n.view.render(),n.runHooks("afterBeginEditing",this.row,this.col)}finishEditing(t,e,i){let n;if(i){let t=this._closeCallback;this._closeCallback=e=>{t&&t(e),i(e),this.hot.view.render()}}if(!this.isWaiting()){if(this.state===l.VIRGIN){this.hot._registerTimeout(()=>{this._fireCallbacks(!0)});return}if(this.state===l.EDITING){if(t){this.cancelChanges(),this.hot.view.render();return}let i=this.getValue();n=this.cellProperties.trimWhitespace?[["string"==typeof i?String.prototype.trim.call(i||""):i]]:[[i]],this.state=l.WAITING,this.saveValue(n,e),this.hot.getCellValidator(this.cellProperties)?this.hot.addHookOnce("postAfterValidate",t=>{this.state=l.FINISHED,this.discardEditor(t)}):(this.state=l.FINISHED,this.discardEditor(!0))}}}cancelChanges(){this.state=l.FINISHED,this.discardEditor()}discardEditor(t){this.state===l.FINISHED&&(!1===t&&!0!==this.cellProperties.allowInvalid?(this.hot.selectCell(this.row,this.col),this.focus(),this.state=l.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this._fullEditMode=!1,this.state=l.VIRGIN,this._fireCallbacks(!0),this.hot.getShortcutManager().setActiveContextName("grid")))}enableFullEditMode(){this._fullEditMode=!0}isInFullEditMode(){return this._fullEditMode}isOpened(){return this._opened}isWaiting(){return this.state===l.WAITING}getEditedCellRect(){var t;let e=this.getEditedCell();if(!e)return;let{wtOverlays:i,wtViewport:n}=this.hot.view._wt,r=this.hot.rootWindow,o=(0,a.offset)(e),s=(0,a.outerWidth)(e),l=(0,a.offset)(this.hot.rootElement),h=(0,a.outerWidth)(this.hot.rootElement),u=i.topOverlay.holder,c=i.inlineStartOverlay.holder,d=u!==r?u.scrollTop:0,p=c!==r?c.scrollLeft:0,f=r.innerWidth-l.left-h,{wtTable:g}=null!==(t=i.getParentOverlay(e))&&void 0!==t?t:this.hot.view._wt,m=g.name,y=["master","inline_start"].includes(m)?d:0,w=["master","top","bottom"].includes(m)?p:0,b=o.top===l.top?0:1,x=o.top-l.top-b-y,S=0;S=this.hot.isRtl()?r.innerWidth-o.left-s-f-1+w:o.left-l.left-1-w,["top","top_inline_start_corner"].includes(m)&&(x+=i.topOverlay.getOverlayOffset()),["inline_start","top_inline_start_corner"].includes(m)&&(S+=Math.abs(i.inlineStartOverlay.getOverlayOffset()));let C=this.hot.hasColHeaders(),_=this.hot.rowIndexMapper.getRenderableFromVisualIndex(this.row),M=this.hot.columnIndexMapper.getRenderableFromVisualIndex(this.col),T=this.hot.rowIndexMapper.getRenderableIndexesLength()-this.hot.view._wt.getSetting("fixedRowsBottom");(C&&_<=0||_===T)&&(x+=1),M<=0&&(S+=1);let I=n.rowsRenderCalculator.startPosition,R=n.columnsRenderCalculator.startPosition,E=Math.abs(i.inlineStartOverlay.getScrollPosition()),A=i.topOverlay.getScrollPosition(),k=(0,a.getScrollbarWidth)(this.hot.rootDocument),D=e.offsetTop;if(["inline_start","master"].includes(m)&&(D+=I-A),["bottom","bottom_inline_start_corner"].includes(m)){let{wtViewport:t,wtTable:e}=i.bottomOverlay.clone;D+=t.getWorkspaceHeight()-e.getHeight()-k}let O=e.offsetLeft;this.hot.isRtl()?O=(O>=0?g.getWidth()-e.offsetLeft:Math.abs(O))+(R-E-s):["top","master","bottom"].includes(m)&&(O+=R-E);let P=(0,a.getComputedStyle)(this.TD,this.hot.rootWindow),L=parseInt(P[this.hot.isRtl()?"borderRightWidth":"borderLeftWidth"],10)>0?0:1,N=parseInt(P.borderTopWidth,10)>0?0:1,H=(0,a.outerWidth)(e)+L,V=(0,a.outerHeight)(e)+N,B=(0,a.hasVerticalScrollbar)(u)?k:0,F=(0,a.hasHorizontalScrollbar)(c)?k:0,W=this.hot.view.maximumVisibleElementWidth(O)-B+L;return{top:x,start:S,height:V,maxHeight:Math.max(this.hot.view.maximumVisibleElementHeight(D)-F+N,23),width:H,maxWidth:W}}getEditedCellsLayerClass(){switch(this.checkEditorSection()){case"inline-start":return"ht_clone_left ht_clone_inline_start";case"bottom":return"ht_clone_bottom";case"bottom-inline-start-corner":return"ht_clone_bottom_left_corner ht_clone_bottom_inline_start_corner";case"top":return"ht_clone_top";case"top-inline-start-corner":return"ht_clone_top_left_corner ht_clone_top_inline_start_corner";default:return"ht_clone_master"}}getEditedCell(){return this.hot.getCell(this.row,this.col,!0)}checkEditorSection(){let t=this.hot.countRows(),e="";return this.row<this.hot.getSettings().fixedRowsTop?e=this.col<this.hot.getSettings().fixedColumnsStart?"top-inline-start-corner":"top":this.hot.getSettings().fixedRowsBottom&&this.row>=t-this.hot.getSettings().fixedRowsBottom?e=this.col<this.hot.getSettings().fixedColumnsStart?"bottom-inline-start-corner":"bottom":this.col<this.hot.getSettings().fixedColumnsStart&&(e="inline-start"),e}}(0,r.mixin)(h,o.default)}),t6("kdwDx",function(t,e){n(t.exports,"default",()=>a),t4("1hIp0");var i=t4("ceXML"),r=t4("hwT6B");let o={_hooksStorage:Object.create(null),addHook(t,e){return this._hooksStorage[t]||(this._hooksStorage[t]=[]),this.hot.addHook(t,e),this._hooksStorage[t].push(e),this},removeHooksByKey(t){(0,i.arrayEach)(this._hooksStorage[t]||[],e=>{this.hot.removeHook(t,e)})},clearHooks(){(0,r.objectEach)(this._hooksStorage,(t,e)=>this.removeHooksByKey(e)),this._hooksStorage={}}};(0,r.defineGetter)(o,"MIXIN_NAME","hooksRefRegisterer",{writable:!1,enumerable:!1});var a=o}),t6("gFbQZ",function(t,e){let i;n(t.exports,"getParent",()=>a),n(t.exports,"isThisHotChild",()=>s),n(t.exports,"getFrameElement",()=>l),n(t.exports,"getParentWindow",()=>h),n(t.exports,"hasAccessToParentWindow",()=>u),n(t.exports,"closest",()=>c),n(t.exports,"closestDown",()=>d),n(t.exports,"isChildOf",()=>p),n(t.exports,"index",()=>f),n(t.exports,"overlayContainsElement",()=>g),n(t.exports,"hasClass",()=>w),n(t.exports,"addClass",()=>b),n(t.exports,"removeClass",()=>x),n(t.exports,"setAttribute",()=>S),n(t.exports,"removeAttribute",()=>C),n(t.exports,"removeTextNodes",()=>function t(e){if(3===e.nodeType)e.parentNode.removeChild(e);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(e.nodeName)>-1){let i=e.childNodes;for(let e=i.length-1;e>=0;e--)t(i[e])}}),n(t.exports,"empty",()=>_),n(t.exports,"HTML_CHARACTERS",()=>M),n(t.exports,"fastInnerHTML",()=>T),n(t.exports,"fastInnerText",()=>I),n(t.exports,"isVisible",()=>function t(e){let i=e.ownerDocument.documentElement,n=e;for(;n!==i;){if(null===n)return!1;if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(!n.host)return!1;if(n.host.impl)return t(n.host.impl);if(n.host)return t(n.host);throw Error("Lost in Web Components world")}if("none"===B(n).display)return!1;n=n.parentNode}return!0}),n(t.exports,"getComputedStyle",()=>B),n(t.exports,"offset",()=>R),n(t.exports,"getWindowScrollTop",()=>E),n(t.exports,"getWindowScrollLeft",()=>A),n(t.exports,"getScrollTop",()=>k),n(t.exports,"getScrollLeft",()=>D),n(t.exports,"getScrollableElement",()=>O),n(t.exports,"getMaximumScrollTop",()=>P),n(t.exports,"getMaximumScrollLeft",()=>L),n(t.exports,"getTrimmingContainer",()=>N),n(t.exports,"getStyle",()=>H),n(t.exports,"matchesCSSRules",()=>V),n(t.exports,"outerWidth",()=>F),n(t.exports,"outerHeight",()=>W),n(t.exports,"innerHeight",()=>z),n(t.exports,"innerWidth",()=>j),n(t.exports,"addEvent",()=>U),n(t.exports,"removeEvent",()=>G),n(t.exports,"getCaretPosition",()=>Y),n(t.exports,"getSelectionEndPosition",()=>X),n(t.exports,"getSelectionText",()=>$),n(t.exports,"clearTextSelection",()=>Z),n(t.exports,"setCaretPosition",()=>q),n(t.exports,"getScrollbarWidth",()=>K),n(t.exports,"hasVerticalScrollbar",()=>Q),n(t.exports,"hasHorizontalScrollbar",()=>J),n(t.exports,"setOverlayPosition",()=>tt),n(t.exports,"getCssTransform",()=>te),n(t.exports,"resetCssTransform",()=>ti),n(t.exports,"isInput",()=>tn),n(t.exports,"isOutsideInput",()=>tr),n(t.exports,"selectElementIfAllowed",()=>to),n(t.exports,"isDetached",()=>ta),n(t.exports,"observeVisibilityChangeOnce",()=>ts),n(t.exports,"makeElementContentEditableAndSelectItsContent",()=>tl),n(t.exports,"removeContentEditableFromElementAndDeselect",()=>th),n(t.exports,"runWithSelectedContendEditableElement",()=>tu),t4("1C6fS"),t4("1hIp0");var r=t4("bO142"),o=t4("4Pbrh");function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=-1,n=null,r=t;for(;null!==r;){if(i===e){n=r;break}r.host&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r=r.host:(i+=1,r=r.parentNode)}return n}function s(t,e){let i=t.closest(".handsontable");return!!i&&(i.parentNode===e||i===e)}function l(t){return Object.getPrototypeOf(t.parent)&&t.frameElement}function h(t){return l(t)&&t.parent}function u(t){return!!Object.getPrototypeOf(t.parent)}function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,{ELEMENT_NODE:n,DOCUMENT_FRAGMENT_NODE:r}=Node,o=t;for(;null!=o&&o!==i;){let{nodeType:t,nodeName:i}=o;if(t===n&&(e.includes(i)||e.includes(o)))return o;let{host:a}=o;o=a&&t===r?a:o.parentNode}return null}function d(t,e,i){let n=[],r=t;for(;r&&(r=c(r,e,i))&&(!i||i.contains(r));)n.push(r),r.host&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r=r.host:r=r.parentNode;let o=n.length;return o?n[o-1]:null}function p(t,e){let i=t.parentNode,n=[];for("string"==typeof e?n=t.defaultView?Array.prototype.slice.call(t.querySelectorAll(e),0):Array.prototype.slice.call(t.ownerDocument.querySelectorAll(e),0):n.push(e);null!==i;){if(n.indexOf(i)>-1)return!0;i=i.parentNode}return!1}function f(t){let e=0,i=t;if(i.previousSibling)for(;i=i.previousSibling;)e+=1;return e}function g(t,e,i){let n=i.parentElement.querySelector(`.ht_clone_${t}`);return n?n.contains(e):null}function m(t){return t&&t.length?t.filter(t=>!!t):[]}function y(t,e){if(!t||!t.length)return e?{regexFree:[],regexes:[]}:[];let i=[],n=[];return n.push(...t.filter(t=>{let n=t instanceof RegExp;return n&&e&&i.push(t),!n})),e?{regexFree:n,regexes:i}:n}function w(t,e){return void 0!==t.classList&&"string"==typeof e&&""!==e&&t.classList.contains(e)}function b(t,e){"string"==typeof e&&(e=e.split(" ")),(e=m(e)).length>0&&t.classList.add(...e)}function x(t,e){"string"==typeof e?e=e.split(" "):e instanceof RegExp&&(e=[e]);let{regexFree:i,regexes:n}=y(e,!0);(i=m(i)).length>0&&t.classList.remove(...i),n.forEach(e=>{t.classList.forEach(i=>{e.test(i)&&t.classList.remove(i)})})}function S(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;Array.isArray(e)||(e=[[e,i]]),e.forEach(e=>{Array.isArray(e)&&""!==e[0]&&t.setAttribute(...e)})}function C(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];"string"==typeof e?e=e.split(" "):e instanceof RegExp&&(e=[e]);let{regexFree:i,regexes:n}=y(e,!0);i.forEach(e=>{""!==e&&t.removeAttribute(e)}),n.forEach(e=>{t.getAttributeNames().forEach(i=>{e.test(i)&&t.removeAttribute(i)})})}function _(t){let e;for(;e=t.lastChild;)t.removeChild(e)}let M=/(<(.*)>|&(.*);)/;function T(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];M.test(e)?t.innerHTML=i?(0,r.sanitize)(e):e:I(t,e)}function I(t,e){let i=t.firstChild;i&&3===i.nodeType&&null===i.nextSibling?i.textContent=e:(_(t),t.appendChild(t.ownerDocument.createTextNode(e)))}function R(t){let e,i,n;let r=t.ownerDocument,o=r.defaultView,a=r.documentElement,s=t;for(e=s.offsetLeft,i=s.offsetTop,n=s;(s=s.offsetParent)&&s!==r.body&&("offsetLeft"in s);)e+=s.offsetLeft,i+=s.offsetTop,n=s;return n&&"fixed"===n.style.position&&(e+=o.pageXOffset||a.scrollLeft,i+=o.pageYOffset||a.scrollTop),{left:e,top:i}}function E(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return t.scrollY}function A(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return t.scrollX}function k(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return t===e?E(e):t.scrollTop}function D(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return t===e?A(e):t.scrollLeft}function O(t){let e=t.ownerDocument,i=e?e.defaultView:void 0;e||(i=(e=t.document?t.document:t).defaultView);let n=["auto","scroll"],r=t.parentNode;for(;r&&r.style&&e.body!==r;){let{overflow:t,overflowX:e,overflowY:o}=r.style;if([t,e,o].includes("scroll")||({overflow:t,overflowX:e,overflowY:o}=i.getComputedStyle(r),n.includes(t)||n.includes(e)||n.includes(o))||r.clientHeight<=r.scrollHeight+1&&(n.includes(o)||n.includes(t))||r.clientWidth<=r.scrollWidth+1&&(n.includes(e)||n.includes(t)))return r;r=r.parentNode}return i}function P(t){return t.scrollHeight-t.clientHeight}function L(t){return t.scrollWidth-t.clientWidth}function N(t){let e=t.ownerDocument,i=e.defaultView,n=t.parentNode;for(;n&&n.style&&e.body!==n;){if("visible"!==n.style.overflow&&""!==n.style.overflow)return n;let t=B(n,i),e=["scroll","hidden","auto"],r=t.getPropertyValue("overflow"),o=t.getPropertyValue("overflow-y"),a=t.getPropertyValue("overflow-x");if(e.includes(r)||e.includes(o)||e.includes(a))return n;n=n.parentNode}return i}function H(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;if(!t)return;if(t===i)return"width"===e?`${i.innerWidth}px`:"height"===e?`${i.innerHeight}px`:void 0;let n=t.style[e];if(""!==n&&void 0!==n)return n;let r=B(t,i);if(""!==r[e]&&void 0!==r[e])return r[e]}function V(t,e){let{selectorText:i}=e,n=!1;return e.type===CSSRule.STYLE_RULE&&i&&(t.msMatchesSelector?n=t.msMatchesSelector(i):t.matches&&(n=t.matches(i))),n}function B(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return t.currentStyle||e.getComputedStyle(t)}function F(t){return t.offsetWidth}function W(t){return t.offsetHeight}function z(t){return t.clientHeight||t.innerHeight}function j(t){return t.clientWidth||t.innerWidth}function U(t,e,i){t.addEventListener(e,i,!1)}function G(t,e,i){t.removeEventListener(e,i,!1)}function Y(t){return t.selectionStart?t.selectionStart:0}function X(t){return t.selectionEnd?t.selectionEnd:0}function $(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=t.document,i="";return t.getSelection?i=t.getSelection().toString():e.selection&&"Control"!==e.selection.type&&(i=e.selection.createRange().text),i}function Z(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;t.getSelection&&(t.getSelection().empty?t.getSelection().empty():t.getSelection().removeAllRanges&&t.getSelection().removeAllRanges())}function q(t,e,i){if(void 0===i&&(i=e),t.setSelectionRange){t.focus();try{t.setSelectionRange(e,i)}catch(o){let n=t.parentNode,r=n.style.display;n.style.display="block",t.setSelectionRange(e,i),n.style.display=r}}}function K(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return void 0===i&&(i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,e=t.createElement("div");e.style.height="200px",e.style.width="100%";let i=t.createElement("div");i.style.boxSizing="content-box",i.style.height="150px",i.style.left="0px",i.style.overflow="hidden",i.style.position="absolute",i.style.top="0px",i.style.width="200px",i.style.visibility="hidden",i.appendChild(e),(t.body||t.documentElement).appendChild(i);let n=e.offsetWidth;i.style.overflow="scroll";let r=e.offsetWidth;return n===r&&(r=i.clientWidth),(t.body||t.documentElement).removeChild(i),n-r}(t)),i}function Q(t){return t.offsetWidth!==t.clientWidth}function J(t){return t.offsetHeight!==t.clientHeight}function tt(t,e,i){t.style.transform=`translate3d(${e},${i},0)`}function te(t){let e;return t.style.transform&&""!==(e=t.style.transform)?["transform",e]:-1}function ti(t){t.style.transform&&""!==t.style.transform&&(t.style.transform="")}function tn(t){return t&&(["INPUT","SELECT","TEXTAREA"].indexOf(t.nodeName)>-1||"true"===t.contentEditable)}function tr(t){return tn(t)&&!1===t.hasAttribute("data-hot-input")}function to(t){tr(t.ownerDocument.activeElement)||t.select()}function ta(t){return!t.parentNode}function ts(t,e){new IntersectionObserver((i,n)=>{i.forEach(i=>{i.isIntersecting&&null!==t.offsetParent&&(e(),n.unobserve(t))})},{root:t.ownerDocument.body}).observe(t)}function tl(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=t.ownerDocument,r=n.createRange(),a=n.defaultView.getSelection();S(t,"contenteditable",!0),i&&S(t,...(0,o.A11Y_HIDDEN)()),e&&b(t,"invisibleSelection"),r.selectNodeContents(t),a.removeAllRanges(),a.addRange(r)}function th(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=t.ownerDocument.defaultView.getSelection();t.hasAttribute("aria-hidden")&&t.removeAttribute("aria-hidden"),i.removeAllRanges(),e&&x(t,"invisibleSelection"),t.removeAttribute("contenteditable")}function tu(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];tl(t,i),e(),th(t,i)}}),t6("4Pbrh",function(t,e){n(t.exports,"A11Y_TABINDEX",()=>i),n(t.exports,"A11Y_TREEGRID",()=>r),n(t.exports,"A11Y_PRESENTATION",()=>o),n(t.exports,"A11Y_GRIDCELL",()=>a),n(t.exports,"A11Y_ROWHEADER",()=>s),n(t.exports,"A11Y_ROWGROUP",()=>l),n(t.exports,"A11Y_COLUMNHEADER",()=>h),n(t.exports,"A11Y_ROW",()=>u),n(t.exports,"A11Y_MENU",()=>c),n(t.exports,"A11Y_MENU_ITEM",()=>d),n(t.exports,"A11Y_MENU_ITEM_CHECKBOX",()=>p),n(t.exports,"A11Y_COMBOBOX",()=>f),n(t.exports,"A11Y_LISTBOX",()=>g),n(t.exports,"A11Y_OPTION",()=>m),n(t.exports,"A11Y_CHECKBOX",()=>y),n(t.exports,"A11Y_SCOPE_COL",()=>w),n(t.exports,"A11Y_SCOPE_ROW",()=>b),n(t.exports,"A11Y_TEXT",()=>x),n(t.exports,"A11Y_LABEL",()=>S),n(t.exports,"A11Y_HIDDEN",()=>C),n(t.exports,"A11Y_DISABLED",()=>_),n(t.exports,"A11Y_MULTISELECTABLE",()=>M),n(t.exports,"A11Y_HASPOPUP",()=>T),n(t.exports,"A11Y_ROWCOUNT",()=>I),n(t.exports,"A11Y_COLCOUNT",()=>R),n(t.exports,"A11Y_ROWINDEX",()=>E),n(t.exports,"A11Y_COLINDEX",()=>A),n(t.exports,"A11Y_EXPANDED",()=>k),n(t.exports,"A11Y_SORT",()=>D),n(t.exports,"A11Y_READONLY",()=>O),n(t.exports,"A11Y_INVALID",()=>P),n(t.exports,"A11Y_CHECKED",()=>L),n(t.exports,"A11Y_SELECTED",()=>N),n(t.exports,"A11Y_AUTOCOMPLETE",()=>H),n(t.exports,"A11Y_CONTROLS",()=>V),n(t.exports,"A11Y_ACTIVEDESCENDANT",()=>B),n(t.exports,"A11Y_LIVE",()=>F),n(t.exports,"A11Y_RELEVANT",()=>W),n(t.exports,"A11Y_SETSIZE",()=>z),n(t.exports,"A11Y_POSINSET",()=>j);let i=t=>["tabindex",t],r=()=>["role","treegrid"],o=()=>["role","presentation"],a=()=>["role","gridcell"],s=()=>["role","rowheader"],l=()=>["role","rowgroup"],h=()=>["role","columnheader"],u=()=>["role","row"],c=()=>["role","menu"],d=()=>["role","menuitem"],p=()=>["role","menuitemcheckbox"],f=()=>["role","combobox"],g=()=>["role","listbox"],m=()=>["role","option"],y=()=>["role","checkbox"],w=()=>["scope","col"],b=()=>["scope","row"],x=()=>["type","text"],S=t=>["aria-label",t],C=()=>["aria-hidden","true"],_=()=>["aria-disabled","true"],M=()=>["aria-multiselectable","true"],T=t=>["aria-haspopup",t],I=t=>["aria-rowcount",t],R=t=>["aria-colcount",t],E=t=>["aria-rowindex",t],A=t=>["aria-colindex",t],k=t=>["aria-expanded",t],D=t=>["aria-sort",t],O=()=>["aria-readonly","true"],P=()=>["aria-invalid","true"],L=t=>["aria-checked",t],N=()=>["aria-selected","true"],H=()=>["aria-autocomplete","list"],V=t=>["aria-controls",t],B=t=>["aria-activedescendant",t],F=t=>["aria-live",t],W=t=>["aria-relevant",t],z=t=>["aria-setsize",t],j=t=>["aria-posinset",t]}),t6("9PLwv",function(t,e){n(t.exports,"TextEditor",()=>g),t4("1C6fS");var i=t4("3BsF4"),r=t4("1k8Ev"),o=t4("eL8cl"),a=t4("gFbQZ"),s=t4("guO5N"),l=t4("f64HE"),h=t4("gnaTS"),u=t4("1yccg"),c=t4("4Pbrh");function d(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let p="ht_editor_hidden",f="textEditor";class g extends i.BaseEditor{static get EDITOR_TYPE(){return"text"}constructor(t){super(t),d(this,"eventManager",new r.default(this)),d(this,"autoResize",(0,l.createInputElementResizer)(this.hot.rootDocument)),d(this,"TEXTAREA",void 0),d(this,"textareaStyle",void 0),d(this,"TEXTAREA_PARENT",void 0),d(this,"textareaParentStyle",void 0),d(this,"layerClass",void 0),this.eventManager=new r.default(this),this.createElements(),this.bindEvents(),this.hot.addHookOnce("afterDestroy",()=>this.destroy())}getValue(){return this.TEXTAREA.value}setValue(t){this.TEXTAREA.value=t}open(){this.refreshDimensions(),this.showEditableElement(),this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}close(){this.autoResize.unObserve(),(0,a.isThisHotChild)(this.hot.rootDocument.activeElement,this.hot.rootElement)&&this.hot.listen(),this.hideEditableElement(),this.unregisterShortcuts()}prepare(t,e,n,r,o,a){let s=this.state;if(super.prepare(t,e,n,r,o,a),!a.readOnly){this.refreshDimensions(!0);let{allowInvalid:t}=a;t&&!this.isOpened()&&(this.TEXTAREA.value=""),s===i.EDITOR_STATE.FINISHED||this.isOpened()||this.hideEditableElement()}}beginEditing(t,e){this.state===i.EDITOR_STATE.VIRGIN&&(this.TEXTAREA.value="",super.beginEditing(t,e))}focus(){this.TEXTAREA.select(),(0,a.setCaretPosition)(this.TEXTAREA,this.TEXTAREA.value.length)}createElements(){let{rootDocument:t}=this.hot;this.TEXTAREA=t.createElement("TEXTAREA"),(0,a.setAttribute)(this.TEXTAREA,[["data-hot-input",""],(0,c.A11Y_TABINDEX)(-1)]),(0,a.addClass)(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.textareaStyle.overflowY="visible",this.TEXTAREA_PARENT=t.createElement("DIV"),(0,a.addClass)(this.TEXTAREA_PARENT,"handsontableInputHolder"),(0,a.hasClass)(this.TEXTAREA_PARENT,this.layerClass)&&(0,a.removeClass)(this.TEXTAREA_PARENT,this.layerClass),(0,a.addClass)(this.TEXTAREA_PARENT,p),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.hot.rootElement.appendChild(this.TEXTAREA_PARENT)}hideEditableElement(){(0,o.isEdge)()&&(this.textareaStyle.textIndent="-99999px"),this.textareaStyle.overflowY="visible",this.textareaParentStyle.opacity="0",this.textareaParentStyle.height="1px",(0,a.removeClass)(this.TEXTAREA_PARENT,this.layerClass),(0,a.addClass)(this.TEXTAREA_PARENT,p)}showEditableElement(){this.textareaParentStyle.height="",this.textareaParentStyle.overflow="",this.textareaParentStyle.position="",this.textareaParentStyle[this.hot.isRtl()?"left":"right"]="auto",this.textareaParentStyle.opacity="1",this.textareaStyle.textIndent="";let t=this.TEXTAREA_PARENT.childNodes,e=!1;(0,s.rangeEach)(t.length-1,i=>{let n=t[i];if((0,a.hasClass)(n,"handsontableEditor"))return e=!0,!1}),(0,a.hasClass)(this.TEXTAREA_PARENT,p)&&(0,a.removeClass)(this.TEXTAREA_PARENT,p),e?this.layerClass="ht_editor_visible":this.layerClass=this.getEditedCellsLayerClass(),(0,a.addClass)(this.TEXTAREA_PARENT,this.layerClass)}refreshValue(){let t=this.hot.toPhysicalRow(this.row),e=this.hot.getSourceDataAtCell(t,this.col);this.originalValue=e,this.setValue(e),this.refreshDimensions()}refreshDimensions(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.state!==i.EDITOR_STATE.EDITING&&!t)return;if(this.TD=this.getEditedCell(),!this.TD){t||this.close();return}let{top:e,start:n,width:r,maxWidth:o,height:s,maxHeight:l}=this.getEditedCellRect();this.textareaParentStyle.top=`${e}px`,this.textareaParentStyle[this.hot.isRtl()?"right":"left"]=`${n}px`,this.showEditableElement();let h=(0,a.getComputedStyle)(this.TD,this.hot.rootWindow);this.TEXTAREA.style.fontSize=h.fontSize,this.TEXTAREA.style.fontFamily=h.fontFamily,this.TEXTAREA.style.backgroundColor=this.TD.style.backgroundColor;let u=(0,a.getComputedStyle)(this.TEXTAREA),c=parseInt(u.paddingLeft,10)+parseInt(u.paddingRight,10),d=parseInt(u.paddingTop,10)+parseInt(u.paddingBottom,10),p=o-c,f=l-d;this.autoResize.init(this.TEXTAREA,{minWidth:Math.min(r-c,p),minHeight:Math.min(s-d,f),maxWidth:p,maxHeight:f},!0)}bindEvents(){(0,o.isIOS)()&&this.eventManager.addEventListener(this.TEXTAREA,"focusout",()=>this.finishEditing(!1)),this.addHook("afterScrollHorizontally",()=>this.refreshDimensions()),this.addHook("afterScrollVertically",()=>this.refreshDimensions()),this.addHook("afterColumnResize",()=>{this.refreshDimensions(),this.state===i.EDITOR_STATE.EDITING&&this.focus()}),this.addHook("afterRowResize",()=>{this.refreshDimensions(),this.state===i.EDITOR_STATE.EDITING&&this.focus()})}allowKeyEventPropagation(){}destroy(){this.eventManager.destroy(),this.clearHooks()}registerShortcuts(){let t=this.hot.getShortcutManager().getContext("editor"),e=()=>{this.hot.rootDocument.execCommand("insertText",!1,"\n")};t.addShortcuts([{keys:[["Control","Enter"]],callback:()=>(e(),!1),runOnlyIf:t=>!this.hot.selection.isMultiple()&&!t.altKey},{keys:[["Meta","Enter"]],callback:()=>(e(),!1),runOnlyIf:()=>!this.hot.selection.isMultiple()},{keys:[["Alt","Enter"]],callback:()=>(e(),!1)},{keys:[["Home"]],callback:(t,e)=>{let[i]=e;(0,u.updateCaretPosition)(i,this.TEXTAREA)}},{keys:[["End"]],callback:(t,e)=>{let[i]=e;(0,u.updateCaretPosition)(i,this.TEXTAREA)}}],{runOnlyIf:()=>(0,h.isDefined)(this.hot.getSelected()),group:f})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(f)}}}),t6("1k8Ev",function(t,e){n(t.exports,"default",()=>o),n(t.exports,"getListenersCounter",()=>a),t4("1C6fS"),t4("1hIp0");var i=t4("7HxIw");let r=0;var o=class{constructor(){var t,e,i;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=void 0,(t="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t="context","string"))?i:i+"")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e,this.context=n||this,this.context.eventListeners||(this.context.eventListeners=[])}addEventListener(t,e,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];function a(t){n.call(this,function(t){let e=t.stopImmediatePropagation;return t.stopImmediatePropagation=function(){e.apply(this),(0,i.stopImmediatePropagation)(this)},t}(t))}return this.context.eventListeners.push({element:t,event:e,callback:n,callbackProxy:a,options:o,eventManager:this}),t.addEventListener(e,a,o),r+=1,()=>{this.removeEventListener(t,e,n)}}removeEventListener(t,e,i){let n,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.context.eventListeners.length;for(;a;)if(a-=1,(n=this.context.eventListeners[a]).event===e&&n.element===t){if(i&&i!==n.callback||o&&n.eventManager!==this)continue;this.context.eventListeners.splice(a,1),n.element.removeEventListener(n.event,n.callbackProxy,n.options),r-=1}}clearEvents(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.context)return;let e=this.context.eventListeners.length;for(;e;){e-=1;let i=this.context.eventListeners[e];t&&i.eventManager!==this||(this.context.eventListeners.splice(e,1),i.element.removeEventListener(i.event,i.callbackProxy,i.options),r-=1)}}clear(){this.clearEvents()}destroy(){this.clearEvents(),this.context=null}destroyWithOwnEventsOnly(){this.clearEvents(!0),this.context=null}fireEvent(t,e){let i,n=t.document,r=t;n||(r=(n=t.ownerDocument?t.ownerDocument:t).defaultView);let o={bubbles:!0,cancelable:"mousemove"!==e,view:r,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0};n.createEvent?(i=n.createEvent("MouseEvents")).initMouseEvent(e,o.bubbles,o.cancelable,o.view,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget||n.body.parentNode):i=n.createEventObject(),t.dispatchEvent?t.dispatchEvent(i):t.fireEvent(`on${e}`,i)}};function a(){return r}}),t6("7HxIw",function(t,e){function i(t){t.isImmediatePropagationEnabled=!1,t.cancelBubble=!0}function r(t){return!1===t.isImmediatePropagationEnabled}function o(t){return 2===t.button}function a(t){return 0===t.button}function s(t){return t instanceof TouchEvent}function l(t,e){let i={x:t.offsetX,y:t.offsetY},n=t.target;if(!(e instanceof HTMLElement)||n!==e&&n.contains(e))return i;for(;n!==e;)i.x+=n.offsetLeft,i.y+=n.offsetTop,n=n.offsetParent;return i}n(t.exports,"stopImmediatePropagation",()=>i),n(t.exports,"isImmediatePropagationStopped",()=>r),n(t.exports,"isRightClick",()=>o),n(t.exports,"isLeftClick",()=>a),n(t.exports,"isTouchEvent",()=>s),n(t.exports,"offsetRelativeTo",()=>l)}),t6("eL8cl",function(t,e){n(t.exports,"setBrowserMeta",()=>l),n(t.exports,"setPlatformMeta",()=>h),n(t.exports,"isChrome",()=>u),n(t.exports,"isChromeWebKit",()=>c),n(t.exports,"isFirefox",()=>d),n(t.exports,"isFirefoxWebKit",()=>p),n(t.exports,"isSafari",()=>f),n(t.exports,"isEdge",()=>g),n(t.exports,"isEdgeWebKit",()=>m),n(t.exports,"isMobileBrowser",()=>y),n(t.exports,"isIOS",()=>w),n(t.exports,"isIpadOS",()=>b),n(t.exports,"isWindowsOS",()=>x),n(t.exports,"isMacOS",()=>S),n(t.exports,"isLinuxOS",()=>C);var i=t4("hwT6B"),r=t4("llu1T");let o=t=>{let e={value:!1};return e.test=(i,n)=>{e.value=t(i,n)},e},a={chrome:o((t,e)=>/Chrome/.test(t)&&/Google/.test(e)),chromeWebKit:o(t=>/CriOS/.test(t)),edge:o(t=>/Edge/.test(t)),edgeWebKit:o(t=>/EdgiOS/.test(t)),firefox:o(t=>/Firefox/.test(t)),firefoxWebKit:o(t=>/FxiOS/.test(t)),mobile:o(t=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)),safari:o((t,e)=>/Safari/.test(t)&&/Apple Computer/.test(e))},s={mac:o(t=>/^Mac/.test(t)),win:o(t=>/^Win/.test(t)),linux:o(t=>/^Linux/.test(t)),ios:o(t=>/iPhone|iPad|iPod/i.test(t))};function l(){let{userAgent:t=navigator.userAgent,vendor:e=navigator.vendor}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.objectEach)(a,i=>{let{test:n}=i;n(t,e)})}function h(){let{platform:t=navigator.platform}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.objectEach)(s,e=>{let{test:i}=e;i(t)})}function u(){return a.chrome.value}function c(){return a.chromeWebKit.value}function d(){return a.firefox.value}function p(){return a.firefoxWebKit.value}function f(){return a.safari.value}function g(){return a.edge.value}function m(){return a.edgeWebKit.value}function y(){return a.mobile.value}function w(){return s.ios.value}function b(){let{maxTouchPoints:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return t>2&&s.mac.value}function x(){return s.win.value}function S(){return s.mac.value}function C(){return s.linux.value}(0,r.isCSR)()&&(l(),h())}),t6("llu1T",function(t,e){let i;function r(t){return window.requestAnimationFrame(t)}function o(t){window.cancelAnimationFrame(t)}function a(){return"ontouchstart"in window}function s(){return"undefined"!=typeof window}function l(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i||("object"==typeof Intl?i=new Intl.Collator(t,e).compare:i="function"==typeof String.prototype.localeCompare?(t,e)=>`${t}`.localeCompare(e):(t,e)=>t===e?0:t>e?-1:1),i}n(t.exports,"requestAnimationFrame",()=>r),n(t.exports,"cancelAnimationFrame",()=>o),n(t.exports,"isTouchSupported",()=>a),n(t.exports,"isCSR",()=>s),n(t.exports,"getComparisonFunction",()=>l)}),t6("guO5N",function(t,e){function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=typeof t;if("number"===i)return!isNaN(t)&&isFinite(t);if("string"===i){if(0===t.length)return!1;if(1===t.length)return/\d/.test(t);let i=Array.from(new Set([".",...e])).map(t=>`\\${t}`).join("|");return RegExp(`^[+-]?(((${i})?\\d+((${i})\\d+)?(e[+-]?\\d+)?)|(0x[a-f\\d]+))$`,"i").test(t.trim())}return"object"===i&&!!t&&"number"==typeof t.valueOf()&&!(t instanceof Date)}function r(t){return i(t,[","])}function o(t,e,i){let n=-1;for("function"==typeof e?(i=e,e=t):n=t-1;++n<=e&&!1!==i(n););}function a(t,e,i){let n=t+1;for("function"==typeof e&&(i=e,e=0);--n>=e&&!1!==i(n););}function s(t,e){return parseInt(t*(e=isNaN(e=parseInt(e.toString().replace("%",""),10))?0:e)/100,10)}function l(t,e,i){return Math.min(t,e)===t?e:Math.max(t,i)===t?i:t}n(t.exports,"isNumeric",()=>i),n(t.exports,"isNumericLike",()=>r),n(t.exports,"rangeEach",()=>o),n(t.exports,"rangeEachReverse",()=>a),n(t.exports,"valueAccordingPercent",()=>s),n(t.exports,"clamp",()=>l),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI")}),t6("f64HE",function(t,e){function i(t,e,i){t.addEventListener(e,i,!1)}function r(t,e,i){t.removeEventListener(e,i,!1)}function o(t){return t.ownerDocument.defaultView.getComputedStyle(t)}function a(t){let e;let n={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},a=t.body,s=t.createTextNode(""),l=t.createElement("span");function h(){s.textContent=e.value,l.style.position="absolute",l.style.fontSize=o(e).fontSize,l.style.fontFamily=o(e).fontFamily,l.style.whiteSpace="pre",a.appendChild(l);let t=l.clientWidth+2;a.removeChild(l);let i=e.style;i.height=`${n.minHeight}px`,n.minWidth>t?i.width=`${n.minWidth}px`:t>n.maxWidth?i.width=`${n.maxWidth}px`:i.width=`${t}px`;let r=e.scrollHeight?e.scrollHeight-1:0;n.minHeight>r?i.height=`${n.minHeight}px`:n.maxHeight<r?(i.height=`${n.maxHeight}px`,i.overflowY="visible"):i.height=`${r}px`}function u(){t.defaultView.setTimeout(h,0)}return{init:function(t,r){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=t,function(t){if(t&&t.minHeight){if("inherit"===t.minHeight)n.minHeight=e.clientHeight;else{let e=parseInt(t.minHeight,10);isNaN(e)||(n.minHeight=e)}}if(t&&t.maxHeight){if("inherit"===t.maxHeight)n.maxHeight=e.clientHeight;else{let e=parseInt(t.maxHeight,10);isNaN(e)||(n.maxHeight=e)}}if(t&&t.minWidth){if("inherit"===t.minWidth)n.minWidth=e.clientWidth;else{let e=parseInt(t.minWidth,10);isNaN(e)||(n.minWidth=e)}}if(t&&t.maxWidth){if("inherit"===t.maxWidth)n.maxWidth=e.clientWidth;else{let e=parseInt(t.maxWidth,10);isNaN(e)||(n.maxWidth=e)}}l.firstChild||(l.className="autoResize",l.style.display="inline-block",l.appendChild(s))}(r),"TEXTAREA"===e.nodeName&&(e.style.resize="none",e.style.height=`${n.minHeight}px`,e.style.minWidth=`${n.minWidth}px`,e.style.maxWidth=`${n.maxWidth}px`,e.style.overflowY="hidden"),o&&(i(e,"input",h),i(e,"keydown",u)),h()},resize:h,unObserve(){r(e,"input",h),r(e,"keydown",u)}}}n(t.exports,"createInputElementResizer",()=>a)}),t6("1yccg",function(t,e){n(t.exports,"updateCaretPosition",()=>r);var i=t4("gFbQZ");function r(t,e){let n=(0,i.getCaretPosition)(e),r=e.value.split("\n"),o=n,a=0;for(let e=0;e<r.length;e++){let i=r[e];0!==e&&(a+=r[e-1].length+1);let s=a+i.length;if("home"===t?o=a:"end"===t&&(o=s),n<=s)break}(0,i.setCaretPosition)(e,o)}}),t6("bCtEl",function(t,e){n(t.exports,"KEY_CODES",()=>o),n(t.exports,"isPrintableChar",()=>s),n(t.exports,"isFunctionKey",()=>l),n(t.exports,"isCtrlKey",()=>h),n(t.exports,"isCtrlMetaKey",()=>u),n(t.exports,"isKey",()=>c),t4("1hIp0");var i=t4("ceXML"),r=t4("eL8cl");let o={ALT:18,ARROW_DOWN:40,ARROW_LEFT:37,ARROW_RIGHT:39,ARROW_UP:38,AUDIO_DOWN:(0,r.isFirefox)()?182:174,AUDIO_MUTE:(0,r.isFirefox)()?181:173,AUDIO_UP:(0,r.isFirefox)()?183:175,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND_LEFT:91,COMMAND_RIGHT:93,COMMAND_FIREFOX:224,CONTROL:17,DELETE:46,END:35,ENTER:13,ESCAPE:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,HOME:36,INSERT:45,MEDIA_NEXT:176,MEDIA_PLAY_PAUSE:179,MEDIA_PREV:177,MEDIA_STOP:178,NULL:0,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PERIOD:190,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,A:65,C:67,D:68,F:70,L:76,O:79,P:80,S:83,V:86,X:88,Y:89,Z:90},a=[o.ALT,o.ARROW_DOWN,o.ARROW_LEFT,o.ARROW_RIGHT,o.ARROW_UP,o.AUDIO_DOWN,o.AUDIO_MUTE,o.AUDIO_UP,o.BACKSPACE,o.CAPS_LOCK,o.DELETE,o.END,o.ENTER,o.ESCAPE,o.F1,o.F2,o.F3,o.F4,o.F5,o.F6,o.F7,o.F8,o.F9,o.F10,o.F11,o.F12,o.F13,o.F14,o.F15,o.F16,o.F17,o.F18,o.F19,o.HOME,o.INSERT,o.MEDIA_NEXT,o.MEDIA_PLAY_PAUSE,o.MEDIA_PREV,o.MEDIA_STOP,o.NULL,o.NUM_LOCK,o.PAGE_DOWN,o.PAGE_UP,o.PAUSE,o.SCROLL_LOCK,o.SHIFT,o.TAB];function s(t){return 32===t||t>=48&&t<=57||t>=96&&t<=111||t>=186&&t<=192||t>=219&&t<=222||t>=226||t>=65&&t<=90}function l(t){return a.includes(t)}function h(t){let e=[];return(0,r.isMacOS)()?e.push(o.COMMAND_LEFT,o.COMMAND_RIGHT,o.COMMAND_FIREFOX):e.push(o.CONTROL),e.includes(t)}function u(t){return[o.CONTROL,o.COMMAND_LEFT,o.COMMAND_RIGHT,o.COMMAND_FIREFOX].includes(t)}function c(t,e){let n=e.split("|"),r=!1;return(0,i.arrayEach)(n,e=>{if(t===o[e])return r=!0,!1}),r}}),t6("7cVHX",function(t,e){n(t.exports,"getNormalizedDate",()=>i);function i(t){let e=new Date(t);return isNaN(new Date(`${t}T00:00`).getDate())?e:new Date(e.getTime()+6e4*e.getTimezoneOffset())}});var t8={};function t9(t,e=7){let i;let n=t.flatMap(t=>t.map(t=>t.value)).filter(t=>"number"==typeof t&&!isNaN(t));if(0===n.length)return 1;let r=Math.max(...n),o=r-Math.min(...n);if(r<10)return 1;let a=o/(e-1),s=Math.pow(10,Math.floor(Math.log10(a))),l=a/s,h=(i=l<=1?1:l<=2?2:l<=5?5:10)*s;return Math.ceil(o/h)+1>e?1===i?2*s:2===i?5*s:10*s:h}r="millisecond",o="second",a="minute",s="hour",l="week",h="month",u="quarter",c="year",d="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m=function(t,e,i){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(i)+t},(w={})[y="en"]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],i=t%100;return"["+t+(e[(i-20)%10]||e[i]||"th")+"]"}},b="$isDayjsObject",x=function(t){return t instanceof M||!(!t||!t[b])},S=function t(e,i,n){var r;if(!e)return y;if("string"==typeof e){var o=e.toLowerCase();w[o]&&(r=o),i&&(w[o]=i,r=o);var a=e.split("-");if(!r&&a.length>1)return t(a[0])}else{var s=e.name;w[s]=e,r=s}return!n&&r&&(y=r),r||!n&&y},C=function(t,e){if(x(t))return t.clone();var i="object"==typeof e?e:{};return i.date=t,i.args=arguments,new M(i)},(_={s:m,z:function(t){var e=-t.utcOffset(),i=Math.abs(e);return(e<=0?"+":"-")+m(Math.floor(i/60),2,"0")+":"+m(i%60,2,"0")},m:function t(e,i){if(e.date()<i.date())return-t(i,e);var n=12*(i.year()-e.year())+(i.month()-e.month()),r=e.clone().add(n,h),o=i-r<0,a=e.clone().add(n+(o?-1:1),h);return+(-(n+(i-r)/(o?r-a:a-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return({M:h,y:c,w:l,d:"day",D:d,h:s,m:a,s:o,ms:r,Q:u})[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}}).l=S,_.i=x,_.w=function(t,e){return C(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})},T=(M=function(){function t(t){this.$L=S(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[b]=!0}var e=t.prototype;return e.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(_.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(f);if(n){var r=n[2]-1||0,o=(n[7]||"0").substring(0,3);return i?new Date(Date.UTC(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(e)}(t),this.init()},e.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},e.$utils=function(){return _},e.isValid=function(){return this.$d.toString()!==p},e.isSame=function(t,e){var i=C(t);return this.startOf(e)<=i&&i<=this.endOf(e)},e.isAfter=function(t,e){return C(t)<this.startOf(e)},e.isBefore=function(t,e){return this.endOf(e)<C(t)},e.$g=function(t,e,i){return _.u(t)?this[e]:this.set(i,t)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(t,e){var i=this,n=!!_.u(e)||e,r=_.p(t),u=function(t,e){var r=_.w(i.$u?Date.UTC(i.$y,e,t):new Date(i.$y,e,t),i);return n?r:r.endOf("day")},p=function(t,e){return _.w(i.toDate()[t].apply(i.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),i)},f=this.$W,g=this.$M,m=this.$D,y="set"+(this.$u?"UTC":"");switch(r){case c:return n?u(1,0):u(31,11);case h:return n?u(1,g):u(0,g+1);case l:var w=this.$locale().weekStart||0,b=(f<w?f+7:f)-w;return u(n?m-b:m+(6-b),g);case"day":case d:return p(y+"Hours",0);case s:return p(y+"Minutes",1);case a:return p(y+"Seconds",2);case o:return p(y+"Milliseconds",3);default:return this.clone()}},e.endOf=function(t){return this.startOf(t,!1)},e.$set=function(t,e){var i,n=_.p(t),l="set"+(this.$u?"UTC":""),u=((i={}).day=l+"Date",i[d]=l+"Date",i[h]=l+"Month",i[c]=l+"FullYear",i[s]=l+"Hours",i[a]=l+"Minutes",i[o]=l+"Seconds",i[r]=l+"Milliseconds",i)[n],p="day"===n?this.$D+(e-this.$W):e;if(n===h||n===c){var f=this.clone().set(d,1);f.$d[u](p),f.init(),this.$d=f.set(d,Math.min(this.$D,f.daysInMonth())).$d}else u&&this.$d[u](p);return this.init(),this},e.set=function(t,e){return this.clone().$set(t,e)},e.get=function(t){return this[_.p(t)]()},e.add=function(t,e){var i,n=this;t=Number(t);var r=_.p(e),u=function(e){var i=C(n);return _.w(i.date(i.date()+Math.round(e*t)),n)};if(r===h)return this.set(h,this.$M+t);if(r===c)return this.set(c,this.$y+t);if("day"===r)return u(1);if(r===l)return u(7);var d=((i={})[a]=6e4,i[s]=36e5,i[o]=1e3,i)[r]||1,p=this.$d.getTime()+t*d;return _.w(p,this)},e.subtract=function(t,e){return this.add(-1*t,e)},e.format=function(t){var e=this,i=this.$locale();if(!this.isValid())return i.invalidDate||p;var n=t||"YYYY-MM-DDTHH:mm:ssZ",r=_.z(this),o=this.$H,a=this.$m,s=this.$M,l=i.weekdays,h=i.months,u=i.meridiem,c=function(t,i,r,o){return t&&(t[i]||t(e,n))||r[i].slice(0,o)},d=function(t){return _.s(o%12||12,t,"0")},f=u||function(t,e,i){var n=t<12?"AM":"PM";return i?n.toLowerCase():n};return n.replace(g,function(t,n){return n||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return _.s(e.$y,4,"0");case"M":return s+1;case"MM":return _.s(s+1,2,"0");case"MMM":return c(i.monthsShort,s,h,3);case"MMMM":return c(h,s);case"D":return e.$D;case"DD":return _.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return c(i.weekdaysMin,e.$W,l,2);case"ddd":return c(i.weekdaysShort,e.$W,l,3);case"dddd":return l[e.$W];case"H":return String(o);case"HH":return _.s(o,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return f(o,a,!0);case"A":return f(o,a,!1);case"m":return String(a);case"mm":return _.s(a,2,"0");case"s":return String(e.$s);case"ss":return _.s(e.$s,2,"0");case"SSS":return _.s(e.$ms,3,"0");case"Z":return r}return null}(t)||r.replace(":","")})},e.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},e.diff=function(t,e,i){var n,r=this,d=_.p(e),p=C(t),f=(p.utcOffset()-this.utcOffset())*6e4,g=this-p,m=function(){return _.m(r,p)};switch(d){case c:n=m()/12;break;case h:n=m();break;case u:n=m()/3;break;case l:n=(g-f)/6048e5;break;case"day":n=(g-f)/864e5;break;case s:n=g/36e5;break;case a:n=g/6e4;break;case o:n=g/1e3;break;default:n=g}return i?n:_.a(n)},e.daysInMonth=function(){return this.endOf(h).$D},e.$locale=function(){return w[this.$L]},e.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),n=S(t,e,!0);return n&&(i.$L=n),i},e.clone=function(){return _.w(this.$d,this)},e.toDate=function(){return new Date(this.valueOf())},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},t}()).prototype,C.prototype=T,[["$ms",r],["$s",o],["$m",a],["$H",s],["$W","day"],["$M",h],["$y",c],["$D",d]].forEach(function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),C.extend=function(t,e){return t.$i||(t(e,M,C),t.$i=!0),C},C.locale=S,C.isDayjs=x,C.unix=function(t){return C(1e3*t)},C.en=w[y],C.Ls=w,C.p={},t8=C,(P=tn||(tn={}))[P.NORMAL=0]="NORMAL",P[P.RUN_OF_EIGHT_EXCEPTION=1]="RUN_OF_EIGHT_EXCEPTION",P[P.FOUR_NEAR_LIMIT_EXCEPTION=2]="FOUR_NEAR_LIMIT_EXCEPTION",P[P.NPL_EXCEPTION=3]="NPL_EXCEPTION";const t7={toolbox:{feature:{saveAsImage:{type:"png",pixelRatio:2,backgroundColor:"#f0f0f0",name:"xplot-mrplot-"+function(){let t=new Date;return t.getFullYear()+("0"+(t.getMonth()+1)).slice(-2)+("0"+t.getDate()).slice(-2)+"-"+("0"+t.getHours()).slice(-2)+("0"+t.getMinutes()).slice(-2)}()}}},backgroundColor:"#f0f0f0",xAxis:{type:"time",axisLabel:{formatter:"{d} {MMM}",hideOverlap:!0,color:"#000"},axisLine:{lineStyle:{color:"#000"}}},yAxis:{splitLine:{show:!1},axisLabel:{name:"",fontSize:11,color:"#000",hideOverlap:!0},nameLocation:"middle",nameRotate:90,nameGap:40,nameTextStyle:{color:"#000"}},title:{left:"center",triggerEvent:!0},tooltip:{show:!0}},et=t=>{var e;return{value:[(e=t.x,i(t8)(e).valueOf()),t.value],itemStyle:{color:function(t){switch(t){case 1:return"blue";case 2:return"orange";case 3:return"red";default:return"black"}}(t.status)},label:{show:!1,color:function(t){switch(t){case 1:return"blue";case 2:return"#be5504";case 3:return"#e3242b";default:return"black"}}(t.status),fontWeight:"bold",fontSize:10},tooltip:{formatter:`${i(t8)(t.x).format("ddd, D MMM YYYY")}:<br/> ${t.value}`}}},ee=(t,e)=>({name:`${e}-data`,z:98,type:"line",symbol:"circle",symbolSize:4,lineStyle:{color:"#000"},data:t.map(et)});t4("1C6fS"),t4("1hIp0"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var ei=t4("hmx0d"),en=t4("7mb70"),er={},en=t4("7mb70"),eo=t4("5dW2a"),ea={},es={},el=t4("faIBy"),eh=t4("5Okwt");es=function(t){if("Function"===el(t))return eh(t)};var eu=t4("eXHxq"),ec=t4("gcG3g"),ed=es(es.bind);ea=function(t,e){return eu(t),void 0===e?t:ec?ed(t,e):function(){return t.apply(e,arguments)}};var ep=t4("9GTLg"),ef=t4("2HOcD"),eg=t4("8lFU3"),em=t4("fRIdv"),ey=t4("BsNAl"),ev=t4("1RN1j"),ew={},eb=TypeError;ew=function(t,e){if(t<e)throw new eb("Not enough arguments");return t};var ex={},eS=t4("6hv4b");ex=/(?:ipad|iphone|ipod).*applewebkit/i.test(eS);var eC={},en=t4("7mb70"),el=t4("faIBy");eC="process"===el(en.process);var e_=en.setImmediate,eM=en.clearImmediate,eT=en.process,eI=en.Dispatch,eR=en.Function,eE=en.MessageChannel,eA=en.String,ek=0,eD={},eO="onreadystatechange";eg(function(){tr=en.location});var eP=function(t){if(ef(eD,t)){var e=eD[t];delete eD[t],e()}},eL=function(t){return function(){eP(t)}},eN=function(t){eP(t.data)},eH=function(t){en.postMessage(eA(t),tr.protocol+"//"+tr.host)};e_&&eM||(e_=function(t){ew(arguments.length,1);var e=ep(t)?t:eR(t),i=ey(arguments,1);return eD[++ek]=function(){eo(e,void 0,i)},to(ek),ek},eM=function(t){delete eD[t]},eC?to=function(t){eT.nextTick(eL(t))}:eI&&eI.now?to=function(t){eI.now(eL(t))}:eE&&!ex?(ts=(ta=new eE).port2,ta.port1.onmessage=eN,to=ea(ts.postMessage,ts)):en.addEventListener&&ep(en.postMessage)&&!en.importScripts&&tr&&"file:"!==tr.protocol&&!eg(eH)?(to=eH,en.addEventListener("message",eN,!1)):to=eO in ev("script")?function(t){em.appendChild(ev("script"))[eO]=function(){em.removeChild(this),eP(t)}}:function(t){setTimeout(eL(t),0)});var eV=(er={set:e_,clear:eM}).clear;ei({global:!0,bind:!0,enumerable:!0,forced:en.clearImmediate!==eV},{clearImmediate:eV});var ei=t4("hmx0d"),en=t4("7mb70"),eB=er.set,eF={},en=t4("7mb70"),eo=t4("5dW2a"),ep=t4("9GTLg"),eW={};eW="function"==typeof Bun&&Bun&&"string"==typeof Bun.version;var eS=t4("6hv4b"),ey=t4("BsNAl"),ez=en.Function,ej=/MSIE .\./.test(eS)||eW&&((L=en.Bun.version.split(".")).length<3||"0"===L[0]&&(L[1]<3||"3"===L[1]&&"0"===L[2]));eF=function(t,e){var i=e?2:1;return ej?function(n,r){var o=ew(arguments.length,1)>i,a=ep(n)?n:ez(n),s=o?ey(arguments,i):[],l=o?function(){eo(a,this,s)}:a;return e?t(l,r):t(l)}:t};var eU=en.setImmediate?eF(eB,!1):eB;ei({global:!0,bind:!0,enumerable:!0,forced:en.setImmediate!==eU},{setImmediate:eU});var eG=t4("gFbQZ"),eY=t4("f3221"),eX=t4("gnaTS"),e$=t4("eL8cl");t4("1C6fS");var eZ=t4("bCtEl"),eq=t4("7HxIw"),eK=t4("jxqWV"),eQ=t4("1k8Ev");function eJ(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function e0(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var e1=new WeakSet;class e2{constructor(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(this,e1),e1.add(this),eJ(this,"hot",void 0),eJ(this,"tableMeta",void 0),eJ(this,"selection",void 0),eJ(this,"eventManager",void 0),eJ(this,"destroyed",!1),eJ(this,"activeEditor",void 0),eJ(this,"cellProperties",void 0),this.hot=t,this.tableMeta=e,this.selection=i,this.eventManager=new eQ.default(t),this.hot.addHook("afterDocumentKeyDown",t=>e0(e1,this,e5).call(this,t)),this.eventManager.addEventListener(this.hot.rootDocument.documentElement,"compositionstart",t=>{!this.destroyed&&this.hot.isListening()&&this.openEditor("",t)}),this.hot.view._wt.update("onCellDblClick",(t,e,i)=>e0(e1,this,e3).call(this,t,e,i))}getActiveEditor(){return this.activeEditor}prepareEditor(){var t;if(this.activeEditor&&this.activeEditor.isWaiting()){this.closeEditor(!1,!1,t=>{t&&this.prepareEditor()});return}let e=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;if(!e||e.isHeader())return;let{row:i,col:n}=e,r=this.hot.runHooks("modifyGetCellCoords",i,n),o=i,a=n;if(Array.isArray(r)&&([o,a]=r),this.cellProperties=this.hot.getCellMeta(o,a),!this.isCellEditable()){this.clearActiveEditor();return}let s=this.hot.getCell(i,n,!0);if(s){let t=this.hot.getCellEditor(this.cellProperties),e=this.hot.colToProp(a),r=this.hot.getSourceDataAtCell(this.hot.toPhysicalRow(o),a);this.activeEditor=(0,eK.getEditorInstance)(t,this.hot),this.activeEditor.prepare(i,n,e,s,r,this.cellProperties)}}isEditorOpened(){return this.activeEditor&&this.activeEditor.isOpened()}openEditor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.isCellEditable()){this.clearActiveEditor();return}let n=this.hot.getSelectedRangeLast(),r=this.hot.runHooks("beforeBeginEditing",n.highlight.row,n.highlight.col,t,e,i);if(e instanceof MouseEvent&&"boolean"!=typeof r&&(r=0===this.hot.selection.getLayerLevel()&&n.isSingle()),!1===r){this.clearActiveEditor();return}this.activeEditor||(this.hot.scrollToFocusedCell(),this.prepareEditor()),this.activeEditor&&(i&&this.activeEditor.enableFullEditMode(),this.activeEditor.beginEditing(t,e))}closeEditor(t,e,i){this.activeEditor?this.activeEditor.finishEditing(t,e,i):i&&i(!1)}closeEditorAndSaveChanges(t){this.closeEditor(!1,t)}closeEditorAndRestoreOriginalValue(t){this.closeEditor(!0,t)}clearActiveEditor(){this.activeEditor=void 0}isCellEditable(){let t=this.hot.getSelectedRangeLast();if(!t)return!1;let e=this.hot.getCellEditor(this.cellProperties),{row:i,col:n}=t.highlight,{rowIndexMapper:r,columnIndexMapper:o}=this.hot,a=r.isHidden(this.hot.toPhysicalRow(i))||o.isHidden(this.hot.toPhysicalColumn(n));return!this.cellProperties.readOnly&&!!e&&!a}moveSelectionAfterEnter(t){let e={..."function"==typeof this.tableMeta.enterMoves?this.tableMeta.enterMoves(t):this.tableMeta.enterMoves};t.shiftKey&&(e.row=-e.row,e.col=-e.col),this.hot.selection.isMultiple()?this.selection.transformFocus(e.row,e.col):this.selection.transformStart(e.row,e.col,!0)}destroy(){this.destroyed=!0,this.eventManager.destroy()}}function e5(t){let e=this.hot.getSelectedRangeLast();if(!this.hot.isListening()||!e||e.highlight.isHeader()||(0,eq.isImmediatePropagationStopped)(t))return;let{keyCode:i}=t,n=(t.ctrlKey||t.metaKey)&&!t.altKey;this.activeEditor&&(!this.activeEditor||this.activeEditor.isWaiting())||(0,eZ.isFunctionKey)(i)||(0,eZ.isCtrlMetaKey)(i)||n||this.isEditorOpened()||this.openEditor("",t)}function e3(t,e){e.isCell()&&this.openEditor(null,t,!0)}const e4=new WeakMap;e2.getInstance=function(t,e,i){let n=e4.get(t);return n||(n=new e2(t,e,i),e4.set(t,n)),n};var eQ=t4("1k8Ev"),e6=t4("hwT6B");t4("1C6fS");var e8=t4("jlXkd"),eG=t4("gFbQZ"),eY=t4("f3221");function e9(t,e,i){e7(t,e),e.set(t,i)}function e7(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function it(t,e){return t.get(ii(t,e))}function ie(t,e,i){return t.set(ii(t,e),i),i}function ii(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const ir=Object.freeze({CELL:"cell",MIXED:"mixed"});var io=new WeakMap,ia=new WeakMap,is=new WeakMap,il=new WeakMap,ih=new WeakMap,iu=new WeakSet;class ic{constructor(t){var e=this;e7(this,iu),iu.add(this),e9(this,io,void 0),e9(this,ia,void 0),e9(this,is,1),e9(this,il,null),e9(this,ih,new Map);let i=t.getSettings();ie(io,this,t),ie(ia,this,i.imeFastEdit?ir.MIXED:ir.CELL),it(io,this).addHook("afterUpdateSettings",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return ii(iu,e,im).call(e,...i)}),it(io,this).addHook("afterSelection",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return ii(iu,e,ip).call(e,...i)}),it(io,this).addHook("afterSelectionFocusSet",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return ii(iu,e,ip).call(e,...i)}),it(io,this).addHook("afterSelectionEnd",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return ii(iu,e,ig).call(e,...i)})}getFocusMode(){return it(ia,this)}setFocusMode(t){Object.values(ir).includes(t)?ie(ia,this,t):(0,e8.warn)(`"${t}" is not a valid focus mode.`)}getRefocusDelay(){return it(is,this)}setRefocusDelay(t){ie(is,this,t)}setRefocusElementGetter(t){ie(il,this,t)}getRefocusElement(){var t;return"function"==typeof it(il,this)?it(il,this).call(this):null===(t=it(io,this).getActiveEditor())||void 0===t?void 0:t.TEXTAREA}focusOnHighlightedCell(t){let e=t=>{var e,i;let n=null===(e=it(io,this).getSelectedRangeLast())||void 0===e?void 0:e.highlight;if(!n)return;let r=it(io,this).runHooks("modifyFocusedElement",n.row,n.col,t);r instanceof HTMLElement||(r=t),r&&!(null!==(i=it(io,this).getActiveEditor())&&void 0!==i&&i.isOpened())&&r.focus({preventScroll:!0})};t?e(t):ii(iu,this,id).call(this,t=>e(t))}refocusToEditorTextarea(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it(is,this),i=this.getRefocusElement();it(io,this).getSettings().imeFastEdit&&!(null!==(t=it(io,this).getActiveEditor())&&void 0!==t&&t.isOpened())&&i&&(it(ih,this).has(e)||it(ih,this).set(e,(0,eY.debounce)(()=>{i.select()},e)),it(ih,this).get(e)())}}function id(t){var e;let i=null===(e=it(io,this).getSelectedRangeLast())||void 0===e?void 0:e.highlight;if(!i||!it(io,this).selection.isCellVisible(i)){t(null);return}let n=it(io,this).getCell(i.row,i.col,!0);null===n?it(io,this).addHookOnce("afterScroll",()=>{t(it(io,this).getCell(i.row,i.col,!0))}):t(n)}function ip(){ii(iu,this,id).call(this,t=>{let{activeElement:e}=it(io,this).rootDocument;e&&(0,eG.isOutsideInput)(e)&&e.blur(),this.focusOnHighlightedCell(t)})}function ig(){ii(iu,this,id).call(this,t=>{this.getFocusMode()===ir.MIXED&&"TD"===t.nodeName&&this.refocusToEditorTextarea()})}function im(t){"boolean"==typeof t.imeFastEdit&&this.setFocusMode(t.imeFastEdit?ir.MIXED:ir.CELL)}var iy=t4("ceXML"),iv={};n(iv,"instanceToHTML",()=>iq),n(iv,"_dataToHTML",()=>iK),n(iv,"htmlToGridSettings",()=>iQ),t4("1hIp0");var ei=t4("hmx0d"),iw=t4("bGtV7"),eh=t4("5Okwt"),ib=t4("gMtBp"),ep=t4("9GTLg"),ix=t4("aIKND"),iS={},iC=t4("96Da4"),el=t4("faIBy"),i_=t4("blCy8"),iM=i_("match");iS=function(t){var e;return iC(t)&&(void 0!==(e=t[iM])?!!e:"RegExp"===el(t))};var iT=t4("jqSLA"),iI=t4("kdzTk"),iR={},iw=t4("bGtV7"),ef=t4("2HOcD"),iE=t4("5Ef1u"),iA={},ik=t4("hc2VB");iA=function(){var t=ik(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e};var iD=RegExp.prototype;iR=function(t){var e=t.flags;return!(void 0===e&&!("flags"in iD)&&!ef(t,"flags")&&iE(iD,t))?e:iw(iA,t)};var iO={},eh=t4("5Okwt"),iP=t4("dZoqA"),iL=Math.floor,iN=eh("".charAt),iH=eh("".replace),iV=eh("".slice),iB=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,iF=/\$([$&'`]|\d{1,2})/g;iO=function(t,e,i,n,r,o){var a=i+t.length,s=n.length,l=iF;return void 0!==r&&(r=iP(r),l=iB),iH(o,l,function(o,l){var h;switch(iN(l,0)){case"$":return"$";case"&":return t;case"`":return iV(e,0,i);case"'":return iV(e,a);case"<":h=r[iV(l,1,-1)];break;default:var u=+l;if(0===u)return o;if(u>s){var c=iL(u/10);if(0===c)return o;if(c<=s)return void 0===n[c-1]?iN(l,1):n[c-1]+iN(l,1);return o}h=n[u-1]}return void 0===h?"":h})};var i_=t4("blCy8"),iW=t4("jfGLK"),iz=i_("replace"),ij=TypeError,iU=eh("".indexOf),iG=eh("".replace),iY=eh("".slice),iX=Math.max;ei({target:"String",proto:!0},{replaceAll:function(t,e){var i,n,r,o,a,s,l,h,u=ib(this),c=0,d=0,p="";if(!ix(t)){if((i=iS(t))&&!~iU(iT(ib(iR(t))),"g"))throw new ij("`.replaceAll` does not allow non-global regexes");if(n=iI(t,iz))return iw(n,t,u,e);if(iW&&i)return iG(iT(u),t,e)}for(r=iT(u),o=iT(t),(a=ep(e))||(e=iT(e)),l=iX(1,s=o.length),c=iU(r,o);-1!==c;)h=a?iT(e(o,c,r)):iO(o,r,c,[],void 0,e),p+=iY(r,d,c)+h,d=c+s,c=c+l>r.length?-1:iU(r,o,c+l);return d<r.length&&(p+=iY(r,d)),p}});var eX=t4("gnaTS");const i$={"&nbsp;":" ","&amp;":"&","&lt;":"<","&gt;":">"},iZ=RegExp(Object.keys(i$).map(t=>`(${t})`).join("|"),"gi");function iq(t){let e=t.hasColHeaders(),i=t.hasRowHeaders(),n=[e?-1:0,i?-1:0,t.countRows()-1,t.countCols()-1],r=t.getData(...n),o=r.length,a=o>0?r[0].length:0,s=["<table>","</table>"],l=e?["<thead>","</thead>"]:[],h=["<tbody>","</tbody>"],u=i?1:0,c=e?1:0;for(let n=0;n<o;n+=1){let o=e&&0===n,s=[];for(let e=0;e<a;e+=1){let a=!o&&i&&0===e,l="";if(o)l=`<th>${t.getColHeader(e-u)}</th>`;else if(a)l=`<th>${t.getRowHeader(n-c)}</th>`;else{let i=r[n][e],{hidden:o,rowspan:a,colspan:s}=t.getCellMeta(n-c,e-u);if(!o){let t=[];if(a&&t.push(`rowspan="${a}"`),s&&t.push(`colspan="${s}"`),(0,eX.isEmpty)(i))l=`<td ${t.join(" ")}></td>`;else{let e=i.toString().replace("<","&lt;").replace(">","&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,"<br>\r\n").replace(/\x20/gi,"&nbsp;").replace(/\t/gi,"&#9;");l=`<td ${t.join(" ")}>${e}</td>`}}}s.push(l)}let d=["<tr>",...s,"</tr>"].join("");o?l.splice(1,0,d):h.splice(-1,0,d)}return s.splice(1,0,l.join(""),h.join("")),s.join("")}function iK(t){let e=t.length,i=["<table>"];for(let n=0;n<e;n+=1){let r=t[n],o=r.length,a=[];0===n&&i.push("<tbody>");for(let t=0;t<o;t+=1){let e=r[t],i=(0,eX.isEmpty)(e)?"":e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,"<br>\r\n").replace(/\x20{2,}/gi,t=>`<span style="mso-spacerun: yes">${"&nbsp;".repeat(t.length-1)} </span>`).replace(/\t/gi,"&#9;");a.push(`<td>${i}</td>`)}i.push("<tr>",...a,"</tr>"),n+1===e&&i.push("</tbody>")}return i.push("</table>"),i.join("")}function iQ(t){var e;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n={},r=i.createDocumentFragment(),o=i.createElement("div");r.appendChild(o);let a=t;if("string"==typeof a){let t=a.replace(/<td\b[^>]*?>([\s\S]*?)<\/\s*td>/g,t=>{let e=t.match(/<td\b[^>]*?>/g)[0],i=t.substring(e.length,t.lastIndexOf("<")).trim().replaceAll(/\n\s+/g," ").replaceAll(/<p.*?>/g,"\n").replace("\n","").replaceAll(/<\/(.*)>\s+$/mg,"</$1>").replace(/(<(?!br)([^>]+)>)/gi,"").replaceAll(/^&nbsp;$/mg,"");return`${e}${i}</td>`});o.insertAdjacentHTML("afterbegin",`${t}`),a=o.querySelector("table")}if(!a||"TABLE"!==((e=a)&&e.nodeName||""))return;let s=o.querySelector('meta[name$="enerator"]'),l=null!==a.querySelector("tbody th"),h=a.querySelector("tr"),u=h?Array.from(h.cells).reduce((t,e)=>t+e.colSpan,0)-(l?1:0):0,c=a.tFoot&&Array.from(a.tFoot.rows)||[],d=[],p=!1,f=0,g=0;if(a.tHead){let t=Array.from(a.tHead.rows).filter(t=>{let e=null!==t.querySelector("td");return e&&d.push(t),!e});p=(f=t.length)>0,f>1?n.nestedHeaders=Array.from(t).reduce((t,e)=>{let i=Array.from(e.cells).reduce((t,e,i)=>{if(l&&0===i)return t;let{colSpan:n,innerHTML:r}=e;return t.push(n>1?{label:r,colspan:n}:r),t},[]);return t.push(i),t},[]):p&&(n.colHeaders=Array.from(t[0].children).reduce((t,e,i)=>(l&&0===i||t.push(e.innerHTML),t),[]))}d.length&&(n.fixedRowsTop=d.length),c.length&&(n.fixedRowsBottom=c.length);let m=[...d,...Array.from(a.tBodies).reduce((t,e)=>(t.push(...Array.from(e.rows)),t),[]),...c],y=Array(g=m.length);for(let t=0;t<g;t++)y[t]=Array(u);let w=[],b=[];for(let t=0;t<g;t++){let e=Array.from(m[t].cells),i=e.length;for(let n=0;n<i;n++){let i=e[n],{nodeName:r,innerHTML:o,rowSpan:a,colSpan:l}=i,h=y[t].findIndex(t=>void 0===t);if("TD"===r){if(a>1||l>1){for(let e=t;e<t+a;e++)if(e<g)for(let t=h;t<h+l;t++)y[e][t]=null;let e=i.getAttribute("style");e&&e.includes("mso-ignore:colspan")||w.push({col:h,row:t,rowspan:a,colspan:l})}let e="";e=s&&/excel/gi.test(s.content)?o.replace(/[\r\n][\x20]{0,2}/g," ").replace(/<br(\s*|\/)>[\r\n]?[\x20]{0,3}/gim,"\r\n"):o.replace(/<br(\s*|\/)>[\r\n]?/gim,"\r\n"),y[t][h]=e.replace(iZ,t=>i$[t])}else b.push(o)}}return w.length&&(n.mergeCells=w),b.length&&(n.rowHeaders=b),y.length&&(n.data=y),n}t4("1C6fS");var iJ=t4("bO142");t4("1C6fS");var i0=t4("guO5N"),eY=t4("f3221");const i1=new Map([["asc",[-1,1]],["desc",[1,-1]]]),i2=t=>`The priority '${t}' is already declared in a map.`,i5=t=>`The priority '${t}' is not a number.`;t4("1C6fS");var eY=t4("f3221");const i3=t=>`The id '${t}' is already declared in a map.`;function i4(){let{errorIdExists:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new Map;function i(){return[...e]}function n(t){return e.has(t)}return t=(0,eY.isFunction)(t)?t:i3,{addItem:function(i,r){if(n(i))throw Error(t(i));e.set(i,r)},clear:function(){e.clear()},getId:function(t){let[e]=i().find(e=>{let[i,n]=e;return t===n&&i})||[null];return e},getItem:function(t){return e.get(t)},getItems:i,hasItem:n,removeItem:function(t){return e.delete(t)}}}t4("1C6fS"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var eY=t4("f3221");const i6=t=>`'${t}' value is already declared in a unique set.`,i8=t=>`There is already registered "${t}" plugin.`,i9=function(){let{errorPriorityExists:t,errorPriorityNaN:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=new Map;return t=(0,eY.isFunction)(t)?t:i2,e=(0,eY.isFunction)(e)?e:i5,{addItem:function(n,r){if(!(0,i0.isNumeric)(n))throw Error(e(n));if(i.has(n))throw Error(t(n));i.set(n,r)},getItems:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",[e,n]=i1.get(t)||i1.get("asc");return[...i].sort((t,i)=>t[0]<i[0]?e:n).map(t=>t[1])}}}({errorPriorityExists:t=>`There is already registered plugin on priority "${t}".`,errorPriorityNaN:t=>`The priority "${t}" is not a number.`}),i7=function(){let{errorItemExists:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new Set;return t=(0,eY.isFunction)(t)?t:i6,{addItem:function(i){if(e.has(i))throw Error(t(i));e.add(i)},clear:function(){e.clear()},getItems:function(){return[...e]}}}({errorItemExists:i8}),nt=i4({errorIdExists:i8});function ne(){return[...i9.getItems(),...i7.getItems()]}function ni(t){let e=(0,iJ.toUpperCaseFirst)(t);return nt.getItem(e)}function nn(t,e,i){var n,r,o;[t,e,i]=(n=t,r=e,o=i,"function"==typeof n&&(n=(r=n).PLUGIN_KEY,o=r.PLUGIN_PRIORITY),[n,r,o]),void 0===ni(t)&&function(t,e,i){let n=(0,iJ.toUpperCaseFirst)(t);if(nt.hasItem(n))throw Error(i8(n));void 0===i?i7.addItem(n):i9.addItem(i,n),nt.addItem(n,e)}(t,e,i)}t4("1C6fS");var nr=t4("lSZ9A");const{register:no,getItem:na,hasItem:ns,getNames:nl,getValues:nh}=(0,nr.default)("renderers");function nu(t){if("function"==typeof t)return t;if(!ns(t))throw Error(`No registered renderer found under "${t}" name`);return na(t)}function nc(t,e){"string"!=typeof t&&(t=(e=t).RENDERER_TYPE),no(t,e)}var eK=t4("jxqWV");t4("1C6fS");var nr=t4("lSZ9A");const{register:nd,getItem:np,hasItem:nf,getNames:ng,getValues:nm}=(0,nr.default)("validators");function ny(t){if("function"==typeof t)return t;if(!nf(t))throw Error(`No registered validator found under "${t}" name`);return np(t)}function nv(t,e){"string"!=typeof t&&(t=(e=t).VALIDATOR_TYPE),nd(t,e)}var iJ=t4("bO142"),i0=t4("guO5N");t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),eQ=t4("1k8Ev"),eq=t4("7HxIw");t4("1hIp0"),t4("1C6fS");var eG=t4("gFbQZ"),eY=t4("f3221"),nw=t4("llu1T"),e$=t4("eL8cl"),eX=t4("gnaTS");function nb(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function nx(t,e){return t.get(nC(t,e))}function nS(t,e,i){return t.set(nC(t,e),i),i}function nC(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var n_=new WeakMap,nM=new WeakMap,nT=new WeakMap,nI=new WeakMap,nR=new WeakMap,nE=new WeakMap,nA=new WeakMap,nk=new WeakMap,nD=new WeakMap,nO=new WeakMap,nP=class{constructor(t,e,i,n,r,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;nb(this,n_,void 0),nb(this,nM,void 0),nb(this,nT,void 0),nb(this,nI,void 0),nb(this,nR,void 0),nb(this,nE,void 0),nb(this,nA,void 0),nb(this,nk,void 0),nb(this,nD,[null,null]),nb(this,nO,[null,null]),nS(n_,this,i),nS(nM,this,e),nS(nT,this,r),nS(nI,this,o),nS(nR,this,a),nS(nE,this,n),nS(nA,this,t),this.registerEvents()}registerEvents(){nx(nE,this).addEventListener(nx(nT,this).holder,"contextmenu",t=>this.onContextMenu(t)),nx(nE,this).addEventListener(nx(nT,this).TABLE,"mouseover",t=>this.onMouseOver(t)),nx(nE,this).addEventListener(nx(nT,this).TABLE,"mouseout",t=>this.onMouseOut(t));let t=()=>{nx(nE,this).addEventListener(nx(nT,this).holder,"touchstart",t=>this.onTouchStart(t)),nx(nE,this).addEventListener(nx(nT,this).holder,"touchend",t=>this.onTouchEnd(t)),this.momentumScrolling||(this.momentumScrolling={}),nx(nE,this).addEventListener(nx(nT,this).holder,"scroll",()=>{clearTimeout(this.momentumScrolling._timeout),this.momentumScrolling.ongoing||nx(n_,this).getSetting("onBeforeTouchScroll"),this.momentumScrolling.ongoing=!0,this.momentumScrolling._timeout=setTimeout(()=>{this.touchApplied||(this.momentumScrolling.ongoing=!1,nx(n_,this).getSetting("onAfterMomentumScroll"))},200)})};(0,e$.isMobileBrowser)()?t():((0,nw.isTouchSupported)()&&t(),(()=>{nx(nE,this).addEventListener(nx(nT,this).holder,"mouseup",t=>this.onMouseUp(t)),nx(nE,this).addEventListener(nx(nT,this).holder,"mousedown",t=>this.onMouseDown(t))})())}selectedCellWasTouched(t){let e=this.parentCell(t).coords;if(nx(nk,this)&&e){let[t,i]=[e.row,nx(nk,this).from.row],[n,r]=[e.col,nx(nk,this).from.col];return t===i&&n===r}return!1}parentCell(t){let e={},i=nx(nT,this).TABLE,n=(0,eG.closestDown)(t,["TD","TH"],i);return n?(e.coords=nx(nT,this).getCoords(n),e.TD=n):(0,eG.hasClass)(t,"wtBorder")&&(0,eG.hasClass)(t,"current")?(e.coords=nx(nI,this).getFocusSelection().cellRange.highlight,e.TD=nx(nT,this).getCell(e.coords)):(0,eG.hasClass)(t,"wtBorder")&&(0,eG.hasClass)(t,"area")&&nx(nI,this).getAreaSelection().cellRange&&(e.coords=nx(nI,this).getAreaSelection().cellRange.to,e.TD=nx(nT,this).getCell(e.coords)),e}onMouseDown(t){let e=nx(nM,this).rootDocument.activeElement,i=(0,eY.partial)(eG.getParent,t.target),n=t.target;if(!["TD","TH"].includes(e.nodeName)&&(n===e||i(0)===e||i(1)===e))return;let r=this.parentCell(n);(0,eG.hasClass)(n,"corner")?nx(n_,this).getSetting("onCellCornerMouseDown",t,n):r.TD&&nx(n_,this).has("onCellMouseDown")&&this.callListener("onCellMouseDown",t,r.coords,r.TD),(0===t.button||this.touchApplied)&&r.TD&&(nx(nO,this)[0]=r.TD,clearTimeout(nx(nD,this)[0]),nx(nD,this)[0]=setTimeout(()=>{nx(nO,this)[0]=null},1e3))}onContextMenu(t){if(nx(n_,this).has("onCellContextMenu")){let e=this.parentCell(t.target);e.TD&&this.callListener("onCellContextMenu",t,e.coords,e.TD)}}onMouseOver(t){if(!nx(n_,this).has("onCellMouseOver"))return;let e=nx(nT,this).TABLE,i=(0,eG.closestDown)(t.target,["TD","TH"],e),n=nx(nR,this)||this;i&&i!==n.lastMouseOver&&(0,eG.isChildOf)(i,e)&&(n.lastMouseOver=i,this.callListener("onCellMouseOver",t,nx(nT,this).getCoords(i),i))}onMouseOut(t){if(!nx(n_,this).has("onCellMouseOut"))return;let e=nx(nT,this).TABLE,i=(0,eG.closestDown)(t.target,["TD","TH"],e),n=(0,eG.closestDown)(t.relatedTarget,["TD","TH"],e),r=nx(nR,this)||this;i&&i!==n&&(0,eG.isChildOf)(i,e)&&(this.callListener("onCellMouseOut",t,nx(nT,this).getCoords(i),i),null===n&&(r.lastMouseOver=null))}onMouseUp(t){let e=this.parentCell(t.target);e.TD&&nx(n_,this).has("onCellMouseUp")&&this.callListener("onCellMouseUp",t,e.coords,e.TD),(0===t.button||this.touchApplied)&&(e.TD===nx(nO,this)[0]&&e.TD===nx(nO,this)[1]?((0,eG.hasClass)(t.target,"corner")?this.callListener("onCellCornerDblClick",t,e.coords,e.TD):this.callListener("onCellDblClick",t,e.coords,e.TD),nx(nO,this)[0]=null,nx(nO,this)[1]=null):e.TD===nx(nO,this)[0]&&(nx(nO,this)[1]=e.TD,clearTimeout(nx(nD,this)[1]),nx(nD,this)[1]=setTimeout(()=>{nx(nO,this)[1]=null},500)))}onTouchStart(t){nS(nk,this,nx(nI,this).getFocusSelection().cellRange),this.touchApplied=!0,this.onMouseDown(t)}onTouchEnd(t){var e;let i=t.target,n=null===(e=this.parentCell(i))||void 0===e?void 0:e.coords,r=(0,eX.isDefined)(n)&&n.row>=0&&n.col>=0;t.cancelable&&r&&nx(n_,this).getSetting("isDataViewInstance")&&((0,e$.isIOS)()&&((0,e$.isChromeWebKit)()||(0,e$.isFirefoxWebKit)())&&this.selectedCellWasTouched(i)&&!["A","BUTTON","INPUT"].includes(i.tagName)?t.preventDefault():this.selectedCellWasTouched(i)||t.preventDefault()),this.onMouseUp(t),this.touchApplied=!1}callListener(t,e,i,n){let r=nx(n_,this).getSettingPure(t);r&&r(e,i,n,nx(nA,this).call(this))}destroy(){clearTimeout(nx(nD,this)[0]),clearTimeout(nx(nD,this)[1]),nx(nE,this).destroy()}};t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),nw=t4("llu1T"),iy=t4("ceXML"),eZ=t4("bCtEl"),e$=t4("eL8cl"),e8=t4("jlXkd"),eG=t4("gFbQZ");t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),eY=t4("f3221");function nL(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS");var nN=class{constructor(t,e,i){nL(this,"offset",void 0),nL(this,"total",void 0),nL(this,"countTH",void 0),this.offset=t,this.total=e,this.countTH=i}offsetted(t){return t+this.offset}unOffsetted(t){return t-this.offset}renderedToSource(t){return this.offsetted(t)}sourceToRendered(t){return this.unOffsetted(t)}offsettedTH(t){return t-this.countTH}unOffsettedTH(t){return t+this.countTH}visibleRowHeadedColumnToSourceColumn(t){return this.renderedToSource(this.offsettedTH(t))}sourceColumnToVisibleRowHeadedColumn(t){return this.unOffsettedTH(this.sourceToRendered(t))}};function nH(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS");var nV=class{constructor(t,e,i){nH(this,"offset",void 0),nH(this,"total",void 0),nH(this,"countTH",void 0),this.offset=t,this.total=e,this.countTH=i}offsetted(t){return t+this.offset}unOffsetted(t){return t-this.offset}renderedToSource(t){return this.offsetted(t)}sourceToRendered(t){return this.unOffsetted(t)}offsettedTH(t){return t-this.countTH}unOffsettedTH(t){return t+this.countTH}visibleColHeadedRowToSourceRow(t){return this.renderedToSource(this.offsettedTH(t))}sourceRowToVisibleColHeadedRow(t){return this.unOffsettedTH(this.sourceToRendered(t))}};function nB(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS"),t4("1C6fS"),t4("1hIp0"),t4("1C6fS"),t4("1C6fS");class nF{constructor(){nB(this,"currentSize",0),nB(this,"nextSize",0),nB(this,"currentOffset",0),nB(this,"nextOffset",0)}setSize(t){this.currentSize=this.nextSize,this.nextSize=t}setOffset(t){this.currentOffset=this.nextOffset,this.nextOffset=t}}function nW(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class nz{constructor(){nW(this,"size",new nF),nW(this,"workingSpace",0),nW(this,"sharedSize",null)}setSize(t){this.size.setSize(t)}setOffset(t){this.size.setOffset(t)}getViewSize(){return this.size}isShared(){return this.sharedSize instanceof nF}isPlaceOn(t){return this.workingSpace===t}append(t){this.workingSpace=1,t.workingSpace=2,this.sharedSize=t.getViewSize()}prepend(t){this.workingSpace=2,t.workingSpace=1,this.sharedSize=t.getViewSize()}}function nj(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class nU{constructor(t,e,i){nj(this,"rootNode",void 0),nj(this,"nodesPool",void 0),nj(this,"sizeSet",new nz),nj(this,"childNodeType",void 0),nj(this,"visualIndex",0),nj(this,"collectedNodes",[]),this.rootNode=t,this.nodesPool=e,this.childNodeType=i.toUpperCase()}setSize(t){return this.sizeSet.setSize(t),this}setOffset(t){return this.sizeSet.setOffset(t),this}isSharedViewSet(){return this.sizeSet.isShared()}getNode(t){return t<this.collectedNodes.length?this.collectedNodes[t]:null}getCurrentNode(){let t=this.collectedNodes.length;return t>0?this.collectedNodes[t-1]:null}getRenderedChildCount(){let{rootNode:t,sizeSet:e}=this,i=0;if(this.isSharedViewSet()){let n=t.firstElementChild;for(;n;){if(n.tagName===this.childNodeType)i+=1;else if(e.isPlaceOn(1))break;n=n.nextElementSibling}}else i=t.childElementCount;return i}start(){this.collectedNodes.length=0,this.visualIndex=0;let{rootNode:t,sizeSet:e}=this,i=this.isSharedViewSet(),{nextSize:n}=e.getViewSize(),r=this.getRenderedChildCount();for(;r<n;){let n=this.nodesPool();!i||i&&e.isPlaceOn(2)?t.appendChild(n):t.insertBefore(n,t.firstChild),r+=1}let o=i&&e.isPlaceOn(1);for(;r>n;)t.removeChild(o?t.firstChild:t.lastChild),r-=1}render(){let{rootNode:t,sizeSet:e}=this,i=this.visualIndex;this.isSharedViewSet()&&e.isPlaceOn(2)&&(i+=e.sharedSize.nextSize);let n=t.childNodes[i];if(n.tagName!==this.childNodeType){let e=this.nodesPool();t.replaceChild(e,n),n=e}this.collectedNodes.push(n),this.visualIndex+=1}end(){}}class nG extends nU{prependView(t){return this.sizeSet.prepend(t.sizeSet),t.sizeSet.append(this.sizeSet),this}appendView(t){return this.sizeSet.append(t.sizeSet),t.sizeSet.prepend(this.sizeSet),this}}t4("1C6fS"),t4("1C6fS");class nY{constructor(t){var e,i,n;i=void 0,(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e="nodeType","string"))?n:n+"")in this?Object.defineProperty(this,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[e]=i,this.nodeType=t.toUpperCase()}setRootDocument(t){this.rootDocument=t}obtain(){return this.rootDocument.createElement(this.nodeType)}}function nX(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class n${constructor(t,e){nX(this,"nodesPool",null),nX(this,"nodeType",void 0),nX(this,"rootNode",void 0),nX(this,"table",null),nX(this,"renderedNodes",0),this.nodesPool="string"==typeof t?new nY(t):null,this.nodeType=t,this.rootNode=e}setTable(t){this.nodesPool&&this.nodesPool.setRootDocument(t.rootDocument),this.table=t}adjust(){}render(){}}var eG=t4("gFbQZ"),nZ=t4("4Pbrh");function nq(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class nK extends n${constructor(){super("TH"),nq(this,"orderViews",new WeakMap),nq(this,"sourceRowIndex",0)}obtainOrderView(t){let e;return this.orderViews.has(t)?e=this.orderViews.get(t):(e=new nG(t,t=>this.nodesPool.obtain(this.sourceRowIndex,t),this.nodeType),this.orderViews.set(t,e)),e}render(){let{rowsToRender:t,rowHeaderFunctions:e,rowHeadersCount:i,rows:n,cells:r}=this.table;for(let o=0;o<t;o++){let t=this.table.renderedRowToSource(o),a=n.getRenderedNode(o);this.sourceRowIndex=t;let s=this.obtainOrderView(a),l=r.obtainOrderView(a);s.appendView(l).setSize(i).setOffset(this.table.renderedColumnToSource(0)).start();for(let n=0;n<i;n++){s.render();let i=s.getCurrentNode();i.className="",i.removeAttribute("style"),(0,eG.removeAttribute)(i,[RegExp("aria-(.*)"),/role/]),this.table.isAriaEnabled()&&(0,eG.setAttribute)(i,[(0,nZ.A11Y_ROWHEADER)(),(0,nZ.A11Y_SCOPE_ROW)(),(0,nZ.A11Y_COLINDEX)(n+1),(0,nZ.A11Y_TABINDEX)(-1)]),e[n](t,i,n)}s.end()}}}var eG=t4("gFbQZ"),nZ=t4("4Pbrh");class nQ extends n${constructor(t){super(null,t)}adjust(){let{columnHeadersCount:t,rowHeadersCount:e}=this.table,i=this.rootNode.firstChild;if(t){let{columnsToRender:n}=this.table,r=n+e;for(let e=0;e<t;e++){for((i=this.rootNode.childNodes[e])||(i=this.table.rootDocument.createElement("tr"),this.rootNode.appendChild(i)),this.renderedNodes=i.childNodes.length;this.renderedNodes<r;)i.appendChild(this.table.rootDocument.createElement("th")),this.renderedNodes+=1;for(;this.renderedNodes>r;)i.removeChild(i.lastChild),this.renderedNodes-=1}let o=this.rootNode.childNodes.length;if(o>t)for(let e=t;e<o;e++)this.rootNode.removeChild(this.rootNode.lastChild)}else i&&(0,eG.empty)(i)}render(){let{columnHeadersCount:t}=this.table;this.table.isAriaEnabled()&&(0,eG.setAttribute)(this.rootNode,[(0,nZ.A11Y_ROWGROUP)()]);for(let e=0;e<t;e+=1){let{columnHeaderFunctions:t,columnsToRender:i,rowHeadersCount:n}=this.table,r=this.rootNode.childNodes[e];this.table.isAriaEnabled()&&(0,eG.setAttribute)(r,[(0,nZ.A11Y_ROW)(),(0,nZ.A11Y_ROWINDEX)(e+1)]);for(let o=-1*n;o<i;o+=1){let i=this.table.renderedColumnToSource(o),a=r.childNodes[o+n];a.className="",a.removeAttribute("style"),(0,eG.removeAttribute)(a,[RegExp("aria-(.*)"),/role/]),this.table.isAriaEnabled()&&(0,eG.setAttribute)(a,[(0,nZ.A11Y_COLINDEX)(o+1+this.table.rowHeadersCount),(0,nZ.A11Y_TABINDEX)(-1),(0,nZ.A11Y_COLUMNHEADER)(),...o>=0?[(0,nZ.A11Y_SCOPE_COL)()]:[(0,nZ.A11Y_ROW)()]]),t[e](i,a,e)}}}}var e8=t4("jlXkd"),nJ=t4("iCsRe"),eG=t4("gFbQZ");let n0=!1;class n1 extends n${constructor(t){super(null,t)}adjust(){let{columnsToRender:t,rowHeadersCount:e}=this.table,i=t+e;for(;this.renderedNodes<i;)this.rootNode.appendChild(this.table.rootDocument.createElement("col")),this.renderedNodes+=1;for(;this.renderedNodes>i;)this.rootNode.removeChild(this.rootNode.lastChild),this.renderedNodes-=1}render(){this.adjust();let{columnsToRender:t,rowHeadersCount:e}=this.table;!n0&&t>1e3&&(n0=!0,(0,e8.warn)((0,nJ.toSingleLine)`Performance tip: Handsontable rendered more than 1000 visible columns.\x20
        Consider limiting the number of rendered columns by specifying the table width and/or\x20
        turning off the "renderAllColumns" option.`));for(let t=0;t<e;t++){let e=this.table.renderedColumnToSource(t),i=this.table.columnUtils.getHeaderWidth(e);this.rootNode.childNodes[t].style.width=`${i}px`}for(let i=0;i<t;i++){let t=this.table.renderedColumnToSource(i),n=this.table.columnUtils.getStretchedColumnWidth(t);this.rootNode.childNodes[i+e].style.width=`${n}px`}let i=this.rootNode.firstChild;i&&(0,eG.addClass)(i,"rowHeader")}}t4("1C6fS");var e8=t4("jlXkd"),nJ=t4("iCsRe"),eG=t4("gFbQZ"),nZ=t4("4Pbrh");const n2={rowEven:"ht__row_even",rowOdd:"ht__row_odd"};let n5=!1;class n3 extends n${constructor(t){var e,i,n;super("TR",t),i=void 0,(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e="orderView","string"))?n:n+"")in this?Object.defineProperty(this,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[e]=i,this.orderView=new nU(t,t=>this.nodesPool.obtain(t),this.nodeType)}getRenderedNode(t){return this.orderView.getNode(t)}render(){let{rowsToRender:t}=this.table;!n5&&t>1e3&&(n5=!0,(0,e8.warn)((0,nJ.toSingleLine)`Performance tip: Handsontable rendered more than 1000 visible rows.\x20
        Consider limiting the number of rendered rows by specifying the table height and/or\x20
        turning off the "renderAllRows" option.`)),this.table.isAriaEnabled()&&(0,eG.setAttribute)(this.rootNode,[(0,nZ.A11Y_ROWGROUP)()]),this.orderView.setSize(t).setOffset(this.table.renderedRowToSource(0)).start();for(let n=0;n<t;n++){this.orderView.render();let t=this.orderView.getCurrentNode(),r=this.table.renderedRowToSource(n);if(this.table.isAriaEnabled()){var e,i;(0,eG.setAttribute)(t,[(0,nZ.A11Y_ROW)(),(0,nZ.A11Y_ROWINDEX)(r+(null!==(e=null===(i=this.table.rowUtils)||void 0===i||null===(i=i.dataAccessObject)||void 0===i?void 0:i.columnHeaders.length)&&void 0!==e?e:0)+1)])}(0,eG.removeClass)(t,[n2.rowEven,n2.rowOdd]),(r+1)%2==0?(0,eG.addClass)(t,n2.rowEven):(0,eG.addClass)(t,n2.rowOdd)}this.orderView.end()}}t4("1C6fS");var eG=t4("gFbQZ"),nZ=t4("4Pbrh");function n4(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class n6 extends n${constructor(){super("TD"),n4(this,"orderViews",new WeakMap),n4(this,"sourceRowIndex",0)}obtainOrderView(t){let e;return this.orderViews.has(t)?e=this.orderViews.get(t):(e=new nG(t,t=>this.nodesPool.obtain(this.sourceRowIndex,t),this.nodeType),this.orderViews.set(t,e)),e}render(){let{rowsToRender:t,columnsToRender:e,rows:i,rowHeaders:n}=this.table;for(let a=0;a<t;a++){let t=this.table.renderedRowToSource(a),s=i.getRenderedNode(a);this.sourceRowIndex=t;let l=this.obtainOrderView(s),h=n.obtainOrderView(s);l.prependView(h).setSize(e).setOffset(this.table.renderedColumnToSource(0)).start();for(let i=0;i<e;i++){l.render();let e=l.getCurrentNode(),n=this.table.renderedColumnToSource(i);if((0,eG.hasClass)(e,"hide")||(e.className=""),e.removeAttribute("style"),e.removeAttribute("dir"),(0,eG.removeAttribute)(e,[RegExp("aria-(.*)"),/role/]),this.table.cellRenderer(t,n,e),this.table.isAriaEnabled()){var r,o;(0,eG.setAttribute)(e,[...e.hasAttribute("role")?[]:[(0,nZ.A11Y_GRIDCELL)()],(0,nZ.A11Y_TABINDEX)(-1),(0,nZ.A11Y_COLINDEX)(n+(null!==(r=null===(o=this.table.rowUtils)||void 0===o||null===(o=o.dataAccessObject)||void 0===o?void 0:o.rowHeaders.length)&&void 0!==r?r:0)+1)])}}l.end()}}}function n8(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS");class n9{constructor(t){let{cellRenderer:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n8(this,"rootNode",void 0),n8(this,"rootDocument",void 0),n8(this,"rowHeaders",null),n8(this,"columnHeaders",null),n8(this,"colGroup",null),n8(this,"rows",null),n8(this,"cells",null),n8(this,"rowFilter",null),n8(this,"columnFilter",null),n8(this,"rowUtils",null),n8(this,"columnUtils",null),n8(this,"rowsToRender",0),n8(this,"columnsToRender",0),n8(this,"rowHeaderFunctions",[]),n8(this,"rowHeadersCount",0),n8(this,"columnHeaderFunctions",[]),n8(this,"columnHeadersCount",0),n8(this,"cellRenderer",void 0),n8(this,"activeOverlayName",void 0),this.rootNode=t,this.rootDocument=this.rootNode.ownerDocument,this.cellRenderer=e}setActiveOverlayName(t){this.activeOverlayName=t}setAxisUtils(t,e){this.rowUtils=t,this.columnUtils=e}setViewportSize(t,e){this.rowsToRender=t,this.columnsToRender=e}setFilters(t,e){this.rowFilter=t,this.columnFilter=e}setHeaderContentRenderers(t,e){this.rowHeaderFunctions=t,this.rowHeadersCount=t.length,this.columnHeaderFunctions=e,this.columnHeadersCount=e.length}setRenderers(){let{rowHeaders:t,columnHeaders:e,colGroup:i,rows:n,cells:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.setTable(this),e.setTable(this),i.setTable(this),n.setTable(this),r.setTable(this),this.rowHeaders=t,this.columnHeaders=e,this.colGroup=i,this.rows=n,this.cells=r}renderedRowToSource(t){return this.rowFilter.renderedToSource(t)}renderedColumnToSource(t){return this.columnFilter.renderedToSource(t)}isAriaEnabled(){return this.rowUtils.wtSettings.getSetting("ariaTags")}render(){this.colGroup.adjust(),this.columnHeaders.adjust(),this.rows.adjust(),this.rowHeaders.adjust(),this.columnHeaders.render(),this.rows.render(),this.rowHeaders.render(),this.cells.render(),this.columnUtils.calculateWidths(),this.colGroup.render();let{rowsToRender:t,rows:e}=this;for(let i=0;i<t;i++){let t=e.getRenderedNode(i);if(t.firstChild){let e=this.renderedRowToSource(i),n=this.rowUtils.getHeightByOverlayName(e,this.activeOverlayName);n?t.firstChild.style.height=`${n-1}px`:t.firstChild.style.height=""}}}}class n7{constructor(){let{TABLE:t,THEAD:e,COLGROUP:i,TBODY:n,rowUtils:r,columnUtils:o,cellRenderer:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.renderer=new n9(t,{cellRenderer:a}),this.renderer.setRenderers({rowHeaders:new nK,columnHeaders:new nQ(e),colGroup:new n1(i),rows:new n3(n),cells:new n6}),this.renderer.setAxisUtils(r,o)}setActiveOverlayName(t){return this.renderer.setActiveOverlayName(t),this}setFilters(t,e){return this.renderer.setFilters(t,e),this}setViewportSize(t,e){return this.renderer.setViewportSize(t,e),this}setHeaderContentRenderers(t,e){return this.renderer.setHeaderContentRenderers(t,e),this}adjust(){this.renderer.adjust()}render(){this.renderer.render()}}t4("1C6fS");var eG=t4("gFbQZ");function rt(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS"),t4("1C6fS"),t4("1hIp0"),t4("1C6fS");class re{constructor(t){rt(this,"calculationTypes",[]),rt(this,"calculationResults",new Map),this.calculationTypes=t}_initialize(t){this.calculationTypes.forEach(e=>{let[i,n]=e;this.calculationResults.set(i,n),n.initialize(t)})}_process(t,e){this.calculationTypes.forEach(i=>{let[,n]=i;return n.process(t,e)})}_finalize(t){this.calculationTypes.forEach(e=>{let[,i]=e;return i.finalize(t)})}getResultsFor(t){return this.calculationResults.get(t)}}function ri(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class rn extends re{constructor(t){let{calculationTypes:e,viewportWidth:i,scrollOffset:n,totalColumns:r,columnWidthFn:o,overrideFn:a,inlineStartOffset:s}=t;super(e),ri(this,"viewportWidth",0),ri(this,"scrollOffset",0),ri(this,"zeroBasedScrollOffset",0),ri(this,"totalColumns",0),ri(this,"columnWidthFn",null),ri(this,"columnWidth",0),ri(this,"overrideFn",null),ri(this,"inlineStartOffset",0),ri(this,"totalCalculatedWidth",0),ri(this,"startPositions",[]),ri(this,"needReverse",!0),this.viewportWidth=i,this.scrollOffset=n,this.zeroBasedScrollOffset=Math.max(n,0),this.totalColumns=r,this.columnWidthFn=o,this.overrideFn=a,this.inlineStartOffset=s,this.calculate()}calculate(){this._initialize(this);for(let t=0;t<this.totalColumns;t++)if(this.columnWidth=this.getColumnWidth(t),this._process(t,this),this.startPositions.push(this.totalCalculatedWidth),this.totalCalculatedWidth+=this.columnWidth,this.totalCalculatedWidth>=this.zeroBasedScrollOffset+this.viewportWidth){this.needReverse=!1;break}this._finalize(this)}getColumnWidth(t){let e=this.columnWidthFn(t);return isNaN(e)?50:e}}function rr(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function ro(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ra(t,e){return t.get(rl(t,e))}function rs(t,e,i){return t.set(rl(t,e),i),i}function rl(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var rh=new WeakMap,ru=new WeakMap,rc=new WeakMap,rd=new WeakMap,rp=new WeakMap;class rf{constructor(t){let{totalColumns:e,stretchMode:i,stretchingColumnWidthFn:n,columnWidthFn:r}=t;ro(this,"stretchAllRatio",0),ro(this,"stretchLastWidth",0),ro(this,"stretchAllColumnsWidth",[]),rr(this,rh,0),ro(this,"needVerifyLastColumnWidth",!0),rr(this,ru,()=>0),rr(this,rc,t=>t),rr(this,rd,t=>t),rr(this,rp,()=>"none"),rs(ru,this,e),rs(rp,this,i),rs(rc,this,null!=n?n:ra(rc,this)),rs(rd,this,null!=r?r:ra(rd,this))}refreshStretching(t){if("none"===ra(rp,this).call(this))return;this.stretchAllRatio=0,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0,this.stretchLastWidth=0,rs(rh,this,t);let e=0;for(let i=0;i<ra(ru,this).call(this);i++){let n=this._getColumnWidth(i),r=ra(rc,this).call(this,void 0,i);"number"==typeof r?t-=r:e+=n}let i=t-e;if("all"===ra(rp,this).call(this)&&i>0)this.stretchAllRatio=t/e,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0;else if("last"===ra(rp,this).call(this)&&t!==1/0){let t=this._getColumnWidth(ra(ru,this).call(this)-1),e=i+t;this.stretchLastWidth=e>=0?e:t}}getStretchedColumnWidth(t,e){let i=null;return"all"===ra(rp,this).call(this)&&0!==this.stretchAllRatio?i=this._getStretchedAllColumnWidth(t,e):"last"===ra(rp,this).call(this)&&0!==this.stretchLastWidth&&(i=this._getStretchedLastColumnWidth(t)),i}_getStretchedAllColumnWidth(t,e){let i=0;if(!this.stretchAllColumnsWidth[t]){let i=Math.round(e*this.stretchAllRatio),n=ra(rc,this).call(this,i,t);void 0===n?this.stretchAllColumnsWidth[t]=i:this.stretchAllColumnsWidth[t]=isNaN(n)?this._getColumnWidth(t):n}if(this.stretchAllColumnsWidth.length===ra(ru,this).call(this)&&this.needVerifyLastColumnWidth){this.needVerifyLastColumnWidth=!1;for(let t=0;t<this.stretchAllColumnsWidth.length;t++)i+=this.stretchAllColumnsWidth[t];i!==ra(rh,this)&&(this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length-1]+=ra(rh,this)-i)}return this.stretchAllColumnsWidth[t]}_getStretchedLastColumnWidth(t){return t===ra(ru,this).call(this)-1?this.stretchLastWidth:null}_getColumnWidth(t){let e=ra(rd,this).call(this,t);return isNaN(e)&&(e=50),e}}function rg(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class rm{constructor(t,e){rg(this,"dataAccessObject",void 0),rg(this,"wtSettings",void 0),rg(this,"headerWidths",new Map),rg(this,"stretching",void 0),this.dataAccessObject=t,this.wtSettings=e,this.stretching=new rf({totalColumns:()=>this.wtSettings.getSetting("totalColumns"),stretchMode:()=>this.wtSettings.getSetting("stretchH"),stretchingColumnWidthFn:(t,e)=>this.wtSettings.getSetting("onBeforeStretchingColumnWidth",t,e),columnWidthFn:t=>this.dataAccessObject.wtTable.getColumnWidth(t)})}getWidth(t){return this.wtSettings.getSetting("columnWidth",t)||this.wtSettings.getSetting("defaultColumnWidth")}getStretchedColumnWidth(t){let e=this.getWidth(t),i=this.stretching.getStretchedColumnWidth(t,e);return i&&(e=i),e}getHeaderHeight(t){let e=this.wtSettings.getSetting("defaultRowHeight"),i=this.dataAccessObject.wtViewport.oversizedColumnHeaders[t];return void 0!==i&&(e=e?Math.max(e,i):i),e}getHeaderWidth(t){return this.headerWidths.get(this.dataAccessObject.wtTable.columnFilter.sourceToRendered(t))}refreshStretching(){let{wtTable:t,wtViewport:e,cloneSource:i}=this.dataAccessObject,n=i?i.wtTable.holder:t.holder,r=n.offsetHeight<n.scrollHeight?(0,eG.getScrollbarWidth)():0;this.stretching.refreshStretching(e.getViewportWidth()-r)}calculateWidths(){let{wtSettings:t}=this,e=t.getSetting("rowHeaderWidth");if(this.refreshStretching(),null!=(e=t.getSetting("onModifyRowHeaderWidth",e))){let i=t.getSetting("rowHeaders").length,n=t.getSetting("defaultColumnWidth");for(let t=0;t<i;t++){let i=Array.isArray(e)?e[t]:e;i=null==i?n:i,this.headerWidths.set(t,i)}}}}function ry(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS");class rv{constructor(t,e){ry(this,"dataAccessObject",void 0),ry(this,"wtSettings",void 0),this.dataAccessObject=t,this.wtSettings=e}getHeight(t){let e=this.wtSettings.getSetting("rowHeight",t),i=this.dataAccessObject.wtViewport.oversizedRows[t];return void 0!==i&&(e=void 0===e?i:Math.max(e,i)),e}getHeightByOverlayName(t,e){let i=this.wtSettings.getSetting("rowHeightByOverlayName",t,e),n=this.dataAccessObject.wtViewport.oversizedRows[t];return void 0!==n&&(i=void 0===i?n:Math.max(i,n)),i}}const rw="bottom",rb="inline_start",rx="top_inline_start_corner",rS="bottom_inline_start_corner",rC=["top",rw,rb,rx,rS],r_=new Map([["top","ht_clone_top"],[rw,`ht_clone_${rw}`],[rb,`ht_clone_${rb} ht_clone_left`],[rx,`ht_clone_${rx} ht_clone_top_left_corner`],[rS,`ht_clone_${rS} ht_clone_bottom_left_corner`]]);var nZ=t4("4Pbrh");function rM(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var rT=class{constructor(t,e,i,n,r){rM(this,"wtSettings",null),rM(this,"domBindings",void 0),rM(this,"TBODY",null),rM(this,"THEAD",null),rM(this,"COLGROUP",null),rM(this,"hasTableHeight",!0),rM(this,"hasTableWidth",!0),rM(this,"isTableVisible",!1),rM(this,"tableOffset",0),rM(this,"holderOffset",0),this.domBindings=i,this.isMaster="master"===r,this.name=r,this.dataAccessObject=t,this.facadeGetter=e,this.wtSettings=n,this.instance=this.dataAccessObject.wot,this.wot=this.dataAccessObject.wot,this.TABLE=i.rootTable,(0,eG.removeTextNodes)(this.TABLE),this.spreader=this.createSpreader(this.TABLE),this.hider=this.createHider(this.spreader),this.holder=this.createHolder(this.hider),this.wtRootElement=this.holder.parentNode,this.isMaster&&this.alignOverlaysWithTrimmingContainer(),this.fixTableDomTree(),this.rowFilter=null,this.columnFilter=null,this.correctHeaderWidth=!1;let o=this.wtSettings.getSettingPure("rowHeaderWidth");this.wtSettings.update("rowHeaderWidth",()=>this._modifyRowHeaderWidth(o)),this.rowUtils=new rv(this.dataAccessObject,this.wtSettings),this.columnUtils=new rm(this.dataAccessObject,this.wtSettings),this.tableRenderer=new n7({TABLE:this.TABLE,THEAD:this.THEAD,COLGROUP:this.COLGROUP,TBODY:this.TBODY,rowUtils:this.rowUtils,columnUtils:this.columnUtils,cellRenderer:this.wtSettings.getSettingPure("cellRenderer")})}is(t){return this.name===t}fixTableDomTree(){let t=this.domBindings.rootDocument;this.TBODY=this.TABLE.querySelector("tbody"),this.TBODY||(this.TBODY=t.createElement("tbody"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.querySelector("thead"),this.THEAD||(this.THEAD=t.createElement("thead"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.querySelector("colgroup"),this.COLGROUP||(this.COLGROUP=t.createElement("colgroup"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD))}createSpreader(t){let e;let i=t.parentNode;return i&&i.nodeType===Node.ELEMENT_NODE&&(0,eG.hasClass)(i,"wtHolder")||((e=this.domBindings.rootDocument.createElement("div")).className="wtSpreader",i&&i.insertBefore(e,t),e.appendChild(t)),e.style.position="relative",this.wtSettings.getSetting("ariaTags")&&(0,eG.setAttribute)(e,[(0,nZ.A11Y_PRESENTATION)()]),e}createHider(t){let e;let i=t.parentNode;return i&&i.nodeType===Node.ELEMENT_NODE&&(0,eG.hasClass)(i,"wtHolder")||((e=this.domBindings.rootDocument.createElement("div")).className="wtHider",i&&i.insertBefore(e,t),e.appendChild(t)),this.wtSettings.getSetting("ariaTags")&&(0,eG.setAttribute)(e,[(0,nZ.A11Y_PRESENTATION)()]),e}createHolder(t){let e;let i=t.parentNode;return i&&i.nodeType===Node.ELEMENT_NODE&&(0,eG.hasClass)(i,"wtHolder")||((e=this.domBindings.rootDocument.createElement("div")).style.position="relative",e.className="wtHolder",i&&i.insertBefore(e,t),this.isMaster&&(e.parentNode.className+="ht_master handsontable",e.parentNode.setAttribute("dir",this.wtSettings.getSettingPure("rtlMode")?"rtl":"ltr"),this.wtSettings.getSetting("ariaTags")&&(0,eG.setAttribute)(e.parentNode,[(0,nZ.A11Y_PRESENTATION)()])),e.appendChild(t)),this.wtSettings.getSetting("ariaTags")&&(0,eG.setAttribute)(e,[(0,nZ.A11Y_PRESENTATION)()]),e}draw(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{wtSettings:e}=this,{wtOverlays:i,wtViewport:n}=this.dataAccessObject,r=e.getSetting("totalRows"),o=e.getSetting("totalColumns"),a=e.getSetting("rowHeaders"),s=a.length,l=e.getSetting("columnHeaders"),h=l.length,u=t;if(this.isMaster&&(i.beforeDraw(),this.holderOffset=(0,eG.offset)(this.holder),u=n.createCalculators(u),s&&!e.getSetting("fixedColumnsStart"))){let t=i.inlineStartOverlay.getScrollPosition(),e=this.correctHeaderWidth;this.correctHeaderWidth=0!==t,e!==this.correctHeaderWidth&&(u=!1)}if(u)this.isMaster&&i.refresh(!0);else{this.isMaster?this.tableOffset=(0,eG.offset)(this.TABLE):this.tableOffset=this.dataAccessObject.parentTableOffset;let t=r>0?this.getFirstRenderedRow():0,e=o>0?this.getFirstRenderedColumn():0;this.rowFilter=new nV(t,r,h),this.columnFilter=new nN(e,o,s);let u=!0;if(this.isMaster){this.alignOverlaysWithTrimmingContainer();let t={};this.wtSettings.getSetting("beforeDraw",!0,t),u=!0!==t.skipRender}if(u){let t;if(this.tableRenderer.setHeaderContentRenderers(a,l),(this.is(rw)||this.is(rS))&&this.tableRenderer.setHeaderContentRenderers(a,[]),this.resetOversizedRows(),this.tableRenderer.setActiveOverlayName(this.name).setViewportSize(this.getRenderedRowsCount(),this.getRenderedColumnsCount()).setFilters(this.rowFilter,this.columnFilter).render(),this.isMaster&&(t=this.dataAccessObject.workspaceWidth,n.containerWidth=null,this.markOversizedColumnHeaders()),this.adjustColumnHeaderHeights(),(this.isMaster||this.is(rw))&&this.markOversizedRows(),this.isMaster){this.wtSettings.getSetting("externalRowCalculator")||n.createVisibleCalculators(),i.refresh(!1),i.applyToDOM();let e=(0,eG.outerWidth)(this.hider),r=(0,eG.outerWidth)(this.TABLE);0!==e&&r!==e&&(this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),t!==n.getWorkspaceWidth()&&(n.containerWidth=null,this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),this.wtSettings.getSetting("onDraw",!0)}else this.is(rw)&&this.dataAccessObject.cloneSource.wtOverlays.adjustElementsSize()}}let c=!1;return this.isMaster&&(c=i.topOverlay.resetFixedPosition(),i.bottomOverlay.clone&&(c=i.bottomOverlay.resetFixedPosition()||c),c=i.inlineStartOverlay.resetFixedPosition()||c,i.topInlineStartCornerOverlay&&i.topInlineStartCornerOverlay.resetFixedPosition(),i.bottomInlineStartCornerOverlay&&i.bottomInlineStartCornerOverlay.clone&&i.bottomInlineStartCornerOverlay.resetFixedPosition()),c?(i.refreshAll(),i.adjustElementsSize()):this.dataAccessObject.selectionManager.setActiveOverlay(this.facadeGetter()).render(u),this.isMaster&&i.afterDraw(),this.dataAccessObject.drawn=!0,this}markIfOversizedColumnHeader(t){let e,i,n;let r=this.columnFilter.renderedToSource(t),o=this.wtSettings.getSetting("columnHeaders").length,a=this.wtSettings.getSetting("defaultRowHeight"),s=this.wtSettings.getSetting("columnHeaderHeight")||[];for(;o;)o-=1,e=this.getColumnHeaderHeight(o),(i=this.getColumnHeader(r,o))&&(n=(0,eG.innerHeight)(i),(!e&&a<n||e<n)&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[o]=n),Array.isArray(s)?null!==s[o]&&void 0!==s[o]&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[o]=s[o]):isNaN(s)||(this.dataAccessObject.wtViewport.oversizedColumnHeaders[o]=s),this.dataAccessObject.wtViewport.oversizedColumnHeaders[o]<(s[o]||s)&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[o]=s[o]||s))}adjustColumnHeaderHeights(){let{wtSettings:t}=this,e=this.THEAD.childNodes,i=this.dataAccessObject.wtViewport.oversizedColumnHeaders,n=t.getSetting("columnHeaders");for(let t=0,r=n.length;t<r;t++)if(i[t]){if(!e[t]||0===e[t].childNodes.length)return;e[t].childNodes[0].style.height=`${i[t]}px`}}resetOversizedRows(){let{wtSettings:t}=this,{wtViewport:e}=this.dataAccessObject;if((this.isMaster||this.is(rw))&&!t.getSetting("externalRowCalculator")){let t=this.getRenderedRowsCount();for(let i=0;i<t;i++){let t=this.rowFilter.renderedToSource(i);e.oversizedRows&&e.oversizedRows[t]&&(e.oversizedRows[t]=void 0)}}}getCell(t){let e=t.row,i=t.col,n=this.wtSettings.getSetting("onModifyGetCellCoords",e,i);if(n&&Array.isArray(n)&&([e,i]=n),this.isRowBeforeRenderedRows(e))return -1;if(this.isRowAfterRenderedRows(e))return -2;if(this.isColumnBeforeRenderedColumns(i))return -3;if(this.isColumnAfterRenderedColumns(i))return -4;let r=this.getRow(e);if(!r&&e>=0)throw Error("TR was expected to be rendered but is not");let o=r.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(i)];if(!o&&i>=0)throw Error("TD or TH was expected to be rendered but is not");return o}getRow(t){var e,i;let n=null,r=null;return t<0?(n=null===(e=this.rowFilter)||void 0===e?void 0:e.sourceRowToVisibleColHeadedRow(t),r=this.THEAD):(n=null===(i=this.rowFilter)||void 0===i?void 0:i.sourceToRendered(t),r=this.TBODY),void 0!==n&&void 0!==r&&!(r.childNodes.length<n+1)&&r.childNodes[n]}getColumnHeader(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.THEAD.childNodes[e];return null==i?void 0:i.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(t)]}getColumnHeaders(t){let e=[],i=this.columnFilter.sourceColumnToVisibleRowHeadedColumn(t);return this.THEAD.childNodes.forEach(t=>{let n=t.childNodes[i];n&&e.push(n)}),e}getRowHeader(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e>=this.wtSettings.getSetting("rowHeaders").length)return;let i=this.rowFilter.sourceToRendered(t),n=i<0?this.rowFilter.sourceRowToVisibleColHeadedRow(t):i,r=(i<0?this.THEAD:this.TBODY).childNodes[n];return null==r?void 0:r.childNodes[e]}getRowHeaders(t){let e=[],i=this.wtSettings.getSetting("rowHeaders").length;for(let n=0;n<i;n++){let i=this.TBODY.childNodes[this.rowFilter.sourceToRendered(t)],r=null==i?void 0:i.childNodes[n];r&&e.push(r)}return e}getCoords(t){let e=t;if("TD"!==e.nodeName&&"TH"!==e.nodeName&&(e=(0,eG.closest)(e,["TD","TH"])),null===e)return null;let i=e.parentNode,n=i.parentNode,r=(0,eG.index)(i),o=e.cellIndex;return(0,eG.overlayContainsElement)(rx,e,this.wtRootElement)||(0,eG.overlayContainsElement)("top",e,this.wtRootElement)?"THEAD"===n.nodeName&&(r-=n.childNodes.length):r=(0,eG.overlayContainsElement)(rS,e,this.wtRootElement)||(0,eG.overlayContainsElement)(rw,e,this.wtRootElement)?this.wtSettings.getSetting("totalRows")-n.childNodes.length+r:n===this.THEAD?this.rowFilter.visibleColHeadedRowToSourceRow(r):this.rowFilter.renderedToSource(r),o=(0,eG.overlayContainsElement)(rx,e,this.wtRootElement)||(0,eG.overlayContainsElement)(rb,e,this.wtRootElement)||(0,eG.overlayContainsElement)(rS,e,this.wtRootElement)?this.columnFilter.offsettedTH(o):this.columnFilter.visibleRowHeadedColumnToSourceColumn(o),this.wot.createCellCoords(r,o)}markOversizedRows(){let t,e,i,n,r;if(this.wtSettings.getSetting("externalRowCalculator"))return;let o=this.TBODY.childNodes.length;if(o*this.wtSettings.getSetting("defaultRowHeight")!=(0,eG.innerHeight)(this.TBODY)-1||this.wtSettings.getSetting("fixedRowsBottom"))for(;o;)o-=1,i=this.rowFilter.renderedToSource(o),t=this.getRowHeight(i),e=(r=(n=this.getTrForRow(i)).querySelector("th"))?(0,eG.innerHeight)(r):(0,eG.innerHeight)(n)-1,(!t&&this.wtSettings.getSetting("defaultRowHeight")<e||t<e)&&(e+=1,this.dataAccessObject.wtViewport.oversizedRows[i]=e)}getTrForRow(t){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(t)]}isColumnHeaderRendered(t){return!(t>=0)&&Math.abs(t)<=this.wtSettings.getSetting("rowHeaders").length}isRowHeaderRendered(t){return!(t>=0)&&Math.abs(t)<=this.wtSettings.getSetting("columnHeaders").length}isRowBeforeRenderedRows(t){let e=this.getFirstRenderedRow();return t<0&&e<=0?!this.isRowHeaderRendered(t):t<e}isRowAfterRenderedRows(t){return t>this.getLastRenderedRow()}isColumnBeforeRenderedColumns(t){let e=this.getFirstRenderedColumn();return t<0&&e<=0?!this.isColumnHeaderRendered(t):t<e}isColumnAfterRenderedColumns(t){return this.columnFilter&&t>this.getLastRenderedColumn()}isColumnAfterViewport(t){return this.columnFilter&&t>this.getLastVisibleColumn()}isRowAfterViewport(t){return this.rowFilter&&t>this.getLastVisibleRow()}isColumnBeforeViewport(t){return this.columnFilter&&0>this.columnFilter.sourceToRendered(t)&&t>=0}isLastRowFullyVisible(){return this.getLastVisibleRow()===this.getLastRenderedRow()}isLastColumnFullyVisible(){return this.getLastVisibleColumn()===this.getLastRenderedColumn()}allRowsInViewport(){return this.wtSettings.getSetting("totalRows")===this.getVisibleRowsCount()}allColumnsInViewport(){return this.wtSettings.getSetting("totalColumns")===this.getVisibleColumnsCount()}getRowHeight(t){return this.rowUtils.getHeight(t)}getColumnHeaderHeight(t){return this.columnUtils.getHeaderHeight(t)}getColumnWidth(t){return this.columnUtils.getWidth(t)}getStretchedColumnWidth(t){return this.columnUtils.getStretchedColumnWidth(t)}hasDefinedSize(){return this.hasTableHeight&&this.hasTableWidth}getWidth(){return(0,eG.outerWidth)(this.TABLE)}getHeight(){return(0,eG.outerHeight)(this.TABLE)}getTotalWidth(){let t=(0,eG.outerWidth)(this.hider);return 0!==t?t:this.getWidth()}getTotalHeight(){let t=(0,eG.outerHeight)(this.hider);return 0!==t?t:this.getHeight()}isVisible(){return(0,eG.isVisible)(this.TABLE)}_modifyRowHeaderWidth(t){let e=(0,eY.isFunction)(t)?t():null;return Array.isArray(e)?(e=[...e])[e.length-1]=this._correctRowHeaderWidth(e[e.length-1]):e=this._correctRowHeaderWidth(e),e}_correctRowHeaderWidth(t){let e=t;return"number"!=typeof t&&(e=this.wtSettings.getSetting("defaultColumnWidth")),this.correctHeaderWidth&&(e+=1),e}},e6=t4("hwT6B");const rI={getFirstRenderedRow(){let t=this.wtSettings.getSetting("totalRows"),e=this.wtSettings.getSetting("fixedRowsBottom"),i=t-e;return 0===t||0===e?-1:i<0?0:i},getFirstVisibleRow(){return this.getFirstRenderedRow()},getFirstPartiallyVisibleRow(){return this.getFirstRenderedRow()},getLastRenderedRow(){return this.wtSettings.getSetting("totalRows")-1},getLastVisibleRow(){return this.getLastRenderedRow()},getLastPartiallyVisibleRow(){return this.getLastRenderedRow()},getRenderedRowsCount(){let t=this.wtSettings.getSetting("totalRows");return Math.min(this.wtSettings.getSetting("fixedRowsBottom"),t)},getVisibleRowsCount(){return this.getRenderedRowsCount()},getColumnHeadersCount:()=>0};(0,e6.defineGetter)(rI,"MIXIN_NAME","stickyRowsBottom",{writable:!1,enumerable:!1});var e6=t4("hwT6B");const rR={getFirstRenderedColumn(){return 0===this.wtSettings.getSetting("totalColumns")?-1:0},getFirstVisibleColumn(){return this.getFirstRenderedColumn()},getFirstPartiallyVisibleColumn(){return this.getFirstRenderedColumn()},getLastRenderedColumn(){return this.getRenderedColumnsCount()-1},getLastVisibleColumn(){return this.getLastRenderedColumn()},getLastPartiallyVisibleColumn(){return this.getLastRenderedColumn()},getRenderedColumnsCount(){let t=this.wtSettings.getSetting("totalColumns");return Math.min(this.wtSettings.getSetting("fixedColumnsStart"),t)},getVisibleColumnsCount(){return this.getRenderedColumnsCount()},getRowHeadersCount(){return this.dataAccessObject.rowHeaders.length}};(0,e6.defineGetter)(rR,"MIXIN_NAME","stickyColumnsStart",{writable:!1,enumerable:!1});var e6=t4("hwT6B");class rE extends rT{constructor(t,e,i,n){super(t,e,i,n,rS)}}(0,e6.mixin)(rE,rI),(0,e6.mixin)(rE,rR),t4("1C6fS");var eG=t4("gFbQZ"),e6=t4("hwT6B"),e8=t4("jlXkd");t4("1C6fS"),t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),iJ=t4("bO142"),eQ=t4("1k8Ev");t4("1C6fS");var eG=t4("gFbQZ");function rA(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var rk=new WeakSet;function rD(t){let{wtSettings:e,inlineStartOverlay:i,wtTable:n,wtViewport:r,totalColumns:o,rootWindow:a}=this.dataAccessObject;if(i.mainTableScrollableElement===a){let s=e.getSetting("rtlMode"),l=null;if(s){let t=n.TABLE.getBoundingClientRect(),e=this.dataAccessObject.rootWindow.document.documentElement.offsetWidth;l=Math.abs(t.right-e)}else l=(0,eG.offset)(n.wtRootElement).left;let h=Math.abs((0,eG.getScrollLeft)(a,a));if(l>h){let e=(0,eG.innerWidth)(a),n=r.getRowHeaderWidth();for(let r=1;r<=o;r++)if(l+(n+=i.sumCellSizes(r-1,r))-h>=e){t=r-2;break}}}return t}function rO(t){let{topOverlay:e,wtTable:i,wtViewport:n,totalRows:r,rootWindow:o}=this.dataAccessObject;if(e.mainTableScrollableElement===o){let a=(0,eG.offset)(i.wtRootElement),s=(0,eG.getScrollTop)(o,o);if(a.top>s){let i=(0,eG.innerHeight)(o),l=n.getColumnHeaderHeight();for(let n=1;n<=r;n++)if(l+=e.sumCellSizes(n-1,n),a.top+l-s>=i){t=n-2;break}}}return t}var rP=class{constructor(t){var e,i,n;(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(this,rk),rk.add(this),i=void 0,(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e="dataAccessObject","string"))?n:n+"")in this?Object.defineProperty(this,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[e]=i,this.dataAccessObject=t}scrollViewport(t,e,i,n,r){let o=this.scrollViewportHorizontally(t.col,i,r),a=this.scrollViewportVertically(t.row,e,n);return o||a}scrollViewportHorizontally(t,e,i){let{drawn:n,totalColumns:r}=this.dataAccessObject;if(!n||!Number.isInteger(t)||t<0||t>r)return!1;let o=void 0===e&&void 0===i,{fixedColumnsStart:a,inlineStartOverlay:s}=this.dataAccessObject;if(o&&t<a||!Number.isInteger(t=this.dataAccessObject.wtSettings.getSetting("onBeforeViewportScrollHorizontally",t))||t<0||t>r)return!1;let l=this.getFirstVisibleColumn(),h=this.getLastVisibleColumn(),u=!1;return(o&&(t<l||t>h)||!o)&&(u=s.scrollTo(t,o?t>=this.getLastPartiallyVisibleColumn():e)),u}scrollViewportVertically(t,e,i){let{drawn:n,totalRows:r}=this.dataAccessObject;if(!n||!Number.isInteger(t)||t<0||t>r)return!1;let o=void 0===e&&void 0===i,{fixedRowsBottom:a,fixedRowsTop:s,topOverlay:l}=this.dataAccessObject;if(o&&(t<s||t>r-a-1)||!Number.isInteger(t=this.dataAccessObject.wtSettings.getSetting("onBeforeViewportScrollVertically",t))||t<0||t>r)return!1;let h=this.getFirstVisibleRow(),u=this.getLastVisibleRow(),c=!1;return(o&&(t<h||t>u)||!o)&&(c=l.scrollTo(t,o?t>=this.getLastPartiallyVisibleRow():i)),c}getFirstVisibleRow(){return this.dataAccessObject.wtTable.getFirstVisibleRow()}getLastVisibleRow(){return rA(rk,this,rO).call(this,this.dataAccessObject.wtTable.getLastVisibleRow())}getFirstPartiallyVisibleRow(){return this.dataAccessObject.wtTable.getFirstPartiallyVisibleRow()}getLastPartiallyVisibleRow(){return rA(rk,this,rO).call(this,this.dataAccessObject.wtTable.getLastPartiallyVisibleRow())}getFirstVisibleColumn(){return this.dataAccessObject.wtTable.getFirstVisibleColumn()}getLastVisibleColumn(){return rA(rk,this,rD).call(this,this.dataAccessObject.wtTable.getLastVisibleColumn())}getFirstPartiallyVisibleColumn(){return this.dataAccessObject.wtTable.getFirstPartiallyVisibleColumn()}getLastPartiallyVisibleColumn(){return rA(rk,this,rD).call(this,this.dataAccessObject.wtTable.getLastPartiallyVisibleColumn())}};function rL(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function rN(t,e){return t.get(rV(t,e))}function rH(t,e,i){return t.set(rV(t,e),i),i}function rV(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}t4("1C6fS");var rB=new WeakMap;class rF{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];rL(this,"row",null),rL(this,"col",null),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,rB),rB.set(this,!1),rH(rB,this,i),void 0!==t&&void 0!==e&&(this.row=t,this.col=e)}isValid(t){let{countRows:e,countCols:i,countRowHeaders:n,countColHeaders:r}={countRows:0,countCols:0,countRowHeaders:0,countColHeaders:0,...t};return!!Number.isInteger(this.row)&&!!Number.isInteger(this.col)&&!(this.row<-r)&&!(this.col<-n)&&!(this.row>=e)&&!(this.col>=i)}isEqual(t){return t===this||this.row===t.row&&this.col===t.col}isHeader(){return!this.isCell()}isCell(){return this.row>=0&&this.col>=0}isRtl(){return rN(rB,this)}isSouthEastOf(t){return this.row>=t.row&&(rN(rB,this)?this.col<=t.col:this.col>=t.col)}isNorthWestOf(t){return this.row<=t.row&&(rN(rB,this)?this.col>=t.col:this.col<=t.col)}isSouthWestOf(t){return this.row>=t.row&&(rN(rB,this)?this.col>=t.col:this.col<=t.col)}isNorthEastOf(t){return this.row<=t.row&&(rN(rB,this)?this.col<=t.col:this.col>=t.col)}normalize(){return this.row=null===this.row?this.row:Math.max(this.row,0),this.col=null===this.col?this.col:Math.max(this.col,0),this}assign(t){return Number.isInteger(null==t?void 0:t.row)&&(this.row=t.row),Number.isInteger(null==t?void 0:t.col)&&(this.col=t.col),t instanceof rF&&rH(rB,this,t.isRtl()),this}clone(){return new rF(this.row,this.col,rN(rB,this))}toObject(){return{row:this.row,col:this.col}}}function rW(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function rz(t,e){return t.get(rj(t,e))}function rj(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}t4("1C6fS"),t4("1hIp0");var rU=new WeakMap;class rG{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];rW(this,"highlight",null),rW(this,"from",null),rW(this,"to",null),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,rU),rU.set(this,!1),this.highlight=t.clone(),this.from=e.clone(),this.to=i.clone(),rU.set(rj(rU,this),n)}setHighlight(t){return this.highlight=t.clone(),this}setFrom(t){return this.from=t.clone(),this}setTo(t){return this.to=t.clone(),this}isValid(t){return this.from.isValid(t)&&this.to.isValid(t)}isSingle(){return this.isSingleCell()||this.isSingleHeader()}isSingleCell(){return this.from.row>=0&&this.from.row===this.to.row&&this.from.col>=0&&this.from.col===this.to.col}isSingleHeader(){return(this.from.row<0||this.from.col<0)&&this.from.row===this.to.row&&this.from.col===this.to.col}isHeader(){return!!(this.from.isHeader()&&this.to.isHeader())||this.from.col<0&&this.to.col<0||this.from.row<0&&this.to.row<0}containsHeaders(){return this.from.isHeader()||this.to.isHeader()}getOuterHeight(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1}getOuterWidth(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1}getHeight(){if(this.from.row<0&&this.to.row<0)return 0;let t=Math.max(this.from.row,0),e=Math.max(this.to.row,0);return Math.max(t,e)-Math.min(t,e)+1}getWidth(){if(this.from.col<0&&this.to.col<0)return 0;let t=Math.max(this.from.col,0),e=Math.max(this.to.col,0);return Math.max(t,e)-Math.min(t,e)+1}getCellsCount(){return this.getWidth()*this.getHeight()}includes(t){let{row:e,col:i}=t,n=this.getOuterTopStartCorner(),r=this.getOuterBottomEndCorner();return n.row<=e&&r.row>=e&&n.col<=i&&r.col>=i}includesRange(t){return this.includes(t.getOuterTopStartCorner())&&this.includes(t.getOuterBottomEndCorner())}isEqual(t){return Math.min(this.from.row,this.to.row)===Math.min(t.from.row,t.to.row)&&Math.max(this.from.row,this.to.row)===Math.max(t.from.row,t.to.row)&&Math.min(this.from.col,this.to.col)===Math.min(t.from.col,t.to.col)&&Math.max(this.from.col,this.to.col)===Math.max(t.from.col,t.to.col)}overlaps(t){return t.isSouthEastOf(this.getOuterTopLeftCorner())&&t.isNorthWestOf(this.getOuterBottomRightCorner())}isSouthEastOf(t){return this.getOuterTopLeftCorner().isSouthEastOf(t)||this.getOuterBottomRightCorner().isSouthEastOf(t)}isNorthWestOf(t){return this.getOuterTopLeftCorner().isNorthWestOf(t)||this.getOuterBottomRightCorner().isNorthWestOf(t)}isOverlappingHorizontally(t){return this.getOuterTopEndCorner().col>=t.getOuterTopStartCorner().col&&this.getOuterTopEndCorner().col<=t.getOuterTopEndCorner().col||this.getOuterTopStartCorner().col<=t.getOuterTopEndCorner().col&&this.getOuterTopStartCorner().col>=t.getOuterTopStartCorner().col}isOverlappingVertically(t){return this.getOuterBottomStartCorner().row>=t.getOuterTopRightCorner().row&&this.getOuterBottomStartCorner().row<=t.getOuterBottomStartCorner().row||this.getOuterTopEndCorner().row<=t.getOuterBottomStartCorner().row&&this.getOuterTopEndCorner().row>=t.getOuterTopRightCorner().row}expand(t){let e=this.getOuterTopStartCorner(),i=this.getOuterBottomEndCorner();return(t.row<e.row||t.col<e.col||t.row>i.row||t.col>i.col)&&(this.from=this._createCellCoords(Math.min(e.row,t.row),Math.min(e.col,t.col)),this.to=this._createCellCoords(Math.max(i.row,t.row),Math.max(i.col,t.col)),!0)}expandByRange(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(this.includesRange(t)||!this.overlaps(t))return!1;let i=this.getOuterTopStartCorner(),n=this.getOuterBottomEndCorner(),r=this.getDirection(),o=t.getOuterTopStartCorner(),a=t.getOuterBottomEndCorner(),s=Math.min(i.row,o.row),l=Math.min(i.col,o.col),h=Math.max(n.row,a.row),u=Math.max(n.col,a.col),c=this._createCellCoords(s,l),d=this._createCellCoords(h,u);return this.from=c,this.to=d,this.setDirection(r),e&&(this.highlight.row===this.getOuterBottomRightCorner().row&&"N-S"===this.getVerticalDirection()&&this.flipDirectionVertically(),this.highlight.col===this.getOuterTopRightCorner().col&&"W-E"===this.getHorizontalDirection()&&this.flipDirectionHorizontally()),!0}getDirection(){return this.from.isNorthWestOf(this.to)?"NW-SE":this.from.isNorthEastOf(this.to)?"NE-SW":this.from.isSouthEastOf(this.to)?"SE-NW":this.from.isSouthWestOf(this.to)?"SW-NE":void 0}setDirection(t){switch(t){case"NW-SE":[this.from,this.to]=[this.getOuterTopLeftCorner(),this.getOuterBottomRightCorner()];break;case"NE-SW":[this.from,this.to]=[this.getOuterTopRightCorner(),this.getOuterBottomLeftCorner()];break;case"SE-NW":[this.from,this.to]=[this.getOuterBottomRightCorner(),this.getOuterTopLeftCorner()];break;case"SW-NE":[this.from,this.to]=[this.getOuterBottomLeftCorner(),this.getOuterTopRightCorner()]}}getVerticalDirection(){return["NE-SW","NW-SE"].indexOf(this.getDirection())>-1?"N-S":"S-N"}getHorizontalDirection(){return["NW-SE","SW-NE"].indexOf(this.getDirection())>-1?"W-E":"E-W"}flipDirectionVertically(){switch(this.getDirection()){case"NW-SE":this.setDirection("SW-NE");break;case"NE-SW":this.setDirection("SE-NW");break;case"SE-NW":this.setDirection("NE-SW");break;case"SW-NE":this.setDirection("NW-SE")}}flipDirectionHorizontally(){switch(this.getDirection()){case"NW-SE":this.setDirection("NE-SW");break;case"NE-SW":this.setDirection("NW-SE");break;case"SE-NW":this.setDirection("SW-NE");break;case"SW-NE":this.setDirection("SE-NW")}}getTopStartCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}getTopLeftCorner(){return rz(rU,this)?this.getTopEndCorner():this.getTopStartCorner()}getBottomEndCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}getBottomRightCorner(){return rz(rU,this)?this.getBottomStartCorner():this.getBottomEndCorner()}getTopEndCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}getTopRightCorner(){return rz(rU,this)?this.getTopStartCorner():this.getTopEndCorner()}getBottomStartCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}getBottomLeftCorner(){return rz(rU,this)?this.getBottomEndCorner():this.getBottomStartCorner()}getOuterTopStartCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}getOuterTopLeftCorner(){return rz(rU,this)?this.getOuterTopEndCorner():this.getOuterTopStartCorner()}getOuterBottomEndCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}getOuterBottomRightCorner(){return rz(rU,this)?this.getOuterBottomStartCorner():this.getOuterBottomEndCorner()}getOuterTopEndCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}getOuterTopRightCorner(){return rz(rU,this)?this.getOuterTopStartCorner():this.getOuterTopEndCorner()}getOuterBottomStartCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}getOuterBottomLeftCorner(){return rz(rU,this)?this.getOuterBottomEndCorner():this.getOuterBottomStartCorner()}isCorner(t){return t.isEqual(this.getOuterTopLeftCorner())||t.isEqual(this.getOuterTopRightCorner())||t.isEqual(this.getOuterBottomLeftCorner())||t.isEqual(this.getOuterBottomRightCorner())}getOppositeCorner(t){return t instanceof rF&&(t.isEqual(this.getOuterBottomEndCorner())?this.getOuterTopStartCorner():t.isEqual(this.getOuterTopStartCorner())?this.getOuterBottomEndCorner():t.isEqual(this.getOuterTopEndCorner())?this.getOuterBottomStartCorner():t.isEqual(this.getOuterBottomStartCorner())?this.getOuterTopEndCorner():void 0)}getBordersSharedWith(t){if(!this.includesRange(t))return[];let e={top:Math.min(this.from.row,this.to.row),bottom:Math.max(this.from.row,this.to.row),left:Math.min(this.from.col,this.to.col),right:Math.max(this.from.col,this.to.col)},i={top:Math.min(t.from.row,t.to.row),bottom:Math.max(t.from.row,t.to.row),left:Math.min(t.from.col,t.to.col),right:Math.max(t.from.col,t.to.col)},n=[];return e.top===i.top&&n.push("top"),e.right===i.right&&n.push(rz(rU,this)?"left":"right"),e.bottom===i.bottom&&n.push("bottom"),e.left===i.left&&n.push(rz(rU,this)?"right":"left"),n}getInner(){let t=this.getOuterTopStartCorner(),e=this.getOuterBottomEndCorner(),i=[];for(let n=t.row;n<=e.row;n++)for(let r=t.col;r<=e.col;r++)this.from.row===n&&this.from.col===r||this.to.row===n&&this.to.col===r||i.push(this._createCellCoords(n,r));return i}getAll(){let t=this.getOuterTopStartCorner(),e=this.getOuterBottomEndCorner(),i=[];for(let n=t.row;n<=e.row;n++)for(let r=t.col;r<=e.col;r++)t.row===n&&t.col===r?i.push(t):e.row===n&&e.col===r?i.push(e):i.push(this._createCellCoords(n,r));return i}forAll(t){let e=this.getOuterTopStartCorner(),i=this.getOuterBottomEndCorner();for(let n=e.row;n<=i.row;n++)for(let r=e.col;r<=i.col;r++)if(!1===t(n,r))return}clone(){return new rG(this.highlight,this.from,this.to,rz(rU,this))}toObject(){return{from:this.from.toObject(),to:this.to.toObject()}}_createCellCoords(t,e){return new rF(t,e,rz(rU,this))}}function rY(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class rX{get eventManager(){return new eQ.default(this)}constructor(t,e){rY(this,"wtTable",void 0),rY(this,"wtScroll",void 0),rY(this,"wtViewport",void 0),rY(this,"wtOverlays",void 0),rY(this,"selectionManager",void 0),rY(this,"wtEvent",void 0),rY(this,"guid",`wt_${(0,iJ.randomString)()}`),rY(this,"drawInterrupted",!1),rY(this,"drawn",!1),rY(this,"domBindings",void 0),rY(this,"wtSettings",void 0),this.domBindings={rootTable:t,rootDocument:t.ownerDocument,rootWindow:t.ownerDocument.defaultView},this.wtSettings=e,this.wtScroll=new rP(this.createScrollDao())}findOriginalHeaders(){let t=[];if(this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(let e=0,i=this.wtTable.THEAD.childNodes[0].childNodes.length;e<i;e++)t.push(this.wtTable.THEAD.childNodes[0].childNodes[e].innerHTML);this.wtSettings.getSetting("columnHeaders").length||this.wtSettings.update("columnHeaders",[function(e,i){(0,eG.fastInnerText)(i,t[e])}])}}createCellCoords(t,e){return new rF(t,e,this.wtSettings.getSetting("rtlMode"))}createCellRange(t,e,i){return new rG(t,e,i,this.wtSettings.getSetting("rtlMode"))}draw(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.drawInterrupted=!1,this.wtTable.isVisible()?this.wtTable.draw(t):this.drawInterrupted=!0,this}getCell(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return this.wtTable.getCell(t);let i=this.wtSettings.getSetting("totalRows"),n=this.wtSettings.getSetting("fixedRowsTop"),r=this.wtSettings.getSetting("fixedRowsBottom"),o=this.wtSettings.getSetting("fixedColumnsStart");if(t.row<n&&t.col<o)return this.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.getCell(t);if(t.row<n)return this.wtOverlays.topOverlay.clone.wtTable.getCell(t);if(t.col<o&&t.row>=i-r){if(this.wtOverlays.bottomInlineStartCornerOverlay&&this.wtOverlays.bottomInlineStartCornerOverlay.clone)return this.wtOverlays.bottomInlineStartCornerOverlay.clone.wtTable.getCell(t)}else if(t.col<o)return this.wtOverlays.inlineStartOverlay.clone.wtTable.getCell(t);else if(t.row<i&&t.row>=i-r&&this.wtOverlays.bottomOverlay&&this.wtOverlays.bottomOverlay.clone)return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(t);return this.wtTable.getCell(t)}scrollViewport(t,e,i,n,r){return!(t.col<0)&&!(t.row<0)&&this.wtScroll.scrollViewport(t,e,i,n,r)}scrollViewportHorizontally(t,e,i){return!(t<0)&&this.wtScroll.scrollViewportHorizontally(t,e,i)}scrollViewportVertically(t,e,i){return!(t<0)&&this.wtScroll.scrollViewportVertically(t,e,i)}getViewport(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]}destroy(){this.wtOverlays.destroy(),this.wtEvent.destroy()}createScrollDao(){let t=this;return{get drawn(){return t.drawn},get topOverlay(){return t.wtOverlays.topOverlay},get inlineStartOverlay(){return t.wtOverlays.inlineStartOverlay},get wtTable(){return t.wtTable},get wtViewport(){return t.wtViewport},get wtSettings(){return t.wtSettings},get rootWindow(){return t.domBindings.rootWindow},get totalRows(){return t.wtSettings.getSetting("totalRows")},get totalColumns(){return t.wtSettings.getSetting("totalColumns")},get fixedRowsTop(){return t.wtSettings.getSetting("fixedRowsTop")},get fixedRowsBottom(){return t.wtSettings.getSetting("fixedRowsBottom")},get fixedColumnsStart(){return t.wtSettings.getSetting("fixedColumnsStart")}}}getTableDao(){let t=this;return{get wot(){return t},get parentTableOffset(){return t.cloneSource.wtTable.tableOffset},get cloneSource(){return t.cloneSource},get workspaceWidth(){return t.wtViewport.getWorkspaceWidth()},get wtViewport(){return t.wtViewport},get wtOverlays(){return t.wtOverlays},get selectionManager(){return t.selectionManager},get drawn(){return t.drawn},set drawn(v){t.drawn=v},get wtTable(){return t.wtTable},get startColumnRendered(){return t.wtViewport.columnsRenderCalculator.startColumn},get startColumnVisible(){return t.wtViewport.columnsVisibleCalculator.startColumn},get startColumnPartiallyVisible(){return t.wtViewport.columnsPartiallyVisibleCalculator.startColumn},get endColumnRendered(){return t.wtViewport.columnsRenderCalculator.endColumn},get endColumnVisible(){return t.wtViewport.columnsVisibleCalculator.endColumn},get endColumnPartiallyVisible(){return t.wtViewport.columnsPartiallyVisibleCalculator.endColumn},get countColumnsRendered(){return t.wtViewport.columnsRenderCalculator.count},get countColumnsVisible(){return t.wtViewport.columnsVisibleCalculator.count},get startRowRendered(){return t.wtViewport.rowsRenderCalculator.startRow},get startRowVisible(){return t.wtViewport.rowsVisibleCalculator.startRow},get startRowPartiallyVisible(){return t.wtViewport.rowsPartiallyVisibleCalculator.startRow},get endRowRendered(){return t.wtViewport.rowsRenderCalculator.endRow},get endRowVisible(){return t.wtViewport.rowsVisibleCalculator.endRow},get endRowPartiallyVisible(){return t.wtViewport.rowsPartiallyVisibleCalculator.endRow},get countRowsRendered(){return t.wtViewport.rowsRenderCalculator.count},get countRowsVisible(){return t.wtViewport.rowsVisibleCalculator.count},get columnHeaders(){return t.wtSettings.getSetting("columnHeaders")},get rowHeaders(){return t.wtSettings.getSetting("rowHeaders")}}}}function r$(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class rZ extends rX{constructor(t,e,i){super(t,e),r$(this,"cloneSource",void 0),r$(this,"cloneOverlay",void 0);let n=this.wtSettings.getSetting("facade",this);this.cloneSource=i.source,this.cloneOverlay=i.overlay,this.wtTable=this.cloneOverlay.createTable(this.getTableDao(),n,this.domBindings,this.wtSettings),this.wtViewport=i.viewport,this.selectionManager=i.selectionManager,this.wtEvent=new nP(n,this.domBindings,this.wtSettings,this.eventManager,this.wtTable,this.selectionManager,i.event),this.findOriginalHeaders()}}var nZ=t4("4Pbrh");class rq{constructor(t,e,i,n,r){var o,a;(o="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o="wtSettings","string"))?a:a+"")in this?Object.defineProperty(this,o,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[o]=null,(0,e6.defineGetter)(this,"wot",t,{writable:!1}),this.domBindings=r,this.facadeGetter=e,this.wtSettings=n;let{TABLE:s,hider:l,spreader:h,holder:u,wtRootElement:c}=this.wot.wtTable;this.instance=this.wot,this.type=i,this.mainTableScrollableElement=null,this.TABLE=s,this.hider=l,this.spreader=h,this.holder=u,this.wtRootElement=c,this.trimmingContainer=(0,eG.getTrimmingContainer)(this.hider.parentNode.parentNode),this.needFullRender=this.shouldBeRendered(),this.clone=this.makeClone()}hasRenderingStateChanged(){return this.needFullRender!==this.shouldBeRendered()}updateStateOfRendering(t){"before"===t&&this.shouldBeRendered()?this.needFullRender=!0:"after"!==t||this.shouldBeRendered()||(this.needFullRender=!1)}shouldBeRendered(){return!0}updateTrimmingContainer(){this.trimmingContainer=(0,eG.getTrimmingContainer)(this.hider.parentNode.parentNode)}updateMainScrollableElement(){let{wtTable:t}=this.wot,{rootWindow:e}=this.domBindings;"hidden"===e.getComputedStyle(t.wtRootElement.parentNode).getPropertyValue("overflow")?this.mainTableScrollableElement=this.wot.wtTable.holder:this.mainTableScrollableElement=(0,eG.getScrollableElement)(t.TABLE)}getRelativeCellPosition(t,e,i){if(!1===this.clone.wtTable.holder.contains(t)){(0,e8.warn)(`The provided element is not a child of the ${this.type} overlay`);return}let n=this.mainTableScrollableElement===this.domBindings.rootWindow,r=i<this.wtSettings.getSetting("fixedColumnsStart"),o=e<this.wtSettings.getSetting("fixedRowsTop"),a=e>=this.wtSettings.getSetting("totalRows")-this.wtSettings.getSetting("fixedRowsBottom"),s=this.clone.wtTable.spreader,l={start:this.getRelativeStartPosition(s),top:s.offsetTop},h={start:this.getRelativeStartPosition(t),top:t.offsetTop};return n?this.getRelativeCellPositionWithinWindow(o,r,h,l):this.getRelativeCellPositionWithinHolder(o,a,r,h,l)}getRelativeStartPosition(t){return this.isRtl()?t.offsetParent.offsetWidth-t.offsetLeft-t.offsetWidth:t.offsetLeft}getRelativeCellPositionWithinWindow(t,e,i,n){let r=this.wot.wtTable.wtRootElement.getBoundingClientRect(),o=0,a=0;if(e){let t=r.left;this.isRtl()&&(t=this.domBindings.rootWindow.innerWidth-(r.left+r.width+(0,eG.getScrollbarWidth)())),o=t<=0?-1*t:0}else o=n.start;return a=t?this.clone.wtTable.TABLE.getBoundingClientRect().top-r.top:n.top,{start:i.start+o,top:i.top+a}}getRelativeCellPositionWithinHolder(t,e,i,n,r){let o={horizontal:this.wot.wtOverlays.inlineStartOverlay.getScrollPosition(),vertical:this.wot.wtOverlays.topOverlay.getScrollPosition()},a=0,s=0;if(i||(a=o.horizontal-r.start),e){let t=this.wot.wtTable.wtRootElement.getBoundingClientRect();s=-1*this.clone.wtTable.TABLE.getBoundingClientRect().top+t.top}else t||(s=o.vertical-r.top);return{start:n.start-a,top:n.top-s}}makeClone(){if(-1===rC.indexOf(this.type))throw Error(`Clone type "${this.type}" is not supported.`);let{wtTable:t,wtSettings:e}=this.wot,{rootDocument:i,rootWindow:n}=this.domBindings,r=i.createElement("div"),o=i.createElement("table"),a=t.wtRootElement.parentNode;r.className=`${r_.get(this.type)} handsontable`,r.setAttribute("dir",this.isRtl()?"rtl":"ltr"),r.style.position="absolute",r.style.top=0,r.style.overflow="visible",this.isRtl()?r.style.right=0:r.style.left=0,e.getSetting("ariaTags")&&(0,eG.setAttribute)(r,[(0,nZ.A11Y_PRESENTATION)()]),o.className=t.TABLE.className,t.TABLE.getAttribute("role")&&o.setAttribute("role",t.TABLE.getAttribute("role")),r.appendChild(o),a.appendChild(r);let s=this.wtSettings.getSetting("preventOverflow");return!0===s||"horizontal"===s&&"top"===this.type||"vertical"===s&&this.type===rb?this.mainTableScrollableElement=n:"hidden"===n.getComputedStyle(a).getPropertyValue("overflow")?this.mainTableScrollableElement=t.holder:this.mainTableScrollableElement=(0,eG.getScrollableElement)(t.TABLE),new rZ(o,this.wtSettings,{source:this.wot,overlay:this,viewport:this.wot.wtViewport,event:this.wot.wtEvent,selectionManager:this.wot.selectionManager})}refresh(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.needFullRender&&this.clone.draw(t)}reset(){let t=this.clone.wtTable.holder,e=this.clone.wtTable.hider;[t.style,e.style,t.parentNode.style].forEach(t=>{t.width="",t.height=""})}isRtl(){return this.wtSettings.getSetting("rtlMode")}destroy(){this.clone.eventManager.destroy()}}class rK extends rq{constructor(t,e,i,n,r,o){super(t,e,rS,i,n),this.bottomOverlay=r,this.inlineStartOverlay=o}createTable(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return new rE(...e)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderBottomOverlay")&&this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){let{wot:t}=this;if(this.updateTrimmingContainer(),!t.wtTable.holder.parentNode)return!1;let e=this.clone.wtTable.holder.parentNode;if(e.style.top="",this.trimmingContainer===this.domBindings.rootWindow){let t=this.inlineStartOverlay.getOverlayOffset(),i=this.bottomOverlay.getOverlayOffset();e.style[this.isRtl()?"right":"left"]=`${t}px`,e.style.bottom=`${i}px`}else(0,eG.resetCssTransform)(e),this.repositionOverlay();let i=(0,eG.outerHeight)(this.clone.wtTable.TABLE),n=(0,eG.outerWidth)(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(i=0),e.style.height=`${i}px`,e.style.width=`${n}px`,!1}repositionOverlay(){let{wtTable:t,wtViewport:e}=this.wot,{rootDocument:i}=this.domBindings,n=this.clone.wtTable.holder.parentNode,r=0;e.hasVerticalScroll()||(r+=e.getWorkspaceHeight()-t.getTotalHeight()),e.hasVerticalScroll()&&e.hasHorizontalScroll()&&(r+=(0,eG.getScrollbarWidth)(i)),n.style.bottom=`${r}px`}}t4("1C6fS");var eG=t4("gFbQZ"),e6=t4("hwT6B");const rQ={getFirstRenderedColumn(){let t=this.dataAccessObject.startColumnRendered;return null===t?-1:t},getFirstVisibleColumn(){let t=this.dataAccessObject.startColumnVisible;return null===t?-1:t},getFirstPartiallyVisibleColumn(){let t=this.dataAccessObject.startColumnPartiallyVisible;return null===t?-1:t},getLastRenderedColumn(){let t=this.dataAccessObject.endColumnRendered;return null===t?-1:t},getLastVisibleColumn(){let t=this.dataAccessObject.endColumnVisible;return null===t?-1:t},getLastPartiallyVisibleColumn(){let t=this.dataAccessObject.endColumnPartiallyVisible;return null===t?-1:t},getRenderedColumnsCount(){return this.dataAccessObject.countColumnsRendered},getVisibleColumnsCount(){return this.dataAccessObject.countColumnsVisible},getRowHeadersCount(){return this.dataAccessObject.rowHeaders.length}};(0,e6.defineGetter)(rQ,"MIXIN_NAME","calculatedColumns",{writable:!1,enumerable:!1});var e6=t4("hwT6B");class rJ extends rT{constructor(t,e,i,n){super(t,e,i,n,rw)}}(0,e6.mixin)(rJ,rI),(0,e6.mixin)(rJ,rQ);class r0 extends rq{constructor(t,e,i,n){var r,o;super(t,e,rw,i,n),(r="symbol"==typeof(o=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r="cachedFixedRowsBottom","string"))?o:o+"")in this?Object.defineProperty(this,r,{value:-1,enumerable:!0,configurable:!0,writable:!0}):this[r]=-1,this.cachedFixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom")}createTable(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return new rJ(...e)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderBottomOverlay")}resetFixedPosition(){if(!this.needFullRender||!this.shouldBeRendered()||!this.wot.wtTable.holder.parentNode)return!1;let{rootWindow:t}=this.domBindings,e=this.clone.wtTable.holder.parentNode;e.style.top="";let i=0,n=this.wtSettings.getSetting("preventOverflow");this.trimmingContainer!==t||n&&"vertical"===n?(i=this.getScrollPosition(),this.repositionOverlay()):(i=this.getOverlayOffset(),e.style.bottom=`${i}px`);let r=this.adjustHeaderBordersPosition(i);return this.adjustElementsSize(),r}repositionOverlay(){let{wtTable:t,wtViewport:e}=this.wot,{rootDocument:i}=this.domBindings,n=this.clone.wtTable.holder.parentNode,r=0;e.hasVerticalScroll()||(r+=e.getWorkspaceHeight()-t.getTotalHeight()),e.hasVerticalScroll()&&e.hasHorizontalScroll()&&(r+=(0,eG.getScrollbarWidth)(i)),n.style.bottom=`${r}px`}setScrollPosition(t){let{rootWindow:e}=this.domBindings,i=!1;return this.mainTableScrollableElement===e?(e.scrollTo((0,eG.getWindowScrollLeft)(e),t),i=!0):this.mainTableScrollableElement.scrollTop!==t&&(this.mainTableScrollableElement.scrollTop=t,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollHorizontally")}sumCellSizes(t,e){let{wtTable:i,wtSettings:n}=this.wot,r=n.getSetting("defaultRowHeight"),o=t,a=0;for(;o<e;){let t=i.getRowHeight(o);a+=void 0===t?r:t,o+=1}return a}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){let{wtTable:t,wtViewport:e}=this.wot,{rootDocument:i,rootWindow:n}=this.domBindings,r=(0,eG.getScrollbarWidth)(i),o=this.clone.wtTable.holder.parentNode.style,a=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==n||"horizontal"===a){let i=e.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(i-=r),i=Math.min(i,t.wtRootElement.scrollWidth),o.width=`${i}px`}else o.width="";this.clone.wtTable.holder.style.width=o.width;let s=(0,eG.outerHeight)(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(s=0),o.height=`${s}px`}adjustRootChildrenSize(){let{holder:t}=this.clone.wtTable;this.clone.wtTable.hider.style.width=this.hider.style.width,t.style.width=t.parentNode.style.width,t.style.height=t.parentNode.style.height}applyToDOM(){let t=this.wtSettings.getSetting("totalRows");if("number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition)this.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`;else if(0===t)this.spreader.style.top="0";else throw Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){let t=this.isRtl()?"right":"left",{spreader:e}=this.clone.wtTable;"number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition?e.style[t]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`:e.style[t]=""}scrollTo(t,e){let i=this.getTableParentOffset(),n=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder,r=0;e&&n.offsetHeight!==n.clientHeight&&(r=(0,eG.getScrollbarWidth)(this.domBindings.rootDocument)),e?(i+=this.sumCellSizes(0,t+1),i-=this.wot.wtViewport.getViewportHeight(),i+=1):i+=this.sumCellSizes(this.wtSettings.getSetting("fixedRowsBottom"),t),i+=r,this.setScrollPosition(i)}getTableParentOffset(){return this.mainTableScrollableElement===this.domBindings.rootWindow?this.wot.wtTable.holderOffset.top:0}getScrollPosition(){return(0,eG.getScrollTop)(this.mainTableScrollableElement,this.domBindings.rootWindow)}getOverlayOffset(){let{rootWindow:t}=this.domBindings,e=this.wtSettings.getSetting("preventOverflow"),i=0;if(this.trimmingContainer===t&&(!e||"vertical"!==e)){let t=this.wot.wtTable.getTotalHeight(),e=this.clone.wtTable.getTotalHeight(),n=this.domBindings.rootDocument.documentElement.clientHeight;(i=Math.max(this.getTableParentOffset()-this.getScrollPosition()-n+t,0))>t-e&&(i=0)}return i}adjustHeaderBordersPosition(t){let e=this.wtSettings.getSetting("fixedRowsBottom"),i=this.cachedFixedRowsBottom!==e,n=this.wtSettings.getSetting("columnHeaders"),r=!1;if((i||0===e)&&n.length>0){let e=this.wot.wtTable.holder.parentNode,i=(0,eG.hasClass)(e,"innerBorderBottom");this.cachedFixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom"),t||0===this.wtSettings.getSetting("totalRows")?((0,eG.addClass)(e,"innerBorderBottom"),r=!i):((0,eG.removeClass)(e,"innerBorderBottom"),r=i)}return r}}t4("1C6fS");var eG=t4("gFbQZ"),e6=t4("hwT6B");const r1={getFirstRenderedRow(){let t=this.dataAccessObject.startRowRendered;return null===t?-1:t},getFirstVisibleRow(){let t=this.dataAccessObject.startRowVisible;return null===t?-1:t},getFirstPartiallyVisibleRow(){let t=this.dataAccessObject.startRowPartiallyVisible;return null===t?-1:t},getLastRenderedRow(){let t=this.dataAccessObject.endRowRendered;return null===t?-1:t},getLastVisibleRow(){let t=this.dataAccessObject.endRowVisible;return null===t?-1:t},getLastPartiallyVisibleRow(){let t=this.dataAccessObject.endRowPartiallyVisible;return null===t?-1:t},getRenderedRowsCount(){return this.dataAccessObject.countRowsRendered},getVisibleRowsCount(){return this.dataAccessObject.countRowsVisible},getColumnHeadersCount(){return this.dataAccessObject.columnHeaders.length}};(0,e6.defineGetter)(r1,"MIXIN_NAME","calculatedRows",{writable:!1,enumerable:!1});var e6=t4("hwT6B");class r2 extends rT{constructor(t,e,i,n){super(t,e,i,n,rb)}}(0,e6.mixin)(r2,r1),(0,e6.mixin)(r2,rR);const r5=Object.freeze({width:"6px",height:"6px",borderWidth:"1px",borderStyle:"solid",borderColor:"#FFF"});class r3 extends rq{constructor(t,e,i,n){super(t,e,rb,i,n)}createTable(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return new r2(...e)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){let{wtTable:t}=this.wot;if(!this.needFullRender||!this.shouldBeRendered()||!t.holder.parentNode)return!1;let{rootWindow:e}=this.domBindings,i=this.clone.wtTable.holder.parentNode,n=this.wtSettings.getSetting("preventOverflow"),r=0;this.trimmingContainer!==e||n&&"horizontal"===n?(r=this.getScrollPosition(),(0,eG.resetCssTransform)(i)):(r=this.getOverlayOffset()*(this.isRtl()?-1:1),(0,eG.setOverlayPosition)(i,`${r}px`,"0px"));let o=this.adjustHeaderBordersPosition(r);return this.adjustElementsSize(),o}setScrollPosition(t){let{rootWindow:e}=this.domBindings,i=!1;return this.isRtl()&&(t=-t),this.mainTableScrollableElement===e&&e.scrollX!==t?(e.scrollTo(t,(0,eG.getWindowScrollTop)(e)),i=!0):this.mainTableScrollableElement.scrollLeft!==t&&(this.mainTableScrollableElement.scrollLeft=t,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollVertically")}sumCellSizes(t,e){let i=this.wtSettings.getSetting("defaultColumnWidth"),n=t,r=0;for(;n<e;)r+=this.wot.wtTable.getStretchedColumnWidth(n)||i,n+=1;return r}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){let{wtTable:t}=this.wot,{rootDocument:e,rootWindow:i}=this.domBindings,n=(0,eG.getScrollbarWidth)(e),r=this.clone.wtTable.holder.parentNode.style,o=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==i||"vertical"===o){let e=this.wot.wtViewport.getWorkspaceHeight();this.wot.wtOverlays.hasScrollbarBottom&&(e-=n),e=Math.min(e,t.wtRootElement.scrollHeight),r.height=`${e}px`}else r.height="";this.clone.wtTable.holder.style.height=r.height;let a=(0,eG.outerWidth)(this.clone.wtTable.TABLE);r.width=`${a}px`}adjustRootChildrenSize(){let{holder:t}=this.clone.wtTable,e=this.wot.selectionManager.getFocusSelection()?parseInt(r5.width,10)/2:0;this.clone.wtTable.hider.style.height=this.hider.style.height,t.style.height=t.parentNode.style.height,t.style.width=`${parseInt(t.parentNode.style.width,10)+e}px`}applyToDOM(){let t=this.wtSettings.getSetting("totalColumns"),e=this.isRtl()?"right":"left";if("number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition)this.spreader.style[e]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`;else if(0===t)this.spreader.style[e]="0";else throw Error("Incorrect value of the columnsRenderCalculator");this.isRtl()?this.spreader.style.left="":this.spreader.style.right="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){"number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`:this.clone.wtTable.spreader.style.top=""}scrollTo(t,e){let{wtSettings:i}=this,n=i.getSetting("rowHeaders"),r=i.getSetting("fixedColumnsStart"),o=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder,a=0===r&&n.length>0&&!(0,eG.hasClass)(o.parentNode,"innerBorderInlineStart")?1:0,s=this.getTableParentOffset(),l=0;return e&&this.wot.wtTable.getColumnWidth(t)>this.wot.wtViewport.getViewportWidth()&&(e=!1),e&&o.offsetWidth!==o.clientWidth&&(l=(0,eG.getScrollbarWidth)(this.domBindings.rootDocument)),e?(s+=this.sumCellSizes(0,t+1),s-=this.wot.wtViewport.getViewportWidth(),s+=a):s+=this.sumCellSizes(this.wtSettings.getSetting("fixedColumnsStart"),t),s+=l,(0,eG.getMaximumScrollLeft)(this.mainTableScrollableElement)===s-a&&a>0&&this.wot.wtOverlays.expandHiderHorizontallyBy(a),this.setScrollPosition(s)}getTableParentOffset(){let t=this.wtSettings.getSetting("preventOverflow"),e=0;return t||this.trimmingContainer!==this.domBindings.rootWindow||(e=this.wot.wtTable.holderOffset.left),e}getScrollPosition(){return Math.abs((0,eG.getScrollLeft)(this.mainTableScrollableElement,this.domBindings.rootWindow))}getOverlayOffset(){let{rootWindow:t}=this.domBindings,e=this.wtSettings.getSetting("preventOverflow"),i=0;return this.trimmingContainer===t&&(!e||"horizontal"!==e)&&(i=this.isRtl()?Math.abs(Math.min(this.getTableParentOffset()-this.getScrollPosition(),0)):Math.max(this.getScrollPosition()-this.getTableParentOffset(),0),i>this.wot.wtTable.getTotalWidth()-this.clone.wtTable.getTotalWidth()&&(i=0)),i}adjustHeaderBordersPosition(t){let{wtSettings:e}=this,i=this.wot.wtTable.holder.parentNode,n=e.getSetting("rowHeaders"),r=e.getSetting("fixedColumnsStart"),o=e.getSetting("totalRows"),a="vertical"===e.getSetting("preventOverflow");o?(0,eG.removeClass)(i,"emptyRows"):(0,eG.addClass)(i,"emptyRows");let s=!1;if(!a){if(r&&!n.length)(0,eG.addClass)(i,"innerBorderLeft innerBorderInlineStart");else if(!r&&n.length){let e=(0,eG.hasClass)(i,"innerBorderInlineStart");t?((0,eG.addClass)(i,"innerBorderLeft innerBorderInlineStart"),s=!e):((0,eG.removeClass)(i,"innerBorderLeft innerBorderInlineStart"),s=e)}}return s}}t4("1C6fS");var eG=t4("gFbQZ"),e6=t4("hwT6B");const r4={getFirstRenderedRow(){return 0===this.wtSettings.getSetting("totalRows")?-1:0},getFirstVisibleRow(){return this.getFirstRenderedRow()},getFirstPartiallyVisibleRow(){return this.getFirstRenderedRow()},getLastRenderedRow(){return this.getRenderedRowsCount()-1},getLastVisibleRow(){return this.getLastRenderedRow()},getLastPartiallyVisibleRow(){return this.getLastRenderedRow()},getRenderedRowsCount(){let t=this.wtSettings.getSetting("totalRows");return Math.min(this.wtSettings.getSetting("fixedRowsTop"),t)},getVisibleRowsCount(){return this.getRenderedRowsCount()},getColumnHeadersCount(){return this.dataAccessObject.columnHeaders.length}};(0,e6.defineGetter)(r4,"MIXIN_NAME","stickyRowsTop",{writable:!1,enumerable:!1});var e6=t4("hwT6B");class r6 extends rT{constructor(t,e,i,n){super(t,e,i,n,rx)}}function r8(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}(0,e6.mixin)(r6,r4),(0,e6.mixin)(r6,rR);class r9 extends rq{constructor(t,e,i,n,r,o){super(t,e,rx,i,n),r8(this,"topOverlay",void 0),r8(this,"inlineStartOverlay",void 0),this.topOverlay=r,this.inlineStartOverlay=o}createTable(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return new r6(...e)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderTopOverlay")&&this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){if(this.updateTrimmingContainer(),!this.wot.wtTable.holder.parentNode)return!1;let t=this.clone.wtTable.holder.parentNode;if(this.trimmingContainer===this.domBindings.rootWindow){let e=this.inlineStartOverlay.getOverlayOffset()*(this.isRtl()?-1:1),i=this.topOverlay.getOverlayOffset();(0,eG.setOverlayPosition)(t,`${e}px`,`${i}px`)}else(0,eG.resetCssTransform)(t);let e=(0,eG.outerHeight)(this.clone.wtTable.TABLE),i=(0,eG.outerWidth)(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(e=0),t.style.height=`${e}px`,t.style.width=`${i}px`,!1}}t4("1C6fS");var eG=t4("gFbQZ"),e6=t4("hwT6B");class r7 extends rT{constructor(t,e,i,n){super(t,e,i,n,"top")}}(0,e6.mixin)(r7,r4),(0,e6.mixin)(r7,rQ);class ot extends rq{constructor(t,e,i,n){var r,o;super(t,e,"top",i,n),(r="symbol"==typeof(o=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r="cachedFixedRowsTop","string"))?o:o+"")in this?Object.defineProperty(this,r,{value:-1,enumerable:!0,configurable:!0,writable:!0}):this[r]=-1,this.cachedFixedRowsTop=this.wtSettings.getSetting("fixedRowsTop")}createTable(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return new r7(...e)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderTopOverlay")}resetFixedPosition(){if(!this.needFullRender||!this.shouldBeRendered()||!this.wot.wtTable.holder.parentNode)return!1;let t=this.clone.wtTable.holder.parentNode,{rootWindow:e}=this.domBindings,i=this.wtSettings.getSetting("preventOverflow"),n=0,r=!1;if(this.trimmingContainer!==e||i&&"vertical"===i)n=this.getScrollPosition(),(0,eG.resetCssTransform)(t);else{let{wtTable:e}=this.wot;r=Math.ceil(e.hider.getBoundingClientRect().bottom)===t.offsetHeight,n=this.getOverlayOffset(),(0,eG.setOverlayPosition)(t,"0px",`${n}px`)}let o=this.adjustHeaderBordersPosition(n,r);return this.adjustElementsSize(),o}setScrollPosition(t){let e=this.domBindings.rootWindow,i=!1;return this.mainTableScrollableElement===e&&e.scrollY!==t?(e.scrollTo((0,eG.getWindowScrollLeft)(e),t),i=!0):this.mainTableScrollableElement.scrollTop!==t&&(this.mainTableScrollableElement.scrollTop=t,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollHorizontally")}sumCellSizes(t,e){let i=this.wtSettings.getSetting("defaultRowHeight"),n=t,r=0;for(;n<e;){let t=this.wot.wtTable.getRowHeight(n);r+=void 0===t?i:t,n+=1}return r}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){let{wtTable:t}=this.wot,{rootDocument:e,rootWindow:i}=this.domBindings,n=(0,eG.getScrollbarWidth)(e),r=this.clone.wtTable.holder.parentNode.style,o=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==i||"horizontal"===o){let e=this.wot.wtViewport.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(e-=n),e=Math.min(e,t.wtRootElement.scrollWidth),r.width=`${e}px`}else r.width="";this.clone.wtTable.holder.style.width=r.width;let a=(0,eG.outerHeight)(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(a=0),r.height=`${a}px`}adjustRootChildrenSize(){let{holder:t}=this.clone.wtTable,e=this.wot.selectionManager.getFocusSelection()?parseInt(r5.height,10)/2:0;this.clone.wtTable.hider.style.width=this.hider.style.width,t.style.width=t.parentNode.style.width,t.style.height=`${parseInt(t.parentNode.style.height,10)+e}px`}applyToDOM(){let t=this.wtSettings.getSetting("totalRows");if("number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition)this.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`;else if(0===t)this.spreader.style.top="0";else throw Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){let t=this.isRtl()?"right":"left",{spreader:e}=this.clone.wtTable;"number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition?e.style[t]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`:e.style[t]=""}scrollTo(t,e){let{wot:i,wtSettings:n}=this,r=(i.cloneSource?i.cloneSource:i).wtTable.holder,o=n.getSetting("columnHeaders"),a=0===n.getSetting("fixedRowsTop")&&o.length>0&&!(0,eG.hasClass)(r.parentNode,"innerBorderTop")?1:0,s=this.getTableParentOffset(),l=0;if(e&&this.wot.wtTable.getRowHeight(t)>this.wot.wtViewport.getViewportHeight()&&(e=!1),e&&r.offsetHeight!==r.clientHeight&&(l=(0,eG.getScrollbarWidth)(this.domBindings.rootDocument)),e){let e=n.getSetting("fixedRowsBottom"),r=n.getSetting("totalRows");s+=this.sumCellSizes(0,t+1),s-=i.wtViewport.getViewportHeight()-this.sumCellSizes(r-e,r),s+=1+a}else s+=this.sumCellSizes(n.getSetting("fixedRowsTop"),t);return s+=l,(0,eG.getMaximumScrollTop)(this.mainTableScrollableElement)===s-a&&a>0&&this.wot.wtOverlays.expandHiderVerticallyBy(a),this.setScrollPosition(s)}getTableParentOffset(){return this.mainTableScrollableElement===this.domBindings.rootWindow?this.wot.wtTable.holderOffset.top:0}getScrollPosition(){return(0,eG.getScrollTop)(this.mainTableScrollableElement,this.domBindings.rootWindow)}getOverlayOffset(){let{rootWindow:t}=this.domBindings,e=this.wtSettings.getSetting("preventOverflow"),i=0;if(this.trimmingContainer===t&&(!e||"vertical"!==e)){let t=this.wot.wtTable.getTotalHeight(),e=this.clone.wtTable.getTotalHeight();(i=Math.max(this.getScrollPosition()-this.getTableParentOffset(),0))>t-e&&(i=0)}return i}adjustHeaderBordersPosition(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{wtSettings:i}=this,n=this.wot.wtTable.holder.parentNode,r=i.getSetting("totalColumns"),o="horizontal"===i.getSetting("preventOverflow");r?(0,eG.removeClass)(n,"emptyColumns"):(0,eG.addClass)(n,"emptyColumns");let a=!1;if(!e&&!o){let e=i.getSetting("fixedRowsTop"),r=this.cachedFixedRowsTop!==e,o=i.getSetting("columnHeaders");if((r||0===e)&&o.length>0){let e=(0,eG.hasClass)(n,"innerBorderTop");this.cachedFixedRowsTop=i.getSetting("fixedRowsTop"),t||0===i.getSetting("totalRows")?((0,eG.addClass)(n,"innerBorderTop"),a=!e):((0,eG.removeClass)(n,"innerBorderTop"),a=e)}}return a}}function oe(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function oi(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function on(t,e,i){return t.set(oo(t,e),i),i}function or(t,e){return t.get(oo(t,e))}function oo(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var oa=new WeakMap,os=new WeakMap,ol=new WeakMap,oh=new WeakMap,ou=class{constructor(t,e,i,n,r,o){oi(this,"wot",null),oe(this,oa,[]),oi(this,"topOverlay",null),oi(this,"bottomOverlay",null),oi(this,"inlineStartOverlay",null),oi(this,"topInlineStartCornerOverlay",null),oi(this,"bottomInlineStartCornerOverlay",null),oi(this,"browserLineHeight",void 0),oi(this,"wtSettings",null),oe(this,os,!1),oe(this,ol,0),oe(this,oh,null),oi(this,"resizeObserver",new ResizeObserver(t=>{(0,nw.requestAnimationFrame)(()=>{Array.isArray(t)&&t.length&&(on(ol,this,or(ol,this)+1),100===or(ol,this)&&((0,e8.warn)("The ResizeObserver callback was fired too many times in direct succession.\nThis may be due to an infinite loop caused by setting a dynamic height/width (for example, with the `dvh` units) to a Handsontable container's parent. \nThe observer will be disconnected."),this.resizeObserver.disconnect()),null!==or(oh,this)&&clearTimeout(or(oh,this)),on(oh,this,setTimeout(()=>{on(ol,this,0)},100)),this.wtSettings.getSetting("onContainerElementResize"))})})),this.wot=t,this.wtSettings=n,this.domBindings=i,this.facadeGetter=e,this.wtTable=o;let{rootDocument:a,rootWindow:s}=this.domBindings;this.instance=this.wot,this.eventManager=r,this.scrollbarSize=(0,eG.getScrollbarWidth)(a);let l="hidden"===s.getComputedStyle(o.wtRootElement.parentNode).getPropertyValue("overflow");this.scrollableElement=l?o.holder:(0,eG.getScrollableElement)(o.TABLE),this.initOverlays(),this.hasScrollbarBottom=!1,this.hasScrollbarRight=!1,this.destroyed=!1,this.keyPressed=!1,this.spreaderLastSize={width:null,height:null},this.verticalScrolling=!1,this.horizontalScrolling=!1,this.initBrowserLineHeight(),this.registerListeners(),this.lastScrollX=s.scrollX,this.lastScrollY=s.scrollY}getOverlays(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=[...or(oa,this)];return t&&e.push(this.wtTable),e}initBrowserLineHeight(){let{rootWindow:t,rootDocument:e}=this.domBindings,i=t.getComputedStyle(e.body),n=parseInt(i.lineHeight,10),r=1.2*parseInt(i.fontSize,10);this.browserLineHeight=n||r}initOverlays(){let t=[this.wot,this.facadeGetter,this.wtSettings,this.domBindings];this.topOverlay=new ot(...t),this.bottomOverlay=new r0(...t),this.inlineStartOverlay=new r3(...t),this.topInlineStartCornerOverlay=new r9(...t,this.topOverlay,this.inlineStartOverlay),this.bottomInlineStartCornerOverlay=new rK(...t,this.bottomOverlay,this.inlineStartOverlay),on(oa,this,[this.topOverlay,this.bottomOverlay,this.inlineStartOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay])}beforeDraw(){on(os,this,or(oa,this).reduce((t,e)=>e.hasRenderingStateChanged()||t,!1)),or(oa,this).forEach(t=>t.updateStateOfRendering("before"))}afterDraw(){this.syncScrollWithMaster(),or(oa,this).forEach(t=>{let e=t.hasRenderingStateChanged();t.updateStateOfRendering("after"),e&&!t.needFullRender&&t.reset()})}refreshAll(){if(this.wot.drawn){if(!this.wtTable.holder.parentNode){this.destroy();return}this.wot.draw(!0),this.verticalScrolling&&this.inlineStartOverlay.onScroll(),this.horizontalScrolling&&this.topOverlay.onScroll(),this.verticalScrolling=!1,this.horizontalScrolling=!1}}registerListeners(){let t;let{rootDocument:e,rootWindow:i}=this.domBindings,{mainTableScrollableElement:n}=this.topOverlay,{mainTableScrollableElement:r}=this.inlineStartOverlay;this.eventManager.addEventListener(e.documentElement,"keydown",t=>this.onKeyDown(t)),this.eventManager.addEventListener(e.documentElement,"keyup",()=>this.onKeyUp()),this.eventManager.addEventListener(e,"visibilitychange",()=>this.onKeyUp()),this.eventManager.addEventListener(n,"scroll",t=>this.onTableScroll(t),{passive:!0}),n!==r&&this.eventManager.addEventListener(r,"scroll",t=>this.onTableScroll(t),{passive:!0});let o=i.devicePixelRatio&&i.devicePixelRatio>1,a=this.scrollableElement===i,s=this.wtSettings.getSetting("preventWheel"),l={passive:a};(s||o||!(0,e$.isChrome)())&&this.eventManager.addEventListener(this.wtTable.wtRootElement,"wheel",t=>this.onCloneWheel(t,s),l),[this.topOverlay,this.bottomOverlay,this.inlineStartOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay].forEach(t=>{if(t&&t.needFullRender){let{holder:e}=t.clone.wtTable;this.eventManager.addEventListener(e,"wheel",t=>this.onCloneWheel(t,s),l)}}),this.eventManager.addEventListener(i,"resize",()=>{clearTimeout(t),t=setTimeout(()=>{this.wtSettings.getSetting("onWindowResize"),on(ol,this,0)},200)}),a||this.resizeObserver.observe(this.wtTable.wtRootElement.parentElement)}deregisterListeners(){this.eventManager.clearEvents(!0)}onTableScroll(t){let e=this.domBindings.rootWindow,i=this.inlineStartOverlay.mainTableScrollableElement,n=this.topOverlay.mainTableScrollableElement,r=t.target;(!this.keyPressed||(n===e||r===e||t.target.contains(n))&&(i===e||r===e||t.target.contains(i)))&&this.syncScrollPositions(t)}onCloneWheel(t,e){let{rootWindow:i}=this.domBindings,n=this.inlineStartOverlay.mainTableScrollableElement,r=this.topOverlay.mainTableScrollableElement,o=t.target,a=r!==i&&o!==i&&!o.contains(r),s=n!==i&&o!==i&&!o.contains(n);if(this.keyPressed&&(a||s)||this.scrollableElement===i)return;let l=this.translateMouseWheelToScroll(t);(e||this.scrollableElement!==i&&l)&&t.preventDefault()}onKeyDown(t){this.keyPressed=(0,eZ.isKey)(t.keyCode,"ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT")}onKeyUp(){this.keyPressed=!1}translateMouseWheelToScroll(t){let e=isNaN(t.deltaY)?-1*t.wheelDeltaY:t.deltaY,i=isNaN(t.deltaX)?-1*t.wheelDeltaX:t.deltaX;1===t.deltaMode&&(i+=i*this.browserLineHeight,e+=e*this.browserLineHeight);let n=this.scrollVertically(e),r=this.scrollHorizontally(i);return n||r}scrollVertically(t){let e=this.scrollableElement.scrollTop;return this.scrollableElement.scrollTop+=t,e!==this.scrollableElement.scrollTop}scrollHorizontally(t){let e=this.scrollableElement.scrollLeft;return this.scrollableElement.scrollLeft+=t,e!==this.scrollableElement.scrollLeft}syncScrollPositions(){if(this.destroyed)return;let{rootWindow:t}=this.domBindings,e=this.topOverlay.clone.wtTable.holder,i=this.inlineStartOverlay.clone.wtTable.holder,[n,r]=[this.scrollableElement.scrollLeft,this.scrollableElement.scrollTop];if(this.horizontalScrolling=e.scrollLeft!==n||this.lastScrollX!==t.scrollX,this.verticalScrolling=i.scrollTop!==r||this.lastScrollY!==t.scrollY,this.lastScrollX=t.scrollX,this.lastScrollY=t.scrollY,this.horizontalScrolling){e.scrollLeft=n;let t=this.bottomOverlay.needFullRender?this.bottomOverlay.clone.wtTable.holder:null;t&&(t.scrollLeft=n)}this.verticalScrolling&&(i.scrollTop=r),this.refreshAll()}syncScrollWithMaster(){if(!or(os,this))return;let{scrollLeft:t,scrollTop:e}=this.topOverlay.mainTableScrollableElement;this.topOverlay.needFullRender&&(this.topOverlay.clone.wtTable.holder.scrollLeft=t),this.bottomOverlay.needFullRender&&(this.bottomOverlay.clone.wtTable.holder.scrollLeft=t),this.inlineStartOverlay.needFullRender&&(this.inlineStartOverlay.clone.wtTable.holder.scrollTop=e),on(os,this,!1)}updateMainScrollableElements(){this.deregisterListeners(),this.inlineStartOverlay.updateMainScrollableElement(),this.topOverlay.updateMainScrollableElement(),this.bottomOverlay.needFullRender&&this.bottomOverlay.updateMainScrollableElement();let{wtTable:t}=this,{rootWindow:e}=this.domBindings;"hidden"===e.getComputedStyle(t.wtRootElement.parentNode).getPropertyValue("overflow")?this.scrollableElement=t.holder:this.scrollableElement=(0,eG.getScrollableElement)(t.TABLE),this.registerListeners()}destroy(){this.resizeObserver.disconnect(),this.eventManager.destroy(),this.topOverlay.destroy(),this.bottomOverlay.clone&&this.bottomOverlay.destroy(),this.inlineStartOverlay.destroy(),this.topInlineStartCornerOverlay&&this.topInlineStartCornerOverlay.destroy(),this.bottomInlineStartCornerOverlay&&this.bottomInlineStartCornerOverlay.clone&&this.bottomInlineStartCornerOverlay.destroy(),this.destroyed=!0}refresh(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.updateLastSpreaderSize()&&this.adjustElementsSize(),this.bottomOverlay.clone&&this.bottomOverlay.refresh(t),this.inlineStartOverlay.refresh(t),this.topOverlay.refresh(t),this.topInlineStartCornerOverlay&&this.topInlineStartCornerOverlay.refresh(t),this.bottomInlineStartCornerOverlay&&this.bottomInlineStartCornerOverlay.clone&&this.bottomInlineStartCornerOverlay.refresh(t)}updateLastSpreaderSize(){let t=this.wtTable.spreader,e=t.clientWidth,i=t.clientHeight,n=e!==this.spreaderLastSize.width||i!==this.spreaderLastSize.height;return n&&(this.spreaderLastSize.width=e,this.spreaderLastSize.height=i),n}adjustElementsSize(){let{wtViewport:t}=this.wot,{wtTable:e}=this,{rootWindow:i}=this.domBindings,n=this.scrollableElement===i,r=this.wtSettings.getSetting("totalColumns"),o=this.wtSettings.getSetting("totalRows"),a=t.getRowHeaderWidth(),s=t.getColumnHeaderHeight()+this.topOverlay.sumCellSizes(0,o)+1,l=a+this.inlineStartOverlay.sumCellSizes(0,r),h=e.hider.style,u=!n&&this.scrollableElement.scrollTop>Math.max(0,s-e.holder.clientHeight)?1:0,c=!n&&this.scrollableElement.scrollLeft>Math.max(0,l-e.holder.clientWidth)?1:0;if(h.width=`${l+c}px`,h.height=`${s+u}px`,this.scrollbarSize>0){let{scrollHeight:t,scrollWidth:i}=e.wtRootElement,{scrollHeight:n,scrollWidth:r}=e.holder;this.hasScrollbarRight=t<n,this.hasScrollbarBottom=i<r,this.hasScrollbarRight&&e.hider.scrollWidth+this.scrollbarSize>i?this.hasScrollbarBottom=!0:this.hasScrollbarBottom&&e.hider.scrollHeight+this.scrollbarSize>t&&(this.hasScrollbarRight=!0)}this.topOverlay.adjustElementsSize(),this.inlineStartOverlay.adjustElementsSize(),this.bottomOverlay.adjustElementsSize()}expandHiderVerticallyBy(t){let{wtTable:e}=this;e.hider.style.height=`${parseInt(e.hider.style.height,10)+t}px`}expandHiderHorizontallyBy(t){let{wtTable:e}=this;e.hider.style.width=`${parseInt(e.hider.style.width,10)+t}px`}applyToDOM(){this.wtTable.isVisible()&&(this.topOverlay.applyToDOM(),this.bottomOverlay.clone&&this.bottomOverlay.applyToDOM(),this.inlineStartOverlay.applyToDOM())}getParentOverlay(t){if(!t)return null;let e=[this.topOverlay,this.inlineStartOverlay,this.bottomOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay],i=null;return(0,iy.arrayEach)(e,e=>{e&&e.clone&&e.clone.wtTable.TABLE.contains(t)&&(i=e.clone)}),i}syncOverlayTableClassNames(){let t=this.wtTable.TABLE,e=[this.topOverlay,this.inlineStartOverlay,this.bottomOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay];(0,iy.arrayEach)(e,e=>{e&&(e.clone.wtTable.TABLE.className=t.className)})}};t4("1C6fS");var eG=t4("gFbQZ"),e6=t4("hwT6B");function oc(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class od{constructor(t){oc(this,"settings",{}),oc(this,"defaults",Object.freeze(this.getDefaults())),(0,e6.objectEach)(this.defaults,(e,i)=>{if(void 0!==t[i])this.settings[i]=t[i];else if(void 0===e)throw Error(`A required setting "${i}" was not provided`);else this.settings[i]=e})}getDefaults(){return{facade:void 0,table:void 0,isDataViewInstance:!0,externalRowCalculator:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,preventOverflow:()=>!1,preventWheel:!1,data:void 0,freezeOverlays:!1,fixedColumnsStart:0,fixedRowsTop:0,fixedRowsBottom:0,shouldRenderInlineStartOverlay:()=>this.getSetting("fixedColumnsStart")>0||this.getSetting("rowHeaders").length>0,shouldRenderTopOverlay:()=>this.getSetting("fixedRowsTop")>0||this.getSetting("columnHeaders").length>0,shouldRenderBottomOverlay:()=>this.getSetting("fixedRowsBottom")>0,minSpareRows:0,rowHeaders:()=>[],columnHeaders:()=>[],totalRows:void 0,totalColumns:void 0,cellRenderer:(t,e,i)=>{let n=this.getSetting("data",t,e);(0,eG.fastInnerText)(i,null==n?"":n)},columnWidth(){},rowHeight(){},rowHeightByOverlayName(){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellContextMenu:null,onCellMouseOver:null,onCellMouseOut:null,onCellMouseUp:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeRemoveCellClassNames:null,onAfterDrawSelection:null,onBeforeDrawBorders:null,onBeforeViewportScrollHorizontally:t=>t,onBeforeViewportScrollVertically:t=>t,onScrollHorizontally:null,onScrollVertically:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,onBeforeStretchingColumnWidth:t=>t,onModifyRowHeaderWidth:null,onModifyGetCellCoords:null,onBeforeHighlightingRowHeader:t=>t,onBeforeHighlightingColumnHeader:t=>t,onWindowResize:null,onContainerElementResize:null,renderAllColumns:!1,renderAllRows:!1,groups:!1,rowHeaderWidth:null,columnHeaderHeight:null,headerClassName:null,rtlMode:!1,ariaTags:!0}}update(t,e){return void 0===e?(0,e6.objectEach)(t,(t,e)=>{this.settings[e]=t}):this.settings[t]=e,this}getSetting(t,e,i,n,r){return"function"==typeof this.settings[t]?this.settings[t](e,i,n,r):void 0!==e&&Array.isArray(this.settings[t])?this.settings[t][e]:this.settings[t]}getSettingPure(t){return this.settings[t]}has(t){return!!this.settings[t]}}var eG=t4("gFbQZ"),e6=t4("hwT6B");class op extends rT{constructor(t,e,i,n){super(t,e,i,n,"master")}alignOverlaysWithTrimmingContainer(){let t=(0,eG.getTrimmingContainer)(this.wtRootElement),{rootWindow:e}=this.domBindings;if(t===e)this.wtSettings.getSetting("preventOverflow")||(this.holder.style.overflow="visible",this.wtRootElement.style.overflow="visible");else{let i=t.parentElement,n=(0,eG.getStyle)(t,"height",e),r=(0,eG.getStyle)(t,"overflow",e),o=this.holder.style,{scrollWidth:a,scrollHeight:s}=t,l=t.offsetWidth,h=t.offsetHeight;if(i&&["auto","hidden","scroll"].includes(r)){let n=t.cloneNode(!1);n.style.overflow="auto",n.style.position="absolute",t.nextElementSibling?i.insertBefore(n,t.nextElementSibling):i.appendChild(n);let r=parseInt((0,eG.getComputedStyle)(n,e).height,10);i.removeChild(n),0===r&&(h=0)}h=Math.min(h,s),o.height="auto"===n?"auto":`${h}px`,l=Math.min(l,a),o.width=`${l}px`,o.overflow="",this.hasTableHeight="auto"===o.height||h>0,this.hasTableWidth=l>0}this.isTableVisible=(0,eG.isVisible)(this.TABLE)}markOversizedColumnHeaders(){let{wtSettings:t}=this,{wtViewport:e}=this.dataAccessObject,i="master",n=t.getSetting("columnHeaders").length;if(n&&!e.hasOversizedColumnHeadersMarked[i]){let r=t.getSetting("rowHeaders").length,o=this.getRenderedColumnsCount();for(let t=0;t<n;t++)for(let t=-1*r;t<o;t++)this.markIfOversizedColumnHeader(t);e.hasOversizedColumnHeadersMarked[i]=!0}}}(0,e6.mixin)(op,r1),(0,e6.mixin)(op,rQ);var eG=t4("gFbQZ"),e6=t4("hwT6B");t4("1C6fS");var ei=t4("hmx0d"),iP=t4("dZoqA"),of=t4("ptmgx"),og=t4("fBlGn"),om=t4("lHUxa");ei({target:"Array",proto:!0},{at:function(t){var e=iP(this),i=of(e),n=og(t),r=n>=0?n:i+n;return r<0||r>=i?void 0:e[r]}}),om("at");var ei=t4("hmx0d"),eh=t4("5Okwt"),ib=t4("gMtBp"),og=t4("fBlGn"),iT=t4("jqSLA"),eg=t4("8lFU3"),oy=eh("".charAt);function ov(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}ei({target:"String",proto:!0,forced:eg(function(){return"\uD842"!=="\uD842\uDFB7".at(-2)})},{at:function(t){var e=iT(ib(this)),i=e.length,n=og(t),r=n>=0?n:i+n;return r<0||r>=i?void 0:oy(e,r)}});class ow{constructor(){ov(this,"count",0),ov(this,"startColumn",null),ov(this,"endColumn",null),ov(this,"startPosition",null),ov(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(t,e){let{totalCalculatedWidth:i,zeroBasedScrollOffset:n,viewportWidth:r,columnWidth:o}=e;i>=n&&i+o<=n+(n>0?r+1:r)&&((null===this.startColumn||void 0===this.startColumn)&&(this.startColumn=t),this.endColumn=t)}finalize(t){var e;let{scrollOffset:i,viewportWidth:n,inlineStartOffset:r,zeroBasedScrollOffset:o,totalColumns:a,needReverse:s,startPositions:l,columnWidth:h}=t;if(this.endColumn===a-1&&s)for(this.startColumn=this.endColumn;this.startColumn>0;){let t=l[this.endColumn]+h-l[this.startColumn-1];if(t<=n&&(this.startColumn-=1),t>=n)break}this.startPosition=null!==(e=l[this.startColumn])&&void 0!==e?e:null;let u=null===this.startColumn?0:t.getColumnWidth(this.startColumn);i+n-(o>0?n+1:n)<-1*r||i>l.at(-1)||-1*i-n>-1*u?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,a<this.endColumn&&(this.endColumn=a-1),null!==this.startColumn&&(this.count=this.endColumn-this.startColumn+1)}}function ob(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS");class ox{constructor(){ob(this,"count",0),ob(this,"startRow",null),ob(this,"endRow",null),ob(this,"startPosition",null),ob(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(t,e){let{totalCalculatedHeight:i,zeroBasedScrollOffset:n,innerViewportHeight:r,rowHeight:o}=e;i>=n&&i+o<=r&&(null===this.startRow&&(this.startRow=t),this.endRow=t)}finalize(t){var e;let{scrollOffset:i,viewportHeight:n,horizontalScrollbarHeight:r,totalRows:o,needReverse:a,startPositions:s,rowHeight:l}=t;if(this.endRow===o-1&&a)for(this.startRow=this.endRow;this.startRow>0;){let t=s[this.endRow]+l-s[this.startRow-1];if(t<=n-r&&(this.startRow-=1),t>=n-r)break}this.startPosition=null!==(e=s[this.startRow])&&void 0!==e?e:null,i+n-r<(null===this.startRow?0:t.getRowHeight(this.startRow))||i>s.at(-1)?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,o<this.endRow&&(this.endRow=o-1),null!==this.startRow&&(this.count=this.endRow-this.startRow+1)}}function oS(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS");class oC{constructor(){oS(this,"count",0),oS(this,"startColumn",null),oS(this,"endColumn",null),oS(this,"startPosition",null),oS(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(t,e){let{totalCalculatedWidth:i,zeroBasedScrollOffset:n,viewportWidth:r}=e;i<=n&&(this.startColumn=t),i>=n&&i<=n+(n>0?r+1:r)&&(null===this.startColumn||void 0===this.startColumn)&&(this.startColumn=t),this.endColumn=t}finalize(t){var e;let{scrollOffset:i,viewportWidth:n,inlineStartOffset:r,zeroBasedScrollOffset:o,totalColumns:a,needReverse:s,startPositions:l,columnWidth:h}=t;if(this.endColumn===a-1&&s)for(this.startColumn=this.endColumn;this.startColumn>0;){let t=l[this.endColumn]+h-l[this.startColumn-1];if(this.startColumn-=1,t>n)break}this.startPosition=null!==(e=l[this.startColumn])&&void 0!==e?e:null,i+n-(o>0?n+1:n)<-1*r||i>l.at(-1)+h||-1*i-n>0?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,a<this.endColumn&&(this.endColumn=a-1),null!==this.startColumn&&(this.count=this.endColumn-this.startColumn+1)}}function o_(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS");class oM{constructor(){o_(this,"count",0),o_(this,"startRow",null),o_(this,"endRow",null),o_(this,"startPosition",null),o_(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(t,e){let{totalCalculatedHeight:i,zeroBasedScrollOffset:n,innerViewportHeight:r}=e;i<=n&&(this.startRow=t),i>=n&&i<=r&&null===this.startRow&&(this.startRow=t),this.endRow=t}finalize(t){var e;let{scrollOffset:i,viewportHeight:n,horizontalScrollbarHeight:r,totalRows:o,needReverse:a,startPositions:s,rowHeight:l}=t;if(this.endRow===o-1&&a)for(this.startRow=this.endRow;this.startRow>0;){let t=s[this.endRow]+l-s[this.startRow-1];if(this.startRow-=1,t>=n-r)break}this.startPosition=null!==(e=s[this.startRow])&&void 0!==e?e:null,i+n-r<0||i>s.at(-1)+l?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,o<this.endRow&&(this.endRow=o-1),null!==this.startRow&&(this.count=this.endRow-this.startRow+1)}}function oT(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS");class oI{constructor(){oT(this,"count",0),oT(this,"startColumn",0),oT(this,"endColumn",0),oT(this,"startPosition",0),oT(this,"isVisibleInTrimmingContainer",!0)}initialize(t){let{totalColumns:e}=t;this.count=e,this.endColumn=this.count-1}process(){}finalize(){}}function oR(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS");class oE{constructor(){oR(this,"count",0),oR(this,"startRow",0),oR(this,"endRow",0),oR(this,"startPosition",0),oR(this,"isVisibleInTrimmingContainer",!0)}initialize(t){let{totalRows:e}=t;this.count=e,this.endRow=this.count-1}process(){}finalize(){}}class oA extends oC{finalize(t){var e;super.finalize(t);let{overrideFn:i,totalColumns:n,startPositions:r}=t;null!==this.startColumn&&"function"==typeof i&&i(this),this.startColumn<0&&(this.startColumn=0),this.startPosition=null!==(e=r[this.startColumn])&&void 0!==e?e:null,n<this.endColumn&&(this.endColumn=n-1),null!==this.startColumn&&(this.count=this.endColumn-this.startColumn+1)}}class ok extends oM{finalize(t){var e;super.finalize(t);let{overrideFn:i,totalRows:n,startPositions:r}=t;null!==this.startRow&&"function"==typeof i&&i(this),this.startRow<0&&(this.startRow=0),this.startPosition=null!==(e=r[this.startRow])&&void 0!==e?e:null,n<this.endRow&&(this.endRow=n-1),null!==this.startRow&&(this.count=this.endRow-this.startRow+1)}}function oD(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS"),t4("1hIp0");class oO extends re{constructor(t){let{calculationTypes:e,viewportHeight:i,scrollOffset:n,totalRows:r,rowHeightFn:o,overrideFn:a,horizontalScrollbarHeight:s}=t;super(e),oD(this,"viewportHeight",0),oD(this,"scrollOffset",0),oD(this,"zeroBasedScrollOffset",0),oD(this,"totalRows",0),oD(this,"rowHeightFn",null),oD(this,"rowHeight",0),oD(this,"overrideFn",null),oD(this,"horizontalScrollbarHeight",0),oD(this,"innerViewportHeight",0),oD(this,"totalCalculatedHeight",0),oD(this,"startPositions",[]),oD(this,"needReverse",!0),this.viewportHeight=i,this.scrollOffset=n,this.zeroBasedScrollOffset=Math.max(n,0),this.totalRows=r,this.rowHeightFn=o,this.overrideFn=a,this.horizontalScrollbarHeight=null!=s?s:0,this.innerViewportHeight=this.zeroBasedScrollOffset+this.viewportHeight-this.horizontalScrollbarHeight,this.calculate()}calculate(){this._initialize(this);for(let t=0;t<this.totalRows;t++)if(this.rowHeight=this.getRowHeight(t),this._process(t,this),this.startPositions.push(this.totalCalculatedHeight),this.totalCalculatedHeight+=this.rowHeight,this.totalCalculatedHeight>=this.innerViewportHeight){this.needReverse=!1;break}this._finalize(this)}getRowHeight(t){let e=this.rowHeightFn(t);return isNaN(e)?23:e}}var oP=class{constructor(t,e,i,n,r){this.dataAccessObject=t,this.wot=t.wot,this.instance=this.wot,this.domBindings=e,this.wtSettings=i,this.wtTable=r,this.oversizedRows=[],this.oversizedColumnHeaders=[],this.hasOversizedColumnHeadersMarked={},this.clientHeight=0,this.containerWidth=NaN,this.rowHeaderWidth=NaN,this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,this.rowsCalculatorTypes=new Map([["rendered",()=>this.wtSettings.getSetting("renderAllRows")?new oE:new ok],["fullyVisible",()=>new ox],["partiallyVisible",()=>new oM]]),this.columnsCalculatorTypes=new Map([["rendered",()=>this.wtSettings.getSetting("renderAllColumns")?new oI:new oA],["fullyVisible",()=>new ow],["partiallyVisible",()=>new oC]]),this.eventManager=n,this.eventManager.addEventListener(this.domBindings.rootWindow,"resize",()=>{this.clientHeight=this.getWorkspaceHeight()})}getWorkspaceHeight(){let t=this.domBindings.rootDocument,e=this.dataAccessObject.topOverlayTrimmingContainer;return e===this.domBindings.rootWindow?t.documentElement.clientHeight:(0,eG.outerHeight)(e)>0&&e.clientHeight>0?e.clientHeight:1/0}getWorkspaceWidth(){let t,e;let{wtSettings:i}=this,{rootDocument:n,rootWindow:r}=this.domBindings,o=this.dataAccessObject.inlineStartOverlayTrimmingContainer,a=n.documentElement.offsetWidth,s=i.getSetting("totalColumns"),l=i.getSetting("preventOverflow"),h=i.getSetting("rtlMode"),u=this.wtTable.TABLE.getBoundingClientRect(),c=h?u.right-a:u.left,d=a-c;if(l)return(0,eG.outerWidth)(this.wtTable.wtRootElement);if(t=i.getSetting("freezeOverlays")?Math.min(d,a):Math.min(this.getContainerFillWidth(),d,a),o===r&&s>0&&this.sumColumnWidths(0,s-1)>t)return n.documentElement.clientWidth;if(o!==r&&("scroll"===(e=(0,eG.getStyle)(this.dataAccessObject.inlineStartOverlayTrimmingContainer,"overflow",r))||"hidden"===e||"auto"===e))return Math.max(t,o.clientWidth);let p=i.getSetting("stretchH");return"none"!==p&&p?t:Math.max(t,(0,eG.outerWidth)(this.wtTable.TABLE))}hasVerticalScroll(){return this.wtTable.hider.offsetHeight>this.getWorkspaceHeight()}hasHorizontalScroll(){return this.wtTable.hider.offsetWidth>this.getWorkspaceWidth()}sumColumnWidths(t,e){let i=0,n=t;for(;n<e;)i+=this.wtTable.getColumnWidth(n),n+=1;return i}getContainerFillWidth(){if(this.containerWidth)return this.containerWidth;let t=this.wtTable.holder,e=this.domBindings.rootDocument.createElement("div");e.style.width="100%",e.style.height="1px",t.appendChild(e);let i=e.offsetWidth;return this.containerWidth=i,t.removeChild(e),i}getWorkspaceOffset(){return(0,eG.offset)(this.wtTable.TABLE)}getColumnHeaderHeight(){return this.wtSettings.getSetting("columnHeaders").length?isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=(0,eG.outerHeight)(this.wtTable.THEAD)):this.columnHeaderHeight=0,this.columnHeaderHeight}getViewportHeight(){let t=this.getWorkspaceHeight();if(t===1/0)return t;let e=this.getColumnHeaderHeight();return e>0&&(t-=e),t}getRowHeaderWidth(){let t=this.wtSettings.getSetting("rowHeaderWidth"),e=this.wtSettings.getSetting("rowHeaders");if(t){this.rowHeaderWidth=0;for(let i=0,n=e.length;i<n;i++)this.rowHeaderWidth+=t[i]||t}if(isNaN(this.rowHeaderWidth)){if(e.length){let t=this.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(let i=0,n=e.length;i<n;i++)t?(this.rowHeaderWidth+=(0,eG.outerWidth)(t),t=t.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0}return this.rowHeaderWidth=this.wtSettings.getSetting("onModifyRowHeaderWidth",this.rowHeaderWidth)||this.rowHeaderWidth,this.rowHeaderWidth}getViewportWidth(){let t=this.getWorkspaceWidth();if(t===1/0)return t;let e=this.getRowHeaderWidth();return e>0?t-e:t}createRowsCalculator(){let t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["rendered","fullyVisible","partiallyVisible"],{wtSettings:n,wtTable:r}=this,o=this.getViewportHeight();this.rowHeaderWidth=NaN;let a=this.dataAccessObject.topScrollPosition-this.dataAccessObject.topParentOffset,s=n.getSetting("fixedRowsTop"),l=n.getSetting("fixedRowsBottom"),h=n.getSetting("totalRows");return s&&a>=0&&(a+=e=this.dataAccessObject.topOverlay.sumCellSizes(0,s),o-=e),l&&this.dataAccessObject.bottomOverlay.clone&&(o-=e=this.dataAccessObject.bottomOverlay.sumCellSizes(h-l,h)),t=r.holder.clientHeight===r.holder.offsetHeight?0:(0,eG.getScrollbarWidth)(this.domBindings.rootDocument),new oO({calculationTypes:i.map(t=>[t,this.rowsCalculatorTypes.get(t)()]),viewportHeight:o,scrollOffset:a,totalRows:n.getSetting("totalRows"),rowHeightFn:t=>r.getRowHeight(t),overrideFn:n.getSettingPure("viewportRowCalculatorOverride"),horizontalScrollbarHeight:t})}createColumnsCalculator(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["rendered","fullyVisible","partiallyVisible"],{wtSettings:e,wtTable:i}=this,n=this.getViewportWidth(),r=Math.abs(this.dataAccessObject.inlineStartScrollPosition)-this.dataAccessObject.inlineStartParentOffset;this.columnHeaderHeight=NaN;let o=e.getSetting("fixedColumnsStart");if(o&&r>=0){let t=this.dataAccessObject.inlineStartOverlay.sumCellSizes(0,o);r+=t,n-=t}return i.holder.clientWidth!==i.holder.offsetWidth&&(n-=(0,eG.getScrollbarWidth)(this.domBindings.rootDocument)),new rn({calculationTypes:t.map(t=>[t,this.columnsCalculatorTypes.get(t)()]),viewportWidth:n,scrollOffset:r,totalColumns:e.getSetting("totalColumns"),columnWidthFn:t=>i.getColumnWidth(t),overrideFn:e.getSettingPure("viewportColumnCalculatorOverride"),inlineStartOffset:this.dataAccessObject.inlineStartParentOffset})}createCalculators(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{wtSettings:e}=this,i=this.createRowsCalculator(),n=this.createColumnsCalculator();if(t&&!e.getSetting("renderAllRows")){let e=i.getResultsFor("fullyVisible");t=this.areAllProposedVisibleRowsAlreadyRendered(e)}if(t&&!e.getSetting("renderAllColumns")){let e=n.getResultsFor("fullyVisible");t=this.areAllProposedVisibleColumnsAlreadyRendered(e)}return t||(this.rowsRenderCalculator=i.getResultsFor("rendered"),this.columnsRenderCalculator=n.getResultsFor("rendered")),this.rowsVisibleCalculator=i.getResultsFor("fullyVisible"),this.columnsVisibleCalculator=n.getResultsFor("fullyVisible"),this.rowsPartiallyVisibleCalculator=i.getResultsFor("partiallyVisible"),this.columnsPartiallyVisibleCalculator=n.getResultsFor("partiallyVisible"),t}createVisibleCalculators(){let t=this.createRowsCalculator(["fullyVisible","partiallyVisible"]),e=this.createColumnsCalculator(["fullyVisible","partiallyVisible"]);this.rowsVisibleCalculator=t.getResultsFor("fullyVisible"),this.columnsVisibleCalculator=e.getResultsFor("fullyVisible"),this.rowsPartiallyVisibleCalculator=t.getResultsFor("partiallyVisible"),this.columnsPartiallyVisibleCalculator=e.getResultsFor("partiallyVisible")}areAllProposedVisibleRowsAlreadyRendered(t){if(!this.rowsVisibleCalculator)return!1;let{startRow:e,endRow:i}=t;if(null===e&&null===i){if(!t.isVisibleInTrimmingContainer)return!0;e=this.rowsPartiallyVisibleCalculator.startRow,i=this.rowsPartiallyVisibleCalculator.endRow}let{startRow:n,endRow:r}=this.rowsRenderCalculator;return!(e<n)&&(e!==n||!(e>0))&&!(i>r||i===r&&i<this.wtSettings.getSetting("totalRows")-1)}areAllProposedVisibleColumnsAlreadyRendered(t){if(!this.columnsVisibleCalculator)return!1;let{startColumn:e,endColumn:i}=t;if(null===e&&null===i){if(!t.isVisibleInTrimmingContainer)return!0;e=this.columnsPartiallyVisibleCalculator.startColumn,i=this.columnsPartiallyVisibleCalculator.endColumn}let{startColumn:n,endColumn:r}=this.columnsRenderCalculator;return!(e<n)&&(e!==n||!(e>0))&&!(i>r||i===r&&i<this.wtSettings.getSetting("totalColumns")-1)}resetHasOversizedColumnHeadersMarked(){(0,e6.objectEach)(this.hasOversizedColumnHeadersMarked,(t,e,i)=>{i[e]=void 0})}};t4("1C6fS"),t4("1hIp0");var om=t4("lHUxa");om("flat"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var eG=t4("gFbQZ");t4("1C6fS"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var eG=t4("gFbQZ");function oL(t,e,i){oN(t,e),e.set(t,i)}function oN(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function oH(t,e){return t.get(oB(t,e))}function oV(t,e,i){return t.set(oB(t,e),i),i}function oB(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var oF=new WeakMap,oW=new WeakMap,oz=new WeakSet;class oj{constructor(){oN(this,oz),oz.add(this),oL(this,oF,void 0),oL(this,oW,void 0)}setActiveOverlay(t){return oV(oW,this,t),this}setActiveSelection(t){return oV(oF,this,t),this}scan(){let t=oH(oF,this).settings.selectionType,e=new Set;return"active-header"===t?(this.scanColumnsInHeadersRange(t=>e.add(t)),this.scanRowsInHeadersRange(t=>e.add(t))):"area"===t?this.scanCellsRange(t=>e.add(t)):"focus"===t?(this.scanColumnsInHeadersRange(t=>e.add(t)),this.scanRowsInHeadersRange(t=>e.add(t)),this.scanCellsRange(t=>e.add(t))):"fill"===t?this.scanCellsRange(t=>e.add(t)):"header"===t?(this.scanColumnsInHeadersRange(t=>e.add(t)),this.scanRowsInHeadersRange(t=>e.add(t))):"row"===t?(this.scanRowsInHeadersRange(t=>e.add(t)),this.scanRowsInCellsRange(t=>e.add(t))):"column"===t&&(this.scanColumnsInHeadersRange(t=>e.add(t)),this.scanColumnsInCellsRange(t=>e.add(t))),e}scanColumnsInHeadersRange(t){let[e,i,n,r]=oH(oF,this).getCorners(),{wtTable:o}=oH(oW,this),a=o.getRenderedColumnsCount(),s=o.getColumnHeadersCount(),l=0;for(let h=-o.getRowHeadersCount();h<a;h++){let a=o.columnFilter.renderedToSource(h);if(!(a<i)&&!(a>r)){for(let h=-s;h<0;h++){if(h<e||h>n)continue;let u=h+s,c=o.getColumnHeader(a,u),d=oH(oW,this).getSetting("onBeforeHighlightingColumnHeader",a,u,{selectionType:oH(oF,this).settings.selectionType,columnCursor:l,selectionWidth:r-i+1});null!==d&&(d!==a&&(c=o.getColumnHeader(d,u)),t(c))}l+=1}}}scanRowsInHeadersRange(t){let[e,i,n,r]=oH(oF,this).getCorners(),{wtTable:o}=oH(oW,this),a=o.getRenderedRowsCount(),s=o.getRowHeadersCount(),l=0;for(let h=-o.getColumnHeadersCount();h<a;h++){let a=o.rowFilter.renderedToSource(h);if(!(a<e)&&!(a>n)){for(let h=-s;h<0;h++){if(h<i||h>r)continue;let u=h+s,c=o.getRowHeader(a,u),d=oH(oW,this).getSetting("onBeforeHighlightingRowHeader",a,u,{selectionType:oH(oF,this).settings.selectionType,rowCursor:l,selectionHeight:n-e+1});null!==d&&(d!==a&&(c=o.getRowHeader(d,u)),t(c))}l+=1}}}scanCellsRange(t){let[e,i,n,r]=oH(oF,this).getCorners(),{wtTable:o}=oH(oW,this);oB(oz,this,oU).call(this,(a,s)=>{if(a>=e&&a<=n&&s>=i&&s<=r){let e=o.getCell(oH(oW,this).createCellCoords(a,s)),i=oH(oW,this).getSetting("onAfterDrawSelection",a,s,oH(oF,this).settings.layerLevel);"string"==typeof i&&(0,eG.addClass)(e,i),t(e)}})}scanRowsInCellsRange(t){let[e,,i]=oH(oF,this).getCorners(),{wtTable:n}=oH(oW,this);oB(oz,this,oU).call(this,(r,o)=>{r>=e&&r<=i&&t(n.getCell(oH(oW,this).createCellCoords(r,o)))})}scanColumnsInCellsRange(t){let[,e,,i]=oH(oF,this).getCorners(),{wtTable:n}=oH(oW,this);oB(oz,this,oU).call(this,(r,o)=>{o>=e&&o<=i&&t(n.getCell(oH(oW,this).createCellCoords(r,o)))})}}function oU(t){let{wtTable:e}=oH(oW,this),i=e.getRenderedRowsCount(),n=e.getRenderedColumnsCount();for(let r=0;r<i;r+=1){let i=e.rowFilter.renderedToSource(r);for(let r=0;r<n;r+=1)t(i,e.columnFilter.renderedToSource(r))}}var eG=t4("gFbQZ"),eq=t4("7HxIw"),e6=t4("hwT6B"),e$=t4("eL8cl"),oG=class{constructor(t,e){if(!e)return;this.eventManager=t.eventManager,this.instance=t,this.wot=t,this.settings=e,this.mouseDown=!1,this.main=null,this.top=null,this.bottom=null,this.start=null,this.end=null,this.topStyle=null,this.bottomStyle=null,this.startStyle=null,this.endStyle=null,this.cornerDefaultStyle=r5,this.cornerCenterPointOffset=-(parseInt(this.cornerDefaultStyle.width,10)/2),this.corner=null,this.cornerStyle=null,this.createBorders(e),this.registerListeners()}registerListeners(){let t=this.wot.rootDocument.body;this.eventManager.addEventListener(t,"mousedown",()=>this.onMouseDown()),this.eventManager.addEventListener(t,"mouseup",()=>this.onMouseUp());for(let t=0,e=this.main.childNodes.length;t<e;t++){let e=this.main.childNodes[t];this.eventManager.addEventListener(e,"mouseenter",e=>this.onMouseEnter(e,this.main.childNodes[t]))}}onMouseDown(){this.mouseDown=!0}onMouseUp(){this.mouseDown=!1}onMouseEnter(t,e){if(!this.mouseDown||!this.wot.getSetting("hideBorderOnMouseDownOver"))return;t.preventDefault(),(0,eq.stopImmediatePropagation)(t);let i=this,n=this.wot.rootDocument.body,r=e.getBoundingClientRect();e.style.display="none",this.eventManager.addEventListener(n,"mousemove",function t(o){(function(t){if(t.clientY<Math.floor(r.top)||t.clientY>Math.ceil(r.top+r.height)||t.clientX<Math.floor(r.left)||t.clientX>Math.ceil(r.left+r.width))return!0})(o)&&(i.eventManager.removeEventListener(n,"mousemove",t),e.style.display="block")})}createBorders(t){let{rootDocument:e}=this.wot;this.main=e.createElement("div");let i=["top","start","bottom","end","corner"],n=this.main.style;n.position="absolute",n.top=0,n.left=0;for(let r=0;r<5;r++){let o=i[r],a=e.createElement("div");a.className=`wtBorder ${this.settings.className||""}`,this.settings[o]&&this.settings[o].hide&&(a.className+=" hidden"),(n=a.style).backgroundColor=this.settings[o]&&this.settings[o].color?this.settings[o].color:t.border.color,n.height=this.settings[o]&&this.settings[o].width?`${this.settings[o].width}px`:`${t.border.width}px`,n.width=this.settings[o]&&this.settings[o].width?`${this.settings[o].width}px`:`${t.border.width}px`,this.main.appendChild(a)}this.top=this.main.childNodes[0],this.start=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.end=this.main.childNodes[3],this.topStyle=this.top.style,this.startStyle=this.start.style,this.bottomStyle=this.bottom.style,this.endStyle=this.end.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),(0,e$.isMobileBrowser)()&&this.instance.getSetting("isDataViewInstance")&&this.createMultipleSelectorHandles(),this.disappear();let{wtTable:r}=this.wot,o=r.bordersHolder;o||((o=e.createElement("div")).className="htBorders",r.bordersHolder=o,r.spreader.appendChild(o)),o.appendChild(this.main)}createMultipleSelectorHandles(){let{rootDocument:t}=this.wot;this.selectionHandles={top:t.createElement("DIV"),topHitArea:t.createElement("DIV"),bottom:t.createElement("DIV"),bottomHitArea:t.createElement("DIV")},this.selectionHandles.top.className="topSelectionHandle topLeftSelectionHandle",this.selectionHandles.topHitArea.className="topSelectionHandle-HitArea topLeftSelectionHandle-HitArea",this.selectionHandles.bottom.className="bottomSelectionHandle bottomRightSelectionHandle",this.selectionHandles.bottomHitArea.className="bottomSelectionHandle-HitArea bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={top:this.selectionHandles.top.style,topHitArea:this.selectionHandles.topHitArea.style,bottom:this.selectionHandles.bottom.style,bottomHitArea:this.selectionHandles.bottomHitArea.style};let e={position:"absolute",height:"40px",width:"40px","border-radius":`${parseInt(40/1.5,10)}px`};(0,e6.objectEach)(e,(t,e)=>{this.selectionHandles.styles.bottomHitArea[e]=t,this.selectionHandles.styles.topHitArea[e]=t});let i={position:"absolute",height:"10px",width:"10px","border-radius":`${parseInt(10/1.5,10)}px`,background:"#F5F5FF",border:"1px solid #4285c8"};(0,e6.objectEach)(i,(t,e)=>{this.selectionHandles.styles.bottom[e]=t,this.selectionHandles.styles.top[e]=t}),this.main.appendChild(this.selectionHandles.top),this.main.appendChild(this.selectionHandles.bottom),this.main.appendChild(this.selectionHandles.topHitArea),this.main.appendChild(this.selectionHandles.bottomHitArea)}isPartRange(t,e){let i=this.wot.selectionManager.getAreaSelection();return!!i.cellRange&&(t!==i.cellRange.to.row||e!==i.cellRange.to.col)}updateMultipleSelectionHandlesPosition(t,e,i,n,r,o){let a=this.wot.wtSettings.getSetting("rtlMode")?"right":"left",{top:s,topHitArea:l,bottom:h,bottomHitArea:u}=this.selectionHandles.styles,c=parseInt(s.borderWidth,10),d=parseInt(s.width,10),p=parseInt(l.width,10),f=this.wot.wtTable.getWidth(),g=this.wot.wtTable.getHeight();s.top=`${parseInt(i-d-1,10)}px`,s[a]=`${parseInt(n-d-1,10)}px`,l.top=`${parseInt(i-p/4*3,10)}px`,l[a]=`${parseInt(n-p/4*3,10)}px`;let m=Math.min(parseInt(n+r,10),f-d-2*c),y=Math.min(parseInt(n+r-p/4,10),f-p-2*c);h[a]=`${m}px`,u[a]=`${y}px`;let w=Math.min(parseInt(i+o,10),g-d-2*c),b=Math.min(parseInt(i+o-p/4,10),g-p-2*c);h.top=`${w}px`,u.top=`${b}px`,this.settings.border.cornerVisible&&this.settings.border.cornerVisible()?(s.display="block",l.display="block",this.isPartRange(t,e)?(h.display="none",u.display="none"):(h.display="block",u.display="block")):(s.display="none",h.display="none",l.display="none",u.display="none"),t===this.wot.wtSettings.getSetting("fixedRowsTop")||e===this.wot.wtSettings.getSetting("fixedColumnsStart")?(s.zIndex="9999",l.zIndex="9999"):(s.zIndex="",l.zIndex="")}appear(t){let e,i,n,r,o,a;if(this.disabled)return;let{wtTable:s,rootDocument:l,rootWindow:h}=this.wot,u=s.getRenderedRowsCount();for(let i=0;i<u;i+=1){let n=s.rowFilter.renderedToSource(i);if(n>=t[0]&&n<=t[2]){e=n,o=t[0];break}}for(let e=u-1;e>=0;e-=1){let n=s.rowFilter.renderedToSource(e);if(n>=t[0]&&n<=t[2]){i=n;break}}let c=s.getRenderedColumnsCount();for(let e=0;e<c;e+=1){let i=s.columnFilter.renderedToSource(e);if(i>=t[1]&&i<=t[3]){n=i,a=t[1];break}}for(let e=c-1;e>=0;e-=1){let i=s.columnFilter.renderedToSource(e);if(i>=t[1]&&i<=t[3]){r=i;break}}if(void 0===e||void 0===n){this.disappear();return}let d=s.getCell(this.wot.createCellCoords(e,n)),p=e!==i||n!==r,f=p?s.getCell(this.wot.createCellCoords(i,r)):d,g=(0,eG.offset)(d),m=p?(0,eG.offset)(f):g,y=(0,eG.offset)(s.TABLE),w=(0,eG.outerWidth)(s.TABLE),b=g.top,x=g.left,S=this.wot.wtSettings.getSetting("rtlMode"),C=0,_=0;if(S){let t=(0,eG.outerWidth)(d),e=h.innerWidth-y.left-w;_=x+t-m.left,C=h.innerWidth-x-t-e-1}else _=m.left+(0,eG.outerWidth)(f)-x,C=x-y.left-1;if(this.isEntireColumnSelected(e,i)){let t=this.getDimensionsFromHeader("columns",n,r,o,y),e=null;t&&([e,C,_]=t),e&&(d=e)}let M=b-y.top-1,T=m.top+(0,eG.outerHeight)(f)-b;if(this.isEntireRowSelected(n,r)){let t=this.getDimensionsFromHeader("rows",e,i,a,y),n=null;t&&([n,M,T]=t),n&&(d=n)}let I=(0,eG.getComputedStyle)(d,h);parseInt(I.borderTopWidth,10)>0&&(M+=1,T=T>0?T-1:0),parseInt(I[S?"borderRightWidth":"borderLeftWidth"],10)>0&&(C+=1,_=_>0?_-1:0);let R=S?"right":"left";this.topStyle.top=`${M}px`,this.topStyle[R]=`${C}px`,this.topStyle.width=`${_}px`,this.topStyle.display="block",this.startStyle.top=`${M}px`,this.startStyle[R]=`${C}px`,this.startStyle.height=`${T}px`,this.startStyle.display="block";let E=Math.floor(this.settings.border.width/2);this.bottomStyle.top=`${M+T-E}px`,this.bottomStyle[R]=`${C}px`,this.bottomStyle.width=`${_}px`,this.bottomStyle.display="block",this.endStyle.top=`${M}px`,this.endStyle[R]=`${C+_-E}px`,this.endStyle.height=`${T+1}px`,this.endStyle.display="block";let A=this.settings.border.cornerVisible;A="function"==typeof A?A(this.settings.layerLevel):A;let k=this.wot.getSetting("onModifyGetCellCoords",i,r),[D,O]=[i,r];if(k&&Array.isArray(k)&&([,,D,O]=k),(0,e$.isMobileBrowser)()||!A||this.isPartRange(D,O))this.cornerStyle.display="none";else{this.cornerStyle.top=`${M+T+this.cornerCenterPointOffset-1}px`,this.cornerStyle[R]=`${C+_+this.cornerCenterPointOffset-1}px`,this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="none";let t=(0,eG.getTrimmingContainer)(s.TABLE),e=t===h;e&&(t=l.documentElement);let n=parseInt(this.cornerDefaultStyle.width,10)/2,o=parseInt(this.cornerDefaultStyle.height,10)/2;if(r===this.wot.getSetting("totalColumns")-1){let i=e?f.getBoundingClientRect().left:f.offsetLeft;(S?i-parseInt(this.cornerDefaultStyle.width,10)/2<0:i+(0,eG.outerWidth)(f)+parseInt(this.cornerDefaultStyle.width,10)/2>=(0,eG.innerWidth)(t))&&(this.cornerStyle[R]=`${Math.floor(C+_+this.cornerCenterPointOffset-n)}px`,this.cornerStyle[S?"borderLeftWidth":"borderRightWidth"]=0)}i===this.wot.getSetting("totalRows")-1&&(e?f.getBoundingClientRect().top:f.offsetTop)+(0,eG.outerHeight)(f)+parseInt(this.cornerDefaultStyle.height,10)/2>=(0,eG.innerHeight)(t)&&(this.cornerStyle.top=`${Math.floor(M+T+this.cornerCenterPointOffset-o)}px`,this.cornerStyle.borderBottomWidth=0),this.cornerStyle.display="block"}(0,e$.isMobileBrowser)()&&this.instance.getSetting("isDataViewInstance")&&this.updateMultipleSelectionHandlesPosition(i,r,M,C,_,T)}isEntireColumnSelected(t,e){return t===this.wot.wtTable.getFirstRenderedRow()&&e===this.wot.wtTable.getLastRenderedRow()}isEntireRowSelected(t,e){return t===this.wot.wtTable.getFirstRenderedColumn()&&e===this.wot.wtTable.getLastRenderedColumn()}getDimensionsFromHeader(t,e,i,n,r){let{wtTable:o}=this.wot,a=o.wtRootElement.parentNode,s=null,l=null,h=null,u=null,c=null,d=null,p=null,f=null;switch(t){case"rows":s=function(){return o.getRowHeader(...arguments)},l=function(){return(0,eG.outerHeight)(...arguments)},h="ht__selection--rows",d="top";break;case"columns":s=function(){return o.getColumnHeader(...arguments)},l=function(){return(0,eG.outerWidth)(...arguments)},h="ht__selection--columns",d="left"}if(a.classList.contains(h)){let t=this.wot.getSetting("columnHeaders").length;if(p=s(e,t-n),f=s(i,t-n),!p||!f)return!1;let o=(0,eG.offset)(p),a=(0,eG.offset)(f);return p&&f&&(u=o[d]-r[d]-1,c=a[d]+l(f)-o[d]),[p,u,c]}return!1}changeBorderStyle(t,e){let i=this[t].style,n=e[t];!n||n.hide?(0,eG.addClass)(this[t],"hidden"):((0,eG.hasClass)(this[t],"hidden")&&(0,eG.removeClass)(this[t],"hidden"),i.backgroundColor=n.color,("top"===t||"bottom"===t)&&(i.height=`${n.width}px`),("start"===t||"end"===t)&&(i.width=`${n.width}px`))}changeBorderToDefaultStyle(t){let e=this[t].style;e.backgroundColor="#000",e.width="1px",e.height="1px"}toggleHiddenClass(t,e){this.changeBorderToDefaultStyle(t),e?(0,eG.addClass)(this[t],"hidden"):(0,eG.removeClass)(this[t],"hidden")}disappear(){this.topStyle.display="none",this.bottomStyle.display="none",this.startStyle.display="none",this.endStyle.display="none",this.cornerStyle.display="none",(0,e$.isMobileBrowser)()&&this.instance.getSetting("isDataViewInstance")&&(this.selectionHandles.styles.top.display="none",this.selectionHandles.styles.topHitArea.display="none",this.selectionHandles.styles.bottom.display="none",this.selectionHandles.styles.bottomHitArea.display="none")}destroy(){this.eventManager.destroyWithOwnEventsOnly(),this.main.parentNode.removeChild(this.main)}};function oY(t,e,i){oX(t,e),e.set(t,i)}function oX(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function o$(t,e){return t.get(oq(t,e))}function oZ(t,e,i){return t.set(oq(t,e),i),i}function oq(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var oK=new WeakMap,oQ=new WeakMap,oJ=new WeakMap,o0=new WeakMap,o1=new WeakMap,o2=new WeakMap,o5=new WeakSet;class o3{constructor(t){oX(this,o5),o5.add(this),oY(this,oK,void 0),oY(this,oQ,void 0),oY(this,oJ,new oj),oY(this,o0,new WeakMap),oY(this,o1,new WeakSet),oY(this,o2,new Map),oZ(oQ,this,t)}setActiveOverlay(t){return oZ(oK,this,t),o$(oJ,this).setActiveOverlay(o$(oK,this)),o$(o0,this).has(o$(oK,this))||o$(o0,this).set(o$(oK,this),new Set),this}getFocusSelection(){return null!==o$(oQ,this)?o$(oQ,this).getFocus():null}getAreaSelection(){return null!==o$(oQ,this)?o$(oQ,this).createLayeredArea():null}getBorderInstance(t){if(!t.settings.border)return null;if(o$(o2,this).has(t)){let e=o$(o2,this).get(t);if(e.has(o$(oK,this)))return e.get(o$(oK,this));let i=new oG(o$(oK,this),t.settings);return e.set(o$(oK,this),i),i}let e=new oG(o$(oK,this),t.settings);return o$(o2,this).set(t,new Map([[o$(oK,this),e]])),e}getBorderInstances(t){var e,i;return Array.from(null!==(e=null===(i=o$(o2,this).get(t))||void 0===i?void 0:i.values())&&void 0!==e?e:[])}destroyBorders(t){o$(o2,this).get(t).forEach(t=>t.destroy()),o$(o2,this).delete(t)}render(t){if(null===o$(oQ,this))return;t&&oq(o5,this,o4).call(this);let e=Array.from(o$(oQ,this)),i=new Map,n=new Map;for(let t=0;t<e.length;t++){let r=e[t],{className:o,headerAttributes:a,createLayers:s,selectionType:l}=r.settings;o$(o1,this).has(r)||(o$(o1,this).add(r),r.addLocalHook("destroy",()=>this.destroyBorders(r)));let h=this.getBorderInstance(r);if(r.isEmpty()){null==h||h.disappear();continue}o&&o$(oJ,this).setActiveSelection(r).scan().forEach(t=>{if(i.has(t)){let e=i.get(t);e.has(o)&&!0===s?e.set(o,e.get(o)+1):e.set(o,1)}else i.set(t,new Map([[o,1]]));a&&(n.has(t)||n.set(t,[]),"TH"===t.nodeName&&n.get(t).push(...a))});let u=r.getCorners();o$(oK,this).getSetting("onBeforeDrawBorders",u,l),null==h||h.appear(u)}i.forEach((t,e)=>{var i;let n=Array.from(t).map(t=>{let[e,i]=t;return 1===i?e:[e,...Array.from({length:i-1},(t,i)=>`${e}-${i+1}`)]}).flat();n.forEach(t=>o$(o0,this).get(o$(oK,this)).add(t)),(0,eG.addClass)(e,n),"TD"===e.nodeName&&Array.isArray(null===(i=o$(oQ,this).options)||void 0===i?void 0:i.cellAttributes)&&(0,eG.setAttribute)(e,o$(oQ,this).options.cellAttributes)}),Array.from(n.keys()).forEach(t=>{(0,eG.setAttribute)(t,[...n.get(t)])})}}function o4(){let t=o$(o0,this).get(o$(oK,this)),e=o$(oK,this).wtSettings.getSetting("onBeforeRemoveCellClassNames");if(Array.isArray(e))for(let i=0;i<e.length;i++)t.add(e[i]);t.forEach(t=>{var e,i;let n=o$(oK,this).wtTable.TABLE.querySelectorAll(`.${t}`),r=[];Array.isArray(null===(e=o$(oQ,this).options)||void 0===e?void 0:e.cellAttributes)&&(r=o$(oQ,this).options.cellAttributes.map(t=>t[0])),Array.isArray(null===(i=o$(oQ,this).options)||void 0===i?void 0:i.headerAttributes)&&(r=[...r,...o$(oQ,this).options.headerAttributes.map(t=>t[0])]);for(let e=0,i=n.length;e<i;e++)(0,eG.removeClass)(n[e],t),(0,eG.removeAttribute)(n[e],r)}),t.clear()}var e6=t4("hwT6B"),eG=t4("gFbQZ");class o6 extends rX{constructor(t,e){super(t,new od(e));let i=this.wtSettings.getSetting("facade",this);this.wtTable=new op(this.getTableDao(),i,this.domBindings,this.wtSettings),this.wtViewport=new oP(this.getViewportDao(),this.domBindings,this.wtSettings,this.eventManager,this.wtTable),this.selectionManager=new o3(this.wtSettings.getSetting("selections")),this.wtEvent=new nP(i,this.domBindings,this.wtSettings,this.eventManager,this.wtTable,this.selectionManager),this.wtOverlays=new ou(this,i,this.domBindings,this.wtSettings,this.eventManager,this.wtTable),this.exportSettingsAsClassNames(),this.findOriginalHeaders()}exportSettingsAsClassNames(){let t=[],e=[];(0,e6.objectEach)({rowHeaders:"htRowHeaders",columnHeaders:"htColumnHeaders"},(i,n)=>{this.wtSettings.getSetting(n).length&&e.push(i),t.push(i)}),(0,eG.removeClass)(this.wtTable.wtRootElement.parentNode,t),(0,eG.addClass)(this.wtTable.wtRootElement.parentNode,e)}getOverlayByName(t){var e;if(!rC.includes(t))return null;let i=t.replace(/_([a-z])/g,t=>t[1].toUpperCase());return null!==(e=this.wtOverlays[`${i}Overlay`])&&void 0!==e?e:null}getViewportDao(){let t=this;return{get wot(){return t},get topOverlayTrimmingContainer(){return t.wtOverlays.topOverlay.trimmingContainer},get inlineStartOverlayTrimmingContainer(){return t.wtOverlays.inlineStartOverlay.trimmingContainer},get topScrollPosition(){return t.wtOverlays.topOverlay.getScrollPosition()},get topParentOffset(){return t.wtOverlays.topOverlay.getTableParentOffset()},get inlineStartScrollPosition(){return t.wtOverlays.inlineStartOverlay.getScrollPosition()},get inlineStartParentOffset(){return t.wtOverlays.inlineStartOverlay.getTableParentOffset()},get topOverlay(){return t.wtOverlays.topOverlay},get inlineStartOverlay(){return t.wtOverlays.inlineStartOverlay},get bottomOverlay(){return t.wtOverlays.bottomOverlay}}}}class o8{constructor(t){t instanceof rX?this._wot=t:this._initFromSettings(t)}_initFromSettings(t){t.facade=t=>{let e=new o8(t);return()=>e},this._wot=new o6(t.table,t)}get guid(){return this._wot.guid}get rootDocument(){return this._wot.domBindings.rootDocument}get rootWindow(){return this._wot.domBindings.rootWindow}get wtSettings(){return this._wot.wtSettings}get cloneSource(){return this._wot.cloneSource}get cloneOverlay(){return this._wot.cloneOverlay}get selectionManager(){return this._wot.selectionManager}get wtViewport(){return this._wot.wtViewport}get wtOverlays(){return this._wot.wtOverlays}get wtTable(){return this._wot.wtTable}get wtEvent(){return this._wot.wtEvent}get wtScroll(){return this._wot.wtScroll}get drawn(){return this._wot.drawn}set drawn(t){this._wot.drawn=t}get drawInterrupted(){return this._wot.drawInterrupted}set drawInterrupted(t){this._wot.drawInterrupted=t}get lastMouseOver(){return this._wot.lastMouseOver}set lastMouseOver(t){this._wot.lastMouseOver=t}get momentumScrolling(){return this._wot.momentumScrolling}set momentumScrolling(t){this._wot.momentumScrolling=t}get touchApplied(){return this._wot.touchApplied}set touchApplied(t){this._wot.touchApplied=t}get domBindings(){return this._wot.domBindings}get eventListeners(){return this._wot.eventListeners}set eventListeners(t){this._wot.eventListeners=t}get eventManager(){return this._wot.eventManager}createCellCoords(t,e){return this._wot.createCellCoords(t,e)}createCellRange(t,e,i){return this._wot.createCellRange(t,e,i)}draw(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._wot.draw(t),this}getCell(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._wot.getCell(t,e)}scrollViewport(t,e,i,n,r){return this._wot.scrollViewport(t,e,i,n,r)}scrollViewportHorizontally(t,e,i){return this._wot.scrollViewportHorizontally(t,e,i)}scrollViewportVertically(t,e,i){return this._wot.scrollViewportVertically(t,e,i)}getViewport(){return this._wot.getViewport()}getOverlayName(){return this._wot.cloneOverlay?this._wot.cloneOverlay.type:"master"}getOverlayByName(t){return this._wot.getOverlayByName(t)}exportSettingsAsClassNames(){return this._wot.exportSettingsAsClassNames()}update(t,e){return this._wot.wtSettings.update(t,e),this}getSetting(t,e,i,n,r){return this._wot.wtSettings.getSetting(t,e,i,n,r)}hasSetting(t){return this._wot.wtSettings.hasSetting(t)}destroy(){this._wot.destroy()}}var eq=t4("7HxIw");function o9(t){let{isShiftKey:e,isLeftClick:i,isRightClick:n,coords:r,selection:o,controller:a,cellCoordsFactory:s}=t,l=o.isSelected()?o.getSelectedRange().current():null,h=o.isSelectedByCorner(),u=o.isSelectedByRowHeader();if(o.markSource("mouse"),e&&l)r.row>=0&&r.col>=0&&!a.cell?o.setRangeEnd(r):(h||u)&&r.row>=0&&r.col>=0&&!a.cell?o.setRangeEnd(s(r.row,r.col)):h&&r.row<0&&!a.column?o.setRangeEnd(s(l.to.row,r.col)):u&&r.col<0&&!a.row?o.setRangeEnd(s(r.row,l.to.col)):(!h&&!u&&r.col<0||h&&r.col<0)&&!a.row?o.selectRows(Math.max(l.from.row,0),r.row,r.col):(!h&&!u&&r.row<0||u&&r.row<0)&&!a.column&&o.selectColumns(Math.max(l.from.col,0),r.col,r.row);else{let t=!o.inInSelection(r),e=i||n&&t;r.row<0&&r.col>=0&&!a.column?e&&o.selectColumns(r.col,r.col,r.row):r.col<0&&r.row>=0&&!a.row?e&&o.selectRows(r.row,r.row,r.col):r.col>=0&&r.row>=0&&!a.cell?e&&o.setRangeStart(r):r.col<0&&r.row<0&&o.selectAll(!0,!0,{disableHeadersHighlight:!0,focusPosition:{row:0,col:0}})}o.markEndSource()}const o7=new Map([["mousedown",o9],["mouseover",function(t){let{isLeftClick:e,coords:i,selection:n,controller:r,cellCoordsFactory:o}=t;if(!e)return;let a=n.isSelectedByRowHeader(),s=n.isSelectedByColumnHeader(),l=n.tableProps.countCols(),h=n.tableProps.countRows();n.markSource("mouse"),s&&!r.column?n.setRangeEnd(o(h-1,i.col)):a&&!r.row?n.setRangeEnd(o(i.row,l-1)):r.cell||n.setRangeEnd(i),n.markEndSource()}],["touchstart",o9]]);function at(t,e){let{coords:i,selection:n,controller:r,cellCoordsFactory:o}=e;o7.get(t.type)({coords:i,selection:n,controller:r,cellCoordsFactory:o,isShiftKey:t.shiftKey,isLeftClick:(0,eq.isLeftClick)(t)||"touchstart"===t.type,isRightClick:(0,eq.isRightClick)(t)})}const ae=new WeakMap,ai=Symbol("rootInstance");function an(t){return ae.has(t)}var nZ=t4("4Pbrh");function ar(t,e,i){ao(t,e),e.set(t,i)}function ao(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function aa(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function as(t,e){return t.get(ah(t,e))}function al(t,e,i){return t.set(ah(t,e),i),i}function ah(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var au=new WeakMap,ac=new WeakMap,ad=new WeakMap,ap=new WeakMap,af=new WeakMap,ag=new WeakMap,am=new WeakMap,ay=new WeakSet;function av(){return parseInt(this.hot.rootElement.getAttribute((0,nZ.A11Y_COLCOUNT)()[0]),10)}function aw(t){let e=ah(ay,this,av).call(this)+t;(0,eG.setAttribute)(this.hot.rootElement,...(0,nZ.A11Y_COLCOUNT)(e))}var ab=class{constructor(t){ao(this,ay),ay.add(this),aa(this,"hot",void 0),aa(this,"eventManager",void 0),aa(this,"settings",void 0),aa(this,"THEAD",void 0),aa(this,"TBODY",void 0),aa(this,"_wt",void 0),aa(this,"activeWt",void 0),ar(this,au,0),ar(this,ac,0),aa(this,"postponedAdjustElementsSize",!1),ar(this,ad,!1),ar(this,ap,void 0),ar(this,af,void 0),ar(this,ag,0),ar(this,am,0),this.hot=t,this.eventManager=new eQ.default(this.hot),this.settings=this.hot.getSettings(),this.createElements(),this.registerEvents(),this.initializeWalkontable()}render(){this.hot.isRenderSuspended()||(this.hot.runHooks("beforeRender",this.hot.forceFullRender),this.postponedAdjustElementsSize&&(this.postponedAdjustElementsSize=!1,this.adjustElementsSize(!0)),this._wt.draw(!this.hot.forceFullRender),this.hot.runHooks("afterRender",this.hot.forceFullRender),this.hot.forceFullRender=!1,this.hot.renderCall=!1)}adjustElementsSize(){this.hot.isRenderSuspended()?this.postponedAdjustElementsSize=!0:this._wt.wtOverlays.adjustElementsSize()}getCellAtCoords(t,e){let i=this._wt.getCell(t,e);return i<0?null:i}scrollViewport(t,e,i,n,r){return this._wt.scrollViewport(t,e,i,n,r)}scrollViewportHorizontally(t,e,i){return this._wt.scrollViewportHorizontally(t,e,i)}scrollViewportVertically(t,e,i){return this._wt.scrollViewportVertically(t,e,i)}createElements(){let{rootElement:t,rootDocument:e}=this.hot,i=t.getAttribute("style");i&&t.setAttribute("data-originalstyle",i),(0,eG.addClass)(t,"handsontable"),al(af,this,e.createElement("TABLE")),(0,eG.addClass)(as(af,this),"htCore"),this.hot.getSettings().tableClassName&&(0,eG.addClass)(as(af,this),this.hot.getSettings().tableClassName),this.settings.ariaTags&&((0,eG.setAttribute)(as(af,this),[(0,nZ.A11Y_PRESENTATION)()]),(0,eG.setAttribute)(t,[(0,nZ.A11Y_TREEGRID)(),(0,nZ.A11Y_ROWCOUNT)(-1),(0,nZ.A11Y_COLCOUNT)(this.hot.countCols()),(0,nZ.A11Y_MULTISELECTABLE)()])),this.THEAD=e.createElement("THEAD"),as(af,this).appendChild(this.THEAD),this.TBODY=e.createElement("TBODY"),as(af,this).appendChild(this.TBODY),this.hot.table=as(af,this),this.hot.container.insertBefore(as(af,this),this.hot.container.firstChild)}registerEvents(){let{rootElement:t,rootDocument:e,selection:i,rootWindow:n}=this.hot,r=e.documentElement;this.eventManager.addEventListener(t,"mousedown",t=>{al(ad,this,!0),this.isTextSelectionAllowed(t.target)||((0,eG.clearTextSelection)(n),t.preventDefault(),n.focus())}),this.eventManager.addEventListener(t,"mouseup",()=>{al(ad,this,!1)}),this.eventManager.addEventListener(t,"mousemove",t=>{as(ad,this)&&!this.isTextSelectionAllowed(t.target)&&(this.settings.fragmentSelection&&(0,eG.clearTextSelection)(n),t.preventDefault())}),this.eventManager.addEventListener(r,"keyup",t=>{i.isInProgress()&&!t.shiftKey&&i.finish()}),this.eventManager.addEventListener(r,"mouseup",n=>{i.isInProgress()&&(0,eq.isLeftClick)(n)&&i.finish(),al(ap,this,!1);let r=(0,eG.isOutsideInput)(e.activeElement);(0,eG.isInput)(e.activeElement)&&!r||!r&&(i.isSelected()||i.isSelectedByAnyHeader()||t.contains(n.target)||(0,eq.isRightClick)(n))||this.hot.unlisten()}),this.eventManager.addEventListener(r,"contextmenu",t=>{i.isInProgress()&&(0,eq.isRightClick)(t)&&(i.finish(),al(ap,this,!1))}),this.eventManager.addEventListener(r,"touchend",()=>{i.isInProgress()&&i.finish(),al(ap,this,!1)}),this.eventManager.addEventListener(r,"mousedown",i=>{let n=i.target,o=i.x||i.clientX,a=i.y||i.clientY,s=i.target;if(as(ap,this)||!t||!this.hot.view)return;let{holder:l}=this._wt.wtTable;if(s===l){let t=(0,eG.getScrollbarWidth)(e);if(e.elementFromPoint(o+t,a)!==l||e.elementFromPoint(o,a+t)!==l)return}else for(;s!==r;){if(null===s){if(i.isTargetWebComponent)break;return}if(s===t)return;s=s.parentNode}("function"==typeof this.settings.outsideClickDeselects?this.settings.outsideClickDeselects(n):this.settings.outsideClickDeselects)?this.hot.deselectCell():this.hot.destroyEditor(!1,!1)});let o=(0,eG.getParentWindow)(n);for(;null!==o;)this.eventManager.addEventListener(o.document.documentElement,"click",()=>{this.hot.unlisten()}),o=(0,eG.getParentWindow)(o);this.eventManager.addEventListener(as(af,this),"selectstart",t=>{this.settings.fragmentSelection||(0,eG.isInput)(t.target)||t.preventDefault()})}translateFromRenderableToVisualCoords(t){let{row:e,col:i}=t;return this.hot._createCellCoords(...this.translateFromRenderableToVisualIndex(e,i))}translateFromRenderableToVisualIndex(t,e){let i=t>=0?this.hot.rowIndexMapper.getVisualFromRenderableIndex(t):t,n=e>=0?this.hot.columnIndexMapper.getVisualFromRenderableIndex(e):e;return null===i&&(i=t),null===n&&(n=e),[i,n]}countRenderableIndexes(t,e){let i=Math.min(t.getNotTrimmedIndexesLength(),e),n=t.getNearestNotHiddenIndex(i-1,-1);return null===n?0:t.getRenderableFromVisualIndex(n)+1}countRenderableColumns(){return this.countRenderableIndexes(this.hot.columnIndexMapper,this.settings.maxCols)}countRenderableRows(){return this.countRenderableIndexes(this.hot.rowIndexMapper,this.settings.maxRows)}countNotHiddenRowIndexes(t,e){return this.countNotHiddenIndexes(t,e,this.hot.rowIndexMapper,this.countRenderableRows())}countNotHiddenColumnIndexes(t,e){return this.countNotHiddenIndexes(t,e,this.hot.columnIndexMapper,this.countRenderableColumns())}countNotHiddenIndexes(t,e,i,n){if(isNaN(t)||t<0)return 0;let r=i.getNearestNotHiddenIndex(t,e),o=i.getRenderableFromVisualIndex(r);if(!Number.isInteger(o))return 0;let a=0;return e<0?a=o+1:e>0&&(a=n-o),a}countNotHiddenFixedColumnsStart(){let t=this.hot.countCols(),e=Math.min(parseInt(this.settings.fixedColumnsStart,10),t)-1;return this.countNotHiddenColumnIndexes(e,-1)}countNotHiddenFixedRowsTop(){let t=this.hot.countRows(),e=Math.min(parseInt(this.settings.fixedRowsTop,10),t)-1;return this.countNotHiddenRowIndexes(e,-1)}countNotHiddenFixedRowsBottom(){let t=Math.max(this.hot.countRows()-parseInt(this.settings.fixedRowsBottom,10),0);return this.countNotHiddenRowIndexes(t,1)}countRenderableColumnsInRange(t,e){let i=0;for(let n=t;n<=e;n++)null!==this.hot.columnIndexMapper.getRenderableFromVisualIndex(n)&&(i+=1);return i}countRenderableRowsInRange(t,e){let i=0;for(let n=t;n<=e;n++)null!==this.hot.rowIndexMapper.getRenderableFromVisualIndex(n)&&(i+=1);return i}isMainTableNotFullyCoveredByOverlays(){let t=this.countNotHiddenFixedRowsTop()+this.countNotHiddenFixedRowsBottom(),e=this.countNotHiddenFixedColumnsStart();return this.hot.countRenderedRows()>t&&this.hot.countRenderedCols()>e}initializeWalkontable(){let t={ariaTags:this.settings.ariaTags,rtlMode:this.hot.isRtl(),externalRowCalculator:this.hot.getPlugin("autoRowSize")&&this.hot.getPlugin("autoRowSize").isEnabled(),table:as(af,this),isDataViewInstance:()=>an(this.hot),preventOverflow:()=>this.settings.preventOverflow,preventWheel:()=>this.settings.preventWheel,stretchH:()=>this.settings.stretchH,data:(t,e)=>this.hot.getDataAtCell(...this.translateFromRenderableToVisualIndex(t,e)),totalRows:()=>this.countRenderableRows(),totalColumns:()=>this.countRenderableColumns(),fixedColumnsStart:()=>this.countNotHiddenFixedColumnsStart(),fixedRowsTop:()=>this.countNotHiddenFixedRowsTop(),fixedRowsBottom:()=>this.countNotHiddenFixedRowsBottom(),shouldRenderInlineStartOverlay:()=>this.settings.fixedColumnsStart>0||t.rowHeaders().length>0,shouldRenderTopOverlay:()=>this.settings.fixedRowsTop>0||t.columnHeaders().length>0,shouldRenderBottomOverlay:()=>this.settings.fixedRowsBottom>0,minSpareRows:()=>this.settings.minSpareRows,renderAllRows:this.settings.renderAllRows,renderAllColumns:this.settings.renderAllColumns,rowHeaders:()=>{let t=[];return this.hot.hasRowHeaders()&&t.push((t,e)=>{let i=t>=0?this.hot.rowIndexMapper.getVisualFromRenderableIndex(t):t;this.appendRowHeader(i,e)}),this.hot.runHooks("afterGetRowHeaderRenderers",t),al(ac,this,t.length),this.hot.getSettings().ariaTags&&ah(ay,this,av).call(this)===this.hot.countCols()&&ah(ay,this,aw).call(this,as(ac,this)),t},columnHeaders:()=>{let t=[];return this.hot.hasColHeaders()&&t.push((t,e)=>{let i=t>=0?this.hot.columnIndexMapper.getVisualFromRenderableIndex(t):t;this.appendColHeader(i,e)}),this.hot.runHooks("afterGetColumnHeaderRenderers",t),al(au,this,t.length),t},columnWidth:t=>{let e=this.hot.columnIndexMapper.getVisualFromRenderableIndex(t);return this.hot.getColWidth(null===e?t:e)},rowHeight:t=>{let e=this.hot.rowIndexMapper.getVisualFromRenderableIndex(t);return this.hot.getRowHeight(null===e?t:e)},rowHeightByOverlayName:(t,e)=>{let i=this.hot.rowIndexMapper.getVisualFromRenderableIndex(t),n=null===i?t:i;return this.hot.runHooks("modifyRowHeightByOverlayName",this.hot.getRowHeight(n),n,e)},cellRenderer:(t,e,i)=>{let[n,r]=this.translateFromRenderableToVisualIndex(t,e),o=this.hot.runHooks("modifyGetCellCoords",n,r),a=n,s=r;Array.isArray(o)&&([a,s]=o);let l=this.hot.getCellMeta(a,s),h=this.hot.colToProp(s),u=this.hot.getDataAtRowProp(a,h);this.hot.hasHook("beforeValueRender")&&(u=this.hot.runHooks("beforeValueRender",u,l)),this.hot.runHooks("beforeRenderer",i,n,r,h,u,l),this.hot.getCellRenderer(l)(this.hot,i,n,r,h,u,l),this.hot.runHooks("afterRenderer",i,n,r,h,u,l)},selections:this.hot.selection.highlight,hideBorderOnMouseDownOver:()=>this.settings.fragmentSelection,onWindowResize:()=>{this.hot&&!this.hot.isDestroyed&&this.hot.refreshDimensions()},onContainerElementResize:()=>{this.hot&&!this.hot.isDestroyed&&(0,eG.isVisible)(this.hot.rootElement)&&this.hot.refreshDimensions()},onCellMouseDown:(t,e,i,n)=>{let r=this.translateFromRenderableToVisualCoords(e),o={row:!1,column:!1,cell:!1};this.hot.listen(),this.activeWt=n,al(ap,this,!0),this.hot.runHooks("beforeOnCellMouseDown",t,r,i,o),(0,eq.isImmediatePropagationStopped)(t)||(at(t,{coords:r,selection:this.hot.selection,controller:o,cellCoordsFactory:(t,e)=>this.hot._createCellCoords(t,e)}),this.hot.runHooks("afterOnCellMouseDown",t,r,i),this.activeWt=this._wt)},onCellContextMenu:(t,e,i,n)=>{let r=this.translateFromRenderableToVisualCoords(e);this.activeWt=n,al(ap,this,!1),this.hot.selection.isInProgress()&&this.hot.selection.finish(),this.hot.runHooks("beforeOnCellContextMenu",t,r,i),(0,eq.isImmediatePropagationStopped)(t)||(this.hot.runHooks("afterOnCellContextMenu",t,r,i),this.activeWt=this._wt)},onCellMouseOut:(t,e,i,n)=>{let r=this.translateFromRenderableToVisualCoords(e);this.activeWt=n,this.hot.runHooks("beforeOnCellMouseOut",t,r,i),(0,eq.isImmediatePropagationStopped)(t)||(this.hot.runHooks("afterOnCellMouseOut",t,r,i),this.activeWt=this._wt)},onCellMouseOver:(t,e,i,n)=>{let r=this.translateFromRenderableToVisualCoords(e),o={row:!1,column:!1,cell:!1};this.activeWt=n,this.hot.runHooks("beforeOnCellMouseOver",t,r,i,o),(0,eq.isImmediatePropagationStopped)(t)||(as(ap,this)&&at(t,{coords:r,selection:this.hot.selection,controller:o,cellCoordsFactory:(t,e)=>this.hot._createCellCoords(t,e)}),this.hot.runHooks("afterOnCellMouseOver",t,r,i),this.activeWt=this._wt)},onCellMouseUp:(t,e,i,n)=>{let r=this.translateFromRenderableToVisualCoords(e);this.activeWt=n,this.hot.runHooks("beforeOnCellMouseUp",t,r,i),(0,eq.isImmediatePropagationStopped)(t)||this.hot.isDestroyed||(this.hot.runHooks("afterOnCellMouseUp",t,r,i),this.activeWt=this._wt)},onCellCornerMouseDown:t=>{t.preventDefault(),this.hot.runHooks("afterOnCellCornerMouseDown",t)},onCellCornerDblClick:t=>{t.preventDefault(),this.hot.runHooks("afterOnCellCornerDblClick",t)},beforeDraw:(t,e)=>this.beforeRender(t,e),onDraw:t=>this.afterRender(t),onBeforeViewportScrollVertically:t=>{let e=this.hot.rowIndexMapper,i=t<0,n=t;return i||null!==(n=e.getVisualFromRenderableIndex(t))?(n=this.hot.runHooks("beforeViewportScrollVertically",n),this.hot.runHooks("beforeViewportScroll"),i)?n:e.getRenderableFromVisualIndex(n):t},onBeforeViewportScrollHorizontally:t=>{let e=this.hot.columnIndexMapper,i=t<0,n=t;return i||null!==(n=e.getVisualFromRenderableIndex(t))?(n=this.hot.runHooks("beforeViewportScrollHorizontally",n),this.hot.runHooks("beforeViewportScroll"),i)?n:e.getRenderableFromVisualIndex(n):t},onScrollVertically:()=>{this.hot.runHooks("afterScrollVertically"),this.hot.runHooks("afterScroll")},onScrollHorizontally:()=>{this.hot.runHooks("afterScrollHorizontally"),this.hot.runHooks("afterScroll")},onBeforeRemoveCellClassNames:()=>this.hot.runHooks("beforeRemoveCellClassNames"),onBeforeHighlightingRowHeader:(t,e,i)=>{let n=this.hot.rowIndexMapper,r=t<0,o=t;r||(o=n.getVisualFromRenderableIndex(t));let a=this.hot.runHooks("beforeHighlightingRowHeader",o,e,i);return r?a:n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(a,1))},onBeforeHighlightingColumnHeader:(t,e,i)=>{let n=this.hot.columnIndexMapper,r=t<0,o=t;r||(o=n.getVisualFromRenderableIndex(t));let a=this.hot.runHooks("beforeHighlightingColumnHeader",o,e,i);return r?a:n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(a,1))},onAfterDrawSelection:(t,e,i)=>{let n;let[r,o]=this.translateFromRenderableToVisualIndex(t,e),a=this.hot.selection.getSelectedRange();if(a.size()>0){let t=a.peekByIndex(null!=i?i:0);n=[t.from.row,t.from.col,t.to.row,t.to.col]}return this.hot.runHooks("afterDrawSelection",r,o,n,i)},onBeforeDrawBorders:(t,e)=>{let[i,n,r,o]=t,a=[this.hot.rowIndexMapper.getVisualFromRenderableIndex(i),this.hot.columnIndexMapper.getVisualFromRenderableIndex(n),this.hot.rowIndexMapper.getVisualFromRenderableIndex(r),this.hot.columnIndexMapper.getVisualFromRenderableIndex(o)];return this.hot.runHooks("beforeDrawBorders",a,e)},onBeforeTouchScroll:()=>this.hot.runHooks("beforeTouchScroll"),onAfterMomentumScroll:()=>this.hot.runHooks("afterMomentumScroll"),onBeforeStretchingColumnWidth:(t,e)=>{let i=this.hot.columnIndexMapper.getVisualFromRenderableIndex(e);return this.hot.runHooks("beforeStretchingColumnWidth",t,i)},onModifyRowHeaderWidth:t=>this.hot.runHooks("modifyRowHeaderWidth",t),onModifyGetCellCoords:(t,e,i)=>{let n=this.hot.rowIndexMapper,r=this.hot.columnIndexMapper,o=e>=0?r.getVisualFromRenderableIndex(e):e,a=t>=0?n.getVisualFromRenderableIndex(t):t,s=this.hot.runHooks("modifyGetCellCoords",a,o,i);if(Array.isArray(s)){let[t,e,i,o]=s;return[t>=0?n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(t,1)):t,e>=0?r.getRenderableFromVisualIndex(r.getNearestNotHiddenIndex(e,1)):e,i>=0?n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(i,-1)):i,o>=0?r.getRenderableFromVisualIndex(r.getNearestNotHiddenIndex(o,-1)):o]}},viewportRowCalculatorOverride:t=>{let e=this.settings.viewportRowRenderingOffset;if("auto"===e&&this.settings.fixedRowsTop&&(e=10),e>0||"auto"===e){let i=this.countRenderableRows(),n=t.startRow,r=t.endRow;if("number"==typeof e)t.startRow=Math.max(n-e,0),t.endRow=Math.min(r+e,i-1);else if("auto"===e){let e=Math.ceil(r/i*12);t.startRow=Math.max(n-e,0),t.endRow=Math.min(r+e,i-1)}}this.hot.runHooks("afterViewportRowCalculatorOverride",t)},viewportColumnCalculatorOverride:t=>{let e=this.settings.viewportColumnRenderingOffset;if("auto"===e&&this.settings.fixedColumnsStart&&(e=10),e>0||"auto"===e){let i=this.countRenderableColumns(),n=t.startColumn,r=t.endColumn;if("number"==typeof e&&(t.startColumn=Math.max(n-e,0),t.endColumn=Math.min(r+e,i-1)),"auto"===e){let e=Math.ceil(r/i*6);t.startColumn=Math.max(n-e,0),t.endColumn=Math.min(r+e,i-1)}}this.hot.runHooks("afterViewportColumnCalculatorOverride",t)},rowHeaderWidth:()=>this.settings.rowHeaderWidth,columnHeaderHeight:()=>{let t=this.hot.runHooks("modifyColumnHeaderHeight");return this.settings.columnHeaderHeight||t}};this.hot.runHooks("beforeInitWalkontable",t),this._wt=new o8(t),this.activeWt=this._wt;let e=this._wt.wtTable.spreader,{width:i,height:n}=this.hot.rootElement.getBoundingClientRect();this.setLastSize(i,n),this.eventManager.addEventListener(e,"mousedown",t=>{t.target===e&&3===t.which&&t.stopPropagation()}),this.eventManager.addEventListener(e,"contextmenu",t=>{t.target===e&&3===t.which&&t.stopPropagation()}),this.eventManager.addEventListener(this.hot.rootDocument.documentElement,"click",()=>{this.settings.observeDOMVisibility&&this._wt.drawInterrupted&&(this.hot.forceFullRender=!0,this.render())})}isTextSelectionAllowed(t){if((0,eG.isInput)(t))return!0;let e=(0,eG.isChildOf)(t,this._wt.wtTable.spreader);return!!(!0===this.settings.fragmentSelection&&e||"cell"===this.settings.fragmentSelection&&this.isSelectedOnlyCell()&&e||!this.settings.fragmentSelection&&this.isCellEdited()&&this.isSelectedOnlyCell())}isMouseDown(){return as(ap,this)}isSelectedOnlyCell(){var t,e;return null!==(t=null===(e=this.hot.getSelectedRangeLast())||void 0===e?void 0:e.isSingleCell())&&void 0!==t&&t}isCellEdited(){let t=this.hot.getActiveEditor();return t&&t.isOpened()}beforeRender(t,e){t&&this.hot.runHooks("beforeViewRender",this.hot.forceFullRender,e)}afterRender(t){t&&this.hot.runHooks("afterViewRender",this.hot.forceFullRender)}appendRowHeader(t,e){if(e.firstChild){let i=e.firstChild;if(!(0,eG.hasClass)(i,"relative")){(0,eG.empty)(e),this.appendRowHeader(t,e);return}this.updateCellHeader(i.querySelector(".rowHeader"),t,this.hot.getRowHeader)}else{let{rootDocument:i,getRowHeader:n}=this.hot,r=i.createElement("div"),o=i.createElement("span");r.className="relative",o.className="rowHeader",this.updateCellHeader(o,t,n),r.appendChild(o),e.appendChild(r)}this.hot.runHooks("afterGetRowHeader",t,e)}appendColHeader(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hot.getColHeader,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=()=>{let e=t>=0?this.hot.getColumnMeta(t).headerClassName:null;return e?e.split(" "):[]};if(e.firstChild){let o=e.firstChild;(0,eG.hasClass)(o,"relative")?(this.updateCellHeader(o.querySelector(".colHeader"),t,i,n),o.className="",(0,eG.addClass)(o,["relative",...r()])):((0,eG.empty)(e),this.appendColHeader(t,e,i,n))}else{let{rootDocument:o}=this.hot,a=o.createElement("div"),s=o.createElement("span"),l=r();a.classList.add("relative",...l),s.className="colHeader",this.settings.ariaTags&&((0,eG.setAttribute)(a,...(0,nZ.A11Y_PRESENTATION)()),(0,eG.setAttribute)(s,...(0,nZ.A11Y_PRESENTATION)())),this.updateCellHeader(s,t,i,n),a.appendChild(s),e.appendChild(a)}this.hot.runHooks("afterGetColHeader",t,e,n)}updateCellHeader(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e,o=this._wt.wtOverlays.getParentOverlay(t)||this._wt;t.parentNode&&((0,eG.hasClass)(t,"colHeader")?r=o.wtTable.columnFilter.sourceToRendered(e):(0,eG.hasClass)(t,"rowHeader")&&(r=o.wtTable.rowFilter.sourceToRendered(e))),r>-1?(0,eG.fastInnerHTML)(t,i(e,n)):((0,eG.fastInnerText)(t,String.fromCharCode(160)),(0,eG.addClass)(t,"cornerHeader"))}maximumVisibleElementWidth(t){let e=this._wt.wtViewport.getWorkspaceWidth()-t;return e>0?e:0}maximumVisibleElementHeight(t){let e=this._wt.wtViewport.getWorkspaceHeight()-t;return e>0?e:0}setLastSize(t,e){al(ag,this,t),al(am,this,e)}getLastSize(){return{width:as(ag,this),height:as(am,this)}}getFirstRenderedVisibleRow(){return this._wt.wtViewport.rowsRenderCalculator?this.hot.rowIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getFirstRenderedRow(),1):null}getLastRenderedVisibleRow(){return this._wt.wtViewport.rowsRenderCalculator?this.hot.rowIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getLastRenderedRow(),-1):null}getFirstRenderedVisibleColumn(){return this._wt.wtViewport.columnsRenderCalculator?this.hot.columnIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getFirstRenderedColumn(),1):null}getLastRenderedVisibleColumn(){return this._wt.wtViewport.columnsRenderCalculator?this.hot.columnIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getLastRenderedColumn(),-1):null}getFirstFullyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstVisibleRow())}getLastFullyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastVisibleRow())}getFirstFullyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstVisibleColumn())}getLastFullyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastVisibleColumn())}getFirstPartiallyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstPartiallyVisibleRow())}getLastPartiallyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastPartiallyVisibleRow())}getFirstPartiallyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstPartiallyVisibleColumn())}getLastPartiallyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastPartiallyVisibleColumn())}getColumnHeadersCount(){return as(au,this)}getRowHeadersCount(){return as(ac,this)}getViewportWidth(){return this._wt.wtViewport.getViewportWidth()}getWorkspaceWidth(){return this._wt.wtViewport.getWorkspaceWidth()}getViewportHeight(){return this._wt.wtViewport.getViewportHeight()}getWorkspaceHeight(){return this._wt.wtViewport.getWorkspaceHeight()}getElementOverlayName(t){var e;return(null!==(e=this._wt.wtOverlays.getParentOverlay(t))&&void 0!==e?e:this._wt).wtTable.name}getOverlayByName(t){return this._wt.getOverlayByName(t)}isVisible(){return this._wt.wtTable.isVisible()}destroy(){this._wt.destroy(),this.eventManager.destroy()}};t4("1C6fS"),t4("1hIp0");var e6=t4("hwT6B"),ax={};n(ax,"spreadsheetColumnLabel",()=>a_),n(ax,"spreadsheetColumnIndex",()=>aM),n(ax,"createSpreadsheetData",()=>aT),n(ax,"createSpreadsheetObjectData",()=>aI),n(ax,"createEmptySpreadsheetData",()=>aR),n(ax,"dataRowToChangesArray",()=>aE),n(ax,"countFirstRowKeys",()=>aA),n(ax,"isArrayOfArrays",()=>ak),n(ax,"isArrayOfObjects",()=>aD),t4("1hIp0");var e6=t4("hwT6B");const aS="ABCDEFGHIJKLMNOPQRSTUVWXYZ",aC=aS.length;function a_(t){let e,i=t+1,n="";for(;i>0;)n=String.fromCharCode(65+(e=(i-1)%aC))+n,i=parseInt((i-e)/aC,10);return n}function aM(t){let e=0;if(t)for(let i=0,n=t.length-1;i<t.length;i+=1,n-=1)e+=aC**n*(aS.indexOf(t[i])+1);return e-1}function aT(){let t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=[];for(t=0;t<i;t++){let i=[];for(e=0;e<n;e++)i.push(a_(e)+(t+1));r.push(i)}return r}function aI(){let t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=[];for(t=0;t<i;t++){let i={};for(e=0;e<n;e++)i[`prop${e}`]=a_(e)+(t+1);r.push(i)}return r}function aR(t,e){let i;let n=[];for(let r=0;r<t;r++){i=[];for(let t=0;t<e;t++)i.push("");n.push(i)}return n}function aE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t,n=[];return Array.isArray(t)&&Array.isArray(t[0])||(i=[t]),i.forEach((t,i)=>{Array.isArray(t)?t.forEach((t,r)=>{n.push([i+e,r,t])}):Object.keys(t).forEach(r=>{n.push([i+e,r,t[r]])})}),n}function aA(t){let e=0;return Array.isArray(t)&&(t[0]&&Array.isArray(t[0])?e=t[0].length:t[0]&&(0,e6.isObject)(t[0])&&(e=(0,e6.deepObjectSize)(t[0]))),e}function ak(t){return!!(Array.isArray(t)&&t.length&&t.every(t=>Array.isArray(t)))}function aD(t){return!!(Array.isArray(t)&&t.length&&t.every(t=>"object"==typeof t&&!Array.isArray(t)&&null!==t))}var iy=t4("ceXML"),i0=t4("guO5N"),eY=t4("f3221");function aO(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var aP=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];aO(this,"hot",void 0),aO(this,"data",void 0),aO(this,"dataType","array"),aO(this,"colToProp",()=>{}),aO(this,"propToCol",()=>{}),this.hot=t,this.data=e}modifyRowData(t){let e;return this.hot.hasHook("modifyRowData")&&(e=this.hot.runHooks("modifyRowData",t)),void 0===e||Number.isInteger(e)?this.data[t]:e}getData(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.data&&0!==this.data.length?this.getByRange(null,null,t):this.data}setData(t){this.data=t}getAtColumn(t){let e=[];return(0,iy.arrayEach)(this.data,(i,n)=>{let r=this.getAtCell(n,t);e.push(r)}),e}getAtRow(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=void 0===e&&void 0===i,{dataDotNotation:o}=this.hot.getSettings(),a=null,s=null;if(Array.isArray(a=this.modifyRowData(t)))s=[],r?a.forEach((e,i)=>{s[i]=this.getAtPhysicalCell(t,i,a)}):(0,i0.rangeEach)(e,i,i=>{s[i-e]=this.getAtPhysicalCell(t,i,a)});else if((0,e6.isObject)(a)||(0,eY.isFunction)(a)){if(s=n?[]:{},!r||n){let r=this.countFirstRowKeys()-1;(0,i0.rangeEach)(0,r,l=>{let h=this.colToProp(l);if(l>=(e||0)&&l<=(i||r)&&!Number.isInteger(h)){let e=this.getAtPhysicalCell(t,h,a);n?s.push(e):o?(0,e6.setProperty)(s,h,e):s[h]=e}})}else(0,e6.objectEach)(a,(e,i)=>{let n=this.getAtPhysicalCell(t,i,a);o?(0,e6.setProperty)(s,i,n):s[i]=n})}return s}setAtCell(t,e,i){if(!(t>=this.countRows()||e>=this.countFirstRowKeys())){if(this.hot.hasHook("modifySourceData")){let n=(0,e6.createObjectPropListener)(i);this.hot.runHooks("modifySourceData",t,e,n,"set"),n.isTouched()&&(i=n.value)}Number.isInteger(e)?this.data[t][e]=i:(0,e6.setProperty)(this.data[t],e,i)}}getAtPhysicalCell(t,e,i){let n=null;if(i){if("string"==typeof e){let{dataDotNotation:t}=this.hot.getSettings();n=t?(0,e6.getProperty)(i,e):i[e]}else n="function"==typeof e?e(i):i[e]}if(this.hot.hasHook("modifySourceData")){let i=(0,e6.createObjectPropListener)(n);this.hot.runHooks("modifySourceData",t,e,i,"get"),i.isTouched()&&(n=i.value)}return n}getAtCell(t,e){let i=this.modifyRowData(t);return this.getAtPhysicalCell(t,this.colToProp(e),i)}getByRange(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1,r=null,o=null,a=null,s=null;null===t||null===e?(n=!0,r=0,a=this.countRows()-1):(r=Math.min(t.row,e.row),o=Math.min(t.col,e.col),a=Math.max(t.row,e.row),s=Math.max(t.col,e.col));let l=[];return(0,i0.rangeEach)(r,a,t=>{l.push(n?this.getAtRow(t,void 0,void 0,i):this.getAtRow(t,o,s,i))}),l}countRows(){if(this.hot.hasHook("modifySourceLength")){let t=this.hot.runHooks("modifySourceLength");if(Number.isInteger(t))return t}return this.data.length}countFirstRowKeys(){return aA(this.data)}destroy(){this.data=null,this.hot=null}};t4("1C6fS"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var iy=t4("ceXML");t4("1C6fS"),t4("1hIp0"),t4("1C6fS"),t4("1hIp0");var i0=t4("guO5N"),e6=t4("hwT6B"),eY=t4("f3221");t4("1hIp0");var e6=t4("hwT6B"),eY=t4("f3221");const aL={_localHooks:Object.create(null),addLocalHook(t,e){return this._localHooks[t]||(this._localHooks[t]=[]),this._localHooks[t].push(e),this},runLocalHooks(t,e,i,n,r,o,a){if(this._localHooks[t]){let s=this._localHooks[t].length;for(let l=0;l<s;l++)(0,eY.fastCall)(this._localHooks[t][l],this,e,i,n,r,o,a)}},clearLocalHooks(){return this._localHooks={},this}};function aN(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}(0,e6.defineGetter)(aL,"MIXIN_NAME","localHooks",{writable:!1,enumerable:!1});class aH{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;aN(this,"indexedValues",[]),aN(this,"initValueOrFn",void 0),this.initValueOrFn=t}getValues(){return this.indexedValues}getValueAtIndex(t){let e=this.indexedValues;if(t<e.length)return e[t]}setValues(t){this.indexedValues=t.slice(),this.runLocalHooks("change")}setValueAtIndex(t,e){return t<this.indexedValues.length&&(this.indexedValues[t]=e,this.runLocalHooks("change"),!0)}clear(){this.setDefaultValues()}getLength(){return this.getValues().length}setDefaultValues(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.indexedValues.length;this.indexedValues.length=0,(0,eY.isFunction)(this.initValueOrFn)?(0,i0.rangeEach)(t-1,t=>this.indexedValues.push(this.initValueOrFn(t))):(0,i0.rangeEach)(t-1,()=>this.indexedValues.push(this.initValueOrFn)),this.runLocalHooks("change")}init(t){return this.setDefaultValues(t),this.runLocalHooks("init"),this}insert(){this.runLocalHooks("change")}remove(){this.runLocalHooks("change")}destroy(){this.clearLocalHooks(),this.indexedValues=null,this.initValueOrFn=null}}(0,e6.mixin)(aH,aL);var eY=t4("f3221"),iy=t4("ceXML");function aV(t,e,i,n){let r=i.length?i[0]:void 0;return[...t.slice(0,r),...i.map((t,e)=>(0,eY.isFunction)(n)?n(t,e):n),...void 0===r?[]:t.slice(r)]}function aB(t,e){return(0,iy.arrayFilter)(t,(t,i)=>!1===e.includes(i))}class aF extends aH{insert(t,e){this.indexedValues=aV(this.indexedValues,t,e,this.initValueOrFn),super.insert(t,e)}remove(t){this.indexedValues=aB(this.indexedValues,t),super.remove(t)}}var iy=t4("ceXML");class aW extends aF{constructor(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super(t)}getHiddenIndexes(){return(0,iy.arrayReduce)(this.getValues(),(t,e,i)=>(e&&t.push(i),t),[])}}function az(t,e,i){return[...t.slice(0,e),...i,...t.slice(e)]}function aj(t,e){return(0,iy.arrayFilter)(t,t=>!1===e.includes(t))}t4("1C6fS");var iy=(t4("ceXML"),t4("ceXML"));function aU(t,e){return(0,iy.arrayMap)(t,t=>t-e.filter(e=>e<t).length)}function aG(t,e){let i=e[0],n=e.length;return(0,iy.arrayMap)(t,t=>t>=i?t+n:t)}var eY=t4("f3221");class aY extends aH{constructor(){var t,e,i;super(...arguments),e=[],(t="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t="orderOfIndexes","string"))?i:i+"")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e}getValues(){return this.orderOfIndexes.map(t=>this.indexedValues[t])}setValues(t){this.orderOfIndexes=[...Array(t.length).keys()],super.setValues(t)}setValueAtIndex(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.orderOfIndexes.length;return t<this.indexedValues.length&&(this.indexedValues[t]=e,!1===this.orderOfIndexes.includes(t)&&this.orderOfIndexes.splice(i,0,t),this.runLocalHooks("change"),!0)}clearValue(t){this.orderOfIndexes=aj(this.orderOfIndexes,[t]),(0,eY.isFunction)(this.initValueOrFn)?super.setValueAtIndex(t,this.initValueOrFn(t)):super.setValueAtIndex(t,this.initValueOrFn)}getLength(){return this.orderOfIndexes.length}setDefaultValues(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.indexedValues.length;this.orderOfIndexes.length=0,super.setDefaultValues(t)}insert(t,e){this.indexedValues=aV(this.indexedValues,t,e,this.initValueOrFn),this.orderOfIndexes=aG(this.orderOfIndexes,e),super.insert(t,e)}remove(t){this.indexedValues=aB(this.indexedValues,t),this.orderOfIndexes=aj(this.orderOfIndexes,t),this.orderOfIndexes=aU(this.orderOfIndexes,t),super.remove(t)}getEntries(){return this.orderOfIndexes.map(t=>[t,this.getValueAtIndex(t)])}}t4("1hIp0");var iy=t4("ceXML");class aX extends aF{constructor(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super(t)}getTrimmedIndexes(){return(0,iy.arrayReduce)(this.getValues(),(t,e,i)=>(e&&t.push(i),t),[])}}class a$ extends aH{constructor(){super(t=>t)}insert(t,e){let i=aG(this.indexedValues,e);this.indexedValues=az(i,t,e),super.insert(t,e)}remove(t){let e=aj(this.indexedValues,t);this.indexedValues=aU(e,t),super.remove(t)}}const aZ=new Map([["hiding",aW],["index",aH],["linkedPhysicalIndexToValue",aY],["physicalIndexToValue",aF],["trimming",aX]]);t4("1C6fS"),t4("1hIp0"),t4("1C6fS");var eX=t4("gnaTS"),e6=t4("hwT6B");let aq=0;class aK{constructor(){var t,e,i;t="collection",e=new Map,(t="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e}register(t,e){!1===this.collection.has(t)&&(this.collection.set(t,e),e.addLocalHook("change",()=>this.runLocalHooks("change",e)),aq+=1)}unregister(t){let e=this.collection.get(t);(0,eX.isDefined)(e)&&(e.destroy(),this.collection.delete(t),this.runLocalHooks("change",e),aq-=1)}unregisterAll(){this.collection.forEach((t,e)=>this.unregister(e)),this.collection.clear()}get(t){return(0,eX.isUndefined)(t)?Array.from(this.collection.values()):this.collection.get(t)}getLength(){return this.collection.size}removeFromEvery(t){this.collection.forEach(e=>{e.remove(t)})}insertToEvery(t,e){this.collection.forEach(i=>{i.insert(t,e)})}initEvery(t){this.collection.forEach(e=>{e.init(t)})}}(0,e6.mixin)(aK,aL);var iy=t4("ceXML"),eX=t4("gnaTS");function aQ(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class aJ extends aK{constructor(t,e){super(),aQ(this,"mergedValuesCache",[]),aQ(this,"aggregationFunction",void 0),aQ(this,"fallbackValue",void 0),this.aggregationFunction=t,this.fallbackValue=e}getMergedValues(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(!0===t)return this.mergedValuesCache;if(0===this.getLength())return[];let e=(0,iy.arrayMap)(this.get(),t=>t.getValues()),i=[],n=(0,eX.isDefined)(e[0])&&e[0].length||0;for(let t=0;t<n;t+=1){let n=[];for(let i=0;i<this.getLength();i+=1)n.push(e[i][t]);i.push(n)}return(0,iy.arrayMap)(i,this.aggregationFunction)}getMergedValueAtIndex(t,e){let i=this.getMergedValues(e)[t];return(0,eX.isDefined)(i)?i:this.fallbackValue}updateCache(){this.mergedValuesCache=this.getMergedValues(!1)}}var e6=t4("hwT6B"),eX=t4("gnaTS");t4("1C6fS"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI"),t4("1C6fS");var e6=t4("hwT6B");function a0(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var a1=new WeakMap;class a2{constructor(){var t;t=[],function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,a1),a1.set(this,t)}subscribe(t){return this.addLocalHook("change",t),this._write(a1.get(a0(a1,this))),this}unsubscribe(){return this.runLocalHooks("unsubscribe"),this.clearLocalHooks(),this}_write(t){return t.length>0&&this.runLocalHooks("change",t),this}_writeInitialChanges(t){a1.set(a0(a1,this),t)}}function a5(t,e){let i=[],n=0,r=0;for(;n<t.length&&r<e.length;n++,r++)t[n]!==e[r]&&i.push({op:"replace",index:r,oldValue:t[n],newValue:e[r]});for(;n<e.length;n++)i.push({op:"insert",index:n,oldValue:void 0,newValue:e[n]});for(;r<t.length;r++)i.push({op:"remove",index:r,oldValue:t[r],newValue:void 0});return i}function a3(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function a4(t,e){return t.get(a8(t,e))}function a6(t,e,i){return t.set(a8(t,e),i),i}function a8(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(0,e6.mixin)(a2,aL),t4("1hIp0");var a9=new WeakMap,a7=new WeakMap,st=new WeakMap,se=new WeakMap,si=new WeakMap;class sn{constructor(){let{initialIndexValue:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a3(this,a9,new Set),a3(this,a7,[]),a3(this,st,[]),a3(this,se,!1),a3(this,si,!1),a6(si,this,null!=t&&t)}createObserver(){let t=new a2;return a4(a9,this).add(t),t.addLocalHook("unsubscribe",()=>{a4(a9,this).delete(t)}),t._writeInitialChanges(a5(a4(a7,this),a4(st,this))),t}emit(t){let e=a4(st,this);a4(se,this)&&a4(a7,this).length===t.length||(0===t.length?t=Array(e.length).fill(a4(si,this)):a6(a7,this,Array(t.length).fill(a4(si,this))),a4(se,this)||(a6(se,this,!0),e=a4(a7,this)));let i=a5(e,t);a4(a9,this).forEach(t=>t._write(i)),a6(st,this,t)}}function sr(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class so{constructor(){sr(this,"indexesSequence",new a$),sr(this,"trimmingMapsCollection",new aJ(t=>t.some(t=>!0===t),!1)),sr(this,"hidingMapsCollection",new aJ(t=>t.some(t=>!0===t),!1)),sr(this,"variousMapsCollection",new aK),sr(this,"hidingChangesObservable",new sn({initialIndexValue:!1})),sr(this,"notTrimmedIndexesCache",[]),sr(this,"notHiddenIndexesCache",[]),sr(this,"isBatched",!1),sr(this,"indexesSequenceChanged",!1),sr(this,"indexesChangeSource",void 0),sr(this,"trimmedIndexesChanged",!1),sr(this,"hiddenIndexesChanged",!1),sr(this,"renderablePhysicalIndexesCache",[]),sr(this,"fromPhysicalToVisualIndexesCache",new Map),sr(this,"fromVisualToRenderableIndexesCache",new Map),this.indexesSequence.addLocalHook("change",()=>{this.indexesSequenceChanged=!0,this.updateCache(),this.runLocalHooks("indexesSequenceChange",this.indexesChangeSource),this.runLocalHooks("change",this.indexesSequence,null)}),this.trimmingMapsCollection.addLocalHook("change",t=>{this.trimmedIndexesChanged=!0,this.updateCache(),this.runLocalHooks("change",t,this.trimmingMapsCollection)}),this.hidingMapsCollection.addLocalHook("change",t=>{this.hiddenIndexesChanged=!0,this.updateCache(),this.runLocalHooks("change",t,this.hidingMapsCollection)}),this.variousMapsCollection.addLocalHook("change",t=>{this.runLocalHooks("change",t,this.variousMapsCollection)})}suspendOperations(){this.isBatched=!0}resumeOperations(){this.isBatched=!1,this.updateCache()}createChangesObserver(t){if("hiding"!==t)throw Error(`Unsupported index map type "${t}".`);return this.hidingChangesObservable.createObserver()}createAndRegisterIndexMap(t,e,i){return this.registerMap(t,function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!aZ.has(t))throw Error(`The provided map type ("${t}") does not exist.`);return new(aZ.get(t))(e)}(e,i))}registerMap(t,e){if(this.trimmingMapsCollection.get(t)||this.hidingMapsCollection.get(t)||this.variousMapsCollection.get(t))throw Error(`Map with name "${t}" has been already registered.`);e instanceof aX?this.trimmingMapsCollection.register(t,e):e instanceof aW?this.hidingMapsCollection.register(t,e):this.variousMapsCollection.register(t,e);let i=this.getNumberOfIndexes();return i>0&&e.init(i),e}unregisterMap(t){this.trimmingMapsCollection.unregister(t),this.hidingMapsCollection.unregister(t),this.variousMapsCollection.unregister(t)}unregisterAll(){this.trimmingMapsCollection.unregisterAll(),this.hidingMapsCollection.unregisterAll(),this.variousMapsCollection.unregisterAll()}getPhysicalFromVisualIndex(t){let e=this.notTrimmedIndexesCache[t];return(0,eX.isDefined)(e)?e:null}getPhysicalFromRenderableIndex(t){let e=this.renderablePhysicalIndexesCache[t];return(0,eX.isDefined)(e)?e:null}getVisualFromPhysicalIndex(t){let e=this.fromPhysicalToVisualIndexesCache.get(t);return(0,eX.isDefined)(e)?e:null}getVisualFromRenderableIndex(t){return this.getVisualFromPhysicalIndex(this.getPhysicalFromRenderableIndex(t))}getRenderableFromVisualIndex(t){let e=this.fromVisualToRenderableIndexesCache.get(t);return(0,eX.isDefined)(e)?e:null}getNearestNotHiddenIndex(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===this.getPhysicalFromVisualIndex(t))return null;if(this.fromVisualToRenderableIndexesCache.has(t))return t;let n=Array.from(this.fromVisualToRenderableIndexesCache.keys()),r=-1;return -1===(r=e>0?n.findIndex(e=>e>t):n.reverse().findIndex(e=>e<t))?i?this.getNearestNotHiddenIndex(t,-e,!1):null:n[r]}initToLength(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNumberOfIndexes();this.notTrimmedIndexesCache=[...Array(t).keys()],this.notHiddenIndexesCache=[...Array(t).keys()],this.suspendOperations(),this.indexesChangeSource="init",this.indexesSequence.init(t),this.indexesChangeSource=void 0,this.trimmingMapsCollection.initEvery(t),this.resumeOperations(),this.suspendOperations(),this.hidingMapsCollection.initEvery(t),this.variousMapsCollection.initEvery(t),this.resumeOperations(),this.runLocalHooks("init")}fitToLength(t){let e=this.getNumberOfIndexes();if(t<e){let e=[...Array(this.getNumberOfIndexes()-t).keys()].map(e=>e+t);this.removeIndexes(e)}else this.insertIndexes(e,t-e)}getIndexesSequence(){return this.indexesSequence.getValues()}setIndexesSequence(t){void 0===this.indexesChangeSource&&(this.indexesChangeSource="update"),this.indexesSequence.setValues(t),"update"===this.indexesChangeSource&&(this.indexesChangeSource=void 0)}getNotTrimmedIndexes(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return!0===t?this.notTrimmedIndexesCache:this.getIndexesSequence().filter(t=>!1===this.isTrimmed(t))}getNotTrimmedIndexesLength(){return this.getNotTrimmedIndexes().length}getNotHiddenIndexes(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return!0===t?this.notHiddenIndexesCache:this.getIndexesSequence().filter(t=>!1===this.isHidden(t))}getNotHiddenIndexesLength(){return this.getNotHiddenIndexes().length}getRenderableIndexes(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return!0===t?this.renderablePhysicalIndexesCache:this.getNotTrimmedIndexes().filter(t=>!1===this.isHidden(t))}getRenderableIndexesLength(){return this.getRenderableIndexes().length}getNumberOfIndexes(){return this.getIndexesSequence().length}moveIndexes(t,e){"number"==typeof t&&(t=[t]);let i=(0,iy.arrayMap)(t,t=>this.getPhysicalFromVisualIndex(t)),n=this.getNotTrimmedIndexesLength(),r=t.length,o=aj(this.getIndexesSequence(),i),a=o.filter(t=>!1===this.isTrimmed(t)),s=o.indexOf(a[a.length-1])+1;if(e+r<n){let t=a[e];s=o.indexOf(t)}this.indexesChangeSource="move",this.setIndexesSequence(az(o,s,i)),this.indexesChangeSource=void 0}isTrimmed(t){return this.trimmingMapsCollection.getMergedValueAtIndex(t)}isHidden(t){return this.hidingMapsCollection.getMergedValueAtIndex(t)}insertIndexes(t,e){let i=this.getNotTrimmedIndexes()[t],n=(0,eX.isDefined)(i)?i:this.getNumberOfIndexes(),r=this.getIndexesSequence().includes(i)?this.getIndexesSequence().indexOf(i):this.getNumberOfIndexes(),o=(0,iy.arrayMap)(Array(e).fill(n),(t,e)=>t+e);this.suspendOperations(),this.indexesChangeSource="insert",this.indexesSequence.insert(r,o),this.indexesChangeSource=void 0,this.trimmingMapsCollection.insertToEvery(r,o),this.hidingMapsCollection.insertToEvery(r,o),this.variousMapsCollection.insertToEvery(r,o),this.resumeOperations()}removeIndexes(t){this.suspendOperations(),this.indexesChangeSource="remove",this.indexesSequence.remove(t),this.indexesChangeSource=void 0,this.trimmingMapsCollection.removeFromEvery(t),this.hidingMapsCollection.removeFromEvery(t),this.variousMapsCollection.removeFromEvery(t),this.resumeOperations()}updateCache(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.indexesSequenceChanged||this.trimmedIndexesChanged||this.hiddenIndexesChanged;(!0===t||!1===this.isBatched&&!0===e)&&(this.trimmingMapsCollection.updateCache(),this.hidingMapsCollection.updateCache(),this.notTrimmedIndexesCache=this.getNotTrimmedIndexes(!1),this.notHiddenIndexesCache=this.getNotHiddenIndexes(!1),this.renderablePhysicalIndexesCache=this.getRenderableIndexes(!1),this.cacheFromPhysicalToVisualIndexes(),this.cacheFromVisualToRenderableIndexes(),this.hiddenIndexesChanged&&this.hidingChangesObservable.emit(this.hidingMapsCollection.getMergedValues()),this.runLocalHooks("cacheUpdated",{indexesSequenceChanged:this.indexesSequenceChanged,trimmedIndexesChanged:this.trimmedIndexesChanged,hiddenIndexesChanged:this.hiddenIndexesChanged}),this.indexesSequenceChanged=!1,this.trimmedIndexesChanged=!1,this.hiddenIndexesChanged=!1)}cacheFromPhysicalToVisualIndexes(){let t=this.getNotTrimmedIndexesLength();this.fromPhysicalToVisualIndexesCache.clear();for(let e=0;e<t;e+=1){let t=this.getPhysicalFromVisualIndex(e);this.fromPhysicalToVisualIndexesCache.set(t,e)}}cacheFromVisualToRenderableIndexes(){let t=this.getRenderableIndexesLength();this.fromVisualToRenderableIndexesCache.clear();for(let e=0;e<t;e+=1){let t=this.getPhysicalFromRenderableIndex(e),i=this.getVisualFromPhysicalIndex(t);this.fromVisualToRenderableIndexesCache.set(i,e)}}}(0,e6.mixin)(so,aL);var sa=t4("10euP"),e6=t4("hwT6B"),iy=t4("ceXML"),eX=(t4("gnaTS"),t4("gnaTS")),e6=t4("hwT6B"),e8=t4("jlXkd"),nJ=t4("iCsRe");function ss(t){let e=/^([a-zA-Z]{2})-([a-zA-Z]{2})$/.exec(t);return e?`${e[1].toLowerCase()}-${e[2].toUpperCase()}`:t}function sl(t){(0,eX.isDefined)(t)&&(0,e8.error)((0,nJ.toSingleLine)`Language with code "${t}" was not found. You should register particular language\x20
    before using it. Read more about this issue at: https://docs.handsontable.com/i18n/missing-language-code.`)}var nr=(t4("lSZ9A"),t4("lSZ9A"));const{register:sh,getValues:su}=(0,nr.default)("phraseFormatters");sh("pluralize",function(t,e){return Array.isArray(t)&&Number.isInteger(e)?t[e]:t});/**
 * @preserve
 * Authors: Handsoncode
 * Last updated: Nov 15, 2017
 *
 * Description: Definition file for English - United States language-country.
 */var sc={};n(sc,"CONTEXT_MENU_ITEMS_NAMESPACE",()=>sd),n(sc,"CONTEXTMENU_ITEMS_NO_ITEMS",()=>sp),n(sc,"CONTEXTMENU_ITEMS_ROW_ABOVE",()=>sf),n(sc,"CONTEXTMENU_ITEMS_ROW_BELOW",()=>sg),n(sc,"CONTEXTMENU_ITEMS_INSERT_LEFT",()=>sm),n(sc,"CONTEXTMENU_ITEMS_INSERT_RIGHT",()=>sy),n(sc,"CONTEXTMENU_ITEMS_REMOVE_ROW",()=>sv),n(sc,"CONTEXTMENU_ITEMS_REMOVE_COLUMN",()=>sw),n(sc,"CONTEXTMENU_ITEMS_UNDO",()=>sb),n(sc,"CONTEXTMENU_ITEMS_REDO",()=>sx),n(sc,"CONTEXTMENU_ITEMS_READ_ONLY",()=>sS),n(sc,"CONTEXTMENU_ITEMS_CLEAR_COLUMN",()=>sC),n(sc,"CONTEXTMENU_ITEMS_COPY",()=>s_),n(sc,"CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_HEADERS",()=>sM),n(sc,"CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_GROUP_HEADERS",()=>sT),n(sc,"CONTEXTMENU_ITEMS_COPY_COLUMN_HEADERS_ONLY",()=>sI),n(sc,"CONTEXTMENU_ITEMS_CUT",()=>sR),n(sc,"CONTEXTMENU_ITEMS_FREEZE_COLUMN",()=>sE),n(sc,"CONTEXTMENU_ITEMS_UNFREEZE_COLUMN",()=>sA),n(sc,"CONTEXTMENU_ITEMS_MERGE_CELLS",()=>sk),n(sc,"CONTEXTMENU_ITEMS_UNMERGE_CELLS",()=>sD),n(sc,"CONTEXTMENU_ITEMS_ADD_COMMENT",()=>sO),n(sc,"CONTEXTMENU_ITEMS_EDIT_COMMENT",()=>sP),n(sc,"CONTEXTMENU_ITEMS_REMOVE_COMMENT",()=>sL),n(sc,"CONTEXTMENU_ITEMS_READ_ONLY_COMMENT",()=>sN),n(sc,"CONTEXTMENU_ITEMS_ALIGNMENT",()=>sH),n(sc,"CONTEXTMENU_ITEMS_ALIGNMENT_LEFT",()=>sV),n(sc,"CONTEXTMENU_ITEMS_ALIGNMENT_CENTER",()=>sB),n(sc,"CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT",()=>sF),n(sc,"CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY",()=>sW),n(sc,"CONTEXTMENU_ITEMS_ALIGNMENT_TOP",()=>sz),n(sc,"CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE",()=>sj),n(sc,"CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM",()=>sU),n(sc,"CONTEXTMENU_ITEMS_BORDERS",()=>sG),n(sc,"CONTEXTMENU_ITEMS_BORDERS_TOP",()=>sY),n(sc,"CONTEXTMENU_ITEMS_BORDERS_RIGHT",()=>sX),n(sc,"CONTEXTMENU_ITEMS_BORDERS_BOTTOM",()=>s$),n(sc,"CONTEXTMENU_ITEMS_BORDERS_LEFT",()=>sZ),n(sc,"CONTEXTMENU_ITEMS_REMOVE_BORDERS",()=>sq),n(sc,"CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD",()=>sK),n(sc,"CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD",()=>sQ),n(sc,"CONTEXTMENU_ITEMS_HIDE_COLUMN",()=>sJ),n(sc,"CONTEXTMENU_ITEMS_SHOW_COLUMN",()=>s0),n(sc,"CONTEXTMENU_ITEMS_HIDE_ROW",()=>s1),n(sc,"CONTEXTMENU_ITEMS_SHOW_ROW",()=>s2),n(sc,"FILTERS_NAMESPACE",()=>s5),n(sc,"FILTERS_CONDITIONS_NAMESPACE",()=>s3),n(sc,"FILTERS_CONDITIONS_NONE",()=>s4),n(sc,"FILTERS_CONDITIONS_EMPTY",()=>s6),n(sc,"FILTERS_CONDITIONS_NOT_EMPTY",()=>s8),n(sc,"FILTERS_CONDITIONS_EQUAL",()=>s9),n(sc,"FILTERS_CONDITIONS_NOT_EQUAL",()=>s7),n(sc,"FILTERS_CONDITIONS_BEGINS_WITH",()=>lt),n(sc,"FILTERS_CONDITIONS_ENDS_WITH",()=>le),n(sc,"FILTERS_CONDITIONS_CONTAINS",()=>li),n(sc,"FILTERS_CONDITIONS_NOT_CONTAIN",()=>ln),n(sc,"FILTERS_CONDITIONS_BY_VALUE",()=>lr),n(sc,"FILTERS_CONDITIONS_GREATER_THAN",()=>lo),n(sc,"FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL",()=>la),n(sc,"FILTERS_CONDITIONS_LESS_THAN",()=>ls),n(sc,"FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL",()=>ll),n(sc,"FILTERS_CONDITIONS_BETWEEN",()=>lh),n(sc,"FILTERS_CONDITIONS_NOT_BETWEEN",()=>lu),n(sc,"FILTERS_CONDITIONS_AFTER",()=>lc),n(sc,"FILTERS_CONDITIONS_BEFORE",()=>ld),n(sc,"FILTERS_CONDITIONS_TODAY",()=>lp),n(sc,"FILTERS_CONDITIONS_TOMORROW",()=>lf),n(sc,"FILTERS_CONDITIONS_YESTERDAY",()=>lg),n(sc,"FILTERS_DIVS_FILTER_BY_CONDITION",()=>lm),n(sc,"FILTERS_DIVS_FILTER_BY_VALUE",()=>ly),n(sc,"FILTERS_LABELS_CONJUNCTION",()=>lv),n(sc,"FILTERS_LABELS_DISJUNCTION",()=>lw),n(sc,"FILTERS_VALUES_BLANK_CELLS",()=>lb),n(sc,"FILTERS_BUTTONS_SELECT_ALL",()=>lx),n(sc,"FILTERS_BUTTONS_CLEAR",()=>lS),n(sc,"FILTERS_BUTTONS_OK",()=>lC),n(sc,"FILTERS_BUTTONS_CANCEL",()=>l_),n(sc,"FILTERS_BUTTONS_PLACEHOLDER_SEARCH",()=>lM),n(sc,"FILTERS_BUTTONS_PLACEHOLDER_VALUE",()=>lT),n(sc,"FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE",()=>lI),n(sc,"CHECKBOX_RENDERER_NAMESPACE",()=>lR),n(sc,"CHECKBOX_CHECKED",()=>lE),n(sc,"CHECKBOX_UNCHECKED",()=>lA);const sd="ContextMenu:items",sp=`${sd}.noItems`,sf=`${sd}.insertRowAbove`,sg=`${sd}.insertRowBelow`,sm=`${sd}.insertColumnOnTheLeft`,sy=`${sd}.insertColumnOnTheRight`,sv=`${sd}.removeRow`,sw=`${sd}.removeColumn`,sb=`${sd}.undo`,sx=`${sd}.redo`,sS=`${sd}.readOnly`,sC=`${sd}.clearColumn`,s_=`${sd}.copy`,sM=`${sd}.copyWithHeaders`,sT=`${sd}.copyWithGroupHeaders`,sI=`${sd}.copyHeadersOnly`,sR=`${sd}.cut`,sE=`${sd}.freezeColumn`,sA=`${sd}.unfreezeColumn`,sk=`${sd}.mergeCells`,sD=`${sd}.unmergeCells`,sO=`${sd}.addComment`,sP=`${sd}.editComment`,sL=`${sd}.removeComment`,sN=`${sd}.readOnlyComment`,sH=`${sd}.align`,sV=`${sd}.align.left`,sB=`${sd}.align.center`,sF=`${sd}.align.right`,sW=`${sd}.align.justify`,sz=`${sd}.align.top`,sj=`${sd}.align.middle`,sU=`${sd}.align.bottom`,sG=`${sd}.borders`,sY=`${sd}.borders.top`,sX=`${sd}.borders.right`,s$=`${sd}.borders.bottom`,sZ=`${sd}.borders.left`,sq=`${sd}.borders.remove`,sK=`${sd}.nestedHeaders.insertChildRow`,sQ=`${sd}.nestedHeaders.detachFromParent`,sJ=`${sd}.hideColumn`,s0=`${sd}.showColumn`,s1=`${sd}.hideRow`,s2=`${sd}.showRow`,s5="Filters:",s3=`${s5}conditions`,s4=`${s3}.none`,s6=`${s3}.isEmpty`,s8=`${s3}.isNotEmpty`,s9=`${s3}.isEqualTo`,s7=`${s3}.isNotEqualTo`,lt=`${s3}.beginsWith`,le=`${s3}.endsWith`,li=`${s3}.contains`,ln=`${s3}.doesNotContain`,lr=`${s3}.byValue`,lo=`${s3}.greaterThan`,la=`${s3}.greaterThanOrEqualTo`,ls=`${s3}.lessThan`,ll=`${s3}.lessThanOrEqualTo`,lh=`${s3}.isBetween`,lu=`${s3}.isNotBetween`,lc=`${s3}.after`,ld=`${s3}.before`,lp=`${s3}.today`,lf=`${s3}.tomorrow`,lg=`${s3}.yesterday`,lm=`${s5}labels.filterByCondition`,ly=`${s5}labels.filterByValue`,lv=`${s5}labels.conjunction`,lw=`${s5}labels.disjunction`,lb=`${s5}values.blankCells`,lx=`${s5}buttons.selectAll`,lS=`${s5}buttons.clear`,lC=`${s5}buttons.ok`,l_=`${s5}buttons.cancel`,lM=`${s5}buttons.placeholder.search`,lT=`${s5}buttons.placeholder.value`,lI=`${s5}buttons.placeholder.secondValue`,lR="CheckboxRenderer:",lE=`${lR}checked`,lA=`${lR}unchecked`;var lk={languageCode:"en-US",[sp]:"No available options",[sf]:"Insert row above",[sg]:"Insert row below",[sm]:"Insert column left",[sy]:"Insert column right",[sv]:["Remove row","Remove rows"],[sw]:["Remove column","Remove columns"],[sb]:"Undo",[sx]:"Redo",[sS]:"Read only",[sC]:"Clear column",[sH]:"Alignment",[sV]:"Left",[sB]:"Center",[sF]:"Right",[sW]:"Justify",[sz]:"Top",[sj]:"Middle",[sU]:"Bottom",[sE]:"Freeze column",[sA]:"Unfreeze column",[sG]:"Borders",[sY]:"Top",[sX]:"Right",[s$]:"Bottom",[sZ]:"Left",[sq]:"Remove border(s)",[sO]:"Add comment",[sP]:"Edit comment",[sL]:"Delete comment",[sN]:"Read-only comment",[sk]:"Merge cells",[sD]:"Unmerge cells",[s_]:"Copy",[sM]:["Copy with header","Copy with headers"],[sT]:["Copy with group header","Copy with group headers"],[sI]:["Copy header only","Copy headers only"],[sR]:"Cut",[sK]:"Insert child row",[sQ]:"Detach from parent",[sJ]:["Hide column","Hide columns"],[s0]:["Show column","Show columns"],[s1]:["Hide row","Hide rows"],[s2]:["Show row","Show rows"],[s4]:"None",[s6]:"Is empty",[s8]:"Is not empty",[s9]:"Is equal to",[s7]:"Is not equal to",[lt]:"Begins with",[le]:"Ends with",[li]:"Contains",[ln]:"Does not contain",[lo]:"Greater than",[la]:"Greater than or equal to",[ls]:"Less than",[ll]:"Less than or equal to",[lh]:"Is between",[lu]:"Is not between",[lc]:"After",[ld]:"Before",[lp]:"Today",[lf]:"Tomorrow",[lg]:"Yesterday",[lb]:"Blank cells",[lm]:"Filter by condition",[ly]:"Filter by value",[lv]:"And",[lw]:"Or",[lx]:"Select all",[lS]:"Clear",[lC]:"OK",[l_]:"Cancel",[lM]:"Search",[lT]:"Value",[lI]:"Second value",[lE]:"Checked",[lA]:"Unchecked"};const lD=lk.languageCode,{register:lO,getItem:lP,hasItem:lL,getValues:lN}=(0,nr.default)("languagesDictionaries");function lH(t,e){let i=t,n=e;return(0,e6.isObject)(t)&&(i=(n=t).languageCode),function(t,e){if(t!==lD){var i;i=lP(lD),(0,e6.objectEach)(i,(t,i)=>{(0,eX.isUndefined)(e[i])&&(e[i]=t)})}}(i,n),lO(i,(0,e6.deepClone)(n)),(0,e6.deepClone)(n)}function lV(t){return lL(t)?(0,e6.deepClone)(lP(t)):null}function lB(t,e,i){let n;let r=lV(t);if(null===r)return null;let o=r[e];if((0,eX.isUndefined)(o))return null;let a=(n=o,(0,iy.arrayEach)(su(),t=>{n=t(o,i)}),n);return Array.isArray(a)?a[0]:a}lH(lk),t4("1C6fS"),t4("1hIp0"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");const lF="active-header",lW="header",lz="area",lj="focus";t4("1C6fS"),t4("1hIp0"),t4("1C6fS");var e6=t4("hwT6B");class lU{constructor(t,e){this.settings=t,this.cellRange=e||null}isEmpty(){return null===this.cellRange}add(t){return this.isEmpty()?this.cellRange=this.settings.createCellRange(t):this.cellRange.expand(t),this}replace(t,e){if(!this.isEmpty()){if(this.cellRange.from.isEqual(t))return this.cellRange.from=e,!0;if(this.cellRange.to.isEqual(t))return this.cellRange.to=e,!0}return!1}clear(){return this.cellRange=null,this}getCorners(){let t=this.cellRange.getOuterTopStartCorner(),e=this.cellRange.getOuterBottomEndCorner();return[t.row,t.col,e.row,e.col]}destroy(){this.runLocalHooks("destroy")}}(0,e6.mixin)(lU,aL);var lG=lU,lY=class extends lG{constructor(t,e){var i,n;super(t,null),(i="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i="visualCellRange","string"))?n:n+"")in this?Object.defineProperty(this,i,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[i]=null,this.visualCellRange=e||null,this.commit()}add(t){return null===this.visualCellRange?this.visualCellRange=this.settings.createCellRange(t):this.visualCellRange.expand(t),this}clear(){return this.visualCellRange=null,super.clear()}trimToVisibleCellsRangeOnly(t){let{from:e,to:i}=t,n=this.getNearestNotHiddenCoords(e,1),r=this.getNearestNotHiddenCoords(i,-1);return null===n||null===r?null:((n.row>r.row||n.col>r.col)&&(n=e,r=i),this.settings.createCellRange(n,n,r))}getNearestNotHiddenCoords(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=this.getNearestNotHiddenIndex(this.settings.rowIndexMapper,t.row,e);if(null===n)return null;let r=this.getNearestNotHiddenIndex(this.settings.columnIndexMapper,t.col,i);return null===r?null:this.settings.createCellCoords(n,r)}getNearestNotHiddenIndex(t,e,i){return e<0?e:t.getNearestNotHiddenIndex(e,i)}commit(){if(null===this.visualCellRange)return this;let t=this.trimToVisibleCellsRangeOnly(this.visualCellRange);return null===t?this.cellRange=null:this.cellRange=this.createRenderableCellRange(t.from,t.to),this}syncWith(t){let e=t.from.clone().normalize(),i="N-S"===t.getVerticalDirection()?1:-1,n="W-E"===t.getHorizontalDirection()?1:-1,r=this.settings.visualToRenderableCoords(this.visualCellRange.highlight),o=null;if((null===r||null===r.col||null===r.row)&&(o=this.getNearestNotHiddenCoords(e,i,n)),null!==o&&t.overlaps(o)){let e=t.highlight.clone();if(e.row>=0&&(e.row=o.row),e.col>=0&&(e.col=o.col),null===this.cellRange){let t=this.settings.visualToRenderableCoords(e);this.cellRange=this.settings.createCellRange(t)}t.setHighlight(e)}return"focus"===this.settings.selectionType&&null!==r&&null===o&&t.setHighlight(this.visualCellRange.highlight),this}getCorners(){let{from:t,to:e}=this.cellRange;return[Math.min(t.row,e.row),Math.min(t.col,e.col),Math.max(t.row,e.row),Math.max(t.col,e.col)]}getVisualCorners(){let t=this.settings.renderableToVisualCoords(this.cellRange.getTopStartCorner()),e=this.settings.renderableToVisualCoords(this.cellRange.getBottomEndCorner());return[t.row,t.col,e.row,e.col]}createRenderableCellRange(t,e){let i=this.settings.visualToRenderableCoords(t),n=this.settings.visualToRenderableCoords(e);return null===i.row||null===i.col||null===n.row||null===n.col?null:this.settings.createCellRange(i,i,n)}};function lX(t){let{activeHeaderClassName:e,...i}=t;return new lY({className:e,...i,selectionType:lF})}function l$(t){let{areaCornerVisible:e,...i}=t;return new lY({className:"area",createLayers:!0,border:{width:1,color:"#4b89ff",cornerVisible:e},...i,selectionType:lz})}function lZ(t){let{...e}=t;return new lY({className:"highlight",...e,selectionType:lz})}function lq(t){let{columnClassName:e,...i}=t;return new lY({className:e,...i,selectionType:"column"})}var nZ=t4("4Pbrh");function lK(t){let{headerClassName:e,...i}=t;return new lY({className:e,...i,selectionType:lW})}function lQ(t){let{rowClassName:e,...i}=t;return new lY({className:e,...i,selectionType:"row"})}var iy=t4("ceXML");function lJ(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function l0(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var l1=new WeakSet;class l2{constructor(t){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(this,l1),l1.add(this),lJ(this,"options",void 0),lJ(this,"layerLevel",0),lJ(this,"focus",void 0),lJ(this,"fill",void 0),lJ(this,"layeredAreas",new Map),lJ(this,"areas",new Map),lJ(this,"rowHeaders",new Map),lJ(this,"columnHeaders",new Map),lJ(this,"activeRowHeaders",new Map),lJ(this,"activeColumnHeaders",new Map),lJ(this,"activeCornerHeaders",new Map),lJ(this,"rowHighlights",new Map),lJ(this,"columnHighlights",new Map),lJ(this,"customSelections",[]),this.options=t,this.focus=function(t){let{cellCornerVisible:e,...i}=t;return new lY({className:"current",headerAttributes:[(0,nZ.A11Y_SELECTED)()],border:{width:2,color:"#4b89ff",cornerVisible:e},...i,selectionType:lj})}(t),this.fill=function(t){let{...e}=t;return new lY({className:"fill",border:{width:1,color:"#ff0000"},...e,selectionType:"fill"})}(t)}isEnabledFor(t,e){let i=t;t===lj&&(i="current");let n=this.options.disabledCellSelection(e.row,e.col);return"string"==typeof n&&(n=[n]),!1===n||Array.isArray(n)&&!n.includes(i)}useLayerLevel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.layerLevel=t,this}getFocus(){return this.focus}getFill(){return this.fill}createLayeredArea(){return l0(l1,this,l5).call(this,this.layeredAreas,l$)}getLayeredAreas(){return[...this.layeredAreas.values()]}createArea(){return l0(l1,this,l5).call(this,this.areas,lZ)}getAreas(){return[...this.areas.values()]}createRowHeader(){return l0(l1,this,l5).call(this,this.rowHeaders,lK)}getRowHeaders(){return[...this.rowHeaders.values()]}createColumnHeader(){return l0(l1,this,l5).call(this,this.columnHeaders,lK)}getColumnHeaders(){return[...this.columnHeaders.values()]}createActiveRowHeader(){return l0(l1,this,l5).call(this,this.activeRowHeaders,lX)}getActiveRowHeaders(){return[...this.activeRowHeaders.values()]}createActiveColumnHeader(){return l0(l1,this,l5).call(this,this.activeColumnHeaders,lX)}getActiveColumnHeaders(){return[...this.activeColumnHeaders.values()]}createActiveCornerHeader(){return l0(l1,this,l5).call(this,this.activeCornerHeaders,lX)}getActiveCornerHeaders(){return[...this.activeCornerHeaders.values()]}createRowHighlight(){return l0(l1,this,l5).call(this,this.rowHighlights,lQ)}getRowHighlights(){return[...this.rowHighlights.values()]}createColumnHighlight(){return l0(l1,this,l5).call(this,this.columnHighlights,lq)}getColumnHighlights(){return[...this.columnHighlights.values()]}getCustomSelections(){return[...this.customSelections.values()]}addCustomSelection(t){this.customSelections.push(function(t){let{border:e,visualCellRange:i,...n}=t;return new lY({...e,...n,selectionType:"custom-selection"},i)}({...this.options,...t}))}clear(){this.focus.clear(),this.fill.clear(),(0,iy.arrayEach)(this.areas.values(),t=>void t.clear()),(0,iy.arrayEach)(this.layeredAreas.values(),t=>void t.clear()),(0,iy.arrayEach)(this.rowHeaders.values(),t=>void t.clear()),(0,iy.arrayEach)(this.columnHeaders.values(),t=>void t.clear()),(0,iy.arrayEach)(this.activeRowHeaders.values(),t=>void t.clear()),(0,iy.arrayEach)(this.activeColumnHeaders.values(),t=>void t.clear()),(0,iy.arrayEach)(this.activeCornerHeaders.values(),t=>void t.clear()),(0,iy.arrayEach)(this.rowHighlights.values(),t=>void t.clear()),(0,iy.arrayEach)(this.columnHighlights.values(),t=>void t.clear())}[Symbol.iterator](){return[this.focus,this.fill,...this.areas.values(),...this.layeredAreas.values(),...this.rowHeaders.values(),...this.columnHeaders.values(),...this.activeRowHeaders.values(),...this.activeColumnHeaders.values(),...this.activeCornerHeaders.values(),...this.rowHighlights.values(),...this.columnHighlights.values(),...this.customSelections][Symbol.iterator]()}}function l5(t,e){let i=this.layerLevel;if(t.has(i))return t.get(i);let n=e({layerLevel:i,...this.options});return t.set(i,n),n}function l3(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS"),t4("1hIp0");class l4{constructor(t){l3(this,"ranges",[]),l3(this,"createCellRange",void 0),this.createCellRange=t}isEmpty(){return 0===this.size()}set(t){return this.clear(),this.ranges.push(this.createCellRange(t)),this}add(t){return this.ranges.push(this.createCellRange(t)),this}pop(){return this.ranges.pop(),this}current(){return this.peekByIndex(this.size()-1)}previous(){return this.peekByIndex(this.size()-2)}includes(t){return this.ranges.some(e=>e.includes(t))}clear(){return this.ranges.length=0,this}size(){return this.ranges.length}peekByIndex(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e>=0&&e<this.size()&&(t=this.ranges[e]),t}[Symbol.iterator](){return this.ranges[Symbol.iterator]()}}var e6=t4("hwT6B"),eX=t4("gnaTS"),i0=t4("guO5N"),iy=t4("ceXML");t4("1C6fS");var e6=t4("hwT6B");function l6(t,e,i){l8(t,e),e.set(t,i)}function l8(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function l9(t,e){return t.get(ht(t,e))}function l7(t,e,i){return t.set(ht(t,e),i),i}function ht(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var he=new WeakMap,hi=new WeakMap,hn=new WeakMap,hr=new WeakSet;class ho{constructor(t,e){l8(this,hr),hr.add(this),l6(this,he,void 0),l6(this,hi,void 0),l6(this,hn,{x:0,y:0}),l7(he,this,t),l7(hi,this,e)}transformStart(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=l9(hi,this).createCellCoords(t,e),r=l9(he,this).current().highlight,o=l9(hi,this).visualToRenderableCoords(r),a=0,s=0;if(this.runLocalHooks("beforeTransformStart",n),null!==o.row&&null!==o.col){let{width:t,height:e}=ht(hr,this,hs).call(this),{row:o,col:l}=ht(hr,this,hu).call(this,r),h=l9(hi,this).fixedRowsBottom(),u=l9(hi,this).minSpareRows(),c=l9(hi,this).minSpareCols(),d=l9(hi,this).autoWrapRow(),p=l9(hi,this).autoWrapCol(),f=l9(hi,this).createCellCoords(o+n.row,l+n.col);if(f.row>=e){let n=(0,e6.createObjectPropListener)(i&&u>0&&0===h),r=f.col+1,o=l9(hi,this).createCellCoords(f.row-e,r>=t?r-t:r);this.runLocalHooks("beforeColumnWrap",n,ht(hr,this,hc).call(this,o),r>=t),n.value?this.runLocalHooks("insertRowRequire",l9(hi,this).countRenderableRows()):p&&f.assign(o)}else if(f.row<0){let i=(0,e6.createObjectPropListener)(p),n=f.col-1,r=l9(hi,this).createCellCoords(e+f.row,n<0?t+n:n);this.runLocalHooks("beforeColumnWrap",i,ht(hr,this,hc).call(this,r),n<0),p&&f.assign(r)}if(f.col>=t){let n=(0,e6.createObjectPropListener)(i&&c>0),r=f.row+1,o=l9(hi,this).createCellCoords(r>=e?r-e:r,f.col-t);this.runLocalHooks("beforeRowWrap",n,ht(hr,this,hc).call(this,o),r>=e),n.value?this.runLocalHooks("insertColRequire",l9(hi,this).countRenderableColumns()):d&&f.assign(o)}else if(f.col<0){let i=(0,e6.createObjectPropListener)(d),n=f.row-1,r=l9(hi,this).createCellCoords(n<0?e+n:n,t+f.col);this.runLocalHooks("beforeRowWrap",i,ht(hr,this,hc).call(this,r),n<0),d&&f.assign(r)}let{rowDir:g,colDir:m}=ht(hr,this,ha).call(this,f);a=g,s=m,r=ht(hr,this,hc).call(this,f)}return this.runLocalHooks("afterTransformStart",r,a,s),r}transformEnd(t,e){let i=l9(hi,this).createCellCoords(t,e),n=l9(he,this).current(),r=l9(hi,this).visualToRenderableCoords(n.highlight),o=ht(hr,this,hl).call(this,n.to.row,n.from.row),a=ht(hr,this,hh).call(this,n.to.col,n.from.col),s=n.to.clone(),l=0,h=0;if(this.runLocalHooks("beforeTransformEnd",i),null!==r.row&&null!==r.col&&null!==o&&null!==a){let{row:t,col:e}=ht(hr,this,hu).call(this,n.highlight),r=l9(hi,this).createCellCoords(o+i.row,a+i.col),u=n.getTopStartCorner(),c=n.getTopEndCorner(),d=n.getBottomEndCorner();if(i.col<0&&a>=e&&r.col<e){let t=r.col-e;r.col=ht(hr,this,hh).call(this,u.col,c.col)+t}else if(i.col>0&&a<=e&&r.col>e){let t=ht(hr,this,hh).call(this,c.col,u.col),e=Math.max(r.col-t,1);r.col=t+e}if(i.row<0&&o>=t&&r.row<t){let e=r.row-t;r.row=ht(hr,this,hl).call(this,u.row,d.row)+e}else if(i.row>0&&o<=t&&r.row>t){let t=ht(hr,this,hl).call(this,d.row,u.row),e=Math.max(r.row-t,1);r.row=t+e}let{rowDir:p,colDir:f}=ht(hr,this,ha).call(this,r);l=p,h=f;let g=ht(hr,this,hc).call(this,r);0===i.row&&0!==i.col?s.col=g.col:0!==i.row&&0===i.col?s.row=g.row:(s.row=g.row,s.col=g.col)}return this.runLocalHooks("afterTransformEnd",s,l,h),s}setOffsetSize(t){let{x:e,y:i}=t;l7(hn,this,{x:e,y:i})}resetOffsetSize(){l7(hn,this,{x:0,y:0})}}function ha(t){let{width:e,height:i}=ht(hr,this,hs).call(this),n=0,r=0;return t.row<0?(n=-1,t.row=0):t.row>0&&t.row>=i&&(n=1,t.row=i-1),t.col<0?(r=-1,t.col=0):t.col>0&&t.col>=e&&(r=1,t.col=e-1),{rowDir:n,colDir:r}}function hs(){return{width:l9(hn,this).x+l9(hi,this).countRenderableColumns(),height:l9(hn,this).y+l9(hi,this).countRenderableRows()}}function hl(t,e){let i=l9(hi,this).findFirstNonHiddenRenderableRow(t,e);return null===i?null:l9(hn,this).y+i}function hh(t,e){let i=l9(hi,this).findFirstNonHiddenRenderableColumn(t,e);return null===i?null:l9(hn,this).x+i}function hu(t){let{row:e,col:i}=l9(hi,this).visualToRenderableCoords(t);if(null===e||null===i)throw Error("Renderable coords are not visible.");return l9(hi,this).createCellCoords(l9(hn,this).y+e,l9(hn,this).x+i)}function hc(t){let e=t.clone();return e.col=t.col-l9(hn,this).x,e.row=t.row-l9(hn,this).y,l9(hi,this).renderableToVisualCoords(e)}(0,e6.mixin)(ho,aL),t4("1C6fS"),t4("1hIp0"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var iy=t4("ceXML"),eX=t4("gnaTS");const hd=[3,2],hp=[["number"],["number","string"],["number","undefined"],["number","string","undefined"]],hf=Symbol("root"),hg=Symbol("child");function hm(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hf;if(e!==hf&&e!==hg)throw Error("The second argument is used internally only and cannot be overwritten.");let i=Array.isArray(t),n=e===hf,r=0;if(i){let e=t[0];0===t.length?r=1:n&&e instanceof rG?r=3:n&&Array.isArray(e)?r=hm(e,hg):t.length>=2&&t.length<=4&&!t.some((t,e)=>!hp[e].includes(typeof t))&&(r=2)}return r}function hy(t){let{createCellCoords:e,createCellRange:i,keepDirection:n=!1,propToCol:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!hd.includes(t))throw Error("Unsupported selection ranges schema type was provided.");return function(o){let a=3===t,s=a?o.from.row:o[0],l=a?o.from.col:o[1],h=a?o.to.row:o[2],u=a?o.to.col:o[3];if("function"==typeof r&&("string"==typeof l&&(l=r(l)),"string"==typeof u&&(u=r(u))),(0,eX.isUndefined)(h)&&(h=s),(0,eX.isUndefined)(u)&&(u=l),!n){let t=s,e=l,i=h,n=u;s=Math.min(t,i),l=Math.min(e,n),h=Math.max(t,i),u=Math.max(e,n)}let c=e(s,l);return i(c,c,e(h,u))}}var nJ=t4("iCsRe"),nZ=t4("4Pbrh");function hv(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function hw(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function hb(t,e){return t.get(hS(t,e))}function hx(t,e,i){return t.set(hS(t,e),i),i}function hS(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var hC=new WeakMap,h_=new WeakMap,hM=new WeakMap,hT=new WeakMap,hI=new WeakMap,hR=new WeakMap;class hE{constructor(t,e){var i=this;hw(this,"settings",void 0),hw(this,"tableProps",void 0),hw(this,"inProgress",!1),hw(this,"selectedRange",new l4((t,e,i)=>this.tableProps.createCellRange(t,e,i))),hw(this,"highlight",void 0),hv(this,hC,void 0),hv(this,h_,void 0),hw(this,"selectedByRowHeader",new Set),hw(this,"selectedByColumnHeader",new Set),hv(this,hM,!1),hv(this,hT,!1),hv(this,hI,"unknown"),hv(this,hR,-1),this.settings=t,this.tableProps=e,this.highlight=new l2({headerClassName:t.currentHeaderClassName,activeHeaderClassName:t.activeHeaderClassName,rowClassName:t.currentRowClassName,columnClassName:t.currentColClassName,cellAttributes:[(0,nZ.A11Y_SELECTED)()],rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,disabledCellSelection:(t,e)=>this.tableProps.isDisabledCellSelection(t,e),cellCornerVisible:function(){return i.isCellCornerVisible(...arguments)},areaCornerVisible:function(){return i.isAreaCornerVisible(...arguments)},visualToRenderableCoords:t=>this.tableProps.visualToRenderableCoords(t),renderableToVisualCoords:t=>this.tableProps.renderableToVisualCoords(t),createCellCoords:(t,e)=>this.tableProps.createCellCoords(t,e),createCellRange:(t,e,i)=>this.tableProps.createCellRange(t,e,i)}),hx(hC,this,new ho(this.selectedRange,{rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,countRenderableRows:()=>this.tableProps.countRenderableRows(),countRenderableColumns:()=>this.tableProps.countRenderableColumns(),visualToRenderableCoords:t=>this.tableProps.visualToRenderableCoords(t),renderableToVisualCoords:t=>this.tableProps.renderableToVisualCoords(t),findFirstNonHiddenRenderableRow:function(){return i.tableProps.findFirstNonHiddenRenderableRow(...arguments)},findFirstNonHiddenRenderableColumn:function(){return i.tableProps.findFirstNonHiddenRenderableColumn(...arguments)},createCellCoords:(t,e)=>this.tableProps.createCellCoords(t,e),fixedRowsBottom:()=>t.fixedRowsBottom,minSpareRows:()=>t.minSpareRows,minSpareCols:()=>t.minSpareCols,autoWrapRow:()=>t.autoWrapRow,autoWrapCol:()=>t.autoWrapCol})),hx(h_,this,new ho(this.selectedRange,{rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,countRenderableRows:()=>{let t=this.selectedRange.current();return this.tableProps.countRenderableRowsInRange(0,t.getOuterBottomEndCorner().row)},countRenderableColumns:()=>{let t=this.selectedRange.current();return this.tableProps.countRenderableColumnsInRange(0,t.getOuterBottomEndCorner().col)},visualToRenderableCoords:t=>this.tableProps.visualToRenderableCoords(t),renderableToVisualCoords:t=>this.tableProps.renderableToVisualCoords(t),findFirstNonHiddenRenderableRow:function(){return i.tableProps.findFirstNonHiddenRenderableRow(...arguments)},findFirstNonHiddenRenderableColumn:function(){return i.tableProps.findFirstNonHiddenRenderableColumn(...arguments)},createCellCoords:(t,e)=>this.tableProps.createCellCoords(t,e),fixedRowsBottom:()=>0,minSpareRows:()=>0,minSpareCols:()=>0,autoWrapRow:()=>!0,autoWrapCol:()=>!0})),hb(hC,this).addLocalHook("beforeTransformStart",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runLocalHooks("beforeModifyTransformStart",...e)}),hb(hC,this).addLocalHook("afterTransformStart",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runLocalHooks("afterModifyTransformStart",...e)}),hb(hC,this).addLocalHook("beforeTransformEnd",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runLocalHooks("beforeModifyTransformEnd",...e)}),hb(hC,this).addLocalHook("afterTransformEnd",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runLocalHooks("afterModifyTransformEnd",...e)}),hb(hC,this).addLocalHook("insertRowRequire",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runLocalHooks("insertRowRequire",...e)}),hb(hC,this).addLocalHook("insertColRequire",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runLocalHooks("insertColRequire",...e)}),hb(hC,this).addLocalHook("beforeRowWrap",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runLocalHooks("beforeRowWrap",...e)}),hb(hC,this).addLocalHook("beforeColumnWrap",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runLocalHooks("beforeColumnWrap",...e)}),hb(h_,this).addLocalHook("beforeTransformStart",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runLocalHooks("beforeModifyTransformFocus",...e)}),hb(h_,this).addLocalHook("afterTransformStart",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runLocalHooks("afterModifyTransformFocus",...e)})}getSelectedRange(){return this.selectedRange}markSource(t){hx(hI,this,t)}markEndSource(){hx(hI,this,"unknown")}getSelectionSource(){return hb(hI,this)}setExpectedLayers(t){hx(hR,this,t)}begin(){this.inProgress=!0}finish(){this.runLocalHooks("afterSelectionFinished",Array.from(this.selectedRange)),this.inProgress=!1,hx(hR,this,-1)}isInProgress(){return this.inProgress}setRangeStart(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,r="multiple"===this.settings.selectionMode,o=(0,eX.isUndefined)(e)?this.tableProps.getShortcutManager().isCtrlPressed():e,a=t.clone();hx(hM,this,!1),this.runLocalHooks(`beforeSetRangeStart${i?"Only":""}`,a),(!r||r&&!o&&(0,eX.isUndefined)(e))&&this.selectedRange.clear(),this.selectedRange.add(a).current().setHighlight(n.clone()),0===this.getLayerLevel()&&(this.selectedByRowHeader.clear(),this.selectedByColumnHeader.clear()),i||this.setRangeEnd(t)}setRangeStartOnly(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;this.setRangeStart(t,e,!0,i)}setRangeEnd(t){if(this.selectedRange.isEmpty())return;let e=t.clone(),i=this.tableProps.countRows(),n=this.tableProps.countCols(),r=this.selectedRange.current().clone().setTo(t).isSingleHeader();if((i>0||n>0)&&(0===i&&e.col<0&&!r||0===n&&e.row<0&&!r))return;this.runLocalHooks("beforeSetRangeEnd",e),this.begin();let o=this.selectedRange.current();if(this.settings.navigableHeaders||o.highlight.normalize(),"single"===this.settings.selectionMode)o.setFrom(o.highlight),o.setTo(o.highlight);else{let t=o.getHorizontalDirection(),i=o.getVerticalDirection(),n=this.isMultiple();o.setTo(e),n&&(t!==o.getHorizontalDirection()||1===o.getWidth()&&!o.includes(o.highlight))&&o.from.assign({col:o.highlight.col}),n&&(i!==o.getVerticalDirection()||1===o.getHeight()&&!o.includes(o.highlight))&&o.from.assign({row:o.highlight.row})}i>0&&n>0&&(!this.settings.navigableHeaders||this.settings.navigableHeaders&&!o.isSingleHeader())&&o.to.normalize(),this.runLocalHooks("beforeHighlightSet"),this.setRangeFocus(this.selectedRange.current().highlight),this.applyAndCommit();let a=-1===hb(hR,this)||this.selectedRange.size()===hb(hR,this);this.runLocalHooks("afterSetRangeEnd",t,a)}applyAndCommit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedRange.current(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLayerLevel(),i=this.tableProps.countRows(),n=this.tableProps.countCols();e<this.highlight.layerLevel&&((0,iy.arrayEach)(this.highlight.getAreas(),t=>void t.clear()),(0,iy.arrayEach)(this.highlight.getLayeredAreas(),t=>void t.clear()),(0,iy.arrayEach)(this.highlight.getRowHeaders(),t=>void t.clear()),(0,iy.arrayEach)(this.highlight.getColumnHeaders(),t=>void t.clear()),(0,iy.arrayEach)(this.highlight.getActiveRowHeaders(),t=>void t.clear()),(0,iy.arrayEach)(this.highlight.getActiveColumnHeaders(),t=>void t.clear()),(0,iy.arrayEach)(this.highlight.getActiveCornerHeaders(),t=>void t.clear()),(0,iy.arrayEach)(this.highlight.getRowHighlights(),t=>void t.clear()),(0,iy.arrayEach)(this.highlight.getColumnHighlights(),t=>void t.clear())),this.highlight.useLayerLevel(e);let r=this.highlight.createArea(),o=this.highlight.createLayeredArea(),a=this.highlight.createRowHeader(),s=this.highlight.createColumnHeader(),l=this.highlight.createActiveRowHeader(),h=this.highlight.createActiveColumnHeader(),u=this.highlight.createActiveCornerHeader(),c=this.highlight.createRowHighlight(),d=this.highlight.createColumnHighlight();if(r.clear(),o.clear(),a.clear(),s.clear(),l.clear(),h.clear(),u.clear(),c.clear(),d.clear(),this.highlight.isEnabledFor(lz,t.highlight)&&(this.isMultiple()||e>=1)&&(r.add(t.from).add(t.to).commit(),o.add(t.from).add(t.to).commit(),1===e)){let t=this.selectedRange.previous();this.highlight.useLayerLevel(e-1),this.highlight.createArea().add(t.from).commit().syncWith(t),this.highlight.createLayeredArea().add(t.from).commit().syncWith(t),this.highlight.useLayerLevel(e)}if(this.highlight.isEnabledFor(lW,t.highlight)){if(!t.isSingleHeader()){let e=this.tableProps.createCellCoords(Math.max(t.from.row,0),-1),i=this.tableProps.createCellCoords(t.to.row,-1),n=this.tableProps.createCellCoords(-1,Math.max(t.from.col,0)),r=this.tableProps.createCellCoords(-1,t.to.col);"single"===this.settings.selectionMode?(a.add(e).commit(),s.add(n).commit(),c.add(e).commit(),d.add(n).commit()):(a.add(e).add(i).commit(),s.add(n).add(r).commit(),c.add(e).add(i).commit(),d.add(n).add(r).commit())}let e=!hb(hT,this)&&this.isEntireRowSelected()&&(n>0&&n===t.getWidth()||0===n&&this.isSelectedByRowHeader()),r=!hb(hT,this)&&this.isEntireColumnSelected()&&(i>0&&i===t.getHeight()||0===i&&this.isSelectedByColumnHeader());e&&l.add(this.tableProps.createCellCoords(Math.max(t.from.row,0),Math.min(-this.tableProps.countRowHeaders(),-1))).add(this.tableProps.createCellCoords(Math.max(t.to.row,0),-1)).commit(),r&&h.add(this.tableProps.createCellCoords(Math.min(-this.tableProps.countColHeaders(),-1),Math.max(t.from.col,0))).add(this.tableProps.createCellCoords(-1,Math.max(t.to.col,0))).commit(),e&&r&&u.add(this.tableProps.createCellCoords(-this.tableProps.countColHeaders(),-this.tableProps.countRowHeaders())).add(this.tableProps.createCellCoords(-1,-1)).commit()}}setRangeFocus(t){if(this.selectedRange.isEmpty())return;let e=this.selectedRange.current();this.inProgress||this.runLocalHooks("beforeSetFocus",t);let i=this.highlight.getFocus();i.clear(),e.setHighlight(t),this.inProgress||this.runLocalHooks("beforeHighlightSet"),this.highlight.isEnabledFor(lj,e.highlight)&&i.add(e.highlight).commit().syncWith(e),this.inProgress||(hx(hM,this,!0),this.runLocalHooks("afterSetFocus",e.highlight))}transformStart(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.settings.navigableHeaders?hb(hC,this).setOffsetSize({x:this.tableProps.countRowHeaders(),y:this.tableProps.countColHeaders()}):hb(hC,this).resetOffsetSize(),this.setRangeStart(hb(hC,this).transformStart(t,e,i))}transformEnd(t,e){this.settings.navigableHeaders?hb(hC,this).setOffsetSize({x:this.tableProps.countRowHeaders(),y:this.tableProps.countColHeaders()}):hb(hC,this).resetOffsetSize(),this.setRangeEnd(hb(hC,this).transformEnd(t,e))}transformFocus(t,e){let i=this.selectedRange.current(),{row:n,col:r}=i.getOuterTopStartCorner(),o=this.tableProps.countRenderableColumnsInRange(0,r-1),a=this.tableProps.countRenderableRowsInRange(0,n-1);i.highlight.isHeader()?hb(h_,this).setOffsetSize({x:r<0?Math.abs(r):-o,y:n<0?Math.abs(n):-a}):hb(h_,this).setOffsetSize({x:r<0?0:-o,y:n<0?0:-a});let s=hb(h_,this).transformStart(t,e);this.setRangeFocus(s.normalize())}shiftRows(t,e){if(!this.isSelected())return;let i=this.selectedRange.current();if(this.isSelectedByCorner())this.selectAll(!0,!0,{disableHeadersHighlight:!0});else if(this.isSelectedByColumnHeader()||i.getOuterTopStartCorner().row>=t){let{from:n,to:r,highlight:o}=i,a=this.tableProps.countRows(),s=this.isSelectedByRowHeader(),l=this.isSelectedByColumnHeader(),h=l?-1:0;this.getSelectedRange().pop();let u=this.tableProps.createCellCoords((0,i0.clamp)(n.row+(l?0:e),h,a-1),n.col),c=this.tableProps.createCellCoords((0,i0.clamp)(r.row+e,h,a-1),r.col);this.markSource("shift"),o.row>=t?this.setRangeStartOnly(u,!0,this.tableProps.createCellCoords((0,i0.clamp)(o.row+e,0,a-1),o.col)):this.setRangeStartOnly(u,!0),s&&this.selectedByRowHeader.add(this.getLayerLevel()),l&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(c),this.markEndSource()}}shiftColumns(t,e){if(!this.isSelected())return;let i=this.selectedRange.current();if(this.isSelectedByCorner())this.selectAll(!0,!0,{disableHeadersHighlight:!0});else if(this.isSelectedByRowHeader()||i.getOuterTopStartCorner().col>=t){let{from:n,to:r,highlight:o}=i,a=this.tableProps.countCols(),s=this.isSelectedByRowHeader(),l=this.isSelectedByColumnHeader(),h=s?-1:0;this.getSelectedRange().pop();let u=this.tableProps.createCellCoords(n.row,(0,i0.clamp)(n.col+(s?0:e),h,a-1)),c=this.tableProps.createCellCoords(r.row,(0,i0.clamp)(r.col+e,h,a-1));this.markSource("shift"),o.col>=t?this.setRangeStartOnly(u,!0,this.tableProps.createCellCoords(o.row,(0,i0.clamp)(o.col+e,0,a-1))):this.setRangeStartOnly(u,!0),s&&this.selectedByRowHeader.add(this.getLayerLevel()),l&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(c),this.markEndSource()}}getLayerLevel(){return this.selectedRange.size()-1}isSelected(){return!this.selectedRange.isEmpty()}isMultiple(){if(!this.isSelected())return!1;let t=(0,e6.createObjectPropListener)(!this.selectedRange.current().isSingle());return this.runLocalHooks("afterIsMultipleSelection",t),t.value}isFocusSelectionChanged(){return this.isSelected()&&hb(hM,this)}isSelectedByRowHeader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner(t)&&(-1===t?this.selectedByRowHeader.size>0:this.selectedByRowHeader.has(t))}isEntireRowSelected(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayerLevel(),e=t=>{let{col:e}=t.getOuterTopStartCorner(),i=this.tableProps.countRowHeaders(),n=this.tableProps.countCols();return(i>0&&e<0||0===i)&&t.getWidth()===n};if(-1===t)return Array.from(this.selectedRange).some(t=>e(t));let i=this.selectedRange.peekByIndex(t);return!!i&&e(i)}isSelectedByColumnHeader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner()&&(-1===t?this.selectedByColumnHeader.size>0:this.selectedByColumnHeader.has(t))}isEntireColumnSelected(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayerLevel(),e=t=>{let{row:e}=t.getOuterTopStartCorner(),i=this.tableProps.countColHeaders(),n=this.tableProps.countRows();return(i>0&&e<0||0===i)&&t.getHeight()===n};if(-1===t)return Array.from(this.selectedRange).some(t=>e(t));let i=this.selectedRange.peekByIndex(t);return!!i&&e(i)}isSelectedByAnyHeader(){return this.isSelectedByRowHeader(-1)||this.isSelectedByColumnHeader(-1)||this.isSelectedByCorner()}isSelectedByCorner(){return this.selectedByColumnHeader.has(this.getLayerLevel())&&this.selectedByRowHeader.has(this.getLayerLevel())}inInSelection(t){return this.selectedRange.includes(t)}isCellCornerVisible(){return this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&!this.isMultiple()}isCellVisible(t){let e=this.tableProps.visualToRenderableCoords(t);return null!==e.row&&null!==e.col}isAreaCornerVisible(t){return(!Number.isInteger(t)||t===this.getLayerLevel())&&this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&this.isMultiple()}clear(){this.selectedRange.clear(),this.highlight.clear()}deselect(){this.isSelected()&&(this.inProgress=!1,this.clear(),this.runLocalHooks("afterDeselect"))}selectAll(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{focusPosition:!1,disableHeadersHighlight:!1},r=this.tableProps.countRows(),o=this.tableProps.countCols(),a=this.tableProps.countRowHeaders(),s=this.tableProps.countColHeaders(),l=i?-s:0,h=e?-a:0;if(0===l&&0===h&&(0===r||0===o))return;let u=null===(t=this.getSelectedRange().current())||void 0===t?void 0:t.highlight,{focusPosition:c,disableHeadersHighlight:d}=n;hx(hT,this,d),c&&Number.isInteger(null==c?void 0:c.row)&&Number.isInteger(null==c?void 0:c.col)&&(u=this.tableProps.createCellCoords((0,i0.clamp)(c.row,l,r-1),(0,i0.clamp)(c.col,h,o-1)));let p=this.tableProps.createCellCoords(l,h),f=this.tableProps.createCellCoords(r-1,o-1);this.clear(),this.setRangeStartOnly(p,void 0,u),h<0&&this.selectedByRowHeader.add(this.getLayerLevel()),l<0&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(f),this.finish(),hx(hT,this,!1)}selectCells(t){var e=this;let i=hm(t);if(1===i)return!1;if(0===i)throw Error((0,nJ.toSingleLine)`Unsupported format of the selection ranges was passed. To select cells pass\x20
        the coordinates as an array of arrays ([[rowStart, columnStart/columnPropStart, rowEnd,\x20
        columnEnd/columnPropEnd]]) or as an array of CellRange objects.`);let n=hy(i,{createCellCoords:function(){return e.tableProps.createCellCoords(...arguments)},createCellRange:function(){return e.tableProps.createCellRange(...arguments)},propToCol:t=>this.tableProps.propToCol(t),keepDirection:!0}),r=this.settings.navigableHeaders,o={countRows:this.tableProps.countRows(),countCols:this.tableProps.countCols(),countRowHeaders:r?this.tableProps.countRowHeaders():0,countColHeaders:r?this.tableProps.countColHeaders():0},a=!t.some(t=>{let e=n(t),i=e.isValid(o);return!(i&&!e.containsHeaders()||i&&e.containsHeaders()&&e.isSingleHeader())});return a&&(this.clear(),this.setExpectedLayers(t.length),(0,iy.arrayEach)(t,t=>{let{from:e,to:i}=n(t);this.setRangeStartOnly(e.clone(),!1),this.setRangeEnd(i.clone())}),this.finish()),a}selectColumns(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n="string"==typeof t?this.tableProps.propToCol(t):t,r="string"==typeof e?this.tableProps.propToCol(e):e,o=this.tableProps.countRows(),a=this.tableProps.countCols(),s=this.tableProps.countColHeaders(),l=0===s?0:-s,h=this.tableProps.createCellCoords(l,n),u=this.tableProps.createCellCoords(o-1,r),c=this.tableProps.createCellRange(h,h,u).isValid({countRows:o,countCols:a,countRowHeaders:0,countColHeaders:s});if(c){let t=0,e=0;Number.isInteger(null==i?void 0:i.row)&&Number.isInteger(null==i?void 0:i.col)?(t=(0,i0.clamp)(i.row,l,o-1),e=(0,i0.clamp)(i.col,Math.min(n,r),Math.max(n,r))):(t=(0,i0.clamp)(i,l,o-1),e=n);let a=this.tableProps.createCellCoords(t,e),h=0===s?0:(0,i0.clamp)(a.row,l,-1),u=o-1,c=this.tableProps.createCellCoords(h,n),d=this.tableProps.createCellCoords(u,r);this.runLocalHooks("beforeSelectColumns",c,d,a),c.row=h,d.row=u,this.setRangeStartOnly(c,void 0,a),this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(d),this.runLocalHooks("afterSelectColumns",c,d,a),this.finish()}return c}selectRows(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.tableProps.countRows(),r=this.tableProps.countCols(),o=this.tableProps.countRowHeaders(),a=0===o?0:-o,s=this.tableProps.createCellCoords(t,a),l=this.tableProps.createCellCoords(e,r-1),h=this.tableProps.createCellRange(s,s,l).isValid({countRows:n,countCols:r,countRowHeaders:o,countColHeaders:0});if(h){let n=0,s=0;Number.isInteger(null==i?void 0:i.row)&&Number.isInteger(null==i?void 0:i.col)?(n=(0,i0.clamp)(i.row,Math.min(t,e),Math.max(t,e)),s=(0,i0.clamp)(i.col,a,r-1)):(n=t,s=(0,i0.clamp)(i,a,r-1));let l=this.tableProps.createCellCoords(n,s),h=0===o?0:(0,i0.clamp)(l.col,a,-1),u=r-1,c=this.tableProps.createCellCoords(t,h),d=this.tableProps.createCellCoords(e,u);this.runLocalHooks("beforeSelectRows",c,d,l),c.col=h,d.col=u,this.setRangeStartOnly(c,void 0,l),this.selectedByRowHeader.add(this.getLayerLevel()),this.setRangeEnd(d),this.runLocalHooks("afterSelectRows",c,d,l),this.finish()}return h}refresh(){if(!this.isSelected())return;let t=this.tableProps.countRows(),e=this.tableProps.countCols();if(0===t||0===e){this.deselect();return}let i=this.selectedRange.peekByIndex(this.selectedRange.size()-1),{from:n,to:r,highlight:o}=i;this.clear(),o.assign({row:(0,i0.clamp)(o.row,-1/0,t-1),col:(0,i0.clamp)(o.col,-1/0,e-1)}),n.assign({row:(0,i0.clamp)(n.row,-1/0,t-1),col:(0,i0.clamp)(n.col,-1/0,e-1)}),r.assign({row:(0,i0.clamp)(r.row,0,t-1),col:(0,i0.clamp)(r.col,0,e-1)}),this.selectedRange.ranges.push(i),this.highlight.getFocus().add(o).commit().syncWith(i),this.applyAndCommit(i)}commit(){if(this.highlight.getCustomSelections().forEach(t=>{t.commit()}),!this.isSelected())return;let t=this.highlight.getFocus(),e=this.getLayerLevel();t.commit().syncWith(this.selectedRange.current());for(let t=0;t<this.selectedRange.size();t+=1){this.highlight.useLayerLevel(t);let e=this.highlight.createArea(),i=this.highlight.createLayeredArea(),n=this.highlight.createRowHeader(),r=this.highlight.createColumnHeader(),o=this.highlight.createActiveRowHeader(),a=this.highlight.createActiveColumnHeader(),s=this.highlight.createActiveCornerHeader(),l=this.highlight.createRowHighlight(),h=this.highlight.createColumnHighlight();e.commit(),i.commit(),n.commit(),r.commit(),o.commit(),a.commit(),s.commit(),l.commit(),h.commit()}this.highlight.useLayerLevel(e)}}(0,e6.mixin)(hE,aL),t4("1C6fS"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var sa=t4("10euP"),e6=t4("hwT6B"),eY=t4("f3221");function hA(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class hk{constructor(t){hA(this,"metaManager",void 0),hA(this,"metaSyncMemo",new Map),this.metaManager=t,t.addLocalHook("afterGetCellMeta",t=>this.extendCellMeta(t)),(0,sa.default).getSingleton().add("beforeRender",t=>{t&&this.metaSyncMemo.clear()},this.metaManager.hot)}extendCellMeta(t){var e,i;let{row:n,col:r}=t;if(null!==(e=this.metaSyncMemo.get(n))&&void 0!==e&&e.has(r))return;let{visualRow:o,visualCol:a}=t,s=this.metaManager.hot,l=s.colToProp(a);t.prop=l,s.runHooks("beforeGetCellMeta",o,a,t);let h=(0,e6.hasOwnProperty)(t,"type")?t.type:null,u=(0,eY.isFunction)(t.cells)?t.cells(n,r,l):null;h&&(u?u.type=null!==(i=u.type)&&void 0!==i?i:h:u={type:h}),u&&this.metaManager.updateCellMeta(n,r,u),s.runHooks("afterGetCellMeta",o,a,t),this.metaSyncMemo.has(n)||this.metaSyncMemo.set(n,new Set),this.metaSyncMemo.get(n).add(r)}}function hD(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS"),t4("1hIp0"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var hO=new WeakMap;class hP{constructor(t){var e;hD(this,"metaManager",void 0),hD(this,"usageTracker",new Set),hD(this,"propDescriptors",new Map([["ariaTags",{initOnly:!0}],["fixedColumnsLeft",{target:"fixedColumnsStart",onChange(t){if(this.metaManager.hot.isRtl()&&"fixedColumnsLeft"===t)throw Error("The `fixedColumnsLeft` is not supported for RTL. Please use option `fixedColumnsStart`.");if(this.usageTracker.has("fixedColumnsLeft")&&this.usageTracker.has("fixedColumnsStart"))throw Error("The `fixedColumnsLeft` and `fixedColumnsStart` should not be used together. Please use only the option `fixedColumnsStart`.")}}],["layoutDirection",{initOnly:!0}],["renderAllColumns",{initOnly:!0}],["renderAllRows",{initOnly:!0}]])),e=(t,e,i)=>{if(!i)throw Error(`The \`${t}\` option can not be updated after the Handsontable is initialized.`)},function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,hO),hO.set(this,e),this.metaManager=t,this.extendMetaProps()}extendMetaProps(){this.propDescriptors.forEach((t,e)=>{let{initOnly:i,target:n,onChange:r}=t,o="string"==typeof n,a=o?n:e,s=`_${a}`;(this.metaManager.globalMeta.meta[s]=this.metaManager.globalMeta.meta[a],r)?(this.installPropWatcher(e,s,r),o&&this.installPropWatcher(n,s,r)):i&&(this.installPropWatcher(e,s,hO.get(function(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(hO,this))),this.metaManager.globalMeta.meta._initOnlySettings||(this.metaManager.globalMeta.meta._initOnlySettings=[]),this.metaManager.globalMeta.meta._initOnlySettings.push(e))})}installPropWatcher(t,e,i){let n=this;Object.defineProperty(this.metaManager.globalMeta.meta,t,{get(){return this[e]},set(r){let o=!n.usageTracker.has(t);n.usageTracker.add(t),i.call(n,t,r,o),this[e]=r},enumerable:!0,configurable:!0})}}t4("1C6fS"),t4("1C6fS");var e6=t4("hwT6B");t4("1C6fS"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var e6=t4("hwT6B");t4("1C6fS");var nr=t4("lSZ9A"),eK=t4("jxqWV");const{register:hL,getItem:hN,hasItem:hH,getNames:hV,getValues:hB}=(0,nr.default)("cellTypes");function hF(t){if(!hH(t))throw Error(`You declared cell type "${t}" as a string that is not mapped to a known object.
                 Cell type must be an object or a string mapped to an object registered by
                 "Handsontable.cellTypes.registerCellType" method`);return hN(t)}function hW(t,e){"string"!=typeof t&&(t=(e=t).CELL_TYPE);let{editor:i,renderer:n,validator:r}=e;i&&(0,eK.registerEditor)(t,i),n&&nc(t,n),r&&nv(t,r),hL(t,e)}function hz(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,n="string"==typeof e.type?hF(e.type):e.type;if(t._automaticallyAssignedMetaProps&&(0,e6.objectEach)(e,(e,i)=>void t._automaticallyAssignedMetaProps.delete(i)),!(0,e6.isObject)(n))return;i!==t||t._automaticallyAssignedMetaProps||(t._automaticallyAssignedMetaProps=new Set);let r={};(0,e6.objectEach)(n,(e,n)=>{var o,a;"CELL_TYPE"!==n&&((null===(o=i._automaticallyAssignedMetaProps)||void 0===o?void 0:o.has(n))||!(0,e6.hasOwnProperty)(i,n))&&(r[n]=e,null===(a=t._automaticallyAssignedMetaProps)||void 0===a||a.add(n))}),(0,e6.extend)(t,r)}function hj(t){return Number.isInteger(t)&&t>=0}function hU(t,e){if(!t())throw Error(`Assertion failed: ${e}`)}var eX=t4("gnaTS"),e6=t4("hwT6B"),hG=()=>({_automaticallyAssignedMetaProps:void 0,activeHeaderClassName:"ht__active_highlight",allowEmpty:!0,allowHtml:!1,allowInsertColumn:!0,allowInsertRow:!0,allowInvalid:!0,allowRemoveColumn:!0,allowRemoveRow:!0,ariaTags:!0,autoColumnSize:void 0,autoRowSize:void 0,autoWrapCol:!1,autoWrapRow:!1,bindRowsWithHeaders:void 0,cell:[],cells:void 0,checkedTemplate:void 0,className:void 0,colHeaders:null,collapsibleColumns:void 0,columnHeaderHeight:void 0,columns:void 0,columnSorting:void 0,columnSummary:void 0,colWidths:void 0,commentedCellClassName:"htCommentCell",comments:!1,contextMenu:void 0,copyable:!0,copyPaste:!0,correctFormat:!1,currentColClassName:void 0,currentHeaderClassName:"ht__highlight",currentRowClassName:void 0,customBorders:!1,data:void 0,dataDotNotation:!0,dataSchema:void 0,dateFormat:"DD/MM/YYYY",timeFormat:"h:mm:ss a",datePickerConfig:void 0,defaultDate:void 0,disableVisualSelection:!1,dragToScroll:!0,dropdownMenu:void 0,editor:void 0,enterBeginsEditing:!0,enterMoves:{col:0,row:1},fillHandle:{autoInsertRow:!1},filter:!0,filteringCaseSensitive:!1,filters:void 0,fixedColumnsLeft:0,fixedColumnsStart:0,fixedRowsBottom:0,fixedRowsTop:0,formulas:void 0,fragmentSelection:!1,headerClassName:void 0,height:void 0,hiddenColumns:void 0,hiddenRows:void 0,invalidCellClassName:"htInvalid",imeFastEdit:!1,isEmptyCol(t){let e,i,n;for(e=0,i=this.countRows();e<i;e++)if(n=this.getDataAtCell(e,t),!1===(0,eX.isEmpty)(n))return!1;return!0},isEmptyRow(t){let e,i,n,r;for(e=0,i=this.countCols();e<i;e++)if(n=this.getDataAtCell(t,e),!1===(0,eX.isEmpty)(n)){if("object"==typeof n)return r=this.getCellMeta(t,e),(0,e6.isObjectEqual)(this.getSchema()[r.prop],n);return!1}return!0},label:void 0,language:"en-US",layoutDirection:"inherit",licenseKey:void 0,locale:"en-US",manualColumnFreeze:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,maxCols:1/0,maxRows:1/0,mergeCells:!1,minCols:0,minRows:0,minSpareCols:0,minSpareRows:0,multiColumnSorting:void 0,navigableHeaders:!1,tabNavigation:!0,nestedHeaders:void 0,nestedRows:void 0,noWordWrapClassName:"htNoWrap",numericFormat:void 0,observeDOMVisibility:!0,outsideClickDeselects:!0,persistentState:void 0,placeholder:void 0,placeholderCellClassName:"htPlaceholder",preventOverflow:!1,preventWheel:!1,readOnly:!1,readOnlyCellClassName:"htDimmed",renderAllRows:!1,renderAllColumns:!1,renderer:void 0,rowHeaders:void 0,rowHeaderWidth:void 0,rowHeights:void 0,search:!1,selectionMode:"multiple",selectOptions:void 0,skipColumnOnPaste:!1,skipRowOnPaste:!1,sortByRelevance:!0,source:void 0,startCols:5,startRows:5,stretchH:"none",strict:void 0,tableClassName:void 0,tabMoves:{row:0,col:1},title:void 0,trimDropdown:!0,trimRows:void 0,trimWhitespace:!0,type:"text",uncheckedTemplate:void 0,undo:void 0,validator:void 0,viewportColumnRenderingOffset:"auto",viewportRowRenderingOffset:"auto",visibleRows:10,width:void 0,wordWrap:!0});function hY(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class hX{constructor(t){hY(this,"metaCtor",class{}),hY(this,"meta",void 0),this.meta=this.metaCtor.prototype,(0,e6.extend)(this.meta,hG()),this.meta.instance=t}getMetaConstructor(){return this.metaCtor}getMeta(){return this.meta}updateMeta(t){var e;(0,e6.extend)(this.meta,t),hz(this.meta,{...t,type:null!==(e=t.type)&&void 0!==e?e:this.meta.type},t)}}t4("1C6fS");var e6=t4("hwT6B");class h${constructor(t){var e,i,n;i=void 0,(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e="meta","string"))?n:n+"")in this?Object.defineProperty(this,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[e]=i;let r=t.getMetaConstructor();this.meta=new r}getMeta(){return this.meta}updateMeta(t){(0,e6.extend)(this.meta,t),hz(this.meta,t,t)}}t4("1C6fS");var e6=t4("hwT6B");t4("1C6fS"),t4("1hIp0"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var iy=t4("ceXML");function hZ(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class hq{constructor(t){hZ(this,"valueFactory",void 0),hZ(this,"data",[]),hZ(this,"index",[]),hZ(this,"holes",new Set),this.valueFactory=t}obtain(t){let e;hU(()=>hj(t),"Expecting an unsigned number.");let i=this._getStorageIndexByKey(t);if(i>=0)void 0===(e=this.data[i])&&(e=this.valueFactory(t),this.data[i]=e);else if(e=this.valueFactory(t),this.holes.size>0){let i=this.holes.values().next().value;this.holes.delete(i),this.data[i]=e,this.index[t]=i}else this.data.push(e),this.index[t]=this.data.length-1;return e}insert(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;hU(()=>hj(t)||null==t,"Expecting an unsigned number or null/undefined argument.");let i=[],n=this.data.length;for(let t=0;t<e;t++)i.push(n+t),this.data.push(void 0);let r=null==t?this.index.length:t;this.index=[...this.index.slice(0,r),...i,...this.index.slice(r)]}remove(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;hU(()=>hj(t)||null==t,"Expecting an unsigned number or null/undefined argument.");let i=this.index.splice(null==t?this.index.length-e:t,e);for(let t=0;t<i.length;t++){let e=i[t];"number"==typeof e&&this.holes.add(e)}}size(){return this.data.length-this.holes.size}values(){return(0,iy.arrayFilter)(this.data,(t,e)=>!this.holes.has(e))[Symbol.iterator]()}entries(){let t=[];for(let e=0;e<this.data.length;e++){let i=this._getKeyByStorageIndex(e);-1!==i&&t.push([i,this.data[e]])}let e=0;return{next:()=>{if(e<t.length){let i=t[e];return e+=1,{value:i,done:!1}}return{done:!0}}}}clear(){this.data=[],this.index=[],this.holes.clear()}_getStorageIndexByKey(t){return this.index.length>t?this.index[t]:-1}_getKeyByStorageIndex(t){return this.index.indexOf(t)}[Symbol.iterator](){return this.entries()}}function hK(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const hQ=["data","width"];class hJ{constructor(t){hK(this,"globalMeta",void 0),hK(this,"metas",new hq(()=>this._createMeta())),this.globalMeta=t,this.metas=new hq(()=>this._createMeta())}updateMeta(t,e){let i=this.getMeta(t);(0,e6.extend)(i,e),hz(i,e)}createColumn(t,e){this.metas.insert(t,e)}removeColumn(t,e){this.metas.remove(t,e)}getMeta(t){return this.metas.obtain(t)}getMetaConstructor(t){return this.metas.obtain(t).constructor}clearCache(){this.metas.clear()}_createMeta(){return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];function i(){}(0,e6.inherit)(i,t);for(let t=0;t<e.length;t++)i.prototype[e[t]]=void 0;return i}(this.globalMeta.getMetaConstructor(),hQ).prototype}}t4("1C6fS"),t4("1hIp0");var e6=t4("hwT6B"),eX=t4("gnaTS");function h0(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class h1{constructor(t){h0(this,"columnMeta",void 0),h0(this,"metas",new hq(()=>this._createRow())),this.columnMeta=t}updateMeta(t,e,i){let n=this.getMeta(t,e);(0,e6.extend)(n,i),hz(n,i)}createRow(t,e){this.metas.insert(t,e)}createColumn(t,e){for(let i=0;i<this.metas.size();i++)this.metas.obtain(i).insert(t,e)}removeRow(t,e){this.metas.remove(t,e)}removeColumn(t,e){for(let i=0;i<this.metas.size();i++)this.metas.obtain(i).remove(t,e)}getMeta(t,e,i){let n=this.metas.obtain(t).obtain(e);return void 0===i?n:n[i]}setMeta(t,e,i,n){var r;let o=this.metas.obtain(t).obtain(e);null===(r=o._automaticallyAssignedMetaProps)||void 0===r||r.delete(i),o[i]=n}removeMeta(t,e,i){let n=this.metas.obtain(t).obtain(e);delete n[i]}getMetas(){let t=[],e=Array.from(this.metas.values());for(let i=0;i<e.length;i++)(0,eX.isDefined)(e[i])&&t.push(...e[i].values());return t}getMetasAtRow(t){hU(()=>hj(t),"Expecting an unsigned number.");let e=new Map(this.metas);return e.has(t)?Array.from(e.get(t).values()):[]}clearCache(){this.metas.clear()}_createRow(){return new hq(t=>this._createMeta(t))}_createMeta(t){return new(this.columnMeta.getMetaConstructor(t))}}var e6=t4("hwT6B");class h2{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.hot=t,this.globalMeta=new hX(t),this.tableMeta=new h$(this.globalMeta),this.columnMeta=new hJ(this.globalMeta),this.cellMeta=new h1(this.columnMeta),i.forEach(t=>new t(this)),this.globalMeta.updateMeta(e)}getGlobalMeta(){return this.globalMeta.getMeta()}updateGlobalMeta(t){this.globalMeta.updateMeta(t)}getTableMeta(){return this.tableMeta.getMeta()}updateTableMeta(t){this.tableMeta.updateMeta(t)}getColumnMeta(t){return this.columnMeta.getMeta(t)}updateColumnMeta(t,e){this.columnMeta.updateMeta(t,e)}getCellMeta(t,e,i){let{visualRow:n,visualColumn:r}=i,o=this.cellMeta.getMeta(t,e);return o.visualRow=n,o.visualCol=r,o.row=t,o.col=e,this.runLocalHooks("afterGetCellMeta",o),o}getCellMetaKeyValue(t,e,i){if("string"!=typeof i)throw Error("The passed cell meta object key is not a string");return this.cellMeta.getMeta(t,e,i)}setCellMeta(t,e,i,n){this.cellMeta.setMeta(t,e,i,n)}updateCellMeta(t,e,i){this.cellMeta.updateMeta(t,e,i)}removeCellMeta(t,e,i){this.cellMeta.removeMeta(t,e,i)}getCellsMeta(){return this.cellMeta.getMetas()}getCellsMetaAtRow(t){return this.cellMeta.getMetasAtRow(t)}createRow(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cellMeta.createRow(t,e)}removeRow(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cellMeta.removeRow(t,e)}createColumn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cellMeta.createColumn(t,e),this.columnMeta.createColumn(t,e)}removeColumn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cellMeta.removeColumn(t,e),this.columnMeta.removeColumn(t,e)}clearCellsCache(){this.cellMeta.clearCache()}clearCache(){this.cellMeta.clearCache(),this.columnMeta.clearCache()}}(0,e6.mixin)(h2,aL),t4("1C6fS"),t4("1hIp0");var iJ=t4("bO142"),eY=t4("f3221");t4("1C6fS"),t4("1hIp0");const h5=/^(\r\n|\n\r|\r|\n)/,h3=/^[^\t\r\n]+/,h4=/^\t/;function h6(t){let e,i,n,r,o;let a="";for(e=0,i=t.length;e<i;e+=1){for(n=0,r=t[e].length;n<r;n+=1)n>0&&(a+="	"),"string"==typeof(o=t[e][n])?o.indexOf("\n")>-1?a+=`"${o.replace(/"/g,'""')}"`:a+=o:null==o?a+="":a+=o;e!==i-1&&(a+="\n")}return a}var e6=t4("hwT6B"),iy=t4("ceXML"),i0=t4("guO5N"),eX=t4("gnaTS");function h8(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class h9{static get DESTINATION_RENDERER(){return 1}static get DESTINATION_CLIPBOARD_GENERATOR(){return 2}constructor(t,e,i){h8(this,"hot",void 0),h8(this,"metaManager",void 0),h8(this,"tableMeta",void 0),h8(this,"dataSource",void 0),h8(this,"duckSchema",void 0),h8(this,"colToPropCache",void 0),h8(this,"propToColCache",void 0),this.hot=t,this.metaManager=i,this.tableMeta=i.getTableMeta(),this.dataSource=e,this.duckSchema=this.createDuckSchema(),this.createMap()}createMap(){let t;let e=this.getSchema();if(void 0===e)throw Error("trying to create `columns` definition but you didn't provide `schema` nor `data`");let i=this.tableMeta.columns;if(this.colToPropCache=[],this.propToColCache=new Map,i){let n=0,r=0,o=!1;if("function"==typeof i){let t=(0,e6.deepObjectSize)(e);n=t>0?t:this.countFirstRowKeys(),o=!0}else n=Math.min(this.tableMeta.maxCols,i.length);for(t=0;t<n;t++){let e=o?i(t):i[t];if((0,e6.isObject)(e)){if(void 0!==e.data){let i=o?r:t;this.colToPropCache[i]=e.data,this.propToColCache.set(e.data,i)}r+=1}}}else this.recursiveDuckColumns(e)}countFirstRowKeys(){return aA(this.dataSource)}recursiveDuckColumns(t,e,i){let n,r=e,o=i;return void 0===r&&(r=0,o=""),"object"!=typeof t||Array.isArray(t)||(0,e6.objectEach)(t,(t,e)=>{null===t?(n=o+e,this.colToPropCache.push(n),this.propToColCache.set(n,r),r+=1):r=this.recursiveDuckColumns(t,r,`${e}.`)}),r}colToProp(t){if(!1===Number.isInteger(t))return t;let e=this.hot.toPhysicalColumn(t);return null===e?t:this.colToPropCache&&(0,eX.isDefined)(this.colToPropCache[e])?this.colToPropCache[e]:e}propToCol(t){let e=this.propToColCache.get(t);if((0,eX.isDefined)(e))return this.hot.toVisualColumn(e);let i=this.hot.toVisualColumn(t);return null===i?t:i}getSchema(){let t=this.tableMeta.dataSchema;return t?"function"==typeof t?t():t:this.duckSchema}createDuckSchema(){return this.dataSource&&this.dataSource[0]?(0,e6.duckSchema)(this.dataSource[0]):{}}refreshDuckSchema(){this.duckSchema=this.createDuckSchema()}createRow(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{source:i,mode:n="above"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.hot.countSourceRows(),o=r,a=0,s=t;if(("number"!=typeof s||s>=r)&&(s=r),s<this.hot.countRows()&&(o=this.hot.toPhysicalRow(s)),!1===this.hot.runHooks("beforeCreateRow",s,e,i)||null===o)return{delta:0};let l=this.tableMeta.maxRows,h=this.getSchema().length,u=[];for(;a<e&&r+a<l;){let t=null;"array"===this.hot.dataType?this.tableMeta.dataSchema?t=(0,e6.deepClone)(this.getSchema()):(t=[],(0,i0.rangeEach)(h-1,()=>t.push(null))):"function"===this.hot.dataType?t=this.tableMeta.dataSchema(s+a):(t={},(0,e6.deepExtend)(t,this.getSchema())),u.push(t),a+=1}this.hot.rowIndexMapper.insertIndexes(s,a),"below"===n&&(o=Math.min(o+1,r)),this.spliceData(o,0,u);let c=this.hot.toVisualRow(o);return this.hot.countSourceRows()===u.length&&this.hot.columnIndexMapper.initToLength(this.hot.getInitialColumnCount()),a>0&&(null==t?this.metaManager.createRow(null,a):"auto"!==i&&this.metaManager.createRow(o,e)),this.hot.runHooks("afterCreateRow",c,a,i),this.hot.forceFullRender=!0,{delta:a,startPhysicalIndex:o}}createCol(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{source:i,mode:n="start"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.hot.isColumnModificationAllowed())throw Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");let r=this.dataSource,o=this.tableMeta.maxCols,a=this.hot.countSourceCols(),s=t;if(("number"!=typeof s||s>=a)&&(s=a),!1===this.hot.runHooks("beforeCreateCol",s,e,i))return{delta:0};let l=a;s<this.hot.countCols()&&(l=this.hot.toPhysicalColumn(s));let h=this.hot.countSourceRows(),u=this.hot.countCols(),c=0,d=l;"end"===n&&(d=Math.min(d+1,a));let p=d;for(;c<e&&u<o;){if("number"!=typeof s||s>=u){if(h>0)for(let t=0;t<h;t+=1)void 0===r[t]&&(r[t]=[]),r[t].push(null);else r.push([null])}else for(let t=0;t<h;t++)r[t].splice(d,0,null);c+=1,d+=1,u+=1}this.hot.columnIndexMapper.insertIndexes(s,c),c>0&&(null==t?this.metaManager.createColumn(null,c):"auto"!==i&&this.metaManager.createColumn(p,e));let f=this.hot.toVisualColumn(p);return this.hot.runHooks("afterCreateCol",f,c,i),this.hot.forceFullRender=!0,this.refreshDuckSchema(),{delta:c,startPhysicalIndex:p}}removeRow(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,n=Number.isInteger(t)?t:-e,r=this.visualRowsToPhysical(n,e),o=this.hot.countSourceRows();if(n=(o+n)%o,!1===this.hot.runHooks("beforeRemoveRow",n,r.length,r,i))return!1;let a=r.length;if(this.filterData(n,a,r),n<this.hot.countRows()){this.hot.rowIndexMapper.removeIndexes(r);let t=(0,eX.isDefined)(this.tableMeta.columns)||(0,eX.isDefined)(this.tableMeta.dataSchema);0===this.hot.rowIndexMapper.getNotTrimmedIndexesLength()&&!1===t&&this.hot.columnIndexMapper.setIndexesSequence([])}return r.slice(0).sort((t,e)=>e-t).forEach(t=>{this.metaManager.removeRow(t,1)}),this.hot.runHooks("afterRemoveRow",n,a,r,i),this.hot.forceFullRender=!0,!0}removeCol(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0;if("object"===this.hot.dataType||this.tableMeta.columns)throw Error("cannot remove column with object data source or columns option specified");let n="number"!=typeof t?-e:t;n=(this.hot.countCols()+n)%this.hot.countCols();let r=this.visualColumnsToPhysical(n,e),o=r.slice(0).sort((t,e)=>e-t);if(!1===this.hot.runHooks("beforeRemoveCol",n,e,r,i))return!1;let a=!0,s=o.length,l=this.dataSource;for(let t=0;t<s;t++)a&&r[0]!==r[t]-t&&(a=!1);if(a)for(let t=0,i=this.hot.countSourceRows();t<i;t++)l[t].splice(r[0],e),0===t&&this.metaManager.removeColumn(r[0],e);else for(let t=0,e=this.hot.countSourceRows();t<e;t++)for(let e=0;e<s;e++)l[t].splice(o[e],1),0===t&&this.metaManager.removeColumn(o[e],1);return n<this.hot.countCols()&&(this.hot.columnIndexMapper.removeIndexes(r),0===this.hot.columnIndexMapper.getNotTrimmedIndexesLength()&&this.hot.rowIndexMapper.setIndexesSequence([])),this.hot.runHooks("afterRemoveCol",n,e,r,i),this.hot.forceFullRender=!0,this.refreshDuckSchema(),!0}spliceCol(t,e,i){let n=this.hot.getDataAtCol(t),r=n.slice(e,e+i),o=n.slice(e+i);for(var a=arguments.length,s=Array(a>3?a-3:0),l=3;l<a;l++)s[l-3]=arguments[l];(0,iy.extendArray)(s,o);let h=0;for(;h<i;)s.push(null),h+=1;return(0,iy.to2dArray)(s),this.hot.populateFromArray(e,t,s,null,null,"spliceCol"),r}spliceRow(t,e,i){let n=this.hot.getSourceDataAtRow(t),r=n.slice(e,e+i),o=n.slice(e+i);for(var a=arguments.length,s=Array(a>3?a-3:0),l=3;l<a;l++)s[l-3]=arguments[l];(0,iy.extendArray)(s,o);let h=0;for(;h<i;)s.push(null),h+=1;return this.hot.populateFromArray(t,e,[s],null,null,"spliceRow"),r}spliceData(t,e,i){if(!1!==this.hot.runHooks("beforeDataSplice",t,e,i)){let e=[...this.dataSource.slice(0,t),...i,...this.dataSource.slice(t)];this.dataSource.length=0,e.forEach(t=>this.dataSource.push(t))}}filterData(t,e,i){let n=this.hot.runHooks("filterData",t,e,i);!1===Array.isArray(n)&&(n=this.dataSource.filter((t,e)=>-1===i.indexOf(e))),this.dataSource.length=0,Array.prototype.push.apply(this.dataSource,n)}get(t,e){let i=this.hot.toPhysicalRow(t),n=this.dataSource[i],r=this.hot.runHooks("modifyRowData",i);n=isNaN(r)?r:n;let{dataDotNotation:o}=this.hot.getSettings(),a=null;if(n&&n.hasOwnProperty&&(0,e6.hasOwnProperty)(n,e))a=n[e];else if(o&&"string"==typeof e&&e.indexOf(".")>-1){let t=n;if(!t)return null;let i=e.split(".");for(let e=0,n=i.length;e<n;e++)if(void 0===(t=t[i[e]]))return null;a=t}else"function"==typeof e&&(a=e(this.dataSource.slice(i,i+1)[0]));if(this.hot.hasHook("modifyData")){let t=(0,e6.createObjectPropListener)(a);this.hot.runHooks("modifyData",i,this.propToCol(e),t,"get"),t.isTouched()&&(a=t.value)}return a}getCopyable(t,e){return this.hot.getCellMeta(t,this.propToCol(e)).copyable?this.get(t,e):""}set(t,e,i){let n=this.hot.toPhysicalRow(t),r=i,o=this.dataSource[n],a=this.hot.runHooks("modifyRowData",n);if(o=isNaN(a)?a:o,this.hot.hasHook("modifyData")){let t=(0,e6.createObjectPropListener)(r);this.hot.runHooks("modifyData",n,this.propToCol(e),t,"set"),t.isTouched()&&(r=t.value)}let{dataDotNotation:s}=this.hot.getSettings();if(o&&o.hasOwnProperty&&(0,e6.hasOwnProperty)(o,e))o[e]=r;else if(s&&"string"==typeof e&&e.indexOf(".")>-1){let t,i=o,n=0,a=e.split(".");for(n=0,t=a.length-1;n<t;n++)void 0===i[a[n]]&&(i[a[n]]={}),i=i[a[n]];i[a[n]]=r}else"function"==typeof e?e(this.dataSource.slice(n,n+1)[0],r):o[e]=r}visualRowsToPhysical(t,e){let i=this.hot.countSourceRows(),n=[],r=(i+t)%i,o=e;for(;r<i&&o;)n.push(this.hot.toPhysicalRow(r)),o-=1,r+=1;return n}visualColumnsToPhysical(t,e){let i=this.hot.countCols(),n=[],r=(i+t)%i,o=e;for(;r<i&&o;){let t=this.hot.toPhysicalColumn(r);n.push(t),o-=1,r+=1}return n}clear(){for(let t=0;t<this.hot.countSourceRows();t++)for(let e=0;e<this.hot.countCols();e++)this.set(t,this.colToProp(e),"")}getLength(){let t;let e=this.tableMeta.maxRows;return t=e<0||0===e?0:e||1/0,Math.min(this.hot.rowIndexMapper.getNotTrimmedIndexesLength(),t)}getAll(){let t={row:0,col:0},e={row:Math.max(this.hot.countRows()-1,0),col:Math.max(this.hot.countCols()-1,0)};return t.row-e.row!=0||this.hot.countSourceRows()?this.getRange(t,e,h9.DESTINATION_RENDERER):[]}countCachedColumns(){return this.colToPropCache.length}getRange(t,e,i){let n,r,o;let a=[],s=this.tableMeta.maxRows,l=this.tableMeta.maxCols;if(0===s||0===l)return[];let h=i===h9.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get,u=Math.min(Math.max(s-1,0),Math.max(t.row,e.row)),c=Math.min(Math.max(l-1,0),Math.max(t.col,e.col));for(n=Math.min(t.row,e.row);n<=u;n++){o=[];let i=n>=0?this.hot.toPhysicalRow(n):n;for(r=Math.min(t.col,e.col);r<=c&&null!==i;r++)o.push(h.call(this,n,this.colToProp(r)));null!==i&&a.push(o)}return a}getText(t,e){return h6(this.getRange(t,e,h9.DESTINATION_RENDERER))}getCopyableText(t,e){return h6(this.getRange(t,e,h9.DESTINATION_CLIPBOARD_GENERATOR))}destroy(){this.hot=null,this.metaManager=null,this.dataSource=null,this.duckSchema=null,this.colToPropCache.length=0,this.propToColCache.clear(),this.propToColCache=void 0}}var e6=t4("hwT6B"),eG=t4("gFbQZ"),nZ=t4("4Pbrh");function h7(t,e,i,n){let{hotInstance:r,dataMap:o,dataSource:a,internalSource:s,source:l,metaManager:h,firstRun:u}=n,c=(0,iJ.toUpperCaseFirst)(s),d=r.getSettings();Array.isArray(d.dataSchema)?r.dataType="array":(0,eY.isFunction)(d.dataSchema)?r.dataType="function":r.dataType="object",o&&o.destroy(),t=r.runHooks(`before${c}`,t,u,l);let p=new h9(r,t,h);if(e(p),"object"==typeof t&&null!==t)t.push&&t.splice||(t=[t]);else if(null===t){let e;let i=p.getSchema();t=[];let n=0,o=0;for(n=0,o=d.startRows;n<o;n++)if(("object"===r.dataType||"function"===r.dataType)&&d.dataSchema)e=(0,e6.deepClone)(i),t.push(e);else if("array"===r.dataType)e=(0,e6.deepClone)(i[0]),t.push(e);else{e=[];for(let t=0,i=d.startCols;t<i;t++)e.push(null);t.push(e)}}else throw Error(`${s} only accepts array of objects or array of arrays (${typeof t} given)`);Array.isArray(t[0])&&(r.dataType="array"),d.data=t,p.dataSource=t,a.data=t,a.dataType=r.dataType,a.colToProp=p.colToProp.bind(p),a.propToCol=p.propToCol.bind(p),a.countCachedColumns=p.countCachedColumns.bind(p),i(p),r.runHooks(`after${c}`,t,u,l),u||(r.runHooks("afterChange",null,s),r.render()),r.getSettings().ariaTags&&(0,eG.setAttribute)(r.rootElement,[(0,nZ.A11Y_ROWCOUNT)(-1),(0,nZ.A11Y_COLCOUNT)(r.countCols()+(r.view?r.countRowHeaders():0))])}const ut="gridDefault",ue="editorManager.handlingEditor";var eG=t4("gFbQZ"),nZ=t4("4Pbrh");function ui(t){let e=t.rootDocument.createElement("input");return e.type="text",e.classList.add("htFocusCatcher"),t.getSettings().ariaTags&&(0,eG.setAttribute)(e,[(0,nZ.A11Y_PRESENTATION)(),(0,nZ.A11Y_HIDDEN)()]),e}function un(t){let{rowIndexMapper:e,columnIndexMapper:i}=t,{navigableHeaders:n}=t.getSettings(),r=n&&t.countColHeaders()>0?-t.countColHeaders():0,o=n&&t.countRowHeaders()>0?-t.countRowHeaders():0;return(0===r&&(r=e.getVisualFromRenderableIndex(r)),0===o&&(o=i.getVisualFromRenderableIndex(o)),null===r||null===o)?null:t._createCellCoords(r,o)}function ur(t){var e,i;let{rowIndexMapper:n,columnIndexMapper:r}=t,{navigableHeaders:o}=t.getSettings(),a=n.getRenderableIndexesLength()-1,s=r.getRenderableIndexesLength()-1;if(a<0){if(!o||0===t.countColHeaders())return null;a=-1}if(s<0){if(!o||0===t.countColHeaders())return null;s=-1}return t._createCellCoords(null!==(e=n.getVisualFromRenderableIndex(a))&&void 0!==e?e:a,null!==(i=r.getVisualFromRenderableIndex(s))&&void 0!==i?i:s)}t4("1C6fS");var eq=t4("7HxIw");t4("1C6fS"),t4("1hIp0");const uo=new Map([[" ","space"],["spacebar","space"],["scroll","scrolllock"],["del","delete"],["esc","escape"],["medianexttrack","mediatracknext"],["mediaprevioustrack","mediatrackprevious"],["volumeup","audiovolumeup"],["volumedown","audiovolumedown"],["volumemute","audiovolumemute"],["multiply","*"],["add","+"],["divide","/"],["subtract","-"],["left","arrowleft"],["right","arrowright"],["up","arrowup"],["down","arrowdown"]]),ua=t=>t.map(t=>{let e=t.toLowerCase();return uo.has(e)?uo.get(e):e}).sort().join("+"),us=t=>t.split("+"),ul=new Map([[96,"numpad0"],[97,"numpad1"],[98,"numpad2"],[99,"numpad3"],[100,"numpad4"],[101,"numpad5"],[102,"numpad6"],[103,"numpad7"],[104,"numpad8"],[105,"numpad9"],[106,"multiply"],[107,"add"],[108,"decimal"],[109,"subtract"],[110,"decimal"],[111,"divide"],[112,"f1"],[113,"f2"],[114,"f3"],[115,"f4"],[116,"f5"],[117,"f6"],[118,"f7"],[119,"f8"],[120,"f9"],[121,"f10"],[122,"f11"],[123,"f12"],[186,"semicolon"],[187,"equal"],[188,"comma"],[189,"minus"],[190,"period"],[191,"slash"],[192,"backquote"],[219,"bracketleft"],[220,"backslash"],[221,"bracketright"],[222,"quote"]]),uh=t=>{let{which:e,key:i}=t;if(ul.has(e))return ul.get(e);let n=String.fromCharCode(e).toLowerCase();return/^[a-z0-9]$/.test(n)?n:i.toLowerCase()};var eX=t4("gnaTS"),eY=t4("f3221"),e6=t4("hwT6B"),nJ=t4("iCsRe");const uu=Symbol("shortcut-context");function uc(t){return(0,e6.isObject)(t)&&t.__kindOf===uu}const ud=t=>{let e=i4({errorIdExists:e=>`The "${e}" shortcut is already registered in the "${t}" context.`}),i=function(){let{keys:t,callback:i,group:n,runOnlyIf:r=()=>!0,captureCtrl:o=!1,preventDefault:a=!0,stopPropagation:s=!1,relativeToGroup:l,position:h,forwardToContext:u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,eX.isUndefined)(n))throw Error("You need to define the shortcut's group.");if(!1===(0,eY.isFunction)(i))throw Error("The shortcut's callback needs to be a function.");if(!1===Array.isArray(t))throw Error((0,nJ.toSingleLine)`Pass the shortcut\'s keys as an array of arrays,\x20
      using the KeyboardEvent.key properties:\x20
      https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values.`);let c={callback:i,group:n,runOnlyIf:r,captureCtrl:o,preventDefault:a,stopPropagation:s};(0,eX.isDefined)(l)&&(c.relativeToGroup=l,c.position=h),uc(u)&&(c.forwardToContext=u),t.forEach(t=>{let i=ua(t);if(e.hasItem(i)){let t=e.getItem(i),n=t.findIndex(t=>t.group===l);-1!==n?"before"===h?n-=1:n+=1:n=t.length,t.splice(n,0,c)}else e.addItem(i,[c])})},n=t=>{let i=ua(t);e.removeItem(i)};return{__kindOf:uu,addShortcut:i,addShortcuts:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.forEach(t=>{(0,e6.objectEach)(e,(i,n)=>{!1===Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=e[n])}),i(t)})},getShortcuts:t=>{let i=ua(t),n=e.getItem(i);return(0,eX.isDefined)(n)?n.slice():[]},hasShortcut:t=>{let i=ua(t);return e.hasItem(i)},removeShortcutsByKeys:n,removeShortcutsByGroup:t=>{e.getItems().forEach(e=>{let[i,r]=e,o=r.filter(e=>e.group!==t);0===o.length?n(us(i)):(r.length=0,r.push(...o))})}}};t4("1hIp0"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var eq=t4("7HxIw"),eG=t4("gFbQZ"),e$=t4("eL8cl");const up=["meta","alt","shift","control"],uf=function(){let t=new Set;return{press(e){t.add(e)},release(e){t.delete(e)},releaseAll(){t.clear()},isPressed:e=>t.has(e)}}(),ug=[];let um=0;var nJ=t4("iCsRe");const uy=t=>{let{ownerWindow:e,handleEvent:i,beforeKeyDown:n,afterKeyDown:r}=t,o=i4({errorIdExists:t=>`The "${t}" context name is already registered.`}),a="grid",s=()=>a,l=t=>o.getItem(t),h=!1,u=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s(),n=uc(i)?i:l(i),r=!1;if(!n.hasShortcut(e))return r;let o=n.getShortcuts(e);for(let i=0;i<o.length;i++){let{callback:n,runOnlyIf:a,preventDefault:s,stopPropagation:l,captureCtrl:c,forwardToContext:d}=o[i];if(!0===a(t)){if(h=c,r=!1===n(t,e),h=!1,s&&t.preventDefault(),l&&((0,eq.stopImmediatePropagation)(t),t.stopPropagation()),r)break;d&&u(t,e,d)}}return r},c=function(t,e,i,n,r){let o=t=>up.includes(t),a=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];return t.altKey&&i.push("alt"),e&&(t.ctrlKey||t.metaKey)?i.push("control/meta"):(t.ctrlKey&&i.push("control"),t.metaKey&&i.push("meta")),t.shiftKey&&i.push("shift"),i},s=t=>{if(!1===e(t))return;let s=i(t);if(229===t.keyCode||!1===s||(0,eq.isImmediatePropagationStopped)(t))return;let l=uh(t),h=[];o(l)||(h=a(t)),!r(t,[l].concat(h))&&((0,e$.isMacOS)()&&h.includes("meta")||!(0,e$.isMacOS)()&&h.includes("control"))&&r(t,[l].concat(a(t,!0))),n(t)},l=t=>{if(t.key){let e=uh(t);o(e)&&uf.press(e)}},h=t=>{if(t.key){let e=uh(t);o(e)&&uf.release(e)}},u=()=>{uf.releaseAll()};return{mount:()=>{let e=t;for(um+=1;e;)1===um&&(e.document.documentElement.addEventListener("keydown",l),ug.push({event:"keydown",listener:l}),e.document.documentElement.addEventListener("keyup",h),ug.push({event:"keyup",listener:h})),e.document.documentElement.addEventListener("keydown",s),e.document.documentElement.addEventListener("blur",u),e=(0,eG.getParentWindow)(e)},unmount:()=>{let e=t;for(um-=1;e;){if(0===um){for(let t=0;t<ug.length;t++){let{event:i,listener:n}=ug[t];e.document.documentElement.removeEventListener(i,n)}ug.length=0}e.document.documentElement.removeEventListener("keydown",s),e.document.documentElement.removeEventListener("blur",u),e=(0,eG.getParentWindow)(e)}},isPressed:t=>uf.isPressed(t),releasePressedKeys:()=>uf.releaseAll()}}(e,i,n,r,u);return c.mount(),{addContext:t=>{let e=ud(t);return o.addItem(t,e),e},getActiveContextName:s,getContext:l,setActiveContextName:t=>{if(!o.hasItem(t))throw Error((0,nJ.toSingleLine)`You've tried to activate the "${t}" shortcut context\x20
        that does not exist. Before activation, register the context using the "addContext" method.`);a=t},isCtrlPressed:()=>!h&&(c.isPressed("control")||c.isPressed("meta")),releasePressedKeys:()=>c.releasePressedKeys(),destroy:()=>c.unmount()}};var uv=t4("3BsF4"),eq=t4("7HxIw");const uw=[{name:"editorCloseAndSave",callback(t){t._getEditorManager().closeEditorAndSaveChanges()}},{name:"editorCloseAndSaveByArrowKeys",callback(t,e,i){let n=t._getEditorManager(),r=n.getActiveEditor();r.isInFullEditMode()&&r.state===uv.EDITOR_STATE.EDITING||(n.closeEditorAndSaveChanges(),t.getSelected()&&(i.includes("arrowdown")?t.selection.transformStart(1,0):i.includes("arrowup")?t.selection.transformStart(-1,0):i.includes("arrowleft")?t.selection.transformStart(0,-1*t.getDirectionFactor()):i.includes("arrowright")&&t.selection.transformStart(0,t.getDirectionFactor())),e.preventDefault())}},{name:"editorCloseAndSaveByEnter",callback(t,e){let i=t._getEditorManager();i.closeEditorAndSaveChanges(e.ctrlKey||e.metaKey),i.moveSelectionAfterEnter(e)}},{name:"editorCloseWithoutSaving",callback(t){let e=t._getEditorManager();e.closeEditorAndRestoreOriginalValue(t.getShortcutManager().isCtrlPressed()),e.activeEditor.focus()}},{name:"editorFastOpen",callback(t,e){let{highlight:i}=t.getSelectedRangeLast();i.isHeader()||t._getEditorManager().openEditor(null,e,!0)}},{name:"editorOpen",callback(t,e,i){let n=t._getEditorManager(),r=t.getSelectedRangeLast(),{highlight:o}=r;if(t.selection.isMultiple()&&!r.isHeader()&&t.countRenderedCols()>0&&t.countRenderedRows()>0){let n=t.getSettings(),r="function"==typeof n.enterMoves?n.enterMoves(e):n.enterMoves;i.includes("shift")?t.selection.transformFocus(-r.row,-r.col):t.selection.transformFocus(r.row,r.col);return}o.isHeader()||(t.getSettings().enterBeginsEditing?n.cellProperties.readOnly?n.moveSelectionAfterEnter(e):n.openEditor(null,e,!0):n.moveSelectionAfterEnter(e),(0,eq.stopImmediatePropagation)(e))}},{name:"extendCellsSelectionDown",callback(t){let{highlight:e}=t.getSelectedRangeLast();!t.selection.isSelectedByColumnHeader()&&!t.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&t.selection.isSelectedByRowHeader())&&t.selection.transformEnd(1,0)}},{name:"extendCellsSelectionDownByViewportHeight",callback(t){let{to:e}=t.getSelectedRangeLast(),i=Math.min(e.row+t.countVisibleRows(),t.countRows()-1),n=t.rowIndexMapper.getNearestNotHiddenIndex(i,-1);if(null!==n){let i=t._createCellCoords(n,e.col),r=e.row-t.view.getFirstFullyVisibleRow(),o=Math.min(i.row-r,t.countRows()-1);t.selection.setRangeEnd(i),t.scrollViewportTo({row:o,verticalSnap:"top",horizontalSnap:"start"})}}},{name:"extendCellsSelectionLeft",callback(t){let{highlight:e}=t.getSelectedRangeLast();!t.selection.isSelectedByRowHeader()&&!t.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&t.selection.isSelectedByColumnHeader())&&t.selection.transformEnd(0,-1*t.getDirectionFactor())}},{name:"extendCellsSelectionRight",callback(t){let{highlight:e}=t.getSelectedRangeLast();!t.selection.isSelectedByRowHeader()&&!t.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&t.selection.isSelectedByColumnHeader())&&t.selection.transformEnd(0,t.getDirectionFactor())}},{name:"extendCellsSelectionToColumns",callback(t){let{highlight:e,from:i,to:n}=t.getSelectedRangeLast();t.selection.isSelectedByRowHeader()?t.selection.selectAll(!0,!0):t.selectColumns(i.col,n.col,e)}},{name:"extendCellsSelectionToMostBottom",callback(t){let{selection:e,rowIndexMapper:i}=t,{highlight:n,from:r,to:o}=t.getSelectedRangeLast(),a=n.isHeader()&&t.selection.isSelectedByRowHeader();if(n.isCell()||a){let s=i.getNearestNotHiddenIndex(t.countRows()-1,-1),l=r.clone();l.row=n.row,e.setRangeStart(l,void 0,!1,n.clone()),a&&e.selectedByRowHeader.add(e.getLayerLevel()),e.setRangeEnd(t._createCellCoords(s,o.col))}}},{name:"extendCellsSelectionToMostInlineEnd",callback(t){let{selection:e,columnIndexMapper:i}=t,{highlight:n,from:r,to:o}=t.getSelectedRangeLast();if(!t.selection.isSelectedByRowHeader()&&!t.selection.isSelectedByCorner()&&n.isCell()){let a=i.getNearestNotHiddenIndex(t.countCols()-1,-1),s=r.clone();s.col=n.col,e.setRangeStart(s,void 0,!1,n.clone()),e.setRangeEnd(t._createCellCoords(o.row,a))}}},{name:"extendCellsSelectionToMostInlineStart",callback(t){let{selection:e,columnIndexMapper:i}=t,{highlight:n,from:r,to:o}=t.getSelectedRangeLast();if(!t.selection.isSelectedByRowHeader()&&!t.selection.isSelectedByCorner()&&n.isCell()){let a=parseInt(t.getSettings().fixedColumnsStart,10),s=i.getNearestNotHiddenIndex(a,1),l=r.clone();l.col=n.col,e.setRangeStart(l,void 0,!1,n.clone()),e.setRangeEnd(t._createCellCoords(o.row,s))}}},{name:"extendCellsSelectionToMostLeft",callback(t){let{selection:e,columnIndexMapper:i}=t,{highlight:n,from:r,to:o}=t.getSelectedRangeLast(),a=n.isHeader()&&t.selection.isSelectedByColumnHeader();if(n.isCell()||a){let s=i.getNearestNotHiddenIndex(...t.isRtl()?[t.countCols()-1,-1]:[0,1]),l=r.clone();l.col=n.col,e.setRangeStart(l,void 0,!1,n.clone()),a&&e.selectedByColumnHeader.add(e.getLayerLevel()),e.setRangeEnd(t._createCellCoords(o.row,s))}}},{name:"extendCellsSelectionToMostRight",callback(t){let{selection:e,columnIndexMapper:i}=t,{highlight:n,from:r,to:o}=t.getSelectedRangeLast(),a=n.isHeader()&&t.selection.isSelectedByColumnHeader();if(n.isCell()||a){let s=i.getNearestNotHiddenIndex(...t.isRtl()?[0,1]:[t.countCols()-1,-1]),l=r.clone();l.col=n.col,e.setRangeStart(l,void 0,!1,n.clone()),a&&e.selectedByColumnHeader.add(e.getLayerLevel()),e.setRangeEnd(t._createCellCoords(o.row,s))}}},{name:"extendCellsSelectionToMostTop",callback(t){let{selection:e,rowIndexMapper:i}=t,{highlight:n,from:r,to:o}=t.getSelectedRangeLast(),a=n.isHeader()&&t.selection.isSelectedByRowHeader();if(n.isCell()||a){let s=i.getNearestNotHiddenIndex(0,1),l=r.clone();l.row=n.row,e.setRangeStart(l,void 0,!1,n.clone()),a&&e.selectedByRowHeader.add(e.getLayerLevel()),e.setRangeEnd(t._createCellCoords(s,o.col))}}},{name:"extendCellsSelectionToRows",callback(t){let{highlight:e,from:i,to:n}=t.getSelectedRangeLast();t.selection.isSelectedByColumnHeader()?t.selection.selectAll(!0,!0):t.selectRows(i.row,n.row,e)}},{name:"extendCellsSelectionUp",callback(t){let{highlight:e}=t.getSelectedRangeLast();!t.selection.isSelectedByColumnHeader()&&!t.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&t.selection.isSelectedByRowHeader())&&t.selection.transformEnd(-1,0)}},{name:"extendCellsSelectionUpByViewportHeight",callback(t){let{to:e}=t.getSelectedRangeLast(),i=Math.max(e.row-t.countVisibleRows(),0),n=t.rowIndexMapper.getNearestNotHiddenIndex(i,1);if(null!==n){let i=t._createCellCoords(n,e.col),r=e.row-t.view.getFirstFullyVisibleRow(),o=Math.max(i.row-r,0);t.selection.setRangeEnd(i),t.scrollViewportTo({row:o,verticalSnap:"top",horizontalSnap:"start"})}}},{name:"moveCellSelectionDown",callback(t){let{selection:e}=t;e.transformStart(1,0)}},{name:"moveCellSelectionDownByViewportHeight",callback(t){let{navigableHeaders:e}=t.getSettings(),i=e?t.countColHeaders():0,{row:n}=t.getSelectedRangeLast().highlight,r=t.countVisibleRows()+i;n===t.countRows()-1?r=1:n+r>t.countRows()&&(r=t.countRows()-n-1),t.selection.transformStart(r,0),t.getSelectedRangeLast().highlight.row<0&&t.scrollViewportTo({row:0})}},{name:"moveCellSelectionInlineEnd",callback(t,e){let i=t.getSettings(),n=t.getSelectedRangeLast(),r="function"==typeof i.tabMoves?i.tabMoves(e):i.tabMoves;t.selection.isMultiple()&&!n.isHeader()&&t.countRenderedCols()>0&&t.countRenderedRows()>0?t.selection.transformFocus(-r.row,-r.col):t.selection.transformStart(-r.row,-r.col)}},{name:"moveCellSelectionInlineStart",callback(t,e){let i=t.getSettings(),n=t.getSelectedRangeLast(),r="function"==typeof i.tabMoves?i.tabMoves(e):i.tabMoves;t.selection.isMultiple()&&!n.isHeader()&&t.countRenderedCols()>0&&t.countRenderedRows()>0?t.selection.transformFocus(r.row,r.col):t.selection.transformStart(r.row,r.col)}},{name:"moveCellSelectionLeft",callback(t){t.selection.transformStart(0,-1*t.getDirectionFactor())}},{name:"moveCellSelectionRight",callback(t){t.selection.transformStart(0,t.getDirectionFactor())}},{name:"moveCellSelectionToMostBottom",callback(t){let{col:e}=t.getSelectedRangeLast().highlight,i=t.rowIndexMapper.getNearestNotHiddenIndex(t.countRows()-1,-1);null===i&&(i=-1),t.selection.setRangeStart(t._createCellCoords(i,e))}},{name:"moveCellSelectionToMostBottomInlineEnd",callback(t){let{selection:e,rowIndexMapper:i,columnIndexMapper:n}=t,r=parseInt(t.getSettings().fixedRowsBottom,10),o=i.getNearestNotHiddenIndex(t.countRows()-r-1,-1),a=n.getNearestNotHiddenIndex(t.countCols()-1,-1);e.setRangeStart(t._createCellCoords(o,a))}},{name:"moveCellSelectionToMostInlineEnd",callback(t){let{selection:e,columnIndexMapper:i}=t;e.setRangeStart(t._createCellCoords(t.getSelectedRangeLast().highlight.row,i.getNearestNotHiddenIndex(t.countCols()-1,-1)))}},{name:"moveCellSelectionToMostInlineStart",callback(t){let{selection:e,columnIndexMapper:i}=t,n=parseInt(t.getSettings().fixedColumnsStart,10),r=t.getSelectedRangeLast().highlight.row,o=i.getNearestNotHiddenIndex(n,1);e.setRangeStart(t._createCellCoords(r,o))}},{name:"moveCellSelectionToMostLeft",callback(t){let{selection:e,columnIndexMapper:i}=t,n=t.getSelectedRangeLast().highlight.row,r=i.getNearestNotHiddenIndex(...t.isRtl()?[t.countCols()-1,-1]:[0,1]);null===r&&(r=t.isRtl()?-1:-t.countRowHeaders()),e.setRangeStart(t._createCellCoords(n,r))}},{name:"moveCellSelectionToMostRight",callback(t){let{selection:e,columnIndexMapper:i}=t,{row:n}=t.getSelectedRangeLast().highlight,r=i.getNearestNotHiddenIndex(...t.isRtl()?[0,1]:[t.countCols()-1,-1]);null===r&&(r=t.isRtl()?-t.countRowHeaders():-1),e.setRangeStart(t._createCellCoords(n,r))}},{name:"moveCellSelectionToMostTop",callback(t){let{col:e}=t.getSelectedRangeLast().highlight,i=t.rowIndexMapper.getNearestNotHiddenIndex(0,1);null===i&&(i=-t.countColHeaders()),t.selection.setRangeStart(t._createCellCoords(i,e))}},{name:"moveCellSelectionToMostTopInlineStart",callback(t){let{selection:e,rowIndexMapper:i,columnIndexMapper:n}=t,r=parseInt(t.getSettings().fixedRowsTop,10),o=parseInt(t.getSettings().fixedColumnsStart,10),a=i.getNearestNotHiddenIndex(r,1),s=n.getNearestNotHiddenIndex(o,1);e.setRangeStart(t._createCellCoords(a,s))}},{name:"moveCellSelectionUp",callback(t){let{selection:e}=t;e.transformStart(-1,0)}},{name:"moveCellSelectionUpByViewportHight",callback(t){let{navigableHeaders:e}=t.getSettings(),i=e?t.countColHeaders():0,{row:n}=t.getSelectedRangeLast().highlight,r=-(t.countVisibleRows()+i);n===-i?r=-1:n+r<i&&(r=-(n+i)),t.selection.transformStart(r,0),t.getSelectedRangeLast().highlight.row<0&&t.scrollViewportTo({row:0})}},{name:"emptySelectedCells",callback(t){t.emptySelectedCells(),t._getEditorManager().prepareEditor()}},{name:"scrollToFocusedCell",callback(t){let{highlight:e}=t.getSelectedRangeLast(),i=t.view.getFirstFullyVisibleRow()-1,n=t.view.getFirstFullyVisibleColumn()-1,r=t.view.getLastFullyVisibleRow()+1,o=t.view.getLastFullyVisibleColumn()+1,a=t._createCellCoords(i,n),s=t._createCellCoords(r,o);if(!t._createCellRange(a,a,s).includes(e)&&(e.row>=0||e.col>=0)){let i={};if(e.col>=0){let n=Math.floor(t.countVisibleCols()/2);i.col=Math.max(e.col-n,0)}if(e.row>=0){let n=Math.floor(t.countVisibleRows()/2);i.row=Math.max(e.row-n,0)}t.scrollViewportTo({...i,verticalSnap:"top",horizontalSnap:"start"})}}},{name:"selectAllCells",callback(t){t.selection.selectAll(!0,!0,{disableHeadersHighlight:!0})}},{name:"selectAllCellsAndHeaders",callback(t){t.selection.selectAll(!0,!0,{disableHeadersHighlight:!1})}},{name:"populateSelectedCellsData",callback(t){let e=t.getSelectedRange(),{row:i,col:n}=e[e.length-1].highlight.normalize(),r=t.getDataAtCell(i,n),o=new Map;for(let a=0;a<e.length;a++)e[a].forAll((e,a)=>{if(e>=0&&a>=0&&(e!==i||a!==n)){let{readOnly:i}=t.getCellMeta(e,a);i||o.set(`${e}x${a}`,[e,a,r])}});t.setDataAtCell(Array.from(o.values()))}}];function ub(t){let e={};return uw.forEach(i=>{let{name:n,callback:r}=i;e[n]=function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return r(t,...i)}}),e}function ux(t){let e=t.getShortcutManager().addContext("editor"),i=ub(t);e.addShortcuts([{keys:[["Enter"],["Enter","Shift"]],callback:(t,e)=>i.editorCloseAndSaveByEnter(t,e)},{keys:[["Enter","Control/Meta"],["Enter","Control/Meta","Shift"]],captureCtrl:!0,callback:(t,e)=>i.editorCloseAndSaveByEnter(t,e)},{keys:[["Tab"],["Tab","Shift"],["PageDown"],["PageUp"]],forwardToContext:t.getShortcutManager().getContext("grid"),callback:(t,e)=>i.editorCloseAndSave(t,e)},{keys:[["ArrowDown"],["ArrowUp"],["ArrowLeft"],["ArrowRight"]],preventDefault:!1,callback:(t,e)=>i.editorCloseAndSaveByArrowKeys(t,e)},{keys:[["Escape"],["Escape","Control/Meta"]],callback:()=>i.editorCloseWithoutSaving()}],{group:ue})}var eX=t4("gnaTS");function uS(t){let e=t.getShortcutManager().addContext("grid"),i=ub(t);e.addShortcuts([{keys:[["F2"]],callback:t=>i.editorFastOpen(t)},{keys:[["Enter"],["Enter","Shift"]],callback:(t,e)=>i.editorOpen(t,e)},{keys:[["Backspace"],["Delete"]],callback:()=>i.emptySelectedCells()}],{group:ue,runOnlyIf:()=>(0,eX.isDefined)(t.getSelected())}),e.addShortcuts([{keys:[["Control/Meta","A"]],callback:()=>i.selectAllCells(),runOnlyIf:()=>{var e;return!(null!==(e=t.getSelectedRangeLast())&&void 0!==e&&e.highlight.isHeader())}},{keys:[["Control/Meta","A"]],callback:()=>{},runOnlyIf:()=>{var e;return null===(e=t.getSelectedRangeLast())||void 0===e?void 0:e.highlight.isHeader()},preventDefault:!0},{keys:[["Control/Meta","Shift","Space"]],callback:()=>i.selectAllCellsAndHeaders()},{keys:[["Control/Meta","Enter"]],callback:()=>i.populateSelectedCellsData(),runOnlyIf:()=>{var e,i;return!(null!==(e=t.getSelectedRangeLast())&&void 0!==e&&e.highlight.isHeader())&&(null===(i=t.getSelectedRangeLast())||void 0===i?void 0:i.getCellsCount())>1}},{keys:[["Control","Space"]],captureCtrl:!0,callback:()=>i.extendCellsSelectionToColumns()},{keys:[["Shift","Space"]],stopPropagation:!0,callback:()=>i.extendCellsSelectionToRows()},{keys:[["ArrowUp"]],callback:()=>i.moveCellSelectionUp()},{keys:[["ArrowUp","Control/Meta"]],captureCtrl:!0,callback:()=>i.moveCellSelectionToMostTop()},{keys:[["ArrowUp","Shift"]],callback:()=>i.extendCellsSelectionUp()},{keys:[["ArrowUp","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>i.extendCellsSelectionToMostTop(),runOnlyIf:()=>!(t.selection.isSelectedByCorner()||t.selection.isSelectedByColumnHeader())},{keys:[["ArrowDown"]],callback:()=>i.moveCellSelectionDown()},{keys:[["ArrowDown","Control/Meta"]],captureCtrl:!0,callback:()=>i.moveCellSelectionToMostBottom()},{keys:[["ArrowDown","Shift"]],callback:()=>i.extendCellsSelectionDown()},{keys:[["ArrowDown","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>i.extendCellsSelectionToMostBottom(),runOnlyIf:()=>!(t.selection.isSelectedByCorner()||t.selection.isSelectedByColumnHeader())},{keys:[["ArrowLeft"]],callback:()=>i.moveCellSelectionLeft()},{keys:[["ArrowLeft","Control/Meta"]],captureCtrl:!0,callback:()=>i.moveCellSelectionToMostLeft()},{keys:[["ArrowLeft","Shift"]],callback:()=>i.extendCellsSelectionLeft()},{keys:[["ArrowLeft","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>i.extendCellsSelectionToMostLeft(),runOnlyIf:()=>!(t.selection.isSelectedByCorner()||t.selection.isSelectedByRowHeader())},{keys:[["ArrowRight"]],callback:()=>i.moveCellSelectionRight()},{keys:[["ArrowRight","Control/Meta"]],captureCtrl:!0,callback:()=>i.moveCellSelectionToMostRight()},{keys:[["ArrowRight","Shift"]],callback:()=>i.extendCellsSelectionRight()},{keys:[["ArrowRight","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>i.extendCellsSelectionToMostRight(),runOnlyIf:()=>!(t.selection.isSelectedByCorner()||t.selection.isSelectedByRowHeader())},{keys:[["Home"]],captureCtrl:!0,callback:()=>i.moveCellSelectionToMostInlineStart(),runOnlyIf:()=>t.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["Home","Shift"]],callback:()=>i.extendCellsSelectionToMostInlineStart()},{keys:[["Home","Control/Meta"]],captureCtrl:!0,callback:()=>i.moveCellSelectionToMostTopInlineStart(),runOnlyIf:()=>t.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["End"]],captureCtrl:!0,callback:()=>i.moveCellSelectionToMostInlineEnd(),runOnlyIf:()=>t.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["End","Shift"]],callback:()=>i.extendCellsSelectionToMostInlineEnd()},{keys:[["End","Control/Meta"]],captureCtrl:!0,callback:()=>i.moveCellSelectionToMostBottomInlineEnd(),runOnlyIf:()=>t.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["PageUp"]],callback:()=>i.moveCellSelectionUpByViewportHight()},{keys:[["PageUp","Shift"]],callback:()=>i.extendCellsSelectionUpByViewportHeight()},{keys:[["PageDown"]],callback:()=>i.moveCellSelectionDownByViewportHeight()},{keys:[["PageDown","Shift"]],callback:()=>i.extendCellsSelectionDownByViewportHeight()},{keys:[["Tab"]],preventDefault:!1,callback:t=>i.moveCellSelectionInlineStart(t)},{keys:[["Shift","Tab"]],preventDefault:!1,callback:t=>i.moveCellSelectionInlineEnd(t)},{keys:[["Control/Meta","Backspace"]],callback:()=>i.scrollToFocusedCell()}],{runOnlyIf:()=>{let{navigableHeaders:e}=t.getSettings();return(0,eX.isDefined)(t.getSelected())&&(e||!e&&t.countRenderedRows()>0&&t.countRenderedCols()>0)},group:ut})}let uC=null;const u_=new Map;function uM(t,e){let i,n,r,o,a,s,l;var h,u,c,d=this;let p=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f=this,g=new eQ.default(f),m=!0;p===ai&&ae.set(this,!0),this.rootElement=t,this.rootDocument=t.ownerDocument,this.rootWindow=this.rootDocument.defaultView,this.isDestroyed=!1,this.renderSuspendedCounter=0,this.executionSuspendedCounter=0;let y=null!==(c=null==e?void 0:e.layoutDirection)&&void 0!==c?c:"inherit",w=["rtl","ltr"].includes(y)?y:this.rootWindow.getComputedStyle(this.rootElement).direction;this.rootElement.setAttribute("dir",w),this.isRtl=function(){return"rtl"===w},this.isLtr=function(){return!f.isRtl()},this.getDirectionFactor=function(){return f.isLtr()?1:-1},e.language=(lL(l=ss(h=e.language))||(l=lD,sl(h)),l);let b=new h2(f,e,[hk,hP]),x=b.getTableMeta(),S=b.getGlobalMeta(),C=i4();this.container=this.rootDocument.createElement("div"),this.renderCall=!1,t.insertBefore(this.container,t.firstChild),an(this)&&(0,eX._injectProductInfo)(e.licenseKey,t),this.guid=`ht_${(0,iJ.randomString)()}`,u_.set(this.guid,this),this.columnIndexMapper=new so,this.rowIndexMapper=new so,this.columnIndexMapper.addLocalHook("indexesSequenceChange",t=>{f.runHooks("afterColumnSequenceChange",t)}),this.rowIndexMapper.addLocalHook("indexesSequenceChange",t=>{f.runHooks("afterRowSequenceChange",t)}),n=new aP(f),this.rootElement.id&&"ht_"!==this.rootElement.id.substring(0,3)||(this.rootElement.id=this.guid);let _=new hE(x,{rowIndexMapper:f.rowIndexMapper,columnIndexMapper:f.columnIndexMapper,countCols:()=>f.countCols(),countRows:()=>f.countRows(),propToCol:t=>i.propToCol(t),isEditorOpened:()=>!!f.getActiveEditor()&&f.getActiveEditor().isOpened(),countRenderableColumns:()=>this.view.countRenderableColumns(),countRenderableRows:()=>this.view.countRenderableRows(),countRowHeaders:()=>this.countRowHeaders(),countColHeaders:()=>this.countColHeaders(),countRenderableRowsInRange:function(){return d.view.countRenderableRowsInRange(...arguments)},countRenderableColumnsInRange:function(){return d.view.countRenderableColumnsInRange(...arguments)},getShortcutManager:()=>f.getShortcutManager(),createCellCoords:(t,e)=>f._createCellCoords(t,e),createCellRange:(t,e,i)=>f._createCellRange(t,e,i),visualToRenderableCoords:t=>{let{row:e,col:i}=t;return f._createCellCoords(e>=0?f.rowIndexMapper.getRenderableFromVisualIndex(e):e,i>=0?f.columnIndexMapper.getRenderableFromVisualIndex(i):i)},renderableToVisualCoords:t=>{let{row:e,col:i}=t;return f._createCellCoords(e>=0?f.rowIndexMapper.getVisualFromRenderableIndex(e):e,i>=0?f.columnIndexMapper.getVisualFromRenderableIndex(i):i)},findFirstNonHiddenRenderableRow:(t,e)=>{let i=e>t?1:-1,n=Math.min(t,e),r=Math.max(t,e),o=f.rowIndexMapper.getNearestNotHiddenIndex(t,i);return null===o||1===i&&o>r||-1===i&&o<n?null:o>=0?f.rowIndexMapper.getRenderableFromVisualIndex(o):o},findFirstNonHiddenRenderableColumn:(t,e)=>{let i=e>t?1:-1,n=Math.min(t,e),r=Math.max(t,e),o=f.columnIndexMapper.getNearestNotHiddenIndex(t,i);return null===o||1===i&&o>r||-1===i&&o<n?null:o>=0?f.columnIndexMapper.getRenderableFromVisualIndex(o):o},isDisabledCellSelection:(t,e)=>t<0||e<0?f.getSettings().disableVisualSelection:f.getCellMeta(t,e).disableVisualSelection});this.selection=_;let M=t=>{let{hiddenIndexesChanged:e}=t;e&&this.selection.commit()};function T(t,e){let i="className"===t?f.rootElement:f.table;if(m)(0,eG.addClass)(i,e);else{let n=[],r=[];S[t]&&(n=Array.isArray(S[t])?S[t]:(0,iy.stringToArray)(S[t])),e&&(r=Array.isArray(e)?e:(0,iy.stringToArray)(e));let o=(0,iy.getDifferenceOfArrays)(n,r),a=(0,iy.getDifferenceOfArrays)(r,n);o.length&&(0,eG.removeClass)(i,o),a.length&&(0,eG.addClass)(i,a)}S[t]=e}function I(){let t=!1;return{validatorsInQueue:0,valid:!0,addValidatorToQueue(){this.validatorsInQueue+=1,t=!1},removeValidatorFormQueue(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty(){},checkIfQueueIsEmpty(){0===this.validatorsInQueue&&!1===t&&(t=!0,this.onQueueEmpty(this.valid))}}}function R(t,e,n){if(!t.length){n();return}let r=f.getActiveEditor(),o=new I,a=!0;o.onQueueEmpty=()=>{r&&a&&r.cancelChanges(),n()};for(let n=t.length-1;n>=0;n--){let r;let[s,l,,h]=t[n],u=i.propToCol(l);"numeric"===(r=Number.isInteger(u)?f.getCellMeta(s,u):{...Object.getPrototypeOf(x),...x}).type&&"string"==typeof h&&(0,i0.isNumericLike)(h)&&(t[n][3]=function(t){let e=t.replace(",",".");return!1===isNaN(parseFloat(e))?parseFloat(e):t}(h)),f.getCellValidator(r)&&(o.addValidatorToQueue(),f.validateCell(t[n][3],r,function(e,i){return function(n){if("boolean"!=typeof n)throw Error("Validation error: result is not boolean");!1===n&&!1===i.allowInvalid&&(a=!1,t.splice(e,1),i.valid=!0),o.removeValidatorFormQueue()}}(n,r),e))}o.checkIfQueueIsEmpty()}function E(t,e){for(let n=t.length-1;n>=0;n--){let r=!1;if(null===t[n]){t.splice(n,1);continue}if(null!==t[n][2]&&void 0!==t[n][2]||null!==t[n][3]&&void 0!==t[n][3]){if(x.allowInsertRow)for(;t[n][0]>f.countRows()-1;){let{delta:t}=i.createRow(void 0,void 0,{source:e});if(0===t){r=!0;break}}if("array"===f.dataType&&(!x.columns||0===x.columns.length)&&x.allowInsertColumn)for(;i.propToCol(t[n][1])>f.countCols()-1;){let{delta:t}=i.createCol(void 0,void 0,{source:e});if(0===t){r=!0;break}}r||i.set(t[n][0],t[n][1],t[n][3])}}let n=t.length>0;if(f.forceFullRender=!0,n){r.adjustRowsAndCols(),f.runHooks("beforeChangeRender",t,e),o.closeEditor(),f.view.render(),o.prepareEditor(),f.view.adjustElementsSize(),f.runHooks("afterChange",t,e||"edit");let i=f.getActiveEditor();i&&(0,eX.isDefined)(i.refreshValue)&&i.refreshValue()}else f.view.render()}function A(t,e,i){return Array.isArray(t)?t:[[t,e,i]]}function k(t,e){let i=f.getActiveEditor(),n=f.runHooks("beforeChange",t,e||"edit"),r=t.filter(t=>null!==t);return!1===n||0===r.length?(i&&i.cancelChanges(),[]):r}this.columnIndexMapper.addLocalHook("cacheUpdated",M),this.rowIndexMapper.addLocalHook("cacheUpdated",M),this.selection.addLocalHook("afterSetRangeEnd",(t,e)=>{let i=(0,e6.createObjectPropListener)(!1),n=this.selection.getSelectedRange(),{from:r,to:a}=n.current(),l=n.size()-1;this.runHooks("afterSelection",r.row,r.col,a.row,a.col,i,l),this.runHooks("afterSelectionByProp",r.row,f.colToProp(r.col),a.row,f.colToProp(a.col),i,l),e&&(!i.isTouched()||i.isTouched()&&!i.value)&&s.scrollTo(t);let h=_.isSelectedByRowHeader(),u=_.isSelectedByColumnHeader();h&&u?(0,eG.addClass)(this.rootElement,["ht__selection--rows","ht__selection--columns"]):h?((0,eG.removeClass)(this.rootElement,"ht__selection--columns"),(0,eG.addClass)(this.rootElement,"ht__selection--rows")):u?((0,eG.removeClass)(this.rootElement,"ht__selection--rows"),(0,eG.addClass)(this.rootElement,"ht__selection--columns")):(0,eG.removeClass)(this.rootElement,["ht__selection--rows","ht__selection--columns"]),"shift"!==_.getSelectionSource()&&o.closeEditor(null),f.view.render(),o.prepareEditor()}),this.selection.addLocalHook("beforeSetFocus",t=>{this.runHooks("beforeSelectionFocusSet",t.row,t.col)}),this.selection.addLocalHook("afterSetFocus",t=>{let e=(0,e6.createObjectPropListener)(!1);this.runHooks("afterSelectionFocusSet",t.row,t.col,e),(!e.isTouched()||e.isTouched()&&!e.value)&&s.scrollTo(t),o.closeEditor(),f.view.render(),o.prepareEditor()}),this.selection.addLocalHook("afterSelectionFinished",t=>{let e=t.length-1,{from:i,to:n}=t[e];this.runHooks("afterSelectionEnd",i.row,i.col,n.row,n.col,e),this.runHooks("afterSelectionEndByProp",i.row,f.colToProp(i.col),n.row,f.colToProp(n.col),e)}),this.selection.addLocalHook("afterIsMultipleSelection",t=>{let e=this.runHooks("afterIsMultipleSelection",t.value);t.value&&(t.value=e)}),this.selection.addLocalHook("afterDeselect",()=>{o.closeEditor(),f.view.render(),(0,eG.removeClass)(this.rootElement,["ht__selection--rows","ht__selection--columns"]),this.runHooks("afterDeselect")}),this.selection.addLocalHook("beforeHighlightSet",()=>this.runHooks("beforeSelectionHighlightSet")).addLocalHook("beforeSetRangeStart",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("beforeSetRangeStart",...e)}).addLocalHook("beforeSetRangeStartOnly",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("beforeSetRangeStartOnly",...e)}).addLocalHook("beforeSetRangeEnd",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("beforeSetRangeEnd",...e)}).addLocalHook("beforeSelectColumns",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("beforeSelectColumns",...e)}).addLocalHook("afterSelectColumns",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("afterSelectColumns",...e)}).addLocalHook("beforeSelectRows",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("beforeSelectRows",...e)}).addLocalHook("afterSelectRows",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("afterSelectRows",...e)}).addLocalHook("beforeModifyTransformStart",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("modifyTransformStart",...e)}).addLocalHook("afterModifyTransformStart",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("afterModifyTransformStart",...e)}).addLocalHook("beforeModifyTransformFocus",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("modifyTransformFocus",...e)}).addLocalHook("afterModifyTransformFocus",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("afterModifyTransformFocus",...e)}).addLocalHook("beforeModifyTransformEnd",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("modifyTransformEnd",...e)}).addLocalHook("afterModifyTransformEnd",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("afterModifyTransformEnd",...e)}).addLocalHook("beforeRowWrap",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("beforeRowWrap",...e)}).addLocalHook("beforeColumnWrap",function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d.runHooks("beforeColumnWrap",...e)}).addLocalHook("insertRowRequire",t=>this.alter("insert_row_above",t,1,"auto")).addLocalHook("insertColRequire",t=>this.alter("insert_col_start",t,1,"auto")),r={alter(t,e){var n,a,s,l;let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,u=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,d=t=>{if(0===t.length)return[];let e=[...t];return e.sort((t,e)=>{let[i]=t,[n]=e;return i===n?0:i>n?1:-1}),(0,iy.arrayReduce)(e,(t,e)=>{let[i,n]=e,r=t[t.length-1],[o,a]=r,s=o+a;if(i<=s){let t=Math.max(n-(s-i),0);r[1]+=t}else t.push([i,n]);return t},[e[0]])};switch(t){case"insert_row_below":case"insert_row_above":let p=f.countSourceRows();if(x.maxRows===p)return;let g="insert_row_below"===t?"below":"above";e=null!==(n=e)&&void 0!==n?n:"below"===g?p:0;let{delta:m,startPhysicalIndex:y}=i.createRow(e,h,{source:u,mode:g});_.shiftRows(f.toVisualRow(y),m);break;case"insert_col_start":case"insert_col_end":let w="insert_col_end"===t?"end":"start";e=null!==(a=e)&&void 0!==a?a:"end"===w?f.countSourceCols():0;let{delta:b,startPhysicalIndex:S}=i.createCol(e,h,{source:u,mode:w});if(b){if(Array.isArray(x.colHeaders)){let t=[f.toVisualColumn(S),0];t.length+=b,Array.prototype.splice.apply(x.colHeaders,t)}_.shiftColumns(f.toVisualColumn(S),b)}break;case"remove_row":let C;s=Array.isArray(e)?d(e):[[e,h]],C=0,(0,iy.arrayEach)(s,t=>{let[e,n]=t,r=(0,eX.isEmpty)(e)?f.countRows()-1:Math.max(e-C,0);if(Number.isInteger(e)&&(e=Math.max(e-C,0)),!i.removeRow(e,n,u))return;if(_.isSelected()){let{row:t}=f.getSelectedRangeLast().highlight;t>=e&&t<=e+n-1&&o.closeEditor(!0)}let a=f.countRows();0===a?_.deselect():"ContextMenu.removeRow"===u?_.refresh():_.shiftRows(e,-n);let s=x.fixedRowsTop;s>=r+1&&(x.fixedRowsTop-=Math.min(n,s-r));let l=x.fixedRowsBottom;l&&r>=a-l&&(x.fixedRowsBottom-=Math.min(n,l)),C+=n});break;case"remove_col":let M;l=Array.isArray(e)?d(e):[[e,h]],M=0,(0,iy.arrayEach)(l,t=>{let[e,n]=t,r=(0,eX.isEmpty)(e)?f.countCols()-1:Math.max(e-M,0),a=f.toPhysicalColumn(r);if(Number.isInteger(e)&&(e=Math.max(e-M,0)),!i.removeCol(e,n,u))return;if(_.isSelected()){let{col:t}=f.getSelectedRangeLast().highlight;t>=e&&t<=e+n-1&&o.closeEditor(!0)}0===f.countCols()?_.deselect():"ContextMenu.removeColumn"===u?_.refresh():_.shiftColumns(e,-n);let s=x.fixedColumnsStart;s>=r+1&&(x.fixedColumnsStart-=Math.min(n,s-r)),Array.isArray(x.colHeaders)&&(void 0===a&&(a=-1),x.colHeaders.splice(a,n)),M+=n});break;default:throw Error(`There is no such action "${t}"`)}f.view.render(),c||r.adjustRowsAndCols()},adjustRowsAndCols(){let t=x.minRows,e=x.minSpareRows,n=x.minCols,r=x.minSpareCols;if(t){let e=f.countRows();e<t&&i.createRow(e,t-e,{source:"auto"})}if(e){let t=f.countEmptyRows(!0);if(t<e){let n=Math.min(e-t,x.maxRows-f.countSourceRows());i.createRow(f.countRows(),n,{source:"auto"})}}{let t;(n||r)&&(t=f.countEmptyCols(!0));let e=f.countCols();if(n&&!x.columns&&e<n){let r=n-e;t+=r,i.createCol(e,r,{source:"auto"})}if(r&&!x.columns&&"array"===f.dataType&&t<r){e=f.countCols();let n=Math.min(r-t,x.maxCols-e);i.createCol(e,n,{source:"auto"})}}f.view&&f.view.adjustElementsSize()},populateFromArray(t,e,i,n,r){let o,a,s,l,h;let u=[],c={},d=[],p=t.row,g=t.col;if(0===(a=e.length))return!1;let m=0,y=0;switch((0,e6.isObject)(i)&&(m=i.col-g+1,y=i.row-p+1),r){case"shift_down":let w=(0,iy.pivot)(e),b=w.length,S=Math.max(b,m),C=f.getData().slice(p),_=(0,iy.pivot)(C).slice(g,g+S);for(s=0;s<S;s+=1)if(s<b){for(o=0,a=w[s].length;o<y-a;o+=1)w[s].push(w[s][o%a]);s<_.length?d.push(w[s].concat(_[s])):d.push(w[s].concat(Array(C.length).fill(null)))}else d.push(w[s%b].concat(_[s]));f.populateFromArray(p,g,(0,iy.pivot)(d));break;case"shift_right":let M=e.length,T=Math.max(M,y),I=f.getData().slice(p).map(t=>t.slice(g));for(o=0;o<T;o+=1)if(o<M){for(s=0,l=e[o].length;s<m-l;s+=1)e[o].push(e[o][s%l]);if(o<I.length)for(let t=0;t<I[o].length;t+=1)e[o].push(I[o][t]);else e[o].push(...Array(I[0].length).fill(null))}else e.push(e[o%a].slice(0,T).concat(I[o]));f.populateFromArray(p,g,e);break;default:c.row=t.row,c.col=t.col;let R=0,E=0,A=!0,k=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e[t%e.length];return null!==i?n[i%n.length]:n},D=e.length,O=i?i.row-t.row+1:0;for(o=0,a=i?O:Math.max(D,O);o<a&&!(i&&c.row>i.row&&O>D||!x.allowInsertRow&&c.row>f.countRows()-1)&&!(c.row>=x.maxRows);o++){let e=o-R,r=k(e).length,d=i?i.col-t.col+1:0;if(l=i?d:Math.max(r,d),c.col=t.col,h=f.getCellMeta(c.row,c.col),("CopyPaste.paste"===n||"Autofill.fill"===n)&&h.skipRowOnPaste){R+=1,c.row+=1,a+=1;continue}for(s=0,E=0;s<l&&!(i&&c.col>i.col&&d>r||!x.allowInsertColumn&&c.col>f.countCols()-1)&&!(c.col>=x.maxCols);s++){if(h=f.getCellMeta(c.row,c.col),("CopyPaste.paste"===n||"Autofill.fill"===n)&&h.skipColumnOnPaste){E+=1,c.col+=1,l+=1;continue}if(h.readOnly&&"UndoRedo.undo"!==n){c.col+=1;continue}let t=k(e,s-E),i=f.getDataAtCell(c.row,c.col);if(null!==t&&"object"==typeof t){if(Array.isArray(t)&&null===i&&(i=[]),null===i||"object"!=typeof i)A=!1;else{let e=(0,e6.duckSchema)(Array.isArray(i)?i:i[0]||i),n=(0,e6.duckSchema)(Array.isArray(t)?t:t[0]||t);(0,e6.isObjectEqual)(e,n)||Array.isArray(e)&&Array.isArray(n)?t=(0,e6.deepClone)(t):A=!1}}else null!==i&&"object"==typeof i&&(A=!1);A&&u.push([c.row,c.col,t]),A=!0,c.col+=1}c.row+=1}f.setDataAtCell(u,null,null,n||"populateFromArray")}}},this.init=function(){n.setData(x.data),f.runHooks("beforeInit"),((0,e$.isMobileBrowser)()||(0,e$.isIpadOS)())&&(0,eG.addClass)(f.rootElement,"mobile"),this.updateSettings(x,!0),this.view=new ab(this),o=e2.getInstance(f,x,_),s=function(t){let{selection:e}=t,i=!1,n=!1;return{resume(){n=!1},suspend(){n=!0},skipNextScrollCycle(){i=!0},scrollTo(r){var o;let a;if(i||n){i=!1;return}e.isFocusSelectionChanged()?a=e=>{t.scrollViewportTo(e.toObject())}:e.isSelectedByCorner()?a=()=>{}:e.isSelectedByRowHeader()?a=e=>{let{row:i}=e;t.scrollViewportTo({row:i})}:e.isSelectedByColumnHeader()?a=e=>{let{col:i}=e;t.scrollViewportTo({col:i})}:1===e.getSelectedRange().size()&&e.isMultiple()?a=e=>{t.scrollViewportTo(e.toObject())}:1!==e.getSelectedRange().size()||e.isMultiple()?e.getSelectedRange().size()>1&&(a=e=>{t.scrollViewportTo(e.toObject())}):a=e=>{let i=t.selection.getSelectionSource(),{row:n,col:r}=e;if(n<0&&r>=0)t.scrollViewportTo({col:r});else if(r<0&&n>=0)t.scrollViewportTo({row:n});else{if("mouse"===i&&(r===t.view.getLastPartiallyVisibleColumn()||n===t.view.getLastPartiallyVisibleRow()))return;t.scrollViewportTo({row:n,col:r})}},null===(o=a)||void 0===o||o(r)}}}(f),a=new ic(f),an(this)&&function(t){let e;let i=e=>{if(!e)return null;let i=un(t),n=ur(t);return e.col<i.col&&(e.col=i.col),e.col>n.col&&(e.col=n.col),e.row<i.row&&(e.row=i.row),e.row>n.row&&(e.row=n.row),e},{activate:n,deactivate:r}=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.rootElement,n=ui(t),r=ui(t);return n.addEventListener("focus",()=>null==e?void 0:e.onFocusFromTop()),r.addEventListener("focus",()=>null==e?void 0:e.onFocusFromBottom()),i.firstChild.before(n),i.lastChild.after(r),{activate(){t._registerTimeout(()=>{n.tabIndex=0,r.tabIndex=0},10)},deactivate(){t._registerTimeout(()=>{n.tabIndex=-1,r.tabIndex=-1},10)}}}(t,{onFocusFromTop(){var n;let r=null!==(n=i(e))&&void 0!==n?n:un(t);r&&(t.runHooks("modifyFocusOnTabNavigation","from_above",r),t.selectCell(r.row,r.col)),t.listen()},onFocusFromBottom(){var n;let r=null!==(n=i(e))&&void 0!==n?n:ur(t);r&&(t.runHooks("modifyFocusOnTabNavigation","from_below",r),t.selectCell(r.row,r.col)),t.listen()}}),o={wrapped:!1,flipped:!1},a=!0,s=!1,l=!1;t.addHook("afterListen",()=>r()),t.addHook("afterUnlisten",()=>n()),t.addHook("afterSelection",(i,n,r,h,u)=>{if(s&&(o.wrapped&&o.flipped||l)&&(l=!1,u.value=!0),a){var c;e=null===(c=t.getSelectedRangeLast())||void 0===c?void 0:c.highlight}}),t.addHook("beforeRowWrap",(t,e,i)=>{o.wrapped=!0,o.flipped=i});let h={keys:[["Tab"],["Shift","Tab"]],preventDefault:!1,stopPropagation:!1,relativeToGroup:ut,group:"focusCatcher"};t.getShortcutManager().getContext("grid").addShortcuts([{...h,callback:()=>{let{tabNavigation:e}=t.getSettings();s=!0,t.getSelectedRangeLast()&&!e&&(a=!1),e||(l=!0)},position:"before"},{...h,callback:i=>{let{tabNavigation:n,autoWrapRow:r}=t.getSettings();if(s=!1,a=!0,!n||!t.selection.isSelected()||r&&o.wrapped&&o.flipped||!r&&o.wrapped)return r&&o.wrapped&&o.flipped&&(e=i.shiftKey?un(t):ur(t)),o.wrapped=!1,o.flipped=!1,t.deselectCell(),t.unlisten(),!1;i.preventDefault()},position:"after"}])}(f),f.runHooks("init"),this.forceFullRender=!0,this.view.render(),m&&null===f.rootElement.offsetParent&&(0,eG.observeVisibilityChangeOnce)(f.rootElement,()=>{f.view._wt.wtOverlays.updateLastSpreaderSize(),f.render(),f.view.adjustElementsSize()}),"object"==typeof m&&(f.runHooks("afterChange",m[0],m[1]),m=!1),f.runHooks("afterInit")},this._createCellCoords=function(t,e){return f.view._wt.createCellCoords(t,e)},this._createCellRange=function(t,e,i){return f.view._wt.createCellRange(t,e,i)},this.validateCell=function(t,e,i,n){let r=f.getCellValidator(e);function o(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!n||!0===e.hidden){i(t);return}let r=e.visualCol,o=e.visualRow,a=f.getCell(o,r,!0);if(a&&"TH"!==a.nodeName){let t=f.rowIndexMapper.getRenderableFromVisualIndex(o),e=f.columnIndexMapper.getRenderableFromVisualIndex(r);f.view._wt.getSetting("cellRenderer",t,e,a)}i(t)}if((0,eX.isRegExp)(r)){var a;a=r,r=function(t,e){e(a.test(t))}}(0,eY.isFunction)(r)?(t=f.runHooks("beforeValidate",t,e.visualRow,e.prop,n),f._registerImmediate(()=>{r.call(e,t,i=>{f&&(i=f.runHooks("afterValidate",i,t,e.visualRow,e.prop,n),e.valid=i,o(i),f.runHooks("postAfterValidate",i,t,e.visualRow,e.prop,n))})})):f._registerImmediate(()=>{e.valid=!0,o(e.valid,!1)})},this.setDataAtCell=function(t,e,r,o){let a,s,l;let h=A(t,e,r),u=[],c=o;for(a=0,s=h.length;a<s;a++){if("object"!=typeof h[a])throw Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if("number"!=typeof h[a][1])throw Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");l=h[a][1]>=this.countCols()?h[a][1]:i.colToProp(h[a][1]),u.push([h[a][0],l,n.getAtCell(this.toPhysicalRow(h[a][0]),h[a][1]),h[a][2]])}c||"object"!=typeof t||(c=e);let d=k(u,o);f.runHooks("afterSetDataAtCell",d,c),R(d,c,()=>{E(d,c)})},this.setDataAtRowProp=function(t,e,i,r){let o,a;let s=A(t,e,i),l=[],h=r;for(o=0,a=s.length;o<a;o++)l.push([s[o][0],s[o][1],n.getAtCell(this.toPhysicalRow(s[o][0]),s[o][1]),s[o][2]]);h||"object"!=typeof t||(h=e);let u=k(l,r);f.runHooks("afterSetDataAtRowProp",u,h),R(u,h,()=>{E(u,h)})},this.listen=function(){f&&!f.isListening()&&(u_.forEach(t=>{f!==t&&t.unlisten()}),uC=f.guid,f.runHooks("afterListen"))},this.unlisten=function(){this.isListening()&&(uC=null,f.runHooks("afterUnlisten"))},this.isListening=function(){return uC===f.guid},this.destroyEditor=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];o.closeEditor(t),f.view.render(),e&&_.isSelected()&&o.prepareEditor()},this.populateFromArray=function(t,e,i,n,o,a,s){if(!("object"==typeof i&&"object"==typeof i[0]))throw Error("populateFromArray parameter `input` must be an array of arrays");let l="number"==typeof n?f._createCellCoords(n,o):null;return r.populateFromArray(f._createCellCoords(t,e),i,l,a,s)},this.spliceCol=function(t,e,n){for(var r=arguments.length,o=Array(r>3?r-3:0),a=3;a<r;a++)o[a-3]=arguments[a];return i.spliceCol(t,e,n,...o)},this.spliceRow=function(t,e,n){for(var r=arguments.length,o=Array(r>3?r-3:0),a=3;a<r;a++)o[a-3]=arguments[a];return i.spliceRow(t,e,n,...o)},this.getSelected=function(){if(_.isSelected())return(0,iy.arrayMap)(_.getSelectedRange(),t=>{let{from:e,to:i}=t;return[e.row,e.col,i.row,i.col]})},this.getSelectedLast=function(){let t;let e=this.getSelected();return e&&e.length>0&&(t=e[e.length-1]),t},this.getSelectedRange=function(){if(_.isSelected())return Array.from(_.getSelectedRange())},this.getSelectedRangeLast=function(){let t;let e=this.getSelectedRange();return e&&e.length>0&&(t=e[e.length-1]),t},this.emptySelectedCells=function(t){if(!_.isSelected()||0===this.countRows()||0===this.countCols())return;let e=[];(0,iy.arrayEach)(_.getSelectedRange(),t=>{if(t.isSingleHeader())return;let i=t.getTopStartCorner(),n=t.getBottomEndCorner();(0,i0.rangeEach)(i.row,n.row,t=>{(0,i0.rangeEach)(i.col,n.col,i=>{this.getCellMeta(t,i).readOnly||e.push([t,i,null])})})}),e.length>0&&this.setDataAtCell(e,t)},this.isRenderSuspended=function(){return this.renderSuspendedCounter>0},this.suspendRender=function(){this.renderSuspendedCounter+=1},this.resumeRender=function(){let t=this.renderSuspendedCounter-1;this.renderSuspendedCounter=Math.max(t,0),this.isRenderSuspended()||t!==this.renderSuspendedCounter||(this.renderCall?this.render():f.view.render())},this.render=function(){this.view&&(this.renderCall=!0,this.forceFullRender=!0,this.isRenderSuspended()||f.view.render())},this.batchRender=function(t){this.suspendRender();let e=t();return this.resumeRender(),e},this.isExecutionSuspended=function(){return this.executionSuspendedCounter>0},this.suspendExecution=function(){this.executionSuspendedCounter+=1,this.columnIndexMapper.suspendOperations(),this.rowIndexMapper.suspendOperations()},this.resumeExecution=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.executionSuspendedCounter-1;this.executionSuspendedCounter=Math.max(e,0),(!this.isExecutionSuspended()&&e===this.executionSuspendedCounter||t)&&(this.columnIndexMapper.resumeOperations(),this.rowIndexMapper.resumeOperations())},this.batchExecution=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.suspendExecution();let i=t();return this.resumeExecution(e),i},this.batch=function(t){this.suspendRender(),this.suspendExecution();let e=t();return this.resumeExecution(),this.resumeRender(),e},this.refreshDimensions=function(){if(!f.view)return;let{width:t,height:e}=f.view.getLastSize(),{width:i,height:n}=f.rootElement.getBoundingClientRect(),r=i!==t||n!==e;!1!==f.runHooks("beforeRefreshDimensions",{width:t,height:e},{width:i,height:n},r)&&((r||f.view._wt.wtOverlays.scrollableElement===f.rootWindow)&&(f.view.setLastSize(i,n),f.render()),f.runHooks("afterRefreshDimensions",{width:t,height:e},{width:i,height:n},r))},this.updateData=function(t,e){h7(t,t=>{i=t},t=>{i=t,f.columnIndexMapper.fitToLength(this.getInitialColumnCount()),f.rowIndexMapper.fitToLength(this.countSourceRows()),r.adjustRowsAndCols(),_.refresh()},{hotInstance:f,dataMap:i,dataSource:n,internalSource:"updateData",source:e,metaManager:b,firstRun:m})},this.loadData=function(t,e){h7(t,t=>{i=t},()=>{b.clearCellsCache(),f.initIndexMappers(),r.adjustRowsAndCols(),_.refresh(),m&&(m=[null,"loadData"])},{hotInstance:f,dataMap:i,dataSource:n,internalSource:"loadData",source:e,metaManager:b,firstRun:m})},this.getInitialColumnCount=function(){let t=x.columns,e=0;if(Array.isArray(t))e=t.length;else if((0,eY.isFunction)(t)){if("array"===f.dataType){let i=this.countSourceCols();for(let n=0;n<i;n+=1)t(n)&&(e+=1)}else("object"===f.dataType||"function"===f.dataType)&&(e=i.colToPropCache.length)}else if((0,eX.isDefined)(x.dataSchema)){let t=i.getSchema();e=Array.isArray(t)?t.length:(0,e6.deepObjectSize)(t)}else e=this.countSourceCols();return e},this.initIndexMappers=function(){this.columnIndexMapper.initToLength(this.getInitialColumnCount()),this.rowIndexMapper.initToLength(this.countSourceRows())},this.getData=function(t,e,n,r){return(0,eX.isUndefined)(t)?i.getAll():i.getRange(f._createCellCoords(t,e),f._createCellCoords(n,r),i.DESTINATION_RENDERER)},this.getCopyableText=function(t,e,n,r){return i.getCopyableText(f._createCellCoords(t,e),f._createCellCoords(n,r))},this.getCopyableData=function(t,e){return i.getCopyable(t,i.colToProp(e))},this.getSchema=function(){return i.getSchema()},this.updateSettings=function(t){let e,n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(m?f.loadData:f.updateData).bind(this),s=!1;if((0,eX.isDefined)(t.rows))throw Error('The "rows" setting is no longer supported. Do you mean startRows, minRows or maxRows?');if((0,eX.isDefined)(t.cols))throw Error('The "cols" setting is no longer supported. Do you mean startCols, minCols or maxCols?');if((0,eX.isDefined)(t.ganttChart))throw Error('Since 8.0.0 the "ganttChart" setting is no longer supported.');for(e in t)"data"===e||("language"===e?function(t){let e=ss(t);lL(e)?(f.runHooks("beforeLanguageChange",e),S.language=e,f.runHooks("afterLanguageChange",e)):sl(t)}(t.language):"className"===e?T("className",t.className):"tableClassName"===e&&f.table?(T("tableClassName",t.tableClassName),f.view._wt.wtOverlays.syncOverlayTableClassNames()):(0,sa.default).getSingleton().isRegistered(e)||(0,sa.default).getSingleton().isDeprecated(e)?((0,eY.isFunction)(t[e])||Array.isArray(t[e]))&&(t[e].initialHook=!0,f.addHook(e,t[e])):!o&&(0,e6.hasOwnProperty)(t,e)&&(S[e]=t[e]));void 0===t.data&&void 0===x.data?a(null,"updateSettings"):void 0!==t.data?a(t.data,"updateSettings"):void 0!==t.columns&&(i.createMap(),f.initIndexMappers());let l=f.countCols(),h=x.columns;if(h&&(0,eY.isFunction)(h)&&(s=!0),(void 0!==t.cell||void 0!==t.cells||void 0!==t.columns)&&b.clearCache(),l>0)for(e=0,n=0;e<l;e++){if(h){let t=s?h(e):h[n];t&&b.updateColumnMeta(n,t)}n+=1}(0,eX.isDefined)(t.cell)&&(0,e6.objectEach)(t.cell,t=>{f.setCellMetaObject(t.row,t.col,t)}),f.runHooks("afterCellMetaReset");let u=f.rootElement.style.height;""!==u&&(u=parseInt(f.rootElement.style.height,10));let c=t.height;if((0,eY.isFunction)(c)&&(c=c()),o&&f.rootElement.getAttribute("style")&&f.rootElement.setAttribute("data-initialstyle",f.rootElement.getAttribute("style")),null===c){let t=f.rootElement.getAttribute("data-initialstyle");t&&(t.indexOf("height")>-1||t.indexOf("overflow")>-1)?f.rootElement.setAttribute("style",t):(f.rootElement.style.height="",f.rootElement.style.overflow="")}else void 0!==c&&(f.rootElement.style.height=isNaN(c)?`${c}`:`${c}px`,f.rootElement.style.overflow="hidden");if(void 0!==t.width){let e=t.width;(0,eY.isFunction)(e)&&(e=e()),f.rootElement.style.width=isNaN(e)?`${e}`:`${e}px`}o||(f.view&&(f.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked(),f.view._wt.exportSettingsAsClassNames()),f.runHooks("afterUpdateSettings",t)),r.adjustRowsAndCols(),f.view&&!m&&(f.forceFullRender=!0,f.view.render(),f.view._wt.wtOverlays.adjustElementsSize()),!o&&f.view&&(""===u||""===c||void 0===c)&&u!==c&&f.view._wt.wtOverlays.updateMainScrollableElements()},this.getValue=function(){let t=f.getSelectedLast();if(x.getValue){if((0,eY.isFunction)(x.getValue))return x.getValue.call(f);if(t)return f.getData()[t[0][0]][x.getValue]}else if(t)return f.getDataAtCell(t[0],t[1])},this.getSettings=function(){return x},this.clear=function(){this.selectAll(),this.emptySelectedCells()},this.alter=function(t,e,i,n,o){r.alter(t,e,i,n,o)},this.getCell=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e,r=t;if(e>=0){if(this.columnIndexMapper.isHidden(this.toPhysicalColumn(e)))return null;n=this.columnIndexMapper.getRenderableFromVisualIndex(e)}if(t>=0){if(this.rowIndexMapper.isHidden(this.toPhysicalRow(t)))return null;r=this.rowIndexMapper.getRenderableFromVisualIndex(t)}return null===r||null===n||void 0===r||void 0===n?null:f.view.getCellAtCoords(f._createCellCoords(r,n),i)},this.getCoords=function(t){let e=this.view._wt.wtTable.getCoords(t);if(null===e)return null;let{row:i,col:n}=e,r=i,o=n;return i>=0&&(r=this.rowIndexMapper.getVisualFromRenderableIndex(i)),n>=0&&(o=this.columnIndexMapper.getVisualFromRenderableIndex(n)),f._createCellCoords(r,o)},this.colToProp=function(t){return i.colToProp(t)},this.propToCol=function(t){return i.propToCol(t)},this.toVisualRow=t=>this.rowIndexMapper.getVisualFromPhysicalIndex(t),this.toVisualColumn=t=>this.columnIndexMapper.getVisualFromPhysicalIndex(t),this.toPhysicalRow=t=>this.rowIndexMapper.getPhysicalFromVisualIndex(t),this.toPhysicalColumn=t=>this.columnIndexMapper.getPhysicalFromVisualIndex(t),this.getDataAtCell=function(t,e){return i.get(t,i.colToProp(e))},this.getDataAtRowProp=function(t,e){return i.get(t,e)},this.getDataAtCol=function(t){let e=[],n=i.getRange(f._createCellCoords(0,t),f._createCellCoords(x.data.length-1,t),i.DESTINATION_RENDERER);for(let t=0;t<n.length;t+=1)for(let i=0;i<n[t].length;i+=1)e.push(n[t][i]);return e},this.getDataAtProp=function(t){let e=[],n=i.getRange(f._createCellCoords(0,i.propToCol(t)),f._createCellCoords(x.data.length-1,i.propToCol(t)),i.DESTINATION_RENDERER);for(let t=0;t<n.length;t+=1)for(let i=0;i<n[t].length;i+=1)e.push(n[t][i]);return e},this.getSourceData=function(t,e,i,r){return void 0===t?n.getData():n.getByRange(f._createCellCoords(t,e),f._createCellCoords(i,r))},this.getSourceDataArray=function(t,e,i,r){return void 0===t?n.getData(!0):n.getByRange(f._createCellCoords(t,e),f._createCellCoords(i,r),!0)},this.getSourceDataAtCol=function(t){return n.getAtColumn(t)},this.setSourceDataAtCell=function(t,e,i,r){let o=A(t,e,i),a=this.hasHook("afterSetSourceDataAtCell"),s=[];a&&(0,iy.arrayEach)(o,t=>{let[e,i,r]=t;s.push([e,i,n.getAtCell(e,i),r])}),(0,iy.arrayEach)(o,t=>{let[e,i,r]=t;n.setAtCell(e,i,r)}),a&&this.runHooks("afterSetSourceDataAtCell",s,r),this.render();let l=f.getActiveEditor();l&&(0,eX.isDefined)(l.refreshValue)&&l.refreshValue()},this.getSourceDataAtRow=function(t){return n.getAtRow(t)},this.getSourceDataAtCell=function(t,e){return n.getAtCell(t,e)},this.getDataAtRow=function(t){return i.getRange(f._createCellCoords(t,0),f._createCellCoords(t,this.countCols()-1),i.DESTINATION_RENDERER)[0]||[]},this.getDataType=function(t,e,i,n){let r=void 0===t?[0,0,this.countRows(),this.countCols()]:[t,e,i,n],[o,a]=r,[,,s,l]=r,h=null,u=null;void 0===s&&(s=o),void 0===l&&(l=a);let c="mixed";return(0,i0.rangeEach)(Math.max(Math.min(o,s),0),Math.max(o,s),t=>{let e=!0;return(0,i0.rangeEach)(Math.max(Math.min(a,l),0),Math.max(a,l),i=>(u=this.getCellMeta(t,i).type,h?e=h===u:h=u,e)),c=e?u:"mixed",e}),c},this.removeCellMeta=function(t,e,i){let[n,r]=[this.toPhysicalRow(t),this.toPhysicalColumn(e)],o=b.getCellMetaKeyValue(n,r,i);!1!==f.runHooks("beforeRemoveCellMeta",t,e,i,o)&&(b.removeCellMeta(n,r,i),f.runHooks("afterRemoveCellMeta",t,e,i,o))},this.spliceCellsMeta=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(var i=arguments.length,n=Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];if(n.length>0&&!Array.isArray(n[0]))throw Error("The 3rd argument (cellMetaRows) has to be passed as an array of cell meta objects array.");e>0&&b.removeRow(this.toPhysicalRow(t),e),n.length>0&&(0,iy.arrayEach)(n.reverse(),e=>{b.createRow(this.toPhysicalRow(t)),(0,iy.arrayEach)(e,(e,i)=>this.setCellMetaObject(t,i,e))}),f.render()},this.setCellMetaObject=function(t,e,i){"object"==typeof i&&(0,e6.objectEach)(i,(i,n)=>{this.setCellMeta(t,e,n,i)})},this.setCellMeta=function(t,e,i,n){if(!1===f.runHooks("beforeSetCellMeta",t,e,i,n))return;let r=t,o=e;t<this.countRows()&&(r=this.toPhysicalRow(t)),e<this.countCols()&&(o=this.toPhysicalColumn(e)),b.setCellMeta(r,o,i,n),f.runHooks("afterSetCellMeta",t,e,i,n)},this.getCellsMeta=function(){return b.getCellsMeta()},this.getCellMeta=function(t,e){let i=this.toPhysicalRow(t),n=this.toPhysicalColumn(e);return null===i&&(i=t),null===n&&(n=e),b.getCellMeta(i,n,{visualRow:t,visualColumn:e})},this.getColumnMeta=function(t){return b.getColumnMeta(this.toPhysicalColumn(t))},this.getCellMetaAtRow=function(t){return b.getCellsMetaAtRow(t)},this.isColumnModificationAllowed=function(){return!("object"===f.dataType||x.columns)},this.getCellRenderer=function(t,e){let i="number"==typeof t?f.getCellMeta(t,e).renderer:t.renderer;return"string"==typeof i?nu(i):(0,eX.isUndefined)(i)?nu("text"):i},this.getCellEditor=function(t,e){let i="number"==typeof t?f.getCellMeta(t,e).editor:t.editor;return"string"==typeof i?(0,eK.getEditor)(i):(0,eX.isUndefined)(i)?(0,eK.getEditor)("text"):i},this.getCellValidator=function(t,e){let i="number"==typeof t?f.getCellMeta(t,e).validator:t.validator;return"string"==typeof i?ny(i):i},this.validateCells=function(t){this._validateCells(t)},this.validateRows=function(t,e){if(!Array.isArray(t))throw Error("validateRows parameter `rows` must be an array");this._validateCells(e,t)},this.validateColumns=function(t,e){if(!Array.isArray(t))throw Error("validateColumns parameter `columns` must be an array");this._validateCells(e,void 0,t)},this._validateCells=function(t,e,i){let n=new I;t&&(n.onQueueEmpty=t);let r=f.countRows()-1;for(;r>=0;){if(void 0!==e&&-1===e.indexOf(r)){r-=1;continue}let t=f.countCols()-1;for(;t>=0;){if(void 0!==i&&-1===i.indexOf(t)){t-=1;continue}n.addValidatorToQueue(),f.validateCell(f.getDataAtCell(r,t),f.getCellMeta(r,t),t=>{if("boolean"!=typeof t)throw Error("Validation error: result is not boolean");!1===t&&(n.valid=!1),n.removeValidatorFormQueue()},"validateCells"),t-=1}r-=1}n.checkIfQueueIsEmpty()},this.getRowHeader=function(t){let e=x.rowHeaders,i=t;return void 0!==i&&(i=f.runHooks("modifyRowHeader",i)),void 0===i?(e=[],(0,i0.rangeEach)(f.countRows()-1,t=>{e.push(f.getRowHeader(t))})):Array.isArray(e)&&void 0!==e[i]?e=e[i]:(0,eY.isFunction)(e)?e=e(i):e&&"string"!=typeof e&&"number"!=typeof e&&(e=i+1),e},this.hasRowHeaders=function(){return!!x.rowHeaders},this.hasColHeaders=function(){if(void 0!==x.colHeaders&&null!==x.colHeaders)return!!x.colHeaders;for(let t=0,e=f.countCols();t<e;t++)if(f.getColHeader(t))return!0;return!1},this.getColHeader=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=f.runHooks("modifyColHeader",t);if(void 0===i){let t=[],e=f.countCols();for(let i=0;i<e;i++)t.push(f.getColHeader(i));return t}let n=x.colHeaders,r=f.toPhysicalColumn(i),o=function(t){let e=[],i=f.countCols(),n=0;for(;n<i;n++)(0,eY.isFunction)(x.columns)&&x.columns(n)&&e.push(n);return e[t]}(r);return!1===x.colHeaders?n=null:x.columns&&(0,eY.isFunction)(x.columns)&&x.columns(o)&&x.columns(o).title?n=x.columns(o).title:x.columns&&x.columns[r]&&x.columns[r].title?n=x.columns[r].title:Array.isArray(x.colHeaders)&&void 0!==x.colHeaders[r]?n=x.colHeaders[r]:(0,eY.isFunction)(x.colHeaders)?n=x.colHeaders(r):x.colHeaders&&"string"!=typeof x.colHeaders&&"number"!=typeof x.colHeaders&&(n=a_(i)),n=f.runHooks("modifyColumnHeaderValue",n,t,e)},this._getColWidthFromSettings=function(t){let e;if(t>=0&&(e=f.getCellMeta(0,t).width),(void 0===e||e===x.width)&&(e=x.colWidths),null!=e){switch(typeof e){case"object":e=e[t];break;case"function":e=e(t)}"string"==typeof e&&(e=parseInt(e,10))}return e},this.getColWidth=function(t){let e=f._getColWidthFromSettings(t);return void 0===(e=f.runHooks("modifyColWidth",e,t))&&(e=50),e},this._getRowHeightFromSettings=function(t){let e=x.rowHeights;if(null!=e){switch(typeof e){case"object":e=e[t];break;case"function":e=e(t)}"string"==typeof e&&(e=parseInt(e,10))}return e},this.getRowHeight=function(t){let e=f._getRowHeightFromSettings(t);return f.runHooks("modifyRowHeight",e,t)},this.countSourceRows=function(){return n.countRows()},this.countSourceCols=function(){return n.countFirstRowKeys()},this.countRows=function(){return i.getLength()},this.countCols=function(){return Math.min(x.maxCols,this.columnIndexMapper.getNotTrimmedIndexesLength())},this.countRenderedRows=function(){return f.view._wt.drawn?f.view._wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return f.view._wt.drawn?f.view._wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return f.view._wt.drawn?f.view._wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return f.view._wt.drawn?f.view._wt.wtTable.getVisibleColumnsCount():-1},this.countRowHeaders=function(){return this.view.getRowHeadersCount()},this.countColHeaders=function(){return this.view.getColumnHeadersCount()},this.countEmptyRows=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=0;return(0,i0.rangeEachReverse)(f.countRows()-1,i=>{if(f.isEmptyRow(i))e+=1;else if(!0===t)return!1}),e},this.countEmptyCols=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=0;return(0,i0.rangeEachReverse)(f.countCols()-1,i=>{if(f.isEmptyCol(i))e+=1;else if(!0===t)return!1}),e},this.isEmptyRow=function(t){return x.isEmptyRow.call(f,t)},this.isEmptyCol=function(t){return x.isEmptyCol.call(f,t)},this.selectCell=function(t,e,i,n){let r=!(arguments.length>4)||void 0===arguments[4]||arguments[4],o=!(arguments.length>5)||void 0===arguments[5]||arguments[5];return!((0,eX.isUndefined)(t)||(0,eX.isUndefined)(e))&&this.selectCells([[t,e,i,n]],r,o)},this.selectCells=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[]],e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];!1===e&&s.suspend();let n=_.selectCells(t);return n&&i&&f.listen(),s.resume(),n},this.selectColumns=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2?arguments[2]:void 0;return _.selectColumns(t,e,i)},this.selectRows=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2?arguments[2]:void 0;return _.selectRows(t,e,i)},this.deselectCell=function(){_.deselect()},this.selectAll=function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2?arguments[2]:void 0;s.skipNextScrollCycle(),_.selectAll(t,e,i)};let D=(t,e)=>t.getNearestNotHiddenIndex(e,1,!0);this.scrollViewportTo=function(t){var e,i;let n,r,o,a;"number"==typeof t&&(t={row:arguments[0],col:arguments[1],verticalSnap:arguments[2]?"bottom":"top",horizontalSnap:arguments[3]?"end":"start",considerHiddenIndexes:null===(i=arguments[4])||void 0===i||i});let{row:s,col:l,verticalSnap:h,horizontalSnap:u,considerHiddenIndexes:c}=null!==(e=t)&&void 0!==e?e:{};void 0!==h&&(r=!(n="top"===h)),void 0!==u&&(a=!(o="start"===u));let d=s,p=l;if(void 0===c||c){let t=Number.isInteger(s)&&s>=0,e=Number.isInteger(l)&&l>=0,i=t?D(this.rowIndexMapper,s):void 0,n=e?D(this.columnIndexMapper,l):void 0;if(null===i||null===n)return!1;d=t?f.rowIndexMapper.getRenderableFromVisualIndex(i):s,p=e?f.columnIndexMapper.getRenderableFromVisualIndex(n):l}let g=Number.isInteger(d),m=Number.isInteger(p);return g&&d>=0&&m&&p>=0?f.view.scrollViewport(f._createCellCoords(d,p),n,a,r,o):g&&d>=0&&(m&&p<0||!m)?f.view.scrollViewportVertically(d,n,r):!!m&&p>=0&&(!!g&&d<0||!g)&&f.view.scrollViewportHorizontally(p,a,o)},this.scrollToFocusedCell=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};if(!this.selection.isSelected())return;this.addHookOnce("afterScroll",t);let{highlight:e}=this.getSelectedRangeLast();this.scrollViewportTo(e.toObject())?this.view.render():(this.removeHook("afterScroll",t),this._registerImmediate(()=>t()))},this.destroy=function(){if(f._clearTimeouts(),f._clearImmediates(),f.view&&f.view.destroy(),n&&n.destroy(),n=null,this.getShortcutManager().destroy(),b.clearCache(),u_.delete(this.guid),an(f)){let t=this.rootDocument.querySelector(".hot-display-license-info");t&&t.parentNode.removeChild(t)}(0,eG.empty)(f.rootElement),g.destroy(),o&&o.destroy(),f.batchExecution(()=>{f.rowIndexMapper.unregisterAll(),f.columnIndexMapper.unregisterAll(),C.getItems().forEach(t=>{let[,e]=t;e.destroy()}),C.clear(),f.runHooks("afterDestroy")},!0),(0,sa.default).getSingleton().destroy(f),(0,e6.objectEach)(f,(t,e,i)=>{(0,eY.isFunction)(t)?i[e]=()=>{throw Error(`The "${e}" method cannot be called because this Handsontable instance has been destroyed`)}:"guid"!==e&&(i[e]=null)}),f.isDestroyed=!0,i&&i.destroy(),i=null,r=null,_=null,o=null,f=null},this.getActiveEditor=function(){return o.getActiveEditor()},this.getFirstRenderedVisibleRow=function(){return f.view.getFirstRenderedVisibleRow()},this.getLastRenderedVisibleRow=function(){return f.view.getLastRenderedVisibleRow()},this.getFirstRenderedVisibleColumn=function(){return f.view.getFirstRenderedVisibleColumn()},this.getLastRenderedVisibleColumn=function(){return f.view.getLastRenderedVisibleColumn()},this.getFirstFullyVisibleRow=function(){return f.view.getFirstFullyVisibleRow()},this.getLastFullyVisibleRow=function(){return f.view.getLastFullyVisibleRow()},this.getFirstFullyVisibleColumn=function(){return f.view.getFirstFullyVisibleColumn()},this.getLastFullyVisibleColumn=function(){return f.view.getLastFullyVisibleColumn()},this.getFirstPartiallyVisibleRow=function(){return f.view.getFirstPartiallyVisibleRow()},this.getLastPartiallyVisibleRow=function(){return f.view.getLastPartiallyVisibleRow()},this.getFirstPartiallyVisibleColumn=function(){return f.view.getFirstPartiallyVisibleColumn()},this.getLastPartiallyVisibleColumn=function(){return f.view.getLastPartiallyVisibleColumn()},this.getPlugin=function(t){let e=(0,iJ.toUpperCaseFirst)(t);return"UndoRedo"===e?this.undoRedo:C.getItem(e)},this.getPluginName=function(t){return t===this.undoRedo?this.undoRedo.constructor.PLUGIN_KEY:C.getId(t)},this.getInstance=function(){return f},this.addHook=function(t,e,i){(0,sa.default).getSingleton().add(t,e,f,i)},this.hasHook=function(t){return(0,sa.default).getSingleton().has(t,f)||(0,sa.default).getSingleton().has(t)},this.addHookOnce=function(t,e,i){(0,sa.default).getSingleton().once(t,e,f,i)},this.removeHook=function(t,e){(0,sa.default).getSingleton().remove(t,e,f)},this.runHooks=function(t,e,i,n,r,o,a){return(0,sa.default).getSingleton().run(f,t,e,i,n,r,o,a)},this.getTranslatedPhrase=function(t,e){return lB(x.language,t,e)},this.toHTML=()=>iq(this),this.toTableElement=()=>{let t=this.rootDocument.createElement("div");return t.insertAdjacentHTML("afterbegin",iq(this)),t.firstElementChild},this.timeouts=[],this._registerTimeout=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t;"function"==typeof i&&(i=setTimeout(i,e)),this.timeouts.push(i)},this._clearTimeouts=function(){(0,iy.arrayEach)(this.timeouts,t=>{clearTimeout(t)})},this.immediates=[],this._registerImmediate=function(t){this.immediates.push(setImmediate(t))},this._clearImmediates=function(){(0,iy.arrayEach)(this.immediates,t=>{clearImmediate(t)})},this._getEditorManager=function(){return o},this.isRtl=function(){return"rtl"===f.rootWindow.getComputedStyle(f.rootElement).direction},this.isLtr=function(){return!f.isRtl()},this.getDirectionFactor=function(){return f.isLtr()?1:-1};let O=uy({handleEvent:()=>f.isListening(),beforeKeyDown:t=>this.runHooks("beforeKeyDown",t),afterKeyDown:t=>{this.isDestroyed||f.runHooks("afterDocumentKeyDown",t)},ownerWindow:this.rootWindow});this.addHook("beforeOnCellMouseDown",t=>{!1===t.ctrlKey&&!1===t.metaKey&&O.releasePressedKeys()}),this.getShortcutManager=function(){return O},this.getFocusManager=function(){return a},ne().forEach(t=>{let e=ni(t);C.addItem(t,new e(this))}),u=f,[uS,ux].forEach(t=>t(u)),O.setActiveContextName("grid"),(0,sa.default).getSingleton().run(f,"construct")}var sa=t4("10euP"),uT=t4("9PLwv");t4("1hIp0");var eG=t4("gFbQZ"),nZ=t4("4Pbrh");function uI(t,e,i,n,r,o,a){let s=a.ariaTags,l=[],h=[],u=[],c=[];a.className&&(0,eG.addClass)(e,a.className),a.readOnly?(l.push(a.readOnlyCellClassName),s&&c.push((0,nZ.A11Y_READONLY)())):s&&u.push((0,nZ.A11Y_READONLY)()[0]),!1===a.valid&&a.invalidCellClassName?(l.push(a.invalidCellClassName),s&&c.push((0,nZ.A11Y_INVALID)())):(h.push(a.invalidCellClassName),s&&u.push((0,nZ.A11Y_INVALID)()[0])),!1===a.wordWrap&&a.noWordWrapClassName&&l.push(a.noWordWrapClassName),!o&&a.placeholder&&l.push(a.placeholderCellClassName),(0,eG.removeClass)(e,h),(0,eG.addClass)(e,l),(0,eG.removeAttribute)(e,u),(0,eG.setAttribute)(e,c)}uI.RENDERER_TYPE="base";var eG=t4("gFbQZ"),eX=t4("gnaTS");function uR(t,e,i,n,r,o,a){uI.apply(this,[t,e,i,n,r,o,a]);let s=o;if(!s&&a.placeholder&&(s=a.placeholder),s=(0,eX.stringify)(s),a.trimWhitespace&&(s=s.trim()),a.rendererTemplate){(0,eG.empty)(e);let n=t.rootDocument.createElement("TEMPLATE");n.setAttribute("bind","{{}}"),n.innerHTML=a.rendererTemplate,HTMLTemplateElement.decorate(n),n.model=t.getSourceDataAtRow(i),e.appendChild(n)}else(0,eG.fastInnerText)(e,s)}uR.RENDERER_TYPE="text";const uE={CELL_TYPE:"text",editor:uT.TextEditor,renderer:uR};var uv=t4("3BsF4");function uA(t,e){let i=new uM(t,e||{},ai);return i.init(),i}hW(uE),uA.editors={BaseEditor:uv.BaseEditor},uA.Core=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new uM(t,e,ai)},uA.DefaultSettings=hG(),uA.hooks=(0,sa.default).getSingleton(),uA.CellCoords=rF,uA.CellRange=rG,uA.packageName="handsontable",uA.buildDate="07/02/2025 16:13:23",uA.version="14.6.2",uA.languages={dictionaryKeys:sc,getLanguageDictionary:lV,getLanguagesDictionaries:function(){return lN()},registerLanguageDictionary:lH,getTranslatedPhrase:lB},t4("1C6fS"),t4("1hIp0");var uT=t4("9PLwv"),eG=t4("gFbQZ"),eq=t4("7HxIw"),e6=t4("hwT6B");const uk="handsontableEditor";class uD extends uT.TextEditor{static get EDITOR_TYPE(){return"handsontable"}open(){super.open(),this.htEditor&&this.htEditor.destroy(),"none"===this.htContainer.style.display&&(this.htContainer.style.display=""),this.htEditor=new this.hot.constructor(this.htContainer,this.htOptions),this.htEditor.init(),this.htEditor.rootElement.style.display="",this.cellProperties.strict?this.htEditor.selectCell(0,0):this.htEditor.deselectCell(),(0,eG.setCaretPosition)(this.TEXTAREA,0,this.TEXTAREA.value.length),this.refreshDimensions()}close(){this.htEditor&&(this.htEditor.rootElement.style.display="none"),this.removeHooksByKey("beforeKeyDown"),super.close()}prepare(t,e,i,n,r,o){super.prepare(t,e,i,n,r,o);let a=this,s={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,autoWrapCol:!1,autoWrapRow:!1,ariaTags:!1,afterOnCellMouseDown(t,e){let i=this.getSourceData(e.row,e.col);void 0!==i&&a.setValue(i),a.hot.destroyEditor()},preventWheel:!0,layoutDirection:this.hot.isRtl()?"rtl":"ltr"};this.cellProperties.handsontable&&(0,e6.extend)(s,o.handsontable),this.htOptions=s}beginEditing(t,e){let i=this.hot.getSettings().onBeginEditing;i&&!1===i()||super.beginEditing(t,e)}createElements(){super.createElements();let t=this.hot.rootDocument.createElement("DIV");t.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(t),this.htContainer=t,this.assignHooks()}finishEditing(t,e,i){if(this.htEditor&&this.htEditor.isListening()&&this.hot.listen(),this.htEditor&&this.htEditor.getSelectedLast()){let t=this.htEditor.getValue();void 0!==t&&this.setValue(t)}super.finishEditing(t,e,i)}assignHooks(){this.hot.addHook("afterDestroy",()=>{this.htEditor&&this.htEditor.destroy()})}registerShortcuts(){let t=this.hot.getShortcutManager().getContext("editor");super.registerShortcuts();let e=(t,e)=>{let i=this.htEditor;if(void 0!==t&&(t<0||i.flipped&&t>i.countRows()-1?i.deselectCell():i.selectCell(t,0),i.getData().length))return e.preventDefault(),(0,eq.stopImmediatePropagation)(e),this.hot.listen(),this.TEXTAREA.focus(),!1};t.addShortcuts([{keys:[["ArrowUp"]],callback:t=>{let i;let n=this.htEditor;return!n.getSelectedLast()&&n.flipped?i=n.countRows()-1:n.getSelectedLast()&&(i=n.flipped?Math.max(0,n.getSelectedLast()[0]-1):n.getSelectedLast()[0]-1),e(i,t)},preventDefault:!1},{keys:[["ArrowDown"]],callback:t=>{let i;let n=this.htEditor;return n.getSelectedLast()||n.flipped?n.getSelectedLast()&&(n.flipped?i=n.getSelectedLast()[0]+1:n.flipped||(i=Math.min(n.countRows()-1,n.getSelectedLast()[0]+1))):i=0,e(i,t)},preventDefault:!1}],{group:uk,relativeToGroup:ue,position:"before"})}unregisterShortcuts(){super.unregisterShortcuts(),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(uk)}}var iy=t4("ceXML"),eG=t4("gFbQZ"),eX=t4("gnaTS"),iJ=t4("bO142"),eZ=t4("bCtEl"),e$=t4("eL8cl"),nZ=t4("4Pbrh");function uO(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function uP(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var uL=new WeakMap;class uN extends uD{constructor(){var t;super(...arguments),uO(this,"query",null),uO(this,"strippedChoices",[]),uO(this,"rawChoices",[]),t=this.hot.guid.slice(0,9),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,uL),uL.set(this,t),uO(this,"sortByRelevance",function(t,e,i){let n,r,o,a;let s=[],l=[],h=t.length,u=e.length;if(0===h){for(o=0;o<u;o++)l.push(o);return l}for(o=0;o<u;o++){if(r=(0,iJ.stripTags)((0,eX.stringify)(e[o])),i)a=r.indexOf(t);else{let e=this.cellProperties.locale;a=r.toLocaleLowerCase(e).indexOf(t.toLocaleLowerCase(e))}-1!==a&&(n=r.length-a-h,s.push({baseIndex:o,index:a,charsLeft:n,value:r}))}for(s.sort((t,e)=>{if(-1===e.index)return -1;if(-1===t.index)return 1;if(t.index<e.index)return -1;if(e.index<t.index)return 1;if(t.index===e.index){if(t.charsLeft<e.charsLeft)return -1;if(t.charsLeft>e.charsLeft)return 1}return 0}),o=0,u=s.length;o<u;o++)l.push(s[o].baseIndex);return l})}static get EDITOR_TYPE(){return"autocomplete"}getValue(){let t=this.rawChoices.find(t=>this.stripValueIfNeeded(t)===this.TEXTAREA.value);return(0,eX.isDefined)(t)?t:this.TEXTAREA.value}createElements(){super.createElements(),(0,eG.addClass)(this.htContainer,"autocompleteEditor"),(0,eG.addClass)(this.htContainer,-1===this.hot.rootWindow.navigator.platform.indexOf("Mac")?"":"htMacScroll"),this.hot.getSettings().ariaTags&&(0,eG.setAttribute)(this.TEXTAREA,[(0,nZ.A11Y_TEXT)(),(0,nZ.A11Y_COMBOBOX)(),(0,nZ.A11Y_HASPOPUP)("listbox"),(0,nZ.A11Y_AUTOCOMPLETE)()])}prepare(t,e,i,n,r,o){super.prepare(t,e,i,n,r,o),this.hot.getSettings().ariaTags&&(0,eG.setAttribute)(this.TEXTAREA,[(0,nZ.A11Y_EXPANDED)("false"),(0,nZ.A11Y_CONTROLS)(`${uL.get(uP(uL,this))}-listbox-${t}-${e}`)])}open(){super.open();let t=void 0===this.cellProperties.trimDropdown||this.cellProperties.trimDropdown,e=this.hot.getSettings().ariaTags,i=Array.isArray(this.cellProperties.source)?this.cellProperties.source:null,n=null==i?void 0:i.length,{row:r,col:o}=this;this.showEditableElement(),this.focus();let a=(0,eG.getScrollbarWidth)();0===a&&(0,e$.isMacOS)()&&(a+=15),this.addHook("beforeKeyDown",t=>this.onBeforeKeyDown(t)),this.htEditor.updateSettings({colWidths:t?[(0,eG.outerWidth)(this.TEXTAREA)-2]:void 0,width:t?(0,eG.outerWidth)(this.TEXTAREA)+a:void 0,autoColumnSize:!0,renderer:(t,r,o,a,s,l,h)=>{let u,c;uR(t,r,o,a,s,l,h);let{filteringCaseSensitive:d,allowHtml:p,locale:f}=this.cellProperties,g=this.query,m=(0,eX.stringify)(l);m&&!p&&-1!==(u=!0===d?m.indexOf(g):m.toLocaleLowerCase(f).indexOf(g.toLocaleLowerCase(f)))&&(c=m.substr(u,g.length),m=m.replace(c,`<strong>${c}</strong>`)),e&&(0,eG.setAttribute)(r,[(0,nZ.A11Y_OPTION)(),...i?[(0,nZ.A11Y_SETSIZE)(n)]:[],...i?[(0,nZ.A11Y_POSINSET)(i.indexOf(l)+1)]:[],["id",`${this.htEditor.rootElement.id}_${o}-${a}`]]),r.innerHTML=m},afterSelectionEnd:(t,i)=>{if(e){let e=this.htEditor.getCell(t,i,!0);(0,eG.setAttribute)(e,[(0,nZ.A11Y_SELECTED)()]),(0,eG.setAttribute)(this.TEXTAREA,...(0,nZ.A11Y_ACTIVEDESCENDANT)(e.id))}}}),e&&((0,eG.setAttribute)(this.htEditor.view._wt.wtOverlays.wtTable.TABLE,...(0,nZ.A11Y_PRESENTATION)()),(0,eG.setAttribute)(this.htEditor.rootElement,[(0,nZ.A11Y_LISTBOX)(),(0,nZ.A11Y_LIVE)("polite"),(0,nZ.A11Y_RELEVANT)("text"),["id",`${uL.get(uP(uL,this))}-listbox-${r}-${o}`]]),(0,eG.setAttribute)(this.TEXTAREA,...(0,nZ.A11Y_EXPANDED)("true"))),this.hot._registerTimeout(()=>{this.queryChoices(this.TEXTAREA.value)})}close(){this.removeHooksByKey("beforeKeyDown"),super.close(),this.hot.getSettings().ariaTags&&(0,eG.setAttribute)(this.TEXTAREA,[(0,nZ.A11Y_EXPANDED)("false")])}discardEditor(t){super.discardEditor(t),this.hot.view.render()}queryChoices(t){let e=this.cellProperties.source;this.query=t,"function"==typeof e?e.call(this.cellProperties,t,t=>{this.rawChoices=t,this.updateChoicesList(this.stripValuesIfNeeded(t))}):Array.isArray(e)?(this.rawChoices=e,this.updateChoicesList(this.stripValuesIfNeeded(e))):this.updateChoicesList([])}updateChoicesList(t){let e=(0,eG.getCaretPosition)(this.TEXTAREA),i=(0,eG.getSelectionEndPosition)(this.TEXTAREA),n=this.cellProperties.sortByRelevance,r=this.cellProperties.filter,o=null,a=null,s=t;n&&(o=this.sortByRelevance(this.stripValueIfNeeded(this.getValue()),s,this.cellProperties.filteringCaseSensitive));let l=Array.isArray(o)?o.length:0;if(!1===r)l&&(a=o[0]);else{let t=[];for(let e=0,i=s.length;e<i&&(!n||!(l<=e));e++)l?t.push(s[o[e]]):t.push(s[e]);a=0,s=t}this.strippedChoices=s,0===s.length?this.htEditor.rootElement.style.display="none":this.htEditor.rootElement.style.display="",this.htEditor.loadData((0,iy.pivot)([s])),s.length>0&&(this.updateDropdownDimensions(),this.flipDropdownIfNeeded(),!0===this.cellProperties.strict&&this.highlightBestMatchingChoice(a)),this.hot.listen(),(0,eG.setCaretPosition)(this.TEXTAREA,e,e===i?void 0:i)}flipDropdownIfNeeded(){let t=(0,eG.getTrimmingContainer)(this.hot.view._wt.wtTable.TABLE),e=t===this.hot.rootWindow,i=this.cellProperties.preventOverflow;if(e||!e&&(i||"horizontal"===i))return!1;let n=(0,eG.offset)(this.TEXTAREA),r=(0,eG.outerHeight)(this.TEXTAREA),o=this.getDropdownHeight(),a=t.scrollTop,s=(0,eG.outerHeight)(this.hot.view._wt.wtTable.THEAD),l=(0,eG.offset)(t),h=n.top-l.top-s+a,u=t.scrollHeight-h-s-r,c=o>u&&h>u;return c?this.flipDropdown(o):this.unflipDropdown(),this.limitDropdownIfNeeded(c?h:u,o),c}limitDropdownIfNeeded(t,e){if(e>t){let i=0,n=0,r=0,o=null;do i+=r=this.htEditor.getRowHeight(n)||this.htEditor.view._wt.getSetting("defaultRowHeight"),n+=1;while(i<t)o=i-r,this.htEditor.flipped&&(this.htEditor.rootElement.style.top=`${parseInt(this.htEditor.rootElement.style.top,10)+e-o}px`),this.setDropdownHeight(i-r)}}flipDropdown(t){let e=this.htEditor.rootElement.style;e.position="absolute",e.top=`${-t}px`,this.htEditor.flipped=!0}unflipDropdown(){let t=this.htEditor.rootElement.style;t.position="absolute",t.top="",this.htEditor.flipped=void 0}updateDropdownDimensions(){let t=this.htEditor.getColWidth(0)+(0,eG.getScrollbarWidth)(this.hot.rootDocument)+2,e=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:e?void 0:t}),this.htEditor.view._wt.wtTable.alignOverlaysWithTrimmingContainer()}setDropdownHeight(t){this.htEditor.updateSettings({height:t})}highlightBestMatchingChoice(t){"number"==typeof t?this.htEditor.selectCell(t,0,void 0,void 0,void 0,!1):this.htEditor.deselectCell()}getDropdownHeight(){let t=this.htEditor.getRowHeight(0)||23,e=this.cellProperties.visibleRows;return this.strippedChoices.length>=e?e*t:this.strippedChoices.length*t+8}stripValueIfNeeded(t){return this.stripValuesIfNeeded([t])[0]}stripValuesIfNeeded(t){let{allowHtml:e}=this.cellProperties,i=(0,iy.arrayMap)(t,t=>(0,eX.stringify)(t));return(0,iy.arrayMap)(i,t=>e?t:(0,iJ.stripTags)(t))}allowKeyEventPropagation(t){let e=this.htEditor.getSelectedRangeLast(),i={row:e?e.from.row:-1},n=!1;return t===eZ.KEY_CODES.ARROW_DOWN&&i.row>0&&i.row<this.htEditor.countRows()-1&&(n=!0),t===eZ.KEY_CODES.ARROW_UP&&i.row>-1&&(n=!0),n}onBeforeKeyDown(t){if((0,eZ.isPrintableChar)(t.keyCode)||t.keyCode===eZ.KEY_CODES.BACKSPACE||t.keyCode===eZ.KEY_CODES.DELETE||t.keyCode===eZ.KEY_CODES.INSERT){let e=10;t.keyCode===eZ.KEY_CODES.C&&(t.ctrlKey||t.metaKey)||(this.isOpened()||(e+=10),this.htEditor&&this.hot._registerTimeout(()=>{this.queryChoices(this.TEXTAREA.value)},e))}}}var uv=(t4("3BsF4"),t4("3BsF4")),eG=t4("gFbQZ");class uH extends uv.BaseEditor{static get EDITOR_TYPE(){return"checkbox"}beginEditing(t,e){if(e&&"mouseup"===e.type&&"TD"===e.target.nodeName){let t=this.TD.querySelector('input[type="checkbox"]');(0,eG.hasClass)(t,"htBadValue")||t.click()}}finishEditing(){}init(){}open(){}close(){}getValue(){}setValue(){}focus(){}}var uV=t4("iMgTM"),sa=t4("10euP");class uB extends uN{static get EDITOR_TYPE(){return"dropdown"}prepare(t,e,i,n,r,o){super.prepare(t,e,i,n,r,o),this.cellProperties.filter=!1,this.cellProperties.strict=!0}}(0,sa.default).getSingleton().add("beforeValidate",function(t,e,i){let n=this.propToCol(i);if(Number.isInteger(n)){let t=this.getCellMeta(e,n);t.editor===uB&&void 0===t.strict&&(t.filter=!1,t.strict=!0)}});var uT=t4("9PLwv");class uF extends uT.TextEditor{static get EDITOR_TYPE(){return"numeric"}}var uT=t4("9PLwv"),eG=t4("gFbQZ");class uW extends uT.TextEditor{static get EDITOR_TYPE(){return"password"}createElements(){super.createElements(),this.TEXTAREA=this.hot.rootDocument.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.setAttribute("data-hot-input",""),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,(0,eG.empty)(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}}var uv=t4("3BsF4"),eG=t4("gFbQZ"),e6=t4("hwT6B");const uz="ht_editor_visible",uj="selectEditor";class uU extends uv.BaseEditor{static get EDITOR_TYPE(){return"select"}init(){this.select=this.hot.rootDocument.createElement("select"),this.select.setAttribute("data-hot-input","true"),this.select.style.display="none",(0,eG.addClass)(this.select,"htSelectEditor"),this.hot.rootElement.appendChild(this.select),this.registerHooks()}getValue(){return this.select.value}setValue(t){this.select.value=t}open(){this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}close(){this._opened=!1,this.select.style.display="none",(0,eG.hasClass)(this.select,uz)&&(0,eG.removeClass)(this.select,uz),this.unregisterShortcuts(),this.clearHooks()}focus(){this.select.focus()}registerHooks(){this.addHook("afterScrollHorizontally",()=>this.refreshDimensions()),this.addHook("afterScrollVertically",()=>this.refreshDimensions()),this.addHook("afterColumnResize",()=>this.refreshDimensions()),this.addHook("afterRowResize",()=>this.refreshDimensions())}prepare(t,e,i,n,r,o){let a;super.prepare(t,e,i,n,r,o);let s=this.cellProperties.selectOptions;a="function"==typeof s?this.prepareOptions(s(this.row,this.col,this.prop)):this.prepareOptions(s),(0,eG.empty)(this.select),(0,e6.objectEach)(a,(t,e)=>{let i=this.hot.rootDocument.createElement("OPTION");i.value=e,(0,eG.fastInnerHTML)(i,t),this.select.appendChild(i)})}prepareOptions(t){let e={};if(Array.isArray(t))for(let i=0,n=t.length;i<n;i++)e[t[i]]=t[i];else"object"==typeof t&&(e=t);return e}refreshValue(){let t=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=t,this.setValue(t),this.refreshDimensions()}refreshDimensions(){if(this.state!==uv.EDITOR_STATE.EDITING)return;if(this.TD=this.getEditedCell(),!this.TD){this.close();return}let{top:t,start:e,width:i,height:n}=this.getEditedCellRect(),r=this.select.style;r.height=`${n}px`,r.width=`${i}px`,r.top=`${t}px`,r[this.hot.isRtl()?"right":"left"]=`${e}px`,r.margin="0px",(0,eG.addClass)(this.select,uz)}registerShortcuts(){let t=this.hot.getShortcutManager().getContext("editor");this.isInFullEditMode()&&t.addShortcuts([{keys:[["ArrowUp"]],callback:()=>{let t=this.select.selectedIndex-1;t>=0&&(this.select[t].selected=!0)}},{keys:[["ArrowDown"]],callback:()=>{let t=this.select.selectedIndex+1;t<=this.select.length-1&&(this.select[t].selected=!0)}}],{group:uj})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(uj)}}var uT=(t4("9PLwv"),t4("9PLwv"));class uG extends uT.TextEditor{static get EDITOR_TYPE(){return"time"}prepare(t,e,i,n,r,o){super.prepare(t,e,i,n,r,o),this.TEXTAREA.dir="ltr"}}var eK=t4("jxqWV"),eG=t4("gFbQZ");function uY(t,e,i,n,r,o,a){uI.apply(this,[t,e,i,n,r,o,a]),(0,eG.fastInnerHTML)(e,null==o?"":o,!1)}uY.RENDERER_TYPE="html";var eQ=t4("1k8Ev"),eG=t4("gFbQZ"),nZ=t4("4Pbrh");function uX(t,e,i,n,r,o,a){let{rootDocument:s}=t,l=a.allowHtml?uY:uR,h=s.createElement("DIV"),u=t.getSettings().ariaTags;if(h.className="htAutocompleteArrow",u&&h.setAttribute(...(0,nZ.A11Y_HIDDEN)()),h.appendChild(s.createTextNode(String.fromCharCode(9660))),l.apply(this,[t,e,i,n,r,o,a]),e.firstChild||e.appendChild(s.createTextNode(String.fromCharCode(160))),e.insertBefore(h,e.firstChild),(0,eG.addClass)(e,"htAutocomplete"),!t.acArrowListener){let r=new eQ.default(t);t.acArrowListener=function(r){(0,eG.hasClass)(r.target,"htAutocompleteArrow")&&t.view._wt.getSetting("onCellDblClick",null,t._createCellCoords(i,n),e)},r.addEventListener(t.rootElement,"mousedown",t.acArrowListener),t.addHookOnce("afterDestroy",()=>{r.destroy()})}}function u$(t,e,i,n,r,o,a){uX.apply(this,[t,e,i,n,r,o,a])}uX.RENDERER_TYPE="autocomplete",u$.RENDERER_TYPE="dropdown",t4("1hIp0");var eQ=t4("1k8Ev"),eG=t4("gFbQZ"),eX=t4("gnaTS"),sa=t4("10euP"),nZ=t4("4Pbrh");const uZ=new WeakMap,uq=new WeakMap,uK="data-row",uQ="data-col",uJ="checkbox";function u0(t,e,i,n,r,o,a){let{rootDocument:s}=t,l=t.getSettings().ariaTags;uI.apply(this,[t,e,i,n,r,o,a]),function(t){let e=uq.get(t);if(!e){let{rootElement:i}=t;(e=new eQ.default(t)).addEventListener(i,"click",e=>(function(t,e){let{target:i}=t;if(!u1(i)||!i.hasAttribute(uK)||!i.hasAttribute(uQ))return;let n=parseInt(i.getAttribute(uK),10),r=parseInt(i.getAttribute(uQ),10);e.getCellMeta(n,r).readOnly&&t.preventDefault()})(e,t)),e.addEventListener(i,"mouseup",e=>(function(t,e){let{target:i}=t;u1(i)&&i.hasAttribute(uK)&&i.hasAttribute(uQ)&&setTimeout(e.listen,10)})(e,t)),e.addEventListener(i,"change",e=>(function(t,e){let{target:i}=t;if(!u1(i)||!i.hasAttribute(uK)||!i.hasAttribute(uQ))return;let n=parseInt(i.getAttribute(uK),10),r=parseInt(i.getAttribute(uQ),10),o=e.getCellMeta(n,r);if(!o.readOnly){let i=null;i=t.target.checked?void 0===o.uncheckedTemplate||o.checkedTemplate:void 0!==o.uncheckedTemplate&&o.uncheckedTemplate,e.setDataAtCell(n,r,i)}})(e,t)),uq.set(t,e)}}(t);let h=function(t){let e=t.createElement("input");return e.className="htCheckboxRendererInput",e.type="checkbox",e.setAttribute("tabindex","-1"),e.cloneNode(!1)}(s),u=a.label,c=!1;if(void 0===a.checkedTemplate&&(a.checkedTemplate=!0),void 0===a.uncheckedTemplate&&(a.uncheckedTemplate=!1),(0,eG.empty)(e),o===a.checkedTemplate||(0,eX.stringify)(o).toLocaleLowerCase(a.locale)===(0,eX.stringify)(a.checkedTemplate).toLocaleLowerCase(a.locale)?h.checked=!0:o===a.uncheckedTemplate||(0,eX.stringify)(o).toLocaleLowerCase(a.locale)===(0,eX.stringify)(a.uncheckedTemplate).toLocaleLowerCase(a.locale)?h.checked=!1:(0,eX.isEmpty)(o)?(0,eG.addClass)(h,"noValue"):(h.style.display="none",(0,eG.addClass)(h,"htBadValue"),c=!0),(0,eG.setAttribute)(h,[[uK,i],[uQ,n]]),l&&(0,eG.setAttribute)(h,[(0,nZ.A11Y_LABEL)(h.checked?t.getTranslatedPhrase(lE):t.getTranslatedPhrase(lA)),(0,nZ.A11Y_CHECKED)(h.checked),(0,nZ.A11Y_CHECKBOX)()]),!c&&u){let a="";if(u.value)a="function"==typeof u.value?u.value.call(this,i,n,r,o):u.value;else if(u.property){let e=t.getDataAtRowProp(i,u.property);a=null!==e?e:""}let l=function(t,e,i){let n=t.createElement("label");return n.className=`htCheckboxRendererLabel ${i?"fullWidth":""}`,n.appendChild(t.createTextNode(e)),n.cloneNode(!0)}(s,a,!0!==u.separated);"before"===u.position?u.separated?(e.appendChild(l),e.appendChild(h)):(l.appendChild(h),h=l):u.position&&"after"!==u.position||(u.separated?(e.appendChild(h),e.appendChild(l)):(l.insertBefore(h,l.firstChild),h=l))}function d(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=t.getSelectedRange(),n=[],r=new Map,o=[],a=0;if(i){for(let s=0;s<i.length;s++){let{row:l,col:h}=i[s].getTopStartCorner(),{row:u,col:c}=i[s].getBottomEndCorner();for(let i=l;i<=u;i+=1)for(let s=h;s<=c;s+=1){let l=t.getCellMeta(i,s),h={checkedTemplate:l.checkedTemplate,uncheckedTemplate:l.uncheckedTemplate};if("checkbox"!==l.type){!0!==e||l.readOnly||(r.has(n.length)?r.set(n.length,[...r.get(n.length),[i,s,null]]):r.set(n.length,[[i,s,null]]));continue}if(!0===l.readOnly)continue;void 0===l.checkedTemplate&&(l.checkedTemplate=!0),void 0===l.uncheckedTemplate&&(l.uncheckedTemplate=!1);let u=t.getDataAtCell(i,s);!1===e?[l.checkedTemplate,l.checkedTemplate.toString()].includes(u)?o.push([i,s,l.uncheckedTemplate,h]):[l.uncheckedTemplate,l.uncheckedTemplate.toString(),null,void 0].includes(u)&&o.push([i,s,l.checkedTemplate,h]):o.push([i,s,l.uncheckedTemplate,h]),a+=1}n.push(a),a=0}(o=o.every(t=>{let[,,e]=t;return e===o[0][2]})?o.map(t=>{let[e,i,n]=t;return[e,i,n]}):o.map(t=>{let[e,i,,n]=t;return[e,i,n.checkedTemplate]})).length>0&&n.forEach((e,i)=>{let n=o.splice(0,e);r.size&&r.has(i)&&(n=[...n,...r.get(i)]),t.setDataAtCell(n)})}}function p(){let e=t.getSelectedRange();if(e){for(let i=0;i<e.length;i++){let n=e[i].getTopStartCorner(),r=e[i].getBottomEndCorner();for(let e=n.row;e<=r.row;e++)for(let i=n.col;i<=r.col;i++){let n=t.getCellMeta(e,i),r=t.getCell(e,i);if(null==r||r.querySelectorAll("input[type=checkbox]").length>0&&!n.readOnly)return!0}}return!1}}u&&(!u||u.separated)||e.appendChild(h),c&&e.appendChild(s.createTextNode("#bad-value#")),uZ.has(t)||(uZ.set(t,!0),t.getShortcutManager().getContext("grid").addShortcuts([{keys:[["space"]],callback:()=>(d(),!p()),runOnlyIf:()=>{var e;return null===(e=t.getSelectedRangeLast())||void 0===e?void 0:e.highlight.isCell()}},{keys:[["enter"]],callback:()=>(d(),!p()),runOnlyIf:()=>{let e=t.getSelectedRangeLast();return t.getSettings().enterBeginsEditing&&(null==e?void 0:e.isSingle())&&e.highlight.isCell()}},{keys:[["delete"],["backspace"]],callback:()=>(d(!0),!p()),runOnlyIf:()=>{var e;return null===(e=t.getSelectedRangeLast())||void 0===e?void 0:e.highlight.isCell()}}],{group:"checkboxRenderer",relativeToGroup:ue,position:"before"}))}function u1(t){return"INPUT"===t.tagName&&"checkbox"===t.getAttribute("type")}function u2(t,e,i,n,r,o,a){uX.apply(this,[t,e,i,n,r,o,a])}(0,sa.default).getSingleton().add("modifyAutoColumnSizeSeed",function(t,e,i){let{label:n,type:r,row:o,column:a,prop:s}=e;if(r===uJ){if(n){let{value:e,property:r}=n,l=i;if(e)l="function"==typeof e?e(o,a,s,i):e;else if(r){let t=this.getDataAtRowProp(o,r);l=null!==t?t:i}t=l}return t}}),u0.RENDERER_TYPE=uJ,u2.RENDERER_TYPE="handsontable",t4("1hIp0");var u5={};u5=(function t(e,i,n){function r(a,s){if(!i[a]){if(!e[a]){var l=void 0;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var h=Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){return r(e[a][1][t]||t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var o=void 0,a=0;a<n.length;a++)r(n[a]);return r})({1:[function(t,e,i){!function(t){var i,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,r=Math.ceil,o=Math.floor,a="[BigNumber Error] ",s=a+"Number primitive has more than 15 significant digits: ",l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function h(t){var e=0|t;return 0<t||t===e?e:e-1}function u(t){for(var e,i,n=1,r=t.length,o=t[0]+"";n<r;){for(i=14-(e=t[n++]+"").length;i--;e="0"+e);o+=e}for(r=o.length;48===o.charCodeAt(--r););return o.slice(0,r+1||1)}function c(t,e){var i,n,r=t.c,o=e.c,a=t.s,s=e.s,l=t.e,h=e.e;if(!a||!s)return null;if(i=r&&!r[0],n=o&&!o[0],i||n)return i?n?0:-s:a;if(a!=s)return a;if(i=a<0,n=l==h,!r||!o)return n?0:!r^i?1:-1;if(!n)return h<l^i?1:-1;for(s=(l=r.length)<(h=o.length)?l:h,a=0;a<s;a++)if(r[a]!=o[a])return r[a]>o[a]^i?1:-1;return l==h?0:h<l^i?1:-1}function d(t,e,i,n){if(t<e||i<t||t!==(t<0?r(t):o(t)))throw Error(a+(n||"Argument")+("number"==typeof t?t<e||i<t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function p(t){var e=t.c.length-1;return h(t.e/14)==e&&t.c[e]%2!=0}function f(t,e){return(1<t.length?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function g(t,e,i){var n,r;if(e<0){for(r=i+".";++e;r+=i);t=r+t}else if(++e>(n=t.length)){for(r=i,e-=n;--e;r+=i);t+=r}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}(i=function t(e){var i,m,y,w,b,x,S,C,_,M=V.prototype={constructor:V,toString:null,valueOf:null},T=new V(1),I=20,R=4,E=-7,A=21,k=-1e7,D=1e7,O=!1,P=1,L=0,N={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz";function V(t,e){var i,r,a,l,h,u,c,p,f=this;if(!(f instanceof V))return new V(t,e);if(null==e){if(t instanceof V)return f.s=t.s,f.e=t.e,void(f.c=(t=t.c)?t.slice():t);if((u="number"==typeof t)&&0*t==0){if(f.s=1/t<0?(t=-t,-1):1,t===~~t){for(l=0,h=t;10<=h;h/=10,l++);return f.e=l,void(f.c=[t])}p=String(t)}else{if(p=String(t),!n.test(p))return y(f,p,u);f.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}-1<(l=p.indexOf("."))&&(p=p.replace(".","")),0<(h=p.search(/e/i))?(l<0&&(l=h),l+=+p.slice(h+1),p=p.substring(0,h)):l<0&&(l=p.length)}else{if(d(e,2,H.length,"Base"),p=String(t),10==e)return z(f=new V(t instanceof V?t:p),I+f.e+1,R);if(u="number"==typeof t){if(0*t!=0)return y(f,p,u,e);if(f.s=1/t<0?(p=p.slice(1),-1):1,V.DEBUG&&15<p.replace(/^0\.0*|\./,"").length)throw Error(s+t);u=!1}else f.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(i=H.slice(0,e),l=h=0,c=p.length;h<c;h++)if(0>i.indexOf(r=p.charAt(h))){if("."==r){if(l<h){l=c;continue}}else if(!a&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){a=!0,h=-1,l=0;continue}return y(f,String(t),u,e)}-1<(l=(p=m(p,e,10,f.s)).indexOf("."))?p=p.replace(".",""):l=p.length}for(h=0;48===p.charCodeAt(h);h++);for(c=p.length;48===p.charCodeAt(--c););if(p=p.slice(h,++c)){if(c-=h,u&&V.DEBUG&&15<c&&(9007199254740991<t||t!==o(t)))throw Error(s+f.s*t);if(D<(l=l-h-1))f.c=f.e=null;else if(l<k)f.c=[f.e=0];else{if(f.e=l,f.c=[],h=(l+1)%14,l<0&&(h+=14),h<c){for(h&&f.c.push(+p.slice(0,h)),c-=14;h<c;)f.c.push(+p.slice(h,h+=14));h=14-(p=p.slice(h)).length}else h-=c;for(;h--;p+="0");f.c.push(+p)}}else f.c=[f.e=0]}function B(t,e,i,n){var r,o,a,s,l;if(null==i?i=R:d(i,0,8),!t.c)return t.toString();if(r=t.c[0],a=t.e,null==e)l=u(t.c),l=1==n||2==n&&(a<=E||A<=a)?f(l,a):g(l,a,"0");else if(o=(t=z(new V(t),e,i)).e,s=(l=u(t.c)).length,1==n||2==n&&(e<=o||o<=E)){for(;s<e;l+="0",s++);l=f(l,o)}else if(e-=a,l=g(l,o,"0"),s<o+1){if(0<--e)for(l+=".";e--;l+="0");}else if(0<(e+=o-s))for(o+1==s&&(l+=".");e--;l+="0");return t.s<0&&r?"-"+l:l}function F(t,e){for(var i,n=1,r=new V(t[0]);n<t.length;n++){if(!(i=new V(t[n])).s){r=i;break}e.call(r,i)&&(r=i)}return r}function W(t,e,i){for(var n=1,r=e.length;!e[--r];e.pop());for(r=e[0];10<=r;r/=10,n++);return(i=n+14*i-1)>D?t.c=t.e=null:t.c=i<k?[t.e=0]:(t.e=i,e),t}function z(t,e,i,n){var a,s,h,u,c,d,p,f=t.c;if(f){t:{for(a=1,u=f[0];10<=u;u/=10,a++);if((s=e-a)<0)s+=14,h=e,p=(c=f[d=0])/l[a-h-1]%10|0;else if((d=r((s+1)/14))>=f.length){if(!n)break t;for(;f.length<=d;f.push(0));c=p=0,h=(s%=14)-14+(a=1)}else{for(c=u=f[d],a=1;10<=u;u/=10,a++);p=(h=(s%=14)-14+a)<0?0:c/l[a-h-1]%10|0}if(n=n||e<0||null!=f[d+1]||(h<0?c:c%l[a-h-1]),n=i<4?(p||n)&&(0==i||i==(t.s<0?3:2)):5<p||5==p&&(4==i||n||6==i&&(0<s?0<h?c/l[a-h]:0:f[d-1])%10&1||i==(t.s<0?8:7)),e<1||!f[0])return f.length=0,n?(e-=t.e+1,f[0]=l[(14-e%14)%14],t.e=-e||0):f[0]=t.e=0,t;if(0==s?(f.length=d,u=1,d--):(f.length=d+1,u=l[14-s],f[d]=0<h?o(c/l[a-h]%l[h])*u:0),n)for(;;){if(0==d){for(s=1,h=f[0];10<=h;h/=10,s++);for(h=f[0]+=u,u=1;10<=h;h/=10,u++);s!=u&&(t.e++,1e14==f[0]&&(f[0]=1));break}if(f[d]+=u,1e14!=f[d])break;f[d--]=0,u=1}for(s=f.length;0===f[--s];f.pop());}t.e>D?t.c=t.e=null:t.e<k&&(t.c=[t.e=0])}return t}function j(t){var e,i=t.e;return null===i?t.toString():(e=u(t.c),e=i<=E||A<=i?f(e,i):g(e,i,"0"),t.s<0?"-"+e:e)}return V.clone=t,V.ROUND_UP=0,V.ROUND_DOWN=1,V.ROUND_CEIL=2,V.ROUND_FLOOR=3,V.ROUND_HALF_UP=4,V.ROUND_HALF_DOWN=5,V.ROUND_HALF_EVEN=6,V.ROUND_HALF_CEIL=7,V.ROUND_HALF_FLOOR=8,V.EUCLID=9,V.config=V.set=function(t){var e,i;if(null!=t){if("object"!=typeof t)throw Error(a+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(d(i=t[e],0,1e9,e),I=i),t.hasOwnProperty(e="ROUNDING_MODE")&&(d(i=t[e],0,8,e),R=i),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((i=t[e])&&i.pop?(d(i[0],-1e9,0,e),d(i[1],0,1e9,e),E=i[0],A=i[1]):(d(i,-1e9,1e9,e),E=-(A=i<0?-i:i))),t.hasOwnProperty(e="RANGE")){if((i=t[e])&&i.pop)d(i[0],-1e9,-1,e),d(i[1],1,1e9,e),k=i[0],D=i[1];else{if(d(i,-1e9,1e9,e),!i)throw Error(a+e+" cannot be zero: "+i);k=-(D=i<0?-i:i)}}if(t.hasOwnProperty(e="CRYPTO")){if((i=t[e])!==!!i)throw Error(a+e+" not true or false: "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw O=!i,Error(a+"crypto unavailable");O=i}else O=i}if(t.hasOwnProperty(e="MODULO_MODE")&&(d(i=t[e],0,9,e),P=i),t.hasOwnProperty(e="POW_PRECISION")&&(d(i=t[e],0,1e9,e),L=i),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(i=t[e]))throw Error(a+e+" not an object: "+i);N=i}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(i=t[e])||/^.$|[+-.\s]|(.).*\1/.test(i))throw Error(a+e+" invalid: "+i);H=i}}return{DECIMAL_PLACES:I,ROUNDING_MODE:R,EXPONENTIAL_AT:[E,A],RANGE:[k,D],CRYPTO:O,MODULO_MODE:P,POW_PRECISION:L,FORMAT:N,ALPHABET:H}},V.isBigNumber=function(t){return t instanceof V||t&&!0===t._isBigNumber||!1},V.maximum=V.max=function(){return F(arguments,M.lt)},V.minimum=V.min=function(){return F(arguments,M.gt)},V.random=(w=9007199254740992*Math.random()&2097151?function(){return o(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,i,n,s,h,u=0,c=[],p=new V(T);if(null==t?t=I:d(t,0,1e9),s=r(t/14),O){if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(s*=2));u<s;)9e15<=(h=131072*e[u]+(e[u+1]>>>11))?(i=crypto.getRandomValues(new Uint32Array(2)),e[u]=i[0],e[u+1]=i[1]):(c.push(h%1e14),u+=2);u=s/2}else{if(!crypto.randomBytes)throw O=!1,Error(a+"crypto unavailable");for(e=crypto.randomBytes(s*=7);u<s;)9e15<=(h=281474976710656*(31&e[u])+1099511627776*e[u+1]+4294967296*e[u+2]+16777216*e[u+3]+(e[u+4]<<16)+(e[u+5]<<8)+e[u+6])?crypto.randomBytes(7).copy(e,u):(c.push(h%1e14),u+=7);u=s/7}}if(!O)for(;u<s;)(h=w())<9e15&&(c[u++]=h%1e14);for(s=c[--u],t%=14,s&&t&&(h=l[14-t],c[u]=o(s/h)*h);0===c[u];c.pop(),u--);if(u<0)c=[n=0];else{for(n=-1;0===c[0];c.splice(0,1),n-=14);for(u=1,h=c[0];10<=h;h/=10,u++);u<14&&(n-=14-u)}return p.e=n,p.c=c,p}),V.sum=function(){for(var t=1,e=arguments,i=new V(e[0]);t<e.length;)i=i.plus(e[t++]);return i},m=function(){var t="0123456789";function e(t,e,i,n){for(var r,o,a=[0],s=0,l=t.length;s<l;){for(o=a.length;o--;a[o]*=e);for(a[0]+=n.indexOf(t.charAt(s++)),r=0;r<a.length;r++)a[r]>i-1&&(null==a[r+1]&&(a[r+1]=0),a[r+1]+=a[r]/i|0,a[r]%=i)}return a.reverse()}return function(n,r,o,a,s){var l,h,c,d,p,f,m,y,w=n.indexOf("."),b=I,x=R;for(0<=w&&(d=L,L=0,n=n.replace(".",""),f=(y=new V(r)).pow(n.length-w),L=d,y.c=e(g(u(f.c),f.e,"0"),10,o,t),y.e=y.c.length),c=d=(m=e(n,r,o,s?(l=H,t):(l=t,H))).length;0==m[--d];m.pop());if(!m[0])return l.charAt(0);if(w<0?--c:(f.c=m,f.e=c,f.s=a,m=(f=i(f,y,b,x,o)).c,p=f.r,c=f.e),w=m[h=c+b+1],d=o/2,p=p||h<0||null!=m[h+1],p=x<4?(null!=w||p)&&(0==x||x==(f.s<0?3:2)):d<w||w==d&&(4==x||p||6==x&&1&m[h-1]||x==(f.s<0?8:7)),h<1||!m[0])n=p?g(l.charAt(1),-b,l.charAt(0)):l.charAt(0);else{if(m.length=h,p)for(--o;++m[--h]>o;)m[h]=0,h||(++c,m=[1].concat(m));for(d=m.length;!m[--d];);for(w=0,n="";w<=d;n+=l.charAt(m[w++]));n=g(n,c,l.charAt(0))}return n}}(),i=function(){function t(t,e,i){var n,r,o,a,s=0,l=t.length,h=e%1e7,u=e/1e7|0;for(t=t.slice();l--;)s=((r=h*(o=t[l]%1e7)+(n=u*o+(a=t[l]/1e7|0)*h)%1e7*1e7+s)/i|0)+(n/1e7|0)+u*a,t[l]=r%i;return s&&(t=[s].concat(t)),t}function e(t,e,i,n){var r,o;if(i!=n)o=n<i?1:-1;else for(r=o=0;r<i;r++)if(t[r]!=e[r]){o=t[r]>e[r]?1:-1;break}return o}function i(t,e,i,n){for(var r=0;i--;)t[i]-=r,r=t[i]<e[i]?1:0,t[i]=r*n+t[i]-e[i];for(;!t[0]&&1<t.length;t.splice(0,1));}return function(n,r,a,s,l){var u,c,d,p,f,g,m,y,w,b,x,S,C,_,M,T,I,R=n.s==r.s?1:-1,E=n.c,A=r.c;if(!(E&&E[0]&&A&&A[0]))return new V(n.s&&r.s&&(E?!A||E[0]!=A[0]:A)?E&&0==E[0]||!A?0*R:R/0:NaN);for(w=(y=new V(R)).c=[],R=a+(c=n.e-r.e)+1,l||(l=1e14,c=h(n.e/14)-h(r.e/14),R=R/14|0),d=0;A[d]==(E[d]||0);d++);if(A[d]>(E[d]||0)&&c--,R<0)w.push(1),p=!0;else{for(_=E.length,T=A.length,R+=2,1<(f=o(l/(A[d=0]+1)))&&(A=t(A,f,l),E=t(E,f,l),T=A.length,_=E.length),C=T,x=(b=E.slice(0,T)).length;x<T;b[x++]=0);I=[0].concat(I=A.slice()),M=A[0],A[1]>=l/2&&M++;do{if(f=0,(u=e(A,b,T,x))<0){if(S=b[0],T!=x&&(S=S*l+(b[1]||0)),1<(f=o(S/M)))for(l<=f&&(f=l-1),m=(g=t(A,f,l)).length,x=b.length;1==e(g,b,m,x);)f--,i(g,T<m?I:A,m,l),m=g.length,u=1;else 0==f&&(u=f=1),m=(g=A.slice()).length;if(m<x&&(g=[0].concat(g)),i(b,g,x,l),x=b.length,-1==u)for(;1>e(A,b,T,x);)f++,i(b,T<x?I:A,x,l),x=b.length}else 0===u&&(f++,b=[0]);w[d++]=f,b[0]?b[x++]=E[C]||0:(b=[E[C]],x=1)}while((C++<_||null!=b[0])&&R--)p=null!=b[0],w[0]||w.splice(0,1)}if(1e14==l){for(d=1,R=w[0];10<=R;R/=10,d++);z(y,a+(y.e=d+14*c-1)+1,s,p)}else y.e=c,y.r=+p;return y}}(),b=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,S=/^\.([^.]+)$/,C=/^-?(Infinity|NaN)$/,_=/^\s*\+(?=[\w.])|^\s+|\s+$/g,y=function(t,e,i,n){var r,o=i?e:e.replace(_,"");if(C.test(o))t.s=isNaN(o)?null:o<0?-1:1,t.c=t.e=null;else{if(!i&&(o=o.replace(b,function(t,e,i){return r="x"==(i=i.toLowerCase())?16:"b"==i?2:8,n&&n!=r?t:e}),n&&(r=n,o=o.replace(x,"$1").replace(S,"0.$1")),e!=o))return new V(o,r);if(V.DEBUG)throw Error(a+"Not a"+(n?" base "+n:"")+" number: "+e);t.c=t.e=t.s=null}},M.absoluteValue=M.abs=function(){var t=new V(this);return t.s<0&&(t.s=1),t},M.comparedTo=function(t,e){return c(this,new V(t,e))},M.decimalPlaces=M.dp=function(t,e){var i,n,r;if(null!=t)return d(t,0,1e9),null==e?e=R:d(e,0,8),z(new V(this),t+this.e+1,e);if(!(i=this.c))return null;if(n=((r=i.length-1)-h(this.e/14))*14,r=i[r])for(;r%10==0;r/=10,n--);return n<0&&(n=0),n},M.dividedBy=M.div=function(t,e){return i(this,new V(t,e),I,R)},M.dividedToIntegerBy=M.idiv=function(t,e){return i(this,new V(t,e),0,1)},M.exponentiatedBy=M.pow=function(t,e){var i,n,s,l,h,u,c,d,f=this;if((t=new V(t)).c&&!t.isInteger())throw Error(a+"Exponent not an integer: "+j(t));if(null!=e&&(e=new V(e)),h=14<t.e,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!t.c||!t.c[0])return d=new V(Math.pow(+j(f),h?2-p(t):+j(t))),e?d.mod(e):d;if(u=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new V(NaN);(n=!u&&f.isInteger()&&e.isInteger())&&(f=f.mod(e))}else{if(9<t.e&&(0<f.e||f.e<-1||(0==f.e?1<f.c[0]||h&&24e7<=f.c[1]:f.c[0]<8e13||h&&f.c[0]<=9999975e7)))return l=f.s<0&&p(t)?-0:0,-1<f.e&&(l=1/l),new V(u?1/l:l);L&&(l=r(L/14+2))}for(c=h?(i=new V(.5),u&&(t.s=1),p(t)):(s=Math.abs(+j(t)))%2,d=new V(T);;){if(c){if(!(d=d.times(f)).c)break;l?d.c.length>l&&(d.c.length=l):n&&(d=d.mod(e))}if(s){if(0===(s=o(s/2)))break;c=s%2}else if(z(t=t.times(i),t.e+1,1),14<t.e)c=p(t);else{if(0==(s=+j(t)))break;c=s%2}f=f.times(f),l?f.c&&f.c.length>l&&(f.c.length=l):n&&(f=f.mod(e))}return n?d:(u&&(d=T.div(d)),e?d.mod(e):l?z(d,L,R,void 0):d)},M.integerValue=function(t){var e=new V(this);return null==t?t=R:d(t,0,8),z(e,e.e+1,t)},M.isEqualTo=M.eq=function(t,e){return 0===c(this,new V(t,e))},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(t,e){return 0<c(this,new V(t,e))},M.isGreaterThanOrEqualTo=M.gte=function(t,e){return 1===(e=c(this,new V(t,e)))||0===e},M.isInteger=function(){return!!this.c&&h(this.e/14)>this.c.length-2},M.isLessThan=M.lt=function(t,e){return 0>c(this,new V(t,e))},M.isLessThanOrEqualTo=M.lte=function(t,e){return -1===(e=c(this,new V(t,e)))||0===e},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return 0<this.s},M.isZero=function(){return!!this.c&&0==this.c[0]},M.minus=function(t,e){var i,n,r,o,a=this.s;if(e=(t=new V(t,e)).s,!a||!e)return new V(NaN);if(a!=e)return t.s=-e,this.plus(t);var s=this.e/14,l=t.e/14,u=this.c,c=t.c;if(!s||!l){if(!u||!c)return u?(t.s=-e,t):new V(c?this:NaN);if(!u[0]||!c[0])return c[0]?(t.s=-e,t):new V(u[0]?this:3==R?-0:0)}if(s=h(s),l=h(l),u=u.slice(),a=s-l){for((r=(o=a<0)?(a=-a,u):(l=s,c)).reverse(),e=a;e--;r.push(0));r.reverse()}else for(n=(o=(a=u.length)<(e=c.length))?a:e,a=e=0;e<n;e++)if(u[e]!=c[e]){o=u[e]<c[e];break}if(o&&(r=u,u=c,c=r,t.s=-t.s),0<(e=(n=c.length)-(i=u.length)))for(;e--;u[i++]=0);for(e=1e14-1;a<n;){if(u[--n]<c[n]){for(i=n;i&&!u[--i];u[i]=e);--u[i],u[n]+=1e14}u[n]-=c[n]}for(;0==u[0];u.splice(0,1),--l);return u[0]?W(t,u,l):(t.s=3==R?-1:1,t.c=[t.e=0],t)},M.modulo=M.mod=function(t,e){var n,r;return t=new V(t,e),this.c&&t.s&&(!t.c||t.c[0])?t.c&&(!this.c||this.c[0])?(9==P?(r=t.s,t.s=1,n=i(this,t,0,3),t.s=r,n.s*=r):n=i(this,t,0,P),(t=this.minus(n.times(t))).c[0]||1!=P||(t.s=this.s),t):new V(this):new V(NaN)},M.multipliedBy=M.times=function(t,e){var i,n,r,o,a,s,l,u,c,d,p,f,g,m=this.c,y=(t=new V(t,e)).c;if(!(m&&y&&m[0]&&y[0]))return this.s&&t.s&&(!m||m[0]||y)&&(!y||y[0]||m)?(t.s*=this.s,m&&y?(t.c=[0],t.e=0):t.c=t.e=null):t.c=t.e=t.s=null,t;for(n=h(this.e/14)+h(t.e/14),t.s*=this.s,(l=m.length)<(d=y.length)&&(g=m,m=y,y=g,r=l,l=d,d=r),r=l+d,g=[];r--;g.push(0));for(r=d;0<=--r;){for(i=0,p=y[r]%1e7,f=y[r]/1e7|0,o=r+(a=l);r<o;)i=((u=p*(u=m[--a]%1e7)+(s=f*u+(c=m[a]/1e7|0)*p)%1e7*1e7+g[o]+i)/1e14|0)+(s/1e7|0)+f*c,g[o--]=u%1e14;g[o]=i}return i?++n:g.splice(0,1),W(t,g,n)},M.negated=function(){var t=new V(this);return t.s=-t.s||null,t},M.plus=function(t,e){var i,n=this.s;if(e=(t=new V(t,e)).s,!n||!e)return new V(NaN);if(n!=e)return t.s=-e,this.minus(t);var r=this.e/14,o=t.e/14,a=this.c,s=t.c;if(!r||!o){if(!a||!s)return new V(n/0);if(!a[0]||!s[0])return s[0]?t:new V(a[0]?this:0*n)}if(r=h(r),o=h(o),a=a.slice(),n=r-o){for((i=0<n?(o=r,s):(n=-n,a)).reverse();n--;i.push(0));i.reverse()}for((n=a.length)-(e=s.length)<0&&(i=s,s=a,a=i,e=n),n=0;e;)n=(a[--e]=a[e]+s[e]+n)/1e14|0,a[e]=1e14===a[e]?0:a[e]%1e14;return n&&(a=[n].concat(a),++o),W(t,a,o)},M.precision=M.sd=function(t,e){var i,n,r;if(null!=t&&!!t!==t)return d(t,1,1e9),null==e?e=R:d(e,0,8),z(new V(this),t,e);if(!(i=this.c))return null;if(n=14*(r=i.length-1)+1,r=i[r]){for(;r%10==0;r/=10,n--);for(r=i[0];10<=r;r/=10,n++);}return t&&this.e+1>n&&(n=this.e+1),n},M.shiftedBy=function(t){return d(t,-9007199254740991,9007199254740991),this.times("1e"+t)},M.squareRoot=M.sqrt=function(){var t,e,n,r,o,a=this.c,s=this.s,l=this.e,c=I+4,d=new V("0.5");if(1!==s||!a||!a[0])return new V(!s||s<0&&(!a||a[0])?NaN:a?this:1/0);if((n=0==(s=Math.sqrt(+j(this)))||s==1/0?(((e=u(a)).length+l)%2==0&&(e+="0"),s=Math.sqrt(+e),l=h((l+1)/2)-(l<0||l%2),new V(e=s==1/0?"1e"+l:(e=s.toExponential()).slice(0,e.indexOf("e")+1)+l)):new V(s+"")).c[0]){for((s=(l=n.e)+c)<3&&(s=0);;)if(o=n,n=d.times(o.plus(i(this,o,c,1))),u(o.c).slice(0,s)===(e=u(n.c)).slice(0,s)){if(n.e<l&&--s,"9999"!=(e=e.slice(s-3,s+1))&&(r||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(z(n,n.e+I+2,1),t=!n.times(n).eq(this));break}if(!r&&(z(o,o.e+I+2,0),o.times(o).eq(this))){n=o;break}c+=4,s+=4,r=1}}return z(n,n.e+I+1,R,t)},M.toExponential=function(t,e){return null!=t&&(d(t,0,1e9),t++),B(this,t,e,1)},M.toFixed=function(t,e){return null!=t&&(d(t,0,1e9),t=t+this.e+1),B(this,t,e)},M.toFormat=function(t,e,i){var n;if(null==i)null!=t&&e&&"object"==typeof e?(i=e,e=null):t&&"object"==typeof t?(i=t,t=e=null):i=N;else if("object"!=typeof i)throw Error(a+"Argument not an object: "+i);if(n=this.toFixed(t,e),this.c){var r,o=n.split("."),s=+i.groupSize,l=+i.secondaryGroupSize,h=i.groupSeparator||"",u=o[0],c=o[1],d=this.s<0,p=d?u.slice(1):u,f=p.length;if(l&&(r=s,s=l,f-=l=r),0<s&&0<f){for(r=f%s||s,u=p.substr(0,r);r<f;r+=s)u+=h+p.substr(r,s);0<l&&(u+=h+p.slice(r)),d&&(u="-"+u)}n=c?u+(i.decimalSeparator||"")+((l=+i.fractionGroupSize)?c.replace(RegExp("\\d{"+l+"}\\B","g"),"$&"+(i.fractionGroupSeparator||"")):c):u}return(i.prefix||"")+n+(i.suffix||"")},M.toFraction=function(t){var e,n,r,o,s,h,c,d,p,f,g,m,y=this.c;if(null!=t&&(!(c=new V(t)).isInteger()&&(c.c||1!==c.s)||c.lt(T)))throw Error(a+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+j(c));if(!y)return new V(this);for(e=new V(T),p=n=new V(T),r=d=new V(T),m=u(y),s=e.e=m.length-this.e-1,e.c[0]=l[(h=s%14)<0?14+h:h],t=!t||0<c.comparedTo(e)?0<s?e:p:c,h=D,D=1/0,c=new V(m),d.c[0]=0;f=i(c,e,0,1),1!=(o=n.plus(f.times(r))).comparedTo(t);)n=r,r=o,p=d.plus(f.times(o=p)),d=o,e=c.minus(f.times(o=e)),c=o;return o=i(t.minus(n),r,0,1),d=d.plus(o.times(p)),n=n.plus(o.times(r)),d.s=p.s=this.s,g=1>i(p,r,s*=2,R).minus(this).abs().comparedTo(i(d,n,s,R).minus(this).abs())?[p,r]:[d,n],D=h,g},M.toNumber=function(){return+j(this)},M.toPrecision=function(t,e){return null!=t&&d(t,1,1e9),B(this,t,e,2)},M.toString=function(t){var e,i=this,n=i.s,r=i.e;return null===r?n?(e="Infinity",n<0&&(e="-"+e)):e="NaN":(e=null==t?r<=E||A<=r?f(u(i.c),r):g(u(i.c),r,"0"):10===t?g(u((i=z(new V(i),I+r+1,R)).c),i.e,"0"):(d(t,2,H.length,"Base"),m(g(u(i.c),r,"0"),10,t,n,!0)),n<0&&i.c[0]&&(e="-"+e)),e},M.valueOf=M.toJSON=function(){return j(this)},M._isBigNumber=!0,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(M[Symbol.toStringTag]="BigNumber",M[Symbol.for("nodejs.util.inspect.custom")]=M.valueOf),null!=e&&V.set(e),V}()).default=i.BigNumber=i,void 0!==e&&e.exports?e.exports=i:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=i)}(this)},{}],2:[function(t,e,i){e.exports={languageTag:"en-US",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},spaceSeparated:!1,ordinal:function(t){var e=t%10;return 1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$",position:"prefix",code:"USD"},currencyFormat:{thousandSeparated:!0,totalLength:4,spaceSeparated:!0},formats:{fourDigits:{totalLength:4,spaceSeparated:!0},fullWithTwoDecimals:{output:"currency",thousandSeparated:!0,mantissa:2},fullWithTwoDecimalsNoCurrency:{thousandSeparated:!0,mantissa:2},fullWithNoDecimals:{output:"currency",thousandSeparated:!0,mantissa:0}}}},{}],3:[function(t,e,i){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=t("./globalState"),o=t("./validating"),a=t("./parsing"),s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],l={general:{scale:1024,suffixes:s,marker:"bd"},binary:{scale:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],marker:"b"},decimal:{scale:1e3,suffixes:s,marker:"d"}},h={totalLength:0,characteristic:0,forceAverage:!1,average:!1,mantissa:-1,optionalMantissa:!0,thousandSeparated:!1,spaceSeparated:!1,negative:"sign",forceSign:!1};function u(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length?arguments[2]:void 0;if("string"==typeof e&&(e=a.parseFormat(e)),!o.validateFormat(e))return"ERROR: invalid format";var n=e.prefix||"",s=e.postfix||"",u=function(t,e,i){var n,o,a,s,u,d,g,m,y,w,b,x,S,C,_,M,T,I,R,E,A,k,D,O,P,L,N,H;switch(e.output){case"currency":return M=e=f(e,r.currentCurrencyDefaultFormat()),T=r.currentCurrency(),I=Object.assign({},h,M),R=void 0,E="",A=!!I.totalLength||!!I.forceAverage||I.average,k=M.currencyPosition||T.position,D=M.currencySymbol||T.symbol,I.spaceSeparated&&(E=" "),"infix"===k&&(R=E+D+E),O=p({instance:t,providedFormat:M,state:r,decimalSeparator:R}),"prefix"===k&&(O=t._value<0&&"sign"===I.negative?"-".concat(E).concat(D).concat(O.slice(1)):D+E+O),k&&"postfix"!==k||(O=O+(E=A?"":E)+D),O;case"percent":return L=(P=e=f(e,r.currentPercentageDefaultFormat())).prefixSymbol,N=p({instance:i(100*t._value),providedFormat:P,state:r}),H=Object.assign({},h,P),L?"%".concat(H.spaceSeparated?" ":"").concat(N):"".concat(N).concat(H.spaceSeparated?" ":"","%");case"byte":return w=l[(y=e=f(e,r.currentByteDefaultFormat())).base||"binary"],x=(b=c(t._value,w.suffixes,w.scale)).value,S=b.suffix,C=p({instance:i(x),providedFormat:y,state:r,defaults:r.currentByteDefaultFormat()}),_=r.currentAbbreviations(),"".concat(C).concat(_.spaced?" ":"").concat(S);case"time":return e=f(e,r.currentTimeDefaultFormat()),d=Math.floor(t._value/60/60),g=Math.floor((t._value-60*d*60)/60),m=Math.round(t._value-60*d*60-60*g),"".concat(d,":").concat(g<10?"0":"").concat(g,":").concat(m<10?"0":"").concat(m);case"ordinal":return n=e=f(e,r.currentOrdinalDefaultFormat()),o=r.currentOrdinal(),a=Object.assign({},h,n),s=p({instance:t,providedFormat:n,state:r}),u=o(t._value),"".concat(s).concat(a.spaceSeparated?" ":"").concat(u);default:return p({instance:t,providedFormat:e,numbro:i})}}(t,e,i);return(u=n+u)+s}function c(t,e,i){var n=e[0],r=Math.abs(t);if(i<=r){for(var o=1;o<e.length;++o){var a=Math.pow(i,o),s=Math.pow(i,o+1);if(a<=r&&r<s){n=e[o],t/=a;break}}n===e[0]&&(t/=Math.pow(i,e.length-1),n=e[e.length-1])}return{value:t,suffix:n}}function d(t){for(var e="",i=0;i<t;i++)e+="0";return e}function p(t){var e,i,o,a,s,l,u,c,p,f=t.instance,g=t.providedFormat,m=t.state,y=void 0===m?r:m,w=t.decimalSeparator,b=t.defaults,x=void 0===b?y.currentDefaults():b,S=f._value;if(0===S&&y.hasZeroFormat())return y.getZeroFormat();if(!isFinite(S))return S.toString();var C,_,M,T,I,R,E,A,k=Object.assign({},h,x,g),D=k.totalLength,O=D?0:k.characteristic,P=k.optionalCharacteristic,L=k.forceAverage,N=!!D||!!L||k.average,H=D?-1:N&&void 0===g.mantissa?0:k.mantissa,V=!D&&(void 0===g.optionalMantissa?-1===H:k.optionalMantissa),B=k.trimMantissa,F=k.thousandSeparated,W=k.spaceSeparated,z=k.negative,j=k.forceSign,U=k.exponential,G="";if(N){var Y,X,$,Z,q,K,Q,J,tt,te,ti=(X=(Y={value:S,forceAverage:L,abbreviations:y.currentAbbreviations(),spaceSeparated:W,totalLength:D}).value,$=Y.forceAverage,Z=Y.abbreviations,q=Y.spaceSeparated,Q=void 0===(K=Y.totalLength)?0:K,J="",te=-1,(tt=Math.abs(X))>=1e12&&!$||"trillion"===$?(J=Z.trillion,X/=1e12):tt<1e12&&tt>=1e9&&!$||"billion"===$?(J=Z.billion,X/=1e9):tt<1e9&&tt>=1e6&&!$||"million"===$?(J=Z.million,X/=1e6):(tt<1e6&&tt>=1e3&&!$||"thousand"===$)&&(J=Z.thousand,X/=1e3),J&&(J=(void 0!==q&&q?" ":"")+J),Q&&(te=Math.max(Q-X.toString().split(".")[0].length,0)),{value:X,abbreviation:J,mantissaPrecision:te});S=ti.value,G+=ti.abbreviation,D&&(H=ti.mantissaPrecision)}if(U){var tn=(_=(C={value:S,characteristicPrecision:O}).value,T=void 0===(M=C.characteristicPrecision)?0:M,R=(I=n(_.toExponential().split("e"),2))[0],E=I[1],A=+R,T&&1<T&&(A*=Math.pow(10,T-1),E=0<=(E=+E-(T-1))?"+".concat(E):E),{value:A,abbreviation:"e".concat(E)});S=tn.value,G=tn.abbreviation+G}var tr,to,ta=function(t,e,i,r,o){if(-1===r)return t;var a=-1!==e.toString().indexOf("e")?function(t,e){var i=t.toString(),r=n(i.split("e"),2),o=r[0],a=r[1],s=n(o.split("."),2),l=s[0],h=s[1],u=void 0===h?"":h;if(0<+a)i=l+u+d(a-u.length);else{var c=".";c=0>+l?"-0".concat(c):"0".concat(c);var p=(d(-a-1)+Math.abs(l)+u).substr(0,e);p.length<e&&(p+=d(e-p.length)),i=c+p}return 0<+a&&0<e&&(i+=".".concat(d(e))),i}(e,r):(Math.round(+"".concat(e,"e+").concat(r))/Math.pow(10,r)).toFixed(r),s=n(a.toString().split("."),2),l=s[0],h=s[1],u=void 0===h?"":h;if(u.match(/^0+$/)&&(i||o))return l;var c=u.match(/0+$/);return o&&c?"".concat(l,".").concat(u.toString().slice(0,c.index)):a.toString()}(S.toString(),S,V,H,B);return e=ta=function(t,e,i,r){var o=t,a=n(o.toString().split("."),2),s=a[0],l=a[1];if(s.match(/^-?0$/)&&i)return l?"".concat(s.replace("0",""),".").concat(l):s.replace("0","");if(s.length<r)for(var h=r-s.length,u=0;u<h;u++)o="0".concat(o);return o.toString()}(ta,0,P,O),i=S,o=w,s=(a=y.currentDelimiters()).thousands,o=o||a.decimal,l=a.thousandsSize||3,c=(u=e.toString()).split(".")[0],p=u.split(".")[1],F&&(i<0&&(c=c.slice(1)),(function(t,e){for(var i=[],n=0,r=t;0<r;r--)n===e&&(i.unshift(r),n=0),n++;return i})(c.length,l).forEach(function(t,e){c=c.slice(0,t+e)+s+c.slice(t+e)}),i<0&&(c="-".concat(c))),ta=u=p?c+o+p:c,(N||U)&&(ta+=G),(j||S<0)&&(tr=ta,ta=0===(to=S)?tr:0==+tr?tr.replace("-",""):0<to?"+".concat(tr):"sign"===z?tr:"(".concat(tr.replace("-",""),")")),ta}function f(t,e){if(!t)return e;var i=Object.keys(t);return 1===i.length&&"output"===i[0]?e:t}e.exports=function(t){return{format:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return u.apply(void 0,i.concat([t]))},getByteUnit:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return(function(t){var e=l.general;return c(t._value,e.suffixes,e.scale).suffix}).apply(void 0,i.concat([t]))},getBinaryByteUnit:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return(function(t){var e=l.binary;return c(t._value,e.suffixes,e.scale).suffix}).apply(void 0,i.concat([t]))},getDecimalByteUnit:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return(function(t){var e=l.decimal;return c(t._value,e.suffixes,e.scale).suffix}).apply(void 0,i.concat([t]))},formatOrDefault:f}}},{"./globalState":4,"./parsing":8,"./validating":10}],4:[function(t,e,i){var n=t("./en-US"),r=t("./validating"),o=t("./parsing"),a={},s=void 0,l={},h=null,u={};function c(){return l[s]}a.languages=function(){return Object.assign({},l)},a.currentLanguage=function(){return s},a.currentCurrency=function(){return c().currency},a.currentAbbreviations=function(){return c().abbreviations},a.currentDelimiters=function(){return c().delimiters},a.currentOrdinal=function(){return c().ordinal},a.currentDefaults=function(){return Object.assign({},c().defaults,u)},a.currentOrdinalDefaultFormat=function(){return Object.assign({},a.currentDefaults(),c().ordinalFormat)},a.currentByteDefaultFormat=function(){return Object.assign({},a.currentDefaults(),c().byteFormat)},a.currentPercentageDefaultFormat=function(){return Object.assign({},a.currentDefaults(),c().percentageFormat)},a.currentCurrencyDefaultFormat=function(){return Object.assign({},a.currentDefaults(),c().currencyFormat)},a.currentTimeDefaultFormat=function(){return Object.assign({},a.currentDefaults(),c().timeFormat)},a.setDefaults=function(t){t=o.parseFormat(t),r.validateFormat(t)&&(u=t)},a.getZeroFormat=function(){return h},a.setZeroFormat=function(t){return h="string"==typeof t?t:null},a.hasZeroFormat=function(){return null!==h},a.languageData=function(t){if(t){if(l[t])return l[t];throw Error('Unknown tag "'.concat(t,'"'))}return c()},a.registerLanguage=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!r.validateLanguage(t))throw Error("Invalid language data");l[t.languageTag]=t,e&&(s=t.languageTag)},a.setLanguage=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n.languageTag;if(!l[t]){var i=t.split("-")[0],r=Object.keys(l).find(function(t){return t.split("-")[0]===i});return l[r]?void(s=r):void(s=e)}s=t},a.registerLanguage(n),s=n.languageTag,e.exports=a},{"./en-US":2,"./parsing":8,"./validating":10}],5:[function(t,e,i){e.exports=function(e){return{loadLanguagesInNode:function(i){i.forEach(function(i){var n=void 0;try{n=t("../languages/".concat(i))}catch(t){console.error('Unable to load "'.concat(i,'". No matching language file found.'))}n&&e.registerLanguage(n)})}}}},{}],6:[function(t,e,i){var n=t("bignumber.js");function r(t,e,i){var r=new n(t._value),o=e;return i.isNumbro(e)&&(o=e._value),o=new n(o),t._value=r.minus(o).toNumber(),t}e.exports=function(t){return{add:function(e,i){var r,o;return r=new n(e._value),o=i,t.isNumbro(i)&&(o=i._value),o=new n(o),e._value=r.plus(o).toNumber(),e},subtract:function(e,i){return r(e,i,t)},multiply:function(e,i){var r,o;return r=new n(e._value),o=i,t.isNumbro(i)&&(o=i._value),o=new n(o),e._value=r.times(o).toNumber(),e},divide:function(e,i){var r,o;return r=new n(e._value),o=i,t.isNumbro(i)&&(o=i._value),o=new n(o),e._value=r.dividedBy(o).toNumber(),e},set:function(e,i){var n;return n=i,t.isNumbro(i)&&(n=i._value),e._value=n,e},difference:function(e,i){var n;return r(n=t(e._value),i,t),Math.abs(n._value)}}}},{"bignumber.js":1}],7:[function(t,e,i){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=t("./globalState"),o=t("./validating"),a=t("./loading")(p),s=t("./unformatting"),l=t("./formatting")(p),h=t("./manipulating")(p),u=t("./parsing"),c=function(){var t,e;function i(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),this._value=t}return t=[{key:"clone",value:function(){return p(this._value)}},{key:"format",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return l.format(this,t)}},{key:"formatCurrency",value:function(t){return"string"==typeof t&&(t=u.parseFormat(t)),(t=l.formatOrDefault(t,r.currentCurrencyDefaultFormat())).output="currency",l.format(this,t)}},{key:"formatTime",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.output="time",l.format(this,t)}},{key:"binaryByteUnits",value:function(){return l.getBinaryByteUnit(this)}},{key:"decimalByteUnits",value:function(){return l.getDecimalByteUnit(this)}},{key:"byteUnits",value:function(){return l.getByteUnit(this)}},{key:"difference",value:function(t){return h.difference(this,t)}},{key:"add",value:function(t){return h.add(this,t)}},{key:"subtract",value:function(t){return h.subtract(this,t)}},{key:"multiply",value:function(t){return h.multiply(this,t)}},{key:"divide",value:function(t){return h.divide(this,t)}},{key:"set",value:function(t){return h.set(this,d(t))}},{key:"value",value:function(){return this._value}},{key:"valueOf",value:function(){return this._value}}],n(i.prototype,t),e&&n(i,e),i}();function d(t){var e=t;return p.isNumbro(t)?e=t._value:"string"==typeof t?e=p.unformat(t):isNaN(t)&&(e=NaN),e}function p(t){return new c(d(t))}p.version="2.1.2",p.isNumbro=function(t){return t instanceof c},p.language=r.currentLanguage,p.registerLanguage=r.registerLanguage,p.setLanguage=r.setLanguage,p.languages=r.languages,p.languageData=r.languageData,p.zeroFormat=r.setZeroFormat,p.defaultFormat=r.currentDefaults,p.setDefaults=r.setDefaults,p.defaultCurrencyFormat=r.currentCurrencyDefaultFormat,p.validate=o.validate,p.loadLanguagesInNode=a.loadLanguagesInNode,p.unformat=s.unformat,e.exports=p},{"./formatting":3,"./globalState":4,"./loading":5,"./manipulating":6,"./parsing":8,"./unformatting":9,"./validating":10}],8:[function(t,e,i){e.exports={parseFormat:function(t){var e,i,n,r,o,a,s,l,h,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"string"!=typeof t?t:(function(t,e){if(-1===t.indexOf("$")){if(-1===t.indexOf("%"))return -1!==t.indexOf("bd")?(e.output="byte",e.base="general"):-1!==t.indexOf("b")?(e.output="byte",e.base="binary"):-1!==t.indexOf("d")?(e.output="byte",e.base="decimal"):-1===t.indexOf(":")?-1!==t.indexOf("o")&&(e.output="ordinal"):e.output="time";e.output="percent"}else e.output="currency"}(t=(r=(n=t=(i=(e=t).match(/^{([^}]*)}/))?(u.prefix=i[1],e.slice(i[0].length)):e).match(/{([^}]*)}$/))?(u.postfix=r[1],n.slice(0,-r[0].length)):n,u),(o=t.match(/[1-9]+[0-9]*/))&&(u.totalLength=+o[0]),(a=t.split(".")[0].match(/0+/))&&(u.characteristic=a[0].length),function(t,e){if(-1!==t.indexOf(".")){var i=t.split(".")[0];e.optionalCharacteristic=-1===i.indexOf("0")}}(t,u),-1!==t.indexOf("a")&&(u.average=!0),-1!==(s=t).indexOf("K")?u.forceAverage="thousand":-1!==s.indexOf("M")?u.forceAverage="million":-1!==s.indexOf("B")?u.forceAverage="billion":-1!==s.indexOf("T")&&(u.forceAverage="trillion"),function(t,e){var i=t.split(".")[1];if(i){var n=i.match(/0+/);n&&(e.mantissa=n[0].length)}}(t,u),(l=t).match(/\[\.]/)?u.optionalMantissa=!0:l.match(/\./)&&(u.optionalMantissa=!1),-1!==t.indexOf(",")&&(u.thousandSeparated=!0),-1!==t.indexOf(" ")&&(u.spaceSeparated=!0),(h=t).match(/^\+?\([^)]*\)$/)&&(u.negative="parenthesis"),h.match(/^\+?-/)&&(u.negative="sign"),t.match(/^\+/)&&(u.forceSign=!0),u)}}},{}],9:[function(t,e,i){var n=[{key:"ZiB",factor:11805916207174113e5},{key:"ZB",factor:1e21},{key:"YiB",factor:12089258196146292e8},{key:"YB",factor:1e24},{key:"TiB",factor:1099511627776},{key:"TB",factor:1e12},{key:"PiB",factor:0x4000000000000},{key:"PB",factor:1e15},{key:"MiB",factor:1048576},{key:"MB",factor:1e6},{key:"KiB",factor:1024},{key:"KB",factor:1e3},{key:"GiB",factor:1073741824},{key:"GB",factor:1e9},{key:"EiB",factor:0x1000000000000000},{key:"EB",factor:1e18},{key:"B",factor:1}];function r(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}e.exports={unformat:function(e,i){var o,a,s,l=t("./globalState"),h=l.currentDelimiters(),u=l.currentCurrency().symbol,c=l.currentOrdinal(),d=l.getZeroFormat(),p=l.currentAbbreviations(),f=void 0;if("string"==typeof e)f=!function(t,e){if(!t.indexOf(":")||":"===e.thousands)return!1;var i=t.split(":");if(3!==i.length)return!1;var n=+i[0],r=+i[1],o=+i[2];return!isNaN(n)&&!isNaN(r)&&!isNaN(o)}(e,h)?function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",o=3<arguments.length?arguments[3]:void 0,a=4<arguments.length?arguments[4]:void 0,s=5<arguments.length?arguments[5]:void 0,l=6<arguments.length?arguments[6]:void 0;if(""!==t)return t===a?0:function t(e,i){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",a=3<arguments.length?arguments[3]:void 0,s=4<arguments.length?arguments[4]:void 0,l=5<arguments.length?arguments[5]:void 0,h=6<arguments.length?arguments[6]:void 0;if(!isNaN(+e))return+e;var u="",c=e.replace(/(^[^(]*)\((.*)\)([^)]*$)/,"$1$2$3");if(c!==e)return -1*t(c,i,o,a,s,l,h);for(var d=0;d<n.length;d++){var p=n[d];if((u=e.replace(p.key,""))!==e)return t(u,i,o,a,s,l,h)*p.factor}if((u=e.replace("%",""))!==e)return t(u,i,o,a,s,l,h)/100;var f=parseFloat(e);if(!isNaN(f)){var g=a(f);if(g&&"."!==g&&(u=e.replace(new RegExp("".concat(r(g),"$")),""))!==e)return t(u,i,o,a,s,l,h);var m={};Object.keys(l).forEach(function(t){m[l[t]]=t});for(var y=Object.keys(m).sort().reverse(),w=y.length,b=0;b<w;b++){var x=y[b],S=m[x];if((u=e.replace(x,""))!==e){var C=void 0;switch(S){case"thousand":C=1e3;break;case"million":C=1e6;break;case"billion":C=1e9;break;case"trillion":C=1e12}return t(u,i,o,a,s,l,h)*C}}}}(function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",n=t.replace(i,"");return(n=n.replace(RegExp("([0-9])".concat(r(e.thousands),"([0-9])"),"g"),"$1$2")).replace(e.decimal,".")}(t,e,i),e,i,o,a,s,l)}(e,h,u,c,d,p,i):(a=+(o=e.split(":"))[0],s=+o[1],+o[2]+60*s+3600*a);else{if("number"!=typeof e)return;f=e}if(void 0!==f)return f}}},{"./globalState":4}],10:[function(t,e,i){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=t("./unformatting"),o=/^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/,a={output:{type:"string",validValues:["currency","percent","byte","time","ordinal","number"]},base:{type:"string",validValues:["decimal","binary","general"],restriction:function(t,e){return"byte"===e.output},message:"`base` must be provided only when the output is `byte`",mandatory:function(t){return"byte"===t.output}},characteristic:{type:"number",restriction:function(t){return 0<=t},message:"value must be positive"},prefix:"string",postfix:"string",forceAverage:{type:"string",validValues:["trillion","billion","million","thousand"]},average:"boolean",currencyPosition:{type:"string",validValues:["prefix","infix","postfix"]},currencySymbol:"string",totalLength:{type:"number",restrictions:[{restriction:function(t){return 0<=t},message:"value must be positive"},{restriction:function(t,e){return!e.exponential},message:"`totalLength` is incompatible with `exponential`"}]},mantissa:{type:"number",restriction:function(t){return 0<=t},message:"value must be positive"},optionalMantissa:"boolean",trimMantissa:"boolean",optionalCharacteristic:"boolean",thousandSeparated:"boolean",spaceSeparated:"boolean",abbreviations:{type:"object",children:{thousand:"string",million:"string",billion:"string",trillion:"string"}},negative:{type:"string",validValues:["sign","parenthesis"]},forceSign:"boolean",exponential:{type:"boolean"},prefixSymbol:{type:"boolean",restriction:function(t,e){return"percent"===e.output},message:"`prefixSymbol` can be provided only when the output is `percent`"}},s={languageTag:{type:"string",mandatory:!0,restriction:function(t){return t.match(o)},message:"the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)"},delimiters:{type:"object",children:{thousands:"string",decimal:"string",thousandsSize:"number"},mandatory:!0},abbreviations:{type:"object",children:{thousand:{type:"string",mandatory:!0},million:{type:"string",mandatory:!0},billion:{type:"string",mandatory:!0},trillion:{type:"string",mandatory:!0}},mandatory:!0},spaceSeparated:"boolean",ordinal:{type:"function",mandatory:!0},currency:{type:"object",children:{symbol:"string",position:"string",code:"string"},mandatory:!0},defaults:"format",ordinalFormat:"format",byteFormat:"format",percentageFormat:"format",currencyFormat:"format",timeDefaults:"format",formats:{type:"object",children:{fourDigits:{type:"format",mandatory:!0},fullWithTwoDecimals:{type:"format",mandatory:!0},fullWithTwoDecimalsNoCurrency:{type:"format",mandatory:!0},fullWithNoDecimals:{type:"format",mandatory:!0}}}};function l(t){return!!r.unformat(t)}function h(t,e,i){var r,o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],s=Object.keys(t).map(function(r){if(!e[r])return console.error("".concat(i," Invalid key: ").concat(r)),!1;var o=t[r],s=e[r];if("string"==typeof s&&(s={type:s}),"format"===s.type){if(!h(o,a,"[Validate ".concat(r,"]"),!0))return!1}else if(n(o)!==s.type)return console.error("".concat(i," ").concat(r,' type mismatched: "').concat(s.type,'" expected, "').concat(n(o),'" provided')),!1;if(s.restrictions&&s.restrictions.length)for(var l=s.restrictions.length,u=0;u<l;u++){var c=s.restrictions[u],d=c.restriction,p=c.message;if(!d(o,t))return console.error("".concat(i," ").concat(r," invalid value: ").concat(p)),!1}return s.restriction&&!s.restriction(o,t)?(console.error("".concat(i," ").concat(r," invalid value: ").concat(s.message)),!1):s.validValues&&-1===s.validValues.indexOf(o)?(console.error("".concat(i," ").concat(r," invalid value: must be among ").concat(JSON.stringify(s.validValues),', "').concat(o,'" provided')),!1):!s.children||!!h(o,s.children,"[Validate ".concat(r,"]"))});return o||s.push.apply(s,function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(r=Object.keys(e).map(function(n){var r=e[n];if("string"==typeof r&&(r={type:r}),r.mandatory){var o=r.mandatory;if("function"==typeof o&&(o=o(t)),o&&void 0===t[n])return console.error("".concat(i,' Missing mandatory key "').concat(n,'"')),!1}return!0}))||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()),s.reduce(function(t,e){return t&&e},!0)}function u(t){return h(t,a,"[Validate format]")}e.exports={validate:function(t,e){var i=l(t),n=u(e);return i&&n},validateFormat:u,validateInput:l,validateLanguage:function(t){return h(t,s,"[Validate language]")}}},{"./unformatting":9}]},{},[7])(7);var i0=t4("guO5N");function u3(t,e){if((0,i0.isNumeric)(t)){let n=e.numericFormat,r=n&&n.culture||"-",o=n&&n.pattern;if(void 0!==r&&!i(u5).languages()[r]){let t=r.replace("-",""),e=i(u5).allLanguages?i(u5).allLanguages[r]:i(u5)[t];e&&i(u5).registerLanguage(e)}i(u5).setLanguage(r),t=i(u5)(t).format(o||"0")}return t}function u4(t,e,i,n,r,o,a){let s=o;if((0,i0.isNumeric)(s)){let t=a.className||"",i=t.length?t.split(" "):[];s=u3(s,a),0>i.indexOf("htLeft")&&0>i.indexOf("htCenter")&&0>i.indexOf("htRight")&&0>i.indexOf("htJustify")&&i.push("htRight"),0>i.indexOf("htNumeric")&&i.push("htNumeric"),a.className=i.join(" "),e.dir="ltr"}uR(t,e,i,n,r,s,a)}u4.RENDERER_TYPE="numeric";var eG=t4("gFbQZ"),i0=t4("guO5N");function u6(t,e,i,n,r,o,a){uR.apply(this,[t,e,i,n,r,o,a]);let s=a.hashLength||e.innerHTML.length,l=a.hashSymbol||"*",h="";(0,i0.rangeEach)(s-1,()=>{h+=l}),(0,eG.fastInnerHTML)(e,h)}function u8(t,e,i,n,r,o,a){uR.apply(this,[t,e,i,n,r,o,a])}function u9(t,e,i,n,r,o,a){uR.apply(this,[t,e,i,n,r,o,a]),e.dir="ltr"}function u7(t,e){let i=t;if(null==i&&(i=""),this.allowEmpty&&""===i){e(!0);return}this.strict&&this.source?"function"==typeof this.source?this.source(i,ct(i,e)):ct(i,e)(this.source):e(!0)}function ct(t,e){return function(i){let n=!1;for(let e=0,r=i.length;e<r;e++)if(t===i[e]){n=!0;break}e(n)}}u6.RENDERER_TYPE="password",u8.RENDERER_TYPE="select",u9.RENDERER_TYPE="time",u7.VALIDATOR_TYPE="autocomplete";var ce=t4("bTWiY");function ci(t,e){u7.apply(this,[t,e])}ci.VALIDATOR_TYPE="dropdown";var i0=t4("guO5N");function cn(t,e){let i=t;null==i&&(i=""),e(!!this.allowEmpty&&""===i||""!==i&&(0,i0.isNumeric)(t))}cn.VALIDATOR_TYPE="numeric";var cr=t4("45fvw");const co=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"];function ca(t,e){let n=this.timeFormat||"h:mm:ss a",r=!0,o=t;null===o&&(o=""),o=/^\d{3,}$/.test(o)?parseInt(o,10):o;let a=/^\d{1,2}$/.test(o);a&&(o+=":00");let s=i(cr)(o,co,!0).isValid()?i(cr)(o):i(cr)(o,n),l=s.isValid(),h=i(cr)(o,n,!0).isValid()&&!a;if(this.allowEmpty&&""===o&&(l=!0,h=!0),l||(r=!1),!l&&h&&(r=!0),l&&!h){if(!0===this.correctFormat){let t=s.format(n);this.instance.setDataAtCell(this.visualRow,this.visualCol,t,"timeValidator"),r=!0}else r=!1}e(r)}ca.VALIDATOR_TYPE="time";var uV=t4("iMgTM");function cs(t,e,i,n,r,o,a){uX.apply(this,[t,e,i,n,r,o,a])}cs.RENDERER_TYPE="date";var ce=t4("bTWiY");const cl={CELL_TYPE:"date",editor:uV.DateEditor,renderer:cs,validator:ce.dateValidator};t4("1C6fS"),t4("1hIp0"),t4("1C6fS"),t4("1hIp0");var e6=t4("hwT6B"),iy=t4("ceXML"),eK=t4("jxqWV"),eQ=t4("1k8Ev");function ch(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function cu(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function cc(t,e){return t.get(cd(t,e))}function cd(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const cp=new Map([["plugin",function(t){return!!ni(t)}],["cell-type",hH],["editor",eK.hasEditor],["renderer",ns],["validator",nf]]),cf=[];let cg=null;var cm=new WeakMap,cy=new WeakSet;class cv{static get PLUGIN_KEY(){return"base"}static get SETTING_KEYS(){return[this.PLUGIN_KEY]}constructor(t){var e;ch(this,cy),cy.add(this),cu(this,"eventManager",new eQ.default(this)),cu(this,"pluginName",null),cu(this,"pluginsInitializedCallbacks",[]),cu(this,"isPluginsReady",!1),cu(this,"enabled",!1),cu(this,"initialized",!1),e={},ch(this,cm),cm.set(this,e),(0,e6.defineGetter)(this,"hot",t,{writable:!1}),cg=null,this.hot.addHook("afterPluginsInitialized",()=>this.onAfterPluginsInitialized()),this.hot.addHook("afterUpdateSettings",t=>this.onUpdateSettings(t)),this.hot.addHook("beforeInit",()=>this.init())}init(){this.pluginName=this.hot.getPluginName(this);let t=this.constructor.PLUGIN_DEPS,e=Array.isArray(t)?t:[];if(e.length>0){let t=[];if(e.forEach(e=>{let[i,n]=e.split(":");if(!cp.has(i))throw Error(`Unknown plugin dependency type "${i}" was found.`);cp.get(i)(n)||t.push(` - ${n} (${i})`)}),t.length>0){let e=`The ${this.pluginName} plugin requires the following modules:
${t.join("\n")}
`;cf.push(e)}}if(cg||(cg=ne()),cg.indexOf("UndoRedo")>=0&&cg.splice(cg.indexOf("UndoRedo"),1),cg.indexOf(this.pluginName)>=0&&cg.splice(cg.indexOf(this.pluginName),1),this.hot.addHookOnce("afterPluginsInitialized",()=>{this.isEnabled&&this.isEnabled()&&this.enablePlugin()}),0===cg.length){if(cf.length>0)throw Error(`${cf.join("\n")}
You have to import and register them manually.`);this.hot.runHooks("afterPluginsInitialized")}this.initialized=!0}enablePlugin(){this.enabled=!0}disablePlugin(){var t;null===(t=this.eventManager)||void 0===t||t.clear(),this.clearHooks(),this.enabled=!1}addHook(t,e,i){cc(cm,this)[t]=cc(cm,this)[t]||[];let n=cc(cm,this)[t];this.hot.addHook(t,e,i),n.push(e),cc(cm,this)[t]=n}removeHooks(t){(0,iy.arrayEach)(cc(cm,this)[t]||[],e=>{this.hot.removeHook(t,e)})}clearHooks(){let t=cc(cm,this);(0,e6.objectEach)(t,(t,e)=>this.removeHooks(e)),t.length=0}callOnPluginsReady(t){this.isPluginsReady?t():this.pluginsInitializedCallbacks.push(t)}onAfterPluginsInitialized(){(0,iy.arrayEach)(this.pluginsInitializedCallbacks,t=>t()),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0}onUpdateSettings(t){let e=cd(cy,this,cw).call(this,t);this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin(),this.enabled&&this.isEnabled()&&e&&this.updatePlugin(t))}updatePlugin(){}destroy(){var t;null===(t=this.eventManager)||void 0===t||t.destroy(),this.clearHooks(),(0,e6.objectEach)(this,(t,e)=>{"hot"!==e&&(this[e]=null)}),delete this.t,delete this.hot}}function cw(t){if(!t)return!1;let e=this.constructor.SETTING_KEYS;if("boolean"==typeof e)return e;for(let i=0;i<e.length;i++)if(void 0!==t[e[i]])return!0;return!1}var nw=t4("llu1T");t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),iy=t4("ceXML");function cb(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var cx=class{constructor(t){cb(this,"hot",null),cb(this,"container",null),cb(this,"injected",!1),cb(this,"rows",[]),cb(this,"columns",[]),cb(this,"samples",null),cb(this,"settings",{useHeaders:!0}),this.hot=t}addRow(t,e){if(this.columns.length)throw Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));let i={row:t};this.rows.push(i),this.samples=e,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol(t)),this.table.tr.appendChild(this.createRow(t)),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}addColumnHeadersRow(t){if(null!=this.hot.getColHeader(0)){let e={row:-1};this.rows.push(e),this.container=this.createContainer(this.hot.rootElement.className),this.samples=t,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}}addColumn(t,e){if(this.rows.length)throw Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));let i={col:t};this.columns.push(i),this.samples=e,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&null!==this.hot.getColHeader(t)&&this.hot.view.appendColHeader(t,this.table.th),this.table.tBody.appendChild(this.createCol(t)),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}getHeights(t){this.injected||this.injectTable(),(0,iy.arrayEach)(this.rows,e=>{let{height:i}=e.table.getBoundingClientRect();t(e.row,Math.ceil(i)-1)})}getWidths(t){this.injected||this.injectTable(),(0,iy.arrayEach)(this.columns,e=>{let{width:i}=e.table.getBoundingClientRect();t(e.col,Math.ceil(i))})}setSettings(t){this.settings=t}setSetting(t,e){this.settings||(this.settings={}),this.settings[t]=e}getSettings(){return this.settings}getSetting(t){return this.settings?this.settings[t]:null}createColGroupsCol(t){let e=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&e.appendChild(this.createColElement(-1,-1)),this.samples.forEach(i=>{(0,iy.arrayEach)(i.strings,i=>{e.appendChild(this.createColElement(i.col,t))})}),e}createRow(t){let{rootDocument:e}=this.hot,i=e.createDocumentFragment(),n=e.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(t,n),i.appendChild(n)),this.samples.forEach(n=>{(0,iy.arrayEach)(n.strings,n=>{let r=n.col,o=this.hot.getCellMeta(t,r),a=this.hot.getCellRenderer(o),s=e.createElement("td");s.setAttribute("ghost-table",1),a(this.hot,s,t,r,this.hot.colToProp(r),n.value,o),i.appendChild(s)})}),i}appendColumnHeadersRow(){let{rootDocument:t}=this.hot,e=t.createDocumentFragment(),i=[];if(this.hot.hasRowHeaders()){let n=t.createElement("th");i.push([-1,n]),e.appendChild(n)}this.samples.forEach(n=>{(0,iy.arrayEach)(n.strings,n=>{let r=n.col,o=t.createElement("th");i.push([r,o]),e.appendChild(o)})}),this.table.tHead.appendChild(e),(0,iy.arrayEach)(i,t=>{let[e,i]=t;this.hot.view.appendColHeader(e,i)})}createCol(t){let{rootDocument:e}=this.hot,i=e.createDocumentFragment();return this.samples.forEach(n=>{(0,iy.arrayEach)(n.strings,n=>{let r=n.row,o=this.hot.getCellMeta(r,t),a=this.hot.getCellRenderer(o),s=e.createElement("td"),l=e.createElement("tr");s.setAttribute("ghost-table",1),a(this.hot,s,r,t,this.hot.colToProp(t),n.value,o),l.appendChild(s),i.appendChild(l)})}),i}clean(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}injectTable(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.injected||((t||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}removeTable(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}createColElement(t,e){let i=this.hot.rootDocument.createElement("col"),n=0;e>=0&&t>=0&&(n=this.hot.getCellMeta(e,t).colspan);let r=this.hot.getColWidth(t);if(n>1)for(let e=t+1;e<t+n;e++)r+=this.hot.getColWidth(e);return i.style.width=`${r}px`,i}createTable(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{rootDocument:e}=this.hot,i=e.createDocumentFragment(),n=e.createElement("table"),r=e.createElement("thead"),o=e.createElement("tbody"),a=e.createElement("colgroup"),s=e.createElement("tr"),l=e.createElement("th");return this.isVertical()&&n.appendChild(a),this.isHorizontal()&&(s.appendChild(l),r.appendChild(s),n.style.tableLayout="auto",n.style.width="auto"),n.appendChild(r),this.isVertical()&&o.appendChild(s),n.appendChild(o),(0,eG.addClass)(n,t),i.appendChild(n),{fragment:i,table:n,tHead:r,tBody:o,colGroup:a,tr:s,th:l}}createContainer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{rootDocument:e}=this.hot,i=e.createDocumentFragment(),n=e.createElement("div"),r=`htGhostTable htAutoSize ${t.trim()}`;return(0,eG.addClass)(n,r),i.appendChild(n),{fragment:i,container:n}}isVertical(){return!!(this.rows.length&&!this.columns.length)}isHorizontal(){return!!(this.columns.length&&!this.rows.length)}},sa=t4("10euP"),e6=t4("hwT6B"),i0=t4("guO5N");t4("1C6fS"),t4("1hIp0");var e6=t4("hwT6B"),i0=t4("guO5N"),eX=t4("gnaTS");function cS(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class cC{static get SAMPLE_COUNT(){return 3}constructor(t){cS(this,"samples",null),cS(this,"dataFactory",null),cS(this,"customSampleCount",null),cS(this,"allowDuplicates",!1),this.dataFactory=t}getSampleCount(){return this.customSampleCount?this.customSampleCount:cC.SAMPLE_COUNT}setSampleCount(t){this.customSampleCount=t}setAllowDuplicates(t){this.allowDuplicates=t}generateRowSamples(t,e){return this.generateSamples("row",e,t)}generateColumnSamples(t,e){return this.generateSamples("col",e,t)}generateSamples(t,e,i){let n=new Map,{from:r,to:o}="number"==typeof i?{from:i,to:i}:i;return(0,i0.rangeEach)(r,o,i=>{let r=this.generateSample(t,e,i);n.set(i,r)}),n}generateSample(t,e,i){if("row"!==t&&"col"!==t)throw Error("Unsupported sample type");let n=new Map,r="row"===t?"col":"row",o=[];return(0,i0.rangeEach)(e.from,e.to,e=>{let a;let s="row"===t?this.dataFactory(i,e):this.dataFactory(e,i);if(!1===s)return;let{value:l,bundleSeed:h}=s,u="string"==typeof h&&h.length>0;a=u?h:(0,e6.isObject)(l)?`${Object.keys(l).length}`:Array.isArray(l)?`${l.length}`:`${(0,eX.stringify)(l).length}`,n.has(a)||n.set(a,{needed:this.getSampleCount(),strings:[]});let c=n.get(a);c.needed&&(!(o.indexOf(l)>-1)||this.allowDuplicates||u)&&(c.strings.push({value:l,[r]:e}),o.push(l),c.needed-=1)}),n}}var iJ=t4("bO142");function c_(t,e,i){cM(t,e),e.set(t,i)}function cM(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function cT(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function cI(t,e){return t.get(cE(t,e))}function cR(t,e,i){return t.set(cE(t,e),i),i}function cE(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(0,sa.default).getSingleton().register("modifyAutoColumnSizeSeed");const cA="autoColumnSize";var ck=new WeakMap,cD=new WeakMap,cO=new WeakSet;class cP extends cv{static get PLUGIN_KEY(){return cA}static get PLUGIN_PRIORITY(){return 10}static get SETTING_KEYS(){return!0}static get CALCULATION_STEP(){return 50}static get SYNC_CALCULATION_LIMIT(){return 50}constructor(t){super(t),cM(this,cO),cO.add(this),cT(this,"ghostTable",new cx(this.hot)),cT(this,"samplesGenerator",new cC((t,e)=>{let i=this.hot.toPhysicalRow(t),n=this.hot.toPhysicalColumn(e);if(this.hot.rowIndexMapper.isHidden(i)||this.hot.columnIndexMapper.isHidden(n))return!1;let r=this.hot.getCellMeta(t,e),o="";r.spanned||(o=this.hot.getDataAtCell(t,e));let a="";return this.hot.hasHook("modifyAutoColumnSizeSeed")&&(a=this.hot.runHooks("modifyAutoColumnSizeSeed",a,r,o)),{value:o,bundleSeed:a}})),cT(this,"inProgress",!1),cT(this,"measuredColumns",0),cT(this,"columnWidthsMap",new aF),c_(this,ck,[]),c_(this,cD,[]),this.hot.columnIndexMapper.registerMap("autoColumnSize",this.columnWidthsMap),this.addHook("beforeColumnResize",(t,e,i)=>cE(cO,this,cB).call(this,t,e,i))}isEnabled(){return!1!==this.hot.getSettings()[cA]&&!this.hot.getSettings().colWidths}enablePlugin(){var t=this;if(this.enabled)return;let e=this.hot.getSettings()[cA];e&&null!==e.useHeaders&&void 0!==e.useHeaders&&this.ghostTable.setSetting("useHeaders",e.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return cE(cO,t,cH).call(t,...i)}),this.addHook("beforeChangeRender",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return cE(cO,t,cV).call(t,...i)}),this.addHook("afterFormulasValuesUpdate",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return cE(cO,t,cW).call(t,...i)}),this.addHook("beforeRender",()=>cE(cO,this,cN).call(this)),this.addHook("modifyColWidth",(t,e)=>this.getColumnWidth(e,t)),this.addHook("init",()=>cE(cO,this,cF).call(this)),super.enablePlugin()}updatePlugin(){cR(cD,this,this.findColumnsWhereHeaderWasChanged()),super.updatePlugin()}disablePlugin(){super.disablePlugin(),this.addHook("beforeColumnResize",(t,e,i)=>cE(cO,this,cB).call(this,t,e,i))}calculateVisibleColumnsWidth(){if(!this.hot.countRows())return;let t=this.getFirstVisibleColumn(),e=this.getLastVisibleColumn();if(-1===t||-1===e)return;let i=this.hot.renderCall;this.calculateColumnsWidth({from:t,to:e},void 0,i)}calculateColumnsWidth(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countRows()-1},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n="number"==typeof t?{from:t,to:t}:t,r="number"==typeof e?{from:e,to:e}:e;(0,i0.rangeEach)(n.from,n.to,t=>{let e=this.hot.toPhysicalColumn(t);null===e&&(e=t),(i||null===this.columnWidthsMap.getValueAtIndex(e)&&!this.hot._getColWidthFromSettings(e))&&this.samplesGenerator.generateColumnSamples(t,r).forEach((t,e)=>this.ghostTable.addColumn(e,t))}),this.ghostTable.columns.length&&(this.hot.batchExecution(()=>{this.ghostTable.getWidths((t,e)=>{let i=this.hot.toPhysicalColumn(t);this.columnWidthsMap.setValueAtIndex(i,e)})},!0),this.measuredColumns=n.to+1,this.ghostTable.clean())}calculateAllColumnsWidth(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=0,n=this.hot.countCols()-1,r=null;this.inProgress=!0;let o=()=>{if(!this.hot){(0,nw.cancelAnimationFrame)(r),this.inProgress=!1;return}this.calculateColumnsWidth({from:i,to:Math.min(i+cP.CALCULATION_STEP,n)},t,e),(i=i+cP.CALCULATION_STEP+1)<n?r=(0,nw.requestAnimationFrame)(o):((0,nw.cancelAnimationFrame)(r),this.inProgress=!1,this.hot.view.adjustElementsSize())},a=this.getSyncCalculationLimit();a>=0&&(this.calculateColumnsWidth({from:0,to:a},t,e),i=a+1),i<n?o():this.inProgress=!1}setSamplingOptions(){let t=this.hot.getSettings()[cA],e=t&&(0,e6.hasOwnProperty)(t,"samplingRatio")?t.samplingRatio:void 0,i=t&&(0,e6.hasOwnProperty)(t,"allowSampleDuplicates")?t.allowSampleDuplicates:void 0;e&&!isNaN(e)&&this.samplesGenerator.setSampleCount(parseInt(e,10)),i&&this.samplesGenerator.setAllowDuplicates(i)}recalculateAllColumnsWidth(){this.hot.view.isVisible()&&this.calculateAllColumnsWidth({from:0,to:this.hot.countRows()-1},!0)}getSyncCalculationLimit(){let t=this.hot.getSettings()[cA],e=cP.SYNC_CALCULATION_LIMIT,i=this.hot.countCols()-1;return(0,e6.isObject)(t)&&(e=t.syncLimit,(0,iJ.isPercentValue)(e)?e=(0,i0.valueAccordingPercent)(i,e):e>>=0),Math.min(e,i)}getColumnWidth(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=e;return void 0===n&&(n=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(t)),i&&"number"==typeof n&&(n=Math.max(n,50))),n}getFirstVisibleColumn(){var t;return null!==(t=this.hot.view.getFirstRenderedVisibleColumn())&&void 0!==t?t:-1}getLastVisibleColumn(){var t;return null!==(t=this.hot.view.getLastRenderedVisibleColumn())&&void 0!==t?t:-1}findColumnsWhereHeaderWasChanged(){return this.hot.getColHeader().reduce((t,e,i)=>{let n=cI(ck,this).length;return(n-1<i||cI(ck,this)[i]!==e)&&t.push(this.hot.toVisualColumn(i)),n-1<i?cI(ck,this).push(e):cI(ck,this)[i]=e,t},[])}clearCache(t){Array.isArray(t)?this.hot.batchExecution(()=>{t.forEach(t=>{this.columnWidthsMap.setValueAtIndex(t,null)})},!0):this.columnWidthsMap.clear()}isNeedRecalculate(){return!!this.columnWidthsMap.getValues().slice(0,this.measuredColumns).filter(t=>null===t).length}destroy(){this.ghostTable.clean(),super.destroy()}}function cL(t){let e={from:0,to:this.hot.countRows()-1};t.forEach(t=>{let i=this.hot.toPhysicalColumn(t);null===i||this.hot._getColWidthFromSettings(i)||this.samplesGenerator.generateColumnSamples(t,e).forEach((t,e)=>this.ghostTable.addColumn(e,t))}),this.ghostTable.columns.length&&(this.hot.batchExecution(()=>{this.ghostTable.getWidths((t,e)=>{let i=this.hot.toPhysicalColumn(t);this.columnWidthsMap.setValueAtIndex(i,e)})},!0),this.ghostTable.clean())}function cN(){this.calculateVisibleColumnsWidth(),this.inProgress||(cE(cO,this,cL).call(this,cI(cD,this)),cR(cD,this,[]))}function cH(t,e){e||this.recalculateAllColumnsWidth()}function cV(t){let e=t.reduce((t,e)=>{let[,i]=e,n=this.hot.propToCol(i);return Number.isInteger(n)&&-1===t.indexOf(n)&&t.push(n),t},[]);cI(cD,this).push(...e)}function cB(t,e,i){let n=t;return i&&(this.calculateColumnsWidth(e,void 0,!0),n=this.getColumnWidth(e,void 0,!1)),n}function cF(){cR(ck,this,this.hot.getColHeader()),this.recalculateAllColumnsWidth()}function cW(t){let e=t.reduce((t,e)=>{var i;let n=null===(i=e.address)||void 0===i?void 0:i.col;if(Number.isInteger(n)){let e=this.hot.toVisualColumn(n);-1===t.indexOf(e)&&t.push(e)}return t},[]);cI(cD,this).push(...e)}t4("1C6fS"),t4("1hIp0");var sa=t4("10euP"),eG=t4("gFbQZ"),iy=t4("ceXML"),eX=t4("gnaTS"),e6=t4("hwT6B"),eX=t4("gnaTS");const cz={horizontal:"horizontal",vertical:"vertical"};function cj(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function cU(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(0,sa.default).getSingleton().register("modifyAutofillRange"),(0,sa.default).getSingleton().register("beforeAutofill"),(0,sa.default).getSingleton().register("afterAutofill");const cG="autofill",cY=["fillHandle"];var cX=new WeakSet;function c$(){this.selectAdjacent()&&this.fillIn()}function cZ(){this.handleDraggedCells=1,this.mouseDownOnCellCorner=!0}function cq(t){this.mouseDownOnCellCorner&&!this.hot.view.isMouseDown()&&this.handleDraggedCells&&(this.handleDraggedCells+=1,this.showBorder(t),this.addNewRowIfNeeded())}function cK(){this.handleDraggedCells&&(this.handleDraggedCells>1&&this.fillIn(),this.handleDraggedCells=0,this.mouseDownOnCellCorner=!1)}function cQ(t){let e=this.getIfMouseWasDraggedOutside(t);!1===this.addingStarted&&this.handleDraggedCells>0&&e?(this.mouseDragOutside=!0,this.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&this.autoInsertRow&&this.addRow()}t4("1C6fS"),t4("1hIp0");var nw=t4("llu1T"),e6=t4("hwT6B"),i0=t4("guO5N"),iJ=t4("bO142");function cJ(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function c0(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function c1(t,e){return t.get(c2(t,e))}function c2(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const c5="autoRowSize";var c3=new WeakMap,c4=new WeakSet;class c6 extends cv{static get PLUGIN_KEY(){return c5}static get PLUGIN_PRIORITY(){return 40}static get SETTING_KEYS(){return!0}static get CALCULATION_STEP(){return 50}static get SYNC_CALCULATION_LIMIT(){return 500}constructor(t){var e;super(t),cJ(this,c4),c4.add(this),c0(this,"headerHeight",null),c0(this,"ghostTable",new cx(this.hot)),c0(this,"samplesGenerator",new cC((t,e)=>{let i;let n=this.hot.toPhysicalRow(t),r=this.hot.toPhysicalColumn(e);return!(this.hot.rowIndexMapper.isHidden(n)||this.hot.columnIndexMapper.isHidden(r))&&(!(t>=0)||!(e>=0)||!this.hot.getCellMeta(t,e).hidden)&&(t>=0?i=this.hot.getDataAtCell(t,e):-1===t&&(i=this.hot.getColHeader(e)),{value:i})})),c0(this,"inProgress",!1),c0(this,"measuredRows",0),c0(this,"rowHeightsMap",new aF),e=[],cJ(this,c3),c3.set(this,e),this.hot.rowIndexMapper.registerMap("autoRowSize",this.rowHeightsMap),this.addHook("beforeRowResize",(t,e,i)=>c2(c4,this,c7).call(this,t,e,i))}isEnabled(){let t=this.hot.getSettings()[c5];return!0===t||(0,e6.isObject)(t)}enablePlugin(){var t=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return c2(c4,t,dt).call(t,...i)}),this.addHook("beforeChangeRender",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return c2(c4,t,de).call(t,...i)}),this.addHook("beforeColumnResize",()=>this.recalculateAllRowsHeight()),this.addHook("afterFormulasValuesUpdate",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return c2(c4,t,dn).call(t,...i)}),this.addHook("beforeRender",()=>c2(c4,this,c9).call(this)),this.addHook("modifyRowHeight",(t,e)=>this.getRowHeight(e,t)),this.addHook("init",()=>c2(c4,this,di).call(this)),this.addHook("modifyColumnHeaderHeight",()=>this.getColumnHeaderHeight()),super.enablePlugin())}disablePlugin(){this.headerHeight=null,super.disablePlugin(),this.addHook("beforeRowResize",(t,e,i)=>c2(c4,this,c7).call(this,t,e,i))}calculateVisibleRowsHeight(){if(!this.hot.countCols())return;let t=this.getFirstVisibleRow(),e=this.getLastVisibleRow();if(-1===t||-1===e)return;let i=this.hot.renderCall;this.calculateRowsHeight({from:t,to:e},void 0,i)}calculateRowsHeight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countCols()-1},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n="number"==typeof t?{from:t,to:t}:t,r="number"==typeof e?{from:e,to:e}:e;if(null!==this.hot.getColHeader(0)){let t=this.samplesGenerator.generateRowSamples(-1,r);this.ghostTable.addColumnHeadersRow(t.get(-1))}(0,i0.rangeEach)(n.from,n.to,t=>{let e=this.hot.toPhysicalRow(t);null===e&&(e=t),(i||null===this.rowHeightsMap.getValueAtIndex(e))&&this.samplesGenerator.generateRowSamples(t,r).forEach((t,e)=>this.ghostTable.addRow(e,t))}),this.ghostTable.rows.length&&(this.hot.batchExecution(()=>{this.ghostTable.getHeights((t,e)=>{t<0?this.headerHeight=e:this.rowHeightsMap.setValueAtIndex(this.hot.toPhysicalRow(t),e)})},!0),this.measuredRows=n.to+1,this.ghostTable.clean())}calculateAllRowsHeight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=0,n=this.hot.countRows()-1,r=null;this.inProgress=!0;let o=()=>{if(!this.hot){(0,nw.cancelAnimationFrame)(r),this.inProgress=!1;return}this.calculateRowsHeight({from:i,to:Math.min(i+c6.CALCULATION_STEP,n)},t,e),(i=i+c6.CALCULATION_STEP+1)<n?r=(0,nw.requestAnimationFrame)(o):((0,nw.cancelAnimationFrame)(r),this.inProgress=!1,this.hot.view.adjustElementsSize(),this.hot.view._wt.wtOverlays.inlineStartOverlay.needFullRender&&this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.draw())},a=this.getSyncCalculationLimit();a>=0&&(this.calculateRowsHeight({from:0,to:a},t,e),i=a+1),i<n?o():(this.inProgress=!1,this.hot.view.adjustElementsSize())}setSamplingOptions(){let t=this.hot.getSettings()[c5],e=t&&(0,e6.hasOwnProperty)(t,"samplingRatio")?t.samplingRatio:void 0,i=t&&(0,e6.hasOwnProperty)(t,"allowSampleDuplicates")?t.allowSampleDuplicates:void 0;e&&!isNaN(e)&&this.samplesGenerator.setSampleCount(parseInt(e,10)),i&&this.samplesGenerator.setAllowDuplicates(i)}recalculateAllRowsHeight(){this.hot.view.isVisible()&&this.calculateAllRowsHeight({from:0,to:this.hot.countCols()-1},!0)}getSyncCalculationLimit(){let t=this.hot.getSettings()[c5],e=c6.SYNC_CALCULATION_LIMIT,i=this.hot.countRows()-1;return(0,e6.isObject)(t)&&(e=t.syncLimit,(0,iJ.isPercentValue)(e)?e=(0,i0.valueAccordingPercent)(i,e):e>>=0),Math.min(e,i)}getRowHeight(t,e){let i=t<0?this.headerHeight:this.rowHeightsMap.getValueAtIndex(this.hot.toPhysicalRow(t)),n=e;return null!==i&&i>(e||0)&&(n=i),n}getColumnHeaderHeight(){return this.headerHeight}getFirstVisibleRow(){var t;return null!==(t=this.hot.view.getFirstRenderedVisibleRow())&&void 0!==t?t:-1}getLastVisibleRow(){var t;return null!==(t=this.hot.view.getLastRenderedVisibleRow())&&void 0!==t?t:-1}clearCache(t){this.headerHeight=null,Array.isArray(t)?this.hot.batchExecution(()=>{t.forEach(t=>{this.rowHeightsMap.setValueAtIndex(t,null)})},!0):this.rowHeightsMap.clear()}clearCacheByRange(t){let{from:e,to:i}="number"==typeof t?{from:t,to:t}:t;this.hot.batchExecution(()=>{(0,i0.rangeEach)(Math.min(e,i),Math.max(e,i),t=>{this.rowHeightsMap.setValueAtIndex(t,null)})},!0)}isNeedRecalculate(){return!!this.rowHeightsMap.getValues().slice(0,this.measuredRows).filter(t=>null===t).length}destroy(){this.ghostTable.clean(),super.destroy()}}function c8(t){let e={from:0,to:this.hot.countCols()-1};t.forEach(t=>{this.samplesGenerator.generateRowSamples(t,e).forEach((t,e)=>this.ghostTable.addRow(e,t))}),this.ghostTable.rows.length&&(this.hot.batchExecution(()=>{this.ghostTable.getHeights((t,e)=>{let i=this.hot.toPhysicalRow(t);this.rowHeightsMap.setValueAtIndex(i,e)})},!0),this.ghostTable.clean())}function c9(){if(this.calculateVisibleRowsHeight(),!this.inProgress){var t;c2(c4,this,c8).call(this,c1(c3,this)),t=[],c3.set(c2(c3,this),t)}}function c7(t,e,i){let n=t;return i&&(this.calculateRowsHeight(e,void 0,!0),n=this.getRowHeight(e)),n}function dt(t,e){e||this.recalculateAllRowsHeight()}function de(t){let e=t.reduce((t,e)=>{let[i]=e;return -1===t.indexOf(i)&&t.push(i),t},[]);c1(c3,this).push(...e)}function di(){this.recalculateAllRowsHeight()}function dn(t){let e=t.reduce((t,e)=>{var i;let n=null===(i=e.address)||void 0===i?void 0:i.row;if(Number.isInteger(n)){let e=this.hot.toVisualRow(n);-1===t.indexOf(e)&&t.push(e)}return t},[]);c1(c3,this).push(...e)}t4("1C6fS"),t4("1C6fS");const dr=new Map([["indexesSequence",{getListWithInsertedItems:az,getListWithRemovedItems:aj}],["physicallyIndexed",{getListWithInsertedItems:aV,getListWithRemovedItems:aB}]]),da=t=>{if(!1===dr.has(t))throw Error(`Alter strategy with ID '${t}' does not exist.`);return dr.get(t)},{getListWithInsertedItems:ds,getListWithRemovedItems:dl}=da("physicallyIndexed");var dh=class extends aH{constructor(){super(t=>t)}insert(t,e){let i=aG(this.indexedValues,e);this.indexedValues=ds(i,t,e,this.initValueOrFn),super.insert(t,e)}remove(t){let e=dl(this.indexedValues,t);this.indexedValues=aU(e,t),super.remove(t)}};const{getListWithInsertedItems:du,getListWithRemovedItems:dc}=da("physicallyIndexed");var dd=class extends aH{constructor(){super(t=>t)}insert(t,e){this.indexedValues=du(this.indexedValues,t,e,(t,e)=>this.getNextValue(e)),super.insert(t,e)}remove(t){this.indexedValues=dc(this.indexedValues,t),super.remove(t)}getNextValue(t){return Math.max(...this.getValues())+1+t}};const dp="bindRowsWithHeaders",df=new Map([["loose",dh],["strict",dd]]);var dg=new WeakSet;function dm(t){return this.headerIndexes.getValueAtIndex(this.hot.toPhysicalRow(t))}t4("1C6fS"),t4("1hIp0");var iy=t4("ceXML"),i0=t4("guO5N"),e8=t4("jlXkd"),eG=t4("gFbQZ"),eq=t4("7HxIw"),nZ=t4("4Pbrh");function dy(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function dv(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function dw(t,e,i){return t.set(db(t,e),i),i}function db(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const dx="collapsibleColumns",dS=["nestedHeaders"],dC="collapsibleIndicator",d_=new Map([["collapse",{hideColumn:!0,beforeHook:"beforeColumnCollapse",afterHook:"afterColumnCollapse"}],["expand",{hideColumn:!1,beforeHook:"beforeColumnExpand",afterHook:"afterColumnExpand"}]]);var dM=new WeakMap,dT=new WeakSet;function dI(t,e,i){var n,r;let{collapsible:o,origColspan:a,isCollapsed:s}=null!==(n=this.headerStateManager.getHeaderSettings(i,t))&&void 0!==n?n:{},l=o&&a>1&&t>=this.hot.getSettings().fixedColumnsStart,h=this.hot.getSettings().ariaTags,u=e.querySelector(`.${dC}`);(0,eG.removeAttribute)(e,[(0,nZ.A11Y_EXPANDED)("")[0]]),l?(u||(u=this.hot.rootDocument.createElement("div"),(0,eG.addClass)(u,dC),e.querySelector("div:first-child").appendChild(u)),(0,eG.removeClass)(u,["collapsed","expanded"]),s?((0,eG.addClass)(u,"collapsed"),(0,eG.fastInnerText)(u,"+"),h&&(0,eG.setAttribute)(e,...(0,nZ.A11Y_EXPANDED)(!1))):((0,eG.addClass)(u,"expanded"),(0,eG.fastInnerText)(u,"-"),h&&(0,eG.setAttribute)(e,...(0,nZ.A11Y_EXPANDED)(!0))),h&&(0,eG.setAttribute)(u,...(0,nZ.A11Y_HIDDEN)())):null===(r=u)||void 0===r||r.remove()}function dR(t,e){(0,eG.hasClass)(t.target,dC)&&((0,eG.hasClass)(t.target,"expanded")?(this.eventManager.fireEvent(t.target,"mouseup"),this.toggleCollapsibleSection([e],"collapse")):(0,eG.hasClass)(t.target,"collapsed")&&(this.eventManager.fireEvent(t.target,"mouseup"),this.toggleCollapsibleSection([e],"expand")),(0,eq.stopImmediatePropagation)(t))}function dE(){this.updatePlugin()}function dA(t,e){e||this.updatePlugin()}t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),eX=t4("gnaTS"),e6=t4("hwT6B"),eY=t4("f3221"),iy=t4("ceXML"),sa=t4("10euP");t4("1C6fS");var e6=t4("hwT6B"),eX=t4("gnaTS");function dk(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const dD=["sortEmptyCells","indicator","headerAction","compareFunctionFactory"];class dO{constructor(t,e){dk(this,"hot",void 0),dk(this,"sortingStates",new aY),dk(this,"sortEmptyCells",!1),dk(this,"indicator",!0),dk(this,"headerAction",!0),dk(this,"compareFunctionFactory",void 0),dk(this,"mapName",void 0),this.hot=t,this.mapName=e,this.hot.columnIndexMapper.registerMap(e,this.sortingStates)}updateAllColumnsProperties(t){(0,e6.isObject)(t)&&(0,e6.objectEach)(t,(t,e)=>{dD.includes(e)&&(this[e]=t)})}getAllColumnsProperties(){let t={sortEmptyCells:this.sortEmptyCells,indicator:this.indicator,headerAction:this.headerAction};return"function"==typeof this.compareFunctionFactory&&(t.compareFunctionFactory=this.compareFunctionFactory),t}getSortOrderOfColumn(t){var e;return null===(e=this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(t)))||void 0===e?void 0:e.sortOrder}getIndexOfColumnInSortQueue(t){return t=this.hot.toPhysicalColumn(t),this.sortingStates.getEntries().findIndex(e=>{let[i]=e;return i===t})}getNumberOfSortedColumns(){return this.sortingStates.getLength()}isListOfSortedColumnsEmpty(){return 0===this.getNumberOfSortedColumns()}isColumnSorted(t){return(0,e6.isObject)(this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(t)))}getSortStates(){return null===this.sortingStates?[]:this.sortingStates.getEntries().map(t=>{let[e,i]=t;return{column:this.hot.toVisualColumn(e),...i}})}getColumnSortState(t){let e=this.getSortOrderOfColumn(t);if((0,eX.isDefined)(e))return{column:t,sortOrder:e}}setSortStates(t){this.sortingStates.clear();for(let e=0;e<t.length;e+=1)this.sortingStates.setValueAtIndex(this.hot.toPhysicalColumn(t[e].column),{sortOrder:t[e].sortOrder})}destroy(){this.hot.columnIndexMapper.unregisterMap(this.mapName),this.sortingStates=null}}t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var cr=t4("45fvw"),e6=t4("hwT6B"),eq=t4("7HxIw"),eX=(t4("gnaTS"),t4("gnaTS"));function dP(t,e,i){let n=e.locale;return function(e,r){let{sortEmptyCells:o}=i;return("string"==typeof e&&(e=e.toLocaleLowerCase(n)),"string"==typeof r&&(r=r.toLocaleLowerCase(n)),e===r)?dz:(0,eX.isEmpty)(e)?(0,eX.isEmpty)(r)?dz:o&&"asc"===t?dj:dU:(0,eX.isEmpty)(r)?o&&"asc"===t?dU:dj:isNaN(e)&&!isNaN(r)?"asc"===t?dU:dj:!isNaN(e)&&isNaN(r)?"asc"===t?dj:dU:(isNaN(e)||isNaN(r)||(e=parseFloat(e),r=parseFloat(r)),e<r)?"asc"===t?dj:dU:e>r?"asc"===t?dU:dj:dz}}const dL="default";var eX=(t4("gnaTS"),t4("gnaTS")),nr=t4("lSZ9A");const{register:dN,getItem:dH,hasItem:dV}=(0,nr.default)("sorting.compareFunctionFactory"),{register:dB,getItem:dF}=(0,nr.default)("sorting.mainSortComparator");function dW(t){return dV(t)?dH(t):dH(dL)}dN("checkbox",function(t,e,i){let n=e.checkedTemplate,r=e.uncheckedTemplate,{sortEmptyCells:o}=i;return function(a,s){let l=(0,eX.isEmpty)(a),h=(0,eX.isEmpty)(s),u=l?r:a,c=h?r:s,d=u===r||u===n,p=c===r||c===n;if(!1===o){if(l&&!1===h)return dU;if(!1===l&&h)return dj}return!1===d&&p?"asc"===t?dj:dU:d&&!1===p?"asc"===t?dU:dj:!1===d&&!1===p?dP(t,e,i)(a,s):u===r&&c===n?"asc"===t?dj:dU:u===n&&c===r?"asc"===t?dU:dj:dz}}),dN("date",function(t,e,i){return dK(t,e.dateFormat,i)}),dN(dL,dP),dN("numeric",function(t,e,i){return function(e,n){let r=parseFloat(e),o=parseFloat(n),{sortEmptyCells:a}=i;if(r===o||isNaN(r)&&isNaN(o))return dz;if(a){if((0,eX.isEmpty)(e))return"asc"===t?dj:dU;if((0,eX.isEmpty)(n))return"asc"===t?dU:dj}return isNaN(r)?dU:isNaN(o)?dj:r<o?"asc"===t?dj:dU:r>o?"asc"===t?dU:dj:dz}}),dN("time",function(t,e,i){return dK(t,e.timeFormat,i)});const dz=0,dj=-1,dU=1,dG="desc",dY="colHeader";function dX(t){return t===dG?void 0:"asc"===t?dG:"asc"}function d$(t){return t.querySelector(`.${dY}`)}function dZ(t,e){if(t<0||!e.parentNode)return!1;let i=e.parentNode.parentNode.childNodes;return -1==Array.from(i).indexOf(e.parentNode)-i.length}function dq(t,e,i){return -1===t&&e>=0&&!1===(0,eq.isRightClick)(i)}function dK(t,e,n){return function(r,o){let{sortEmptyCells:a}=n;if(r===o)return dz;if((0,eX.isEmpty)(r))return(0,eX.isEmpty)(o)?dz:a&&"asc"===t?dj:dU;if((0,eX.isEmpty)(o))return a&&"asc"===t?dU:dj;let s=i(cr)(r,e),l=i(cr)(o,e);return s.isValid()?l.isValid()?l.isAfter(s)?"asc"===t?dj:dU:l.isBefore(s)?"asc"===t?dU:dj:dz:dj:dU}}t4("1hIp0");var eX=t4("gnaTS");const dQ="indicatorDisabled",dJ="columnSorting",d0="sortAction",d1=new Map([["asc","ascending"],[dG,"descending"]]);var nZ=t4("4Pbrh");function d2(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function d5(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const d3="columnSorting",d4="append";dB(d3,function(t,e){return function(i,n){let[,...r]=i,[,...o]=n;return function(i){let n=t[0],a=e[0],s=r[0],l=o[i],h=a.columnSorting;return(h.compareFunctionFactory?h.compareFunctionFactory:dW(a.type))(n,a,h)(s,l)}(0)}}),(0,sa.default).getSingleton().register("beforeColumnSort"),(0,sa.default).getSingleton().register("afterColumnSort");var d6=new WeakSet;class d8 extends cv{constructor(){super(...arguments),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,d6),d6.add(this),d2(this,"columnStatesManager",null),d2(this,"columnMetaCache",null),d2(this,"pluginKey",d3),d2(this,"indexesSequenceCache",null)}static get PLUGIN_KEY(){return d3}static get PLUGIN_PRIORITY(){return 50}isEnabled(){return!!this.hot.getSettings()[this.pluginKey]}enablePlugin(){var t=this;this.enabled||(this.columnStatesManager=new dO(this.hot,`${this.pluginKey}.sortingStates`),this.columnMetaCache=new aF(t=>{let e=this.hot.toVisualColumn(t);return null===e&&(e=t),this.getMergedPluginSettings(e)}),this.hot.columnIndexMapper.registerMap(`${this.pluginKey}.columnMeta`,this.columnMetaCache),this.addHook("afterGetColHeader",(t,e)=>d5(d6,this,d7).call(this,t,e)),this.addHook("beforeOnCellMouseDown",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return d5(d6,t,pe).call(t,...i)}),this.addHook("afterOnCellMouseDown",(t,e)=>this.onAfterOnCellMouseDown(t,e)),this.addHook("afterInit",()=>d5(d6,this,d9).call(this)),this.addHook("afterLoadData",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return d5(d6,t,pt).call(t,...i)}),this.hot.view&&d5(d6,this,d9).call(this),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){let t=(t,e)=>{let i=d$(e);!1!==dZ(t,e)&&null!==i&&this.updateHeaderClasses(i)};this.hot.addHook("afterGetColHeader",t),this.hot.addHookOnce("afterViewRender",()=>{this.hot.removeHook("afterGetColHeader",t)}),this.hot.batchExecution(()=>{null!==this.indexesSequenceCache&&(this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues()),this.hot.rowIndexMapper.unregisterMap(this.pluginKey),this.indexesSequenceCache=null)},!0),this.hot.columnIndexMapper.unregisterMap(`${this.pluginKey}.columnMeta`),this.columnStatesManager.destroy(),this.columnMetaCache=null,this.columnStatesManager=null,this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{let{highlight:t}=this.hot.getSelectedRangeLast();return this.sort(this.getColumnNextConfig(t.col)),!1},runOnlyIf:()=>{var t,e;let i=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return i&&(null===(e=this.hot.getSelectedRangeLast())||void 0===e?void 0:e.isSingle())&&this.hot.selection.isCellVisible(i)&&-1===i.row&&i.col>=0},relativeToGroup:ue,position:"before",group:d3})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(d3)}sort(t){let e=this.getSortConfig(),i=this.getNormalizedSortConfigs(t),n=this.areValidSortConfigs(i);!1!==this.hot.runHooks("beforeColumnSort",e,i,n)&&(0===e.length&&null===this.indexesSequenceCache&&(this.indexesSequenceCache=this.hot.rowIndexMapper.registerMap(this.pluginKey,new a$),this.indexesSequenceCache.setValues(this.hot.rowIndexMapper.getIndexesSequence())),n&&(this.columnStatesManager.setSortStates(i),this.sortByPresetSortStates(i),this.saveAllSortSettings(i)),this.hot.runHooks("afterColumnSort",e,n?i:e,n),n&&(this.hot.render(),this.hot.forceFullRender=!1,this.hot.view.render()))}clearSort(){this.sort([])}isSorted(){return this.enabled&&!this.columnStatesManager.isListOfSortedColumnsEmpty()}getSortConfig(t){return(0,eX.isDefined)(t)?this.columnStatesManager.getColumnSortState(t):this.columnStatesManager.getSortStates()}setSortConfig(t){let e=this.getNormalizedSortConfigs(t);this.areValidSortConfigs(e)&&this.columnStatesManager.setSortStates(e)}getNormalizedSortConfigs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)?t.slice(0,1):[t]}areValidSortConfigs(t){let e=this.hot.countCols();return function(t){if(t.some(t=>!1===function(t){if(!1===(0,e6.isObject)(t))return!1;let{column:e,sortOrder:i}=t;return Number.isInteger(e)&&["asc",dG].includes(i)}(t)))return!1;let e=t.map(t=>{let{column:e}=t;return e});return new Set(e).size===e.length}(t)&&t.every(t=>{let{column:i}=t;return i<=e&&i>=0})}saveAllSortSettings(t){let e=this.columnStatesManager.getAllColumnsProperties();e.initialConfig=(0,iy.arrayMap)(t,t=>{let{column:e,...i}=t;return{column:this.hot.toPhysicalColumn(e),...i}}),this.hot.runHooks("persistentStateSave","columnSorting",e)}getAllSavedSortSettings(){let t={};this.hot.runHooks("persistentStateLoad","columnSorting",t);let e=t.value;return(0,eX.isDefined)(e)&&Array.isArray(e.initialConfig)&&(e.initialConfig=(0,iy.arrayMap)(e.initialConfig,t=>{let{column:e,...i}=t;return{column:this.hot.toVisualColumn(e),...i}})),e}getColumnNextConfig(t){let e=this.columnStatesManager.getSortOrderOfColumn(t);if((0,eX.isDefined)(e)){let i=dX(e);return(0,eX.isDefined)(i)?{column:t,sortOrder:i}:void 0}let i=this.hot.countCols();if(Number.isInteger(t)&&t>=0&&t<i)return{column:t,sortOrder:dX()}}getNextSortConfig(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d4,i=this.columnStatesManager.getIndexOfColumnInSortQueue(t),n=-1!==i,r=this.getSortConfig(),o=this.getColumnNextConfig(t);if(n){if((0,eX.isUndefined)(o))return[...r.slice(0,i),...r.slice(i+1)];if(e===d4)return[...r.slice(0,i),...r.slice(i+1),o];if("replace"===e)return[...r.slice(0,i),o,...r.slice(i+1)]}return(0,eX.isDefined)(o)?r.concat(o):r}getPluginColumnConfig(t){if((0,e6.isObject)(t)){let e=t[this.pluginKey];if((0,e6.isObject)(e))return e}return{}}getMergedPluginSettings(t){let e=this.hot.getSettings()[this.pluginKey],i=this.columnStatesManager.getAllColumnsProperties(),n=Object.getPrototypeOf(this.hot.getCellMeta(0,t));return Array.isArray(n.columns)?Object.assign(i,e,this.getPluginColumnConfig(n.columns[t])):(0,eY.isFunction)(n.columns)?Object.assign(i,e,this.getPluginColumnConfig(n.columns(t))):Object.assign(i,e)}getFirstCellSettings(t){let e=Object.create(this.hot.getCellMeta(0,t));return e[this.pluginKey]=this.columnMetaCache.getValueAtIndex(this.hot.toPhysicalColumn(t)),e}getNumberOfRowsToSort(t){let e=this.hot.getSettings();return e.maxRows<=t?e.maxRows:t-e.minSpareRows}sortByPresetSortStates(t){if(this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues()),0===t.length)return;let e=[],i=this.hot.countRows(),n=e=>(0,iy.arrayMap)(t,t=>this.hot.getDataAtCell(e,t.column));for(let t=0;t<this.getNumberOfRowsToSort(i);t+=1)e.push([this.hot.toPhysicalRow(t)].concat(n(t)));let r=(0,iy.arrayMap)(e,t=>t[0]);!function(t,e){let i=dF(e);for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];t.sort(i(...r))}(e,this.pluginKey,(0,iy.arrayMap)(t,t=>t.sortOrder),(0,iy.arrayMap)(t,t=>this.getFirstCellSettings(t.column)));for(let t=e.length;t<i;t+=1)e.push([t].concat(n(t)));let o=(0,iy.arrayMap)(e,t=>t[0]),a=new Map((0,iy.arrayMap)(r,(t,e)=>[t,o[e]])),s=(0,iy.arrayMap)(this.hot.rowIndexMapper.getIndexesSequence(),t=>a.has(t)?a.get(t):t);this.hot.rowIndexMapper.setIndexesSequence(s)}sortBySettings(t){if((0,e6.isObject)(t)){this.columnStatesManager.updateAllColumnsProperties(t);let e=t.initialConfig;(Array.isArray(e)||(0,e6.isObject)(e))&&this.sort(e)}else this.hot.render()}updateHeaderClasses(t){if((0,eG.removeClass)(t,Array.from(d1.values()).concat(d0,dQ,dJ)),!1!==this.enabled){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];(0,eG.addClass)(t,function(t,e,i,n){let r=[dJ];if(n&&r.push(d0),!1===i)return r.push(dQ),r;let o=t.getSortOrderOfColumn(e);return(0,eX.isDefined)(o)&&r.push(d1.get(o)),r}(...i))}}onUpdateSettings(t){super.onUpdateSettings(),null!==this.columnMetaCache&&this.columnMetaCache.init(this.hot.columnIndexMapper.getNumberOfIndexes()),(0,eX.isDefined)(t[this.pluginKey])&&this.sortBySettings(t[this.pluginKey])}wasClickableHeaderClicked(t,e){return this.getFirstCellSettings(e)[this.pluginKey].headerAction&&(0,eG.hasClass)(t.target,dY)}onAfterOnCellMouseDown(t,e){if(!1!==dq(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)){this.hot.getShortcutManager().isCtrlPressed()&&(this.hot.deselectCell(),this.hot.selectColumns(e.col));let t=this.hot.getActiveEditor(),i=this.getColumnNextConfig(e.col);null!=t&&t.isOpened()&&this.hot.getCellValidator(t.row,t.col)?this.hot.addHookOnce("postAfterValidate",()=>{this.sort(i)}):this.sort(i)}}destroy(){var t;null===(t=this.columnStatesManager)||void 0===t||t.destroy(),super.destroy()}}function d9(){let t=this.getAllSavedSortSettings();if((0,e6.isObject)(t))this.sortBySettings(t);else{let t=this.hot.getSettings()[this.pluginKey];this.sortBySettings(t)}}function d7(t,e){let i=d$(e);if(!1===dZ(t,e)||null===i)return;let n=this.getFirstCellSettings(t)[this.pluginKey],r=n.indicator,o=n.headerAction;if(this.updateHeaderClasses(i,this.columnStatesManager,t,r,o),this.hot.getSettings().ariaTags){let i=this.columnStatesManager.getSortOrderOfColumn(t);(0,eG.setAttribute)(e,...(0,nZ.A11Y_SORT)(i?`${i}ending`:"none"))}}function pt(t){!0===t&&this.hot.view&&d5(d6,this,d9).call(this)}function pe(t,e,i,n){!1!==dq(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)&&this.hot.getShortcutManager().isCtrlPressed()&&(n.column=!0)}t4("1C6fS");var e6=t4("hwT6B");t4("1C6fS"),t4("1hIp0");var iy=t4("ceXML"),e8=t4("jlXkd");function pi(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var pn=class{constructor(t,e){pi(this,"plugin",void 0),pi(this,"hot",void 0),pi(this,"endpoints",[]),pi(this,"settings",void 0),pi(this,"settingsType","array"),pi(this,"currentEndpoint",null),pi(this,"cellsToSetCache",[]),this.plugin=t,this.hot=this.plugin.hot,this.settings=e}initEndpoints(){this.endpoints=this.parseSettings(),this.refreshAllEndpoints()}getEndpoint(t){return"function"===this.settingsType?this.fillMissingEndpointData(this.settings)[t]:this.endpoints[t]}getAllEndpoints(){return"function"===this.settingsType?this.fillMissingEndpointData(this.settings):this.endpoints}fillMissingEndpointData(t){return this.parseSettings(t.call(this))}parseSettings(t){let e=[],i=t;if(!i&&"function"==typeof this.settings){this.settingsType="function";return}return i||(i=this.settings),(0,iy.arrayEach)(i,t=>{let i={};this.assignSetting(t,i,"ranges",[[0,this.hot.countRows()-1]]),this.assignSetting(t,i,"reversedRowCoords",!1),this.assignSetting(t,i,"destinationRow",Error(`
        You must provide a destination row for the Column Summary plugin in order to work properly!
      `)),this.assignSetting(t,i,"destinationColumn",Error(`
        You must provide a destination column for the Column Summary plugin in order to work properly!
      `)),this.assignSetting(t,i,"sourceColumn",t.destinationColumn),this.assignSetting(t,i,"type","sum"),this.assignSetting(t,i,"forceNumeric",!1),this.assignSetting(t,i,"suppressDataTypeErrors",!0),this.assignSetting(t,i,"customFunction",null),this.assignSetting(t,i,"readOnly",!0),this.assignSetting(t,i,"roundFloat",!1),e.push(i)}),e}assignSetting(t,e,i,n){if("ranges"===i&&void 0===t[i]){e[i]=n;return}if("ranges"!==i||0!==t[i].length){if(void 0===t[i]){if(n instanceof Error)throw n;e[i]=n}else"destinationRow"===i&&e.reversedRowCoords?e[i]=this.hot.countRows()-t[i]-1:e[i]=t[i]}}resetSetupBeforeStructureAlteration(t,e,i){if("function"!==this.settingsType)return;let n=t.indexOf("row")>-1?"row":"col",r=this.getAllEndpoints();(0,iy.arrayEach)(r,r=>{"row"===n&&r.destinationRow>=e&&("insert_row"===t?r.alterRowOffset=i:"remove_row"===t&&(r.alterRowOffset=-1*i)),"col"===n&&r.destinationColumn>=e&&("insert_col"===t?r.alterColumnOffset=i:"remove_col"===t&&(r.alterColumnOffset=-1*i))}),this.resetAllEndpoints(r,!1)}resetSetupAfterStructureAlteration(t,e,i,n,r){let o=!(arguments.length>5)||void 0===arguments[5]||arguments[5];if("function"===this.settingsType){let t=()=>(this.hot.removeHook("beforeViewRender",t),this.refreshAllEndpoints());this.hot.addHookOnce("beforeViewRender",t);return}let a=t.indexOf("row")>-1?"row":"col",s=t.indexOf("remove")>-1?-1:1,l=this.getAllEndpoints(),h=0===t.indexOf("move_row");(0,iy.arrayEach)(l,t=>{"row"===a&&t.destinationRow>=e&&(t.alterRowOffset=s*i),"col"===a&&t.destinationColumn>=e&&(t.alterColumnOffset=s*i)}),this.resetAllEndpoints(l,!h),h?(0,iy.arrayEach)(l,t=>{this.extendEndpointRanges(t,e,n[0],n.length),this.recreatePhysicalRanges(t),this.clearOffsetInformation(t)}):(0,iy.arrayEach)(l,t=>{this.shiftEndpointCoordinates(t,e)}),o&&this.refreshAllEndpoints()}clearOffsetInformation(t){t.alterRowOffset=void 0,t.alterColumnOffset=void 0}extendEndpointRanges(t,e,i,n){(0,iy.arrayEach)(t.ranges,t=>{t[1]&&(e>=t[0]&&e<=t[1]?i>t[1]?t[1]+=n:i<t[0]&&(t[0]-=n):i>=t[0]&&i<=t[1]&&(t[1]-=n,e<=t[0]&&(t[0]+=1,t[1]+=1)))})}recreatePhysicalRanges(t){let e=t.ranges,i=[],n=[];(0,iy.arrayEach)(e,t=>{let e=[];if(t[1])for(let i=t[0];i<=t[1];i++)e.push(this.hot.toPhysicalRow(i));else e.push(this.hot.toPhysicalRow(t[0]));n.push(e)}),(0,iy.arrayEach)(n,t=>{let e=[];(0,iy.arrayEach)(t,(n,r)=>{0===r?e.push(n):t[r]!==t[r-1]+1&&(e.push(t[r-1]),i.push(e),(e=[]).push(n)),r===t.length-1&&(e.push(n),i.push(e))})}),t.ranges=i}shiftEndpointCoordinates(t,e){t.alterRowOffset&&0!==t.alterRowOffset?(t.destinationRow+=t.alterRowOffset||0,(0,iy.arrayEach)(t.ranges,i=>{(0,iy.arrayEach)(i,(n,r)=>{n>=e&&(i[r]+=t.alterRowOffset||0)})})):t.alterColumnOffset&&0!==t.alterColumnOffset&&(t.destinationColumn+=t.alterColumnOffset||0,t.sourceColumn+=t.alterColumnOffset||0)}resetAllEndpoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAllEndpoints(),e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];t.some(t=>{let e=t.alterRowOffset||0,i=t.alterColumnOffset||0;return!!(t.destinationRow+e>=this.hot.countRows()||t.destinationColumn+i>=this.hot.countCols())})||(this.cellsToSetCache=[],(0,iy.arrayEach)(t,t=>{this.resetEndpointValue(t,e)}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[])}refreshAllEndpoints(){this.cellsToSetCache=[],(0,iy.arrayEach)(this.getAllEndpoints(),t=>{this.currentEndpoint=t,this.plugin.calculate(t),this.setEndpointValue(t,"init")}),this.currentEndpoint=null,this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}refreshChangedEndpoints(t){let e=[];this.cellsToSetCache=[],(0,iy.arrayEach)(t,(t,i,n)=>{`${t[2]||""}`!=`${t[3]}`&&(0,iy.arrayEach)(this.getAllEndpoints(),(t,r)=>{this.hot.propToCol(n[i][1])===t.sourceColumn&&-1===e.indexOf(r)&&e.push(r)})}),(0,iy.arrayEach)(e,t=>{this.refreshEndpoint(this.getEndpoint(t))}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}refreshCellMetas(){this.endpoints.forEach(t=>{let e=this.hot.toVisualRow(t.destinationRow);if(null!==e){let i=this.hot.getCellMeta(e,t.destinationColumn);i.readOnly=t.readOnly,i.className="columnSummaryResult"}})}refreshEndpoint(t){this.currentEndpoint=t,this.plugin.calculate(t),this.setEndpointValue(t),this.currentEndpoint=null}resetEndpointValue(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=t.alterRowOffset||0,n=t.alterColumnOffset||0;this.cellsToSetCache.push([this.hot.toVisualRow(t.destinationRow+(e?i:0)),this.hot.toVisualColumn(t.destinationColumn+(e?n:0)),""])}setEndpointValue(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.hot.toVisualRow(t.destinationRow);if(t.destinationRow>=this.hot.countRows()||t.destinationColumn>=this.hot.countCols()){this.throwOutOfBoundsWarning();return}let r=this.hot.toVisualRow(t.destinationRow);if(null!==r){let i=this.hot.getCellMeta(r,t.destinationColumn);("init"===e||i.readOnly!==t.readOnly)&&(i.readOnly=t.readOnly,i.className="columnSummaryResult")}if((!0===t.roundFloat||Number.isInteger(t.roundFloat))&&!isNaN(t.result)){let e=t.roundFloat,i=0;Number.isInteger(e)&&(i=Math.min(Math.max(0,e),100)),t.result=t.result.toFixed(i)}i?this.hot.setDataAtCell(n,t.destinationColumn,t.result,"ColumnSummary.set"):this.cellsToSetCache.push([n,t.destinationColumn,t.result]),t.alterRowOffset=void 0,t.alterColumnOffset=void 0}throwOutOfBoundsWarning(){(0,e8.warn)("One of the Column Summary plugins' destination points you provided is beyond the table boundaries!")}},nJ=t4("iCsRe");function pr(t){return null==t||isNaN(t)}function po(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const pa="columnSummary";var ps=new WeakSet;function pl(){this.endpoints.initEndpoints()}function ph(t){void 0!==t.columns&&this.endpoints.refreshCellMetas()}function pu(t,e){t&&"ColumnSummary.reset"!==e&&"ColumnSummary.set"!==e&&"loadData"!==e&&this.endpoints.refreshChangedEndpoints(t)}function pc(t,e){this.endpoints.resetSetupBeforeStructureAlteration("move_row",t[0],t.length,t,this.pluginName),this.endpoints.resetSetupAfterStructureAlteration("move_row",e,t.length,t,this.pluginName)}t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),eq=t4("7HxIw"),e6=t4("hwT6B");t4("1C6fS");var eG=t4("gFbQZ"),e6=t4("hwT6B");t4("1C6fS");var e6=t4("hwT6B");function pd(t,e,i){pp(t,e),e.set(t,i)}function pp(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function pf(t,e){return t.get(pm(t,e))}function pg(t,e,i){return t.set(pm(t,e),i),i}function pm(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var py=new WeakMap,pv=new WeakMap,pw=new WeakMap,pb=new WeakSet;class px{constructor(){pp(this,pb),pb.add(this),pd(this,py,!0),pd(this,pv,null),pd(this,pw,new ResizeObserver(t=>pm(pb,this,pS).call(this,t)))}setObservedElement(t){pg(pv,this,t)}unobserve(){pf(pw,this).unobserve(pf(pv,this))}observe(){pg(py,this,!0),pf(pw,this).observe(pf(pv,this))}destroy(){pf(pw,this).disconnect()}}function pS(t){if(pf(py,this)||!Array.isArray(t)||!t.length){pg(py,this,!1);return}t.forEach(t=>{let{borderBoxSize:e}=t,{inlineSize:i,blockSize:n}=e[0];this.runLocalHooks("resize",i,n)})}function pC(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function p_(t,e){return t.get(pT(t,e))}function pM(t,e,i){return t.set(pT(t,e),i),i}function pT(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(0,e6.mixin)(px,aL);var pI=new WeakMap,pR=new WeakMap,pE=new WeakMap,pA=new WeakMap,pk=new WeakMap,pD=new WeakMap,pO=new WeakMap;class pP{static get CLASS_EDITOR_CONTAINER(){return"htCommentsContainer"}static get CLASS_EDITOR(){return"htComments"}static get CLASS_INPUT(){return"htCommentTextArea"}static get CLASS_CELL(){return"htCommentCell"}constructor(t,e){var i=this;pC(this,pI,void 0),pC(this,pR,!1),pC(this,pE,null),pC(this,pA,void 0),pC(this,pk,void 0),pC(this,pD,!0),pC(this,pO,new px),pM(pI,this,t),pM(pR,this,e),pM(pA,this,this.createEditor()),pM(pk,this,p_(pA,this).style),p_(pO,this).setObservedElement(this.getInputElement()),p_(pO,this).addLocalHook("resize",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runLocalHooks("resize",...e)}),this.hide()}setPosition(t,e){p_(pk,this).left=`${t}px`,p_(pk,this).top=`${e}px`}setSize(t,e){if(t&&e){let i=this.getInputElement();i.style.width=`${t}px`,i.style.height=`${e}px`}}getSize(){return{width:(0,eG.outerWidth)(this.getInputElement()),height:(0,eG.outerHeight)(this.getInputElement())}}observeSize(){p_(pO,this).observe()}resetSize(){let t=this.getInputElement();t.style.width="",t.style.height=""}setReadOnlyState(t){this.getInputElement().readOnly=t}show(){p_(pk,this).display="block",pM(pD,this,!1)}hide(){p_(pO,this).unobserve(),p_(pD,this)||(p_(pk,this).display="none"),pM(pD,this,!0)}isVisible(){return"block"===p_(pk,this).display}setValue(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.getInputElement().value=t||""}getValue(){return this.getInputElement().value}isFocused(){return p_(pI,this).activeElement===this.getInputElement()}focus(){this.getInputElement().focus()}createEditor(){let t=p_(pI,this).createElement("div"),e=p_(pI,this).createElement("textarea");return t.style.display="none",pM(pE,this,p_(pI,this).createElement("div")),p_(pE,this).setAttribute("dir",p_(pR,this)?"rtl":"ltr"),(0,eG.addClass)(p_(pE,this),pP.CLASS_EDITOR_CONTAINER),p_(pI,this).body.appendChild(p_(pE,this)),(0,eG.addClass)(t,pP.CLASS_EDITOR),(0,eG.addClass)(e,pP.CLASS_INPUT),e.setAttribute("data-hot-input",!0),t.appendChild(e),p_(pE,this).appendChild(t),t}getInputElement(){return p_(pA,this).querySelector(`.${pP.CLASS_INPUT}`)}destroy(){let t=p_(pE,this)?p_(pE,this).parentNode:null;p_(pA,this).parentNode.removeChild(p_(pA,this)),pM(pA,this,null),pM(pk,this,null),p_(pO,this).destroy(),t&&t.removeChild(p_(pE,this))}}(0,e6.mixin)(pP,aL),t4("1C6fS");var eY=t4("f3221"),e6=t4("hwT6B");function pL(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class pN{constructor(t){pL(this,"wasLastActionShow",!0),pL(this,"showDebounced",null),pL(this,"hidingTimer",null),this.updateDelay(t)}hide(){this.wasLastActionShow=!1,this.hidingTimer=setTimeout(()=>{!1===this.wasLastActionShow&&this.runLocalHooks("hide")},250)}show(t){this.wasLastActionShow=!0,this.showDebounced(t)}cancelHiding(){this.wasLastActionShow=!0,clearTimeout(this.hidingTimer),this.hidingTimer=null}updateDelay(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;this.showDebounced=(0,eY.debounce)(t=>{this.wasLastActionShow&&this.runLocalHooks("show",t.from.row,t.from.col)},t)}destroy(){this.clearLocalHooks()}}(0,e6.mixin)(pN,aL);var e6=t4("hwT6B"),iy=t4("ceXML");function pH(t,e){let i={};return(0,iy.arrayEach)(t,t=>{t.forAll((t,n)=>{t>=0&&n>=0&&(i[t]||(i[t]=[]),i[t][n]=e(t,n))})}),i}function pV(t,e,i,n,r){(0,iy.arrayEach)(t,t=>{t.forAll((t,o)=>{t>=0&&o>=0&&function(t,e,i,n,r,o){let a=r(t,e),s=n;a.className&&(s="vertical"===i?function(t,e){if(-1!==t.indexOf(e))return t;let i=t.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ","");return`${i} ${e}`}(a.className,n):function(t,e){if(-1!==t.indexOf(e))return t;let i=t.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ","");return`${i} ${e}`}(a.className,n)),o(t,e,"className",s)}(t,o,e,i,n,r)})})}function pB(t){return`<span class="selected">${String.fromCharCode(10003)}</span>${t}`}function pF(t,e){let i=!1;return Array.isArray(t)&&(0,iy.arrayEach)(t,t=>(t.forAll((t,n)=>{if(t>=0&&n>=0&&e(t,n))return i=!0,!1}),i)),i}function pW(t,e){let i={top:0,left:0};if(e!==t.ownerDocument){let{frameElement:t}=e.defaultView,{top:n,left:r}=t.getBoundingClientRect();i.top=n,i.left=r}return i}function pz(t,e){return pF(t.getSelectedRange(),(function(t,i){let n=this.getCellMeta(t,i).className;return n&&-1!==n.indexOf(e)}).bind(t))}const pj="---------",pU="alignment",pG="clear_column",pY="col_left",pX="col_right";var iy=t4("ceXML");const p$="make_read_only",pZ="redo",pq="remove_col",pK="remove_row",pQ="row_above",pJ="row_below",p0="no_items",p1="undo",p2=[pQ,pJ,pY,pX,pG,pK,pq,p1,pZ,p$,pU,pj,p0],p5={[pj]:function(){return{name:pj}},[p0]:function(){return{key:p0,name(){return this.getTranslatedPhrase(sp)},disabled:!0,isCommand:!1}},[pQ]:function(){return{key:pQ,name(){return this.getTranslatedPhrase(sf)},callback(){let t=this.getSelectedRangeLast().getTopLeftCorner();this.alter("insert_row_above",t.row,1,"ContextMenu.rowAbove")},disabled(){let t=this.getSelectedRangeLast();return!!(!t||t.isSingleHeader()&&t.highlight.row<0)||(this.selection.isSelectedByCorner()?0===this.countRows():this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows)},hidden(){return!this.getSettings().allowInsertRow}}},[pJ]:function(){return{key:pJ,name(){return this.getTranslatedPhrase(sg)},callback(){let t=this.getSelectedRangeLast().getBottomRightCorner();this.alter("insert_row_below",t.row,1,"ContextMenu.rowBelow")},disabled(){let t=this.getSelectedRangeLast();return!!(!t||t.isSingleHeader()&&t.highlight.row<0)||!this.selection.isSelectedByCorner()&&(this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows)},hidden(){return!this.getSettings().allowInsertRow}}},[pY]:function(){return{key:pY,name(){return this.getTranslatedPhrase(sm)},callback(){let t=this.getSelectedRangeLast().getTopLeftCorner(),e=this.isRtl()?"insert_col_end":"insert_col_start";this.alter(e,t.col,1,"ContextMenu.columnLeft")},disabled(){if(!this.isColumnModificationAllowed())return!0;let t=this.getSelectedRangeLast();return!!(!t||t.isSingleHeader()&&t.highlight.col<0)||(this.selection.isSelectedByCorner()?0===this.countCols():this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols)},hidden(){return!this.getSettings().allowInsertColumn}}},[pX]:function(){return{key:pX,name(){return this.getTranslatedPhrase(sy)},callback(){let t=this.getSelectedRangeLast().getTopRightCorner(),e=this.isRtl()?"insert_col_start":"insert_col_end";this.alter(e,t.col,1,"ContextMenu.columnRight")},disabled(){if(!this.isColumnModificationAllowed())return!0;let t=this.getSelectedRangeLast();return!!(!t||t.isSingleHeader()&&t.highlight.col<0)||!this.selection.isSelectedByCorner()&&(this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols)},hidden(){return!this.getSettings().allowInsertColumn}}},[pG]:function(){return{key:pG,name(){return this.getTranslatedPhrase(sC)},callback(t,e){let i=e[0].start.col,n=e[0].end.col;this.countRows()&&this.populateFromArray(0,i,[[null]],Math.max(e[0].start.row,e[0].end.row),n,"ContextMenu.clearColumn")},disabled(){let t=this.getSelectedRangeLast();return!!(!t||t.isSingleHeader()&&t.highlight.col<0)||!this.selection.isSelectedByColumnHeader()}}},[pK]:function(){return{key:pK,name(){let t=this.getSelected(),e=0;if(t){if(t.length>1)e=1;else{let[i,,n]=t[0];i-n!=0&&(e=1)}}return this.getTranslatedPhrase(sv,e)},callback(){this.alter("remove_row",function(t){let e=hm(t.getSelected());if(0===e||1===e)return[];let i=hy(e,{createCellCoords:t._createCellCoords.bind(t),createCellRange:t._createCellRange.bind(t)}),n=new Set;(0,iy.arrayEach)(t.getSelected(),t=>{let{from:e,to:r}=i(t),o=Math.max(e.row,0),a=r.row-o+1;(0,iy.arrayEach)(Array.from(Array(a),(t,e)=>o+e),t=>{n.has(t)||n.add(t)})});let r=Array.from(n).sort((t,e)=>t-e);return(0,iy.arrayReduce)(r,(t,e,i,n)=>(0!==i&&e===n[i-1]+1?t[t.length-1][1]+=1:t.push([e,1]),t),[])}(this),1,"ContextMenu.removeRow")},disabled(){let t=this.getSelectedRangeLast();if(!t||t.isSingleHeader()&&t.highlight.row<0)return!0;let e=this.countRows();return this.selection.isSelectedByCorner()?0===e:this.selection.isSelectedByColumnHeader()||0===e},hidden(){return!this.getSettings().allowRemoveRow}}},[pq]:function(){return{key:pq,name(){let t=this.getSelected(),e=0;if(t){if(t.length>1)e=1;else{let[,i,,n]=t[0];i-n!=0&&(e=1)}}return this.getTranslatedPhrase(sw,e)},callback(){this.alter("remove_col",function(t){let e=hm(t.getSelected());if(0===e||1===e)return[];let i=hy(e,{createCellCoords:t._createCellCoords.bind(t),createCellRange:t._createCellRange.bind(t)}),n=new Set;(0,iy.arrayEach)(t.getSelected(),t=>{let{from:e,to:r}=i(t),o=Math.max(e.col,0),a=r.col-o+1;(0,iy.arrayEach)(Array.from(Array(a),(t,e)=>o+e),t=>{n.has(t)||n.add(t)})});let r=Array.from(n).sort((t,e)=>t-e);return(0,iy.arrayReduce)(r,(t,e,i,n)=>(0!==i&&e===n[i-1]+1?t[t.length-1][1]+=1:t.push([e,1]),t),[])}(this),null,"ContextMenu.removeColumn")},disabled(){if(!this.isColumnModificationAllowed())return!0;let t=this.getSelectedRangeLast();if(!t||t.isSingleHeader()&&t.highlight.col<0)return!0;let e=this.countCols();return this.selection.isSelectedByCorner()?0===e:this.selection.isSelectedByRowHeader()||0===e},hidden(){return!this.getSettings().allowRemoveColumn}}},[p1]:function(){return{key:p1,name(){return this.getTranslatedPhrase(sb)},callback(){this.undo()},hidden(){let t=this.getPlugin("undoRedo");return!t||!t.isEnabled()},disabled(){return!this.getPlugin("undoRedo").isUndoAvailable()}}},[pZ]:function(){return{key:pZ,name(){return this.getTranslatedPhrase(sx)},callback(){this.redo()},hidden(){let t=this.getPlugin("undoRedo");return!t||!t.isEnabled()},disabled(){return!this.getPlugin("undoRedo").isRedoAvailable()}}},[p$]:function(){return{key:p$,checkable:!0,ariaChecked(){return pF(this.getSelectedRange(),(t,e)=>this.getCellMeta(t,e).readOnly)},ariaLabel(){return this.getTranslatedPhrase(sS)},name(){let t=this.getTranslatedPhrase(sS);return pF(this.getSelectedRange(),(t,e)=>this.getCellMeta(t,e).readOnly)&&(t=pB(t)),t},callback(){let t=this.getSelectedRange(),e=pF(t,(t,e)=>this.getCellMeta(t,e).readOnly);(0,iy.arrayEach)(t,t=>{t.forAll((t,i)=>{t>=0&&i>=0&&this.setCellMeta(t,i,"readOnly",!e)})}),this.render()},disabled(){let t=this.getSelectedRangeLast();return!!(!t||t.isSingleHeader()||this.selection.isSelectedByCorner())||0===this.countRows()||0===this.countCols()||!this.getSelectedRange()||0===this.getSelectedRange().length}}},[pU]:function(){return{key:pU,name(){return this.getTranslatedPhrase(sH)},disabled(){if(0===this.countRows()||0===this.countCols())return!0;let t=this.getSelectedRangeLast();return!!(!t||t.isSingleHeader())||!(this.getSelectedRange()&&!this.selection.isSelectedByCorner())},submenu:{items:[{key:`${pU}:left`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(sV)},ariaChecked(){return pz(this,"htLeft")},name(){let t=this.getTranslatedPhrase(sV);return pz(this,"htLeft")&&(t=pB(t)),t},callback(){let t=this.getSelectedRange(),e=pH(t,(t,e)=>this.getCellMeta(t,e).className),i="horizontal",n="htLeft";this.runHooks("beforeCellAlignment",e,t,i,n),pV(t,i,n,(t,e)=>this.getCellMeta(t,e),(t,e,i,n)=>this.setCellMeta(t,e,i,n)),this.render()},disabled:!1},{key:`${pU}:center`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(sB)},ariaChecked(){return pz(this,"htCenter")},name(){let t=this.getTranslatedPhrase(sB);return pz(this,"htCenter")&&(t=pB(t)),t},callback(){let t=this.getSelectedRange(),e=pH(t,(t,e)=>this.getCellMeta(t,e).className),i="horizontal",n="htCenter";this.runHooks("beforeCellAlignment",e,t,i,n),pV(t,i,n,(t,e)=>this.getCellMeta(t,e),(t,e,i,n)=>this.setCellMeta(t,e,i,n)),this.render()},disabled:!1},{key:`${pU}:right`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(sF)},ariaChecked(){return pz(this,"htRight")},name(){let t=this.getTranslatedPhrase(sF);return pz(this,"htRight")&&(t=pB(t)),t},callback(){let t=this.getSelectedRange(),e=pH(t,(t,e)=>this.getCellMeta(t,e).className),i="horizontal",n="htRight";this.runHooks("beforeCellAlignment",e,t,i,n),pV(t,i,n,(t,e)=>this.getCellMeta(t,e),(t,e,i,n)=>this.setCellMeta(t,e,i,n)),this.render()},disabled:!1},{key:`${pU}:justify`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(sW)},ariaChecked(){return pz(this,"htJustify")},name(){let t=this.getTranslatedPhrase(sW);return pz(this,"htJustify")&&(t=pB(t)),t},callback(){let t=this.getSelectedRange(),e=pH(t,(t,e)=>this.getCellMeta(t,e).className),i="horizontal",n="htJustify";this.runHooks("beforeCellAlignment",e,t,i,n),pV(t,i,n,(t,e)=>this.getCellMeta(t,e),(t,e,i,n)=>this.setCellMeta(t,e,i,n)),this.render()},disabled:!1},{name:pj},{key:`${pU}:top`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(sz)},ariaChecked(){return pz(this,"htTop")},name(){let t=this.getTranslatedPhrase(sz);return pz(this,"htTop")&&(t=pB(t)),t},callback(){let t=this.getSelectedRange(),e=pH(t,(t,e)=>this.getCellMeta(t,e).className),i="vertical",n="htTop";this.runHooks("beforeCellAlignment",e,t,i,n),pV(t,i,n,(t,e)=>this.getCellMeta(t,e),(t,e,i,n)=>this.setCellMeta(t,e,i,n)),this.render()},disabled:!1},{key:`${pU}:middle`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(sj)},ariaChecked(){return pz(this,"htMiddle")},name(){let t=this.getTranslatedPhrase(sj);return pz(this,"htMiddle")&&(t=pB(t)),t},callback(){let t=this.getSelectedRange(),e=pH(t,(t,e)=>this.getCellMeta(t,e).className),i="vertical",n="htMiddle";this.runHooks("beforeCellAlignment",e,t,i,n),pV(t,i,n,(t,e)=>this.getCellMeta(t,e),(t,e,i,n)=>this.setCellMeta(t,e,i,n)),this.render()},disabled:!1},{key:`${pU}:bottom`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(sU)},ariaChecked(){return pz(this,"htBottom")},name(){let t=this.getTranslatedPhrase(sU);return pz(this,"htBottom")&&(t=pB(t)),t},callback(){let t=this.getSelectedRange(),e=pH(t,(t,e)=>this.getCellMeta(t,e).className),i="vertical",n="htBottom";this.runHooks("beforeCellAlignment",e,t,i,n),pV(t,i,n,(t,e)=>this.getCellMeta(t,e),(t,e,i,n)=>this.setCellMeta(t,e,i,n)),this.render()},disabled:!1}]}}}};function p3(){let t={};return(0,e6.objectEach)(p5,(e,i)=>{t[i]=e()}),t}function p4(t,e,i){p6(t,e),e.set(t,i)}function p6(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function p8(t,e,i){return t.set(p7(t,e),i),i}function p9(t,e){return t.get(p7(t,e))}function p7(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const ft="comments",fe="comment",fi="value",fn="style",fr="readOnly",fo=`plugin:${ft}`;var fa=new WeakMap,fs=new WeakMap,fl=new WeakMap,fh=new WeakMap,fu=new WeakMap,fc=new WeakMap,fd=new WeakSet;function fp(t){if(this.hot.view&&this.hot.view._wt&&!p9(fl,this)&&!this.targetIsCommentTextArea(t)){let e=(0,eG.closest)(t.target,"TD","TBODY"),i=null;e&&(i=this.hot.getCoords(e)),(!e||this.range.from&&i&&(this.range.from.row!==i.row||this.range.from.col!==i.col))&&this.hide()}}function ff(t){let{rootDocument:e}=this.hot;if(!(p9(fl,this)||p9(fa,this).isFocused()||(0,eG.hasClass)(t.target,"wtBorder"))&&p9(fu,this)!==t.target&&p9(fa,this)){if(p8(fu,this,e.elementFromPoint(t.clientX,t.clientY)),this.targetIsCellWithComment(t)){let e=this.hot._createCellRange(this.hot.getCoords(t.target));p9(fs,this).show(e)}else(0,eG.isChildOf)(t.target,e)&&!this.targetIsCommentTextArea(t)&&p9(fs,this).hide()}}function fg(){p8(fl,this,!1)}function fm(t,e){e[fe]&&e[fe][fi]&&(0,eG.addClass)(t,e.commentedCellClassName)}function fy(){p8(fc,this,""),this.hot.getShortcutManager().setActiveContextName("grid"),this.setComment()}function fv(){p8(fc,this,this.getComment()),this.hot.listen(),this.hot.getShortcutManager().setActiveContextName(fo)}function fw(t,e){this.updateCommentMeta(this.range.from.row,this.range.from.col,{[fn]:{width:t,height:e}})}function fb(t){p9(fa,this).isVisible()&&(0,eq.stopImmediatePropagation)(t)}function fx(){p9(fh,this)||this.hide()}t4("1C6fS");var sa=t4("10euP"),iy=t4("ceXML"),e6=t4("hwT6B");t4("1C6fS"),t4("1hIp0");var ei=t4("hmx0d"),iP=t4("dZoqA"),of=t4("ptmgx"),fS=t4("6BH0Y"),fC={},f_=t4("chuuX"),fM=TypeError;fC=function(t,e){if(!delete t[e])throw new fM("Cannot delete property "+f_(e)+" of "+f_(t))};var fT=t4("6Rnn4");ei({target:"Array",proto:!0,arity:1,forced:1!==[].unshift(0)||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}}()},{unshift:function(t){var e=iP(this),i=of(e),n=arguments.length;if(n){fT(i+n);for(var r=i;r--;){var o=r+n;r in e?e[o]=e[r]:fC(e,o)}for(var a=0;a<n;a++)e[a]=arguments[a]}return fS(e,i+n)}});var iy=t4("ceXML"),e6=t4("hwT6B");function fI(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class fR{constructor(t){fI(this,"hot",void 0),fI(this,"commands",{}),fI(this,"commonCallback",null),this.hot=t}registerCommand(t,e){this.commands[t]=e}setCommonCallback(t){this.commonCallback=t}execute(t){let e;for(var i,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];let a=t.split(":"),s=a[0],l=2===a.length?a[1]:null,h=this.commands[s];if(!h)throw Error(`Menu command '${s}' not exists.`);if(l&&h.submenu&&(i=h.submenu.items,(0,iy.arrayEach)(i,t=>{let i=t.key?t.key.split(":"):null;if(Array.isArray(i)&&i[1]===l)return e=t,!1}),h=e),!0===h.disabled||"function"==typeof h.disabled&&!0===h.disabled.call(this.hot)||(0,e6.hasOwnProperty)(h,"submenu"))return;let u=[];"function"==typeof h.callback&&u.push(h.callback),"function"==typeof this.commonCallback&&u.push(this.commonCallback),r.unshift(a.join(":")),(0,iy.arrayEach)(u,t=>t.apply(this.hot,r))}}t4("1C6fS"),t4("1hIp0");var e6=t4("hwT6B"),iy=t4("ceXML");function fE(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class fA{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;fE(this,"hot",void 0),fE(this,"predefinedItems",p3()),fE(this,"defaultOrderPattern",void 0),this.hot=t,this.defaultOrderPattern=e}setPredefinedItems(t){let e={};this.defaultOrderPattern.length=0,(0,e6.objectEach)(t,(t,i)=>{let n="";t.name===pj?(e[pj]=t,n=pj):(isNaN(parseInt(i,10))?(t.key=void 0===t.key?i:t.key,e[i]=t):e[t.key]=t,n=t.key),this.defaultOrderPattern.push(n)}),this.predefinedItems=e}getItems(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[],r=t;return r&&r.items?r=r.items:Array.isArray(r)||(r=e),(0,e6.isObject)(r)?(0,e6.objectEach)(r,(t,e)=>{let r=i["string"==typeof t?t:e];r||(r=t),(0,e6.isObject)(t)?(0,e6.extend)(r,t):"string"==typeof r&&(r={name:r}),void 0===r.key&&(r.key=e),n.push(r)}):(0,iy.arrayEach)(r,(t,e)=>{let r=i[t];!r&&p2.indexOf(t)>=0||(r||(r={name:t,key:`${e}`}),(0,e6.isObject)(t)&&(0,e6.extend)(r,t),void 0===r.key&&(r.key=e),n.push(r))}),n}(t,this.defaultOrderPattern,this.predefinedItems)}}function fk(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS"),t4("1hIp0"),t4("1C6fS"),t4("1C6fS");class fD{constructor(t,e){let i,n,r,o,a,s;fk(this,"top",void 0),fk(this,"topRelative",void 0),fk(this,"left",void 0),fk(this,"leftRelative",void 0),fk(this,"scrollTop",void 0),fk(this,"scrollLeft",void 0),fk(this,"cellHeight",void 0),fk(this,"cellWidth",void 0);let l=e.scrollY,h=e.scrollX;this.rootWindow=e,this.type=this.getSourceType(t),"literal"===this.type?(i=parseInt(t.top,10),r=parseInt(t.left,10),a=t.height||0,s=t.width||0,n=i,o=r,i+=l,r+=h):"event"===this.type&&(i=parseInt(t.pageY,10),r=parseInt(t.pageX,10),a=t.target.clientHeight,s=t.target.clientWidth,n=i-l,o=r-h),this.top=i,this.topRelative=n,this.left=r,this.leftRelative=o,this.scrollTop=l,this.scrollLeft=h,this.cellHeight=a,this.cellWidth=s}getSourceType(t){let e="literal";return t instanceof Event&&(e="event"),e}fitsAbove(t){return this.topRelative>=t.offsetHeight}fitsBelow(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootWindow.innerHeight;return this.topRelative+t.offsetHeight<=e}fitsOnRight(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootWindow.innerWidth;return this.leftRelative+this.cellWidth+t.offsetWidth<=e}fitsOnLeft(t){return this.leftRelative>=t.offsetWidth}}function fO(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function fP(t,e){return t.get(fN(t,e))}function fL(t,e,i){return t.set(fN(t,e),i),i}function fN(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var fH=new WeakMap,fV=new WeakMap,fB=new WeakMap,fF=new WeakMap,fW=new WeakMap;class fz{constructor(t){fO(this,fH,void 0),fO(this,fV,void 0),fO(this,fB,void 0),fO(this,fF,!1),fO(this,fW,{above:0,below:0,left:0,right:0}),fL(fF,this,t)}setOffset(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return fP(fW,this)[t]=e,this}setElement(t){return fL(fH,this,t),this}setParentElement(t){return fL(fV,this,t),this}updatePosition(t){fL(fB,this,new fD(t,fP(fH,this).ownerDocument.defaultView)),fP(fF,this)?(fP(fB,this).fitsBelow(fP(fH,this))?this.setPositionBelowCursor():fP(fB,this).fitsAbove(fP(fH,this))?this.setPositionAboveCursor():this.setPositionBelowCursor(),this.updateHorizontalPosition()):(this.setPositionBelowCursor(),this.setPositionOnRightOfCursor())}updateHorizontalPosition(){"rtl"===fP(fH,this).dir?fP(fB,this).fitsOnLeft(fP(fH,this))?this.setPositionOnLeftOfCursor():this.setPositionOnRightOfCursor():fP(fB,this).fitsOnRight(fP(fH,this))?this.setPositionOnRightOfCursor():this.setPositionOnLeftOfCursor()}setPositionAboveCursor(){let t=fP(fW,this).above+fP(fB,this).top-fP(fH,this).offsetHeight;fP(fV,this)&&(t=fP(fB,this).top+fP(fB,this).cellHeight-fP(fH,this).offsetHeight+3),fP(fH,this).style.top=`${t}px`}setPositionBelowCursor(){let t=fP(fW,this).below+fP(fB,this).top+1;fP(fV,this)&&(t=fP(fB,this).top-1),fP(fH,this).style.top=`${t}px`}setPositionOnRightOfCursor(){let t=fP(fB,this).left;if(fP(fV,this)){let e=Number.parseInt(getComputedStyle(fP(fV,this).querySelector(".htCore")).borderRightWidth,10);t+=fP(fB,this).cellWidth+e}else t+=fP(fW,this).right;fP(fH,this).style.left=`${t}px`}setPositionOnLeftOfCursor(){let t=fP(fW,this).left+fP(fB,this).left-fP(fH,this).offsetWidth;fP(fV,this)&&(t-=Number.parseInt(getComputedStyle(fP(fV,this).querySelector(".htCore")).borderLeftWidth,10)),fP(fH,this).style.left=`${t}px`}}t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var i0=t4("guO5N");function fj(t){let{initialPage:e=-1,size:i=()=>0,onItemSelect:n=()=>{},onClear:r=()=>{}}=t,o=new Set,a=(0,i0.clamp)(e,-1,l()-1);function s(t,e){let i=l()-1;return(t<0&&(t=i),t>i&&(t=0),o.has(t))?-1:(o.add(t),!1===n(t,!1)&&(t=s(1===e?++t:--t,e)),t)}function l(){return Math.max(i(),0)}return{setCurrentPage:function(t){t>-1&&t<l()&&!1!==n(t,!0)&&(a=t)},getCurrentPage:function(){return a},toFirstItem:function(){l()>0&&(o.clear(),a=s(0,1))},toLastItem:function(){l()>0&&(o.clear(),a=s(l()-1,-1))},toNextItem:function(){l()>0&&(o.clear(),a=s(++a,1))},toPreviousItem:function(){l()>0&&(o.clear(),a=s(--a,-1))},getSize:l,clear:function(){o.clear(),a=e,r()}}}t4("1hIp0");var iy=t4("ceXML"),e6=t4("hwT6B"),eG=t4("gFbQZ");function fU(t){return(0,e6.hasOwnProperty)(t,"submenu")}function fG(t){return RegExp(pj,"i").test(t.name)}function fY(t,e){return!0===t.disabled||"function"==typeof t.disabled&&!0===t.disabled.call(e)}function fX(t){return(0,e6.hasOwnProperty)(t,"disableSelection")}function f$(t,e){let i=t.slice(0);for(;0<i.length&&i[0].name===e;)i.shift();return i}t4("1hIp0");const fZ="menu";var eQ=t4("1k8Ev"),iy=t4("ceXML"),e$=t4("eL8cl"),eG=t4("gFbQZ"),eq=t4("7HxIw"),eY=t4("f3221"),eX=t4("gnaTS"),e6=t4("hwT6B"),eG=t4("gFbQZ"),nZ=(t4("4Pbrh"),t4("4Pbrh"));function fq(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function fK(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function fQ(t,e,i){return t.set(f0(t,e),i),i}function fJ(t,e){return t.get(f0(t,e))}function f0(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var f1=new WeakMap,f2=new WeakMap,f5=new WeakMap;class f3{get tableBorderWidth(){return void 0===fJ(f5,this)&&this.hotMenu&&fQ(f5,this,parseInt((0,eG.getComputedStyle)(this.hotMenu.view._wt.wtTable.TABLE).borderWidth,10)),fJ(f5,this)}constructor(t,e){var i=this;fK(this,"hot",void 0),fK(this,"options",void 0),fK(this,"eventManager",new eQ.default(this)),fK(this,"container",void 0),fK(this,"positioner",void 0),fK(this,"hotMenu",null),fK(this,"hotSubMenus",{}),fK(this,"parentMenu",void 0),fK(this,"menuItems",null),fK(this,"origOutsideClickDeselects",null),fq(this,f1,void 0),fq(this,f2,void 0),fq(this,f5,void 0),this.hot=t,this.options=e||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1,minWidth:215,container:this.hot.rootDocument.documentElement},this.container=this.createContainer(this.options.name),this.positioner=new fz(this.options.keepInViewport),this.parentMenu=this.options.parent||null,this.registerEvents(),this.isSubMenu()&&this.addLocalHook("afterSelectionChange",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.parentMenu.runLocalHooks("afterSelectionChange",...e)})}registerEvents(){let t=this.hot.rootWindow;for(;t;)this.eventManager.addEventListener(t.document,"mousedown",t=>this.onDocumentMouseDown(t)),this.eventManager.addEventListener(t.document,"touchstart",t=>this.onDocumentMouseDown(t)),this.eventManager.addEventListener(t.document,"contextmenu",t=>this.onDocumentContextMenu(t)),t=(0,eG.getParentWindow)(t)}setMenuItems(t){this.menuItems=t}getNavigator(){return fJ(f1,this)}getKeyboardShortcutsCtrl(){return fJ(f2,this)}getSelectedItem(){return this.hasSelectedItem()?this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]):null}hasSelectedItem(){return Array.isArray(this.hotMenu.getSelectedLast())}isSubMenu(){return null!==this.parentMenu}open(){var t,e;this.runLocalHooks("beforeOpen"),this.container.removeAttribute("style"),this.container.style.display="block";let i=(0,eY.debounce)(t=>this.openSubMenu(t),300),n=this.options.minWidth||215,r=!1,o=(0,iy.arrayFilter)(this.menuItems,t=>{var e;return t.key===p0&&(r=!0),e=this.hot,!t.hidden||!("function"==typeof t.hidden&&t.hidden.call(e))});if(o.length<1&&!r)o.push(p3()[p0]);else if(0===o.length)return;o=function(t){let e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pj,n=t.slice(0);return(e=(n=f$(n,i)).slice(0)).reverse(),(e=f$(e,i)).reverse(),n=function(t){let e=[];return(0,iy.arrayEach)(t,(t,i)=>{i>0?e[e.length-1].name!==t.name&&e.push(t):e.push(t)}),e}(n=e)}(o,pj);let a=!1,s={data:o,colHeaders:!1,autoColumnSize:!0,autoWrapRow:!1,modifyColWidth:t=>(0,eX.isDefined)(t)&&t<n?n:t,autoRowSize:!1,readOnly:!0,editor:!1,copyPaste:!1,hiddenRows:!0,maxCols:1,columns:[{data:"name",renderer:(t=this.hot,(e,i,n,r,o,a)=>{let s=e.getSourceDataAtRow(n),l=t.rootDocument.createElement("div"),h="function"==typeof a?a.call(t):a,u="function"==typeof s.ariaLabel?s.ariaLabel.call(t):s.ariaLabel,c="function"==typeof s.ariaChecked?s.ariaChecked.call(t):s.ariaChecked;if((0,eG.empty)(i),(0,eG.addClass)(l,"htItemWrapper"),t.getSettings().ariaTags){let e=!fY(s,t)&&!fX(s)&&!fG(s);(0,eG.setAttribute)(i,[...!0===s.checkable?[(0,nZ.A11Y_MENU_ITEM_CHECKBOX)(),(0,nZ.A11Y_LABEL)(u),(0,nZ.A11Y_CHECKED)(c)]:[(0,nZ.A11Y_MENU_ITEM)(),(0,nZ.A11Y_LABEL)(h)],...e?[(0,nZ.A11Y_TABINDEX)(-1)]:[],...fY(s,t)?[(0,nZ.A11Y_DISABLED)()]:[],...fU(s)?[(0,nZ.A11Y_EXPANDED)(!1)]:[]])}i.className="",i.appendChild(l),fG(s)?(0,eG.addClass)(i,"htSeparator"):"function"==typeof s.renderer?((0,eG.addClass)(i,"htCustomMenuRenderer"),i.appendChild(s.renderer(e,l,n,r,o,h))):(0,eG.fastInnerHTML)(l,h),fY(s,t)?(0,eG.addClass)(i,"htDisabled"):fX(s)?(0,eG.addClass)(i,"htSelectionDisabled"):fU(s)&&(0,eG.addClass)(i,"htSubmenu")})}],renderAllRows:!0,fragmentSelection:!1,outsideClickDeselects:!1,disableVisualSelection:"area",layoutDirection:this.hot.isRtl()?"rtl":"ltr",ariaTags:!1,beforeOnCellMouseOver:(t,e)=>{fJ(f1,this).setCurrentPage(e.row)},afterOnCellMouseOver:(t,e)=>{this.isAllSubMenusClosed()?i(e.row):this.openSubMenu(e.row)},rowHeights:t=>o[t].name===pj?1:void 0,afterOnCellContextMenu:t=>{t.preventDefault(),(0,e$.isWindowsOS)()&&a&&this.hasSelectedItem()&&this.close(!0)},afterSelection:(t,e,i,n,r)=>{this.hotMenu.view.isMouseDown()&&(r.value=!0),this.runLocalHooks("afterSelectionChange",this.getSelectedItem())},beforeOnCellMouseUp:t=>{this.hasSelectedItem()&&(a=!this.isCommandPassive(this.getSelectedItem()),this.executeCommand(t))},afterOnCellMouseUp:t=>{(!(0,e$.isWindowsOS)()||!(0,eq.isRightClick)(t))&&a&&this.hasSelectedItem()&&((0,e$.isMobileBrowser)()||(0,e$.isIpadOS)()?this.hot._registerTimeout(()=>this.close(!0),325):this.close(!0))},afterUnlisten:()=>{!this.hasSelectedItem()&&this.isOpened()&&this.hotMenu.listen()}};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new this.hot.constructor(this.container,s),this.hotMenu.addHook("afterInit",()=>this.onAfterInit()),this.hotMenu.init(),fQ(f1,this,(e=this.hotMenu,fj({size:()=>e.countRows(),onItemSelect(t,i){let n=e.getCell(t,0);if(!n||(0,eG.hasClass)(n,"htSeparator")||(0,eG.hasClass)(n,"htDisabled")||(0,eG.hasClass)(n,"htSelectionDisabled"))return!1;e.selectCell(t,0,...i?[t,0,!1,!1]:[])},onClear(){e.deselectCell()}}))),fQ(f2,this,function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];function n(t,e){a(e).addShortcuts(t,{group:fZ})}function r(t,e){let r=a(e);t.forEach(t=>{let{keys:e}=t;e.forEach(t=>r.removeShortcutsByKeys(t))}),i.push({shortcuts:t,contextName:e}),n(t,e)}function o(t){return t?`${fZ}:${t}`:fZ}function a(e){var i;let n=t.hotMenu.getShortcutManager(),r=o(e);return null!==(i=n.getContext(r))&&void 0!==i?i:n.addContext(r)}return n(function(t){let{hot:e,hotMenu:i}=t;return[{keys:[["Control/Meta","A"]],forwardToContext:e.getShortcutManager().getContext("grid"),callback:()=>t.close(!0)},{keys:[["Tab"],["Shift","Tab"]],callback:(i,n)=>{let r=e.getSettings(),o="function"==typeof r.tabMoves?r.tabMoves(i):r.tabMoves;n.includes("shift")?e.selection.transformStart(-o.row,-o.col):e.selection.transformStart(o.row,o.col),t.close(!0)}},{keys:[["Escape"]],callback:()=>t.close()},{keys:[["ArrowDown"]],callback:()=>t.getNavigator().toNextItem()},{keys:[["ArrowUp"]],callback:()=>t.getNavigator().toPreviousItem()},{keys:[["ArrowRight"]],callback:()=>{let e=i.getSelectedLast();if(e){let i=t.openSubMenu(e[0]);i&&i.getNavigator().toFirstItem()}}},{keys:[["ArrowLeft"]],callback:()=>{i.getSelectedLast()&&t.isSubMenu()&&(t.close(),t.isSubMenu()&&t.parentMenu.hotMenu.listen())}},{keys:[["Control/Meta","ArrowUp"],["Home"]],callback:()=>t.getNavigator().toFirstItem()},{keys:[["Control/Meta","ArrowDown"],["End"]],callback:()=>t.getNavigator().toLastItem()},{keys:[["Enter"],["Space"]],callback:e=>{let n=i.getSelectedLast();n&&(i.getSourceDataAtRow(n[0]).submenu?t.openSubMenu(n[0]).getNavigator().toFirstItem():(t.executeCommand(e),t.close(!0)))}},{keys:[["PageUp"]],callback:()=>{i.getSelectedLast()?i.selection.transformStart(-i.countVisibleRows(),0):t.getNavigator().toFirstItem()}},{keys:[["PageDown"]],callback:()=>{i.getSelectedLast()?i.selection.transformStart(i.countVisibleRows(),0):t.getNavigator().toLastItem()}}]}(t)),e.forEach(t=>{let{shortcuts:e,contextName:i}=t;r(e,i)}),{addCustomShortcuts:r,getCustomShortcuts:function(){return[...i]},getContext:a,listen:function(e){t.hotMenu.getShortcutManager().setActiveContextName(o(e))}}}(this)),fJ(f2,this).listen(),this.focus(),this.isSubMenu()&&this.addLocalHook("afterOpen",()=>this.parentMenu.runLocalHooks("afterSubmenuOpen",this)),this.runLocalHooks("afterOpen",this)}close(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isOpened()){if(t&&this.isSubMenu())this.parentMenu.close();else if(fJ(f1,this).clear(),this.closeAllSubMenus(),this.container.style.display="none",this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.isSubMenu()){if(this.hot.getSettings().ariaTags){let t=this.parentMenu.hotMenu.getSelectedLast();if(t){let e=this.parentMenu.hotMenu.getCell(t[0],0);(0,eG.setAttribute)(e,[(0,nZ.A11Y_EXPANDED)(!1)])}}this.parentMenu.hotMenu.listen()}}}openSubMenu(t){if(!this.hotMenu)return!1;let e=this.hotMenu.getCell(t,0);if(this.closeAllSubMenus(),!e||!(0,eG.hasClass)(e,"htSubmenu"))return!1;let i=this.hotMenu.getSourceDataAtRow(t),n=new f3(this.hot,{parent:this,name:i.name,className:this.options.className,keepInViewport:!0,container:this.options.container});return n.setMenuItems(i.submenu.items),n.open(),n.setPosition(e.getBoundingClientRect()),this.hotSubMenus[i.key]=n,this.hot.getSettings().ariaTags&&(0,eG.setAttribute)(e,[(0,nZ.A11Y_EXPANDED)(!0)]),n}closeSubMenu(t){let e=this.hotMenu.getSourceDataAtRow(t),i=this.hotSubMenus[e.key];if(i){i.destroy(),delete this.hotSubMenus[e.key];let n=this.hotMenu.getCell(t,0);this.hot.getSettings().ariaTags&&(0,eG.setAttribute)(n,[(0,nZ.A11Y_EXPANDED)(!1)])}}closeAllSubMenus(){(0,iy.arrayEach)(this.hotMenu.getData(),(t,e)=>this.closeSubMenu(e))}isAllSubMenusClosed(){return 0===Object.keys(this.hotSubMenus).length}focus(){this.isOpened()&&(this.hotMenu.rootElement.focus({preventScroll:!0}),this.getKeyboardShortcutsCtrl().listen(),this.hotMenu.listen())}destroy(){let t=this.container.parentNode;this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy(),t&&t.removeChild(this.container)}isOpened(){return null!==this.hotMenu}executeCommand(t){if(!this.isOpened()||!this.hasSelectedItem())return;let e=this.getSelectedItem();if(this.runLocalHooks("select",e,t),this.isCommandPassive(e))return;let i=this.hot.getSelectedRange(),n=i?(0,iy.arrayMap)(i,t=>({start:t.getTopStartCorner(),end:t.getBottomEndCorner()})):[];this.runLocalHooks("executeCommand",e.key,n,t),this.isSubMenu()&&this.parentMenu.runLocalHooks("executeCommand",e.key,n,t)}isCommandPassive(t){return!1===t.isCommand||fG(t)||fY(t,this.hot)||fU(t)}setOffset(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.positioner.setOffset(t,e)}setPosition(t){this.isSubMenu()&&this.positioner.setParentElement(this.parentMenu.container),this.positioner.setElement(this.container).updatePosition(t)}updateMenuDimensions(){let{wtTable:t}=this.hotMenu.view._wt,e=this.hotMenu.getSettings().data,i=t.hider.style,n=t.holder.style,r=parseInt(i.width,10),o=(0,iy.arrayReduce)(e,(t,e,i)=>{let n=this.hotMenu.getCell(i,0)?(0,eG.outerHeight)(this.hotMenu.getCell(i,0)):0;return t+(e.name===pj?1:n)},0);n.width=`${r+3}px`,n.height=`${o+3}px`,i.height=n.height}createContainer(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this.options.container.ownerDocument,n=e;return n&&((0,eY.isFunction)(n)&&(n=null===(n=n.call(this.hot))||(0,eX.isUndefined)(n)?"":n.toString()),n=n.replace(/[^A-z0-9]/g,"_"),n=`${this.options.className}Sub_${n}`,t=i.querySelector(`.${this.options.className}.${n}`)),t||(t=i.createElement("div"),(0,eG.addClass)(t,`htMenu ${this.options.className}`),n&&(0,eG.addClass)(t,n),this.options.container.appendChild(t)),t}onAfterInit(){this.updateMenuDimensions(),this.hot.getSettings().ariaTags&&(0,eG.setAttribute)(this.hotMenu.rootElement,[(0,nZ.A11Y_MENU)(),(0,nZ.A11Y_TABINDEX)(-1)])}onDocumentMouseDown(t){this.isOpened()&&(this.options.standalone&&this.hotMenu&&!(0,eG.isChildOf)(t.target,this.hotMenu.rootElement)?this.close(!0):(this.isAllSubMenusClosed()||this.isSubMenu())&&!(0,eG.isChildOf)(t.target,".htMenu")&&this.close(!0))}onDocumentContextMenu(t){this.isOpened()&&(0,eG.hasClass)(t.target,"htCore")&&(0,eG.isChildOf)(t.target,this.hotMenu.rootElement)&&t.preventDefault()}}(0,e6.mixin)(f3,aL);var eG=t4("gFbQZ");function f4(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f6(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const f8="contextMenu";(0,sa.default).getSingleton().register("afterContextMenuDefaultOptions"),(0,sa.default).getSingleton().register("beforeContextMenuShow"),(0,sa.default).getSingleton().register("afterContextMenuShow"),(0,sa.default).getSingleton().register("afterContextMenuHide"),(0,sa.default).getSingleton().register("afterContextMenuExecute");var f9=new WeakSet;class f7 extends cv{constructor(){super(...arguments),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,f9),f9.add(this),f4(this,"commandExecutor",new fR(this.hot)),f4(this,"itemsFactory",null),f4(this,"menu",null)}static get PLUGIN_KEY(){return f8}static get PLUGIN_PRIORITY(){return 70}static get PLUGIN_DEPS(){return["plugin:AutoColumnSize"]}static get DEFAULT_ITEMS(){return[pQ,pJ,pj,pY,pX,pj,pK,pq,pj,p1,pZ,pj,p$,pj,pU]}isEnabled(){return!!this.hot.getSettings()[f8]}enablePlugin(){var t=this;if(this.enabled)return;let e=this.hot.getSettings()[f8];"function"==typeof e.callback&&this.commandExecutor.setCommonCallback(e.callback),this.menu=new f3(this.hot,{className:"htContextMenu",keepInViewport:!0,container:e.uiContainer||this.hot.rootDocument.body}),this.menu.addLocalHook("beforeOpen",()=>f6(f9,this,ge).call(this)),this.menu.addLocalHook("afterOpen",()=>f6(f9,this,gi).call(this)),this.menu.addLocalHook("afterClose",()=>f6(f9,this,gn).call(this)),this.menu.addLocalHook("executeCommand",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return t.executeCommand.call(t,...i)}),this.addHook("afterOnCellContextMenu",t=>f6(f9,this,gt).call(this,t)),this.registerShortcuts(),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.close(),this.menu&&(this.menu.destroy(),this.menu=null),this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control/Meta","Shift","Backslash"],["Shift","F10"]],callback:()=>{let{highlight:t}=this.hot.getSelectedRangeLast();this.hot.scrollToFocusedCell();let e=this.hot.getCell(t.row,t.col,!0).getBoundingClientRect(),i=pW(this.menu.container,this.hot.rootDocument);this.open({left:e.left+i.left,top:e.top+i.top-1+e.height},{left:e.width,above:-e.height}),this.menu.getNavigator().toFirstItem()},runOnlyIf:()=>{var t;let e=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return e&&this.hot.selection.isCellVisible(e)&&!this.menu.isOpened()},group:f8})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(f8)}open(t){var e;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{above:0,below:0,left:0,right:0};null!==(e=this.menu)&&void 0!==e&&e.isOpened()||(this.prepareMenuItems(),this.menu.open(),this.menu.tableBorderWidth>0||(i.below+=1,i.right+=1,i.above-=1,i.left-=1),(0,e6.objectEach)(i,(t,e)=>{this.menu.setOffset(e,t)}),this.menu.setPosition(t))}close(){var t;null===(t=this.menu)||void 0===t||t.close(),this.itemsFactory=null}executeCommand(t){null===this.itemsFactory&&this.prepareMenuItems();for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this.commandExecutor.execute(t,...i)}prepareMenuItems(){this.itemsFactory=new fA(this.hot,f7.DEFAULT_ITEMS);let t=this.hot.getSettings()[f8],e={items:this.itemsFactory.getItems(t)};this.hot.runHooks("afterContextMenuDefaultOptions",e),this.itemsFactory.setPredefinedItems(e.items);let i=this.itemsFactory.getItems(t);this.hot.runHooks("beforeContextMenuSetItems",i),this.menu.setMenuItems(i),(0,iy.arrayEach)(i,t=>this.commandExecutor.registerCommand(t.key,t))}destroy(){this.close(),this.menu&&this.menu.destroy(),super.destroy()}}function gt(t){let e=this.hot.getSettings(),i=e.rowHeaders,n=e.colHeaders,r=t.target;if(this.close(),(0,eG.hasClass)(r,"handsontableInput")||(t.preventDefault(),t.stopPropagation(),!(i||n)&&!("TD"===r.nodeName||"TD"===r.parentNode.nodeName)&&!((0,eG.hasClass)(r,"current")&&(0,eG.hasClass)(r,"wtBorder"))))return;let o=pW(this.menu.container,this.hot.rootDocument);this.open({top:t.clientY+o.top,left:t.clientX+o.left})}function ge(){this.hot.runHooks("beforeContextMenuShow",this)}function gi(){this.hot.runHooks("afterContextMenuShow",this)}function gn(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)}f7.SEPARATOR={name:pj},t4("1C6fS"),t4("1hIp0");var sa=t4("10euP"),iy=t4("ceXML"),iJ=t4("bO142"),eG=t4("gFbQZ"),e$=t4("eL8cl"),i0=(t4("guO5N"),t4("guO5N"),t4("guO5N"));class gr{constructor(){this.data={}}setData(t,e){this.data[t]=e}getData(t){return this.data[t]||void 0}}class go{constructor(){this.clipboardData=new gr}preventDefault(){}}t4("1C6fS"),t4("1hIp0");var iy=t4("ceXML"),i0=t4("guO5N");function ga(t,e,i){gs(t,e),e.set(t,i)}function gs(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function gl(t,e){return t.get(gu(t,e))}function gh(t,e,i){return t.set(gu(t,e),i),i}function gu(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var gc=new WeakMap,gd=new WeakMap,gp=new WeakMap,gf=new WeakMap,gg=new WeakMap,gm=new WeakMap,gy=new WeakSet;class gv{constructor(t){let{countRows:e,countColumns:i,rowsLimit:n,columnsLimit:r,countColumnHeaders:o}=t;gs(this,gy),gy.add(this),ga(this,gc,void 0),ga(this,gd,void 0),ga(this,gp,void 0),ga(this,gf,void 0),ga(this,gg,void 0),ga(this,gm,void 0),gh(gd,this,e),gh(gp,this,i),gh(gf,this,n),gh(gg,this,r),gh(gm,this,o)}setSelectedRange(t){gh(gc,this,t)}getCellsRange(){if(0===gl(gd,this).call(this)||0===gl(gp,this).call(this))return null;let{row:t,col:e}=gl(gc,this).getTopStartCorner(),{row:i,col:n}=gl(gc,this).getBottomEndCorner(),r=gu(gy,this,gb).call(this,t,i),o=gu(gy,this,gw).call(this,e,n);return{isRangeTrimmed:i!==r||n!==o,startRow:t,startCol:e,endRow:r,endCol:o}}getMostBottomColumnHeadersRange(){if(0===gl(gp,this).call(this)||0===gl(gm,this).call(this))return null;let{col:t}=gl(gc,this).getTopStartCorner(),{col:e}=gl(gc,this).getBottomEndCorner(),i=gu(gy,this,gw).call(this,t,e);return{isRangeTrimmed:e!==i,startRow:-1,startCol:t,endRow:-1,endCol:i}}getAllColumnHeadersRange(){if(0===gl(gp,this).call(this)||0===gl(gm,this).call(this))return null;let{col:t}=gl(gc,this).getTopStartCorner(),{col:e}=gl(gc,this).getBottomEndCorner(),i=gu(gy,this,gw).call(this,t,e);return{isRangeTrimmed:e!==i,startRow:-gl(gm,this).call(this),startCol:t,endRow:-1,endCol:i}}}function gw(t,e){return Math.min(e,Math.max(t+gl(gg,this).call(this)-1,t))}function gb(t,e){return Math.min(e,Math.max(t+gl(gf,this).call(this)-1,t))}function gx(t){let e=[],i=[];return(0,iy.arrayEach)(t,t=>{let n=Math.min(t.startRow,t.endRow),r=Math.max(t.startRow,t.endRow);(0,i0.rangeEach)(n,r,t=>{-1===e.indexOf(t)&&e.push(t)});let o=Math.min(t.startCol,t.endCol),a=Math.max(t.startCol,t.endCol);(0,i0.rangeEach)(o,a,t=>{-1===i.indexOf(t)&&i.push(t)})}),{rows:e,columns:i}}function gS(t,e,i){gC(t,e),e.set(t,i)}function gC(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function g_(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function gM(t,e){return t.get(gI(t,e))}function gT(t,e,i){return t.set(gI(t,e),i),i}function gI(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(0,sa.default).getSingleton().register("afterCopyLimit"),(0,sa.default).getSingleton().register("modifyCopyableRange"),(0,sa.default).getSingleton().register("beforeCut"),(0,sa.default).getSingleton().register("afterCut"),(0,sa.default).getSingleton().register("beforePaste"),(0,sa.default).getSingleton().register("afterPaste"),(0,sa.default).getSingleton().register("beforeCopy"),(0,sa.default).getSingleton().register("afterCopy");const gR="copyPaste",gE=["fragmentSelection"],gA='<meta name="generator" content="Handsontable"/><style type="text/css">td{white-space:normal}br{mso-data-placement:same-cell}</style>';var gk=new WeakMap,gD=new WeakMap,gO=new WeakMap,gP=new WeakMap,gL=new WeakMap,gN=new WeakMap,gH=new WeakMap,gV=new WeakMap,gB=new WeakSet;function gF(t){if((0,e$.isSafari)()){let e=this.hot.getSelectedRangeLast();if(e){let{row:i,col:n}=e.highlight,r=this.hot.getCell(i,n,!0);r&&(0,eG.runWithSelectedContendEditableElement)(r,()=>{this.hot.rootDocument.execCommand(t)})}}else this.hot.rootDocument.execCommand(t)}function gW(t){let{rows:e}=gx(t),i=0;for(let t=0;t<e.length&&!(e[t]>=0);t++)i+=1;return{columnHeadersCount:i}}function gz(){if(this.hot.isListening()){let t=this.hot.getSelectedRangeLast();if(t){let{row:e,col:i}=t.highlight,n=this.hot.getCell(e,i,!0);n&&(0,eG.makeElementContentEditableAndSelectItsContent)(n)}}}function gj(){if(this.hot.isListening()){let t=this.hot.getSelectedRangeLast();if(t){let{row:e,col:i}=t.highlight,n=this.hot.getCell(e,i,!0);null!=n&&n.hasAttribute("contenteditable")&&(0,eG.removeContentEditableFromElementAndDeselect)(n)}}}function gU(t){var e,i,n,r,o;t.items.push({name:"---------"},(e=this,{key:"copy",name(){return this.getTranslatedPhrase(s_)},callback(){e.copyCellsOnly()},disabled(){if(0===this.countRows()||0===this.countCols())return!0;let t=this.getSelectedRangeLast();if(!t||t.isSingleHeader())return!0;let e=this.getSelected();return!e||e.length>1},hidden:!1})),gM(gk,this)&&t.items.push((i=this,{key:"copy_with_column_headers",name(){let t=this.getSelectedRangeLast(),e=t?(0,i0.clamp)(t.getWidth()-1,0,1):0;return this.getTranslatedPhrase(sM,e)},callback(){i.copyWithColumnHeaders()},disabled(){if(!this.hasColHeaders())return!0;let t=this.getSelectedRangeLast();if(!t||t.isSingleHeader())return!0;let e=this.getSelected();return!e||e.length>1},hidden:!1})),gM(gD,this)&&t.items.push((n=this,{key:"copy_with_column_group_headers",name(){let t=this.getSelectedRangeLast(),e=t?(0,i0.clamp)(t.getWidth()-1,0,1):0;return this.getTranslatedPhrase(sT,e)},callback(){n.copyWithAllColumnHeaders()},disabled(){if(!this.hasColHeaders()||!this.getSettings().nestedHeaders)return!0;let t=this.getSelectedRangeLast();if(!t||t.isSingleHeader())return!0;let e=this.getSelected();return!e||e.length>1},hidden:!1})),gM(gO,this)&&t.items.push((r=this,{key:"copy_column_headers_only",name(){let t=this.getSelectedRangeLast(),e=t?(0,i0.clamp)(t.getWidth()-1,0,1):0;return this.getTranslatedPhrase(sI,e)},callback(){r.copyColumnHeadersOnly()},disabled(){if(!this.hasColHeaders())return!0;let t=this.getSelectedRangeLast();if(!t||t.isSingleHeader())return!0;let e=this.getSelected();return!e||e.length>1},hidden:!1})),t.items.push((o=this,{key:"cut",name(){return this.getTranslatedPhrase(sR)},callback(){o.cut()},disabled(){if(0===this.countRows()||0===this.countCols())return!0;let t=this.getSelectedRangeLast();if(!t||t.isSingleHeader())return!0;let e=this.getSelected();return!e||e.length>1},hidden:!1}))}function gG(t,e,i,n,r){gM(gV,this)&&(r.value=!0),gT(gV,this,!1)}function gY(){!this.isEditorOpened()&&(this.hot.getSettings().fragmentSelection||this.setCopyableText())}function gX(){gI(gB,this,gj).call(this)}function g$(){gI(gB,this,gz).call(this)}function gZ(){gI(gB,this,gj).call(this)}t4("1C6fS"),t4("1hIp0");var e6=t4("hwT6B"),i0=t4("guO5N"),iy=t4("ceXML"),e6=t4("hwT6B"),eX=t4("gnaTS"),iy=t4("ceXML");function gq(t,e){return`border_row${t}col${e}`}function gK(){return{width:1,color:"#000"}}function gQ(){return{hide:!0}}function gJ(t){var e,i;return((0,eX.isDefined)(t.start)||(0,eX.isDefined)(t.left))&&(t.start=null!==(e=t.start)&&void 0!==e?e:t.left),((0,eX.isDefined)(t.end)||(0,eX.isDefined)(t.right))&&(t.end=null!==(i=t.end)&&void 0!==i?i:t.right),delete t.left,delete t.right,t}function g0(t){return(0,eX.isDefined)(t.start)&&(t.left=t.start),(0,eX.isDefined)(t.end)&&(t.right=t.end),t}function g1(t,e){return{id:gq(t,e),border:{width:1,color:"#000",cornerVisible:!1},row:t,col:e,top:gQ(),bottom:gQ(),start:gQ(),end:gQ()}}function g2(t,e){let i=!1;return(0,iy.arrayEach)(t.getSelectedRange(),n=>{n.forAll((n,r)=>{if(n<0||r<0)return;let o=t.getCellMeta(n,r).borders;if(o&&(!e||!(0,e6.hasOwnProperty)(o[e],"hide")||!1===o[e].hide))return i=!0,!1})}),i}function g5(t){return`<span class="selected">${String.fromCharCode(10003)}</span>${t}`}const g3=new Map([["left","start"],["right","end"]]);function g4(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const g6="customBorders";var g8=new WeakSet;function g9(t){if(this.hot.getSettings()[g6]){var e,i,n;t.items.push({name:"---------"},{key:"borders",name(){return this.getTranslatedPhrase(sG)},disabled(){let t=this.getSelectedRangeLast();return!!(!t||t.isSingleHeader())||this.selection.isSelectedByCorner()},submenu:{items:[(e=this,{key:"borders:top",name(){let t=this.getTranslatedPhrase(sY);return g2(this,"top")&&(t=g5(t)),t},callback(t,i){let n=g2(this,"top");e.prepareBorder(i,"top",n)}}),function(t){let e=t.hot.isRtl()?"start":"end";return{key:"borders:right",name(){let t=this.getTranslatedPhrase(sX);return g2(this,e)&&(t=g5(t)),t},callback(i,n){let r=g2(this,e);t.prepareBorder(n,e,r)}}}(this),(i=this,{key:"borders:bottom",name(){let t=this.getTranslatedPhrase(s$);return g2(this,"bottom")&&(t=g5(t)),t},callback(t,e){let n=g2(this,"bottom");i.prepareBorder(e,"bottom",n)}}),function(t){let e=t.hot.isRtl()?"end":"start";return{key:"borders:left",name(){let t=this.getTranslatedPhrase(sZ);return g2(this,e)&&(t=g5(t)),t},callback(i,n){let r=g2(this,e);t.prepareBorder(n,e,r)}}}(this),(n=this,{key:"borders:no_borders",name(){return this.getTranslatedPhrase(sq)},callback(t,e){n.prepareBorder(e,"noBorders")},disabled(){return!g2(this)}})]}})}}function g7(){this.changeBorderSettings()}t4("1C6fS");var eq=t4("7HxIw"),eG=t4("gFbQZ");function mt(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function me(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const mi="dragToScroll";var mn=new WeakSet;function mr(t){if((0,eq.isRightClick)(t))return;let e=this.hot.view._wt.wtOverlays.topOverlay.mainTableScrollableElement;this.setBoundaries(e!==this.hot.rootWindow?e.getBoundingClientRect():void 0),this.setCallback((t,i)=>{var n,r;let o=null!==(n=e.scrollLeft)&&void 0!==n?n:e.scrollX,a=null!==(r=e.scrollTop)&&void 0!==r?r:e.scrollY;e.scroll(o+50*Math.sign(t),a+20*Math.sign(i))}),this.listen()}t4("1C6fS");var iy=t4("ceXML"),e6=t4("hwT6B"),eG=t4("gFbQZ"),sa=t4("10euP"),nZ=t4("4Pbrh");function mo(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function ma(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ms(t,e,i){return t.set(ml(t,e),i),i}function ml(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(0,sa.default).getSingleton().register("afterDropdownMenuDefaultOptions"),(0,sa.default).getSingleton().register("beforeDropdownMenuShow"),(0,sa.default).getSingleton().register("afterDropdownMenuShow"),(0,sa.default).getSingleton().register("afterDropdownMenuHide"),(0,sa.default).getSingleton().register("afterDropdownMenuExecute");const mh="dropdownMenu",mu="changeType";var mc=new WeakMap,md=new WeakSet;class mp extends cv{static get PLUGIN_KEY(){return mh}static get PLUGIN_PRIORITY(){return 230}static get PLUGIN_DEPS(){return["plugin:AutoColumnSize"]}static get DEFAULT_ITEMS(){return[pY,pX,pj,pq,pj,pG,pj,p$,pj,pU]}constructor(t){super(t),mo(this,md),md.add(this),ma(this,"commandExecutor",new fR(this.hot)),ma(this,"itemsFactory",null),ma(this,"menu",null),mo(this,mc),mc.set(this,!1),this.hot.addHook("afterGetColHeader",(t,e)=>ml(md,this,mm).call(this,t,e))}isEnabled(){return this.hot.getSettings()[mh]}enablePlugin(){var t=this;if(this.enabled)return;this.itemsFactory=new fA(this.hot,mp.DEFAULT_ITEMS),this.addHook("beforeOnCellMouseDown",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return ml(md,t,mS).call(t,...i)}),this.addHook("beforeViewportScrollHorizontally",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return ml(md,t,mx).call(t,...i)});let e=this.hot.getSettings()[mh],i={items:this.itemsFactory.getItems(e)};this.registerEvents(),"function"==typeof e.callback&&this.commandExecutor.setCommonCallback(e.callback),this.registerShortcuts(),super.enablePlugin(),this.callOnPluginsReady(()=>{this.hot.runHooks("afterDropdownMenuDefaultOptions",i),this.itemsFactory.setPredefinedItems(i.items);let n=this.itemsFactory.getItems(e);this.menu&&this.menu.destroy(),this.menu=new f3(this.hot,{className:"htDropdownMenu",keepInViewport:!0,container:e.uiContainer||this.hot.rootDocument.body}),this.hot.runHooks("beforeDropdownMenuSetItems",n),this.menu.setMenuItems(n),this.menu.addLocalHook("beforeOpen",()=>ml(md,this,my).call(this)),this.menu.addLocalHook("afterOpen",()=>ml(md,this,mv).call(this)),this.menu.addLocalHook("afterSubmenuOpen",t=>ml(md,this,mw).call(this,t)),this.menu.addLocalHook("afterClose",()=>ml(md,this,mb).call(this)),this.menu.addLocalHook("executeCommand",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return t.executeCommand.call(t,...i)}),(0,iy.arrayEach)(n,t=>this.commandExecutor.registerCommand(t.key,t))})}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.close(),this.menu&&this.menu.destroy(),this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){let t=this.hot.getShortcutManager().getContext("grid"),e=()=>{let{highlight:t}=this.hot.getSelectedRangeLast();if((t.isHeader()&&-1===t.row||t.isCell())&&t.col>=0){this.hot.selectColumns(t.col,t.col,-1);let{from:e}=this.hot.getSelectedRangeLast(),i=pW(this.menu.container,this.hot.rootDocument),n=this.hot.getCell(-1,e.col,!0).querySelector(`.${mu}`),r=n.getBoundingClientRect();this.open({left:r.left+i.left,top:r.top+n.offsetHeight+i.top},{left:r.width,right:0,above:0,below:3}),this.menu.getNavigator().toFirstItem()}};t.addShortcuts([{keys:[["Shift","Alt","ArrowDown"],["Control/Meta","Enter"]],callback:e,runOnlyIf:()=>{var t;let e=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return e&&this.hot.selection.isCellVisible(e)&&e.isHeader()&&!this.menu.isOpened()},captureCtrl:!0,group:mh},{keys:[["Shift","Alt","ArrowDown"]],callback:e,runOnlyIf:()=>{var t;let e=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return e&&this.hot.selection.isCellVisible(e)&&e.isCell()&&!this.menu.isOpened()},group:mh}])}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(mh)}registerEvents(){this.eventManager.addEventListener(this.hot.rootElement,"click",t=>ml(md,this,mg).call(this,t))}open(t){var e;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{above:0,below:0,left:0,right:0};null!==(e=this.menu)&&void 0!==e&&e.isOpened()||(this.menu.open(),(0,e6.objectEach)(i,(t,e)=>{this.menu.setOffset(e,t)}),this.menu.setPosition(t))}close(){var t;null===(t=this.menu)||void 0===t||t.close()}executeCommand(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this.commandExecutor.execute(t,...i)}setListening(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this.menu.isOpened()&&(t?this.menu.hotMenu.listen():this.menu.hotMenu.unlisten())}destroy(){this.close(),this.menu&&this.menu.destroy(),super.destroy()}}function mf(t){t.getKeyboardShortcutsCtrl().addCustomShortcuts([{keys:[["Control/Meta","A"]],callback:()=>!1}])}function mg(t){if((0,eG.hasClass)(t.target,mu)){let e=pW(this.menu.container,this.hot.rootDocument),i=t.target.getBoundingClientRect();t.stopPropagation(),ms(mc,this,!1),this.open({left:i.left+e.left,top:i.top+t.target.offsetHeight+e.top},{left:i.width,right:0,above:0,below:3})}}function mm(t,e){let i=e.parentNode;if(!i)return;let n=i.parentNode.childNodes,r=Array.prototype.indexOf.call(n,i);if(t<0||r!==n.length-1)return;let o=e.querySelector(`.${mu}`);if(this.enabled&&o)return;if(!this.enabled){o&&o.parentNode.removeChild(o);return}let a=this.hot.rootDocument.createElement("button");a.className=mu,a.type="button",a.tabIndex=-1,this.hot.getSettings().ariaTags&&((0,eG.setAttribute)(a,[(0,nZ.A11Y_HIDDEN)(),(0,nZ.A11Y_LABEL)(" ")]),(0,eG.setAttribute)(e,[(0,nZ.A11Y_HASPOPUP)("menu")])),a.onclick=function(){return!1},e.firstChild.insertBefore(a,e.firstChild.firstChild)}function my(){this.hot.runHooks("beforeDropdownMenuShow",this)}function mv(){this.hot.runHooks("afterDropdownMenuShow",this),ml(md,this,mf).call(this,this.menu)}function mw(t){ml(md,this,mf).call(this,t)}function mb(){this.hot.listen(),this.hot.runHooks("afterDropdownMenuHide",this)}function mx(t){return mc.get(ml(mc,this))?null:t}function mS(t){(0,eG.hasClass)(t.target,mu)&&ms(mc,this,!0)}mp.SEPARATOR={name:pj},t4("1C6fS"),t4("1C6fS"),t4("1hIp0");var i0=t4("guO5N");function mC(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var m_=class{constructor(t){mC(this,"hot",void 0),mC(this,"options",{}),this.hot=t}setOptions(t){this.options=t}getData(){let{startRow:t,startCol:e,endRow:i,endCol:n}=this._getDataRange(),r=this.options,o=[];return(0,i0.rangeEach)(t,i,t=>{let i=[];!r.exportHiddenRows&&this._isHiddenRow(t)||((0,i0.rangeEach)(e,n,e=>{!r.exportHiddenColumns&&this._isHiddenColumn(e)||i.push(this.hot.getDataAtCell(t,e))}),o.push(i))}),o}getRowHeaders(){let t=[];if(this.options.rowHeaders){let{startRow:e,endRow:i}=this._getDataRange(),n=this.hot.getRowHeader();(0,i0.rangeEach)(e,i,e=>{!this.options.exportHiddenRows&&this._isHiddenRow(e)||t.push(n[e])})}return t}getColumnHeaders(){let t=[];if(this.options.columnHeaders){let{startCol:e,endCol:i}=this._getDataRange(),n=this.hot.getColHeader();(0,i0.rangeEach)(e,i,e=>{!this.options.exportHiddenColumns&&this._isHiddenColumn(e)||t.push(n[e])})}return t}_getDataRange(){let t=this.hot.countCols()-1,e=this.hot.countRows()-1,[i=0,n=0,r=e,o=t]=this.options.range;return{startRow:i=Math.max(i,0),startCol:n=Math.max(n,0),endRow:r=Math.min(r,e),endCol:o=Math.min(o,t)}}_isHiddenRow(t){return this.hot.rowIndexMapper.isHidden(this.hot.toPhysicalRow(t))}_isHiddenColumn(t){return this.hot.columnIndexMapper.isHidden(this.hot.toPhysicalColumn(t))}},iy=t4("ceXML"),eX=t4("gnaTS");t4("1C6fS");var e6=t4("hwT6B"),iJ=t4("bO142");function mM(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class mT{static get DEFAULT_OPTIONS(){return{mimeType:"text/plain",fileExtension:"txt",filename:"Handsontable [YYYY]-[MM]-[DD]",encoding:"utf-8",bom:!1,columnHeaders:!1,rowHeaders:!1,exportHiddenColumns:!1,exportHiddenRows:!1,range:[]}}constructor(t,e){mM(this,"dataProvider",void 0),mM(this,"options",void 0),this.dataProvider=t,this.options=this._mergeOptions(e),this.dataProvider.setOptions(this.options)}_mergeOptions(t){let e=(0,e6.clone)(this.constructor.DEFAULT_OPTIONS),i=new Date;return e=(0,e6.extend)((0,e6.clone)(mT.DEFAULT_OPTIONS),e),(e=(0,e6.extend)(e,t)).filename=(0,iJ.substitute)(e.filename,{YYYY:i.getFullYear(),MM:`${i.getMonth()+1}`.padStart(2,"0"),DD:`${i.getDate()}`.padStart(2,"0")}),e}}var mI=mT;const mR={csv:class extends mI{static get DEFAULT_OPTIONS(){return{mimeType:"text/csv",fileExtension:"csv",bom:!0,columnDelimiter:",",rowDelimiter:"\r\n"}}export(){let t=this.options,e=this.dataProvider.getData(),i=this.dataProvider.getColumnHeaders(),n=i.length>0,r=this.dataProvider.getRowHeaders(),o=r.length>0,a=t.bom?String.fromCharCode(65279):"";return n&&(i=(0,iy.arrayMap)(i,t=>this._escapeCell(t,!0)),o&&(a+=t.columnDelimiter),a+=i.join(t.columnDelimiter)+t.rowDelimiter),(0,iy.arrayEach)(e,(e,i)=>{i>0&&(a+=t.rowDelimiter),o&&(a+=this._escapeCell(r[i])+t.columnDelimiter),a+=e.map(t=>this._escapeCell(t)).join(t.columnDelimiter)}),a}_escapeCell(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(0,eX.stringify)(t);return""!==i&&(e||i.indexOf("\r")>=0||i.indexOf('"')>=0||i.indexOf("\n")>=0||i.indexOf(this.options.columnDelimiter)>=0)&&(i=i.replace(RegExp('"',"g"),'""'),i=`"${i}"`),i}}};t4("1C6fS"),t4("1hIp0");var iy=t4("ceXML"),nJ=t4("iCsRe"),e8=t4("jlXkd"),i0=t4("guO5N"),eG=t4("gFbQZ"),eZ=t4("bCtEl");t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),eq=t4("7HxIw"),iy=t4("ceXML"),eZ=t4("bCtEl"),e6=t4("hwT6B");t4("1C6fS");var iy=t4("ceXML"),e6=t4("hwT6B");function mE(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class mA{constructor(t,e){let{id:i,stateless:n=!0}=e;mE(this,"hot",void 0),mE(this,"id",void 0),mE(this,"elements",[]),mE(this,"hidden",!1),mE(this,"stateId",""),mE(this,"state",void 0),this.hot=t,this.id=i,this.stateId=`Filters.component.${this.id}`,this.state=n?null:this.hot.columnIndexMapper.registerMap(this.stateId,new aY)}getElements(){return this.elements}reset(){(0,iy.arrayEach)(this.elements,t=>t.reset())}hide(){this.hidden=!0}show(){this.hidden=!1}isHidden(){return null===this.hot||this.hidden}restoreState(t){this.state&&this.setState(this.state.getValueAtIndex(t))}setState(){throw Error("The state setting logic is not implemented")}saveState(t){this.state&&this.state.setValueAtIndex(t,this.getState())}getState(){throw Error("The state gathering logic is not implemented")}destroy(){this.hot.columnIndexMapper.unregisterMap(this.stateId),this.clearLocalHooks(),(0,iy.arrayEach)(this.elements,t=>t.destroy()),this.state=null,this.elements=null,this.hot=null}}(0,e6.mixin)(mA,aL),t4("1hIp0");var e6=t4("hwT6B"),iy=t4("ceXML");t4("1C6fS");const mk={};function mD(t,e){if(!mk[t])throw Error(`Filter condition "${t}" does not exist.`);let{condition:i,descriptor:n}=mk[t],r=e;return n.inputValuesDecorator&&(r=n.inputValuesDecorator(r)),function(t){return i.apply(t.meta.instance,[].concat([t],[r]))}}function mO(t){if(!mk[t])throw Error(`Filter condition "${t}" does not exist.`);return mk[t].descriptor}function mP(t,e,i){i.key=t,mk[t]={condition:e,descriptor:i}}const mL="none";mP(mL,function(){return!0},{name:s4,inputsCount:0,showOperators:!1});var eX=t4("gnaTS");const mN="empty";mP(mN,function(t){return(0,eX.isEmpty)(t.value)},{name:s6,inputsCount:0,showOperators:!0});const mH="not_empty";mP(mH,function(t,e){return!mD(mN,e)(t)},{name:s8,inputsCount:0,showOperators:!0});var eX=t4("gnaTS");mP("eq",function(t,e){let[i]=e;return(0,eX.stringify)(t.value).toLocaleLowerCase(t.meta.locale)===(0,eX.stringify)(i)},{name:s9,inputsCount:1,showOperators:!0}),mP("neq",function(t,e){return!mD("eq",e)(t)},{name:s7,inputsCount:1,showOperators:!0}),mP("gt",function(t,e){let[i]=e,n=i;return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value>n},{name:lo,inputsCount:1,showOperators:!0}),mP("gte",function(t,e){let[i]=e,n=i;return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value>=n},{name:la,inputsCount:1,showOperators:!0}),mP("lt",function(t,e){let[i]=e,n=i;return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value<n},{name:ls,inputsCount:1,showOperators:!0}),mP("lte",function(t,e){let[i]=e,n=i;return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value<=n},{name:ll,inputsCount:1,showOperators:!0});var cr=t4("45fvw");const mV="date_after";mP(mV,function(t,e){let[n]=e,r=i(cr)(t.value,t.meta.dateFormat),o=i(cr)(n,t.meta.dateFormat);return!!(r.isValid()&&o.isValid())&&r.diff(o)>=0},{name:lc,inputsCount:1,showOperators:!0});var cr=t4("45fvw");const mB="date_before";mP(mB,function(t,e){let[n]=e,r=i(cr)(t.value,t.meta.dateFormat),o=i(cr)(n,t.meta.dateFormat);return!!(r.isValid()&&o.isValid())&&0>=r.diff(o)},{name:ld,inputsCount:1,showOperators:!0});const mF="between";mP(mF,function(t,e){let[i,n]=e,r=i,o=n;if("numeric"===t.meta.type){let t=parseFloat(r,10),e=parseFloat(o,10);r=Math.min(t,e),o=Math.max(t,e)}else if("date"===t.meta.type){let e=mD(mB,[o]),i=mD(mV,[r]);return e(t)&&i(t)}return t.value>=r&&t.value<=o},{name:lh,inputsCount:2,showOperators:!0});const mW="not_between";mP(mW,function(t,e){return!mD(mF,e)(t)},{name:lu,inputsCount:2,showOperators:!0});var eX=t4("gnaTS");const mz="begins_with";mP(mz,function(t,e){let[i]=e;return(0,eX.stringify)(t.value).toLocaleLowerCase(t.meta.locale).startsWith((0,eX.stringify)(i))},{name:lt,inputsCount:1,showOperators:!0});var eX=t4("gnaTS");const mj="ends_with";mP(mj,function(t,e){let[i]=e;return(0,eX.stringify)(t.value).toLocaleLowerCase(t.meta.locale).endsWith((0,eX.stringify)(i))},{name:le,inputsCount:1,showOperators:!0});var eX=t4("gnaTS");const mU="contains";mP(mU,function(t,e){let[i]=e;return(0,eX.stringify)(t.value).toLocaleLowerCase(t.meta.locale).indexOf((0,eX.stringify)(i))>=0},{name:li,inputsCount:1,showOperators:!0});const mG="not_contains";mP(mG,function(t,e){return!mD(mU,e)(t)},{name:ln,inputsCount:1,showOperators:!0});var cr=t4("45fvw");const mY="date_tomorrow";mP(mY,function(t){let e=i(cr)(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(i(cr)().subtract(-1,"days").startOf("day"),"d")},{name:lf,inputsCount:0});var cr=t4("45fvw");const mX="date_today";mP(mX,function(t){let e=i(cr)(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(i(cr)().startOf("day"),"d")},{name:lp,inputsCount:0});var cr=t4("45fvw");const m$="date_yesterday";mP(m$,function(t){let e=i(cr)(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(i(cr)().subtract(1,"days").startOf("day"),"d")},{name:lg,inputsCount:0}),t4("1hIp0"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var nw=t4("llu1T"),iy=t4("ceXML");(0,nw.getComparisonFunction)();const mZ=new Set([1]).has(1),mq=mZ&&"function"==typeof Array.from;function mK(t){let e=t;return mZ&&(e=new Set(e)),function(t){return mZ?e.has(t):!!~e.indexOf(t)}}function mQ(t){return null==t?"":t}function mJ(t){let e=t;return(e=mq?Array.from(new Set(e)):(0,iy.arrayUnique)(e)).sort((t,e)=>"number"==typeof t&&"number"==typeof e?t-e:t===e?0:t>e?1:-1)}function m0(t,e,i,n){let r;let o=[],a=t===e;return a||(r=mK(e)),(0,iy.arrayEach)(t,t=>{let e,s=!1;(a||r(t))&&(s=!0);let l={checked:s,value:t,visualValue:(""===(e=t)&&(e=`(${i})`),e)};n&&n(l),o.push(l)}),o}const m1="by_value";mP(m1,function(t,e){let[i]=e;return i(t.value)},{name:"By value",inputsCount:0,inputValuesDecorator(t){let[e]=t;return[mK(e)]},showOperators:!1}),t4("1C6fS");const m2={};function m5(t,e,i){m2[t]={name:e,func:i}}const m3="conjunction";m5(m3,lv,function(t,e){return t.every(t=>t.func(e))});const m4="disjunction";m5(m4,lw,function(t,e){return t.some(t=>t.func(e))}),t4("1C6fS");const m6="disjunctionWithExtraCondition";m5(m6,lw,function(t,e){if(t.length<3)throw Error("Operation doesn't work on less then three conditions.");return t.slice(0,t.length-1).some(t=>t.func(e))&&t[t.length-1].func(e)});const m8="text",m9={numeric:[mL,pj,mN,mH,pj,"eq","neq",pj,"gt","gte","lt","lte",mF,mW],[m8]:[mL,pj,mN,mH,pj,"eq","neq",pj,mz,mj,pj,mU,mG],date:[mL,pj,mN,mH,pj,"eq","neq",pj,mB,mV,mF,pj,mY,mX,m$]};t4("1C6fS");var eG=t4("gFbQZ"),e6=t4("hwT6B");t4("1C6fS");var e6=t4("hwT6B"),eQ=t4("1k8Ev"),eG=t4("gFbQZ"),iy=t4("ceXML");function m7(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const yt="built",ye="building",yi=["click","input","keydown","keypress","keyup","focus","blur","change"];class yn{static get DEFAULTS(){return(0,e6.clone)({className:"",value:"",tagName:"div",children:[],wrapIt:!0})}constructor(t,e){m7(this,"hot",void 0),m7(this,"eventManager",new eQ.default(this)),m7(this,"options",void 0),m7(this,"_element",void 0),m7(this,"buildState",void 0),this.hot=t,this.options=(0,e6.extend)(yn.DEFAULTS,e),this._element=this.hot.rootDocument.createElement(this.options.wrapIt?"div":this.options.tagName)}setValue(t){this.options.value=t,this.update()}getValue(){return this.options.value}get element(){return this.buildState===ye||(this.buildState===yt?this.update():(this.buildState=ye,this.build(),this.buildState=yt)),this._element}isBuilt(){return this.buildState===yt}translateIfPossible(t){return"string"==typeof t&&t.startsWith(s5)?this.hot.getTranslatedPhrase(t):t}build(){let t=(t,e)=>{this.eventManager.addEventListener(t,e,t=>this.runLocalHooks(e,t,this))};if(this.buildState||(this.buildState=ye),this._element.setAttribute("data-hot-input",!0),void 0!==this.options.tabIndex&&this._element.setAttribute("tabindex",this.options.tabIndex),void 0!==this.options.role&&this._element.setAttribute("role",this.options.role),this.options.className&&(0,eG.addClass)(this._element,this.options.className),this.options.children.length)(0,iy.arrayEach)(this.options.children,t=>this._element.appendChild(t.element));else if(this.options.wrapIt){let e=this.hot.rootDocument.createElement(this.options.tagName);e.setAttribute("data-hot-input",!0),(0,e6.objectEach)(this.options,(t,i)=>{void 0!==e[i]&&"className"!==i&&"tagName"!==i&&"children"!==i&&(e[i]=this.translateIfPossible(t))}),this._element.appendChild(e),(0,iy.arrayEach)(yi,i=>t(e,i))}else(0,iy.arrayEach)(yi,e=>t(this._element,e))}update(){}reset(){this.options.value="",this.update()}show(){this.element.style.display=""}hide(){this.element.style.display="none"}focus(){}destroy(){this.eventManager.destroy(),this.eventManager=null,this.hot=null,this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null}}function yr(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function yo(t,e){return t.get(ya(t,e))}function ya(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(0,e6.mixin)(yn,aL);var ys=new WeakMap,yl=new WeakSet;class yh extends yn{static get DEFAULTS(){return(0,e6.clone)({placeholder:"",type:"text",tagName:"input",tabIndex:-1})}constructor(t,e){var i;super(t,(0,e6.extend)(yh.DEFAULTS,e)),yr(this,yl),yl.add(this),i=void 0,yr(this,ys),ys.set(this,i),this.registerHooks()}registerHooks(){this.addLocalHook("keyup",t=>ya(yl,this,yu).call(this,t))}build(){var t;super.build();let e=this.hot.rootDocument.createElement("div");t=this._element.firstChild,ys.set(ya(ys,this),t),(0,eG.addClass)(this._element,"htUIInput"),(0,eG.addClass)(e,"htUIInputIcon"),this._element.appendChild(e),this.update()}update(){this.isBuilt()&&(yo(ys,this).type=this.options.type,yo(ys,this).placeholder=this.translateIfPossible(this.options.placeholder),yo(ys,this).value=this.translateIfPossible(this.options.value))}focus(){this.isBuilt()&&yo(ys,this).focus()}}function yu(t){this.options.value=t.target.value}t4("1C6fS");var e6=t4("hwT6B"),iy=t4("ceXML"),eG=t4("gFbQZ"),nZ=t4("4Pbrh");function yc(t,e,i){yd(t,e),e.set(t,i)}function yd(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function yp(t,e,i){return t.set(yg(t,e),i),i}function yf(t,e){return t.get(yg(t,e))}function yg(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var ym=new WeakMap,yy=new WeakMap,yv=new WeakMap,yw=new WeakMap,yb=new WeakMap,yx=new WeakSet;class yS extends yn{static get DEFAULTS(){return(0,e6.clone)({className:"htUISelect",wrapIt:!1,tabIndex:-1})}constructor(t,e){super(t,(0,e6.extend)(yS.DEFAULTS,e)),yd(this,yx),yx.add(this),yc(this,ym,null),yc(this,yy,[]),yc(this,yv,void 0),yc(this,yw,void 0),yc(this,yb,void 0),this.registerHooks()}getMenu(){return yf(ym,this)}registerHooks(){this.addLocalHook("click",()=>yg(yx,this,yM).call(this))}setItems(t){yp(yy,this,this.translateNames(t)),yf(ym,this)&&yf(ym,this).setMenuItems(yf(yy,this))}translateNames(t){return(0,iy.arrayEach)(t,t=>{t.name=this.translateIfPossible(t.name)}),t}build(){super.build(),yp(ym,this,new f3(this.hot,{className:"htSelectUI htFiltersConditionsMenu",keepInViewport:!1,standalone:!0,container:this.options.menuContainer})),yf(ym,this).setMenuItems(yf(yy,this));let t=new yn(this.hot,{className:"htUISelectCaption"}),e=new yn(this.hot,{className:"htUISelectDropdown"});yp(yv,this,t),yp(yw,this,t.element),yp(yb,this,e),this.hot.getSettings().ariaTags&&((0,eG.setAttribute)(e.element,[(0,nZ.A11Y_HIDDEN)()]),(0,eG.setAttribute)(this._element,[(0,nZ.A11Y_LISTBOX)()])),(0,iy.arrayEach)([t,e],t=>this._element.appendChild(t.element)),yf(ym,this).addLocalHook("select",t=>yg(yx,this,yC).call(this,t)),yf(ym,this).addLocalHook("afterClose",()=>yg(yx,this,y_).call(this)),this.update()}update(){let t;this.isBuilt()&&(t=this.options.value?this.options.value.name:yf(ym,this).hot.getTranslatedPhrase(s4),yf(yw,this).textContent=t,super.update())}openOptions(){let t=this.element.getBoundingClientRect();yf(ym,this)&&(yf(ym,this).open(),yf(ym,this).setPosition({left:this.hot.isLtr()?t.left-5:t.left-31,top:t.top-1,width:t.width,height:t.height}),yf(ym,this).getNavigator().toFirstItem(),yf(ym,this).getKeyboardShortcutsCtrl().addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],callback:t=>{this.closeOptions(),this.runLocalHooks("tabKeydown",t)}},{keys:[["Control/Meta","A"]],callback:()=>!1}]))}closeOptions(){yf(ym,this)&&yf(ym,this).close()}focus(){this.isBuilt()&&this.element.focus()}destroy(){yf(ym,this)&&(yf(ym,this).destroy(),yp(ym,this,null)),yf(yv,this)&&yf(yv,this).destroy(),yf(yb,this)&&yf(yb,this).destroy(),super.destroy()}}function yC(t){t.name!==pj&&(this.options.value=t,this.update(),this.runLocalHooks("select",this.options.value))}function y_(){this.runLocalHooks("afterClose")}function yM(){this.openOptions()}function yT(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function yI(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var yR=new WeakSet;class yE extends mA{constructor(t,e){super(t,{id:e.id,stateless:!1}),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,yR),yR.add(this),yT(this,"name",""),yT(this,"addSeparator",!1),this.name=e.name,this.addSeparator=e.addSeparator,this.elements.push(new yS(this.hot,{menuContainer:e.menuContainer})),this.elements.push(new yh(this.hot,{placeholder:lT})),this.elements.push(new yh(this.hot,{placeholder:lI})),this.registerHooks()}registerHooks(){this.getSelectElement().addLocalHook("select",t=>yI(yR,this,yA).call(this,t)).addLocalHook("afterClose",()=>this.runLocalHooks("afterClose")).addLocalHook("tabKeydown",t=>this.runLocalHooks("selectTabKeydown",t)),(0,iy.arrayEach)(this.getInputElements(),t=>{t.addLocalHook("keydown",t=>yI(yR,this,yk).call(this,t))})}setState(t){if(this.reset(),!t)return;let e=(0,e6.clone)(t.command);e.name.startsWith(s3)&&(e.name=this.hot.getTranslatedPhrase(e.name)),this.getSelectElement().setValue(e),(0,iy.arrayEach)(t.args,(t,i)=>{if(i>e.inputsCount-1)return!1;let n=this.getInputElement(i);n.setValue(t),n[e.inputsCount>i?"show":"hide"](),i||this.hot._registerTimeout(()=>n.focus(),10)})}getState(){let t=this.getSelectElement().getValue()||mO(mL),e=[];return(0,iy.arrayEach)(this.getInputElements(),(i,n)=>{t.inputsCount>n&&e.push(i.getValue())}),{command:t,args:e}}updateState(t,e){let i=t?mO(t.name):mO(mL);this.state.setValueAtIndex(e,{command:i,args:t?t.args:[]}),t||(0,iy.arrayEach)(this.getInputElements(),t=>t.setValue(null))}getSelectElement(){return this.elements.filter(t=>t instanceof yS)[0]}getInputElement(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.getInputElements()[t]}getInputElements(){return this.elements.filter(t=>t instanceof yh)}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(t,e,i,n,r,o)=>{(0,eG.addClass)(e.parentNode,"htFiltersMenuCondition"),this.addSeparator&&(0,eG.addClass)(e.parentNode,"border");let a=this.hot.rootDocument.createElement("div");return(0,eG.addClass)(a,"htFiltersMenuLabel"),a.textContent=o,e.appendChild(a),e.parentElement.hasAttribute("ghost-table")||(0,iy.arrayEach)(this.elements,t=>e.appendChild(t.element)),e}}}reset(){let t=this.hot.getPlugin("filters").getSelectedColumn(),e=[mO(mL)];if(null!==t){let{visualIndex:i}=t;e=function(t){let e=[],i=t;return m9[i]||(i=m8),(0,iy.arrayEach)(m9[i],t=>{let i;i=t===pj?{name:pj}:(0,e6.clone)(mO(t)),e.push(i)}),e}(this.hot.getDataType(0,i,this.hot.countRows(),i))}(0,iy.arrayEach)(this.getInputElements(),t=>t.hide()),this.getSelectElement().setItems(e),super.reset(),this.getSelectElement().setValue(e[0])}}function yA(t){(0,iy.arrayEach)(this.getInputElements(),(e,i)=>{e[t.inputsCount>i?"show":"hide"](),0===i&&this.hot._registerTimeout(()=>e.focus(),10)}),this.runLocalHooks("change",t)}function yk(t){(0,eZ.isKey)(t.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),(0,eq.stopImmediatePropagation)(t))}t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),iy=t4("ceXML"),nJ=t4("iCsRe");t4("1C6fS");var e6=t4("hwT6B");function yD(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function yO(t,e){return t.get(yL(t,e))}function yP(t,e,i){return t.set(yL(t,e),i),i}function yL(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var yN=new WeakMap,yH=new WeakMap;class yV extends yn{static get DEFAULTS(){return(0,e6.clone)({type:"radio",tagName:"input",className:"htUIRadio",label:{}})}constructor(t,e){super(t,(0,e6.extend)(yV.DEFAULTS,e)),yD(this,yN,void 0),yD(this,yH,void 0)}build(){super.build();let t=this.hot.rootDocument.createElement("label");t.textContent=this.translateIfPossible(this.options.label.textContent),t.htmlFor=this.translateIfPossible(this.options.label.htmlFor),yP(yH,this,t),yP(yN,this,this._element.firstChild),yO(yN,this).checked=this.options.checked,this._element.appendChild(t),this.update()}update(){this.isBuilt()&&(yO(yH,this).textContent=this.translateIfPossible(this.options.label.textContent))}isChecked(){return!!this.isBuilt()&&yO(yN,this).checked}setChecked(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this.isBuilt()&&(yO(yN,this).checked=t)}focus(){this.isBuilt()&&yO(yN,this).focus()}}var yB=new WeakSet;class yF extends mA{constructor(t,e){var i,n;super(t,{id:e.id,stateless:!1}),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,yB),yB.add(this),(i="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i="name","string"))?n:n+"")in this?Object.defineProperty(this,i,{value:"",enumerable:!0,configurable:!0,writable:!0}):this[i]="",this.name=e.name,this.buildOperatorsElement()}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(t,e)=>((0,eG.addClass)(e.parentNode,"htFiltersMenuOperators"),(0,iy.arrayEach)(this.elements,t=>e.appendChild(t.element)),e)}}buildOperatorsElement(){let t=[m3,m4];(0,iy.arrayEach)(t,e=>{let i=new yV(this.hot,{name:"operator",label:{htmlFor:e,textContent:m2[e].name},value:e,checked:e===t[0],id:e});i.addLocalHook("change",t=>(function(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")})(yB,this,yW).call(this,t)),this.elements.push(i)})}setChecked(t){if(this.elements.length<t)throw Error((0,nJ.toSingleLine)`Radio button with index ${t} doesn't exist.`);(0,iy.arrayEach)(this.elements,(e,i)=>{e.setChecked(i===t)})}getActiveOperationId(){let t=this.elements.find(t=>t instanceof yV&&t.isChecked());return t?t.getValue():m3}getState(){return this.getActiveOperationId()}setState(t){this.reset(),t&&this.getActiveOperationId()!==t&&(0,iy.arrayEach)(this.elements,e=>{e.setChecked(e.getValue()===t)})}updateState(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m3,e=arguments.length>1?arguments[1]:void 0,i=t;i===m6&&(i=m4),this.state.setValueAtIndex(e,i)}reset(){this.setChecked(0)}}function yW(t){this.setState(t.target.value)}t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),eq=t4("7HxIw"),iy=t4("ceXML"),eZ=t4("bCtEl");t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),e6=t4("hwT6B"),eZ=t4("bCtEl"),eY=t4("f3221"),eq=t4("7HxIw");t4("1C6fS");var e6=t4("hwT6B");function yz(t,e){return t.get(yj(t,e))}function yj(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var yU=new WeakMap;class yG extends yn{static get DEFAULTS(){return(0,e6.clone)({href:"#",tagName:"a",tabIndex:-1,role:"button"})}constructor(t,e){var i;super(t,(0,e6.extend)(yG.DEFAULTS,e)),i=void 0,function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,yU),yU.set(this,i)}build(){var t;super.build(),t=this._element.firstChild,yU.set(yj(yU,this),t)}update(){this.isBuilt()&&(yz(yU,this).textContent=this.translateIfPossible(this.options.textContent))}focus(){this.isBuilt()&&yz(yU,this).focus()}activate(){yz(yU,this).click()}}function yY(t,e,i){yX(t,e),e.set(t,i)}function yX(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function y$(t,e){return t.get(yq(t,e))}function yZ(t,e,i){return t.set(yq(t,e),i),i}function yq(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const yK="multipleSelect.itemBox";var yQ=new WeakMap,yJ=new WeakMap,y0=new WeakMap,y1=new WeakMap,y2=new WeakMap,y5=new WeakMap,y3=new WeakSet;class y4 extends yn{static get DEFAULTS(){return(0,e6.clone)({className:"htUIMultipleSelect",value:[]})}constructor(t,e){super(t,(0,e6.extend)(y4.DEFAULTS,e)),yX(this,y3),y3.add(this),yY(this,yQ,[]),yY(this,yJ,void 0),yY(this,y0,void 0),yY(this,y1,void 0),yY(this,y2,void 0),yY(this,y5,void 0),yZ(y1,this,new yh(this.hot,{placeholder:lM,className:"htUIMultipleSelectSearch"})),yZ(y2,this,new yG(this.hot,{textContent:lx,className:"htUISelectAll"})),yZ(y5,this,new yG(this.hot,{textContent:lS,className:"htUIClearAll"})),this.registerHooks()}getItemsBox(){return y$(yJ,this)}registerHooks(){y$(y1,this).addLocalHook("keydown",t=>yq(y3,this,y8).call(this,t)),y$(y1,this).addLocalHook("input",t=>yq(y3,this,y6).call(this,t)),y$(y2,this).addLocalHook("click",t=>yq(y3,this,y9).call(this,t)),y$(y5,this).addLocalHook("click",t=>yq(y3,this,y7).call(this,t))}setItems(t){var e;yZ(yQ,this,t),null===(e=y$(yJ,this))||void 0===e||e.loadData(y$(yQ,this))}setLocale(t){yZ(y0,this,t)}getLocale(){return y$(y0,this)}getItems(){return[...y$(yQ,this)]}getValue(){return function(t){let e=[];return t.forEach(t=>{t.checked&&e.push(t.value)}),e}(y$(yQ,this))}getSearchInputElement(){return y$(y1,this)}getSelectAllElement(){return y$(y2,this)}getClearAllElement(){return y$(y5,this)}isSelectedAllValues(){return y$(yQ,this).length===this.getValue().length}build(){super.build();let{rootDocument:t}=this.hot,e=t.createElement("div"),i=new yn(this.hot,{className:"htUISelectionControls",children:[y$(y2,this),y$(y5,this)]});this._element.appendChild(y$(y1,this).element),this._element.appendChild(i.element),this._element.appendChild(e);let n=e=>{var i;if(!this._element)return;null===(i=y$(yJ,this))||void 0===i||i.destroy(),(0,eG.addClass)(e,"htUIMultipleSelectHot"),yZ(yJ,this,new this.hot.constructor(e,{data:y$(yQ,this),columns:[{data:"checked",type:"checkbox",label:{property:"visualValue",position:"after"}}],beforeRenderer:(t,e,i,n,r,o)=>{t.title=o.instance.getDataAtRowProp(e,o.label.property)},afterListen:()=>{this.runLocalHooks("focus",this)},beforeOnCellMouseUp:()=>{y$(yJ,this).listen()},colWidths:()=>y$(yJ,this).container.scrollWidth-(0,eG.getScrollbarWidth)(t),maxCols:1,autoWrapCol:!0,height:110,copyPaste:!1,disableVisualSelection:"area",fillHandle:!1,fragmentSelection:"cell",tabMoves:{row:1,col:0},layoutDirection:this.hot.isRtl()?"rtl":"ltr"})),y$(yJ,this).init();let n=y$(yJ,this).getShortcutManager().getContext("grid");n.removeShortcutsByKeys(["Tab"]),n.removeShortcutsByKeys(["Shift","Tab"]),n.addShortcut({keys:[["Escape"]],callback:t=>{this.runLocalHooks("keydown",t,this)},group:yK}),n.addShortcut({keys:[["Tab"],["Shift","Tab"]],callback:t=>{y$(yJ,this).deselectCell(),this.runLocalHooks("keydown",t,this),this.runLocalHooks("listTabKeydown",t,this)},group:yK})};n(e),this.hot._registerTimeout(()=>n(e),100)}focus(){this.isBuilt()&&y$(yJ,this).listen()}reset(){y$(y1,this).reset(),y$(y2,this).reset(),y$(y5,this).reset()}update(){this.isBuilt()&&(y$(yJ,this).loadData(function(t,e){let i=mK(e);return t.map(t=>(t.checked=i(t.value),t))}(y$(yQ,this),this.options.value)),super.update())}destroy(){var t;null===(t=y$(yJ,this))||void 0===t||t.destroy(),y$(y1,this).destroy(),y$(y5,this).destroy(),y$(y2,this).destroy(),yZ(y1,this,null),yZ(y5,this,null),yZ(y2,this,null),yZ(yJ,this,null),yZ(yQ,this,null),super.destroy()}}function y6(t){let e;let i=t.target.value.toLocaleLowerCase(this.getLocale());e=""===i?[...y$(yQ,this)]:y$(yQ,this).filter(t=>`${t.value}`.toLocaleLowerCase(this.getLocale()).indexOf(i)>=0),y$(yJ,this).loadData(e)}function y8(t){this.runLocalHooks("keydown",t,this),(0,eY.partial)(eZ.isKey,t.keyCode)("ARROW_DOWN")&&(t.preventDefault(),(0,eq.stopImmediatePropagation)(t),y$(yJ,this).listen(),y$(yJ,this).selectCell(0,0))}function y9(t){let e=[];t.preventDefault(),y$(yJ,this).getSourceData().forEach((t,i)=>{t.checked=!0,e.push(aE(t,i)[0])}),y$(yJ,this).setSourceDataAtCell(e)}function y7(t){let e=[];t.preventDefault(),y$(yJ,this).getSourceData().forEach((t,i)=>{t.checked=!1,e.push(aE(t,i)[0])}),y$(yJ,this).setSourceDataAtCell(e)}function vt(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var ve=new WeakSet;class vi extends mA{constructor(t,e){var i,n;super(t,{id:e.id,stateless:!1}),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,ve),ve.add(this),(i="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i="name","string"))?n:n+"")in this?Object.defineProperty(this,i,{value:"",enumerable:!0,configurable:!0,writable:!0}):this[i]="",this.name=e.name,this.elements.push(new y4(this.hot)),this.registerHooks()}registerHooks(){this.getMultipleSelectElement().addLocalHook("keydown",t=>vt(ve,this,vn).call(this,t)).addLocalHook("listTabKeydown",t=>this.runLocalHooks("listTabKeydown",t)),this.hot.addHook("modifyFiltersMultiSelectValue",(t,e)=>vt(ve,this,vo).call(this,t,e))}getElements(){let t=this.getMultipleSelectElement();return[t.getSearchInputElement(),t.getSelectAllElement(),t.getClearAllElement(),this.getMultipleSelectElement()]}setState(t){if(this.reset(),t&&t.command.key===m1){let e=this.getMultipleSelectElement();e.setItems(t.itemsSnapshot),e.setValue(t.args[0]),e.setLocale(t.locale)}}getState(){let t=this.getMultipleSelectElement(),e=t.getItems();return{command:{key:t.isSelectedAllValues()||!e.length?mL:m1},args:[t.getValue()],itemsSnapshot:e}}updateState(t){let e=(e,i,n,r,o)=>{let[a]=(0,iy.arrayFilter)(i,t=>t.name===m1),s={},l=this.hot.getTranslatedPhrase(lb);if(a){let i=r(e,o),h=(0,iy.arrayMap)(i,t=>t.value),u=new Map(i.map(t=>[t.value,this.hot.getCellMeta(t.meta.visualRow,t.meta.visualCol)])),c=mJ(h);n&&(a.args[0]=n);let d=[],p=m0(c,a.args[0],l,t=>{t.checked&&d.push(t.value),vt(ve,this,vr).call(this,t,u)}),f=t.editedConditionStack.column;s.locale=this.hot.getCellMeta(0,f).locale,s.args=[d],s.command=mO(m1),s.itemsSnapshot=p}else s.args=[],s.command=mO(mL);this.state.setValueAtIndex(e,s)};e(t.editedConditionStack.column,t.editedConditionStack.conditions,t.conditionArgsChange,t.filteredRowsFactory),t.dependentConditionStacks.length&&e(t.dependentConditionStacks[0].column,t.dependentConditionStacks[0].conditions,t.conditionArgsChange,t.filteredRowsFactory,t.editedConditionStack)}getMultipleSelectElement(){return this.elements.filter(t=>t instanceof y4)[0]}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(t,e,i,n,r,o)=>{(0,eG.addClass)(e.parentNode,"htFiltersMenuValue");let a=this.hot.rootDocument.createElement("div");return(0,eG.addClass)(a,"htFiltersMenuLabel"),a.textContent=o,e.appendChild(a),e.parentElement.hasAttribute("ghost-table")||(0,iy.arrayEach)(this.elements,t=>e.appendChild(t.element)),e}}}reset(){let t=this.hot.getTranslatedPhrase(lb),e=this._getColumnVisibleValues(),i=e.map(t=>t.value),n=new Map(e.map(t=>[t.value,t.meta])),r=mJ(i),o=m0(r,r,t,t=>{vt(ve,this,vr).call(this,t,n)});this.getMultipleSelectElement().setItems(o),super.reset(),this.getMultipleSelectElement().setValue(r);let a=this.hot.getPlugin("filters").getSelectedColumn();null!==a&&this.getMultipleSelectElement().setLocale(this.hot.getCellMeta(0,a.visualIndex).locale)}_getColumnVisibleValues(){let t=this.hot.getPlugin("filters").getSelectedColumn();return null===t?[]:(0,iy.arrayMap)(this.hot.getDataAtCol(t.visualIndex),(e,i)=>({value:mQ(e),meta:this.hot.getCellMeta(i,t.visualIndex)}))}}function vn(t){(0,eZ.isKey)(t.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),(0,eq.stopImmediatePropagation)(t))}function vr(t,e){this.hot.hasHook("modifyFiltersMultiSelectValue")&&(t.visualValue=this.hot.runHooks("modifyFiltersMultiSelectValue",t.visualValue,e.get(t.value)))}function vo(t,e){return"numeric"===e.type?u3(t,e):t}t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),iy=t4("ceXML"),va=new WeakSet;class vs extends mA{static get BUTTON_OK(){return"ok"}static get BUTTON_CANCEL(){return"cancel"}constructor(t,e){var i,n;super(t,{id:e.id,stateless:!0}),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,va),va.add(this),(i="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i="name","string"))?n:n+"")in this?Object.defineProperty(this,i,{value:"",enumerable:!0,configurable:!0,writable:!0}):this[i]="",this.name=e.name,this.elements.push(new yh(this.hot,{type:"button",value:lC,className:"htUIButton htUIButtonOK",identifier:vs.BUTTON_OK})),this.elements.push(new yh(this.hot,{type:"button",value:l_,className:"htUIButton htUIButtonCancel",identifier:vs.BUTTON_CANCEL})),this.registerHooks()}registerHooks(){(0,iy.arrayEach)(this.elements,t=>{t.addLocalHook("click",(t,e)=>(function(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")})(va,this,vl).call(this,t,e))})}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(t,e)=>((0,eG.addClass)(e.parentNode,"htFiltersMenuActionBar"),(0,iy.arrayEach)(this.elements,t=>e.appendChild(t.element)),e)}}accept(){this.runLocalHooks("accept")}cancel(){this.runLocalHooks("cancel")}}function vl(t,e){e.options.identifier===vs.BUTTON_OK?this.accept():this.cancel()}t4("1C6fS"),t4("1hIp0");var iy=t4("ceXML"),e6=t4("hwT6B"),nJ=t4("iCsRe"),eX=t4("gnaTS");function vh(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const vu="ConditionCollection.filteringStates";class vc{constructor(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];vh(this,"hot",void 0),vh(this,"isMapRegistrable",void 0),vh(this,"filteringStates",new aY),vh(this,"previousConditionStack",null),this.hot=t,this.isMapRegistrable=e,!0===this.isMapRegistrable?this.hot.columnIndexMapper.registerMap(vu,this.filteringStates):this.filteringStates.init(this.hot.columnIndexMapper.getNumberOfIndexes())}isEmpty(){return 0===this.getFilteredColumns().length}isMatch(t,e){var i;let n=this.filteringStates.getValueAtIndex(e),r=null!==(i=null==n?void 0:n.conditions)&&void 0!==i?i:[],o=null==n?void 0:n.operation;return this.isMatchInConditions(r,t,o)}isMatchInConditions(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m3;return!t.length||(function(t){if(!m2[t])throw Error(`Operation with id "${t}" does not exist.`);let e=m2[t].func;return function(t,i){return e(t,i)}})(i)(t,e)}addCondition(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m3,n=arguments.length>3?arguments[3]:void 0,r=this.hot.getCellMeta(0,t).locale,o=(0,iy.arrayMap)(e.args,t=>"string"==typeof t?t.toLocaleLowerCase(r):t),a=e.name||e.command.key;null===this.previousConditionStack&&this.setPreviousConditionStack(this.exportAllConditions()),this.runLocalHooks("beforeAdd",t);let s=this.getOperation(t);if(s){if(s!==i)throw Error((0,nJ.toSingleLine)`The column of index ${t} has been already applied with a \`${s}\`\x20
        filter operation. Use \`removeConditions\` to clear the current conditions and then add new ones.\x20
        Mind that you cannot mix different types of operations (for instance, if you use \`conjunction\`,\x20
        use it consequently for a particular column).`)}else if((0,eX.isUndefined)(m2[i]))throw Error((0,nJ.toSingleLine)`Unexpected operation named \`${i}\`. Possible ones are\x20
        \`disjunction\` and \`conjunction\`.`);let l=this.getConditions(t);0===l.length?this.filteringStates.setValueAtIndex(t,{operation:i,conditions:[{name:a,args:o,func:mD(a,o)}]},n):l.push({name:a,args:o,func:mD(a,o)}),this.runLocalHooks("afterAdd",t)}getConditions(t){var e,i;return null!==(e=null===(i=this.filteringStates.getValueAtIndex(t))||void 0===i?void 0:i.conditions)&&void 0!==e?e:[]}getOperation(t){var e;return null===(e=this.filteringStates.getValueAtIndex(t))||void 0===e?void 0:e.operation}getFilteredColumns(){return this.filteringStates.getEntries().map(t=>{let[e]=t;return e})}getColumnStackPosition(t){return this.getFilteredColumns().indexOf(t)}exportAllConditions(){return(0,iy.arrayReduce)(this.filteringStates.getEntries(),(t,e)=>{let[i,{operation:n,conditions:r}]=e;return t.push({column:i,operation:n,conditions:(0,iy.arrayMap)(r,t=>{let{name:e,args:i}=t;return{name:e,args:i}})}),t},[])}importAllConditions(t){this.clean(),(0,iy.arrayEach)(t,t=>{(0,iy.arrayEach)(t.conditions,e=>this.addCondition(t.column,e))})}removeConditions(t){this.setPreviousConditionStack(this.exportAllConditions()),this.runLocalHooks("beforeRemove",t),this.filteringStates.clearValue(t),this.runLocalHooks("afterRemove",t)}clean(){this.runLocalHooks("beforeClean"),this.filteringStates.clear(),this.runLocalHooks("afterClean")}hasConditions(t,e){let i=this.getConditions(t);return e?i.some(t=>t.name===e):i.length>0}setPreviousConditionStack(t){this.previousConditionStack=t}destroy(){this.isMapRegistrable&&this.hot.columnIndexMapper.unregisterMap(vu),this.filteringStates=null,this.clearLocalHooks()}}(0,e6.mixin)(vc,aL),t4("1C6fS"),t4("1hIp0");var iy=t4("ceXML");function vd(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var vp=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>[];vd(this,"conditionCollection",void 0),vd(this,"columnDataFactory",void 0),this.conditionCollection=t,this.columnDataFactory=e}filter(){let t=[];return(0,iy.arrayEach)(this.conditionCollection.getFilteredColumns(),(e,i)=>{let n=this.columnDataFactory(e);i&&(n=this._getIntersectData(n,t)),t=this.filterByColumn(e,n)}),t}filterByColumn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];return(0,iy.arrayEach)(e,e=>{void 0!==e&&this.conditionCollection.isMatch(e,t)&&i.push(e)}),i}_getIntersectData(t,e){let i=[];return(0,iy.arrayEach)(e,e=>{let n=e.meta.visualRow;void 0!==t[n]&&(i[n]=t[n])}),i}};t4("1C6fS"),t4("1hIp0");var iy=t4("ceXML"),e6=t4("hwT6B"),eY=t4("f3221");function vf(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function vg(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var vm=new WeakSet;class vy{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>[];(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(this,vm),vm.add(this),vf(this,"hot",void 0),vf(this,"conditionCollection",void 0),vf(this,"columnDataFactory",void 0),vf(this,"changes",[]),vf(this,"grouping",!1),vf(this,"latestEditedColumnPosition",-1),vf(this,"latestOrderStack",[]),this.hot=t,this.conditionCollection=e,this.columnDataFactory=i,this.conditionCollection.addLocalHook("beforeRemove",t=>vg(vm,this,vv).call(this,t)),this.conditionCollection.addLocalHook("afterRemove",t=>this.updateStatesAtColumn(t)),this.conditionCollection.addLocalHook("afterAdd",t=>this.updateStatesAtColumn(t)),this.conditionCollection.addLocalHook("beforeClean",()=>vg(vm,this,vw).call(this)),this.conditionCollection.addLocalHook("afterClean",()=>vg(vm,this,vb).call(this))}groupChanges(){this.grouping=!0}flush(){this.grouping=!1,(0,iy.arrayEach)(this.changes,t=>{this.updateStatesAtColumn(t)}),this.changes.length=0}updateStatesAtColumn(t,e){var i=this;if(this.grouping){-1===this.changes.indexOf(t)&&this.changes.push(t);return}let n=this.conditionCollection.exportAllConditions(),r=this.conditionCollection.getColumnStackPosition(t);-1===r&&(r=this.latestEditedColumnPosition);let o=n.slice(0,r),a=n.slice(r);a.length&&a[0].column===t&&a.shift();let s=(0,eY.curry)(function(t,e){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=new vc(i.hot,!1),a=[].concat(t,r);o.importAllConditions(a);let s=i.columnDataFactory(e);n=o.isEmpty()?s:new vp(o,t=>i.columnDataFactory(t)).filter();let l=mK(n=(0,iy.arrayMap)(n,t=>t.meta.visualRow));return o.destroy(),(0,iy.arrayFilter)(s,t=>l(t.meta.visualRow))})(o),l=[].concat(this.conditionCollection.getConditions(t));this.runLocalHooks("update",{editedConditionStack:{column:t,conditions:l},dependentConditionStacks:a,filteredRowsFactory:s,conditionArgsChange:e})}destroy(){this.clearLocalHooks(),(0,e6.objectEach)(this,(t,e)=>{this[e]=null})}}function vv(t){this.latestEditedColumnPosition=this.conditionCollection.getColumnStackPosition(t)}function vw(){this.latestOrderStack=this.conditionCollection.getFilteredColumns()}function vb(){(0,iy.arrayEach)(this.latestOrderStack,t=>{this.updateStatesAtColumn(t)})}(0,e6.mixin)(vy,aL);var eG=t4("gFbQZ");const vx="filters";function vS(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function vC(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function v_(t,e){return t.get(vM(t,e))}function vM(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const vT="filters";var vI=new WeakMap,vR=new WeakSet;function vE(t){t&&(0,iy.arrayEach)(t,t=>{let[,e]=t,i=this.hot.propToCol(e);this.conditionCollection.hasConditions(i)&&this.updateValueComponentCondition(i)})}function vA(){let t=this.dropdownMenuPlugin.menu;this.restoreComponents(Array.from(this.components.values())),t.updateMenuDimensions()}function vk(){this.components.get("filter_by_condition").getSelectElement().closeOptions(),this.components.get("filter_by_condition2").getSelectElement().closeOptions()}function vD(t){t.items.push({name:pj}),this.components.forEach(e=>{t.items.push(e.getMenuItemDescriptor())})}function vO(t){var e,i;if("accept"===t){let t=this.getSelectedColumn();if(null===t){null===(i=this.dropdownMenuPlugin)||void 0===i||i.close();return}let{physicalIndex:e}=t,n=this.components.get("filter_by_condition").getState(),r=this.components.get("filter_by_condition2").getState(),o=this.components.get("filter_by_value").getState(),a=this.getOperationBasedOnArguments(this.components.get("filter_operators").getActiveOperationId(),n,r,o);this.conditionUpdateObserver.groupChanges();let s=this.conditionCollection.getColumnStackPosition(e);-1===s&&(s=void 0),this.conditionCollection.removeConditions(e),n.command.key!==mL&&(this.conditionCollection.addCondition(e,n,a,s),r.command.key!==mL&&this.conditionCollection.addCondition(e,r,a,s)),o.command.key!==mL&&this.conditionCollection.addCondition(e,o,a,s),this.conditionUpdateObserver.flush(),this.components.forEach(t=>t.saveState(e)),this.filtersRowsMap.clear(),this.filter()}null===(e=this.dropdownMenuPlugin)||void 0===e||e.close()}function vP(t,e){this.updateDependentComponentsVisibility(),t.constructor!==yE||e.inputsCount||this.setListeningDropdownMenu()}function vL(){this.setListeningDropdownMenu()}function vN(t,e){let i=this.hot.toPhysicalColumn(t);this.enabled&&this.conditionCollection.hasConditions(i)?(0,eG.addClass)(e,"htFiltersActive"):(0,eG.removeClass)(e,"htFiltersActive")}function vH(t){var e;if(!(null!==(e=this.dropdownMenuPlugin)&&void 0!==e&&e.enabled))return;let{editedConditionStack:{conditions:i,column:n}}=t,r=i.filter(t=>t.name===m1),o=i.filter(t=>t.name!==m1);if(r.length>=2||o.length>=3)(0,e8.warn)((0,nJ.toSingleLine)`The filter conditions have been applied properly, but couldnt be displayed visually.\x20
        The overall amount of conditions exceed the capability of the dropdown menu.\x20
        For more details see the documentation.`);else{let e=this.conditionCollection.getOperation(n);this.components.get("filter_by_condition").updateState(o[0],n),this.components.get("filter_by_condition2").updateState(o[1],n),this.components.get("filter_operators").updateState(e,n),this.components.get("filter_by_value").updateState(t)}}t4("1C6fS"),t4("1hIp0"),t4("euqEx"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var nr=t4("lSZ9A"),e8=t4("jlXkd"),i0=t4("guO5N"),eX=t4("gnaTS");t4("1hIp0");var nr=t4("lSZ9A"),eX=t4("gnaTS"),nJ=t4("iCsRe"),e8=t4("jlXkd"),e6=t4("hwT6B");const vV="internal-use-in-handsontable",vB={licenseKey:vV,useArrayArithmetic:!0,useColumnIndex:!1,useStats:!1,evaluateNullToZero:!0,precisionEpsilon:1e-13,precisionRounding:14,smartRounding:!0,leapYear1900:!1,nullDate:{year:1899,month:12,day:30},nullYear:30,dateFormats:["DD/MM/YYYY","DD/MM/YY"],timeFormats:["hh:mm","hh:mm:ss.sss"],matchWholeCell:!0,useRegularExpressions:!1,useWildcards:!0,functionArgSeparator:",",thousandSeparator:"",decimalSeparator:".",language:"enGB"};function vF(t){var e;return{maxColumns:t.maxColumns,maxRows:t.maxRows,language:null===(e=t[ww])||void 0===e||null===(e=e.language)||void 0===e?void 0:e.langCode}}function vW(t){return Object.keys(t).reduce((e,i)=>("hyperformula"!==i&&(e[i]=t[i]),e),{})}function vz(){let t="engine_relationship",e=(0,nr.default)(ww);return e.hasItem(t)||e.register(t,new Map),e.getItem(t)}function vj(){let t="shared_engine_usage",e=(0,nr.default)(ww);return e.hasItem(t)||e.register(t,new Map),e.getItem(t)}function vU(t){var e;let i=vz();return new Map((0===i.size?[]:Array.from(null!==(e=i.get(t))&&void 0!==e?e:[])).map(t=>[t.getPlugin("formulas").sheetId,t]))}function vG(t,e){if(t){let i=vz(),n=i.get(t),r=vj(),o=r.get(t);n&&n.includes(e)&&(n.splice(n.indexOf(e),1),0===n.length&&i.delete(t)),o&&o.includes(e.guid)&&(o.splice(o.indexOf(e.guid),1),0===o.length&&(r.delete(t),t.destroy()))}}var cr=t4("45fvw");const vY="DD/MM/YYYY";function vX(t){return"string"==typeof t&&"'"===t.charAt(0)&&"="===t.charAt(1)}function v$(t,e){return"string"==typeof t&&"date"===e}function vZ(t,e){return i(cr)(t,e,!0).isValid()}function vq(t,e){return i(cr)(t,e,!0).format(vY)}function vK(t,e){let n=new Date(Date.UTC(0,0,t+-1));return i(cr)(n).format(e)}var iJ=t4("bO142"),sa=t4("10euP");t4("1C6fS"),t4("1C6fS"),t4("1hIp0");var iJ=t4("bO142");function vQ(t,e,i){var n;return(n=function(t,e){let i=[];return t.forEach(t=>{let n={from:t,to:e};i.forEach(t=>{let e=t.from>t.to,i=t.to<=n.from;t.from>n.from&&i&&e&&(n.from+=1)}),n.from>=e&&(e+=1),i.push(n)}),i}(t,function(t,e,i){let n=Array.from(Array(i).keys()).filter(e=>!1===t.includes(e));if(0===e){var r;return null!==(r=n[e])&&void 0!==r?r:0}return n[e-1]+1}(t,e,i))).forEach((t,e)=>{n.slice(e+1).forEach(e=>{let i=e.from<e.to;e.from>t.from&&i&&(e.from-=1)})}),n}function vJ(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function v0(t,e){return t.get(v2(t,e))}function v1(t,e,i){return t.set(v2(t,e),i),i}function v2(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}t4("1hIp0");var v5=new WeakMap,v3=new WeakMap,v4=new WeakMap,v6=new WeakMap,v8=new WeakMap,v9=new WeakMap,v7=new WeakMap,wt=class{constructor(t,e,i){vJ(this,v5,void 0),vJ(this,v3,void 0),vJ(this,v4,void 0),vJ(this,v6,[]),vJ(this,v8,[]),vJ(this,v9,void 0),vJ(this,v7,[]),v1(v5,this,t),v1(v3,this,e),v1(v4,this,i)}setRemovedHfIndexes(t){return v1(v7,this,t.map(t=>{let e=v0(v3,this).getVisualFromPhysicalIndex(t);return this.getHfIndexFromVisualIndex(e)})),v0(v7,this)}getRemovedHfIndexes(){return v0(v7,this)}getHfIndexFromVisualIndex(t){let e=v0(v3,this).getIndexesSequence(),i=v0(v3,this).getNotTrimmedIndexes();return e.indexOf(i[t])}syncMoves(t){let e=`move${(0,iJ.toUpperCaseFirst)(v0(v5,this))}s`;v0(v4,this).getEngine().batch(()=>{t.forEach(t=>{let i=t.from!==t.to,n=t.from+1!==t.to;i&&n&&v0(v4,this).getEngine()[e](v0(v4,this).getSheetId(),t.from,1,t.to)})})}storeMovesInformation(t,e,i){!1!==i&&(v1(v8,this,t.map(t=>this.getHfIndexFromVisualIndex(t))),v1(v9,this,this.getHfIndexFromVisualIndex(e)))}calculateAndSyncMoves(t,e){if(v0(v4,this).isPerformingUndoRedo()||!1===t||!1===e)return;let i=vQ(v0(v8,this),v0(v9,this),v0(v3,this).getNumberOfIndexes());null===v0(v4,this).getSheetId()?v0(v4,this).getPostponeAction(()=>this.syncMoves(i)):this.syncMoves(i)}getIndexesChangeSyncMethod(){let t=`set${(0,iJ.toUpperCaseFirst)(v0(v5,this))}Order`;return e=>{if(v0(v4,this).isPerformingUndoRedo())return;let i=v0(v3,this).getIndexesSequence();if("update"===e&&i.length>0){let e;let n=v0(v6,this).map(t=>i.indexOf(t)),r=v0(v4,this).getEngine().getSheetDimensions(v0(v4,this).getSheetId());e="row"===v0(v5,this)?r.height:r.width;let o=n.length;for(let t=o;t<e;t+=1)n.push(t);v0(v4,this).getEngine()[t](v0(v4,this).getSheetId(),n)}v1(v6,this,i)}}init(){v1(v6,this,v0(v3,this).getIndexesSequence())}};function we(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function wi(t,e){return t.get(wr(t,e))}function wn(t,e,i){return t.set(wr(t,e),i),i}function wr(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var wo=new WeakMap,wa=new WeakMap,ws=new WeakMap,wl=new WeakMap,wh=new WeakMap,wu=new WeakMap,wc=new WeakMap,wd=class{constructor(t,e,i){we(this,wo,void 0),we(this,wa,void 0),we(this,ws,void 0),we(this,wl,!1),we(this,wh,!1),we(this,wu,null),we(this,wc,null),wn(wo,this,new wt("row",t,this)),wn(wa,this,new wt("column",e,this)),wn(ws,this,i)}getForAxis(t){return"row"===t?wi(wo,this):wi(wa,this)}setPerformUndo(t){wn(wl,this,t)}setPerformRedo(t){wn(wh,this,t)}isPerformingUndoRedo(){return wi(wl,this)||wi(wh,this)}getSheetId(){return wi(wc,this)}getEngine(){return wi(wu,this)}getPostponeAction(){return wi(ws,this)}setupSyncEndpoint(t,e){wn(wu,this,t),wn(wc,this,e),wi(wo,this).init(),wi(wa,this).init()}};function wp(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function wf(t,e,i){wg(t,e),e.set(t,i)}function wg(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function wm(t,e,i){return t.set(wv(t,e),i),i}function wy(t,e){return t.get(wv(t,e))}function wv(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const ww="formulas",wb=["maxRows","maxColumns","language"];(0,sa.default).getSingleton().register("afterNamedExpressionAdded"),(0,sa.default).getSingleton().register("afterNamedExpressionRemoved"),(0,sa.default).getSingleton().register("afterSheetAdded"),(0,sa.default).getSingleton().register("afterSheetRemoved"),(0,sa.default).getSingleton().register("afterSheetRenamed"),(0,sa.default).getSingleton().register("afterFormulasValuesUpdate");const wS=t=>"UndoRedo.undo"===t||"UndoRedo.redo"===t||"auto"===t;var wC=new WeakMap,w_=new WeakMap,wM=new WeakMap,wT=new WeakSet;function wI(t,e,i){let n=this.hot.propToCol(i);if(this.isFormulaCellType(e,n)){let t={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(n),sheet:this.sheetId},i=this.hot.getCellMeta(e,n),r=this.engine.getCellValue(t);return"date"===i.type&&(0,i0.isNumeric)(r)&&(r=vK(r,i.dateFormat)),"object"==typeof r&&null!==r?r.value:r}return t}function wR(t,e,n){let{row:r,col:o}=e.getTopStartCorner(),{row:a,col:s}=e.getBottomEndCorner(),{row:l,col:h}=n.getTopStartCorner(),{row:u,col:c}=n.getBottomEndCorner(),d={start:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(o),sheet:this.sheetId},end:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(a),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(s),sheet:this.sheetId}},p={start:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(l),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(h),sheet:this.sheetId},end:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(u),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(c),sheet:this.sheetId}};if(!1===this.engine.isItPossibleToSetCellContents(p))return!1;let f=this.engine.getFillRangeData(d,p),{row:g,col:m}=d.start,{row:y,col:w}=d.end,b=y-g+1,x=w-m+1;for(let t=0;t<f.length;t+=1)for(let e=0;e<f[t].length;e+=1){let n=f[t][e],r=g+t%b,o=m+e%x,a=this.hot.getCellMeta(r,o);if(v$(n,a.type)){if(n.startsWith("'"))f[t][e]=n.slice(1);else if(!1===this.isFormulaCellType(r,o,this.sheetId)){var S;f[t][e]=(S=a.dateFormat,i(cr)(n,vY,!0).format(S))}}}return f}function wE(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";i.includes((0,iJ.toUpperCaseFirst)(ww))||wm(w_,this,(0,eX.isUndefined)(this.hot.getSettings().data))}function wA(){let t=this.hot.getSourceDataArray(),e=!1;t.forEach((i,n)=>{i.forEach((i,r)=>{let o=this.hot.getCellMeta(n,r),a=o.dateFormat;v$(i,o.type)&&(e=!0,vZ(i,a)?t[n][r]=vq(i,a):!1===this.isFormulaCellType(n,r)&&(t[n][r]=`'${i}`))})}),!0===e&&(wm(wC,this,!0),this.engine.setSheetContent(this.sheetId,t),wm(wC,this,!1))}function wk(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!i.includes((0,iJ.toUpperCaseFirst)(ww))){var n,r;if(this.sheetName=(n=this.engine,r=this.hot.getSettings()[ww].sheetName,((0,eX.isUndefined)(r)||!n.doesSheetExist(r))&&(r=n.addSheet(r)),r),wy(w_,this))this.switchSheet(this.sheetName);else{let t=this.hot.getSourceDataArray();if(this.engine.isItPossibleToReplaceSheetContent(this.sheetId,t)){wm(wC,this,!0);let e=this.engine.setSheetContent(this.sheetId,t);this.indexSyncer.setupSyncEndpoint(this.engine,this.sheetId),this.renderDependentSheets(e),wm(wC,this,!1)}}}}function wD(t,e,i,n){if("get"!==n||wy(wC,this)||null===this.sheetName||!this.engine.doesSheetExist(this.sheetName))return;let r=this.hot.toVisualRow(t);if(null===r||null===e)return;if(!this.isFormulaCellType(r,e)&&"ARRAY"!==this.getCellType(r,e)){if(vX(i.value)){var o;i.value=vX(o=i.value)?o.substr(1):o}return}let a={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(e),sheet:this.sheetId},s=this.engine.getCellValue(a),l=this.hot.getCellsMeta().find(t=>t.visualRow===r&&t.visualCol===e);void 0===l&&(l={}),"date"===l.type&&(0,i0.isNumeric)(s)&&(s=vK(s,l.dateFormat));let h="object"==typeof s&&null!==s?s.value:s;i.value=h}function wO(t,e,i,n){if("get"!==n||wy(wC,this)||null===this.sheetName||!this.engine.doesSheetExist(this.sheetName))return;let r=this.hot.toVisualRow(t),o=this.hot.propToCol(e);if(null===r||null===o||!this.isFormulaCellType(r,o)&&"ARRAY"!==this.getCellType(r,o))return;let a=this.engine.getSheetDimensions(this.engine.getSheetId(this.sheetName));if(0===a.width&&0===a.height)return;let s={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(o),sheet:this.sheetId};i.value=this.engine.getCellSerialized(s)}function wP(t,e){if(wS(e))return;let i=[],n=[],r=this.engine.batch(()=>{t.forEach(t=>{let[e,r,,o]=t,a=this.hot.propToCol(r),s=this.hot.toPhysicalRow(e),l=this.hot.toPhysicalColumn(a),h={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(a),sheet:this.sheetId};null!==s&&null!==l?this.syncChangeWithEngine(e,a,o):i.push([e,a,o]),n.push({address:h})})});i.length&&this.hot.addHookOnce("afterChange",()=>{let t=this.engine.batch(()=>{i.forEach(t=>{let[e,i,n]=t;this.syncChangeWithEngine(e,i,n)})});this.renderDependentSheets(t,!0)}),this.renderDependentSheets(r),this.validateDependentCells(r,n)}function wL(t,e){if(wS(e))return;let i=[],n=[];t.forEach(t=>{let[e,r,,o]=t,a=this.hot.propToCol(r);if(!(0,i0.isNumeric)(a))return;let s={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(a),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(s)){(0,e8.warn)(`Not possible to set source cell data at ${JSON.stringify(s)}`);return}n.push({address:s}),i.push(...this.engine.setCellContents(s,o))}),this.renderDependentSheets(i),this.validateDependentCells(i,n)}function wN(t,e){let i=this.rowAxisSyncer.getHfIndexFromVisualIndex(t);if(t>=this.hot.countRows()&&(i=t),null===this.sheetId||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddRows(this.sheetId,[i,e]))return!1}function wH(t,e){let i=this.columnAxisSyncer.getHfIndexFromVisualIndex(t);if(t>=this.hot.countCols()&&(i=t),null===this.sheetId||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddColumns(this.sheetId,[i,e]))return!1}function wV(t,e,i){return!1!==this.rowAxisSyncer.setRemovedHfIndexes(i).every(t=>this.engine.isItPossibleToRemoveRows(this.sheetId,[t,1]))&&void 0}function wB(t,e,i){return!1!==this.columnAxisSyncer.setRemovedHfIndexes(i).every(t=>this.engine.isItPossibleToRemoveColumns(this.sheetId,[t,1]))&&void 0}function wF(t,e,i){if(wS(i))return;let n=this.engine.addRows(this.sheetId,[this.rowAxisSyncer.getHfIndexFromVisualIndex(t),e]);this.renderDependentSheets(n)}function wW(t,e,i){if(wS(i))return;let n=this.engine.addColumns(this.sheetId,[this.columnAxisSyncer.getHfIndexFromVisualIndex(t),e]);this.renderDependentSheets(n)}function wz(t,e,i,n){if(wS(n))return;let r=this.rowAxisSyncer.getRemovedHfIndexes().sort((t,e)=>e-t),o=this.engine.batch(()=>{r.forEach(t=>{this.engine.removeRows(this.sheetId,[t,1])})});this.renderDependentSheets(o)}function wj(t,e,i,n){if(wS(n))return;let r=this.columnAxisSyncer.getRemovedHfIndexes().sort((t,e)=>e-t),o=this.engine.batch(()=>{r.forEach(t=>{this.engine.removeColumns(this.sheetId,[t,1])})});this.renderDependentSheets(o)}function wU(t,e,i){var n;wm(wC,this,!0);let r=this.hot.getSourceDataArray(i,0,i+((null===(n=e.__children)||void 0===n?void 0:n.length)||0),this.hot.countSourceCols());wm(wC,this,!1),r.forEach((t,e)=>{t.forEach((t,n)=>{this.engine.setCellContents({col:n,row:i+e,sheet:this.sheetId},[[t]])})})}function wG(t){this.hot.runHooks("afterFormulasValuesUpdate",t)}function wY(t,e){this.hot.runHooks("afterNamedExpressionAdded",t,e)}function wX(t,e){this.hot.runHooks("afterNamedExpressionRemoved",t,e)}function w$(t){this.hot.runHooks("afterSheetAdded",t)}function wZ(t,e){this.sheetName=e,this.hot.runHooks("afterSheetRenamed",t,e)}function wq(t,e){this.hot.runHooks("afterSheetRemoved",t,e)}t4("1C6fS"),t4("1hIp0"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var eG=t4("gFbQZ"),i0=t4("guO5N"),iy=t4("ceXML"),e6=t4("hwT6B"),eX=t4("gnaTS"),sa=t4("10euP");t4("1hIp0"),t4("1hIp0");var iy=t4("ceXML");function wK(t,e,i){wQ(t,e),e.set(t,i)}function wQ(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function wJ(t,e){return t.get(w1(t,e))}function w0(t,e,i){return t.set(w1(t,e),i),i}function w1(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(0,sa.default).getSingleton().register("beforeHideColumns"),(0,sa.default).getSingleton().register("afterHideColumns"),(0,sa.default).getSingleton().register("beforeUnhideColumns"),(0,sa.default).getSingleton().register("afterUnhideColumns");const w2="hiddenColumns";var w5=new WeakMap,w3=new WeakMap,w4=new WeakSet;function w6(t,e){return this.isHidden(e)?0:wJ(w5,this).indicators&&(this.isHidden(e+1)||this.isHidden(e-1))&&"number"==typeof t&&this.hot.hasColHeaders()?t+15:void 0}function w8(t,e,i){if(!1===wJ(w5,this).copyPasteEnabled&&this.isHidden(e)&&(i.skipColumnOnPaste=!0),this.isHidden(e-1))i.className=i.className||"",-1===i.className.indexOf("afterHiddenColumn")&&(i.className+=" afterHiddenColumn");else if(i.className){let t=i.className.split(" ");if(t.length>0){let e=t.indexOf("afterHiddenColumn");e>-1&&t.splice(e,1),i.className=t.join(" ")}}}function w9(t){if(wJ(w5,this).copyPasteEnabled)return t;let e=[],i=(t,i,n,r)=>{e.push({startRow:t,endRow:i,startCol:n,endCol:r})};return(0,iy.arrayEach)(t,t=>{let e=!0,n=0;(0,i0.rangeEach)(t.startCol,t.endCol,r=>{this.isHidden(r)?(e||i(t.startRow,t.endRow,n,r-1),e=!0):(e&&(n=r),r===t.endCol&&i(t.startRow,t.endRow,n,r),e=!1)})}),e}function w7(t,e){if(!wJ(w5,this).indicators||t<0)return;let i=[];t>=1&&this.isHidden(t-1)&&i.push("afterHiddenColumn"),t<this.hot.countCols()-1&&this.isHidden(t+1)&&i.push("beforeHiddenColumn"),(0,eG.addClass)(e,i)}function bt(t){var e;t.items.push({name:pj},(e=this,{key:"hidden_columns_hide",name(){let t=this.getSelectedLast(),e=0;if(Array.isArray(t)){let[,i,,n]=t;i-n!=0&&(e=1)}return this.getTranslatedPhrase(sJ,e)},callback(){let{from:t,to:i}=this.getSelectedRangeLast(),n=Math.max(Math.min(t.col,i.col),0),r=Math.max(t.col,i.col),o=[];for(let t=n;t<=r;t+=1)o.push(t);e.hideColumns(o);let a=o[o.length-1],s=this.columnIndexMapper.getNearestNotHiddenIndex(a,1,!0);Number.isInteger(s)&&s>=0?this.selectColumns(s):this.deselectCell(),this.render(),this.view.adjustElementsSize()},disabled:!1,hidden(){return!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())}}),function(t){let e=[];return{key:"hidden_columns_show",name(){let t=e.length>1?1:0;return this.getTranslatedPhrase(s0,t)},callback(){var i,n;if(0===e.length)return;let r=e[0],o=e[e.length-1];r=null!==(i=this.columnIndexMapper.getNearestNotHiddenIndex(r-1,-1))&&void 0!==i?i:0,o=null!==(n=this.columnIndexMapper.getNearestNotHiddenIndex(o+1,1))&&void 0!==n?n:this.countCols()-1,t.showColumns(e),this.render(),this.view.adjustElementsSize(),o-r+1!==this.countCols()&&this.selectColumns(r,o)},disabled:!1,hidden(){let i=(0,iy.arrayMap)(t.getHiddenColumns(),t=>this.toPhysicalColumn(t));if(!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())||i.length<1)return!0;e.length=0;let n=this.getSelectedRangeLast(),r=n.getTopStartCorner().col,o=n.getBottomEndCorner().col,a=this.columnIndexMapper,s=a.getRenderableFromVisualIndex(r),l=a.getRenderableFromVisualIndex(o),h=a.getNotTrimmedIndexes(),u=[];if(r!==o){if(o-r+1>l-s+1){let t=h.slice(r,o+1);u.push(...t.filter(t=>i.includes(t)))}}else if(0===s&&s<r)u.push(...h.slice(0,r));else if(null===s)u.push(...h.slice(0,this.countCols()));else{let t=this.countCols()-1;l===a.getRenderableFromVisualIndex(a.getNearestNotHiddenIndex(t,-1))&&t>o&&u.push(...h.slice(o+1))}return(0,iy.arrayEach)(u,t=>{e.push(this.toVisualColumn(t))}),0===e.length}}}(this))}function be(){Array.isArray(wJ(w5,this).columns)&&this.hideColumns(wJ(w5,this).columns)}t4("1C6fS"),t4("1hIp0"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var eG=t4("gFbQZ"),i0=t4("guO5N"),iy=t4("ceXML"),e6=t4("hwT6B"),eX=t4("gnaTS"),sa=t4("10euP");t4("1hIp0"),t4("1hIp0");var iy=t4("ceXML");function bi(t,e,i){bn(t,e),e.set(t,i)}function bn(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function br(t,e){return t.get(ba(t,e))}function bo(t,e,i){return t.set(ba(t,e),i),i}function ba(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(0,sa.default).getSingleton().register("beforeHideRows"),(0,sa.default).getSingleton().register("afterHideRows"),(0,sa.default).getSingleton().register("beforeUnhideRows"),(0,sa.default).getSingleton().register("afterUnhideRows");const bs="hiddenRows";var bl=new WeakMap,bh=new WeakMap,bu=new WeakSet;function bc(t,e){return this.isHidden(e)?0:t}function bd(t,e,i){if(!1===br(bl,this).copyPasteEnabled&&this.isHidden(t)&&(i.skipRowOnPaste=!0),this.isHidden(t-1))i.className=i.className||"",-1===i.className.indexOf("afterHiddenRow")&&(i.className+=" afterHiddenRow");else if(i.className){let t=i.className.split(" ");if(t.length>0){let e=t.indexOf("afterHiddenRow");e>-1&&t.splice(e,1),i.className=t.join(" ")}}}function bp(t){if(br(bl,this).copyPasteEnabled)return t;let e=[],i=(t,i,n,r)=>{e.push({startRow:t,endRow:i,startCol:n,endCol:r})};return(0,iy.arrayEach)(t,t=>{let e=!0,n=0;(0,i0.rangeEach)(t.startRow,t.endRow,r=>{this.isHidden(r)?(e||i(n,r-1,t.startCol,t.endCol),e=!0):(e&&(n=r),r===t.endRow&&i(n,r,t.startCol,t.endCol),e=!1)})}),e}function bf(t,e){if(!br(bl,this).indicators||t<0)return;let i=[];t>=1&&this.isHidden(t-1)&&i.push("afterHiddenRow"),t<this.hot.countRows()-1&&this.isHidden(t+1)&&i.push("beforeHiddenRow"),(0,eG.addClass)(e,i)}function bg(t){var e;t.items.push({name:pj},(e=this,{key:"hidden_rows_hide",name(){let t=this.getSelectedLast(),e=0;if(Array.isArray(t)){let[i,,n]=t;i-n!=0&&(e=1)}return this.getTranslatedPhrase(s1,e)},callback(){let{from:t,to:i}=this.getSelectedRangeLast(),n=Math.max(Math.min(t.row,i.row),0),r=Math.max(t.row,i.row),o=[];for(let t=n;t<=r;t+=1)o.push(t);e.hideRows(o);let a=o[o.length-1],s=this.rowIndexMapper.getNearestNotHiddenIndex(a,1,!0);Number.isInteger(s)&&s>=0?this.selectRows(s):this.deselectCell(),this.render(),this.view.adjustElementsSize()},disabled:!1,hidden(){return!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())}}),function(t){let e=[];return{key:"hidden_rows_show",name(){let t=e.length>1?1:0;return this.getTranslatedPhrase(s2,t)},callback(){var i,n;if(0===e.length)return;let r=e[0],o=e[e.length-1];r=null!==(i=this.rowIndexMapper.getNearestNotHiddenIndex(r-1,-1))&&void 0!==i?i:0,o=null!==(n=this.rowIndexMapper.getNearestNotHiddenIndex(o+1,1))&&void 0!==n?n:this.countRows()-1,t.showRows(e),this.render(),this.view.adjustElementsSize(),o-r+1!==this.countRows()&&this.selectRows(r,o)},disabled:!1,hidden(){let i=(0,iy.arrayMap)(t.getHiddenRows(),t=>this.toPhysicalRow(t));if(!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())||i.length<1)return!0;e.length=0;let n=this.getSelectedRangeLast(),r=n.getTopStartCorner().row,o=n.getBottomEndCorner().row,a=this.rowIndexMapper,s=a.getRenderableFromVisualIndex(r),l=a.getRenderableFromVisualIndex(o),h=a.getNotTrimmedIndexes(),u=[];if(r!==o){if(o-r+1>l-s+1){let t=h.slice(r,o+1);u.push(...t.filter(t=>i.includes(t)))}}else if(0===s&&s<r)u.push(...h.slice(0,r));else if(null===s)u.push(...h.slice(0,this.countRows()));else{let t=this.countRows()-1;l===a.getRenderableFromVisualIndex(a.getNearestNotHiddenIndex(t,-1))&&t>o&&u.push(...h.slice(o+1))}return(0,iy.arrayEach)(u,t=>{e.push(this.toVisualRow(t))}),0===e.length}}}(this))}function bm(){Array.isArray(br(bl,this).rows)&&this.hideRows(br(bl,this).rows)}t4("1C6fS"),t4("1hIp0");var sa=t4("10euP");function by(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function bv(t,e){return t.get(bb(t,e))}function bw(t,e,i){return t.set(bb(t,e),i),i}function bb(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(0,sa.default).getSingleton().register("beforeColumnFreeze"),(0,sa.default).getSingleton().register("afterColumnFreeze"),(0,sa.default).getSingleton().register("beforeColumnUnfreeze"),(0,sa.default).getSingleton().register("afterColumnUnfreeze");const bx="manualColumnFreeze";var bS=new WeakMap,bC=new WeakSet;function b_(t){var e,i;t.items.push({name:"---------"},(e=this,{key:"freeze_column",name(){return this.getTranslatedPhrase(sE)},callback(t,i){let[{start:{col:n}}]=i;e.freezeColumn(n),this.render(),this.view.adjustElementsSize()},hidden(){let t=this.getSelectedRange(),e=!1;return void 0===t?e=!0:t.length>1?e=!0:(t[0].from.col!==t[0].to.col||t[0].from.col<=this.getSettings().fixedColumnsStart-1)&&(e=!0),e}}),(i=this,{key:"unfreeze_column",name(){return this.getTranslatedPhrase(sA)},callback(t,e){let[{start:{col:n}}]=e;i.unfreezeColumn(n),this.render(),this.view.adjustElementsSize()},hidden(){let t=this.getSelectedRange(),e=!1;return void 0===t?e=!0:t.length>1?e=!0:(t[0].from.col!==t[0].to.col||t[0].from.col>=this.getSettings().fixedColumnsStart)&&(e=!0),e}}))}function bM(t,e){if(bv(bS,this)){let i=this.hot.getSettings().fixedColumnsStart;if(e<i||t.some(t=>t<i))return!1}}t4("1C6fS"),t4("1hIp0");var sa=t4("10euP"),iy=t4("ceXML"),eG=t4("gFbQZ"),eq=t4("7HxIw"),i0=t4("guO5N");t4("1C6fS");var i0=t4("guO5N"),iJ=t4("bO142");function bT(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var bI=class{constructor(t){bT(this,"hot",void 0),bT(this,"_element",null),bT(this,"state",0),bT(this,"inlineProperty",void 0),this.hot=t,this.inlineProperty=t.isRtl()?"right":"left"}appendTo(t){t.appendChild(this._element),this.state=2}build(){0===this.state&&(this._element=this.hot.rootDocument.createElement("div"),this.state=1)}destroy(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=0}isAppended(){return 2===this.state}isBuilt(){return this.state>=1}setPosition(t,e){(0,i0.isNumeric)(t)&&(this._element.style.top=t+"px"),(0,i0.isNumeric)(e)&&(this._element.style[this.inlineProperty]=e+"px")}getPosition(){let t=this._element.style;return{top:t.top?parseInt(t.top,10):0,start:t[this.inlineProperty]?parseInt(t[this.inlineProperty],10):0}}setSize(t,e){(0,i0.isNumeric)(t)&&(this._element.style.width=t+"px"),(0,i0.isNumeric)(e)&&(this._element.style.height=e+"px")}getSize(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}setOffset(t,e){(0,i0.isNumeric)(t)&&(this._element.style.marginTop=t+"px"),(0,i0.isNumeric)(e)&&(this._element.style[`margin${(0,iJ.toUpperCaseFirst)(this.inlineProperty)}`]=e+"px")}getOffset(){let t=this._element.style,e=`margin${(0,iJ.toUpperCaseFirst)(this.inlineProperty)}`;return{top:t.marginTop?parseInt(t.marginTop,10):0,start:t[e]?parseInt(t[e],10):0}}},eG=t4("gFbQZ"),bR=class extends bI{build(){super.build(),(0,eG.addClass)(this._element,"ht__manualColumnMove--backlight")}},eG=t4("gFbQZ"),bE=class extends bI{build(){super.build(),(0,eG.addClass)(this._element,"ht__manualColumnMove--guideline")}};function bA(t,e,i){bk(t,e),e.set(t,i)}function bk(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function bD(t,e,i){return t.set(bP(t,e),i),i}function bO(t,e){return t.get(bP(t,e))}function bP(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(0,sa.default).getSingleton().register("beforeColumnMove"),(0,sa.default).getSingleton().register("afterColumnMove");const bL="manualColumnMove",bN="ht__manualColumnMove",bH="show-ui",bV="on-moving--columns",bB="after-selection--columns";var bF=new WeakMap,bW=new WeakMap,bz=new WeakMap,bj=new WeakMap,bU=new WeakMap,bG=new WeakMap,bY=new WeakMap,bX=new WeakMap,b$=new WeakMap,bZ=new WeakMap,bq=new WeakMap,bK=new WeakSet;function bQ(t,e,i,n){let r=this.hot.view._wt.wtTable,o=this.hot.selection.isSelectedByColumnHeader(),a=this.hot.getSelectedRangeLast(),s=(0,eG.hasClass)(t.target,"sortAction");if(!a||!o||bO(bU,this)||0!==t.button||s){bD(bU,this,!1),bO(bz,this).length=0,(0,eG.removeClass)(this.hot.rootElement,[bV,bH]);return}let l=bO(bW,this).isBuilt()&&!bO(bW,this).isAppended(),h=bO(bF,this).isBuilt()&&!bO(bF,this).isAppended();l&&h&&(bO(bW,this).appendTo(r.hider),bO(bF,this).appendTo(r.hider));let{from:u,to:c}=a,d=Math.min(u.col,c.col),p=Math.max(u.col,c.col);if(e.row<0&&e.col>=d&&e.col<=p){n.column=!0,bD(bU,this,!0);let o=i.firstChild?(0,eq.offsetRelativeTo)(t,i.firstChild).x:t.offsetX;bO(bG,this).eventPageX=t.pageX,bD(bX,this,e.col),bO(bG,this).TD=i,bO(bG,this).col=e.col,bD(bz,this,this.prepareColumnsToMoving(d,p)),bD(bZ,this,!!this.hot.getSettings().rowHeaders),bD(bj,this,this.hot.countCols()),bD(bq,this,this.hot.getSettings().fixedColumnsStart),bD(b$,this,(0,eG.offset)(this.hot.rootElement).left);let a=bO(bZ,this)?-1:0,s=r.holder.scrollTop+r.getColumnHeaderHeight(0)+1,l=e.col<bO(bq,this),h=this.hot.view._wt.wtOverlays.inlineStartOverlay.getOverlayOffset(),u=Math.abs(o-(this.hot.isRtl()?i.offsetWidth:0)),c=this.getColumnsWidth(d,e.col-1)+u,f=this.getColumnsWidth(a,d-1)+(l?h:0)+c;bO(bF,this).setPosition(s,f),bO(bF,this).setSize(this.getColumnsWidth(d,p),r.hider.offsetHeight-s),bO(bF,this).setOffset(null,-c),(0,eG.addClass)(this.hot.rootElement,bV)}else(0,eG.removeClass)(this.hot.rootElement,bB),bD(bU,this,!1),bO(bz,this).length=0}function bJ(t){bO(bU,this)&&(bO(bG,this).eventPageX=t.pageX,this.refreshPositions())}function b0(t,e,i,n){this.hot.getSelectedRangeLast()&&bO(bU,this)&&(bO(bz,this).indexOf(e.col)>-1?(0,eG.removeClass)(this.hot.rootElement,bH):(0,eG.addClass)(this.hot.rootElement,bH),n.row=!0,n.column=!0,n.cell=!0,bD(bX,this,e.col),bO(bG,this).TD=i)}function b1(){let t=bO(bG,this).col,e=bO(bz,this).length;if(bD(bX,this,void 0),bD(bU,this,!1),(0,eG.removeClass)(this.hot.rootElement,[bV,bH,bB]),this.hot.selection.isSelectedByColumnHeader()&&(0,eG.addClass)(this.hot.rootElement,bB),e<1||void 0===t)return;let i=bO(bz,this)[0],n=this.hot.toPhysicalColumn(i),r=this.dragColumns(bO(bz,this),t);if(bO(bz,this).length=0,!0===r){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize();let t=this.hot.toVisualColumn(n);this.hot.selectColumns(t,t+e-1)}}function b2(){let t=this.hot.view._wt.wtTable,e=t.getColumnHeaderHeight(0)+1+t.holder.scrollTop;bO(bF,this).setPosition(e),bO(bF,this).setSize(null,t.hider.offsetHeight-e)}function b5(){this.moveBySettingsOrLoad()}t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),iy=t4("ceXML"),i0=t4("guO5N");function b3(t,e,i){b4(t,e),e.set(t,i)}function b4(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function b6(t,e,i){return t.set(b9(t,e),i),i}function b8(t,e){return t.get(b9(t,e))}function b9(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const b7="manualColumnResize",xt="manualColumnWidths";var xe=new WeakMap,xi=new WeakMap,xn=new WeakMap,xr=new WeakMap,xo=new WeakMap,xa=new WeakMap,xs=new WeakMap,xl=new WeakMap,xh=new WeakMap,xu=new WeakMap,xc=new WeakMap,xd=new WeakMap,xp=new WeakMap,xf=new WeakMap,xg=new WeakMap,xm=new WeakMap,xy=new WeakSet;function xv(){let t=this.hot.getSettings()[b7],e=this.loadManualColumnWidths();void 0!==e?this.hot.batchExecution(()=>{e.forEach((t,e)=>{b8(xg,this).setValueAtIndex(e,t)})},!0):Array.isArray(t)?(this.hot.batchExecution(()=>{t.forEach((t,e)=>{b8(xg,this).setValueAtIndex(e,t)})},!0),b6(xm,this,t)):!0===t&&Array.isArray(b8(xm,this))&&this.hot.batchExecution(()=>{b8(xm,this).forEach((t,e)=>{b8(xg,this).setValueAtIndex(e,t)})},!0)}function xw(t){if(!(0,eG.isDetached)(t.target)&&!0!==b8(xd,this)&&this.checkIfColumnHeader(t.target)){let e=this.getClosestTHParent(t.target);if(!e)return;let i=e.getAttribute("colspan");e&&(null===i||"1"===i)&&!b8(xc,this)&&this.setupHandlePosition(e)}}function xb(t){t.target.parentNode===this.hot.rootElement&&(0,eG.hasClass)(t.target,"manualColumnResizer")&&(this.setupHandlePosition(b8(xe,this)),this.setupGuidePosition(),b6(xc,this,!0),null===b8(xf,this)&&(b6(xf,this,setTimeout(()=>this.afterMouseDownTimeout(),500)),this.hot._registerTimeout(b8(xf,this))),b6(xp,this,b8(xp,this)+1),this.startX=t.pageX,b6(xo,this,b8(xs,this)))}function xx(t){if(b8(xc,this)){let e=(t.pageX-this.startX)*this.hot.getDirectionFactor();b6(xr,this,b8(xs,this)+e),(0,iy.arrayEach)(b8(xn,this),t=>{b6(xo,this,this.setManualSize(t,b8(xr,this)))}),this.refreshHandlePosition(),this.refreshGuidePosition()}}function xS(){let t=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(e,i)=>{this.hot.runHooks("beforeColumnResize",b8(xo,this),e,!1),i&&t(),this.saveManualColumnWidths(),this.hot.runHooks("afterColumnResize",b8(xo,this),e,!1)};b8(xc,this)&&(this.hideHandleAndGuide(),b6(xc,this,!1),b8(xo,this)!==b8(xs,this)&&(b8(xn,this).length>1?((0,iy.arrayEach)(b8(xn,this),t=>{e(t)}),t()):(0,iy.arrayEach)(b8(xn,this),t=>{e(t,!0)})),this.setupHandlePosition(b8(xe,this)))}function xC(){this.hideHandleAndGuide(),this.hot.rootElement.removeChild(b8(xh,this)),this.hot.rootElement.removeChild(b8(xu,this)),b6(xc,this,!1),b6(xd,this,!0),this.hot._registerImmediate(()=>{b6(xd,this,!1)})}function x_(t,e){let i=t;if(this.enabled){let t=this.hot.toPhysicalColumn(e),n=b8(xg,this).getValueAtIndex(t);this.hot.getSettings()[b7]&&n&&(i=n)}return i}function xM(t,e){let i=b8(xg,this).getValueAtIndex(e);return null===i&&(i=t),i}function xT(){this.hot.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked()}t4("1C6fS"),t4("1hIp0");var sa=t4("10euP"),iy=t4("ceXML"),eG=t4("gFbQZ"),i0=t4("guO5N");function xI(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS");var xR=class{constructor(t){xI(this,"hot",void 0),xI(this,"_element",null),xI(this,"state",0),this.hot=t}appendTo(t){t.appendChild(this._element),this.state=2}build(){0===this.state&&(this._element=this.hot.rootDocument.createElement("div"),this.state=1)}destroy(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=0}isAppended(){return 2===this.state}isBuilt(){return this.state>=1}setPosition(t,e){void 0!==t&&(this._element.style.top=t+"px"),void 0!==e&&(this._element.style.left=e+"px")}getPosition(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}setSize(t,e){t&&(this._element.style.width=t+"px"),e&&(this._element.style.height=e+"px")}getSize(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}setOffset(t,e){t&&(this._element.style.marginTop=t+"px"),e&&(this._element.style.marginLeft=e+"px")}getOffset(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}},eG=t4("gFbQZ"),xE=class extends xR{build(){super.build(),(0,eG.addClass)(this._element,"ht__manualRowMove--backlight")}},eG=t4("gFbQZ"),xA=class extends xR{build(){super.build(),(0,eG.addClass)(this._element,"ht__manualRowMove--guideline")}};function xk(t,e,i){xD(t,e),e.set(t,i)}function xD(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function xO(t,e,i){return t.set(xL(t,e),i),i}function xP(t,e){return t.get(xL(t,e))}function xL(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(0,sa.default).getSingleton().register("beforeRowMove"),(0,sa.default).getSingleton().register("afterRowMove");const xN="manualRowMove",xH="ht__manualRowMove",xV="show-ui",xB="on-moving--rows",xF="after-selection--rows";var xW=new WeakMap,xz=new WeakMap,xj=new WeakMap,xU=new WeakMap,xG=new WeakMap,xY=new WeakMap,xX=new WeakSet;function x$(t,e,i,n){let{wtTable:r,wtViewport:o}=this.hot.view._wt,a=this.hot.selection.isSelectedByRowHeader(),s=this.hot.getSelectedRangeLast();if(!s||!a||xP(xU,this)||0!==t.button){xO(xU,this,!1),xP(xj,this).length=0,(0,eG.removeClass)(this.hot.rootElement,[xB,xV]);return}let l=xP(xz,this).isBuilt()&&!xP(xz,this).isAppended(),h=xP(xW,this).isBuilt()&&!xP(xW,this).isAppended();l&&h&&(xP(xz,this).appendTo(r.hider),xP(xW,this).appendTo(r.hider));let{from:u,to:c}=s,d=Math.min(u.row,c.row),p=Math.max(u.row,c.row);if(e.col<0&&e.row>=d&&e.row<=p){n.row=!0,xO(xU,this,!0),xP(xG,this).eventPageY=t.pageY,xP(xG,this).coords=e,xP(xG,this).TD=i,xO(xj,this,this.prepareRowsToMoving());let a=r.holder.scrollLeft+o.getRowHeaderWidth(),s=this.getRowsHeight(d,e.row-1)+t.offsetY;xP(xW,this).setPosition(null,a),xP(xW,this).setSize(r.hider.offsetWidth-a,this.getRowsHeight(d,p)),xP(xW,this).setOffset(-s,null),(0,eG.addClass)(this.hot.rootElement,xB),this.refreshPositions()}else(0,eG.removeClass)(this.hot.rootElement,xF),xO(xU,this,!1),xP(xj,this).length=0}function xZ(t){xP(xU,this)&&(xP(xG,this).eventPageY=t.pageY,this.refreshPositions())}function xq(t,e,i,n){this.hot.getSelectedRangeLast()&&xP(xU,this)&&(xP(xj,this).indexOf(e.row)>-1?(0,eG.removeClass)(this.hot.rootElement,xV):(0,eG.addClass)(this.hot.rootElement,xV),n.row=!0,n.column=!0,n.cell=!0,xP(xG,this).coords=e,xP(xG,this).TD=i)}function xK(){let t=xP(xG,this).row,e=xP(xj,this).length;if(xO(xU,this,!1),(0,eG.removeClass)(this.hot.rootElement,[xB,xV,xF]),this.hot.selection.isSelectedByRowHeader()&&(0,eG.addClass)(this.hot.rootElement,xF),e<1||void 0===t)return;let i=xP(xj,this)[0],n=this.hot.toPhysicalRow(i),r=this.dragRows(xP(xj,this),t);if(xP(xj,this).length=0,!0===r){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize();let t=this.hot.toVisualRow(n);this.hot.selectRows(t,t+e-1)}}function xQ(){let t=this.hot.view._wt.wtTable,e=this.hot.view._wt.wtViewport.getRowHeaderWidth()+t.holder.scrollLeft;xP(xW,this).setPosition(null,e),xP(xW,this).setSize(t.hider.offsetWidth-e)}function xJ(){this.moveBySettingsOrLoad()}t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),iy=t4("ceXML"),i0=t4("guO5N");function x0(t,e,i){x1(t,e),e.set(t,i)}function x1(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function x2(t,e,i){return t.set(x3(t,e),i),i}function x5(t,e){return t.get(x3(t,e))}function x3(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const x4="manualRowResize",x6="manualRowHeights";var x8=new WeakMap,x9=new WeakMap,x7=new WeakMap,St=new WeakMap,Se=new WeakMap,Si=new WeakMap,Sn=new WeakMap,Sr=new WeakMap,So=new WeakMap,Sa=new WeakMap,Ss=new WeakMap,Sl=new WeakMap,Sh=new WeakMap,Su=new WeakMap,Sc=new WeakMap,Sd=new WeakMap,Sp=new WeakSet;function Sf(t){if(!(0,eG.isDetached)(t.target)&&!0!==x5(Sl,this)&&this.checkIfRowHeader(t.target)){let e=this.getClosestTHParent(t.target);e&&!x5(Ss,this)&&this.setupHandlePosition(e)}}function Sg(t){(0,eG.hasClass)(t.target,"manualRowResizer")&&(this.setupHandlePosition(x5(x8,this)),this.setupGuidePosition(),x2(Ss,this,!0),null===x5(Su,this)&&(x2(Su,this,setTimeout(()=>this.afterMouseDownTimeout(),500)),this.hot._registerTimeout(x5(Su,this))),x2(Sh,this,x5(Sh,this)+1),x2(Si,this,t.pageY),x2(Se,this,x5(Sn,this)))}function Sm(t){x5(Ss,this)&&(x2(St,this,x5(Sn,this)+(t.pageY-x5(Si,this))),(0,iy.arrayEach)(x5(x7,this),t=>{x2(Se,this,this.setManualSize(t,x5(St,this)))}),this.refreshHandlePosition(),this.refreshGuidePosition())}function Sy(){let t=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(e,i)=>{this.hot.runHooks("beforeRowResize",this.getActualRowHeight(e),e,!1),i&&t(),this.saveManualRowHeights(),this.hot.runHooks("afterRowResize",this.getActualRowHeight(e),e,!1)};x5(Ss,this)&&(this.hideHandleAndGuide(),x2(Ss,this,!1),x5(Se,this)!==x5(Sn,this)&&(x5(x7,this).length>1?((0,iy.arrayEach)(x5(x7,this),t=>{e(t)}),t()):(0,iy.arrayEach)(x5(x7,this),t=>{e(t,!0)})),this.setupHandlePosition(x5(x8,this)))}function Sv(){this.hideHandleAndGuide(),this.hot.rootElement.removeChild(x5(So,this)),this.hot.rootElement.removeChild(x5(Sa,this)),x2(Ss,this,!1),x2(Sl,this,!0),this.hot._registerImmediate(()=>{x2(Sl,this,!1)})}function Sw(t,e){let i=t;if(this.enabled){let t=this.hot.toPhysicalRow(e),n=x5(Sc,this).getValueAtIndex(t);this.hot.getSettings()[x4]&&n&&(i=n)}return i}function Sb(){let t=this.hot.getSettings()[x4],e=this.loadManualRowHeights();this.hot.batchExecution(()=>{void 0!==e?e.forEach((t,e)=>{x5(Sc,this).setValueAtIndex(e,t)}):Array.isArray(t)?(t.forEach((t,e)=>{x5(Sc,this).setValueAtIndex(e,t)}),x2(Sd,this,t)):!0===t&&Array.isArray(x5(Sd,this))&&x5(Sd,this).forEach((t,e)=>{x5(Sc,this).setValueAtIndex(e,t)})},!0)}t4("1C6fS"),t4("1hIp0"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var sa=t4("10euP");t4("1C6fS"),t4("1hIp0"),t4("6u6Md"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI"),t4("1C6fS");var nJ=t4("iCsRe");function Sx(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function SS(t,e,i){return t.set(SC(t,e),i),i}function SC(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var S_=new WeakMap,SM=class{constructor(t,e,i,n,r,o){Sx(this,"row",void 0),Sx(this,"col",void 0),Sx(this,"rowspan",void 0),Sx(this,"colspan",void 0),Sx(this,"removed",!1),Sx(this,"cellCoordsFactory",void 0),Sx(this,"cellRangeFactory",void 0),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,S_),S_.set(this,null),this.row=t,this.col=e,this.rowspan=i,this.colspan=n,this.cellCoordsFactory=r,this.cellRangeFactory=o}static NEGATIVE_VALUES_WARNING(t){let{row:e,col:i,rowspan:n,colspan:r}=t;return(0,nJ.toSingleLine)`The merged cell declared with {row: ${e}, col: ${i},\x20
      rowspan: ${n}, colspan: ${r}} contains negative values, which is\x20
      not supported. It will not be added to the collection.`}static IS_OUT_OF_BOUNDS_WARNING(t){let{row:e,col:i}=t;return(0,nJ.toSingleLine)`The merged cell declared at [${e}, ${i}] is positioned\x20
      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup.`}static IS_SINGLE_CELL(t){let{row:e,col:i}=t;return(0,nJ.toSingleLine)`The merged cell declared at [${e}, ${i}] has both "rowspan"\x20
      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.`}static ZERO_SPAN_WARNING(t){let{row:e,col:i}=t;return(0,nJ.toSingleLine)`The merged cell declared at [${e}, ${i}] has "rowspan"\x20
      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.`}static containsNegativeValues(t){let{row:e,col:i,rowspan:n,colspan:r}=t;return e<0||i<0||n<0||r<0}static isSingleCell(t){let{rowspan:e,colspan:i}=t;return 1===i&&1===e}static containsZeroSpan(t){let{rowspan:e,colspan:i}=t;return 0===i||0===e}static isOutOfBounds(t,e,i){return t.row<0||t.col<0||t.row>=e||t.row+t.rowspan-1>=e||t.col>=i||t.col+t.colspan-1>=i}normalize(t){let e=t.countRows(),i=t.countCols();this.row<0?this.row=0:this.row>e-1&&(this.row=e-1),this.col<0?this.col=0:this.col>i-1&&(this.col=i-1),this.row+this.rowspan>e-1&&(this.rowspan=e-this.row),this.col+this.colspan>i-1&&(this.colspan=i-this.col),SS(S_,this,null)}includes(t,e){return this.row<=t&&this.col<=e&&this.row+this.rowspan-1>=t&&this.col+this.colspan-1>=e}includesHorizontally(t){return this.col<=t&&this.col+this.colspan-1>=t}includesVertically(t){return this.row<=t&&this.row+this.rowspan-1>=t}shift(t,e){let i=t[0]||t[1],n=e+Math.abs(t[0]||t[1])-1,r=t[0]?"colspan":"rowspan",o=t[0]?"col":"row",a=Math.min(e,n),s=Math.max(e,n),l=this[o],h=this[o]+this[r]-1;if(l>=e&&(this[o]+=i),i>0)e<=h&&e>l&&(this[r]+=i);else if(i<0){if(a<=l&&s>=h)return this.removed=!0,SS(S_,this,null),!1;if(l>=a&&l<=s){let t=s-l+1;this[o]-=Math.abs(i)-t+i,this[r]-=t}else l<=a&&h>=s?this[r]+=i:l<=a&&h>=a&&h<s&&(this[r]-=h-a+1)}return SS(S_,this,null),!0}isFarther(t,e){return!t||("down"===e?t.row+t.rowspan-1<this.row+this.rowspan-1:"up"===e?t.row>this.row:"right"===e?t.col+t.colspan-1<this.col+this.colspan-1:"left"===e?t.col>this.col:null)}getLastRow(){return this.row+this.rowspan-1}getLastColumn(){return this.col+this.colspan-1}getRange(){return S_.get(SC(S_,this))||SS(S_,this,this.cellRangeFactory(this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.getLastRow(),this.getLastColumn()))),S_.get(SC(S_,this))}},i0=t4("guO5N"),e8=t4("jlXkd"),iy=t4("ceXML"),nJ=t4("iCsRe");function ST(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function SI(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var SR=new WeakSet;class SE{constructor(t){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(this,SR),SR.add(this),ST(this,"plugin",void 0),ST(this,"mergedCells",[]),ST(this,"mergedCellsMatrix",new Map),ST(this,"hot",void 0),this.plugin=t,this.hot=t.hot}static IS_OVERLAPPING_WARNING(t){let{row:e,col:i}=t;return(0,nJ.toSingleLine)`The merged cell declared at [${e}, ${i}], overlaps\x20
      with the other declared merged cell. The overlapping merged cell was not added to the table, please\x20
      fix your setup.`}get(t,e){var i;return!!this.mergedCellsMatrix.has(t)&&null!==(i=this.mergedCellsMatrix.get(t).get(e))&&void 0!==i&&i}getByRange(t){let e=!1;return(0,iy.arrayEach)(this.mergedCells,i=>!(i.row<=t.from.row)||!(i.row+i.rowspan-1>=t.to.row)||!(i.col<=t.from.col)||!(i.col+i.colspan-1>=t.to.col)||(e=i)),e}filterOverlappingMergeCells(t){let e=new Set;return this.mergedCells.forEach(t=>{let{row:i,col:n,colspan:r,rowspan:o}=t;for(let t=i;t<i+o;t++)for(let i=n;i<n+r;i++)e.add(`r${t},c${i}`)}),t.filter(t=>{let{row:i,col:n,colspan:r,rowspan:o}=t,a=new Set,s=!1;for(let l=i;l<i+o;l++){for(let i=n;i<n+r;i++){let n=`r${l},c${i}`;if(e.has(n)){(0,e8.warn)(SE.IS_OVERLAPPING_WARNING(t)),s=!0;break}a.add(n)}if(s)break}return s||e.add(...a),!s})}getWithinRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{row:i,col:n}=t.getTopStartCorner(),{row:r,col:o}=t.getBottomEndCorner(),a=[];for(let t=i;t<=r;t++)for(let i=n;i<=o;i++){let n=this.get(t,i);n&&(e||!e&&n.row===t&&n.col===i)&&a.push(n)}return a}add(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.row,n=t.col,r=new SM(i,n,t.rowspan,t.colspan,this.hot._createCellCoords,this.hot._createCellRange),o=this.get(i,n),a=!e&&this.isOverlapping(r);return o||a?((0,e8.warn)(SE.IS_OVERLAPPING_WARNING(r)),!1):(this.hot&&r.normalize(this.hot),this.mergedCells.push(r),SI(SR,this,Sk).call(this,r),r)}remove(t,e){let i=this.get(t,e),n=i?this.mergedCells.indexOf(i):-1;return!!i&&-1!==n&&(this.mergedCells.splice(n,1),SI(SR,this,SD).call(this,i),i)}clear(){(0,iy.arrayEach)(this.mergedCells,t=>{let{row:e,col:i,rowspan:n,colspan:r}=t;(0,i0.rangeEach)(e,e+n,t=>{(0,i0.rangeEach)(i,i+r,e=>{let i=this.hot.getCell(t,e);i&&(i.removeAttribute("rowspan"),i.removeAttribute("colspan"),i.style.display="")})})}),this.mergedCells.length=0,this.mergedCellsMatrix=new Map}isOverlapping(t){let e=t.getRange();for(let t=0;t<this.mergedCells.length;t++)if(this.mergedCells[t].getRange().overlaps(e))return!0;return!1}isFirstRenderableMergedCell(t,e){let i=this.get(t,e);return i&&this.hot.rowIndexMapper.getNearestNotHiddenIndex(i.row,1)===t&&this.hot.columnIndexMapper.getNearestNotHiddenIndex(i.col,1)===e}getFirstRenderableCoords(t,e){let i=this.get(t,e);if(!i||this.isFirstRenderableMergedCell(t,e))return this.hot._createCellCoords(t,e);let n=this.hot.rowIndexMapper.getNearestNotHiddenIndex(i.row,1),r=this.hot.columnIndexMapper.getNearestNotHiddenIndex(i.col,1);return this.hot._createCellCoords(n,r)}getStartMostColumnIndex(t,e){let i=SI(SR,this,SA).call(this,t,"col",-1),n=e;for(let t=0;t<i.length;t++)if(i[t]<=e){n=i[t];break}return n}getEndMostColumnIndex(t,e){let i=SI(SR,this,SA).call(this,t,"col",1),n=e;for(let t=0;t<i.length;t++)if(i[t]>=e){n=i[t];break}return n}getTopMostRowIndex(t,e){let i=SI(SR,this,SA).call(this,t,"row",-1),n=e;for(let t=0;t<i.length;t++)if(i[t]<=e){n=i[t];break}return n}getBottomMostRowIndex(t,e){let i=SI(SR,this,SA).call(this,t,"row",1),n=e;for(let t=0;t<i.length;t++)if(i[t]>=e){n=i[t];break}return n}shiftCollections(t,e,i){let n=[0,0];switch(t){case"right":n[0]+=i;break;case"left":n[0]-=i;break;case"down":n[1]+=i;break;case"up":n[1]-=i}let r=[];this.mergedCells.forEach(t=>{t.shift(n,e),t.removed&&r.push(t)}),r.forEach(t=>{this.mergedCells.splice(this.mergedCells.indexOf(t),1)}),this.mergedCellsMatrix.clear(),this.mergedCells.forEach(t=>{SI(SR,this,Sk).call(this,t)})}}function SA(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Map,r=1===i?t.getTopStartCorner():t.getBottomEndCorner(),o=1===i?t.getBottomEndCorner():t.getTopStartCorner();for(let t=r.row;1===i?t<=o.row:t>=o.row;t+=i)for(let a=r.col;1===i?a<=o.col:a>=o.col;a+=i){let r="row"===e?t:a,o=this.get(t,a),s=r;o&&(s=1===i?o[e]+o[`${e}span`]-1:o[e]),n.has(r)||n.set(r,new Set),n.get(r).add(s)}return Array.from(new Set(Array.from(n.entries()).filter(t=>{let[,e]=t;return 1===e.size}).flatMap(t=>{let[,e]=t;return Array.from(e)})))}function Sk(t){for(let e=t.row;e<t.row+t.rowspan;e++)for(let i=t.col;i<t.col+t.colspan;i++)this.mergedCellsMatrix.has(e)||this.mergedCellsMatrix.set(e,new Map),this.mergedCellsMatrix.get(e).set(i,t)}function SD(t){for(let e=t.row;e<t.row+t.rowspan;e++)for(let i=t.col;i<t.col+t.colspan;i++)this.mergedCellsMatrix.get(e).delete(i)}t4("1C6fS");var e6=t4("hwT6B"),iy=t4("ceXML");function SO(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var SP=class{constructor(t){SO(this,"plugin",void 0),SO(this,"mergedCellsCollection",void 0),SO(this,"currentFillData",null),this.plugin=t,this.mergedCellsCollection=this.plugin.mergedCellsCollection}correctSelectionAreaSize(t){if(t[0]===t[2]&&t[1]===t[3]){let e=this.mergedCellsCollection.get(t[0],t[1]);e&&(t[2]=t[0]+e.rowspan-1,t[3]=t[1]+e.colspan-1)}}getDirection(t,e){return e[0]===t[0]&&e[1]===t[1]&&e[3]===t[3]?"down":e[2]===t[2]&&e[1]===t[1]&&e[3]===t[3]?"up":e[1]===t[1]&&e[2]===t[2]?"right":"left"}snapDragArea(t,e,i,n){let r=e.slice(0),o=this.getAutofillSize(t,e,i),[a,s,l,h]=t,u=["up","down"].indexOf(i)>-1?l-a+1:h-s+1,c=Math.floor(o/u)*u,d=o-c,p=this.getFarthestCollection(t,e,i,n);if(p){if("down"===i){let t=p.row+p.rowspan-a-d;r[2]+t>=this.plugin.hot.countRows()?r[2]-=d:r[2]+=d?t:0}else if("right"===i){let t=p.col+p.colspan-s-d;r[3]+t>=this.plugin.hot.countCols()?r[3]-=d:r[3]+=d?t:0}else if("up"===i){let t=l-d-p.row+1;r[0]+t<0?r[0]+=d:r[0]-=d?t:0}else if("left"===i){let t=h-d-p.col+1;r[1]+t<0?r[1]+=d:r[1]-=d?t:0}}return this.updateCurrentFillCache({baseArea:t,dragDirection:i,foundMergedCells:n,fillSize:o,dragArea:r,cycleLength:u}),r}updateCurrentFillCache(t){this.currentFillData||(this.currentFillData={}),(0,e6.extend)(this.currentFillData,t)}getAutofillSize(t,e,i){let[n,r,o,a]=t,[s,l,h,u]=e;switch(i){case"up":return n-s;case"down":return h-o;case"left":return r-l;case"right":return u-a;default:return null}}getDragArea(t,e,i){let[n,r,o,a]=t,[s,l,h,u]=e;switch(i){case"up":return[s,l,n-1,a];case"down":return[o+1,r,h,a];case"left":return[s,l,o,r-1];case"right":return[n,a+1,h,u];default:return null}}getFarthestCollection(t,e,i,n){let[r,o,a,s]=t,l=["up","down"].indexOf(i)>-1,h=l?a:s,u=l?r:o,c=this.getAutofillSize(t,e,i),d=l?a-r+1:s-o+1,p=c-Math.floor(c/d)*d,f=null,g=null,m=null;switch(i){case"up":f="includesVertically",m=h-p+1;break;case"left":f="includesHorizontally",m=h-p+1;break;case"down":f="includesVertically",m=u+p-1;break;case"right":f="includesHorizontally",m=u+p-1}return(0,iy.arrayEach)(n,t=>{t[f](m)&&t.isFarther(g,i)&&(g=t)}),g}recreateAfterDataPopulation(t){if(!this.currentFillData)return;let e=this.getRangeFromChanges(t),i=this.currentFillData.foundMergedCells,n=this.currentFillData.dragDirection,r=(t,i)=>{switch(n){case"up":return t.row-i>=e.from.row;case"down":return t.row+t.rowspan-1+i<=e.to.row;case"left":return t.col-i>=e.from.column;case"right":return t.col+t.colspan-1+i<=e.to.column;default:return null}},o=0,a=null,s=1;do for(let t=0;t<i.length;t+=1){if(r(a=i[t],o=s*this.currentFillData.cycleLength))switch(n){case"up":this.plugin.mergedCellsCollection.add({row:a.row-o,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"down":this.plugin.mergedCellsCollection.add({row:a.row+o,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"left":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col-o,colspan:a.colspan});break;case"right":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col+o,colspan:a.colspan})}t===i.length-1&&(s+=1)}while(r(a,o))this.currentFillData=null,this.plugin.hot.render(),i.length>0&&this.plugin.ifChromeForceRepaint()}getRangeFromChanges(t){let e={min:null,max:null},i={min:null,max:null};return(0,iy.arrayEach)(t,t=>{let n=t[0],r=this.plugin.hot.propToCol(t[1]);(null===e.min||n<e.min)&&(e.min=n),(null===e.max||n>e.max)&&(e.max=n),(null===i.min||r<i.min)&&(i.min=r),(null===i.max||r>i.max)&&(i.max=r)}),{from:{row:e.min,column:i.min},to:{row:e.max,column:i.max}}}dragAreaOverlapsCollections(t,e,i){let[n,r,o,a]=this.getDragArea(t,e,i),s=this.plugin.hot._createCellCoords(n,r),l=this.plugin.hot._createCellCoords(o,a),h=this.plugin.hot._createCellRange(s,s,l);return this.mergedCellsCollection.getWithinRange(h,!0).length>0}};function SL(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS"),t4("1hIp0");var SN=class{constructor(t){SL(this,"plugin",void 0),SL(this,"hot",void 0),SL(this,"fullySelectedMergedCellClassName","fullySelectedMergedCell"),this.plugin=t,this.hot=t.hot}getSelectedMergedCellClassName(t,e,i,n){let r=Math.min(i[0],i[2]),o=Math.min(i[1],i[3]),a=Math.max(i[0],i[2]),s=Math.max(i[1],i[3]);if(void 0===n||!this.plugin.mergedCellsCollection.isFirstRenderableMergedCell(t,e))return;let l=this.plugin.mergedCellsCollection.get(t,e);if(!l)return;let h=l.getLastRow(),u=l.getLastColumn();return r<=l.row&&o<=l.col&&a>=h&&s>=u?`${this.fullySelectedMergedCellClassName}-${n}`:this.isMergeCellFullySelected(l,this.plugin.hot.getSelectedRange())?`${this.fullySelectedMergedCellClassName}-multiple`:void 0}isMergeCellFullySelected(t,e){let i=[];if(!e||!t)return!1;for(let e=0;e<t.rowspan;e+=1)for(let n=0;n<t.colspan;n+=1)i.push(this.hot._createCellCoords(t.row+e,t.col+n));for(let t=0;t<i.length;t+=1){let n=[];for(let r=0;r<e.length;r+=1)n[r]=e[r].includes(i[t]);if(!n.includes(!0))return!1}return!0}getSelectedMergedCellClassNameToRemove(){let t=[];for(let e=0;e<=7;e+=1)t.push(`${this.fullySelectedMergedCellClassName}-${e}`);return t.push(`${this.fullySelectedMergedCellClassName}-multiple`),t}},iy=t4("ceXML"),e6=t4("hwT6B"),e8=t4("jlXkd"),i0=t4("guO5N"),eG=t4("gFbQZ"),e$=t4("eL8cl");function SH(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS"),t4("1hIp0"),t4("1C6fS");class SV{constructor(t){SH(this,"data",void 0),SH(this,"next",null),SH(this,"prev",null),this.data=t}}var SB=class{constructor(){SH(this,"first",null),SH(this,"last",null)}push(t){let e=new SV(t);if(null===this.first)this.first=e,this.last=e;else{let t=this.last;this.last=e,e.prev=t,t.next=e}return e}unshift(t){let e=new SV(t);if(null===this.first)this.first=e,this.last=e;else{let t=this.first;this.first=e,e.next=t,t.prev=e}}inorder(t){let e=this.first;for(;e;){let i=t(e);if(e===this.last||!0===i)break;e=e.next}}remove(t){let e,i;if(null===this.first)return!1;let n=this.first;for(;n;){if(n.data===t)return e=n.next,i=n.prev,e&&(e.prev=i),i&&(i.next=e),n===this.first&&(this.first=e),n===this.last&&(this.last=i),!0;n=n.next}return!1}hasCycle(){let t=this.first,e=this.first;for(;;){if(null===t||null===(t=t.next))return!1;if((t=t.next)===(e=e.next))return!0}}pop(){if(null===this.last)return null;let t=this.last;return this.last=this.last.prev,t}shift(){if(null===this.first)return null;let t=this.first;return this.first=this.first.next,t}recursiveReverse(){if(!this.first)return;!function t(e,i){i&&(t(i,i.next),i.next=e)}(this.first,this.first.next),this.first.next=null;let t=this.first;this.first=this.last,this.last=t}reverse(){let t;if(!this.first||!this.first.next)return;let e=this.first.next,i=this.first;for(;e;)t=e.next,e.next=i,i.prev=e,i=e,e=t;this.first.next=null,this.last.prev=null,t=this.first,this.first=i,this.last=t}};function SF(t,e,i){SW(t,e),e.set(t,i)}function SW(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function Sz(t,e){return t.get(SU(t,e))}function Sj(t,e,i){return t.set(SU(t,e),i),i}function SU(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var SG=new WeakMap,SY=new WeakMap,SX=new WeakMap,S$=new WeakMap,SZ=new WeakMap,Sq=new WeakMap,SK=new WeakMap,SQ=new WeakSet;class SJ{constructor(t){let{mergedCellsGetter:e,rowIndexMapper:i,columnIndexMapper:n}=t;SW(this,SQ),SQ.add(this),SF(this,SG,new SB),SF(this,SY,new SB),SF(this,SX,null),SF(this,S$,null),SF(this,SZ,null),SF(this,Sq,null),SF(this,SK,null),Sj(SZ,this,e),Sj(Sq,this,i),Sj(SK,this,n)}getCurrentVerticalNode(){return Sz(S$,this).data}getFirstVerticalNode(){return Sz(SY,this).first.data}getNextVerticalNode(){return Sz(S$,this).next.data}getPrevVerticalNode(){return Sz(S$,this).prev.data}getCurrentHorizontalNode(){return Sz(SX,this).data}getFirstHorizontalNode(){return Sz(SG,this).first.data}getNextHorizontalNode(){return Sz(SX,this).next.data}getPrevHorizontalNode(){return Sz(SX,this).prev.data}setPrevNodeAsActive(){Sj(S$,this,Sz(S$,this).prev),Sj(SX,this,Sz(SX,this).prev)}setNextNodeAsActive(){Sj(S$,this,Sz(S$,this).next),Sj(SX,this,Sz(SX,this).next)}buildFocusOrder(t){let e=t.getTopStartCorner(),i=t.getBottomEndCorner(),n=new WeakSet;Sj(SG,this,new SB);for(let r=e.row;r<=i.row;r++)if(!Sz(Sq,this).isHidden(r))for(let o=e.col;o<=i.col;o++){if(Sz(SK,this).isHidden(o))continue;let e=SU(SQ,this,S0).call(this,t,Sz(SG,this),n,r,o);e&&Sj(SX,this,e)}Sz(SG,this).first&&(Sz(SG,this).first.prev=Sz(SG,this).last,Sz(SG,this).last.next=Sz(SG,this).first);let r=new WeakSet;Sj(SY,this,new SB);for(let n=e.col;n<=i.col;n++)if(!Sz(SK,this).isHidden(n))for(let o=e.row;o<=i.row;o++){if(Sz(Sq,this).isHidden(o))continue;let e=SU(SQ,this,S0).call(this,t,Sz(SY,this),r,o,n);e&&Sj(S$,this,e)}Sz(SY,this).first&&(Sz(SY,this).first.prev=Sz(SY,this).last,Sz(SY,this).last.next=Sz(SY,this).first)}setActiveNode(t,e){return Sz(SG,this).inorder(i=>{let{rowStart:n,rowEnd:r,colStart:o,colEnd:a}=i.data;if(t>=n&&t<=r&&e>=o&&e<=a)return Sj(SX,this,i),!1}),Sz(SY,this).inorder(i=>{let{rowStart:n,rowEnd:r,colStart:o,colEnd:a}=i.data;if(t>=n&&t<=r&&e>=o&&e<=a)return Sj(S$,this,i),!1}),this}}function S0(t,e,i,n,r){let o=t.getTopStartCorner(),a=t.getBottomEndCorner(),s=t.highlight.clone().normalize(),l=Sz(SZ,this).call(this,n,r);if(l&&i.has(l))return null;let h={colStart:r,colEnd:r,rowStart:n,rowEnd:n};if(l){if(i.add(l),l.row<o.row||l.row+l.rowspan-1>a.row||l.col<o.col||l.col+l.colspan-1>a.col)return null;h.colStart=l.col,h.colEnd=l.col+l.colspan-1,h.rowStart=l.row,h.rowEnd=l.row+l.rowspan-1}let u=e.push(h);return n===s.row&&r===s.col||l&&s.row>=l.row&&s.row<=l.row+l.rowspan-1&&s.col>=l.col&&s.col<=l.col+l.colspan-1?u:null}var e6=t4("hwT6B");function S1(t,e,i){S2(t,e),e.set(t,i)}function S2(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function S5(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function S3(t,e,i){return t.set(S6(t,e),i),i}function S4(t,e){return t.get(S6(t,e))}function S6(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(0,sa.default).getSingleton().register("beforeMergeCells"),(0,sa.default).getSingleton().register("afterMergeCells"),(0,sa.default).getSingleton().register("beforeUnmergeCells"),(0,sa.default).getSingleton().register("afterUnmergeCells");const S8="mergeCells";var S9=new WeakMap,S7=new WeakMap,Ct=new WeakMap,Ce=new WeakMap,Ci=new WeakSet;function Cn(){this.generateFromSettings(this.hot.getSettings()[S8]),this.hot.render()}function Cr(t){if(t){let t=this.mergedCellsCollection.mergedCells,e=this.hot.getSelectedRangeLast(),i=e.getTopStartCorner(),n=e.getBottomEndCorner();for(let e=0;e<t.length;e+=1)if(i.row===t[e].row&&i.col===t[e].col&&n.row===t[e].row+t[e].rowspan-1&&n.col===t[e].col+t[e].colspan-1)return!1}return t}function Co(t){S4(S7,this).row=t.row,S4(S7,this).col=t.col}function Ca(t){let{highlight:e}=this.hot.getSelectedRangeLast(),{columnIndexMapper:i,rowIndexMapper:n}=this.hot;S4(S9,this)&&(null!==n.getRenderableFromVisualIndex(S4(S9,this).row)&&(e.row=S4(S9,this).row),null!==i.getRenderableFromVisualIndex(S4(S9,this).col)&&(e.col=S4(S9,this).col),S3(S9,this,null));let r=this.mergedCellsCollection.get(e.row,e.col);if(!r)return;let o=r.col,a=r.col+r.colspan-1;if(t.col<0){let n=e.col>=o&&e.col<=a?o-1:a,r=i.getNearestNotHiddenIndex(n,-1);null===r?t.col=-this.hot.view.countRenderableColumnsInRange(0,e.col):t.col=-Math.max(this.hot.view.countRenderableColumnsInRange(r,e.col)-1,1)}else if(t.col>0){let n=e.col>=o&&e.col<=a?a+1:o,r=i.getNearestNotHiddenIndex(n,1);null===r?t.col=this.hot.view.countRenderableColumnsInRange(e.col,this.hot.countCols()):t.col=Math.max(this.hot.view.countRenderableColumnsInRange(e.col,r)-1,1)}let s=r.row,l=r.row+r.rowspan-1;if(t.row<0){let i=e.row>=s&&e.row<=l?s-1:l,r=n.getNearestNotHiddenIndex(i,-1);null===r?t.row=-this.hot.view.countRenderableRowsInRange(0,e.row):t.row=-Math.max(this.hot.view.countRenderableRowsInRange(r,e.row)-1,1)}else if(t.row>0){let i=e.row>=s&&e.row<=l?l+1:s,r=n.getNearestNotHiddenIndex(i,1);null===r?t.row=this.hot.view.countRenderableRowsInRange(e.row,this.hot.countRows()):t.row=Math.max(this.hot.view.countRenderableRowsInRange(e.row,r)-1,1)}}function Cs(t){let e=this.hot.getSelectedRangeLast(),i=e.clone(),{to:n}=e,{columnIndexMapper:r,rowIndexMapper:o}=this.hot,a=(t,e)=>{i.expand(this.hot._createCellCoords(t,e));for(let t=0;t<this.mergedCellsCollection.mergedCells.length;t+=1)i.expandByRange(this.mergedCellsCollection.mergedCells[t].getRange())};if(t.col<0){let o=this.mergedCellsCollection.getStartMostColumnIndex(e,n.col)+t.col;a(n.row,o),"E-W"===e.getHorizontalDirection()&&"E-W"===i.getHorizontalDirection()&&(o=i.getTopStartCorner().col);let s=r.getNearestNotHiddenIndex(o,1);null!==s&&(t.col=-Math.max(this.hot.view.countRenderableColumnsInRange(s,n.col)-1,1))}else if(t.col>0){let o=this.mergedCellsCollection.getEndMostColumnIndex(e,n.col)+t.col;a(n.row,o),"W-E"===e.getHorizontalDirection()&&"W-E"===i.getHorizontalDirection()&&(o=i.getBottomEndCorner().col);let s=r.getNearestNotHiddenIndex(o,-1);null!==s&&(t.col=Math.max(this.hot.view.countRenderableColumnsInRange(n.col,s)-1,1))}if(t.row<0){let r=this.mergedCellsCollection.getTopMostRowIndex(e,n.row)+t.row;a(r,n.col),"S-N"===e.getVerticalDirection()&&"S-N"===i.getVerticalDirection()&&(r=i.getTopStartCorner().row);let s=o.getNearestNotHiddenIndex(r,1);null!==s&&(t.row=-Math.max(this.hot.view.countRenderableRowsInRange(s,n.row)-1,1))}else if(t.row>0){let r=this.mergedCellsCollection.getBottomMostRowIndex(e,n.row)+t.row;a(r,n.col),"N-S"===e.getVerticalDirection()&&"N-S"===i.getVerticalDirection()&&(r=i.getBottomStartCorner().row);let s=o.getNearestNotHiddenIndex(r,-1);null!==s&&(t.row=Math.max(this.hot.view.countRenderableRowsInRange(n.row,s)-1,1))}}function Cl(){let t=this.hot.getSelectedRangeLast(),{highlight:e}=t;if(this.hot.selection.isSelectedByColumnHeader()||this.hot.selection.isSelectedByRowHeader()){S3(S9,this,e.clone());return}for(let e=0;e<this.mergedCellsCollection.mergedCells.length;e+=1)t.expandByRange(this.mergedCellsCollection.mergedCells[e].getRange(),!1);for(let e=0;e<this.mergedCellsCollection.mergedCells.length;e+=1)t.expandByRange(this.mergedCellsCollection.mergedCells[e].getRange(),!1);let i=this.mergedCellsCollection.get(e.row,e.col);S3(S9,this,e.clone()),i&&e.assign(i)}function Ch(t,e){if(t<0||e<0)return;let i=this.mergedCellsCollection.get(t,e);if(!i)return;let{row:n,col:r,colspan:o,rowspan:a}=i;return[n,r,n+a-1,r+o-1]}function Cu(t){var e;t.items.push({name:"---------"},(e=this,{key:"mergeCells",name(){let t=this.getSelectedLast();if(t){let i=e.mergedCellsCollection.get(t[0],t[1]);if(i.row===t[0]&&i.col===t[1]&&i.row+i.rowspan-1===t[2]&&i.col+i.colspan-1===t[3])return this.getTranslatedPhrase(sD)}return this.getTranslatedPhrase(sk)},callback(){let t=this.getSelectedRangeLast();if(!t)return;t.setDirection(this.isRtl()?"NE-SW":"NW-SE");let{from:i,to:n}=t;e.toggleMerge(t),this.selectCell(i.row,i.col,n.row,n.col,!1)},disabled(){let t=this.getSelectedLast();return!t||SM.isSingleCell({row:t[0],col:t[1],rowspan:t[2]-t[0]+1,colspan:t[3]-t[1]+1})||this.selection.isSelectedByCorner()},hidden:!1}))}function Cc(){S3(S9,this,null)}function Cd(){if(S4(S9,this).isCell())return;let t=this.hot.getSelectedRangeLast(),e=t.getVerticalDirection(),i=t.getHorizontalDirection(),n=S4(S9,this).clone().normalize();S4(Ct,this).setActiveNode(n.row,n.col),S4(S7,this).row>0||S4(S7,this).col>0?S4(Ct,this).setPrevNodeAsActive():("E-W"===i&&S4(S7,this).col<0||"S-N"===e&&S4(S7,this).row<0)&&S4(Ct,this).setNextNodeAsActive()}function Cp(t,e){let i=this.hot.getSelectedRangeLast(),{columnIndexMapper:n,rowIndexMapper:r}=this.hot,o=null,a=null;if(S4(S7,this).col<0){let{rowEnd:t,colEnd:e}=S4(Ct,this).getPrevHorizontalNode();a=n.getNearestNotHiddenIndex(e,-1),o=r.getNearestNotHiddenIndex(t,-1)}else if(S4(S7,this).col>0){let{rowStart:t,colStart:e}=S4(Ct,this).getNextHorizontalNode();a=n.getNearestNotHiddenIndex(e,1),o=r.getNearestNotHiddenIndex(t,1)}else if(S4(S7,this).row<0){let{rowEnd:t,colEnd:e}=S4(Ct,this).getPrevVerticalNode();a=n.getNearestNotHiddenIndex(e,-1),o=r.getNearestNotHiddenIndex(t,-1)}else if(S4(S7,this).row>0){let{rowStart:t,colStart:e}=S4(Ct,this).getNextVerticalNode();a=n.getNearestNotHiddenIndex(e,1),o=r.getNearestNotHiddenIndex(t,1)}if(null!==o||null!==a){let n=this.hot._createCellCoords(o,a),r=this.mergedCellsCollection.get(n.row,n.col),s=this.hot.selection.highlight.getFocus();t=n.row,e=n.col,r?i.highlight.assign({row:this.hot.rowIndexMapper.getNearestNotHiddenIndex(r.row,1),col:this.hot.columnIndexMapper.getNearestNotHiddenIndex(r.col,1)}):i.highlight.assign(n),s.clear(),s.add(n).commit()}S4(Ct,this).setActiveNode(t,e),S3(S7,this,{row:0,col:0})}function Cf(){this.hot.getSelectedRangeLast().isHeader()||S4(Ct,this).buildFocusOrder(this.hot.getSelectedRangeLast())}function Cg(t,e,i){let n=this.mergedCellsCollection.get(t,e);n&&(n.row!==t||n.col!==e?i.copyable=!1:(i.rowspan=n.rowspan,i.colspan=n.colspan))}function Cm(t){let e=this.hot.countCols();this.modifyViewportRowStart(t,e),this.modifyViewportRowEnd(t,e)}function Cy(t){let e=this.hot.countRows();this.modifyViewportColumnStart(t,e),this.modifyViewportColumnEnd(t,e)}function Cv(t,e){this.autofillCalculations.correctSelectionAreaSize(e);let i=this.autofillCalculations.getDirection(e,t),n=t;if(this.autofillCalculations.dragAreaOverlapsCollections(e,n,i))return e;let r=this.hot._createCellCoords(e[0],e[1]),o=this.hot._createCellCoords(e[2],e[3]),a=this.hot._createCellRange(r,r,o),s=this.mergedCellsCollection.getWithinRange(a);return 0===s.length?n:n=this.autofillCalculations.snapDragArea(e,n,i,s)}function Cw(t,e){this.mergedCellsCollection.shiftCollections("right",t,e)}function Cb(t,e){this.mergedCellsCollection.shiftCollections("left",t,e)}function Cx(t,e,i){"auto"!==i&&this.mergedCellsCollection.shiftCollections("down",t,e)}function CS(t,e){this.mergedCellsCollection.shiftCollections("up",t,e)}function CC(t,e){"Autofill.fill"===e&&this.autofillCalculations.recreateAfterDataPopulation(t)}function C_(t,e){if(e&&"area"===e){let e=this.hot.getSelectedRangeLast(),i=this.mergedCellsCollection.getWithinRange(e);(0,iy.arrayEach)(i,i=>{e.getBottomEndCorner().row===i.getLastRow()&&e.getBottomEndCorner().col===i.getLastColumn()&&(t[2]=i.row,t[3]=i.col)})}}function CM(t,e,i,n){if(i)return this.selectionCalculations.getSelectedMergedCellClassName(t,e,i,n)}function CT(){return this.selectionCalculations.getSelectedMergedCellClassNameToRemove()}function CI(t,e,i,n){if(!(n instanceof MouseEvent))return;let r=this.hot.getSelectedRangeLast(),o=this.mergedCellsCollection.getByRange(r);if(!o)return;let a=this.hot._createCellCoords(o.row,o.col),s=this.hot._createCellCoords(o.row+o.rowspan-1,o.col+o.colspan-1);return 0===this.hot.selection.getLayerLevel()&&r.isEqual(this.hot._createCellRange(a,a,s))}function CR(t,e,i){let n,r;if(this.hot.getSettings().rowHeaders||"bottom"===i||"bottom_inline_start_corner"===i)return t;if("master"===i)n=this.hot.view.getFirstRenderedVisibleColumn(),r=this.hot.view.getLastRenderedVisibleColumn();else{let t=this.hot.view.getOverlayByName(i);n=this.hot.columnIndexMapper.getVisualFromRenderableIndex(t.clone.wtTable.getFirstRenderedColumn()),r=this.hot.columnIndexMapper.getVisualFromRenderableIndex(t.clone.wtTable.getLastRenderedColumn())}if(!this.mergedCellsCollection.get(e,n))return t;let o=this.hot._createCellCoords(e,n),a=this.hot._createCellCoords(e,r),s=this.hot._createCellRange(o,o,a),l=this.mergedCellsCollection.getWithinRange(s),h=l.reduce((t,e)=>{let{rowspan:i}=e;return Math.max(t,i)},1),u=0;return l.length>1&&l[0].rowspan<h&&(u=h-l[0].rowspan),l.forEach(n=>{var r;let{rowspan:o}=n,a=0;a="top"===i||"top_inline_start_corner"===i?Math.min(h,this.hot.view.countNotHiddenFixedRowsTop()-e):o-u,t=Math.max(null!==(r=t)&&void 0!==r?r:0,S6(Ci,this,CE).call(this,e,a))}),t}function CE(t,e){let i=this.hot.view._wt.wtSettings.getSettingPure("defaultRowHeight"),n=this.hot.getPlugin("autoRowSize"),r=0;for(let a=t;a<t+e;a++)if(!this.hot.rowIndexMapper.isHidden(a)){var o;r+=null!==(o=null==n?void 0:n.getRowHeight(a))&&void 0!==o?o:i}return r}t4("1C6fS");var eG=t4("gFbQZ"),e8=t4("jlXkd"),nJ=t4("iCsRe");function CA(){(0,e8.warn)((0,nJ.toSingleLine)`Plugins \`columnSorting\` and \`multiColumnSorting\` should not be enabled simultaneously. 
    Only \`multiColumnSorting\` will work. The \`columnSorting\` plugin will be disabled.`)}t4("1hIp0");const Ck="sort",CD="multiColumnSorting",CO="columnSorting";dB(CD,function(t,e){return function(i,n){let[,...r]=i,[,...o]=n;return function i(n){let a=t[n],s=e[n],l=r[n],h=o[n],u=s.multiColumnSorting,c=(u.compareFunctionFactory?u.compareFunctionFactory:dW(s.type))(a,s,u)(l,h);if(c===dz){let t=n+1;if(void 0!==e[t])return i(t)}return c}(0)}}),t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),e$=t4("eL8cl");function CP(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),i0=t4("guO5N"),nJ=t4("iCsRe"),eq=t4("7HxIw"),e8=t4("jlXkd");t4("1C6fS"),t4("1hIp0");var iy=t4("ceXML");t4("1C6fS"),t4("1hIp0");var e6=t4("hwT6B"),iy=t4("ceXML");t4("1hIp0");var iy=t4("ceXML"),e6=t4("hwT6B"),eX=t4("gnaTS");function CL(){let{label:t="",colspan:e=1,origColspan:i=1,collapsible:n=!1,crossHiddenColumns:r=[],isCollapsed:o=!1,isHidden:a=!1,isRoot:s=!1,isPlaceholder:l=!1,headerClassNames:h=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{label:t,colspan:e,origColspan:i,collapsible:n,isCollapsed:o,crossHiddenColumns:r,isHidden:a,isRoot:s,isPlaceholder:l,headerClassNames:h}}function CN(){return{label:"",isPlaceholder:!0}}function CH(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function CV(t,e){return t.get(CF(t,e))}function CB(t,e,i){return t.set(CF(t,e),i),i}function CF(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const CW=["label","collapsible"];var Cz=new WeakMap,Cj=new WeakMap,CU=new WeakMap;class CG{constructor(){CH(this,Cz,[]),CH(this,Cj,0),CH(this,CU,1/0)}setColumnsLimit(t){CB(CU,this,t)}setData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];CB(Cz,this,function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,i=[];if(0===e)return i;(0,iy.arrayEach)(t,t=>{let n=[],r=0;i.push(n),(0,iy.arrayEach)(t,t=>{let i=CL();if((0,e6.isObject)(t)){let{label:e,colspan:n,headerClassName:r}=t;i.label=(0,eX.stringify)(e),"number"==typeof n&&n>1&&(i.colspan=n,i.origColspan=n),"string"==typeof r&&(i.headerClassNames=[...r.split(" ")])}else i.label=(0,eX.stringify)(t);r+=i.origColspan;let o=!1;if(r>=e&&(i.colspan=i.origColspan-(r-e),i.origColspan=i.colspan,o=!0),n.push(i),i.colspan>1)for(let t=0;t<i.colspan-1;t++)n.push(CN());return!o})});let n=Math.max(...(0,iy.arrayMap)(i,t=>t.length));return(0,iy.arrayEach)(i,t=>{if(t.length<n){let e=(0,iy.arrayMap)(Array(n-t.length),()=>CL());t.splice(t.length,0,...e)}}),i}(t,CV(CU,this))),CB(Cj,this,CV(Cz,this).length)}getData(){return CV(Cz,this)}mergeWith(t){(0,iy.arrayEach)(t,t=>{let{row:e,col:i,...n}=t,r=this.getHeaderSettings(e,i);null!==r&&(0,e6.extend)(r,n,CW)})}map(t){(0,iy.arrayEach)(CV(Cz,this),e=>{(0,iy.arrayEach)(e,e=>{let i=t({...e});(0,e6.isObject)(i)&&(0,e6.extend)(e,i,CW)})})}getHeaderSettings(t,e){var i;if(t>=CV(Cj,this)||t<0)return null;let n=CV(Cz,this)[t];return!1===Array.isArray(n)||e>=n.length?null:null!==(i=n[e])&&void 0!==i?i:null}getHeadersSettings(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=[];if(t>=CV(Cj,this)||t<0)return n;let r=CV(Cz,this)[t],o=0;for(let t=e;t<r.length;t++){let e=r[t];if(e.isPlaceholder)throw Error("The first column settings cannot overlap the other header layers");if(o+=e.colspan,n.push(e),e.colspan>1&&(t+=e.colspan-1),o===i)break;if(o>i)throw Error("The last column settings cannot overlap the other header layers")}return n}getLayersCount(){return CV(Cj,this)}getColumnsCount(){return CV(Cj,this)>0?CV(Cz,this)[0].length:0}clear(){CB(Cz,this,[]),CB(Cj,this,0)}}t4("1C6fS");var iy=t4("ceXML");function CY(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS"),t4("1hIp0");const CX="DF-pre-order",C$=new Map([[CX,function t(e,i){let n=e.call(i,this);for(let r=0;r<this.childs.length;r++){if(!1===n)return!1;n=t.call(this.childs[r],e,i)}return n}],["DF-post-order",function t(e,i){for(let n=0;n<this.childs.length;n++)if(!1===t.call(this.childs[n],e,i))return!1;return e.call(i,this)}],["BF",function(t,e){let i=[this];!function n(){if(0===i.length)return;let r=i.shift();i.push(...r.childs),!1!==t.call(e,r)&&n()}()}]]);class CZ{constructor(t){CY(this,"data",{}),CY(this,"parent",null),CY(this,"childs",[]),this.data=t}addChild(t){t.parent=this,this.childs.push(t)}cloneTree(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=new CZ({...t.data});for(let i=0;i<t.childs.length;i++)e.addChild(this.cloneTree(t.childs[i]));return e}replaceTreeWith(t){this.data={...t.data},this.childs=[];for(let e=0;e<t.childs.length;e++)this.addChild(t.childs[e])}walkDown(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BF";if(!C$.has(e))throw Error(`Traversal strategy "${e}" does not exist`);C$.get(e).call(this,t,this)}walkUp(t){let e=this,i=n=>{!1!==t.call(e,n)&&null!==n.parent&&i(n.parent)};i(this)}}function Cq(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function CK(t,e){return t.get(CQ(t,e))}function CQ(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var CJ=new WeakMap,C0=new WeakMap,C1=new WeakMap;class C2{constructor(t){Cq(this,CJ,new Map),Cq(this,C0,new Map),Cq(this,C1,null),C1.set(CQ(C1,this),t)}getRoots(){return Array.from(CK(CJ,this).values())}getRootByColumn(t){let e;return CK(C0,this).has(t)&&(e=CK(CJ,this).get(CK(C0,this).get(t))),e}getNode(t,e){let i;let n=this.getRootByColumn(e);if(!n)return;let r=e-CK(C0,this).get(e),o=0;return n.walkDown(n=>{let{data:{origColspan:a,headerLevel:s}}=n;if(t===s){if(r>=o&&r<=o+a-1)return(i=n).data.isRoot=e===i.data.columnIndex,!1;o+=a}}),i}rebuildTreeIndex(){let t=0;CK(C0,this).clear(),(0,iy.arrayEach)(CK(CJ,this),e=>{let[,{data:{colspan:i}}]=e;for(let e=t;e<t+i;e++)CK(C0,this).set(e,t);t+=i})}buildTree(){this.clear();let t=CK(C1,this).getColumnsCount(),e=0;for(;e<t;){let t=CK(C1,this).getHeaderSettings(0,e),i=new CZ;CK(CJ,this).set(e,i),this.buildLeaves(i,e,0,t.origColspan),e+=t.origColspan}this.rebuildTreeIndex()}buildLeaves(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=CK(C1,this).getHeadersSettings(i,e,n);i+=1,(0,iy.arrayEach)(r,n=>{let r;let o={...n,headerLevel:i-1,columnIndex:e};1===i?(t.data=o,r=t):(r=new CZ(o),t.addChild(r)),i<CK(C1,this).getLayersCount()&&this.buildLeaves(r,e,i,n.origColspan),e+=n.origColspan})}clear(){CK(CJ,this).clear(),CK(C0,this).clear()}}t4("1C6fS"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var iy=t4("ceXML");t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var iy=t4("ceXML");function C5(t,e){t.walkDown(t=>{let{data:i,childs:n}=t;if(!i.isHidden&&(e(i.columnIndex),0===n.length))for(let t=1;t<i.colspan;t++)e(i.columnIndex+t)})}function C3(t,e){let{childs:i}=t;if(0!==i.length)return i[0].data[e]}function C4(t){return C3(t,"origColspan")===t.data.origColspan}function C6(t){let{data:e,childs:i}=t;if(!e.isCollapsed||e.isHidden||e.origColspan<=1)return{rollbackModification:()=>{},affectedColumns:[],colspanCompensation:0};if(C4(t))return C6(i[0]);e.isCollapsed=!1;let n=i.slice(1),r=new Set,o=0;if(n.length>0)(0,iy.arrayEach)(n,t=>{t.replaceTreeWith(t.data.clonedTree),t.data.clonedTree=null;let e=t.data;o+=e.colspan,C5(t,t=>{r.add(t)})});else{let{colspan:t,origColspan:i,columnIndex:n}=e;o=i-t;for(let t=1;t<i;t++)r.add(n+t)}return t.walkUp(t=>{let{data:e}=t;e.colspan+=o,e.colspan>=e.origColspan?(e.colspan=e.origColspan,e.isCollapsed=!1):C4(t)&&(e.isCollapsed=C3(t,"isCollapsed"))}),{rollbackModification:()=>C8(t),affectedColumns:Array.from(r),colspanCompensation:o}}function C8(t){var e;let{data:i,childs:n}=t;if(i.isCollapsed||i.isHidden||i.origColspan<=1)return{rollbackModification:()=>{},affectedColumns:[],colspanCompensation:0};if(C4(t))return C8(n[0]);i.isCollapsed=!0;let r=n.slice(1),o=new Set;if(r.length>0)(0,iy.arrayEach)(r,t=>{C5(t,t=>{o.add(t)}),t.data.clonedTree=t.cloneTree(),t.walkDown(t=>{let{data:e}=t;e.isHidden=!0})});else{let{origColspan:t,columnIndex:e}=i;for(let i=1;i<t;i++){let t=e+i;o.add(t)}}let a=i.colspan-(null!==(e=C3(t,"colspan"))&&void 0!==e?e:1);return t.walkUp(t=>{let{data:e}=t;e.colspan-=a,e.colspan<=1?(e.colspan=1,e.isCollapsed=!0):C4(t)&&(e.isCollapsed=C3(t,"isCollapsed"))}),{rollbackModification:()=>C6(t),affectedColumns:Array.from(o),colspanCompensation:a}}t4("1C6fS"),t4("1hIp0");var nJ=t4("iCsRe");t4("1C6fS");var nJ=t4("iCsRe");const C9=new Map([["collapse",C8],["expand",C6],["hide-column",function(t,e){if(!Number.isInteger(e))throw Error("The passed gridColumnIndex argument has invalid type.");if(t.childs.length>0)throw Error((0,nJ.toSingleLine)`The passed node is not the last node on the tree. Only for\x20
the last node, the hide column modification can be applied.`);let{crossHiddenColumns:i}=t.data;if(i.includes(e))return;let n=!1;t.walkUp(t=>{let{data:{collapsible:e}}=t;if(e)return n=!0,!1}),n||t.walkUp(t=>{let{data:i}=t;i.crossHiddenColumns.push(e),i.colspan>1?i.colspan-=1:i.isHidden=!0})}],["show-column",function(t,e){if(!Number.isInteger(e))throw Error("The passed gridColumnIndex argument has invalid type.");if(t.childs.length>0)throw Error((0,nJ.toSingleLine)`The passed node is not the last node on the tree. Only for\x20
the last node, the show column modification can be applied.`);let{crossHiddenColumns:i}=t.data;if(!i.includes(e))return;let n=!1;t.walkUp(t=>{let{data:{collapsible:e}}=t;if(e)return n=!0,!1}),n||t.walkUp(t=>{let{data:i}=t;i.crossHiddenColumns.splice(i.crossHiddenColumns.indexOf(e),1),!i.isHidden&&i.colspan<i.origColspan&&(i.colspan+=1),i.isHidden=!1})}]]);t4("1hIp0");var iy=t4("ceXML");function C7(t){let e=[];return(0,iy.arrayEach)(t,t=>{t.walkDown(t=>{let i;let n=t.data,{origColspan:r,columnIndex:o,headerLevel:a,crossHiddenColumns:s}=n,l=(Array.isArray(e[a])?i=e[a]:(i=[],e[a]=i),i),h=!1;for(let t=o;t<o+r;t++)if(s.includes(t)||h)l.push(CN(n));else{let t=function(t){let{crossHiddenColumns:e,...i}=CL(t);return i}(n);t.isRoot=!0,l.push(t),h=!0}})}),e}function _t(t,e,i){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function _e(t,e,i){return t.set(_n(t,e),i),i}function _i(t,e){return t.get(_n(t,e))}function _n(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var _r=new WeakMap,_o=new WeakMap,_a=new WeakMap;class _s{constructor(){_t(this,_r,new CG),_t(this,_o,new C2(_i(_r,this))),_t(this,_a,[[]])}setState(t){_i(_r,this).setData(t);let e=!1;try{_i(_o,this).buildTree()}catch(t){_i(_o,this).clear(),_i(_r,this).clear(),e=!0}return _e(_a,this,C7(_i(_o,this).getRoots())),e}setColumnsLimit(t){_i(_r,this).setColumnsLimit(t)}mergeStateWith(t){let e=(0,iy.arrayMap)(t,t=>{let{row:e,...i}=t;return{row:e<0?this.rowCoordsToLevel(e):e,...i}});_i(_r,this).mergeWith(e),_i(_o,this).buildTree(),_e(_a,this,C7(_i(_o,this).getRoots()))}mapState(t){_i(_r,this).map(t),_i(_o,this).buildTree(),_e(_a,this,C7(_i(_o,this).getRoots()))}mapNodes(t){return(0,iy.arrayReduce)(_i(_o,this).getRoots(),(e,i)=>(i.walkDown(i=>{let n=t(i.data);void 0!==n&&e.push(n)}),e),[])}triggerNodeModification(t,e,i){let n;e<0&&(e=this.rowCoordsToLevel(e));let r=_i(_o,this).getNode(e,i);return r&&(n=function(t,e,i){if(!C9.has(t))throw Error(`The node modifier action ("${t}") does not exist.`);return C9.get(t)(e,i)}(t,r,i),_e(_a,this,C7(_i(_o,this).getRoots()))),n}triggerColumnModification(t,e){return this.triggerNodeModification(t,-1,e)}rowCoordsToLevel(t){if(t>=0)return null;let e=t+Math.max(this.getLayersCount(),1);return e<0?null:e}levelToRowCoords(t){if(t<0)return null;let e=t-Math.max(this.getLayersCount(),1);return e>=0?null:e}getHeaderSettings(t,e){var i,n;return(t<0&&(t=this.rowCoordsToLevel(t)),null===t||t>=this.getLayersCount())?null:null!==(i=null===(n=_i(_a,this)[t])||void 0===n?void 0:n[e])&&void 0!==i?i:null}getHeaderTreeNodeData(t,e){let i=this.getHeaderTreeNode(t,e);return i?{...i.data}:null}getHeaderTreeNode(t,e){return(t<0&&(t=this.rowCoordsToLevel(t)),null===t||t>=this.getLayersCount())?null:_i(_o,this).getNode(t,e)||null}findTopMostEntireHeaderLevel(t){var e;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=i-t+1,r=!1,o=null;for(let e=t;e<=i;e++){let a=_i(_o,this).getRootByColumn(e);if(!a)break;r=!0,a.walkDown(e=>{let{columnIndex:r,headerLevel:a,origColspan:s,isHidden:l}=e.data;!l&&s<=n&&r>=t&&r+s-1<=i&&(null===o||a<o)&&(o=a)},CX)}return r&&null===o?-1:this.levelToRowCoords(null!==(e=o)&&void 0!==e?e:0)}findLeftMostColumnIndex(t,e){var i,n;let{isRoot:r}=null!==(i=this.getHeaderSettings(t,e))&&void 0!==i?i:{isRoot:!0};if(r)return e;let o=e-1;for(;o>=0;){let{isRoot:e}=null!==(n=this.getHeaderSettings(t,o))&&void 0!==n?n:{isRoot:!0};if(e)break;o-=1}return o}findRightMostColumnIndex(t,e){var i,n;let{isRoot:r,origColspan:o}=null!==(i=this.getHeaderSettings(t,e))&&void 0!==i?i:{isRoot:!0,origColspan:1};if(r)return e+o-1;let a=e+1;for(;a<this.getColumnsCount();){let{isRoot:e}=null!==(n=this.getHeaderSettings(t,a))&&void 0!==n?n:{isRoot:!0};if(e)break;a+=1}return a-1}getLayersCount(){return _i(_r,this).getLayersCount()}getColumnsCount(){return _i(_r,this).getColumnsCount()}clear(){_e(_a,this,[]),_i(_r,this).clear(),_i(_o,this).clear()}}t4("1C6fS");var eG=t4("gFbQZ");function _l(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var _h=class{constructor(t,e){_l(this,"hot",void 0),_l(this,"nestedHeaderSettingsGetter",void 0),_l(this,"layersCount",0),_l(this,"container",void 0),_l(this,"widthsMap",void 0),this.hot=t,this.nestedHeaderSettingsGetter=e,this.widthsMap=this.hot.columnIndexMapper.createAndRegisterIndexMap("nestedHeaders.widthsMap","physicalIndexToValue")}setLayersCount(t){return this.layersCount=t,this}getWidth(t){return this.widthsMap.getValueAtIndex(this.hot.toPhysicalColumn(t))}buildWidthsMap(){this.container=this.hot.rootDocument.createElement("div"),this.container.classList.add("handsontable","htGhostTable","htAutoSize"),this._buildGhostTable(this.container),this.hot.rootDocument.body.appendChild(this.container);let t=this.container.querySelectorAll("tr:last-of-type th"),e=t.length;this.widthsMap.clear();for(let i=0;i<e;i++){let e=this.hot.columnIndexMapper.getVisualFromRenderableIndex(i),n=this.hot.toPhysicalColumn(e);this.widthsMap.setValueAtIndex(n,t[i].offsetWidth)}this.container.parentNode.removeChild(this.container),this.container=null}_buildGhostTable(t){let{rootDocument:e,columnIndexMapper:i}=this.hot,n=e.createDocumentFragment(),r=e.createElement("table"),o=!!this.hot.getSettings().dropdownMenu,a=i.getRenderableIndexesLength();for(let t=0;t<this.layersCount;t++){let n=e.createElement("tr");for(let r=0;r<a;r++){let a=i.getVisualFromRenderableIndex(r);null===a&&(a=r);let s=e.createElement("th"),l=this.nestedHeaderSettingsGetter(t,a);if(l&&(!l.isPlaceholder||l.isHidden)){let t=l.label;o&&(t+='<button class="changeType"></button>'),(0,eG.fastInnerHTML)(s,t),s.colSpan=l.colspan,n.appendChild(s)}}r.appendChild(n)}n.appendChild(r),t.appendChild(n)}clear(){this.widthsMap.clear(),this.container=null}};function _u(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _c(t,e,i){_d(t,e),e.set(t,i)}function _d(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function _p(t,e,i){return t.set(_g(t,e),i),i}function _f(t,e){return t.get(_g(t,e))}function _g(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const _m="nestedHeaders";var _y=new WeakMap,_v=new WeakMap,_w=new WeakMap,_b=new WeakMap,_x=new WeakSet;function _S(){var t;let e=null===(t=this.hot)||void 0===t?void 0:t.getSelectedRangeLast();if(!e)return;let{highlight:i}=e;if(i.isHeader()&&i.col>=0){let t=_f(_y,this).findLeftMostColumnIndex(i.row,i.col),e=this.hot.selection.highlight.getFocus();e.visualCellRange.highlight.col=t,e.visualCellRange.from.col=t,e.visualCellRange.to.col=t,e.commit()}}function _C(t){let e=this.hot.getSelectedRangeLast();if(!e)return t;let{highlight:i}=e;if(!(i.isHeader()&&i.col>=0))return t;let n=this.hot.view.getFirstFullyVisibleColumn(),r=this.hot.view.getLastFullyVisibleColumn(),o=_f(_y,this).findLeftMostColumnIndex(i.row,i.col),a=_f(_y,this).findRightMostColumnIndex(i.row,i.col);return o<n&&a>r?t:o<n?o:a}function __(t,e,i){let n=_f(_y,this).getHeaderTreeNodeData(e,t);if(!n)return t;let{columnCursor:r,selectionType:o,selectionWidth:a}=i,{isRoot:s,colspan:l}=_f(_y,this).getHeaderSettings(e,t);if(o===lW){if(!s)return n.columnIndex}else if(o===lF&&(l>a-r||!s))return null;return t}function _M(t,e,i){let{columnHeadersCount:n}=i;if(0!==n)for(let i=0;i<e.length;i++){let{startRow:n,startCol:o,endRow:a,endCol:s}=e[i],l=a-n+1,h=o-s+1;if(n>=0||1===h)break;for(let e=o;e<=s;e++)for(let i=n;i<=a;i++){var r;let n=l+i,a=e-o;0!==a&&!1===(null===(r=_f(_y,this).getHeaderTreeNodeData(i,e))||void 0===r?void 0:r.isRoot)&&(t[n][a]="")}}}function _T(t,e,i,n){this._getHeaderTreeNodeDataByCoords(e)&&(n.column=!0)}function _I(t,e){let i=this._getHeaderTreeNodeDataByCoords(e);if(!i)return;_p(_w,this,e.clone()),_p(_b,this,!0);let{selection:n}=this.hot,r=n.isSelected()?n.getSelectedRange().current():null,o=[],{columnIndex:a,origColspan:s}=i,l=!n.inInSelection(e);t.shiftKey&&r?e.col<r.from.col?o.push(r.getTopEndCorner().col,a,e.row):e.col>r.from.col?o.push(r.getTopStartCorner().col,a+s-1,e.row):o.push(a,a+s-1,e.row):((0,eq.isLeftClick)(t)||(0,eq.isRightClick)(t)&&l||(0,eq.isTouchEvent)(t))&&o.push(a,a+s-1,e.row),n.selectColumns(...o)}function _R(t,e,i,n){if(!this.hot.view.isMouseDown())return;let r=this._getHeaderTreeNodeDataByCoords(e);if(!r)return;let{columnIndex:o,origColspan:a}=r,s=this.hot.getSelectedRangeLast(),l=s.getTopStartCorner(),h=s.getBottomEndCorner(),{from:u}=s;n.column=!0,n.cell=!0;let c=[],d=(0,i0.clamp)(e.row,-1/0,-1);e.col<u.col?c.push(h.col,o,d):e.col>u.col?c.push(l.col,o+a-1,d):c.push(o,o+a-1,d),this.hot.selection.selectColumns(...c)}function _E(){_p(_b,this,!1)}function _A(){let{navigableHeaders:t}=this.hot.getSettings();if(!this.hot.view.isMouseDown()||!_f(_b,this)||!t)return;let e=this.hot.getSelectedRangeLast(),i=e.getTopStartCorner().col,n=e.getBottomEndCorner().col,{columnIndex:r,origColspan:o}=_f(_y,this).getHeaderTreeNodeData(_f(_w,this).row,_f(_w,this).col);if(e.setHighlight(_f(_w,this)),o>e.getWidth()||r<i||r+o-1>n){let t=_f(_y,this).findTopMostEntireHeaderLevel((0,i0.clamp)(i,r,r+o-1),(0,i0.clamp)(n,r,r+o-1));e.highlight.row=t,e.highlight.col=e.from.col}}function _k(t){let{highlight:e}=this.hot.getSelectedRangeLast(),i=this.hot._createCellCoords(e.row+t.row,e.col+t.col);if(!(i.isHeader()&&i.col>=0))return;let n=_f(_y,this).findLeftMostColumnIndex(i.row,i.col),r=_f(_y,this).findRightMostColumnIndex(i.row,i.col);if(t.col<0){let i=e.col>=n&&e.col<=r?n-1:r,o=this.hot.columnIndexMapper.getNearestNotHiddenIndex(i,-1);null===o?t.col=-this.hot.view.countRenderableColumnsInRange(0,e.col):t.col=-Math.max(this.hot.view.countRenderableColumnsInRange(o,e.col)-1,1)}else if(t.col>0){let i=e.col>=n&&e.col<=r?r+1:n,o=this.hot.columnIndexMapper.getNearestNotHiddenIndex(i,1);null===o?t.col=this.hot.view.countRenderableColumnsInRange(e.col,this.hot.countCols()):t.col=Math.max(this.hot.view.countRenderableColumnsInRange(e.col,o)-1,1)}}function _D(t,e){let i=t.row,n=this._getHeaderTreeNodeDataByCoords({row:i,col:t.col}),r=this._getHeaderTreeNodeDataByCoords({row:i,col:e.col});e.col<t.col?(n&&(t.col=n.columnIndex+n.origColspan-1),r&&(e.col=r.columnIndex)):e.col>=t.col&&(n&&(t.col=n.columnIndex),r&&(e.col=r.columnIndex+r.origColspan-1))}function _O(t){t.length=0;for(let e=0;e<_f(_y,this).getLayersCount();e++)t.push(this.headerRendererFactory(e))}function _P(t){let e=_f(_y,this).getLayersCount(),i=t.startColumn,n=!!e;for(let r=0;r<e;r++){let e=_f(_y,this).findLeftMostColumnIndex(r,t.startColumn),o=this.hot.columnIndexMapper.getRenderableFromVisualIndex(e);if(e>=0&&(n=!1),(0,i0.isNumeric)(o)&&o<t.startColumn){i=o;break}}t.startColumn=n?_f(_y,this).getHeaderTreeNodeData(0,i).columnIndex:i}function _L(t,e){let i=this.ghostTable.getWidth(e);return t>i?t:i}function _N(t,e,i){var n;let{label:r}=null!==(n=_f(_y,this).getHeaderTreeNodeData(i,e))&&void 0!==n?n:{label:""};return r}function _H(t,e){if(t<0)return this.hot.getCell(t,_f(_y,this).findLeftMostColumnIndex(t,e),!0)}function _V(){this.updatePlugin()}function _B(t,e){e||this.updatePlugin()}t4("1C6fS"),t4("1hIp0"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI"),t4("1C6fS"),t4("1hIp0");var i0=t4("guO5N"),e6=t4("hwT6B"),iy=t4("ceXML");function _F(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var _W=class{constructor(t,e){_F(this,"hot",void 0),_F(this,"data",null),_F(this,"plugin",void 0),_F(this,"parentReference",new WeakMap),_F(this,"cache",{levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap}),this.hot=e,this.plugin=t}setData(t){this.data=t}getData(){return this.data}getRawSourceData(){let t=null;return this.plugin.disableCoreAPIModifiers(),t=this.hot.getSourceData(),this.plugin.enableCoreAPIModifiers(),t}updateWithData(t){this.setData(t),this.rewriteCache()}rewriteCache(){this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap},(0,i0.rangeEach)(0,this.data.length-1,t=>{this.cacheNode(this.data[t],0,null)})}cacheNode(t,e,i){this.cache.levels[e]||(this.cache.levels[e]=[],this.cache.levelCount+=1),this.cache.levels[e].push(t),this.cache.rows.push(t),this.cache.nodeInfo.set(t,{parent:i,row:this.cache.rows.length-1,level:e}),this.hasChildren(t)&&(0,iy.arrayEach)(t.__children,i=>{this.cacheNode(i,e+1,t)})}getDataObject(t){return null==t?null:this.cache.rows[t]}readTreeNodes(t,e,i,n){let r=!1,o=e;if(isNaN(o)&&o.end)return o;let a=t;return(a||(a={__children:this.data},r=!0,o-=1),null!=i&&o===i)?{result:a,end:!0}:null!=n&&a===n?{result:o,end:!0}:(o+=1,a.__children&&(0,iy.arrayEach)(a.__children,t=>{if(this.parentReference.set(t,r?null:a),isNaN(o=this.readTreeNodes(t,o,i,n))&&o.end)return!1}),o)}mockParent(){let t=this.mockNode();return t.__children=this.data,t}mockNode(){let t={};return(0,e6.objectEach)(this.data[0],(e,i)=>{t[i]=null}),t}getRowIndex(t){return null==t?null:this.cache.nodeInfo.get(t).row}getRowIndexWithinParent(t){let e=null;e=isNaN(t)?t:this.getDataObject(t);let i=this.getRowParent(t);return null==i?this.data.indexOf(e):i.__children.indexOf(e)}countAllRows(){let t={__children:this.data};return this.countChildren(t)}countChildren(t){let e=0,i=t;return(isNaN(i)||(i=this.getDataObject(i)),i&&i.__children)?((0,iy.arrayEach)(i.__children,t=>{e+=1,t.__children&&(e+=this.countChildren(t))}),e):0}getRowParent(t){let e;return e=isNaN(t)?t:this.getDataObject(t),this.getRowObjectParent(e)}getRowObjectParent(t){return t&&"object"==typeof t?this.cache.nodeInfo.get(t).parent:null}getRowLevel(t){let e=null;return(e=isNaN(t)?t:this.getDataObject(t))?this.getRowObjectLevel(e):null}getRowObjectLevel(t){return null==t?null:this.cache.nodeInfo.get(t).level}hasChildren(t){let e=t;return isNaN(e)||(e=this.getDataObject(e)),!!(e.__children&&e.__children.length)}isChild(t){return null!==this.getRowParent(t)}getChild(t,e){var i;return(null===(i=t.__children)||void 0===i?void 0:i[e])||null}isRowHighestLevel(t){return!this.isChild(t)}isParent(t){var e;let i=t;return isNaN(i)||(i=this.getDataObject(i)),i&&!!i.__children&&(null===(e=i.__children)||void 0===e?void 0:e.length)!==0}addChild(t,e){let i=e;this.hot.runHooks("beforeAddChild",t,i);let n=null;t&&(n=this.getRowIndex(t)),this.hot.runHooks("beforeCreateRow",n+this.countChildren(t)+1,1);let r=t;t||(r=this.mockParent()),r.__children||(r.__children=[]),i||(i=this.mockNode()),r.__children.push(i),this.rewriteCache();let o=this.getRowIndex(i);this.hot.rowIndexMapper.insertIndexes(o,1),this.hot.runHooks("afterCreateRow",o,1),this.hot.runHooks("afterAddChild",t,i)}addChildAtIndex(t,e,i){let n,r=i;if(r||(r=this.mockNode()),this.hot.runHooks("beforeAddChild",t,r,e),t){let i=this.getRowIndex(t)+e+1;this.hot.runHooks("beforeCreateRow",i,1),t.__children.splice(e,null,r),this.rewriteCache(),this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndexWithinParent(t),"__children",t.__children,"NestedRows.addChildAtIndex"),this.hot.rowIndexMapper.insertIndexes(i,1),this.plugin.enableCoreAPIModifiers(),this.hot.runHooks("afterCreateRow",i,1),n=i}else this.plugin.disableCoreAPIModifiers(),this.hot.alter("insert_row_above",e,1,"NestedRows.addChildAtIndex"),this.plugin.enableCoreAPIModifiers(),n=this.getRowIndex(this.data[e]);r=this.getDataObject(n),this.hot.runHooks("afterAddChild",t,r,e)}addSibling(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"below",i=this.translateTrimmedRow(t),n=this.getRowParent(i),r=this.getRowIndexWithinParent(i);switch(e){case"below":this.addChildAtIndex(n,r+1,null);break;case"above":this.addChildAtIndex(n,r,null)}}detachFromParent(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=null,n=[];Array.isArray(t)?((0,i0.rangeEach)(t[0],t[2],t=>{let e=this.translateTrimmedRow(t);n.push(this.getDataObject(e))}),(0,i0.rangeEach)(0,n.length-2,t=>{this.detachFromParent(n[t],!1)}),i=n[n.length-1]):i=t;let r=this.getRowIndex(i),o=this.countChildren(i),a=this.getRowIndexWithinParent(i),s=this.getRowParent(i),l=this.getRowParent(s),h=this.getRowIndex(l),u=null;if(this.hot.runHooks("beforeDetachChild",s,i),null!=a){let t=Array.from(Array(r+o+1).keys()).splice(-1*(o+1));if(this.hot.runHooks("beforeRemoveRow",r,o+1,t,this.plugin.pluginName),s.__children.splice(a,1),this.rewriteCache(),this.hot.runHooks("afterRemoveRow",r,o+1,t,this.plugin.pluginName),l){u=h+this.countChildren(l);let t=this.getChild(l,this.countChildren(l)-1),e=this.getRowIndex(t);this.hot.runHooks("beforeCreateRow",e+1,o+1,this.plugin.pluginName),l.__children.push(i)}else u=this.hot.countRows()+1,this.hot.runHooks("beforeCreateRow",u-2,o+1,this.plugin.pluginName),this.data.push(i)}this.rewriteCache(),this.hot.runHooks("afterCreateRow",u-2,o+1,this.plugin.pluginName),this.hot.runHooks("afterDetachChild",s,i,this.getRowIndex(i)),e&&this.hot.render()}filterData(t,e,i){let n=[];(0,iy.arrayEach)(i,t=>{n.push(this.getDataObject(t))}),(0,iy.arrayEach)(n,t=>{let e=this.getRowIndexWithinParent(t),i=this.getRowParent(t);null===i?this.data.splice(e,1):i.__children.splice(e,1)}),this.rewriteCache()}spliceData(t,e,i){let n=this.getDataObject(t-1),r=null,o=t;n&&n.__children&&0===n.__children.length?(r=n,o=0):t<this.countAllRows()&&(r=this.getRowParent(t),o=this.getRowIndexWithinParent(t)),r?i?r.__children.splice(o,e,...i):r.__children.splice(o,e):i?this.data.splice(o,e,...i):this.data.splice(o,e),this.rewriteCache()}syncRowWithRawSource(t){let e=t,i=null;do null!==(i=this.getRowParent(i))&&(e=i);while(null!==i)this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndex(e),"__children",e.__children,"NestedRows.syncRowWithRawSource"),this.plugin.enableCoreAPIModifiers()}moveRow(t,e,i,n){let r=e===this.hot.countRows(),o=this.getRowParent(t),a=this.getRowIndexWithinParent(t),s=o.__children.slice(a,a+1),l=t>e,h=r?this.getRowParent(e-1):this.getRowParent(e);null==h&&(h=this.getRowParent(e-1)),null==h&&(h=this.getDataObject(e-1)),h?h.__children||(h.__children=[]):(h=this.getDataObject(e)).__children=[];let u=r||i||n?h.__children.length:this.getRowIndexWithinParent(e),c=o===h;h.__children.splice(u,0,s[0]),o.__children.splice(a+(l&&c?1:0),1),this.syncRowWithRawSource(o),c||this.syncRowWithRawSource(h)}translateTrimmedRow(t){return this.plugin.collapsingUI?this.plugin.collapsingUI.translateTrimmedRow(t):t}untranslateTrimmedRow(t){return this.plugin.collapsingUI?this.plugin.collapsingUI.untranslateTrimmedRow(t):t}};t4("1hIp0");var eq=t4("7HxIw"),iy=t4("ceXML"),i0=t4("guO5N"),eG=t4("gFbQZ");function _z(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t4("1C6fS");var _j=class{constructor(t,e){_z(this,"hot",void 0),_z(this,"plugin",void 0),this.hot=e,this.plugin=t}},iy=t4("ceXML"),i0=t4("guO5N"),eG=t4("gFbQZ"),nZ=t4("4Pbrh");class _U extends _j{static get CSS_CLASSES(){return{indicatorContainer:"ht_nestingLevels",parent:"ht_nestingParent",indicator:"ht_nestingLevel",emptyIndicator:"ht_nestingLevel_empty",button:"ht_nestingButton",expandButton:"ht_nestingExpand",collapseButton:"ht_nestingCollapse"}}constructor(t,e){super(t,e),this.dataManager=this.plugin.dataManager,this.collapsingUI=this.plugin.collapsingUI,this.rowHeaderWidthCache=null}appendLevelIndicators(t,e){let i=this.hot.toPhysicalRow(t),n=this.dataManager.getRowLevel(i),r=this.dataManager.getDataObject(i),o=e.getElementsByTagName("DIV")[0],a=o.querySelector("span.rowHeader"),s=o.querySelectorAll('[class^="ht_nesting"]'),l=this.hot.getSettings().ariaTags;if((0,iy.arrayEach)(s,t=>{t&&o.removeChild(t)}),(0,eG.addClass)(e,_U.CSS_CLASSES.indicatorContainer),n){let{rootDocument:t}=this.hot,e=a.cloneNode(!0);o.innerHTML="",(0,i0.rangeEach)(0,n-1,()=>{let e=t.createElement("SPAN");(0,eG.addClass)(e,_U.CSS_CLASSES.emptyIndicator),o.appendChild(e)}),o.appendChild(e)}if(this.dataManager.hasChildren(r)){let t=this.hot.rootDocument.createElement("DIV");l&&(0,eG.setAttribute)(t,[(0,nZ.A11Y_HIDDEN)()]),(0,eG.addClass)(e,_U.CSS_CLASSES.parent),this.collapsingUI.areChildrenCollapsed(i)?((0,eG.addClass)(t,`${_U.CSS_CLASSES.button} ${_U.CSS_CLASSES.expandButton}`),l&&(0,eG.setAttribute)(e,[(0,nZ.A11Y_EXPANDED)(!1)])):((0,eG.addClass)(t,`${_U.CSS_CLASSES.button} ${_U.CSS_CLASSES.collapseButton}`),l&&(0,eG.setAttribute)(e,[(0,nZ.A11Y_EXPANDED)(!0)])),o.appendChild(t)}}updateRowHeaderWidth(t){let e=t;e||(e=this.dataManager.cache.levelCount),this.rowHeaderWidthCache=Math.max(50,11+10*e+25),this.hot.render()}}var _G=class extends _j{constructor(t,e){var i;super(t,e),i=this,this.dataManager=this.plugin.dataManager,this.collapsedRows=[],this.collapsedRowsStash={stash:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i.lastCollapsedRows=i.collapsedRows.slice(0),i.expandMultipleChildren(i.lastCollapsedRows,t)},shiftStash:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;null==e&&(e=1/0),(0,iy.arrayEach)(i.lastCollapsedRows,(r,o)=>{r>=t&&r<e&&(i.lastCollapsedRows[o]=r+n)})},applyStash:function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];i.collapseMultipleChildren(i.lastCollapsedRows,t),i.lastCollapsedRows=void 0},trimStash:(t,e)=>{(0,i0.rangeEach)(t,t+e-1,t=>{let e=this.lastCollapsedRows.indexOf(t);e>-1&&this.lastCollapsedRows.splice(e,1)})}}}collapseChildren(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=[],r=null,o=null,a=null;return isNaN(t)?(r=t,o=this.dataManager.getRowIndex(r)):(r=this.dataManager.getDataObject(t),o=t),this.dataManager.hasChildren(r)&&(0,iy.arrayEach)(r.__children,t=>{n.push(this.dataManager.getRowIndex(t))}),a=this.collapseRows(n,!0,!1),i&&this.trimRows(a),e&&this.renderAndAdjust(),-1===this.collapsedRows.indexOf(o)&&this.collapsedRows.push(o),a}collapseMultipleChildren(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=[];(0,iy.arrayEach)(t,t=>{n.push(...this.collapseChildren(t,!1,!1))}),i&&this.trimRows(n),e&&this.renderAndAdjust()}collapseRow(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.collapseRows([t],e)}collapseRows(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];return(0,iy.arrayEach)(t,t=>{n.push(t),e&&this.collapseChildRows(t,n)}),i&&this.trimRows(n),n}collapseChildRows(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&arguments[2];let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.dataManager.hasChildren(t)){let i=this.dataManager.getDataObject(t);(0,iy.arrayEach)(i.__children,t=>{let i=this.dataManager.getRowIndex(t);e.push(i),this.collapseChildRows(i,e)})}i&&this.trimRows(e)}expandRow(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.expandRows([t],e)}expandRows(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];return(0,iy.arrayEach)(t,t=>{n.push(t),e&&this.expandChildRows(t,n)}),i&&this.untrimRows(n),n}expandChildRows(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&arguments[2];let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.dataManager.hasChildren(t)){let i=this.dataManager.getDataObject(t);(0,iy.arrayEach)(i.__children,t=>{if(!this.isAnyParentCollapsed(t)){let i=this.dataManager.getRowIndex(t);e.push(i),this.expandChildRows(i,e)}})}i&&this.untrimRows(e)}expandChildren(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=[],r=null,o=null,a=null;return isNaN(t)?(r=t,o=this.dataManager.getRowIndex(t)):(r=this.dataManager.getDataObject(t),o=t),this.collapsedRows.splice(this.collapsedRows.indexOf(o),1),this.dataManager.hasChildren(r)&&(0,iy.arrayEach)(r.__children,t=>{let e=this.dataManager.getRowIndex(t);n.push(e)}),a=this.expandRows(n,!0,!1),i&&this.untrimRows(a),e&&this.renderAndAdjust(),a}expandMultipleChildren(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=[];(0,iy.arrayEach)(t,t=>{n.push(...this.expandChildren(t,!1,!1))}),i&&this.untrimRows(n),e&&this.renderAndAdjust()}collapseAll(){let t=this.dataManager.getData(),e=[];(0,iy.arrayEach)(t,t=>{this.dataManager.hasChildren(t)&&e.push(t)}),this.collapseMultipleChildren(e),this.renderAndAdjust()}expandAll(){let t=this.dataManager.getData(),e=[];(0,iy.arrayEach)(t,t=>{this.dataManager.hasChildren(t)&&e.push(t)}),this.expandMultipleChildren(e),this.renderAndAdjust()}trimRows(t){this.hot.batchExecution(()=>{(0,iy.arrayEach)(t,t=>{this.plugin.collapsedRowsMap.setValueAtIndex(t,!0)})},!0)}untrimRows(t){this.hot.batchExecution(()=>{(0,iy.arrayEach)(t,t=>{this.plugin.collapsedRowsMap.setValueAtIndex(t,!1)})},!0)}areChildrenCollapsed(t){let e=isNaN(t)?t:this.dataManager.getDataObject(t),i=!0;return null===e&&(e={__children:this.dataManager.data}),this.dataManager.hasChildren(e)&&(0,iy.arrayEach)(e.__children,t=>{let e=this.dataManager.getRowIndex(t);if(!this.plugin.collapsedRowsMap.getValueAtIndex(e))return i=!1,!1}),i}isAnyParentCollapsed(t){let e=t;for(;null!==e;){e=this.dataManager.getRowParent(e);let t=this.dataManager.getRowIndex(e);if(this.collapsedRows.indexOf(t)>-1)return!0}return!1}toggleState(t,e){if(e.col>=0)return;let i=this.translateTrimmedRow(e.row);(0,eG.hasClass)(t.target,_U.CSS_CLASSES.button)&&(this.areChildrenCollapsed(i)?this.expandChildren(i):this.collapseChildren(i),(0,eq.stopImmediatePropagation)(t))}translateTrimmedRow(t){return this.hot.toPhysicalRow(t)}untranslateTrimmedRow(t){return this.hot.toVisualRow(t)}renderAndAdjust(){this.hot.render(),this.hot.view.adjustElementsSize()}};t4("1C6fS");var i0=t4("guO5N"),iy=t4("ceXML"),_Y=new WeakMap,_X=class extends _j{constructor(){var t,e,i,n;super(...arguments),t="dataManager",e=this.plugin.dataManager,(t="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string"))?n:n+"")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e,i={row_above:(t,e)=>{let i=e[e.length-1];this.dataManager.addSibling(i.start.row,"above")},row_below:(t,e)=>{let i=e[e.length-1];this.dataManager.addSibling(i.start.row,"below")}},function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,_Y),_Y.set(this,i)}appendOptions(t){let e=[{key:"add_child",name(){return this.getTranslatedPhrase(sK)},callback:()=>{let t=this.dataManager.translateTrimmedRow(this.hot.getSelectedLast()[0]),e=this.dataManager.getDataObject(t);this.dataManager.addChild(e)},disabled:()=>{let t=this.hot.getSelectedLast();return!t||t[0]<0||this.hot.selection.isSelectedByColumnHeader()||this.hot.countRows()>=this.hot.getSettings().maxRows}},{key:"detach_from_parent",name(){return this.getTranslatedPhrase(sQ)},callback:()=>{this.dataManager.detachFromParent(this.hot.getSelectedLast())},disabled:()=>{let t=this.hot.getSelectedLast(),e=this.dataManager.translateTrimmedRow(t[0]);return!this.dataManager.getRowParent(e)||!t||t[0]<0||this.hot.selection.isSelectedByColumnHeader()||this.hot.countRows()>=this.hot.getSettings().maxRows}},{name:"---------"}];return(0,i0.rangeEach)(0,t.items.length-1,i=>{if(0===i)return(0,iy.arrayEach)(e,(e,n)=>{t.items.splice(i+n,0,e)}),!1}),this.modifyRowInsertingOptions(t)}modifyRowInsertingOptions(t){return(0,i0.rangeEach)(0,t.items.length-1,e=>{let i=_Y.get(function(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}(_Y,this))[t.items[e].key];null!=i&&(t.items[e].callback=i)}),t}},e8=t4("jlXkd");t4("1C6fS"),t4("1hIp0");var eX=t4("gnaTS"),e8=t4("jlXkd"),nJ=t4("iCsRe");function _$(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class _Z{constructor(t){_$(this,"plugin",void 0),_$(this,"hot",void 0),_$(this,"dataManager",void 0),_$(this,"collapsingUI",void 0),this.plugin=t,this.hot=t.hot,this.dataManager=t.dataManager,this.collapsingUI=t.collapsingUI}onBeforeRowMove(t,e,i,n){if(this.displayAPICompatibilityWarning({rows:t,finalIndex:e,dropIndex:i,movePossible:n}))return!1;this.movedToCollapsed=!1;let r=i===this.hot.countRows(),o=r?this.hot.countSourceRows():this.dataManager.translateTrimmedRow(i),a=!0,s=t.map(t=>{if(!a)return!1;let e=this.dataManager.translateTrimmedRow(t);return a=this.shouldAllowMoving(e,o),e}),l=-1===s.indexOf(o);if(!a||!l)return!1;let h=this.getBaseParent(s),u=this.getTargetParent(r,o),c=h===u;return this.movedToCollapsed=this.collapsingUI.areChildrenCollapsed(u),this.collapsingUI.collapsedRowsStash.stash(),this.shiftCollapsibleParentsLocations(s,o,c),this.moveRows(s,o,u),this.dataManager.rewriteCache(),this.moveCellsMeta(s,o),this.collapsingUI.collapsedRowsStash.applyStash(!1),this.hot.runHooks("afterRowMove",t,e,i,n,n&&this.isRowOrderChanged(t,e)),this.hot.render(),this.selectCells(t,i),!1}displayAPICompatibilityWarning(t){let{rows:e,finalIndex:i,dropIndex:n,movePossible:r}=t,o=!1;return(0,eX.isUndefined)(n)&&((0,e8.warn)((0,nJ.toSingleLine)`Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows\x20
      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead.`),this.hot.runHooks("afterRowMove",e,i,n,r,!1),o=!0),o}shouldAllowMoving(t,e){return!(this.dataManager.isParent(t)||this.dataManager.isRowHighestLevel(t)||t===e||0===e)}getBaseParent(t){return this.dataManager.getRowParent(t[0])}getTargetParent(t,e){let i=this.dataManager.getRowParent(t?e-1:e);return null==i&&(i=this.dataManager.getRowParent(e-1)),i}shiftCollapsibleParentsLocations(t,e,i){i||(Math.max(...t)<=e?this.collapsingUI.collapsedRowsStash.shiftStash(t[0],e,-1*t.length):this.collapsingUI.collapsedRowsStash.shiftStash(e,t[0],t.length))}moveRows(t,e,i){let n=e===this.dataManager.getRowIndex(i)+this.dataManager.countChildren(i)+1;this.hot.batchRender(()=>{t.forEach(t=>{this.dataManager.moveRow(t,e,this.movedToCollapsed,n)})})}moveCellsMeta(t,e){let i=[];t.forEach(t=>{i.push(this.hot.getCellMetaAtRow(t))}),this.hot.spliceCellsMeta(t[0],t.length),this.hot.spliceCellsMeta(e-(Math.max(...t)<e?i.length:0),0,...i)}selectCells(t,e){let i=t.length,n=0,r=0,o=null,a=null;if(this.movedToCollapsed){let o=null;o=t[i-1]<e?this.dataManager.translateTrimmedRow(e-i):this.dataManager.translateTrimmedRow(e);let a=this.dataManager.getRowParent(null===o?this.hot.countSourceRows()-1:o-1),s=this.dataManager.getRowIndex(a);r=n=this.dataManager.untranslateTrimmedRow(s)}else t[i-1]<e?n=(r=e-1)-i+1:r=(n=e)+i-1;o=this.hot.selection,a=this.hot.countCols()-1,o.setRangeStart(this.hot._createCellCoords(n,0)),o.setRangeEnd(this.hot._createCellCoords(r,a),!0)}isRowOrderChanged(t,e){return t.some((t,i)=>t-i!==e)}}function _q(t,e,i){_K(t,e),e.set(t,i)}function _K(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function _Q(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _J(t,e){return t.get(_1(t,e))}function _0(t,e,i){return t.set(_1(t,e),i),i}function _1(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const _2="nestedRows";var _5=new WeakMap,_3=new WeakMap,_4=new WeakSet;function _6(t,e,i,n){return this.rowMoveController.onBeforeRowMove(t,e,i,n)}function _8(t,e,i){this.collapsingUI.toggleState(t,e,i)}function _9(t,e,i){return this.collapsingUI.collapsedRowsStash.stash(),this.collapsingUI.collapsedRowsStash.trimStash(i[0],e),this.collapsingUI.collapsedRowsStash.shiftStash(i[0],null,-1*e),this.dataManager.filterData(t,e,i),_0(_5,this,!0),this.dataManager.getData().slice()}function _7(t){return this.contextMenuUI.appendOptions(t)}function Mt(t,e){this.headersUI.appendLevelIndicators(t,e)}function Me(t){return Math.max(this.headersUI.rowHeaderWidthCache,t)}function Mi(t,e,i,n){n!==this.pluginName&&this.hot._registerTimeout(()=>{_0(_5,this,!1),this.headersUI.updateRowHeaderWidth(),this.collapsingUI.collapsedRowsStash.applyStash()})}function Mn(t,e,i){let n=Array.from(i.reduce((t,e)=>{if(this.dataManager.isParent(e)){let i=this.dataManager.getDataObject(e).__children;return t.add(e),Array.isArray(i)&&i.forEach(e=>t.add(this.dataManager.getRowIndex(e))),t}return t.add(e)},new Set));i.length=0,i.push(...n)}function Mr(){this.collapsingUI.collapsedRowsStash.stash()}function Mo(t,e){this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(e)),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}function Ma(){this.collapsingUI.collapsedRowsStash.stash()}function Ms(t,e,i){this.collapsingUI.collapsedRowsStash.shiftStash(i,null,-1),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}function Ml(){this.dataManager.rewriteCache()}function Mh(){this.headersUI.updateRowHeaderWidth()}function Mu(t,e){_J(_5,this)&&(e.skipRender=!0)}function Mc(t){if(!aD(t)){(0,e8.error)("The Nested Rows plugin requires an Array of Objects as a dataset to be provided. The plugin has been disabled."),this.hot.getSettings()[_2]=!1,this.disablePlugin();return}this.dataManager.setData(t),this.dataManager.rewriteCache()}t4("1C6fS"),t4("1C6fS"),t4("1hIp0"),t4("euqEx");var iy=t4("ceXML");function Md(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Mp=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;Md(this,"rootWindow",void 0),Md(this,"prefix",void 0),Md(this,"savedKeys",[]),this.rootWindow=e,this.prefix=t,this.loadSavedKeys()}saveValue(t,e){this.rootWindow.localStorage.setItem(`${this.prefix}_${t}`,JSON.stringify(e)),-1===this.savedKeys.indexOf(t)&&(this.savedKeys.push(t),this.saveSavedKeys())}loadValue(t,e){let i=this.rootWindow.localStorage.getItem(`${this.prefix}_${void 0===t?e:t}`);return null===i?void 0:JSON.parse(i)}reset(t){this.rootWindow.localStorage.removeItem(`${this.prefix}_${t}`)}resetAll(){(0,iy.arrayEach)(this.savedKeys,(t,e)=>{this.rootWindow.localStorage.removeItem(`${this.prefix}_${this.savedKeys[e]}`)}),this.clearSavedKeys()}loadSavedKeys(){let t=this.rootWindow.localStorage.getItem(`${this.prefix}__persistentStateKeys`),e="string"==typeof t?JSON.parse(t):void 0;this.savedKeys=e||[]}saveSavedKeys(){this.rootWindow.localStorage.setItem(`${this.prefix}__persistentStateKeys`,JSON.stringify(this.savedKeys))}clearSavedKeys(){this.savedKeys.length=0,this.saveSavedKeys()}},sa=t4("10euP");(0,sa.default).getSingleton().register("persistentStateSave"),(0,sa.default).getSingleton().register("persistentStateLoad"),(0,sa.default).getSingleton().register("persistentStateReset");const Mf="persistentState";t4("1C6fS"),t4("1hIp0");var e6=t4("hwT6B"),i0=t4("guO5N"),eX=t4("gnaTS");function Mg(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Mm(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}const My="search",Mv=function(t,e,i,n,r){t.getCellMeta(e,i).isSearchResult=r},Mw=function(t,e,i){return!((0,eX.isUndefined)(t)||null===t||!t.toLocaleLowerCase||0===t.length||(0,eX.isUndefined)(e)||null===e)&&-1!==e.toString().toLocaleLowerCase(i.locale).indexOf(t.toLocaleLowerCase(i.locale))};var Mb=new WeakSet;function Mx(t,e,i,n,r,o){let a=o.className||[],s=[];"string"==typeof a?s=a.split(" "):s.push(...a),this.isEnabled()&&o.isSearchResult?s.includes(this.searchResultClass)||s.push(`${this.searchResultClass}`):s.includes(this.searchResultClass)&&s.splice(s.indexOf(this.searchResultClass),1),o.className=s.join(" ")}t4("1C6fS"),t4("1hIp0");var eG=t4("gFbQZ"),iy=t4("ceXML"),nw=t4("llu1T");function MS(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function MC(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")}var M_=new WeakSet;function MM(){if(this.lockedCollection)return;let{topOverlay:t,bottomOverlay:e,inlineStartOverlay:i,topInlineStartCornerOverlay:n,bottomInlineStartCornerOverlay:r}=this.hot.view._wt.wtOverlays;this.lockedCollection=!0,this.scrollbars.length=0,this.scrollbars.push(t),e.clone&&this.scrollbars.push(e),this.scrollbars.push(i),n&&this.scrollbars.push(n),r&&r.clone&&this.scrollbars.push(r),this.clones=[],t.needFullRender&&this.clones.push(t.clone.wtTable.holder.parentNode),e.needFullRender&&this.clones.push(e.clone.wtTable.holder.parentNode),i.needFullRender&&this.clones.push(i.clone.wtTable.holder.parentNode),n&&this.clones.push(n.clone.wtTable.holder.parentNode),r&&r.clone&&this.clones.push(r.clone.wtTable.holder.parentNode)}function MT(){this.freezeOverlays=!0,(0,iy.arrayEach)(this.clones,t=>{(0,eG.addClass)(t,"hide-tween")})}function MI(){this.freezeOverlays=!1,(0,iy.arrayEach)(this.clones,t=>{(0,eG.removeClass)(t,"hide-tween"),(0,eG.addClass)(t,"show-tween")}),this.hot._registerTimeout(()=>{(0,iy.arrayEach)(this.clones,t=>{(0,eG.removeClass)(t,"show-tween")})},400),(0,iy.arrayEach)(this.scrollbars,t=>{t.refresh(),t.resetFixedPosition()}),this.hot.view._wt.wtOverlays.syncScrollWithMaster()}t4("1C6fS"),t4("1hIp0"),t4("k39HK"),t4("aV15b"),t4("dnHaV"),t4("5gWvu"),t4("e15eH"),t4("jPPWz"),t4("hgmxI");var iy=t4("ceXML");const MR="trimRows";var ME=new WeakSet;function MA(){let t=this.hot.getSettings()[MR];Array.isArray(t)&&this.hot.batchExecution(()=>{(0,iy.arrayEach)(t,t=>{this.trimmedRowsMap.setValueAtIndex(t,!0)})},!0)}t4("1hIp0");var ei=t4("hmx0d"),Mk={},iw=t4("bGtV7"),ik=t4("hc2VB"),f_=t4("chuuX"),MD={},i_=t4("blCy8"),MO={};MO={};var MP=i_("iterator"),ML=Array.prototype;MD=function(t){return void 0!==t&&(MO.Array===t||ML[MP]===t)};var of=t4("ptmgx"),iE=t4("5Ef1u"),MN={},iw=t4("bGtV7"),eu=t4("eXHxq"),ik=t4("hc2VB"),f_=t4("chuuX"),MH={},MV=t4("f9qXf"),iI=t4("kdzTk"),ix=t4("aIKND"),i_=t4("blCy8"),MB=i_("iterator");MH=function(t){if(!ix(t))return iI(t,MB)||iI(t,"@@iterator")||MO[MV(t)]};var MF=TypeError;MN=function(t,e){var i=arguments.length<2?MH(t):e;if(eu(i))return ik(iw(i,t));throw new MF(f_(t)+" is not iterable")};var MW=t4("5A6El"),Mz=TypeError,Mj=function(t,e){this.stopped=t,this.result=e},MU=Mj.prototype;Mk=function(t,e,i){var n,r,o,a,s,l,h,u=i&&i.that,c=!!(i&&i.AS_ENTRIES),d=!!(i&&i.IS_RECORD),p=!!(i&&i.IS_ITERATOR),f=!!(i&&i.INTERRUPTED),g=ea(e,u),m=function(t){return n&&MW(n,"normal",t),new Mj(!0,t)},y=function(t){return c?(ik(t),f?g(t[0],t[1],m):g(t[0],t[1])):f?g(t,m):g(t)};if(d)n=t.iterator;else if(p)n=t;else{if(!(r=MH(t)))throw new Mz(f_(t)+" is not iterable");if(MD(r)){for(o=0,a=of(t);a>o;o++)if((s=y(t[o]))&&iE(MU,s))return s;return new Mj(!1)}n=MN(t,r)}for(l=d?t.next:n.next;!(h=iw(l,n)).done;){try{s=y(h.value)}catch(t){MW(n,"throw",t)}if("object"==typeof s&&s&&iE(MU,s))return s}return new Mj(!1)};var MG={},MY=t4("kxexm"),MX=t4("3RKYQ"),M$=t4("fEYls");MG=function(t,e,i){MY?MX.f(t,e,M$(0,i)):t[e]=i},ei({target:"Object",stat:!0},{fromEntries:function(t){var e={};return Mk(t,function(t,i){MG(e,t,i)},{AS_ENTRIES:!0}),e}});var sa=t4("10euP"),iy=t4("ceXML"),i0=t4("guO5N"),e6=t4("hwT6B");const MZ="undoRedo";function Mq(t){let e=this;this.instance=t,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,this.enabled=!1,t.addHook("afterChange",function(i,n){let r=i&&i.length;r&&i.find(t=>{let[,,e,i]=t;return e!==i})&&e.done(()=>{let e=i.reduce((t,e)=>(t.push([...e]),t),[]);(0,iy.arrayEach)(e,e=>{e[1]=t.propToCol(e[1])});let n=r>1?this.getSelected():[[e[0][0],e[0][1]]];return new Mq.ChangeAction(e,n)},n)}),t.addHook("afterCreateRow",(t,i,n)=>{e.done(()=>new Mq.CreateRowAction(t,i),n)});let i=(e,i,n,r)=>{let o=["visualRow","visualCol","row","col","prop"],a=o.length,s=[];return(0,i0.rangeEach)(n,r,n=>{(0,i0.rangeEach)(e,i,e=>{let i=t.getCellMeta(e,n);if(Object.keys(i).length!==a){let t=Object.fromEntries(Object.entries(i).filter(t=>{let[e]=t;return!1===o.includes(e)}));s.push([i.visualRow,i.visualCol,t])}})}),s};t.addHook("beforeRemoveRow",(n,r,o,a)=>{e.done(()=>{let o=t.toPhysicalRow(n),a=o+r-1,s=(0,e6.deepClone)(e.instance.getSourceData(o,0,o+r-1,e.instance.countSourceCols()-1));return new Mq.RemoveRowAction(o,s,t.getSettings().fixedRowsBottom,t.getSettings().fixedRowsTop,t.rowIndexMapper.getIndexesSequence(),i(o,a,0,t.countCols()-1))},a)}),t.addHook("afterCreateCol",(t,i,n)=>{e.done(()=>new Mq.CreateColumnAction(t,i),n)}),t.addHook("beforeRemoveCol",(n,r,o,a)=>{e.done(()=>{let o=e.instance.getSourceDataArray(),a=(e.instance.countCols()+n)%e.instance.countCols(),s=a+r-1,l=[],h=[],u=[];(0,i0.rangeEach)(o.length-1,e=>{let i=[],n=o[e];(0,i0.rangeEach)(a,s,e=>{i.push(n[t.toPhysicalColumn(e)])}),l.push(i)}),(0,i0.rangeEach)(r-1,e=>{u.push(t.toPhysicalColumn(a+e))}),Array.isArray(t.getSettings().colHeaders)&&(0,i0.rangeEach)(r-1,e=>{h.push(t.getSettings().colHeaders[t.toPhysicalColumn(a+e)]||null)});let c=t.columnIndexMapper.getIndexesSequence(),d=t.rowIndexMapper.getIndexesSequence();return new Mq.RemoveColumnAction(a,u,l,h,c,d,t.getSettings().fixedColumnsStart,i(0,t.countRows(),a,s))},a)}),t.addHook("beforeCellAlignment",(t,i,n,r)=>{e.done(()=>new Mq.CellAlignmentAction(t,i,n,r))}),t.addHook("beforeFilter",(t,i)=>{e.done(()=>new Mq.FiltersAction(t,i))}),t.addHook("beforeRowMove",(t,i)=>{!1!==t&&e.done(()=>new Mq.RowMoveAction(t,i))}),t.addHook("beforeColumnMove",(t,i)=>{!1!==t&&e.done(()=>new Mq.ColumnMoveAction(t,i))}),t.addHook("beforeMergeCells",(i,n)=>{n||e.done(()=>new Mq.MergeCellsAction(t,i))}),t.addHook("afterUnmergeCells",(i,n)=>{n||e.done(()=>new Mq.UnmergeCellsAction(t,i))}),t.addHook("beforeColumnSort",(t,i,n)=>{n&&e.done(()=>new Mq.ColumnSortAction(t,i))}),t.addHook("afterInit",()=>{e.init()})}Mq.prototype.done=function(t,e){if(this.ignoreNewActions||"UndoRedo.undo"===e||"UndoRedo.redo"===e||"auto"===e)return;let i=this.doneActions.slice();if(!1===this.instance.runHooks("beforeUndoStackChange",i,e))return;let n=t(),r=this.undoneActions.slice();this.doneActions.push(n),this.instance.runHooks("afterUndoStackChange",i,this.doneActions.slice()),this.instance.runHooks("beforeRedoStackChange",r),this.undoneActions.length=0,this.instance.runHooks("afterRedoStackChange",r,this.undoneActions.slice())},Mq.prototype.undo=function(){if(this.isUndoAvailable()){let t=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",t);let e=this.doneActions.pop();this.instance.runHooks("afterUndoStackChange",t,this.doneActions.slice());let i=(0,e6.deepClone)(e);if(!1===this.instance.runHooks("beforeUndo",i))return;this.ignoreNewActions=!0;let n=this,r=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",r),e.undo(this.instance,()=>{n.ignoreNewActions=!1,n.undoneActions.push(e)}),this.instance.runHooks("afterRedoStackChange",r,this.undoneActions.slice()),this.instance.runHooks("afterUndo",i)}},Mq.prototype.redo=function(){if(this.isRedoAvailable()){let t=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",t);let e=this.undoneActions.pop();this.instance.runHooks("afterRedoStackChange",t,this.undoneActions.slice());let i=(0,e6.deepClone)(e);if(!1===this.instance.runHooks("beforeRedo",i))return;this.ignoreNewActions=!0;let n=this,r=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",r),e.redo(this.instance,()=>{n.ignoreNewActions=!1,n.doneActions.push(e)}),this.instance.runHooks("afterUndoStackChange",r,this.doneActions.slice()),this.instance.runHooks("afterRedo",i)}},Mq.prototype.isUndoAvailable=function(){return this.doneActions.length>0},Mq.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},Mq.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},Mq.prototype.isEnabled=function(){return this.enabled},Mq.prototype.enable=function(){if(this.isEnabled())return;let t=this.instance;this.enabled=!0,t.undo=function(){return t.undoRedo.undo()},t.redo=function(){return t.undoRedo.redo()},t.isUndoAvailable=function(){return t.undoRedo.isUndoAvailable()},t.isRedoAvailable=function(){return t.undoRedo.isRedoAvailable()},t.clearUndo=function(){return t.undoRedo.clear()},this.registerShortcuts(),t.addHook("afterChange",MJ)},Mq.prototype.disable=function(){if(!this.isEnabled())return;let t=this.instance;this.enabled=!1,delete t.undo,delete t.redo,delete t.isUndoAvailable,delete t.isRedoAvailable,delete t.clearUndo,this.unregisterShortcuts(),t.removeHook("afterChange",MJ)},Mq.prototype.destroy=function(){this.clear(),this.instance=null,this.doneActions=null,this.undoneActions=null},Mq.Action=function(){},Mq.Action.prototype.undo=function(){},Mq.Action.prototype.redo=function(){},Mq.ChangeAction=function(t,e){this.changes=t,this.selected=e,this.actionType="change"},(0,e6.inherit)(Mq.ChangeAction,Mq.Action),Mq.ChangeAction.prototype.undo=function(t,e){let i=(0,e6.deepClone)(this.changes),n=t.countEmptyRows(!0),r=t.countEmptyCols(!0);for(let t=0,e=i.length;t<e;t++)i[t].splice(3,1);t.addHookOnce("afterChange",e),t.setDataAtCell(i,null,null,"UndoRedo.undo");for(let e=0,o=i.length;e<o;e++){let[o,a]=i[e];t.getSettings().minSpareRows&&o+1+t.getSettings().minSpareRows===t.countRows()&&n===t.getSettings().minSpareRows&&(t.alter("remove_row",parseInt(o+1,10),t.getSettings().minSpareRows),t.undoRedo.doneActions.pop()),t.getSettings().minSpareCols&&a+1+t.getSettings().minSpareCols===t.countCols()&&r===t.getSettings().minSpareCols&&(t.alter("remove_col",parseInt(a+1,10),t.getSettings().minSpareCols),t.undoRedo.doneActions.pop())}let o=t.getSelectedLast();if(void 0!==o){let[e,n]=i[0],[r,a]=o,s=t.view.getFirstFullyVisibleRow(),l=t.view.getFirstFullyVisibleColumn(),h=e>=s,u=n>=l,c=r!==e||a!==n;if(!1===(h&&u)&&!0===c){let i={row:e,col:n};!1===h&&(i.verticalSnap="top"),!1===u&&(i.horizontalSnap="start"),t.scrollViewportTo(i)}}t.selectCells(this.selected,!1,!1)},Mq.ChangeAction.prototype.redo=function(t,e){let i=(0,e6.deepClone)(this.changes);for(let t=0,e=i.length;t<e;t++)i[t].splice(2,1);t.addHookOnce("afterChange",e),t.setDataAtCell(i,null,null,"UndoRedo.redo"),this.selected&&t.selectCells(this.selected,!1,!1)},Mq.CreateRowAction=function(t,e){this.index=t,this.amount=e,this.actionType="insert_row"},(0,e6.inherit)(Mq.CreateRowAction,Mq.Action),Mq.CreateRowAction.prototype.undo=function(t,e){let i=t.countRows(),n=t.getSettings().minSpareRows;this.index>=i&&this.index-n<i&&(this.index-=n),t.addHookOnce("afterRemoveRow",e),t.alter("remove_row",this.index,this.amount,"UndoRedo.undo")},Mq.CreateRowAction.prototype.redo=function(t,e){t.addHookOnce("afterCreateRow",e),t.alter("insert_row_above",this.index,this.amount,"UndoRedo.redo")},Mq.RemoveRowAction=function(t,e,i,n,r,o){this.index=t,this.data=e,this.actionType="remove_row",this.fixedRowsBottom=i,this.fixedRowsTop=n,this.rowIndexesSequence=r,this.removedCellMetas=o},(0,e6.inherit)(Mq.RemoveRowAction,Mq.Action),Mq.RemoveRowAction.prototype.undo=function(t,e){let i=t.getSettings(),n=[];i.fixedRowsBottom=this.fixedRowsBottom,i.fixedRowsTop=this.fixedRowsTop,this.data.forEach((t,e)=>{Object.keys(t).forEach(i=>{let r=parseInt(i,10);n.push([this.index+e,isNaN(r)?i:r,t[i]])})}),t.alter("insert_row_above",this.index,this.data.length,"UndoRedo.undo"),this.removedCellMetas.forEach(e=>{let[i,n,r]=e;t.setCellMetaObject(i,n,r)}),t.addHookOnce("afterViewRender",e),t.setSourceDataAtCell(n,null,null,"UndoRedo.undo"),t.rowIndexMapper.setIndexesSequence(this.rowIndexesSequence)},Mq.RemoveRowAction.prototype.redo=function(t,e){t.addHookOnce("afterRemoveRow",e),t.alter("remove_row",this.index,this.data.length,"UndoRedo.redo")},Mq.CreateColumnAction=function(t,e){this.index=t,this.amount=e,this.actionType="insert_col"},(0,e6.inherit)(Mq.CreateColumnAction,Mq.Action),Mq.CreateColumnAction.prototype.undo=function(t,e){t.addHookOnce("afterRemoveCol",e),t.alter("remove_col",this.index,this.amount,"UndoRedo.undo")},Mq.CreateColumnAction.prototype.redo=function(t,e){t.addHookOnce("afterCreateCol",e),t.alter("insert_col_start",this.index,this.amount,"UndoRedo.redo")},Mq.RemoveColumnAction=function(t,e,i,n,r,o,a,s){this.index=t,this.indexes=e,this.data=i,this.amount=this.data[0].length,this.headers=n,this.columnPositions=r.slice(0),this.rowPositions=o.slice(0),this.actionType="remove_col",this.fixedColumnsStart=a,this.removedCellMetas=s},(0,e6.inherit)(Mq.RemoveColumnAction,Mq.Action),Mq.RemoveColumnAction.prototype.undo=function(t,e){t.getSettings().fixedColumnsStart=this.fixedColumnsStart;let i=this.indexes.slice(0).sort(),n=(t,e,n)=>n[this.indexes.indexOf(i[e])],r=this.data.length,o=[];for(let t=0;t<r;t++)o.push((0,iy.arrayMap)(this.data[t],n));let a=(0,iy.arrayMap)(this.headers,n),s=[];t.alter("insert_col_start",this.indexes[0],this.indexes.length,"UndoRedo.undo"),(0,iy.arrayEach)(t.getSourceDataArray(),(t,e)=>{(0,iy.arrayEach)(i,(i,n)=>{t[i]=o[e][n],s.push([e,i,t[i]])})}),t.setSourceDataAtCell(s,void 0,void 0,"UndoRedo.undo"),void 0!==this.headers&&(0,iy.arrayEach)(a,(e,n)=>{t.getSettings().colHeaders[i[n]]=e}),this.removedCellMetas.forEach(e=>{let[i,n,r]=e;t.setCellMetaObject(i,n,r)}),t.batchExecution(()=>{t.rowIndexMapper.setIndexesSequence(this.rowPositions),t.columnIndexMapper.setIndexesSequence(this.columnPositions)},!0),t.addHookOnce("afterViewRender",e),t.render()},Mq.RemoveColumnAction.prototype.redo=function(t,e){t.addHookOnce("afterRemoveCol",e),t.alter("remove_col",this.index,this.amount,"UndoRedo.redo")},Mq.CellAlignmentAction=function(t,e,i,n){this.stateBefore=t,this.range=e,this.type=i,this.alignment=n},Mq.CellAlignmentAction.prototype.undo=function(t,e){(0,iy.arrayEach)(this.range,e=>{e.forAll((e,i)=>{e>=0&&i>=0&&t.setCellMeta(e,i,"className",this.stateBefore[e][i]||" htLeft")})}),t.addHookOnce("afterViewRender",e),t.render()},Mq.CellAlignmentAction.prototype.redo=function(t,e){pV(this.range,this.type,this.alignment,(e,i)=>t.getCellMeta(e,i),(e,i,n,r)=>t.setCellMeta(e,i,n,r)),t.addHookOnce("afterViewRender",e),t.render()},Mq.FiltersAction=function(t,e){this.previousConditionsStack=e,this.conditionsStack=t,this.actionType="filter"},(0,e6.inherit)(Mq.FiltersAction,Mq.Action),Mq.FiltersAction.prototype.undo=function(t,e){let i=t.getPlugin("filters");t.addHookOnce("afterViewRender",e),this.previousConditionsStack&&i.conditionCollection.importAllConditions(this.previousConditionsStack),i.filter()},Mq.FiltersAction.prototype.redo=function(t,e){let i=t.getPlugin("filters");t.addHookOnce("afterViewRender",e),i.conditionCollection.importAllConditions(this.conditionsStack),i.filter()};class MK extends Mq.Action{constructor(t,e){super(),this.cellRange=e;let i=this.cellRange.getTopStartCorner(),n=this.cellRange.getBottomEndCorner();this.rangeData=t.getData(i.row,i.col,n.row,n.col)}undo(t,e){let i=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),i.unmergeRange(this.cellRange,!0);let n=this.cellRange.getTopStartCorner();t.populateFromArray(n.row,n.col,this.rangeData,void 0,void 0,"MergeCells")}redo(t,e){let i=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),i.mergeRange(this.cellRange)}}Mq.MergeCellsAction=MK;class MQ extends Mq.Action{constructor(t,e){super(),this.cellRange=e}undo(t,e){let i=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),i.mergeRange(this.cellRange,!0)}redo(t,e){let i=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),i.unmergeRange(this.cellRange,!0),t.render()}}function MJ(t,e){if("loadData"===e)return this.undoRedo.clear()}Mq.UnmergeCellsAction=MQ,Mq.RowMoveAction=function(t,e){this.rows=t.slice(),this.finalRowIndex=e,this.actionType="row_move"},(0,e6.inherit)(Mq.RowMoveAction,Mq.Action),Mq.RowMoveAction.prototype.undo=function(t,e){let i=t.getPlugin("manualRowMove");t.addHookOnce("afterViewRender",e),vQ(this.rows,this.finalRowIndex,t.rowIndexMapper.getNumberOfIndexes()).reverse().forEach(t=>{let{from:e,to:n}=t;e<n&&(n-=1),i.moveRow(n,e)}),t.render(),t.deselectCell(),t.selectRows(this.rows[0],this.rows[0]+this.rows.length-1)},Mq.RowMoveAction.prototype.redo=function(t,e){let i=t.getPlugin("manualRowMove");t.addHookOnce("afterViewRender",e),i.moveRows(this.rows.slice(),this.finalRowIndex),t.render(),t.deselectCell(),t.selectRows(this.finalRowIndex,this.finalRowIndex+this.rows.length-1)},Mq.ColumnMoveAction=function(t,e){this.columns=t.slice(),this.finalColumnIndex=e,this.actionType="col_move"},(0,e6.inherit)(Mq.ColumnMoveAction,Mq.Action),Mq.ColumnMoveAction.prototype.undo=function(t,e){let i=t.getPlugin("manualColumnMove");t.addHookOnce("afterViewRender",e),vQ(this.columns,this.finalColumnIndex,t.columnIndexMapper.getNumberOfIndexes()).reverse().forEach(t=>{let{from:e,to:n}=t;e<n&&(n-=1),i.moveColumn(n,e)}),t.render(),t.deselectCell(),t.selectColumns(this.columns[0],this.columns[0]+this.columns.length-1)},Mq.ColumnMoveAction.prototype.redo=function(t,e){let i=t.getPlugin("manualColumnMove");t.addHookOnce("afterViewRender",e),i.moveColumns(this.columns.slice(),this.finalColumnIndex),t.render(),t.deselectCell(),t.selectColumns(this.finalColumnIndex,this.finalColumnIndex+this.columns.length-1)},Mq.ColumnSortAction=function(t,e){this.previousSortState=t,this.nextSortState=e},(0,e6.inherit)(Mq.ColumnSortAction,Mq.Action),Mq.ColumnSortAction.prototype.undo=function(t,e){let i=t.getPlugin("columnSorting"),n=t.getPlugin("multiColumnSorting"),r=n.isEnabled()?n:i;this.previousSortState.length?r.sort(this.previousSortState):r.clearSort(),e()},Mq.ColumnSortAction.prototype.redo=function(t,e){let i=t.getPlugin("columnSorting"),n=t.getPlugin("multiColumnSorting");(n.isEnabled()?n:i).sort(this.nextSortState),e()},Mq.prototype.init=function(){let t=this.instance.getSettings().undo;this.instance.undoRedo||(this.instance.undoRedo=this),void 0===t||t?this.instance.undoRedo.enable():this.instance.undoRedo.disable()},Mq.prototype.registerShortcuts=function(){this.instance.getShortcutManager().getContext("grid").addShortcuts([{keys:[["Control/Meta","z"]],callback:()=>{this.undo()}},{keys:[["Control/Meta","y"],["Control/Meta","Shift","z"]],callback:()=>{this.redo()}}],{runOnlyIf:t=>!t.altKey,group:MZ})},Mq.prototype.unregisterShortcuts=function(){this.instance.getShortcutManager().getContext("grid").removeShortcutsByGroup(MZ)};const M0=(0,sa.default).getSingleton();M0.add("afterUpdateSettings",function(){var t;null===(t=this.getPlugin("undoRedo"))||void 0===t||t.init()}),M0.register("beforeUndo"),M0.register("afterUndo"),M0.register("beforeRedo"),M0.register("afterRedo"),Mq.PLUGIN_KEY="undoRedo",Mq.SETTING_KEYS=!0;var eQ=t4("1k8Ev");t4("1C6fS");var iy=t4("ceXML"),e$=t4("eL8cl"),M1=t4("7cVHX"),nw=t4("llu1T"),eY=t4("f3221"),eX=t4("gnaTS"),i0=t4("guO5N"),e6=t4("hwT6B"),iJ=t4("bO142"),eZ=t4("bCtEl"),eG=t4("gFbQZ"),eq=t4("7HxIw"),eK=t4("jxqWV");(0,eK.registerEditor)(uv.BaseEditor),(0,eK.registerEditor)(uN),(0,eK.registerEditor)(uH),(0,eK.registerEditor)(uV.DateEditor),(0,eK.registerEditor)(uB),(0,eK.registerEditor)(uD),(0,eK.registerEditor)(uF),(0,eK.registerEditor)(uW),(0,eK.registerEditor)(uU),(0,eK.registerEditor)(uT.TextEditor),(0,eK.registerEditor)(uG),nc(uX),nc(uI),nc(u0),nc(u$),nc(u2),nc(uY),nc(u4),nc(u6),nc(u8),nc(uR),nc(u9),nv(u7),nv(ci),nv(ce.dateValidator),nv(cn),nv(ca),hW({CELL_TYPE:"autocomplete",editor:uN,renderer:uX,validator:u7}),hW({CELL_TYPE:"checkbox",editor:uH,renderer:u0}),hW(cl),hW({CELL_TYPE:"dropdown",editor:uB,renderer:u$,validator:ci}),hW({CELL_TYPE:"handsontable",editor:uD,renderer:u2}),hW({CELL_TYPE:"numeric",editor:uF,renderer:u4,validator:cn,dataType:"number"}),hW({CELL_TYPE:"password",editor:uW,renderer:u6,copyable:!1}),hW({CELL_TYPE:"select",editor:uU,renderer:u8}),hW(uE),hW({CELL_TYPE:"time",editor:uG,renderer:u9,validator:ca}),nn(cP),nn(class extends cv{constructor(){super(...arguments),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,cX),cX.add(this),cj(this,"addingStarted",!1),cj(this,"mouseDownOnCellCorner",!1),cj(this,"mouseDragOutside",!1),cj(this,"handleDraggedCells",0),cj(this,"directions",[]),cj(this,"autoInsertRow",!1)}static get PLUGIN_KEY(){return cG}static get PLUGIN_PRIORITY(){return 20}static get SETTING_KEYS(){return[cG,...cY]}isEnabled(){return this.hot.getSettings().fillHandle}enablePlugin(){this.enabled||(this.mapSettings(),this.registerEvents(),this.addHook("afterOnCellCornerMouseDown",t=>cU(cX,this,cZ).call(this,t)),this.addHook("afterOnCellCornerDblClick",t=>cU(cX,this,c$).call(this,t)),this.addHook("beforeOnCellMouseOver",(t,e)=>cU(cX,this,cq).call(this,e)),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.clearMappedSettings(),super.disablePlugin()}getSelectionData(){let t=this.hot.getSelectedRangeLast(),{row:e,col:i}=t.getTopStartCorner(),{row:n,col:r}=t.getBottomEndCorner(),o=this.hot.runHooks("modifyCopyableRange",[{startRow:e,startCol:i,endRow:n,endCol:r}]),a=[],s=[],l=[];return(0,iy.arrayEach)(o,t=>{for(let e=t.startRow;e<=t.endRow;e+=1)-1===a.indexOf(e)&&a.push(e);for(let e=t.startCol;e<=t.endCol;e+=1)-1===s.indexOf(e)&&s.push(e)}),(0,iy.arrayEach)(a,t=>{let e=[];(0,iy.arrayEach)(s,i=>{e.push(this.hot.getCopyableData(t,i))}),l.push(e)}),l}fillIn(){var t;let e,i,n;if(this.hot.selection.highlight.getFill().isEmpty())return!1;let[r,o,a,s]=this.hot.selection.highlight.getFill().getVisualCorners(),l=this.hot.getSelectedRangeLast(),h=l.getTopStartCorner(),u=l.getBottomEndCorner();this.resetSelectionOfDraggedArea();let c=[h.row,h.col,u.row,u.col],d=this.hot.runHooks("modifyAutofillRange",[Math.min(h.row,r),Math.min(h.col,o),Math.max(u.row,a),Math.max(u.col,s)],c),{directionOfDrag:p,startOfDragCoords:f,endOfDragCoords:g}=(t=(t,e)=>this.hot._createCellCoords(t,e),d[0]===c[0]&&d[1]<c[1]?(n="left",e=t(d[0],d[1]),i=t(d[2],c[1]-1)):d[2]===c[2]&&d[0]===c[0]&&d[3]>c[3]?(n="right",e=t(d[0],c[3]+1),i=t(d[2],d[3])):d[0]<c[0]&&d[1]===c[1]?(n="up",e=t(d[0],d[1]),i=t(c[0]-1,d[3])):d[2]>c[2]&&d[1]===c[1]&&(n="down",e=t(c[2]+1,d[1]),i=t(d[2],d[3])),e&&e.normalize(),i&&i.normalize(),{directionOfDrag:n,startOfDragCoords:e,endOfDragCoords:i});if(f&&f.row>-1&&f.col>-1){let t=this.getSelectionData(),e=l.clone(),i=this.hot._createCellRange(f,f,g),n=this.hot.runHooks("beforeAutofill",t,e,i,p);if(!1===n)return this.hot.selection.highlight.getFill().clear(),this.hot.render(),!1;let r=n;if(["up","left"].indexOf(p)>-1&&!(1===n.length&&0===n[0].length)){if(r=[],"up"===p){let t=g.row-f.row+1,e=t%n.length;for(let i=0;i<t;i++)r.push(n[(i+(n.length-e))%n.length])}else{let t=g.col-f.col+1,e=t%n[0].length;for(let i=0;i<n.length;i++){r.push([]);for(let o=0;o<t;o++)r[i].push(n[i][(o+(n[i].length-e))%n[i].length])}}}this.hot.populateFromArray(f.row,f.col,r,g.row,g.col,`${this.pluginName}.fill`,null),this.setSelection(d),this.hot.runHooks("afterAutofill",r,e,i,p),this.hot.render()}else this.hot.view.render();return!0}reduceSelectionAreaIfNeeded(t){return t.row<0&&(t.row=0),t.col<0&&(t.col=0),t}getCoordsOfDragAndDropBorders(t){let e=this.hot.getSelectedRangeLast(),i=e.getBottomEndCorner(),n=t;if(this.directions.includes(cz.vertical)&&this.directions.includes(cz.horizontal)){let r=e.getTopStartCorner();(i.col<=t.col||r.col>=t.col)&&(n=this.hot._createCellCoords(i.row,t.col)),(i.row<t.row||r.row>t.row)&&(n=this.hot._createCellCoords(t.row,i.col))}else if(this.directions.includes(cz.vertical))n=this.hot._createCellCoords(t.row,i.col);else{if(!this.directions.includes(cz.horizontal))return;n=this.hot._createCellCoords(i.row,t.col)}return this.reduceSelectionAreaIfNeeded(n)}showBorder(t){let e=this.getCoordsOfDragAndDropBorders(t);e&&this.redrawBorders(e)}addRow(){this.hot._registerTimeout(()=>{this.hot.alter("insert_row_below",void 0,1,`${this.pluginName}.fill`),this.addingStarted=!1},200)}addNewRowIfNeeded(){if(!this.hot.selection.highlight.getFill().isEmpty()&&!1===this.addingStarted&&this.autoInsertRow){let t=this.hot.getSelectedLast(),e=this.hot.selection.highlight.getFill().getVisualCorners(),i=this.hot.countRows();t[2]<i-1&&e[2]===i-1&&(this.addingStarted=!0,this.addRow())}}getIndexOfLastAdjacentFilledInRow(t){let e;let i=this.hot.getData(),n=this.hot.countRows();for(let r=t[2]+1;r<n;r++){for(let e=t[1];e<=t[3];e++){let t=i[r][e];if(!(0,eX.isEmpty)(t))return -1}let n=i[r][t[1]-1],o=i[r][t[3]+1];(0,eX.isEmpty)(n)&&(0,eX.isEmpty)(o)||(e=r)}return e}addSelectionFromStartAreaToSpecificRowIndex(t,e){this.hot.selection.highlight.getFill().clear().add(this.hot._createCellCoords(t[0],t[1])).add(this.hot._createCellCoords(e,t[3])).commit()}setSelection(t){this.hot.selectCell(...(0,iy.arrayMap)(t,t=>Math.max(t,0)),!1,!1)}selectAdjacent(){let t=this.hot.getSelectedLast(),e=this.getIndexOfLastAdjacentFilledInRow(t);return -1!==e&&void 0!==e&&(this.addSelectionFromStartAreaToSpecificRowIndex(t,e),!0)}resetSelectionOfDraggedArea(){this.handleDraggedCells=0,this.hot.selection.highlight.getFill().clear()}redrawBorders(t){this.hot.selection.highlight.getFill().clear().add(this.hot.getSelectedRangeLast().from).add(this.hot.getSelectedRangeLast().to).add(t).commit(),this.hot.view.render()}getIfMouseWasDraggedOutside(t){let{documentElement:e}=this.hot.rootDocument,i=(0,eG.offset)(this.hot.table).top-(this.hot.rootWindow.pageYOffset||e.scrollTop)+(0,eG.outerHeight)(this.hot.table),n=(0,eG.offset)(this.hot.table).left-(this.hot.rootWindow.pageXOffset||e.scrollLeft)+(0,eG.outerWidth)(this.hot.table);return t.clientY>i&&t.clientX<=n}registerEvents(){let{documentElement:t}=this.hot.rootDocument;this.eventManager.addEventListener(t,"mouseup",()=>cU(cX,this,cK).call(this)),this.eventManager.addEventListener(t,"mousemove",t=>cU(cX,this,cQ).call(this,t))}clearMappedSettings(){this.directions.length=0,this.autoInsertRow=!1}mapSettings(){let t=function(t){let e={};return!0===t?(e.directions=Object.keys(cz),e.autoInsertRow=!0):(0,e6.isObject)(t)?((0,eX.isDefined)(t.autoInsertRow)?t.direction===cz.horizontal?e.autoInsertRow=!1:e.autoInsertRow=t.autoInsertRow:e.autoInsertRow=!1,(0,eX.isDefined)(t.direction)?e.directions=[t.direction]:e.directions=Object.keys(cz)):"string"==typeof t?(e.directions=[t],e.autoInsertRow=!0):(e.directions=[],e.autoInsertRow=!1),e}(this.hot.getSettings().fillHandle);this.directions=t.directions,this.autoInsertRow=t.autoInsertRow}destroy(){super.destroy()}}),nn(c6),nn(class extends cv{constructor(){var t,e;super(...arguments),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,dg),dg.add(this),(t="symbol"==typeof(e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t="headerIndexes","string"))?e:e+"")in this?Object.defineProperty(this,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[t]=null}static get PLUGIN_KEY(){return dp}static get PLUGIN_PRIORITY(){return 210}isEnabled(){return!!this.hot.getSettings()[dp]}enablePlugin(){if(this.enabled)return;let t=this.hot.getSettings()[dp];"string"!=typeof t&&(t="loose");let e=df.get(t);this.headerIndexes=this.hot.rowIndexMapper.registerMap("bindRowsWithHeaders",new e),this.addHook("modifyRowHeader",t=>(function(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")})(dg,this,dm).call(this,t)),super.enablePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("bindRowsWithHeaders"),super.disablePlugin()}destroy(){super.destroy()}}),nn(class extends cv{constructor(){super(...arguments),dy(this,dT),dT.add(this),dv(this,"nestedHeadersPlugin",null),dv(this,"headerStateManager",null),dy(this,dM),dM.set(this,null)}static get PLUGIN_KEY(){return dx}static get PLUGIN_PRIORITY(){return 290}static get PLUGIN_DEPS(){return["plugin:NestedHeaders"]}static get SETTING_KEYS(){return[dx,...dS]}isEnabled(){return!!this.hot.getSettings()[dx]}enablePlugin(){var t=this;if(this.enabled)return;let{nestedHeaders:e}=this.hot.getSettings();e||(0,e8.warn)("You need to configure the Nested Headers plugin in order to use collapsible headers."),dw(dM,this,this.hot.columnIndexMapper.createAndRegisterIndexMap(this.pluginName,"hiding")),this.nestedHeadersPlugin=this.hot.getPlugin("nestedHeaders"),this.headerStateManager=this.nestedHeadersPlugin.getStateManager(),this.addHook("init",()=>db(dT,this,dE).call(this)),this.addHook("afterLoadData",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return db(dT,t,dA).call(t,...i)}),this.addHook("afterGetColHeader",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return db(dT,t,dI).call(t,...i)}),this.addHook("beforeOnCellMouseDown",(t,e,i)=>db(dT,this,dR).call(this,t,e,i)),this.registerShortcuts(),super.enablePlugin(),this.updatePlugin()}updatePlugin(){if(this.hot.view){if(!this.nestedHeadersPlugin.detectedOverlappedHeaders){let{collapsibleColumns:t}=this.hot.getSettings();"boolean"==typeof t?this.headerStateManager.mapState(t=>({collapsible:t.origColspan>1})):Array.isArray(t)&&(this.headerStateManager.mapState(()=>({collapsible:!1})),this.headerStateManager.mergeStateWith(t))}super.updatePlugin()}}disablePlugin(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),dw(dM,this,null),this.nestedHeadersPlugin=null,this.unregisterShortcuts(),this.clearButtons(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{var t;let{row:e,col:i}=this.hot.getSelectedRangeLast().highlight,{collapsible:n,isCollapsed:r,columnIndex:o}=null!==(t=this.headerStateManager.getHeaderTreeNodeData(e,i))&&void 0!==t?t:{};if(n)return r?this.expandSection({row:e,col:o}):this.collapseSection({row:e,col:o}),!1},runOnlyIf:()=>{var t,e;return(null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.isSingle())&&(null===(e=this.hot.getSelectedRangeLast())||void 0===e?void 0:e.highlight.isHeader())},group:dx,relativeToGroup:ue,position:"before"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(dx)}clearButtons(){if(!this.hot.view)return;let t=this.hot.view._wt.getSetting("columnHeaders").length,e=this.hot.view._wt.wtTable.THEAD,i=this.hot.view._wt.wtOverlays.topOverlay.clone.wtTable.THEAD,n=this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay?this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null,r=function(t){t&&t.parentNode.removeChild(t)};(0,i0.rangeEach)(0,t-1,t=>{let o=e.childNodes[t],a=i.childNodes[t],s=n?n.childNodes[t]:null;(0,i0.rangeEach)(0,o.childNodes.length-1,t=>{let e=o.childNodes[t].querySelector(`.${dC}`);r(e),a&&a.childNodes[t]&&r(e=a.childNodes[t].querySelector(`.${dC}`)),n&&s&&s.childNodes[t]&&r(e=s.childNodes[t].querySelector(`.${dC}`))})},!0)}expandSection(t){this.toggleCollapsibleSection([t],"expand")}collapseSection(t){this.toggleCollapsibleSection([t],"collapse")}toggleAllCollapsibleSections(t){let e=this.headerStateManager.mapNodes(e=>{let{collapsible:i,origColspan:n,headerLevel:r,columnIndex:o,isCollapsed:a}=e;if(!0===i&&n>1&&(a&&"expand"===t||!a&&"collapse"===t))return{row:this.headerStateManager.levelToRowCoords(r),col:o}});this.toggleCollapsibleSection(e,t)}collapseAll(){this.toggleAllCollapsibleSections("collapse")}expandAll(){this.toggleAllCollapsibleSections("expand")}toggleCollapsibleSection(t,e){if(!d_.has(e))throw Error(`Unsupported action is passed (${e}).`);if(!Array.isArray(t))return;let i=(0,iy.arrayFilter)(t,t=>{let{row:e}=t;return e<0}),n=i.length>0;(0,iy.arrayEach)(i,t=>{var i;let{row:r,col:o}=t,{collapsible:a,isCollapsed:s}=null!==(i=this.headerStateManager.getHeaderSettings(r,o))&&void 0!==i?i:{};if(!a||s&&"collapse"===e||!s&&"expand"===e)return n=!1,!1});let r=[],o=[];n&&(0,iy.arrayEach)(i,t=>{let{row:i,col:n}=t,{colspanCompensation:a,affectedColumns:s,rollbackModification:l}=this.headerStateManager.triggerNodeModification(e,i,n);a>0&&(o.push(...s),r.push(l))});let a=this.getCollapsedColumns(),s=[];"collapse"===e?s=(0,iy.arrayUnique)([...a,...o]):"expand"===e&&(s=(0,iy.arrayFilter)(a,t=>!o.includes(t)));let l=d_.get(e);if(!1===this.hot.runHooks(l.beforeHook,a,s,n)){(0,iy.arrayEach)(r,t=>{t()});return}this.hot.batchExecution(()=>{(0,iy.arrayEach)(o,t=>{dM.get(db(dM,this)).setValueAtIndex(this.hot.toPhysicalColumn(t),l.hideColumn)})},!0);let h=this.getCollapsedColumns().length!==a.length,u=this.hot.getSelectedRangeLast();if("collapse"===e&&h&&u){let{row:t,col:e}=u.highlight;if((this.hot.rowIndexMapper.isHidden(t)||this.hot.columnIndexMapper.isHidden(e))&&o.includes(e)){let i=t>=0?this.hot.rowIndexMapper.getNearestNotHiddenIndex(t,1,!0):t,n=e>=0?this.hot.columnIndexMapper.getNearestNotHiddenIndex(e,1,!0):e;null!==i&&null!==n&&this.hot.selectCell(i,n)}}this.hot.runHooks(l.afterHook,a,s,n,h),this.hot.render(),this.hot.view.adjustElementsSize()}getCollapsedColumns(){return dM.get(db(dM,this)).getHiddenIndexes()}destroy(){dw(dM,this,null),super.destroy()}}),nn(d8),nn(class extends cv{constructor(){var t,e;super(...arguments),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,ps),ps.add(this),(t="symbol"==typeof(e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t="endpoints","string"))?e:e+"")in this?Object.defineProperty(this,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[t]=null}static get PLUGIN_KEY(){return pa}static get PLUGIN_PRIORITY(){return 220}isEnabled(){return!!this.hot.getSettings()[pa]}enablePlugin(){var t=this;this.enabled||(this.settings=this.hot.getSettings()[pa],this.endpoints=new pn(this,this.settings),this.addHook("afterInit",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return po(ps,t,pl).call(t,...i)}),this.addHook("afterChange",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return po(ps,t,pu).call(t,...i)}),this.addHook("afterUpdateSettings",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return po(ps,t,ph).call(t,...i)}),this.addHook("beforeCreateRow",(t,e,i)=>this.endpoints.resetSetupBeforeStructureAlteration("insert_row",t,e,null,i)),this.addHook("beforeCreateCol",(t,e,i)=>this.endpoints.resetSetupBeforeStructureAlteration("insert_col",t,e,null,i)),this.addHook("beforeRemoveRow",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return t.endpoints.resetSetupBeforeStructureAlteration("remove_row",...i)}),this.addHook("beforeRemoveCol",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return t.endpoints.resetSetupBeforeStructureAlteration("remove_col",...i)}),this.addHook("afterCreateRow",(t,e,i)=>this.endpoints.resetSetupAfterStructureAlteration("insert_row",t,e,null,i)),this.addHook("afterCreateCol",(t,e,i)=>this.endpoints.resetSetupAfterStructureAlteration("insert_col",t,e,null,i)),this.addHook("afterRemoveRow",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return t.endpoints.resetSetupAfterStructureAlteration("remove_row",...i)}),this.addHook("afterRemoveCol",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return t.endpoints.resetSetupAfterStructureAlteration("remove_col",...i)}),this.addHook("afterRowMove",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return po(ps,t,pc).call(t,...i)}),super.enablePlugin())}disablePlugin(){this.endpoints=null,this.settings=null,this.currentEndpoint=null,super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.endpoints.initEndpoints(),super.updatePlugin()}calculate(t){switch(t.type.toLowerCase()){case"sum":t.result=this.calculateSum(t);break;case"min":case"max":t.result=this.calculateMinMax(t,t.type);break;case"count":t.result=this.countEntries(t);break;case"average":t.result=this.calculateAverage(t);break;case"custom":t.result=t.customFunction.call(this,t)}}calculateSum(t){let e=0;return(0,e6.objectEach)(t.ranges,i=>{e+=this.getPartialSum(i,t.sourceColumn)}),e}getPartialSum(t,e){let i=0,n=t[1]||t[0],r=null,o=0;do{if(null!==(r=pr(r=this.getCellValue(n,e))?null:r)){let t=(`${r}`.split(".")[1]||[]).length||1;t>o&&(o=t)}i+=r||0,n-=1}while(n>=t[0])return Math.round(i*10**o)/10**o}calculateMinMax(t,e){let i=null;return(0,e6.objectEach)(t.ranges,n=>{let r=this.getPartialMinMax(n,t.sourceColumn,e);if(null===i&&null!==r&&(i=r),null!==r)switch(e){case"min":i=Math.min(i,r);break;case"max":i=Math.max(i,r)}}),null===i?"Not enough data":i}getPartialMinMax(t,e,i){let n,r=null,o=t[1]||t[0];do{if(n=pr(n=this.getCellValue(o,e))?null:n,null===r)r=n;else if(null!==n)switch(i){case"min":r=Math.min(r,n);break;case"max":r=Math.max(r,n)}o-=1}while(o>=t[0])return r}countEmpty(t,e){let i;let n=0,r=t[1]||t[0];do null===(i=pr(i=this.getCellValue(r,e))?null:i)&&(n+=1),r-=1;while(r>=t[0])return n}countEntries(t){let e=0,i=t.ranges;return(0,e6.objectEach)(i,i=>{let n=void 0===i[1]?1:i[1]-i[0]+1,r=this.countEmpty(i,t.sourceColumn);e+=n,e-=r}),e}calculateAverage(t){return this.calculateSum(t)/this.countEntries(t)}getCellValue(t,e){let i=this.hot.toVisualRow(t),n=this.hot.toVisualColumn(e),r=this.hot.getSourceDataAtCell(t,e),o="";if(null!==i&&null!==n&&(o=this.hot.getCellMeta(i,n).className||""),o.indexOf("columnSummaryResult")>-1)return null;if(this.endpoints.currentEndpoint.forceNumeric&&("string"==typeof r&&(r=r.replace(/,/,".")),r=parseFloat(r)),isNaN(r)&&!this.endpoints.currentEndpoint.suppressDataTypeErrors)throw Error((0,nJ.toSingleLine)`ColumnSummary plugin: cell at (${t}, ${e}) is not in a\x20
          numeric format. Cannot do the calculation.`);return r}}),nn(class extends cv{constructor(){var t,e,i;super(...arguments),p6(this,fd),fd.add(this),e={},(t="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t="range","string"))?i:i+"")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e,p4(this,fa,null),p4(this,fs,null),p4(this,fl,!1),p4(this,fh,!1),p4(this,fu,null),p4(this,fc,"")}static get PLUGIN_KEY(){return ft}static get PLUGIN_PRIORITY(){return 60}isEnabled(){return!!this.hot.getSettings()[ft]}enablePlugin(){var t=this;this.enabled||(p9(fa,this)||(p8(fa,this,new pP(this.hot.rootDocument,this.hot.isRtl())),p9(fa,this).addLocalHook("resize",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return p7(fd,t,fw).call(t,...i)})),p9(fs,this)||p8(fs,this,new pN(this.getDisplayDelaySetting())),this.addHook("afterContextMenuDefaultOptions",t=>this.addToContextMenu(t)),this.addHook("afterRenderer",(t,e,i,n,r,o)=>p7(fd,this,fm).call(this,t,o)),this.addHook("afterScroll",()=>p7(fd,this,fx).call(this)),this.addHook("afterBeginEditing",()=>this.hide()),this.addHook("afterDocumentKeyDown",t=>p7(fd,this,fb).call(this,t)),p9(fs,this).addLocalHook("hide",()=>this.hide()),p9(fs,this).addLocalHook("show",(t,e)=>this.showAtCell(t,e)),this.registerShortcuts(),this.registerListeners(),super.enablePlugin())}updatePlugin(){p9(fs,this).updateDelay(this.getDisplayDelaySetting()),super.updatePlugin()}disablePlugin(){this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){let t=this.hot.getShortcutManager(),e=t.getContext("grid"),i=t.addContext(fo);e.addShortcut({keys:[["Control","Alt","M"]],callback:()=>{let e=this.hot.getSelectedRangeLast();p8(fh,this,!0),this.hot.scrollToFocusedCell(()=>{this.setRange(e),this.show(),this.focusEditor(),t.setActiveContextName(fo),this.hot._registerTimeout(()=>{p8(fh,this,!1)})})},stopPropagation:!0,runOnlyIf:()=>{var t;return(null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight.isCell())&&!p9(fa,this).isVisible()},group:ft}),i.addShortcut({keys:[["Escape"]],callback:()=>{p9(fa,this).setValue(p9(fc,this)),this.hide(),t.setActiveContextName("grid")},runOnlyIf:()=>p9(fa,this).isVisible()&&p9(fa,this).isFocused(),group:ft}),i.addShortcut({keys:[["Control/Meta","Enter"]],callback:()=>{this.hide(),t.setActiveContextName("grid")},runOnlyIf:()=>p9(fa,this).isVisible()&&p9(fa,this).isFocused(),group:ft})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(ft)}registerListeners(){let{rootDocument:t}=this.hot,e=this.getEditorInputElement();this.eventManager.addEventListener(t,"mouseover",t=>p7(fd,this,ff).call(this,t)),this.eventManager.addEventListener(t,"mousedown",t=>p7(fd,this,fp).call(this,t)),this.eventManager.addEventListener(t,"mouseup",()=>p7(fd,this,fg).call(this)),this.eventManager.addEventListener(e,"focus",()=>p7(fd,this,fv).call(this)),this.eventManager.addEventListener(e,"blur",()=>p7(fd,this,fy).call(this))}setRange(t){this.range=t}clearRange(){this.range={}}targetIsCellWithComment(t){let e=(0,eG.closest)(t.target,"TD","TBODY");return!!(e&&(0,eG.hasClass)(e,"htCommentCell")&&(0,eG.closest)(e,[this.hot.rootElement]))}targetIsCommentTextArea(t){return this.getEditorInputElement()===t.target}setComment(t){if(!this.range.from)throw Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');let e=p9(fa,this).getValue(),i="";null!=t?i=t:null!=e&&(i=e);let n=this.range.from.row,r=this.range.from.col;this.updateCommentMeta(n,r,{[fi]:i}),this.hot.render()}setCommentAtCell(t,e,i){this.setRange({from:this.hot._createCellCoords(t,e)}),this.setComment(i)}removeComment(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(!this.range.from)throw Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.setCellMeta(this.range.from.row,this.range.from.col,fe),t&&this.hot.render(),this.hide()}removeCommentAtCell(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];this.setRange({from:this.hot._createCellCoords(t,e)}),this.removeComment(i)}getComment(){let t=this.range.from.row,e=this.range.from.col;return this.getCommentMeta(t,e,fi)}getCommentAtCell(t,e){return this.getCommentMeta(t,e,fi)}show(){var t;if(!this.range.from)throw Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');let{from:{row:e,col:i}}=this.range;if(e<0||e>this.hot.countSourceRows()-1||i<0||i>this.hot.countSourceCols()-1)return!1;let n=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return p9(fs,this).cancelHiding(),p9(fa,this).setValue(null!==(t=n[fe]?n[fe][fi]:null)&&void 0!==t?t:""),p9(fa,this).show(),this.refreshEditor(!0),!0}showAtCell(t,e){return this.setRange({from:this.hot._createCellCoords(t,e)}),this.show()}hide(){p9(fa,this).hide()}refreshEditor(){var t,e;let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!i&&(!this.range.from||!p9(fa,this).isVisible()))return;let{rowIndexMapper:n,columnIndexMapper:r}=this.hot,{row:o,col:a}=this.range.from,s=n.getRenderableFromVisualIndex(o),l=r.getRenderableFromVisualIndex(a),h=null===s;p9(fa,this).setPosition(0,0),null===s&&(s=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(o,-1))),null===l&&(l=r.getRenderableFromVisualIndex(r.getNearestNotHiddenIndex(a,-1)));let u=null===s,c=null===l;s=null!==(t=s)&&void 0!==t?t:0,l=null!==(e=l)&&void 0!==e?e:0;let{rootWindow:d,view:{_wt:p}}=this.hot,{wtTable:f}=p,g=p.getCell({row:s,col:l},!0),m=this.getCommentMeta(o,a,fn);m?p9(fa,this).setSize(m.width,m.height):p9(fa,this).resetSize();let y=c?0:f.getStretchedColumnWidth(l),w=h&&!u?(0,eG.outerHeight)(g):0,{left:b,top:x,width:S,height:C}=g.getBoundingClientRect(),{width:_,height:M}=p9(fa,this).getSize(),{innerWidth:T,innerHeight:I}=this.hot.rootWindow,R=this.hot.rootDocument.documentElement,E=b+d.scrollX+y,A=x+d.scrollY+w;this.hot.isRtl()&&(E-=_+y),this.hot.isLtr()&&b+S+_>T?E=b+d.scrollX-_-1:this.hot.isRtl()&&E<-(R.scrollWidth-R.clientWidth)&&(E=b+d.scrollX+y+1),x+M>I&&(A-=M-C+1),p9(fa,this).setPosition(E,A),p9(fa,this).setReadOnlyState(this.getCommentMeta(o,a,fr)),p9(fa,this).observeSize()}focusEditor(){p9(fa,this).focus()}updateCommentMeta(t,e,i){let n;let r=this.hot.getCellMeta(t,e)[fe];r?(n=(0,e6.deepClone)(r),(0,e6.deepExtend)(n,i)):n=i,this.hot.setCellMeta(t,e,fe,n)}getCommentMeta(t,e,i){let n=this.hot.getCellMeta(t,e);if(n[fe])return n[fe][i]}addToContextMenu(t){var e,i,n;t.items.push({name:pj},(e=this,{key:"commentsAddEdit",name(){var t;let i=null===(t=this.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return null!=i&&i.isCell()&&e.getCommentAtCell(i.row,i.col)?this.getTranslatedPhrase(sP):this.getTranslatedPhrase(sO)},callback(){let t=this.getSelectedRangeLast();e.setRange(t),e.show(),e.focusEditor()},disabled(){let t=this.getSelectedRangeLast();return!!(!t||t.highlight.isHeader()||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected())||0===this.countRenderedRows()||0===this.countRenderedCols()}}),(i=this,{key:"commentsRemove",name(){return this.getTranslatedPhrase(sL)},callback(){this.getSelectedRangeLast().forAll((t,e)=>{t>=0&&e>=0&&i.removeCommentAtCell(t,e,!1)}),this.render()},disabled(){let t=this.getSelectedRangeLast();return!!(!t||t.highlight.isHeader()||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected())||0===this.countRenderedRows()||0===this.countRenderedCols()}}),(n=this,{key:"commentsReadOnly",name(){let t=this.getTranslatedPhrase(sN);return pF(this.getSelectedRange(),(t,e)=>n.getCommentMeta(t,e,fr))?pB(t):t},callback(){this.getSelectedRangeLast().forAll((t,e)=>{if(t>=0&&e>=0){let i=!!n.getCommentMeta(t,e,fr);n.updateCommentMeta(t,e,{[fr]:!i})}})},disabled(){let t=this.getSelectedRangeLast();return!!(!t||t.highlight.isHeader()||!n.getCommentAtCell(t.highlight.row,t.highlight.col)||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected())||0===this.countRenderedRows()||0===this.countRenderedCols()}}))}getDisplayDelaySetting(){let t=this.hot.getSettings()[ft];if((0,e6.isObject)(t))return t.displayDelay}getEditorInputElement(){return p9(fa,this).getInputElement()}destroy(){var t,e;null===(t=p9(fa,this))||void 0===t||t.destroy(),null===(e=p9(fs,this))||void 0===e||e.destroy(),super.destroy()}}),nn(f7),nn(class extends cv{constructor(){super(...arguments),gC(this,gB),gB.add(this),g_(this,"columnsLimit",1/0),g_(this,"rowsLimit",1/0),g_(this,"pasteMode","overwrite"),g_(this,"uiContainer",this.hot.rootDocument.body),gS(this,gk,!1),gS(this,gD,!1),gS(this,gO,!1),gS(this,gP,"cells-only"),gS(this,gL,!1),gS(this,gN,!1),gS(this,gH,new gv({countRows:()=>this.hot.countRows(),countColumns:()=>this.hot.countCols(),rowsLimit:()=>this.rowsLimit,columnsLimit:()=>this.columnsLimit,countColumnHeaders:()=>this.hot.view.getColumnHeadersCount()})),gS(this,gV,!1),g_(this,"copyableRanges",[])}static get PLUGIN_KEY(){return gR}static get SETTING_KEYS(){return[gR,...gE]}static get PLUGIN_PRIORITY(){return 80}isEnabled(){return!!this.hot.getSettings()[gR]}enablePlugin(){var t,e,i=this;if(this.enabled)return;let{[gR]:n}=this.hot.getSettings();"object"==typeof n&&(this.pasteMode=null!==(t=n.pasteMode)&&void 0!==t?t:this.pasteMode,this.rowsLimit=isNaN(n.rowsLimit)?this.rowsLimit:n.rowsLimit,this.columnsLimit=isNaN(n.columnsLimit)?this.columnsLimit:n.columnsLimit,gT(gk,this,!!n.copyColumnHeaders),gT(gD,this,!!n.copyColumnGroupHeaders),gT(gO,this,!!n.copyColumnHeadersOnly),this.uiContainer=null!==(e=n.uiContainer)&&void 0!==e?e:this.uiContainer),this.addHook("afterContextMenuDefaultOptions",t=>gI(gB,this,gU).call(this,t)),this.addHook("afterSelection",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return gI(gB,i,gG).call(i,...e)}),this.addHook("afterSelectionEnd",()=>gI(gB,this,gY).call(this)),this.eventManager.addEventListener(this.hot.rootDocument,"copy",function(){return i.onCopy(...arguments)}),this.eventManager.addEventListener(this.hot.rootDocument,"cut",function(){return i.onCut(...arguments)}),this.eventManager.addEventListener(this.hot.rootDocument,"paste",function(){return i.onPaste(...arguments)}),(0,e$.isSafari)()&&(this.eventManager.addEventListener(this.hot.rootDocument.body,"mouseenter",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return gI(gB,i,gX).call(i,...e)}),this.eventManager.addEventListener(this.hot.rootDocument.body,"mouseleave",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return gI(gB,i,g$).call(i,...e)}),this.addHook("afterSelection",()=>gI(gB,this,gZ).call(this))),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){super.disablePlugin()}copy(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cells-only";gT(gP,this,t),gT(gL,this,!0),gI(gB,this,gF).call(this,"copy")}copyCellsOnly(){this.copy("cells-only")}copyColumnHeadersOnly(){this.copy("column-headers-only")}copyWithAllColumnHeaders(){this.copy("with-column-group-headers")}copyWithColumnHeaders(){this.copy("with-column-headers")}cut(){gT(gN,this,!0),gI(gB,this,gF).call(this,"cut")}getRangedCopyableData(t){return h6(this.getRangedData(t))}getRangedData(t){let e=[],{rows:i,columns:n}=gx(t);return(0,iy.arrayEach)(i,t=>{let i=[];(0,iy.arrayEach)(n,e=>{t<0?i.push(this.hot.getColHeader(e,t)):i.push(this.hot.getCopyableData(t,e))}),e.push(i)}),e}paste(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(!t&&!e)return;let i=new go;t&&i.clipboardData.setData("text/plain",t),e&&i.clipboardData.setData("text/html",e),this.onPaste(i)}setCopyableText(){let t=this.hot.getSelectedRangeLast();if(!t)return;if(t.isSingleHeader()){this.copyableRanges=[];return}gM(gH,this).setSelectedRange(t);let e=new Map([["headers",null],["cells",null]]);"column-headers-only"===gM(gP,this)?e.set("headers",gM(gH,this).getMostBottomColumnHeadersRange()):("with-column-headers"===gM(gP,this)?e.set("headers",gM(gH,this).getMostBottomColumnHeadersRange()):"with-column-group-headers"===gM(gP,this)&&e.set("headers",gM(gH,this).getAllColumnHeadersRange()),e.set("cells",gM(gH,this).getCellsRange())),this.copyableRanges=Array.from(e.values()).filter(t=>null!==t).map(t=>{let{startRow:e,startCol:i,endRow:n,endCol:r}=t;return{startRow:e,startCol:i,endRow:n,endCol:r}}),this.copyableRanges=this.hot.runHooks("modifyCopyableRange",this.copyableRanges);let i=e.get("cells");if(null!==i&&i.isRangeTrimmed){let{startRow:t,startCol:e,endRow:n,endCol:r}=i;this.hot.runHooks("afterCopyLimit",n-t+1,r-e+1,this.rowsLimit,this.columnsLimit)}}isEditorOpened(){var t;return null===(t=this.hot.getActiveEditor())||void 0===t?void 0:t.isOpened()}populateValues(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.hot.getSelectedRangeLast();if(!t.length)return;let i=t.length,n=t[0].length,r=[],{row:o,col:a}=e.getTopStartCorner(),{row:s,col:l}=e.getBottomEndCorner(),h=o,u=a,c=o,d=a;for(;r.length<i||h<=s;){let{skipRowOnPaste:e,visualRow:s}=this.hot.getCellMeta(h,a);if(h=s+1,!0===e)continue;c=s,u=a;let p=[],f=r.length%i;for(;p.length<n||u<=l;){let{skipColumnOnPaste:e,visualCol:i}=this.hot.getCellMeta(o,u);if(u=i+1,!0===e)continue;d=i;let r=p.length%n;p.push(t[f][r])}r.push(p)}return gT(gV,this,!0),this.hot.populateFromArray(o,a,r,void 0,void 0,"CopyPaste.paste",this.pasteMode),[o,a,c,d]}onCopy(t){var e,i;let n=this.hot.getFocusManager().getRefocusElement(),r=null===(e=t.target)||void 0===e?void 0:e.hasAttribute("data-hot-input"),o=null===(i=this.hot.getSelectedRangeLast())||void 0===i?void 0:i.highlight,a=o?this.hot.getCell(o.row,o.col,!0):null;if(!this.hot.isListening()&&!gM(gL,this)||this.isEditorOpened()||t.target instanceof HTMLElement&&(r&&t.target!==n||!r&&t.target!==this.hot.rootDocument.body&&a!==t.target))return;t.preventDefault(),this.setCopyableText(),gT(gL,this,!1);let s=this.getRangedData(this.copyableRanges),l=gI(gB,this,gW).call(this,this.copyableRanges);if(this.hot.runHooks("beforeCopy",s,this.copyableRanges,l)){let e=h6(s);if(t&&t.clipboardData){let i=iK(s,this.hot.rootDocument);t.clipboardData.setData("text/plain",e),t.clipboardData.setData("text/html",[gA,i].join(""))}else"undefined"==typeof ClipboardEvent&&this.hot.rootWindow.clipboardData.setData("Text",e);this.hot.runHooks("afterCopy",s,this.copyableRanges,l)}gT(gP,this,"cells-only")}onCut(t){var e,i;let n=this.hot.getFocusManager().getRefocusElement(),r=null===(e=t.target)||void 0===e?void 0:e.hasAttribute("data-hot-input"),o=null===(i=this.hot.getSelectedRangeLast())||void 0===i?void 0:i.highlight,a=o?this.hot.getCell(o.row,o.col,!0):null;if(!this.hot.isListening()&&!gM(gN,this)||this.isEditorOpened()||t.target instanceof HTMLElement&&(r&&t.target!==n||!r&&t.target!==this.hot.rootDocument.body&&a!==t.target))return;t.preventDefault(),this.setCopyableText(),gT(gN,this,!1);let s=this.getRangedData(this.copyableRanges);if(this.hot.runHooks("beforeCut",s,this.copyableRanges)){let e=h6(s);if(t&&t.clipboardData){let i=iK(s,this.hot.rootDocument);t.clipboardData.setData("text/plain",e),t.clipboardData.setData("text/html",[gA,i].join(""))}else"undefined"==typeof ClipboardEvent&&this.hot.rootWindow.clipboardData.setData("Text",e);this.hot.emptySelectedCells("CopyPaste.cut"),this.hot.runHooks("afterCut",s,this.copyableRanges)}}onPaste(t){var e,i;let n;let r=this.hot.getFocusManager().getRefocusElement(),o=null===(e=t.target)||void 0===e?void 0:e.hasAttribute("data-hot-input"),a=null===(i=this.hot.getSelectedRangeLast())||void 0===i?void 0:i.highlight,s=a?this.hot.getCell(a.row,a.col,!0):null;if(!this.hot.isListening()||this.isEditorOpened()||!this.hot.getSelected()||t.target instanceof HTMLElement&&(o&&t.target!==r||!o&&t.target!==this.hot.rootDocument.body&&s!==t.target))return;if(t.preventDefault(),t&&void 0!==t.clipboardData){let e=(0,iJ.sanitize)(t.clipboardData.getData("text/html"),{ADD_TAGS:["meta"],ADD_ATTR:["content"],FORCE_BODY:!0});n=e&&/(<table)|(<TABLE)/g.test(e)?iQ(e,this.hot.rootDocument).data:t.clipboardData.getData("text/plain")}else"undefined"==typeof ClipboardEvent&&void 0!==this.hot.rootWindow.clipboardData&&(n=this.hot.rootWindow.clipboardData.getData("Text"));if("string"==typeof n&&(n=function(t){let e;let i=[[""]];if(0===t.length)return i;let n=0,r=0;for(;t.length>0&&e!==t.length;)if(e=t.length,t.match(h4))t=t.replace(h4,""),n+=1,i[r][n]="";else if(t.match(h5))t=t.replace(h5,""),n=0,i[r+=1]=[""];else{let e="";if(t.startsWith('"')){let i=0,n=!0;for(;n;){let r=t.slice(0,1);'"'===r&&(i+=1),e+=r,(0===(t=t.slice(1)).length||t.match(/^[\t\r\n]/)&&i%2==0)&&(n=!1)}e=e.replace(/^"/,"").replace(/"$/,"").replace(/["]*/g,t=>Array(Math.floor(t.length/2)).fill('"').join(""))}else{let i=t.match(h3);e=i?i[0]:"",t=t.slice(e.length)}i[r][n]=e}return i}(n)),void 0===n||n&&0===n.length||!1===this.hot.runHooks("beforePaste",n,this.copyableRanges))return;let[l,h,u,c]=this.populateValues(n);this.hot.selectCell(l,h,Math.min(this.hot.countRows()-1,u),Math.min(this.hot.countCols()-1,c)),this.hot.runHooks("afterPaste",n,this.copyableRanges)}destroy(){super.destroy()}}),nn(class extends cv{constructor(){var t,e,i;super(...arguments),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,g8),g8.add(this),e=[],(t="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t="savedBorders","string"))?i:i+"")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e}static get PLUGIN_KEY(){return g6}static get PLUGIN_PRIORITY(){return 90}isEnabled(){return!!this.hot.getSettings()[g6]}enablePlugin(){this.enabled||(this.addHook("afterContextMenuDefaultOptions",t=>g4(g8,this,g9).call(this,t)),this.addHook("init",()=>g4(g8,this,g7).call(this)),super.enablePlugin())}disablePlugin(){this.hideBorders(),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.changeBorderSettings(),super.updatePlugin()}setBorders(t,e){let i=["top","bottom","start","end"],n=null;e&&(this.checkSettingsCohesion([e]),i=Object.keys(e),n=gJ(e));let r=hy(hm(t),{createCellCoords:this.hot._createCellCoords.bind(this.hot),createCellRange:this.hot._createCellRange.bind(this.hot)});(0,iy.arrayEach)(t,t=>{r(t).forAll((t,e)=>{(0,iy.arrayEach)(i,i=>{var r;this.prepareBorderFromCustomAdded(t,e,n,null!==(r=g3.get(i))&&void 0!==r?r:i)})})}),this.hot.view.render()}getBorders(t){if(!Array.isArray(t))return this.savedBorders;let e=hy(hm(t),{createCellCoords:this.hot._createCellCoords.bind(this.hot),createCellRange:this.hot._createCellRange.bind(this.hot)}),i=[];return(0,iy.arrayEach)(t,t=>{e(t).forAll((t,e)=>{(0,iy.arrayEach)(this.savedBorders,n=>{n.row===t&&n.col===e&&i.push(g0(n))})})}),i}clearBorders(t){t?this.setBorders(t):((0,iy.arrayEach)(this.savedBorders,t=>{this.clearBordersFromSelectionSettings(t.id),this.clearNullCellRange(),this.hot.removeCellMeta(t.row,t.col,"borders")}),this.savedBorders.length=0)}insertBorderIntoSettings(t,e){this.checkSavedBorders(t)||this.savedBorders.push(t);let i=this.hot._createCellRange(this.hot._createCellCoords(t.row,t.col));this.checkCustomSelections(t,i,e)||this.hot.selection.highlight.addCustomSelection({border:t,visualCellRange:i})}prepareBorderFromCustomAdded(t,e,i,n){let r=this.hot.countRows(),o=this.hot.countCols();if(t>=r||e>=o)return;let a=g1(t,e);if(i){var s;s=a,(0,e6.hasOwnProperty)(i,"border")&&i.border&&(s.border=i.border),(0,e6.hasOwnProperty)(i,"top")&&(0,eX.isDefined)(i.top)&&(i.top?(0,e6.isObject)(i.top)||(i.top=gK()):i.top=gQ(),s.top=i.top),(0,e6.hasOwnProperty)(i,"bottom")&&(0,eX.isDefined)(i.bottom)&&(i.bottom?(0,e6.isObject)(i.bottom)||(i.bottom=gK()):i.bottom=gQ(),s.bottom=i.bottom),(0,e6.hasOwnProperty)(i,"start")&&(0,eX.isDefined)(i.start)&&(i.start?(0,e6.isObject)(i.start)||(i.start=gK()):i.start=gQ(),s.start=i.start),(0,e6.hasOwnProperty)(i,"end")&&(0,eX.isDefined)(i.end)&&(i.end?(0,e6.isObject)(i.end)||(i.end=gK()):i.end=gQ(),s.end=i.end),a=s,(0,iy.arrayEach)(this.hot.selection.highlight.customSelections,t=>{if(a.id===t.settings.id)return Object.assign(t.settings,i),a.id=t.settings.id,a.top=t.settings.top,a.bottom=t.settings.bottom,a.start=t.settings.start,a.end=t.settings.end,!1})}this.hot.setCellMeta(t,e,"borders",g0(a)),this.insertBorderIntoSettings(a,n)}prepareBorderFromCustomAddedRange(t,e){let i=Math.min(t.to.row,this.hot.countRows()-1),n=Math.min(t.to.col,this.hot.countCols()-1);(0,i0.rangeEach)(t.from.row,i,i=>{(0,i0.rangeEach)(t.from.col,n,n=>{let r=g1(i,n),o=0;i===t.from.row&&(0,e6.hasOwnProperty)(e,"top")&&(o+=1,r.top=e.top),i===t.to.row&&(0,e6.hasOwnProperty)(e,"bottom")&&(o+=1,r.bottom=e.bottom),n===t.from.col&&(0,e6.hasOwnProperty)(e,"start")&&(o+=1,r.start=e.start),n===t.to.col&&(0,e6.hasOwnProperty)(e,"end")&&(o+=1,r.end=e.end),o>0&&(this.hot.setCellMeta(i,n,"borders",g0(r)),this.insertBorderIntoSettings(r))})})}removeAllBorders(t,e){let i=gq(t,e);this.spliceBorder(i),this.clearBordersFromSelectionSettings(i),this.clearNullCellRange(),this.hot.removeCellMeta(t,e,"borders")}setBorder(t,e,i,n){let r=this.hot.getCellMeta(t,e).borders;r=r&&void 0!==r.border?gJ(r):g1(t,e),n?(r[i]=gQ(),4===this.countHide(r)?this.removeAllBorders(t,e):(this.checkCustomSelectionsFromContextMenu(r,i,n)||this.insertBorderIntoSettings(r),this.hot.setCellMeta(t,e,"borders",g0(r)))):(r[i]=gK(),this.checkCustomSelectionsFromContextMenu(r,i,n)||this.insertBorderIntoSettings(r),this.hot.setCellMeta(t,e,"borders",g0(r)))}prepareBorder(t,e,i){(0,iy.arrayEach)(t,t=>{let{start:n,end:r}=t;if(n.row===r.row&&n.col===r.col)"noBorders"===e?this.removeAllBorders(n.row,n.col):this.setBorder(n.row,n.col,e,i);else switch(e){case"noBorders":(0,i0.rangeEach)(n.col,r.col,t=>{(0,i0.rangeEach)(n.row,r.row,e=>{this.removeAllBorders(e,t)})});break;case"top":(0,i0.rangeEach)(n.col,r.col,t=>{this.setBorder(n.row,t,e,i)});break;case"bottom":(0,i0.rangeEach)(n.col,r.col,t=>{this.setBorder(r.row,t,e,i)});break;case"start":(0,i0.rangeEach)(n.row,r.row,t=>{this.setBorder(t,n.col,e,i)});break;case"end":(0,i0.rangeEach)(n.row,r.row,t=>{this.setBorder(t,r.col,e,i)})}})}createCustomBorders(t){(0,iy.arrayEach)(t,t=>{let e=gJ(t);t.range?this.prepareBorderFromCustomAddedRange(t.range,e):this.prepareBorderFromCustomAdded(t.row,t.col,e)})}countHide(t){let{top:e,bottom:i,start:n,end:r}=t;return(0,iy.arrayReduce)([e,i,n,r],(t,e)=>{let i=t;return e&&e.hide&&(i+=1),i},0)}clearBordersFromSelectionSettings(t){let e=(0,iy.arrayMap)(this.hot.selection.highlight.customSelections,t=>t.settings.id).indexOf(t);e>-1&&this.hot.selection.highlight.customSelections[e].clear()}clearNullCellRange(){(0,iy.arrayEach)(this.hot.selection.highlight.customSelections,(t,e)=>{if(null===t.cellRange)return this.hot.selection.highlight.customSelections[e].destroy(),this.hot.selection.highlight.customSelections.splice(e,1),!1})}hideBorders(){(0,iy.arrayEach)(this.savedBorders,t=>{this.clearBordersFromSelectionSettings(t.id),this.clearNullCellRange()})}spliceBorder(t){let e=(0,iy.arrayMap)(this.savedBorders,t=>t.id).indexOf(t);e>-1&&this.savedBorders.splice(e,1)}checkSavedBorders(t){let e=!1;return 4===this.countHide(t)?(this.spliceBorder(t.id),e=!0):(0,iy.arrayEach)(this.savedBorders,(i,n)=>{if(t.id===i.id)return this.savedBorders[n]=t,e=!0,!1}),e}checkCustomSelectionsFromContextMenu(t,e,i){let n=!1;return(0,iy.arrayEach)(this.hot.selection.highlight.customSelections,r=>{if(t.id===r.settings.id){let t=this.hot.view._wt.selectionManager.getBorderInstances(r);return(0,iy.arrayEach)(t,t=>{t.toggleHiddenClass(e,i)}),n=!0,!1}}),n}checkCustomSelections(t,e,i){let n=this.countHide(t),r=!1;return 4===n?(this.removeAllBorders(t.row,t.col),r=!0):(0,iy.arrayEach)(this.hot.selection.highlight.customSelections,n=>{if(t.id===n.settings.id){if(n.visualCellRange=e,n.commit(),i){let e=this.hot.view._wt.selectionManager.getBorderInstances(n);(0,iy.arrayEach)(e,e=>{e.changeBorderStyle(i,t)})}return r=!0,!1}}),r}changeBorderSettings(){let t=this.hot.getSettings()[g6];if(Array.isArray(t)){let e=(0,e6.deepClone)(t);this.checkSettingsCohesion(e),e.length||(this.savedBorders=e),this.createCustomBorders(e)}else void 0!==t&&this.createCustomBorders(this.savedBorders)}checkSettingsCohesion(t){let e=t.some(t=>(0,eX.isDefined)(t.left)||(0,eX.isDefined)(t.right)),i=t.some(t=>(0,eX.isDefined)(t.start)||(0,eX.isDefined)(t.end));if(e&&i)throw Error('The "left"/"right" and "start"/"end" options should not be used together. Please use only the option "start"/"end".');if(this.hot.isRtl()&&e)throw Error('The "left"/"right" properties are not supported for RTL. Please use option "start"/"end".')}destroy(){super.destroy()}}),nn(class extends cv{constructor(){super(...arguments),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,mn),mn.add(this),mt(this,"boundaries",null),mt(this,"callback",null),mt(this,"listening",!1)}static get PLUGIN_KEY(){return mi}static get PLUGIN_PRIORITY(){return 100}isEnabled(){return!!this.hot.getSettings()[mi]}enablePlugin(){this.enabled||(this.addHook("afterOnCellMouseDown",t=>me(mn,this,mr).call(this,t)),this.addHook("afterOnCellCornerMouseDown",t=>me(mn,this,mr).call(this,t)),this.registerEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.unregisterEvents(),super.disablePlugin()}setBoundaries(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:0,right:this.hot.rootWindow.innerWidth,top:0,bottom:this.hot.rootWindow.innerHeight};this.boundaries=t}setCallback(t){this.callback=t}check(t,e){let i=0,n=0;e<this.boundaries.top?n=e-this.boundaries.top:e>this.boundaries.bottom&&(n=e-this.boundaries.bottom),t<this.boundaries.left?i=t-this.boundaries.left:t>this.boundaries.right&&(i=t-this.boundaries.right),this.callback(i,n)}listen(){this.listening=!0}unlisten(){this.listening=!1}isListening(){return this.listening}registerEvents(){let{rootWindow:t}=this.hot,e=t;for(;e;)this.eventManager.addEventListener(e.document,"contextmenu",()=>this.unlisten()),this.eventManager.addEventListener(e.document,"mouseup",()=>this.unlisten()),this.eventManager.addEventListener(e.document,"mousemove",t=>this.onMouseMove(t)),e=(0,eG.getParentWindow)(e)}unregisterEvents(){this.eventManager.clear()}onMouseMove(t){this.isListening()&&this.check(t.clientX,t.clientY)}destroy(){super.destroy()}}),nn(mp),nn(class extends cv{static get PLUGIN_KEY(){return"exportFile"}static get PLUGIN_PRIORITY(){return 240}isEnabled(){return!0}exportAsString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._createTypeFormatter(t,e).export()}exportAsBlob(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._createBlob(this._createTypeFormatter(t,e))}downloadFile(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{rootDocument:i,rootWindow:n}=this.hot,r=this._createTypeFormatter(t,e),o=this._createBlob(r),a=n.URL||n.webkitURL,s=i.createElement("a"),l=`${r.options.filename}.${r.options.fileExtension}`;if(void 0!==s.download){let t=a.createObjectURL(o);s.style.display="none",s.setAttribute("href",t),s.setAttribute("download",l),i.body.appendChild(s),s.dispatchEvent(new MouseEvent("click")),i.body.removeChild(s),setTimeout(()=>{a.revokeObjectURL(t)},100)}else navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob(o,l)}_createTypeFormatter(t){var e;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!mR[t])throw Error(`Export format type "${t}" is not supported.`);return e=new m_(this.hot),"function"==typeof mR[t]?new mR[t](e,i):null}_createBlob(t){let e=null;return"undefined"!=typeof Blob&&(e=new Blob([t.export()],{type:`${t.options.mimeType};charset=${t.options.encoding}`})),e}}),nn(class extends cv{static get PLUGIN_KEY(){return vT}static get PLUGIN_PRIORITY(){return 250}static get PLUGIN_DEPS(){return["plugin:DropdownMenu","plugin:HiddenRows","cell-type:checkbox"]}constructor(t){var e;super(t),vS(this,vR),vR.add(this),vC(this,"dropdownMenuPlugin",null),vC(this,"conditionCollection",null),vC(this,"conditionUpdateObserver",null),vC(this,"components",new Map([["filter_by_condition",null],["filter_operators",null],["filter_by_condition2",null],["filter_by_value",null],["filter_action_bar",null]])),vC(this,"filtersRowsMap",null),e=void 0,vS(this,vI),vI.set(this,e),this.hot.addHook("afterGetColHeader",(t,e)=>vM(vR,this,vN).call(this,t,e))}isEnabled(){return!!this.hot.getSettings()[vT]}enablePlugin(){if(this.enabled)return;this.filtersRowsMap=this.hot.rowIndexMapper.registerMap(this.pluginName,new aX),this.dropdownMenuPlugin=this.hot.getPlugin("dropdownMenu");let t=this.hot.getSettings().dropdownMenu,e=t&&t.uiContainer||this.hot.rootDocument.body,i=t=>(t.addLocalHook("accept",()=>vM(vR,this,vO).call(this,"accept")),t.addLocalHook("cancel",()=>vM(vR,this,vO).call(this,"cancel")),t.addLocalHook("change",e=>vM(vR,this,vP).call(this,t,e)),t);if(!this.components.get("filter_by_condition")){let t=new yE(this.hot,{id:"filter_by_condition",name:()=>`${this.hot.getTranslatedPhrase(lm)}:`,addSeparator:!1,menuContainer:e});t.addLocalHook("afterClose",()=>vM(vR,this,vL).call(this)),this.components.set("filter_by_condition",i(t))}if(this.components.get("filter_operators")||this.components.set("filter_operators",new yF(this.hot,{id:"filter_operators",name:"Operators"})),!this.components.get("filter_by_condition2")){let t=new yE(this.hot,{id:"filter_by_condition2",name:"",addSeparator:!0,menuContainer:e});t.addLocalHook("afterClose",()=>vM(vR,this,vL).call(this)),this.components.set("filter_by_condition2",i(t))}if(this.components.get("filter_by_value")||this.components.set("filter_by_value",i(new vi(this.hot,{id:"filter_by_value",name:()=>`${this.hot.getTranslatedPhrase(ly)}:`}))),this.components.get("filter_action_bar")||this.components.set("filter_action_bar",i(new vs(this.hot,{id:"filter_action_bar",name:"Action bar"}))),this.conditionCollection||(this.conditionCollection=new vc(this.hot)),this.conditionUpdateObserver||(this.conditionUpdateObserver=new vy(this.hot,this.conditionCollection,t=>this.getDataMapAtColumn(t)),this.conditionUpdateObserver.addLocalHook("update",t=>vM(vR,this,vH).call(this,t))),this.components.forEach(t=>t.show()),this.addHook("afterDropdownMenuDefaultOptions",t=>vM(vR,this,vD).call(this,t)),this.addHook("afterDropdownMenuShow",()=>vM(vR,this,vA).call(this)),this.addHook("afterDropdownMenuHide",()=>vM(vR,this,vk).call(this)),this.addHook("afterChange",t=>vM(vR,this,vE).call(this,t)),this.hot.getSettings().dropdownMenu&&this.dropdownMenuPlugin&&(this.dropdownMenuPlugin.disablePlugin(),this.dropdownMenuPlugin.enablePlugin()),!v_(vI,this)&&this.dropdownMenuPlugin.enabled){var n;let t=this.dropdownMenuPlugin.menu,e=[{focus:()=>{let e=t.getNavigator(),i=v_(vI,this).getLastMenuPage();t.focus(),i>0?e.setCurrentPage(i):e.toFirstItem()}},...Array.from(this.components).map(t=>{let[,e]=t;return e.getElements()}).flat()];n=function(t,e){let i=-1,n=fj({initialPage:0,size:()=>e.length,onItemSelect:(t,i)=>{let n=e[t];return n instanceof y4?i:(!n.element||!!(0,eG.isVisible)(n.element))&&void n.focus()}}),r=i=>()=>{t.isOpened()&&t.getKeyboardShortcutsCtrl().listen(vx),n.setCurrentPage(e.indexOf(i))};function o(r){let o=t.getKeyboardShortcutsCtrl(),a=r.getKeyboardShortcutsCtrl();n.clear(),a.addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],forwardToContext:o.getContext(vx),callback:()=>{r.isSubMenu()&&r.close(),o.listen(vx)}}]),r.isSubMenu()||o.addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],callback:e=>{let r=t.getNavigator();r.getCurrentPage()>-1&&(i=r.getCurrentPage()),r.clear(),e.shiftKey?n.toPreviousItem():n.toNextItem()}},{keys:[["Escape"]],callback:()=>{t.close()}},{keys:[["Enter"],["Space"]],preventDefault:!1,callback:t=>{let i=e[n.getCurrentPage()];i instanceof yS&&(i.openOptions(),t.preventDefault()),i instanceof yG&&(i.activate(),t.preventDefault()),i instanceof yn||t.preventDefault()}}],vx)}return e.forEach(t=>{t instanceof yn&&(t.addLocalHook("click",r(t)),t.addLocalHook("focus",r(t)),t.addLocalHook("afterClose",r(t)))}),t.addLocalHook("afterSelectionChange",t=>{t.key.startsWith("filter_")||n.clear()}),t.addLocalHook("afterSubmenuOpen",o),t.addLocalHook("afterOpen",o),{...n,listen:function(){t.focus(),t.getKeyboardShortcutsCtrl().listen(vx)},getLastMenuPage:function(){return i}}}(t,e),vI.set(vM(vI,this),n);let i=t=>{v_(vI,this).listen(),t.preventDefault(),(0,eZ.isKey)(t.keyCode,"TAB")&&(t.shiftKey?v_(vI,this).toPreviousItem():v_(vI,this).toNextItem())};this.components.get("filter_by_value").addLocalHook("listTabKeydown",i),this.components.get("filter_by_condition").addLocalHook("selectTabKeydown",i)}this.registerShortcuts(),super.enablePlugin()}disablePlugin(){if(this.enabled){var t;null!==(t=this.dropdownMenuPlugin)&&void 0!==t&&t.enabled&&this.dropdownMenuPlugin.menu.clearLocalHooks(),this.components.forEach((t,e)=>{t.destroy(),this.components.set(e,null)}),this.conditionCollection.destroy(),this.conditionCollection=null,this.hot.rowIndexMapper.unregisterMap(this.pluginName)}this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Alt","A"]],stopPropagation:!0,callback:()=>{let t=this.hot.getSelected();this.clearConditions(),this.filter(),t&&this.hot.selectCells(t)},group:vT})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(vT)}addCondition(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m3,r=this.hot.toPhysicalColumn(t);this.conditionCollection.addCondition(r,{command:{key:e},args:i},n)}removeConditions(t){let e=this.hot.toPhysicalColumn(t);this.conditionCollection.removeConditions(e)}clearConditions(t){if(void 0===t)this.conditionCollection.clean();else{let e=this.hot.toPhysicalColumn(t);this.conditionCollection.removeConditions(e)}}filter(){let{navigableHeaders:t}=this.hot.getSettings(),e=this._createDataFilter(),i=!this.conditionCollection.isEmpty(),n=[],r=this.conditionCollection.exportAllConditions();if(!1!==this.hot.runHooks("beforeFilter",r,this.conditionCollection.previousConditionStack)){if(i){let i=[];this.hot.batchExecution(()=>{this.filtersRowsMap.clear();let t=mK(n=(0,iy.arrayMap)(e.filter(),t=>t.meta.visualRow));(0,i0.rangeEach)(this.hot.countSourceRows()-1,e=>{t(e)||i.push(e)}),(0,iy.arrayEach)(i,t=>{this.filtersRowsMap.setValueAtIndex(t,!0)})},!0),t||n.length||this.hot.deselectCell()}else this.filtersRowsMap.clear()}this.hot.runHooks("afterFilter",r),this.conditionCollection.setPreviousConditionStack(null),this.hot.view.adjustElementsSize(),this.hot.render(),this.hot.selection.isSelected()&&this.hot.selectCell(t?-1:0,this.hot.getSelectedRangeLast().highlight.col)}getSelectedColumn(){var t;let e=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return e?{visualIndex:e.col,physicalIndex:this.hot.toPhysicalColumn(e.col)}:null}getDataMapAtColumn(t){let e=this.hot.toVisualColumn(t),i=[];return(0,iy.arrayEach)(this.hot.getSourceDataAtCol(e),(t,n)=>{var r;let{row:o,col:a,visualCol:s,visualRow:l,type:h,instance:u,dateFormat:c,locale:d}=this.hot.getCellMeta(n,e),p=null!==(r=this.hot.getDataAtCell(this.hot.toVisualRow(n),e))&&void 0!==r?r:t;i.push({meta:{row:o,col:a,visualCol:s,visualRow:l,type:h,instance:u,dateFormat:c,locale:d},value:mQ(p)})}),i}updateValueComponentCondition(t){let e=mJ(this.hot.getDataAtCol(t));this.conditionUpdateObserver.updateStatesAtColumn(t,e)}restoreComponents(t){var e;let i=null===(e=this.getSelectedColumn())||void 0===e?void 0:e.physicalIndex;t.forEach(t=>{t.isHidden()||t.restoreState(i)}),this.updateDependentComponentsVisibility()}getOperationBasedOnArguments(t,e,i,n){let r=t;return r===m4&&e.command.key!==mL&&i.command.key!==mL&&n.command.key!==mL?r=m6:n.command.key!==mL&&(e.command.key===mL||i.command.key===mL)&&(r=m3),r}setListeningDropdownMenu(){this.dropdownMenuPlugin&&this.dropdownMenuPlugin.setListening()}updateDependentComponentsVisibility(){let{command:t}=this.components.get("filter_by_condition").getState(),e=[this.components.get("filter_by_condition2"),this.components.get("filter_operators")];t.showOperators?this.showComponents(...e):this.hideComponents(...e)}_createDataFilter(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.conditionCollection;return new vp(t,t=>this.getDataMapAtColumn(t))}getIndexesOfComponents(){let t=[];if(!this.dropdownMenuPlugin)return t;let e=this.dropdownMenuPlugin.menu;for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return(0,iy.arrayEach)(n,i=>{(0,iy.arrayEach)(e.menuItems,(e,n)=>{e.key===i.getMenuItemDescriptor().key&&t.push(n)})}),t}changeComponentsVisibility(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(!this.dropdownMenuPlugin)return;let e=this.dropdownMenuPlugin.menu.hotMenu,i=e.getPlugin("hiddenRows");for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];let a=this.getIndexesOfComponents(...r);t?i.showRows(a):i.hideRows(a),e.render()}hideComponents(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.changeComponentsVisibility(!1,...e)}showComponents(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.changeComponentsVisibility(!0,...e)}destroy(){this.enabled&&(this.components.forEach((t,e)=>{null!==t&&(t.destroy(),this.components.set(e,null))}),this.conditionCollection.destroy(),this.conditionUpdateObserver.destroy(),this.hot.rowIndexMapper.unregisterMap(this.pluginName)),super.destroy()}}),nn(class extends cv{constructor(){var t;super(...arguments),t=this,wg(this,wT),wT.add(this),wf(this,wC,!1),wf(this,w_,!1),wf(this,wM,[["valuesUpdated",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return wv(wT,t,wG).call(t,...i)}],["namedExpressionAdded",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return wv(wT,t,wY).call(t,...i)}],["namedExpressionRemoved",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return wv(wT,t,wX).call(t,...i)}],["sheetAdded",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return wv(wT,t,w$).call(t,...i)}],["sheetRenamed",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return wv(wT,t,wZ).call(t,...i)}],["sheetRemoved",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return wv(wT,t,wq).call(t,...i)}]]),wp(this,"staticRegister",(0,nr.default)("formulas")),wp(this,"engine",null),wp(this,"sheetName",null),wp(this,"indexSyncer",null),wp(this,"rowAxisSyncer",null),wp(this,"columnAxisSyncer",null)}static get PLUGIN_KEY(){return ww}static get PLUGIN_PRIORITY(){return 260}static get SETTING_KEYS(){return[ww,...wb]}get sheetId(){return null===this.sheetName?null:this.engine.getSheetId(this.sheetName)}isEnabled(){return!!this.hot.getSettings()[ww]}enablePlugin(){var t,e=this;if(!this.enabled){if(this.engine=null!==(t=function(t){let e=t.getSettings(),i=e[ww],n=null==i?void 0:i.engine;if(!0===i||(0,eX.isUndefined)(n))return null;if("function"==typeof n.hyperformula||"function"==typeof n){var r;return function(t,e,i){var n,r;let o=e[ww],a=function(t){var e;let i=t[ww],n=vW(null!=i&&null!==(e=i.engine)&&void 0!==e&&e.hyperformula?i.engine:{}),r=vF(t);return{...vB,...n,...r}}(e),s=vz(),l=vj();(n=o.functions)&&n.forEach(e=>{let{name:i,plugin:n,translations:r}=e;try{t.registerFunction(i,n,r)}catch(t){(0,e8.warn)(t.message)}}),function(t,e){if(e){let{langCode:i}=e;try{t.registerLanguage(i,e)}catch(t){(0,e8.warn)(t.message)}}}(t,o.language);let h=t.buildEmpty(a);return s.set(h,[i]),l.set(h,[i.guid]),(r=o.namedExpressions)&&(h.suspendEvaluation(),r.forEach(t=>{let{name:e,expression:i,scope:n,options:r}=t;try{h.addNamedExpression(e,i,n,r)}catch(t){(0,e8.warn)(t.message)}}),h.resumeEvaluation()),h.on("sheetAdded",()=>{h.rebuildAndRecalculate()}),h.on("sheetRemoved",()=>{h.rebuildAndRecalculate()}),h}(null!==(r=n.hyperformula)&&void 0!==r?r:n,e,t)}if("object"==typeof n&&(0,eX.isUndefined)(n.hyperformula)){let e=vz(),i=vj().get(n);return e.has(n)||e.set(n,[]),e.get(n).push(t),i&&i.push(t.guid),n.getConfig().licenseKey||n.updateConfig({licenseKey:vV}),(n.getConfig().leapYear1900!==vB.leapYear1900||!1===(0,e6.isObjectEqual)(n.getConfig().nullDate,vB.nullDate))&&(0,e8.warn)((0,nJ.toSingleLine)`If you use HyperFormula with Handsontable, keep the default \`leapYear1900\` and \`nullDate\` 
      settings. Otherwise, HyperFormula's dates may not sync correctly with Handsontable's dates.`),n}return null}(this.hot))&&void 0!==t?t:this.engine,!this.engine){(0,e8.warn)("Missing the required `engine` key in the Formulas settings. Please fill it with either an engine class or an engine instance.");return}if(null!==this.sheetName&&!this.engine.doesSheetExist(this.sheetName)){let t=this.addSheet(this.sheetName,this.hot.getSourceDataArray());!1!==t&&(this.sheetName=t)}this.addHook("beforeLoadData",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wE).call(e,...i)}),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wk).call(e,...i)}),this.addHook("beforeUpdateData",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wE).call(e,...i)}),this.addHook("afterUpdateData",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wk).call(e,...i)}),this.addHook("modifyData",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wD).call(e,...i)}),this.addHook("modifySourceData",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wO).call(e,...i)}),this.addHook("beforeValidate",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wI).call(e,...i)}),this.addHook("afterSetSourceDataAtCell",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wL).call(e,...i)}),this.addHook("afterSetDataAtCell",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wP).call(e,...i)}),this.addHook("afterSetDataAtRowProp",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wP).call(e,...i)}),this.addHook("beforeCreateRow",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wN).call(e,...i)}),this.addHook("beforeCreateCol",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wH).call(e,...i)}),this.addHook("afterCreateRow",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wF).call(e,...i)}),this.addHook("afterCreateCol",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wW).call(e,...i)}),this.addHook("beforeRemoveRow",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wV).call(e,...i)}),this.addHook("beforeRemoveCol",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wB).call(e,...i)}),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wz).call(e,...i)}),this.addHook("afterRemoveCol",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wj).call(e,...i)}),this.indexSyncer=new wd(this.hot.rowIndexMapper,this.hot.columnIndexMapper,t=>{this.hot.addHookOnce("init",()=>{t()})}),this.rowAxisSyncer=this.indexSyncer.getForAxis("row"),this.columnAxisSyncer=this.indexSyncer.getForAxis("column"),this.hot.addHook("afterRowSequenceChange",this.rowAxisSyncer.getIndexesChangeSyncMethod()),this.hot.addHook("afterColumnSequenceChange",this.columnAxisSyncer.getIndexesChangeSyncMethod()),this.hot.addHook("beforeRowMove",(t,e,i,n)=>{this.rowAxisSyncer.storeMovesInformation(t,e,n)}),this.hot.addHook("beforeColumnMove",(t,e,i,n)=>{this.columnAxisSyncer.storeMovesInformation(t,e,n)}),this.hot.addHook("afterRowMove",(t,e,i,n,r)=>{this.rowAxisSyncer.calculateAndSyncMoves(n,r)}),this.hot.addHook("afterColumnMove",(t,e,i,n,r)=>{this.columnAxisSyncer.calculateAndSyncMoves(n,r)}),this.hot.addHook("beforeColumnFreeze",(t,e)=>{this.columnAxisSyncer.storeMovesInformation([t],this.hot.getSettings().fixedColumnsStart,e)}),this.hot.addHook("afterColumnFreeze",(t,e)=>{this.columnAxisSyncer.calculateAndSyncMoves(e,e)}),this.hot.addHook("beforeColumnUnfreeze",(t,e)=>{this.columnAxisSyncer.storeMovesInformation([t],this.hot.getSettings().fixedColumnsStart-1,e)}),this.hot.addHook("afterColumnUnfreeze",(t,e)=>{this.columnAxisSyncer.calculateAndSyncMoves(e,e)}),this.addHook("afterCellMetaReset",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wA).call(e,...i)}),this.addHook("beforeUndo",()=>{this.indexSyncer.setPerformUndo(!0),this.engine.undo()}),this.addHook("beforeRedo",()=>{this.indexSyncer.setPerformRedo(!0),this.engine.redo()}),this.addHook("afterUndo",()=>{this.indexSyncer.setPerformUndo(!1)}),this.addHook("afterUndo",()=>{this.indexSyncer.setPerformRedo(!1)}),this.addHook("afterDetachChild",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wU).call(e,...i)}),this.addHook("beforeAutofill",function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return wv(wT,e,wR).call(e,...i)}),wy(wM,this).forEach(t=>{let[e,i]=t;return this.engine.on(e,i)}),super.enablePlugin()}}disablePlugin(){wy(wM,this).forEach(t=>{let[e,i]=t;return this.engine.off(e,i)}),vG(this.engine,this.hot),this.engine=null,super.disablePlugin()}updatePlugin(t){var e;let i=function(t){var e;let i=t[ww],n=vW(null!=i&&null!==(e=i.engine)&&void 0!==e&&e.hyperformula?i.engine:{}),r=vF(t);return{...n,...r}}(this.hot.getSettings());e=this.engine.getConfig(),Object.keys(i).some(t=>void 0!==i[t]&&i[t]!==e[t])&&this.engine.updateConfig(i);let n=this.hot.getSettings()[ww];if((0,eX.isDefined)(n)&&(0,eX.isDefined)(n.sheetName)&&n.sheetName!==this.sheetName&&this.switchSheet(n.sheetName),!t.data&&null===this.sheetName){let t=this.hot.getSettings()[ww].sheetName;t&&this.engine.doesSheetExist(t)?this.switchSheet(this.sheetName):this.sheetName=this.addSheet(null!=t?t:void 0,this.hot.getSourceDataArray())}super.updatePlugin(t)}destroy(){wy(wM,this).forEach(t=>{var e;let[i,n]=t;return null===(e=this.engine)||void 0===e?void 0:e.off(i,n)}),wm(wM,this,null),vG(this.engine,this.hot),this.engine=null,super.destroy()}addSheet(t,e){if((0,eX.isDefined)(e)&&!ak(e))return(0,e8.warn)("The provided data should be an array of arrays."),!1;if(null!=t&&this.engine.doesSheetExist(t))return(0,e8.warn)("Sheet with the provided name already exists."),!1;try{let i=this.engine.addSheet(null!=t?t:void 0);return e&&this.engine.setSheetContent(this.engine.getSheetId(i),e),i}catch(t){return(0,e8.warn)(t.message),!1}}switchSheet(t){if(!this.engine.doesSheetExist(t)){(0,e8.error)(`The sheet named \`${t}\` does not exist, switch aborted.`);return}this.sheetName=t;let e=this.engine.getSheetSerialized(this.sheetId);e.length>0&&this.hot.loadData(e,`${(0,iJ.toUpperCaseFirst)(ww)}.switchSheet`)}getCellType(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.sheetId,n=this.hot.toPhysicalRow(t),r=this.hot.toPhysicalColumn(e);return null!==n&&null!==r?this.engine.getCellType({sheet:i,row:this.rowAxisSyncer.getHfIndexFromVisualIndex(t),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(e)}):"EMPTY"}isFormulaCellType(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.sheetId;return this.engine.doesCellHaveFormula({sheet:i,row:this.rowAxisSyncer.getHfIndexFromVisualIndex(t),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(e)})}renderDependentSheets(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=new Set;t.forEach(t=>{var e;let n=null==t||null===(e=t.address)||void 0===e?void 0:e.sheet;void 0===n||i.has(n)||i.add(n)}),vU(this.engine).forEach((t,n)=>{if((e||n!==this.sheetId)&&i.has(n)){var r;t.render(),null===(r=t.view)||void 0===r||r.adjustElementsSize()}})}validateDependentCells(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=t=>{var e;let{row:i,col:n,sheet:r}=null!==(e=null==t?void 0:t.address)&&void 0!==e?e:{};return(0,eX.isDefined)(r)?`${r}:${i}x${n}`:""},n=new Set(e.map(t=>i(t)));t.forEach(t=>{var e,r;let{row:o,col:a}=null!==(e=t.address)&&void 0!==e?e:{};if(!1===(0,eX.isDefined)(o)||!1===(0,eX.isDefined)(a)||o>=this.hot.countRows()||a>=this.hot.countCols())return;let s=null==t||null===(r=t.address)||void 0===r?void 0:r.sheet,l=i(t);if(void 0!==s&&!n.has(l)){let t=vU(this.engine).get(s);if(!t)return;t.validateCell(t.getDataAtCell(o,a),t.getCellMeta(o,a),()=>{})}})}syncChangeWithEngine(t,e,i){let n={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(t),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(e),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(n)){(0,e8.warn)(`Not possible to set cell data at ${JSON.stringify(n)}`);return}let r=this.hot.getCellMeta(t,e);if(v$(i,r.type)){if(vZ(i,r.dateFormat))i=vq(i,r.dateFormat);else{var o;!1===("string"==typeof(o=i)&&o.startsWith("="))&&(i=`'${i}`)}}return this.engine.setCellContents(n,i)}}),nn(class extends cv{constructor(){super(...arguments),wQ(this,w4),w4.add(this),wK(this,w5,{}),wK(this,w3,null)}static get PLUGIN_KEY(){return w2}static get PLUGIN_PRIORITY(){return 310}isEnabled(){return!!this.hot.getSettings()[w2]}enablePlugin(){var t=this;if(this.enabled)return;let e=this.hot.getSettings()[w2];(0,e6.isObject)(e)&&(w0(w5,this,e),(0,eX.isUndefined)(e.copyPasteEnabled)&&(e.copyPasteEnabled=!0)),w0(w3,this,new aW),wJ(w3,this).addLocalHook("init",()=>w1(w4,this,be).call(this)),this.hot.columnIndexMapper.registerMap(this.pluginName,wJ(w3,this)),this.addHook("afterContextMenuDefaultOptions",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return w1(w4,t,bt).call(t,...i)}),this.addHook("afterGetCellMeta",(t,e,i)=>w1(w4,this,w8).call(this,t,e,i)),this.addHook("modifyColWidth",(t,e)=>w1(w4,this,w6).call(this,t,e),2),this.addHook("afterGetColHeader",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return w1(w4,t,w7).call(t,...i)}),this.addHook("modifyCopyableRange",t=>w1(w4,this,w9).call(this,t)),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),w0(w5,this,{}),super.disablePlugin(),this.resetCellsMeta()}showColumns(t){let e=this.getHiddenColumns(),i=this.isValidConfig(t),n=e,r=wJ(w3,this).getValues().slice(),o=t.length>0;if(i&&o){let e=t.map(t=>this.hot.toPhysicalColumn(t));(0,iy.arrayEach)(e,t=>{r[t]=!1}),n=(0,iy.arrayReduce)(r,(t,e,i)=>(e&&t.push(this.hot.toVisualColumn(i)),t),[])}!1!==this.hot.runHooks("beforeUnhideColumns",e,n,i&&o)&&(i&&o&&wJ(w3,this).setValues(r),this.hot.view.adjustElementsSize(),this.hot.runHooks("afterUnhideColumns",e,n,i&&o,i&&n.length<e.length))}showColumn(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.showColumns(e)}hideColumns(t){let e=this.getHiddenColumns(),i=this.isValidConfig(t),n=e;i&&(n=Array.from(new Set(e.concat(t)))),!1!==this.hot.runHooks("beforeHideColumns",e,n,i)&&(i&&this.hot.batchExecution(()=>{(0,iy.arrayEach)(t,t=>{wJ(w3,this).setValueAtIndex(this.hot.toPhysicalColumn(t),!0)})},!0),this.hot.runHooks("afterHideColumns",e,n,i,i&&n.length>e.length))}hideColumn(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.hideColumns(e)}getHiddenColumns(){return(0,iy.arrayMap)(wJ(w3,this).getHiddenIndexes(),t=>this.hot.toVisualColumn(t))}isHidden(t){return wJ(w3,this).getValueAtIndex(this.hot.toPhysicalColumn(t))||!1}isValidConfig(t){let e=this.hot.countCols();return!!Array.isArray(t)&&t.length>0&&t.every(t=>Number.isInteger(t)&&t>=0&&t<e)}resetCellsMeta(){(0,iy.arrayEach)(this.hot.getCellsMeta(),t=>{t&&(t.skipColumnOnPaste=!1)})}destroy(){w0(w5,this,null),w0(w3,this,null),super.destroy()}}),nn(class extends cv{constructor(){super(...arguments),bn(this,bu),bu.add(this),bi(this,bl,{}),bi(this,bh,null)}static get PLUGIN_KEY(){return bs}static get PLUGIN_PRIORITY(){return 320}isEnabled(){return!!this.hot.getSettings()[bs]}enablePlugin(){var t=this;if(this.enabled)return;let e=this.hot.getSettings()[bs];(0,e6.isObject)(e)&&(bo(bl,this,e),(0,eX.isUndefined)(e.copyPasteEnabled)&&(e.copyPasteEnabled=!0)),bo(bh,this,new aW),br(bh,this).addLocalHook("init",()=>ba(bu,this,bm).call(this)),this.hot.rowIndexMapper.registerMap(this.pluginName,br(bh,this)),this.addHook("afterContextMenuDefaultOptions",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return ba(bu,t,bg).call(t,...i)}),this.addHook("afterGetCellMeta",(t,e,i)=>ba(bu,this,bd).call(this,t,e,i)),this.addHook("modifyRowHeight",(t,e)=>ba(bu,this,bc).call(this,t,e)),this.addHook("afterGetRowHeader",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return ba(bu,t,bf).call(t,...i)}),this.addHook("modifyCopyableRange",t=>ba(bu,this,bp).call(this,t)),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap(this.pluginName),bo(bl,this,{}),super.disablePlugin(),this.resetCellsMeta()}showRows(t){let e=this.getHiddenRows(),i=this.isValidConfig(t),n=e,r=br(bh,this).getValues().slice(),o=t.length>0;if(i&&o){let e=t.map(t=>this.hot.toPhysicalRow(t));(0,iy.arrayEach)(e,t=>{r[t]=!1}),n=(0,iy.arrayReduce)(r,(t,e,i)=>(e&&t.push(this.hot.toVisualRow(i)),t),[])}!1!==this.hot.runHooks("beforeUnhideRows",e,n,i&&o)&&(i&&o&&br(bh,this).setValues(r),this.hot.runHooks("afterUnhideRows",e,n,i&&o,i&&n.length<e.length))}showRow(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.showRows(e)}hideRows(t){let e=this.getHiddenRows(),i=this.isValidConfig(t),n=e;i&&(n=Array.from(new Set(e.concat(t)))),!1!==this.hot.runHooks("beforeHideRows",e,n,i)&&(i&&this.hot.batchExecution(()=>{(0,iy.arrayEach)(t,t=>{br(bh,this).setValueAtIndex(this.hot.toPhysicalRow(t),!0)})},!0),this.hot.runHooks("afterHideRows",e,n,i,i&&n.length>e.length))}hideRow(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.hideRows(e)}getHiddenRows(){return(0,iy.arrayMap)(br(bh,this).getHiddenIndexes(),t=>this.hot.toVisualRow(t))}isHidden(t){return br(bh,this).getValueAtIndex(this.hot.toPhysicalRow(t))||!1}isValidConfig(t){let e=this.hot.countRows();return!!Array.isArray(t)&&t.length>0&&t.every(t=>Number.isInteger(t)&&t>=0&&t<e)}resetCellsMeta(){(0,iy.arrayEach)(this.hot.getCellsMeta(),t=>{t&&(t.skipRowOnPaste=!1)})}destroy(){bo(bl,this,null),bo(bh,this,null),super.destroy()}}),nn(class extends cv{constructor(){super(...arguments),by(this,bC),bC.add(this),by(this,bS),bS.set(this,!1)}static get PLUGIN_KEY(){return bx}static get PLUGIN_PRIORITY(){return 110}isEnabled(){return!!this.hot.getSettings()[bx]}enablePlugin(){this.enabled||(this.addHook("afterContextMenuDefaultOptions",t=>bb(bC,this,b_).call(this,t)),this.addHook("beforeColumnMove",(t,e)=>bb(bC,this,bM).call(this,t,e)),super.enablePlugin())}disablePlugin(){bw(bS,this,!1),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}freezeColumn(t){let e=this.hot.getSettings(),i=e.fixedColumnsStart<this.hot.countCols()&&t>e.fixedColumnsStart-1;bv(bS,this)||bw(bS,this,!0),!1!==this.hot.runHooks("beforeColumnFreeze",t,i)&&(i&&(this.hot.columnIndexMapper.moveIndexes(t,e.fixedColumnsStart),e._fixedColumnsStart+=1),this.hot.runHooks("afterColumnFreeze",t,i))}unfreezeColumn(t){let e=this.hot.getSettings(),i=e.fixedColumnsStart>0&&t<=e.fixedColumnsStart-1;bv(bS,this)||bw(bS,this,!0),!1!==this.hot.runHooks("beforeColumnUnfreeze",t,i)&&(i&&(e._fixedColumnsStart-=1,this.hot.columnIndexMapper.moveIndexes(t,e.fixedColumnsStart)),this.hot.runHooks("afterColumnUnfreeze",t,i))}}),nn(class extends cv{constructor(){super(...arguments),bk(this,bK),bK.add(this),bA(this,bF,new bR(this.hot)),bA(this,bW,new bE(this.hot)),bA(this,bz,[]),bA(this,bj,0),bA(this,bU,!1),bA(this,bG,{}),bA(this,bY,void 0),bA(this,bX,void 0),bA(this,b$,void 0),bA(this,bZ,void 0),bA(this,bq,void 0)}static get PLUGIN_KEY(){return bL}static get PLUGIN_PRIORITY(){return 120}isEnabled(){return!!this.hot.getSettings()[bL]}enablePlugin(){var t=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return bP(bK,t,bQ).call(t,...i)}),this.addHook("beforeOnCellMouseOver",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return bP(bK,t,b0).call(t,...i)}),this.addHook("afterScrollVertically",()=>bP(bK,this,b2).call(this)),this.addHook("afterLoadData",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return bP(bK,t,b5).call(t,...i)}),this.buildPluginUI(),this.registerEvents(),(0,eG.addClass)(this.hot.rootElement,bN),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),super.updatePlugin()}disablePlugin(){(0,eG.removeClass)(this.hot.rootElement,bN),this.unregisterEvents(),bO(bF,this).destroy(),bO(bW,this).destroy(),super.disablePlugin()}moveColumn(t,e){return this.moveColumns([t],e)}moveColumns(t,e){let i=bO(bY,this),n=this.isMovePossible(t,e),r=this.hot.runHooks("beforeColumnMove",t,e,i,n);if(bD(bY,this,void 0),!1===r)return;n&&this.hot.columnIndexMapper.moveIndexes(t,e);let o=n&&this.isColumnOrderChanged(t,e);return this.hot.runHooks("afterColumnMove",t,e,i,n,o),o}dragColumn(t,e){return this.dragColumns([t],e)}dragColumns(t,e){let i=this.countFinalIndex(t,e);return bD(bY,this,e),this.moveColumns(t,i)}isMovePossible(t,e){let i=this.hot.columnIndexMapper.getNotTrimmedIndexesLength(),n=t.length+e>i,r=t.some(t=>t<0),o=t.some(t=>t>=i);return!n&&!(e<0)&&!r&&!o}isColumnOrderChanged(t,e){return t.some((t,i)=>t-i!==e)}countFinalIndex(t,e){let i=(0,iy.arrayReduce)(t,(t,i)=>(i<e&&(t+=1),t),0);return e-i}getColumnsWidth(t,e){let i=this.hot.columnIndexMapper,n=0;for(let r=t;r<=e;r+=1){let t=i.getRenderableFromVisualIndex(r);r<0?n+=this.hot.view._wt.wtViewport.getRowHeaderWidth()||0:null!==t&&(n+=this.hot.view._wt.wtTable.getStretchedColumnWidth(t)||0)}return n}moveBySettingsOrLoad(){let t=this.hot.getSettings()[bL];if(Array.isArray(t))this.moveColumns(t,0);else if(void 0!==t){let t=this.persistentStateLoad();t.length&&this.moveColumns(t,0)}}isFixedColumnsStart(t){return t<this.hot.getSettings().fixedColumnsStart}persistentStateSave(){this.hot.runHooks("persistentStateSave","manualColumnMove",this.hot.columnIndexMapper.getIndexesSequence())}persistentStateLoad(){let t={};return this.hot.runHooks("persistentStateLoad","manualColumnMove",t),t.value?t.value:[]}prepareColumnsToMoving(t,e){let i=[];return(0,i0.rangeEach)(t,e,t=>{i.push(t)}),i}refreshPositions(){let t=this.hot.view.getFirstFullyVisibleColumn();this.isFixedColumnsStart(bO(bX,this))&&t>0&&this.hot.scrollViewportTo({col:this.hot.columnIndexMapper.getNearestNotHiddenIndex(t-1,-1)});let e=this.hot.view._wt.wtTable,i=this.hot.view._wt.wtOverlays.scrollableElement,n="number"==typeof i.scrollX?i.scrollX:i.scrollLeft,r=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,bO(bX,this)-1),o=e.hider.offsetWidth,a=e.TBODY.offsetLeft,s=bO(bF,this).getOffset().start,l=bO(bF,this).getSize().width,h=0,u=0;if(this.hot.isRtl()){let t=this.hot.rootWindow,e=(0,eG.outerWidth)(this.hot.rootElement),r=t.innerWidth-bO(b$,this)-e;u=t.innerWidth-bO(bG,this).eventPageX-r-(void 0===i.scrollX?n:0)}else u=bO(bG,this).eventPageX-(bO(b$,this)-(void 0===i.scrollX?n:0));if(bO(bZ,this)&&(h=this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsStart(bO(bX,this))&&(r+=n),r+=h,0>bO(bX,this))bO(bq,this)>0?bO(bG,this).col=0:bO(bG,this).col=t>0?t-1:t;else if(bO(bG,this).TD.offsetWidth/2+r<=u){let t=bO(bX,this)>=bO(bj,this)?bO(bj,this)-1:bO(bX,this);bO(bG,this).col=t+1,r+=bO(bG,this).TD.offsetWidth}else bO(bG,this).col=bO(bX,this);let c=u,d=r;u+l+s>=o?c=o-l-s:u+s<a+h&&(c=a+h+Math.abs(s)),r>=o-1?d=o-1:0===d?d=1:void 0!==i.scrollX&&bO(bX,this)<bO(bq,this)&&(d-=bO(b$,this)<=i.scrollX?bO(b$,this):0),bO(bF,this).setPosition(null,c),bO(bW,this).setPosition(null,d)}registerEvents(){let{documentElement:t}=this.hot.rootDocument;this.eventManager.addEventListener(t,"mousemove",t=>bP(bK,this,bJ).call(this,t)),this.eventManager.addEventListener(t,"mouseup",()=>bP(bK,this,b1).call(this))}unregisterEvents(){this.eventManager.clear()}buildPluginUI(){bO(bF,this).build(),bO(bW,this).build()}destroy(){bO(bF,this).destroy(),bO(bW,this).destroy(),super.destroy()}}),nn(class extends cv{static get PLUGIN_KEY(){return b7}static get PLUGIN_PRIORITY(){return 130}constructor(t){super(t),b4(this,xy),xy.add(this),b3(this,xe,null),b3(this,xi,null),b3(this,xn,[]),b3(this,xr,null),b3(this,xo,null),b3(this,xa,null),b3(this,xs,null),b3(this,xl,null),b3(this,xh,this.hot.rootDocument.createElement("DIV")),b3(this,xu,this.hot.rootDocument.createElement("DIV")),b3(this,xc,null),b3(this,xd,!1),b3(this,xp,0),b3(this,xf,null),b3(this,xg,void 0),b3(this,xm,void 0),(0,eG.addClass)(b8(xh,this),"manualColumnResizer"),(0,eG.addClass)(b8(xu,this),"manualColumnResizerGuide")}get inlineDir(){return this.hot.isRtl()?"right":"left"}isEnabled(){return this.hot.getSettings()[b7]}enablePlugin(){this.enabled||(b6(xg,this,new aF),b8(xg,this).addLocalHook("init",()=>b9(xy,this,xv).call(this)),this.hot.columnIndexMapper.registerMap(this.pluginName,b8(xg,this)),this.addHook("modifyColWidth",(t,e)=>b9(xy,this,x_).call(this,t,e),1),this.addHook("beforeStretchingColumnWidth",(t,e)=>b9(xy,this,xM).call(this,t,e)),this.addHook("beforeColumnResize",(t,e,i)=>b9(xy,this,xT).call(this,t,e,i)),this.bindEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){b6(xm,this,b8(xg,this).getValues()),this.hot.columnIndexMapper.unregisterMap(this.pluginName),super.disablePlugin()}saveManualColumnWidths(){this.hot.runHooks("persistentStateSave",xt,b8(xg,this).getValues())}loadManualColumnWidths(){let t={};return this.hot.runHooks("persistentStateLoad",xt,t),t.value}setManualSize(t,e){let i=Math.max(e,20),n=this.hot.toPhysicalColumn(t);return b8(xg,this).setValueAtIndex(n,i),i}clearManualSize(t){let e=this.hot.toPhysicalColumn(t);b8(xg,this).setValueAtIndex(e,null)}setupHandlePosition(t){let e;if(!t.parentNode)return;b6(xe,this,t);let{_wt:i}=this.hot.view,n=i.wtTable.getCoords(b8(xe,this)),r=n.col;if(r<0)return;let o=(0,eG.outerHeight)(b8(xe,this)),a=b8(xe,this).getBoundingClientRect();r<i.getSetting("fixedColumnsStart")&&(e=i.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(b8(xe,this),n.row,n.col)),e||(e=i.wtOverlays.topOverlay.getRelativeCellPosition(b8(xe,this),n.row,n.col)),b6(xi,this,this.hot.columnIndexMapper.getVisualFromRenderableIndex(r)),b6(xn,this,[]);let s=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByColumnHeader();if(this.hot.selection.isSelected()&&s){let t=this.hot.getSelectedRange();(0,iy.arrayEach)(t,t=>{let e=t.getTopStartCorner().col,i=t.getBottomEndCorner().col;(0,i0.rangeEach)(e,i,t=>{b8(xn,this).includes(t)||b8(xn,this).push(t)})})}b8(xn,this).includes(b8(xi,this))||b6(xn,this,[b8(xi,this)]),b6(xl,this,e.start-6),b6(xs,this,parseInt(a.width,10)),b8(xh,this).style.top=`${e.top}px`,b8(xh,this).style[this.inlineDir]=`${b8(xl,this)+b8(xs,this)}px`,b8(xh,this).style.height=`${o}px`,this.hot.rootElement.appendChild(b8(xh,this))}refreshHandlePosition(){b8(xh,this).style[this.inlineDir]=`${b8(xl,this)+b8(xr,this)}px`}setupGuidePosition(){let t=parseInt((0,eG.outerHeight)(b8(xh,this)),10),e=parseInt(b8(xh,this).style.top,10)+t,i=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);(0,eG.addClass)(b8(xh,this),"active"),(0,eG.addClass)(b8(xu,this),"active"),b8(xu,this).style.top=`${e}px`,this.refreshGuidePosition(),b8(xu,this).style.height=`${i-t}px`,this.hot.rootElement.appendChild(b8(xu,this))}refreshGuidePosition(){b8(xu,this).style[this.inlineDir]=b8(xh,this).style[this.inlineDir]}hideHandleAndGuide(){(0,eG.removeClass)(b8(xh,this),"active"),(0,eG.removeClass)(b8(xu,this),"active")}checkIfColumnHeader(t){let e=(0,eG.closest)(t,["THEAD"],this.hot.rootElement),{topOverlay:i,topInlineStartCornerOverlay:n}=this.hot.view._wt.wtOverlays;return[i.clone.wtTable.THEAD,n.clone.wtTable.THEAD].includes(e)}getClosestTHParent(t){return"TABLE"!==t.tagName?"TH"===t.tagName?t:this.getClosestTHParent(t.parentNode):null}afterMouseDownTimeout(){let t=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(e,i)=>{let n=this.hot.runHooks("beforeColumnResize",b8(xo,this),e,!0);void 0!==n&&b6(xo,this,n),"all"===this.hot.getSettings().stretchH?this.clearManualSize(e):this.setManualSize(e,b8(xo,this)),this.saveManualColumnWidths(),this.hot.runHooks("afterColumnResize",b8(xo,this),e,!0),i&&t()};b8(xp,this)>=2&&(b8(xn,this).length>1?((0,iy.arrayEach)(b8(xn,this),t=>{e(t)}),t()):(0,iy.arrayEach)(b8(xn,this),t=>{e(t,!0)})),b6(xp,this,0),b6(xf,this,null)}bindEvents(){let{rootWindow:t,rootElement:e}=this.hot;this.eventManager.addEventListener(e,"mouseover",t=>b9(xy,this,xw).call(this,t)),this.eventManager.addEventListener(e,"mousedown",t=>b9(xy,this,xb).call(this,t)),this.eventManager.addEventListener(t,"mousemove",t=>b9(xy,this,xx).call(this,t)),this.eventManager.addEventListener(t,"mouseup",()=>b9(xy,this,xS).call(this)),this.eventManager.addEventListener(b8(xh,this),"contextmenu",()=>b9(xy,this,xC).call(this))}destroy(){super.destroy()}}),nn(class extends cv{constructor(){super(...arguments),xD(this,xX),xX.add(this),xk(this,xW,new xE(this.hot)),xk(this,xz,new xA(this.hot)),xk(this,xj,[]),xk(this,xU,void 0),xk(this,xG,{}),xk(this,xY,void 0)}static get PLUGIN_KEY(){return xN}static get PLUGIN_PRIORITY(){return 140}isEnabled(){return!!this.hot.getSettings()[xN]}enablePlugin(){var t=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return xL(xX,t,x$).call(t,...i)}),this.addHook("beforeOnCellMouseOver",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return xL(xX,t,xq).call(t,...i)}),this.addHook("afterScrollHorizontally",()=>xL(xX,this,xQ).call(this)),this.addHook("afterLoadData",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return xL(xX,t,xJ).call(t,...i)}),this.buildPluginUI(),this.registerEvents(),(0,eG.addClass)(this.hot.rootElement,xH),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),super.updatePlugin()}disablePlugin(){(0,eG.removeClass)(this.hot.rootElement,xH),this.unregisterEvents(),xP(xW,this).destroy(),xP(xz,this).destroy(),super.disablePlugin()}moveRow(t,e){return this.moveRows([t],e)}moveRows(t,e){let i=xP(xY,this),n=this.isMovePossible(t,e),r=this.hot.runHooks("beforeRowMove",t,e,i,n);if(xO(xY,this,void 0),!1===r)return;n&&this.hot.rowIndexMapper.moveIndexes(t,e);let o=n&&this.isRowOrderChanged(t,e);return this.hot.runHooks("afterRowMove",t,e,i,n,o),o}dragRow(t,e){return this.dragRows([t],e)}dragRows(t,e){let i=this.countFinalIndex(t,e);return xO(xY,this,e),this.moveRows(t,i)}isMovePossible(t,e){let i=this.hot.rowIndexMapper.getNotTrimmedIndexesLength(),n=t.length+e>i,r=t.some(t=>t<0),o=t.some(t=>t>=i);return!n&&!(e<0)&&!r&&!o}isRowOrderChanged(t,e){return t.some((t,i)=>t-i!==e)}countFinalIndex(t,e){let i=(0,iy.arrayReduce)(t,(t,i)=>(i<e&&(t+=1),t),0);return e-i}getRowsHeight(t,e){let i=this.hot.rowIndexMapper,n=0;for(let r=t;r<=e;r++){let t=i.getRenderableFromVisualIndex(r);null!==t&&(n+=this.hot.view._wt.wtTable.getRowHeight(t)||23)}return n}moveBySettingsOrLoad(){let t=this.hot.getSettings()[xN];if(Array.isArray(t))this.moveRows(t,0);else if(void 0!==t){let t=this.persistentStateLoad();t.length&&this.moveRows(t,0)}}isFixedRowTop(t){return t<this.hot.getSettings().fixedRowsTop}isFixedRowBottom(t){return t>this.hot.countRows()-1-this.hot.getSettings().fixedRowsBottom}persistentStateSave(){this.hot.runHooks("persistentStateSave","manualRowMove",this.hot.rowIndexMapper.getIndexesSequence())}persistentStateLoad(){let t={};return this.hot.runHooks("persistentStateLoad","manualRowMove",t),t.value?t.value:[]}prepareRowsToMoving(){let t=this.hot.getSelectedRangeLast(),e=[];if(!t)return e;let{from:i,to:n}=t,r=Math.min(i.row,n.row),o=Math.max(i.row,n.row);return(0,i0.rangeEach)(r,o,t=>{e.push(t)}),e}refreshPositions(){let t=xP(xG,this).coords,e=this.hot.view.getFirstFullyVisibleRow(),i=this.hot.view.getLastFullyVisibleRow(),n=this.hot.countRows();this.isFixedRowTop(t.row)&&e>0&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(e-1,-1)),this.isFixedRowBottom(t.row)&&i<n&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(i+1,1),void 0,!0);let r=this.hot.view._wt.wtTable,o=xP(xG,this).TD,a=this.hot.rootElement,s=(0,eG.offset)(a),l=(0,eG.getTrimmingContainer)(a),h=r.holder.scrollTop,u=this.hot.rootWindow!==l?l.scrollTop:0,c=s.top-u,d=xP(xG,this).eventPageY-c+h,p=r.hider.offsetHeight,f=r.TBODY.offsetTop,g=xP(xW,this).getOffset().top,m=xP(xW,this).getSize().height,y=o.offsetHeight/2,w=o.offsetHeight,b=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,t.row-1),x=d>=b+y;this.isFixedRowTop(t.row)&&(b+=this.hot.view._wt.wtOverlays.topOverlay.getOverlayOffset()),t.row<0?xP(xG,this).row=e>0?e-1:e:x?(xP(xG,this).row=t.row+1,b+=0===t.row?w-1:w):xP(xG,this).row=t.row;let S=d,C=b;d+m+g>=p?S=p-m-g:d+g<f&&(S=f+Math.abs(g)),b>=p-1&&(C=p-1),xP(xW,this).setPosition(S),xP(xz,this).setPosition(C)}registerEvents(){let{documentElement:t}=this.hot.rootDocument;this.eventManager.addEventListener(t,"mousemove",t=>xL(xX,this,xZ).call(this,t)),this.eventManager.addEventListener(t,"mouseup",()=>xL(xX,this,xK).call(this))}unregisterEvents(){this.eventManager.clear()}buildPluginUI(){xP(xW,this).build(),xP(xz,this).build()}destroy(){xP(xW,this).destroy(),xP(xz,this).destroy(),super.destroy()}}),nn(class extends cv{static get PLUGIN_KEY(){return x4}static get PLUGIN_PRIORITY(){return 30}constructor(t){super(t),x1(this,Sp),Sp.add(this),x0(this,x8,null),x0(this,x9,null),x0(this,x7,[]),x0(this,St,null),x0(this,Se,null),x0(this,Si,null),x0(this,Sn,null),x0(this,Sr,null),x0(this,So,this.hot.rootDocument.createElement("DIV")),x0(this,Sa,this.hot.rootDocument.createElement("DIV")),x0(this,Ss,!1),x0(this,Sl,!1),x0(this,Sh,0),x0(this,Su,null),x0(this,Sc,void 0),x0(this,Sd,void 0),(0,eG.addClass)(x5(So,this),"manualRowResizer"),(0,eG.addClass)(x5(Sa,this),"manualRowResizerGuide")}get inlineDir(){return this.hot.isRtl()?"right":"left"}isEnabled(){return this.hot.getSettings()[x4]}enablePlugin(){this.enabled||(x2(Sc,this,new aF),x5(Sc,this).addLocalHook("init",()=>x3(Sp,this,Sb).call(this)),this.hot.rowIndexMapper.registerMap(this.pluginName,x5(Sc,this)),this.addHook("modifyRowHeight",(t,e)=>x3(Sp,this,Sw).call(this,t,e)),this.bindEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){x2(Sd,this,x5(Sc,this).getValues()),this.hot.rowIndexMapper.unregisterMap(this.pluginName),super.disablePlugin()}saveManualRowHeights(){this.hot.runHooks("persistentStateSave",x6,x5(Sc,this).getValues())}loadManualRowHeights(){let t={};return this.hot.runHooks("persistentStateLoad",x6,t),t.value}setManualSize(t,e){let i=this.hot.toPhysicalRow(t),n=Math.max(e,23);return x5(Sc,this).setValueAtIndex(i,n),n}getLastDesiredRowHeight(){return x5(St,this)}setupHandlePosition(t){let e;x2(x8,this,t);let{view:i}=this.hot,{_wt:n}=i,r=n.wtTable.getCoords(x5(x8,this)),o=r.row;if(o<0)return;let a=(0,eG.outerWidth)(x5(x8,this)),s=x5(x8,this).getBoundingClientRect(),l=o<n.getSetting("fixedRowsTop"),h=o>=i.countNotHiddenRowIndexes(0,1)-n.getSetting("fixedRowsBottom");l?e=n.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(x5(x8,this),r.row,r.col):h&&(e=n.wtOverlays.bottomInlineStartCornerOverlay.getRelativeCellPosition(x5(x8,this),r.row,r.col)),e||(e=n.wtOverlays.inlineStartOverlay.getRelativeCellPosition(x5(x8,this),r.row,r.col)),x2(x9,this,this.hot.rowIndexMapper.getVisualFromRenderableIndex(o)),x2(x7,this,[]);let u=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByRowHeader();if(this.hot.selection.isSelected()&&u){let t=this.hot.getSelectedRange();(0,iy.arrayEach)(t,t=>{let e=t.getTopStartCorner().row,i=t.getBottomStartCorner().row;(0,i0.rangeEach)(e,i,t=>{x5(x7,this).includes(t)||x5(x7,this).push(t)})})}x5(x7,this).includes(x5(x9,this))||x2(x7,this,[x5(x9,this)]),x2(Sr,this,e.top-6),x2(Sn,this,parseInt(s.height,10)),x5(So,this).style.top=`${x5(Sr,this)+x5(Sn,this)}px`,x5(So,this).style[this.inlineDir]=`${e.start}px`,x5(So,this).style.width=`${a}px`,this.hot.rootElement.appendChild(x5(So,this))}refreshHandlePosition(){x5(So,this).style.top=`${x5(Sr,this)+x5(St,this)}px`}setupGuidePosition(){let t=parseInt((0,eG.outerWidth)(x5(So,this)),10),e=parseInt(x5(So,this).style[this.inlineDir],10)+t,i=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);(0,eG.addClass)(x5(So,this),"active"),(0,eG.addClass)(x5(Sa,this),"active"),x5(Sa,this).style.top=x5(So,this).style.top,x5(Sa,this).style[this.inlineDir]=`${e}px`,x5(Sa,this).style.width=`${i-t}px`,this.hot.rootElement.appendChild(x5(Sa,this))}refreshGuidePosition(){x5(Sa,this).style.top=x5(So,this).style.top}hideHandleAndGuide(){(0,eG.removeClass)(x5(So,this),"active"),(0,eG.removeClass)(x5(Sa,this),"active")}checkIfRowHeader(t){let e=(0,eG.closest)(t,["TBODY"],this.hot.rootElement),{inlineStartOverlay:i,topInlineStartCornerOverlay:n,bottomInlineStartCornerOverlay:r}=this.hot.view._wt.wtOverlays;return[i.clone.wtTable.TBODY,n.clone.wtTable.TBODY,r.clone.wtTable.TBODY].includes(e)}getClosestTHParent(t){return"TABLE"!==t.tagName?"TH"===t.tagName?t:this.getClosestTHParent(t.parentNode):null}getActualRowHeight(t){let e=this.hot.view._wt.wtTable.getRowHeight(t);return void 0!==e&&x5(Se,this)<e?e:x5(Se,this)}afterMouseDownTimeout(){let t=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(e,i)=>{let n=this.hot.runHooks("beforeRowResize",this.getActualRowHeight(e),e,!0);void 0!==n&&x2(Se,this,n),this.setManualSize(e,x5(Se,this)),this.hot.runHooks("afterRowResize",this.getActualRowHeight(e),e,!0),i&&t()};x5(Sh,this)>=2&&(x5(x7,this).length>1?((0,iy.arrayEach)(x5(x7,this),t=>{e(t)}),t()):(0,iy.arrayEach)(x5(x7,this),t=>{e(t,!0)})),x2(Sh,this,0),x2(Su,this,null)}bindEvents(){let{rootElement:t,rootWindow:e}=this.hot;this.eventManager.addEventListener(t,"mouseover",t=>x3(Sp,this,Sf).call(this,t)),this.eventManager.addEventListener(t,"mousedown",t=>x3(Sp,this,Sg).call(this,t)),this.eventManager.addEventListener(e,"mousemove",t=>x3(Sp,this,Sm).call(this,t)),this.eventManager.addEventListener(e,"mouseup",()=>x3(Sp,this,Sy).call(this)),this.eventManager.addEventListener(x5(So,this),"contextmenu",()=>x3(Sp,this,Sv).call(this))}destroy(){super.destroy()}}),nn(class extends cv{constructor(){super(...arguments),S2(this,Ci),Ci.add(this),S5(this,"mergedCellsCollection",null),S5(this,"autofillCalculations",null),S5(this,"selectionCalculations",null),S1(this,S9,null),S1(this,S7,{row:0,col:0}),S1(this,Ct,new SJ({mergedCellsGetter:(t,e)=>this.mergedCellsCollection.get(t,e),rowIndexMapper:this.hot.rowIndexMapper,columnIndexMapper:this.hot.columnIndexMapper})),S1(this,Ce,function(t){let{hot:e}=t,{rowIndexMapper:i,columnIndexMapper:n}=e;return{before:function(){},after:function(e,r,o){let a=t.mergedCellsCollection.get(r,o);if(!(0,e6.isObject)(a)){e.removeAttribute("rowspan"),e.removeAttribute("colspan"),e.style.display="";return}let{row:s,col:l,colspan:h,rowspan:u}=a,[c,d]=t.translateMergedCellToRenderable(s,u,l,h),p=i.getRenderableFromVisualIndex(r),f=n.getRenderableFromVisualIndex(o),g=i.getNearestNotHiddenIndex(s,1),m=n.getNearestNotHiddenIndex(l,1);g===r&&m===o?(e.setAttribute("rowspan",Math.min(u,c-p+1)),e.setAttribute("colspan",Math.min(h,d-f+1))):(e.removeAttribute("rowspan"),e.removeAttribute("colspan"),e.style.display="none")}}}(this))}static get PLUGIN_KEY(){return S8}static get PLUGIN_PRIORITY(){return 150}isEnabled(){return!!this.hot.getSettings()[S8]}enablePlugin(){var t=this;this.enabled||(this.mergedCellsCollection=new SE(this),this.autofillCalculations=new SP(this),this.selectionCalculations=new SN(this),this.addHook("afterInit",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cn).call(t,...i)}),this.addHook("modifyTransformFocus",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Co).call(t,...i)}),this.addHook("modifyTransformStart",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Ca).call(t,...i)}),this.addHook("modifyTransformEnd",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cs).call(t,...i)}),this.addHook("beforeSelectionHighlightSet",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cl).call(t,...i)}),this.addHook("beforeSetRangeStart",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cc).call(t,...i)}),this.addHook("beforeSetRangeStartOnly",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cc).call(t,...i)}),this.addHook("beforeSelectionFocusSet",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cd).call(t,...i)}),this.addHook("afterSelectionFocusSet",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cp).call(t,...i)}),this.addHook("afterSelectionEnd",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cf).call(t,...i)}),this.addHook("modifyGetCellCoords",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Ch).call(t,...i)}),this.addHook("afterIsMultipleSelection",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cr).call(t,...i)}),this.addHook("afterRenderer",function(){return S4(Ce,t).after(...arguments)}),this.addHook("afterContextMenuDefaultOptions",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cu).call(t,...i)}),this.addHook("afterGetCellMeta",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cg).call(t,...i)}),this.addHook("afterViewportRowCalculatorOverride",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cm).call(t,...i)}),this.addHook("afterViewportColumnCalculatorOverride",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cy).call(t,...i)}),this.addHook("modifyAutofillRange",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cv).call(t,...i)}),this.addHook("afterCreateCol",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cw).call(t,...i)}),this.addHook("afterRemoveCol",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cb).call(t,...i)}),this.addHook("afterCreateRow",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,Cx).call(t,...i)}),this.addHook("afterRemoveRow",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,CS).call(t,...i)}),this.addHook("afterChange",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,CC).call(t,...i)}),this.addHook("beforeDrawBorders",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,C_).call(t,...i)}),this.addHook("afterDrawSelection",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,CM).call(t,...i)}),this.addHook("beforeRemoveCellClassNames",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,CT).call(t,...i)}),this.addHook("beforeBeginEditing",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,CI).call(t,...i)}),this.addHook("modifyRowHeightByOverlayName",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return S6(Ci,t,CR).call(t,...i)}),this.addHook("beforeUndoStackChange",(t,e)=>{if("MergeCells"===e)return!1}),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){this.clearCollections(),this.unregisterShortcuts(),this.hot.render(),super.disablePlugin()}updatePlugin(){let t=this.hot.getSettings()[S8];this.disablePlugin(),this.enablePlugin(),this.generateFromSettings(t),super.updatePlugin()}ifChromeForceRepaint(){if(!(0,e$.isChrome)())return;let t=[],e=[];this.mergedCellsCollection.mergedCells.forEach(t=>{let{row:i,rowspan:n}=t;for(let t=i+1;t<i+n;t++)e.push(t)}),(e=[...new Set(e)]).forEach(e=>{let i=this.hot.rowIndexMapper.getRenderableFromVisualIndex(e);this.hot.view._wt.wtOverlays.getOverlays(!0).map(t=>(null==t?void 0:t.name)==="master"?t:t.clone.wtTable).forEach(e=>{let n=e.getRow(i);n&&(n.style.background=(0,eG.getStyle)(n,"backgroundColor").replace(")",", 0.99)"),t.push(n))})}),this.hot._registerTimeout(()=>{t.forEach(t=>{t.style.background=(0,eG.getStyle)(t,"backgroundColor").replace(", 0.99)",")")})},1)}validateSetting(t){return!!t&&(SM.containsNegativeValues(t)?((0,e8.warn)(SM.NEGATIVE_VALUES_WARNING(t)),!1):SM.isOutOfBounds(t,this.hot.countRows(),this.hot.countCols())?((0,e8.warn)(SM.IS_OUT_OF_BOUNDS_WARNING(t)),!1):SM.isSingleCell(t)?((0,e8.warn)(SM.IS_SINGLE_CELL(t)),!1):!SM.containsZeroSpan(t)||((0,e8.warn)(SM.ZERO_SPAN_WARNING(t)),!1))}generateFromSettings(t){if(!Array.isArray(t))return;let e=t.filter(t=>this.validateSetting(t)),i=this.mergedCellsCollection.filterOverlappingMergeCells(e),n=[];i.forEach(t=>{let{row:e,col:i,rowspan:r,colspan:o}=t,a=this.hot._createCellCoords(e,i),s=this.hot._createCellCoords(e+r-1,i+o-1),l=this.hot._createCellRange(a,a,s);this.mergeRange(l,!0,!0);for(let t=e;t<e+r;t++)for(let r=i;r<i+o;r++)(t!==e||r!==i)&&n.push([t,r,null])}),0!==n.length&&this.hot.setDataAtCell(n,void 0,void 0,this.pluginName)}clearCollections(){this.mergedCellsCollection.clear()}canMergeRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!e||this.validateSetting(t)}mergeSelection(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hot.getSelectedRangeLast();if(!t)return;t.setDirection(this.hot.isRtl()?"NE-SW":"NW-SE");let{from:e,to:i}=t;this.unmergeRange(t,!0),this.mergeRange(t),this.hot.selectCell(e.row,e.col,i.row,i.col,!1)}unmergeSelection(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hot.getSelectedRangeLast();if(!t)return;let{from:e,to:i}=t;this.unmergeRange(t,!0),this.hot.selectCell(e.row,e.col,i.row,i.col,!1)}mergeRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.getTopStartCorner(),r=t.getBottomEndCorner(),o={row:n.row,col:n.col,rowspan:r.row-n.row+1,colspan:r.col-n.col+1},a=[],s=null;return!!this.canMergeRange(o,e)&&(this.hot.runHooks("beforeMergeCells",t,e),(0,i0.rangeEach)(0,o.rowspan-1,t=>{(0,i0.rangeEach)(0,o.colspan-1,e=>{let i=null;a[t]||(a[t]=[]),0===t&&0===e?i=this.hot.getSourceDataAtCell(this.hot.toPhysicalRow(o.row),this.hot.toPhysicalColumn(o.col)):this.hot.setCellMeta(o.row+t,o.col+e,"hidden",!0),a[t][e]=i})}),this.hot.setCellMeta(o.row,o.col,"spanned",!0),!this.mergedCellsCollection.add(o,e)||(i?s=[o.row,o.col,a]:this.hot.populateFromArray(o.row,o.col,a,void 0,void 0,this.pluginName),e||this.ifChromeForceRepaint(),this.hot.runHooks("afterMergeCells",t,o,e),s))}unmergeRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.mergedCellsCollection.getWithinRange(t);0!==i.length&&(this.hot.runHooks("beforeUnmergeCells",t,e),(0,iy.arrayEach)(i,t=>{this.mergedCellsCollection.remove(t.row,t.col),(0,i0.rangeEach)(0,t.rowspan-1,e=>{(0,i0.rangeEach)(0,t.colspan-1,i=>{this.hot.removeCellMeta(t.row+e,t.col+i,"hidden"),this.hot.removeCellMeta(t.row+e,t.col+i,"copyable")})}),this.hot.removeCellMeta(t.row,t.col,"spanned")}),this.hot.runHooks("afterUnmergeCells",t,e),this.hot.render())}toggleMerge(t){let e=this.mergedCellsCollection.get(t.from.row,t.from.col);e.row===t.from.row&&e.col===t.from.col&&e.row+e.rowspan-1===t.to.row&&e.col+e.colspan-1===t.to.col?this.unmergeRange(t):this.mergeSelection(t)}merge(t,e,i,n){let r=this.hot._createCellCoords(t,e),o=this.hot._createCellCoords(i,n);this.mergeRange(this.hot._createCellRange(r,r,o))}unmerge(t,e,i,n){let r=this.hot._createCellCoords(t,e),o=this.hot._createCellCoords(i,n);this.unmergeRange(this.hot._createCellRange(r,r,o))}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control","m"]],callback:()=>{let t=this.hot.getSelectedRangeLast();t&&!t.isSingleHeader()&&(this.toggleMerge(t),this.hot.render())},runOnlyIf:t=>!t.altKey,group:S8})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(S8)}modifyViewportRowStart(t,e){let i=this.hot.rowIndexMapper,n=i.getVisualFromRenderableIndex(t.startRow);for(let r=0;r<e;r+=1){let o=this.mergedCellsCollection.get(n,r);if((0,e6.isObject)(o)){let n=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(o.row,1));if(n<t.startRow){t.startRow=n,this.modifyViewportRowStart(t,e);return}}}}modifyViewportRowEnd(t,e){let i=this.hot.rowIndexMapper,n=i.getVisualFromRenderableIndex(t.endRow);for(let r=0;r<e;r+=1){let o=this.mergedCellsCollection.get(n,r);if((0,e6.isObject)(o)){let n=o.row+o.rowspan-1,r=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(n,-1));if(r>t.endRow){t.endRow=r,this.modifyViewportRowEnd(t,e);return}}}}modifyViewportColumnStart(t,e){let i=this.hot.columnIndexMapper,n=i.getVisualFromRenderableIndex(t.startColumn);for(let r=0;r<e;r+=1){let o=this.mergedCellsCollection.get(r,n);if((0,e6.isObject)(o)){let n=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(o.col,1));if(n<t.startColumn){t.startColumn=n,this.modifyViewportColumnStart(t,e);return}}}}modifyViewportColumnEnd(t,e){let i=this.hot.columnIndexMapper,n=i.getVisualFromRenderableIndex(t.endColumn);for(let r=0;r<e;r+=1){let o=this.mergedCellsCollection.get(r,n);if((0,e6.isObject)(o)){let n=o.col+o.colspan-1,r=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(n,-1));if(r>t.endColumn){t.endColumn=r,this.modifyViewportColumnEnd(t,e);return}}}}translateMergedCellToRenderable(t,e,i,n){let r,o;let{rowIndexMapper:a,columnIndexMapper:s}=this.hot;return r=0===e?a.getNearestNotHiddenIndex(t,1):a.getNearestNotHiddenIndex(t+e-1,-1),o=0===n?s.getNearestNotHiddenIndex(i,1):s.getNearestNotHiddenIndex(i+n-1,-1),[t>=0?a.getRenderableFromVisualIndex(r):t,i>=0?s.getRenderableFromVisualIndex(o):i]}}),nn(class extends d8{constructor(){var t,e;super(...arguments),(t="symbol"==typeof(e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t="pluginKey","string"))?e:e+"")in this?Object.defineProperty(this,t,{value:CD,enumerable:!0,configurable:!0,writable:!0}):this[t]=CD}static get PLUGIN_KEY(){return CD}static get PLUGIN_PRIORITY(){return 170}isEnabled(){return super.isEnabled()}enablePlugin(){!this.enabled&&this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[CO]&&(CA(),this.hot.getPlugin(CO).disablePlugin()),super.enablePlugin()}disablePlugin(){super.disablePlugin()}registerShortcuts(){super.registerShortcuts(),this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Shift","Enter"]],callback:()=>{let{highlight:t}=this.hot.getSelectedRangeLast();return -1===t.row&&t.col>=0&&this.sort(this.getNextSortConfig(t.col,d4)),!1},runOnlyIf:()=>{var t,e;let i=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return i&&(null===(e=this.hot.getSelectedRangeLast())||void 0===e?void 0:e.isSingle())&&this.hot.selection.isCellVisible(i)&&i.isHeader()},relativeToGroup:ue,position:"before",group:CD})}unregisterShortcuts(){super.unregisterShortcuts(),this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(CD)}sort(t){super.sort(t)}clearSort(){super.clearSort()}isSorted(){return super.isSorted()}getSortConfig(t){return super.getSortConfig(t)}setSortConfig(t){super.setSortConfig(t)}getNormalizedSortConfigs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)?t:[t]}updateHeaderClasses(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];super.updateHeaderClasses(t,...i),(0,eG.removeClass)(t,function(t){let e=t.className.split(" "),i=RegExp(`^${Ck}-[0-9]{1,2}$`);return e.filter(t=>i.test(t))}(t)),!1!==this.enabled&&(0,eG.addClass)(t,function(t,e,i){let n=[];return!1===i||t.isColumnSorted(e)&&t.getNumberOfSortedColumns()>1&&n.push(`${Ck}-${t.getIndexOfColumnInSortQueue(e)+1}`),n}(...i))}onUpdateSettings(t){this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[CO]&&CA(),super.onUpdateSettings(t)}onAfterOnCellMouseDown(t,e){!1!==dq(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)&&(this.hot.getShortcutManager().isCtrlPressed()?(this.hot.deselectCell(),this.hot.selectColumns(e.col),this.sort(this.getNextSortConfig(e.col,d4))):this.sort(this.getColumnNextConfig(e.col)))}}),nn(class extends cv{constructor(){super(...arguments),CP(this,"dragged",[]),CP(this,"lastSetCell",null)}static get PLUGIN_KEY(){return"multipleSelectionHandles"}static get PLUGIN_PRIORITY(){return 160}isEnabled(){return(0,e$.isMobileBrowser)()}enablePlugin(){this.enabled||(this.registerListeners(),super.enablePlugin())}registerListeners(){let t=this,{rootElement:e}=this.hot;function i(e){if(1===t.dragged.length)return t.dragged.splice(0,t.dragged.length),!0;let i=t.dragged.indexOf(e);if(-1===i)return!1;0===i?t.dragged=t.dragged.slice(0,1):1===i&&(t.dragged=t.dragged.slice(-1))}this.eventManager.addEventListener(e,"touchstart",e=>{let i;return(0,eG.hasClass)(e.target,"topSelectionHandle-HitArea")?(i=t.hot.getSelectedRangeLast(),t.dragged.push("top"),t.touchStartRange={width:i.getWidth(),height:i.getHeight(),direction:i.getDirection()},e.preventDefault(),!1):(0,eG.hasClass)(e.target,"bottomSelectionHandle-HitArea")?(i=t.hot.getSelectedRangeLast(),t.dragged.push("bottom"),t.touchStartRange={width:i.getWidth(),height:i.getHeight(),direction:i.getDirection()},e.preventDefault(),!1):void 0}),this.eventManager.addEventListener(e,"touchend",e=>(0,eG.hasClass)(e.target,"topSelectionHandle-HitArea")?(i.call(t,"top"),t.touchStartRange=void 0,e.preventDefault(),!1):(0,eG.hasClass)(e.target,"bottomSelectionHandle-HitArea")?(i.call(t,"bottom"),t.touchStartRange=void 0,e.preventDefault(),!1):void 0),this.eventManager.addEventListener(e,"touchmove",e=>{let i,n,r,o,a,s;let{rootDocument:l}=this.hot;if(0===t.dragged.length)return;let h=l.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY);h&&h!==t.lastSetCell&&(("TD"===h.nodeName||"TH"===h.nodeName)&&(-1===(i=t.hot.getCoords(h)).col&&(i.col=0),r=(n=t.hot.getSelectedRangeLast()).getWidth(),o=n.getHeight(),a=n.getDirection(),1===r&&1===o&&t.hot.selection.setRangeEnd(i),null!==(s=t.getCurrentRangeCoords(n,i,t.touchStartRange.direction,a,t.dragged[0])).start&&t.hot.selection.setRangeStart(s.start),t.hot.selection.setRangeEnd(s.end),t.lastSetCell=h),e.preventDefault())})}getCurrentRangeCoords(t,e,i,n,r){let o=t.getTopStartCorner(),a=t.getBottomEndCorner(),s=t.getBottomStartCorner(),l=t.getTopEndCorner(),h={start:null,end:null};switch(i){case"NE-SW":switch(n){case"NE-SW":case"NW-SE":h="top"===r?{start:this.hot._createCellCoords(e.row,t.highlight.col),end:this.hot._createCellCoords(s.row,e.col)}:{start:this.hot._createCellCoords(t.highlight.row,e.col),end:this.hot._createCellCoords(e.row,o.col)};break;case"SE-NW":"bottom"===r&&(h={start:this.hot._createCellCoords(a.row,e.col),end:this.hot._createCellCoords(e.row,o.col)})}break;case"NW-SE":switch(n){case"NE-SW":"top"===r?h={start:e,end:s}:h.end=e;break;case"NW-SE":"top"===r?h={start:e,end:a}:h.end=e;break;case"SE-NW":"top"===r?h={start:e,end:o}:h.end=e;break;case"SW-NE":"top"===r?h={start:e,end:l}:h.end=e}break;case"SW-NE":switch(n){case"NW-SE":h="bottom"===r?{start:this.hot._createCellCoords(e.row,o.col),end:this.hot._createCellCoords(s.row,e.col)}:{start:this.hot._createCellCoords(o.row,e.col),end:this.hot._createCellCoords(e.row,a.col)};break;case"SW-NE":h="top"===r?{start:this.hot._createCellCoords(t.highlight.row,e.col),end:this.hot._createCellCoords(e.row,a.col)}:{start:this.hot._createCellCoords(e.row,o.col),end:this.hot._createCellCoords(o.row,e.col)};break;case"SE-NW":"bottom"===r?h={start:this.hot._createCellCoords(e.row,l.col),end:this.hot._createCellCoords(o.row,e.col)}:"top"===r&&(h={start:s,end:e})}break;case"SE-NW":switch(n){case"NW-SE":case"NE-SW":case"SW-NE":"top"===r&&(h.end=e);break;case"SE-NW":"top"===r?h.end=e:h={start:e,end:o}}}return h}isDragged(){return this.dragged.length>0}}),nn(class extends cv{constructor(){super(...arguments),_d(this,_x),_x.add(this),_c(this,_y,new _s),_c(this,_v,null),_c(this,_w,null),_c(this,_b,!1),_u(this,"ghostTable",new _h(this.hot,(t,e)=>this.getHeaderSettings(t,e))),_u(this,"detectedOverlappedHeaders",!1)}static get PLUGIN_KEY(){return _m}static get PLUGIN_PRIORITY(){return 280}isEnabled(){return!!this.hot.getSettings()[_m]}enablePlugin(){var t=this;if(this.enabled)return;let{nestedHeaders:e}=this.hot.getSettings();Array.isArray(e)&&Array.isArray(e[0])||(0,e8.warn)((0,nJ.toSingleLine)`Your Nested Headers plugin configuration is invalid. The settings has to be\x20
                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]`),this.addHook("init",()=>_g(_x,this,_V).call(this)),this.addHook("afterLoadData",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,_B).call(t,...i)}),this.addHook("beforeOnCellMouseDown",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,_T).call(t,...i)}),this.addHook("afterOnCellMouseDown",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,_I).call(t,...i)}),this.addHook("beforeOnCellMouseOver",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,_R).call(t,...i)}),this.addHook("beforeOnCellMouseUp",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,_E).call(t,...i)}),this.addHook("beforeSelectionHighlightSet",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,_A).call(t,...i)}),this.addHook("modifyTransformStart",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,_k).call(t,...i)}),this.addHook("afterSelection",()=>_g(_x,this,_S).call(this)),this.addHook("afterSelectionFocusSet",()=>_g(_x,this,_S).call(this)),this.addHook("beforeViewportScrollHorizontally",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,_C).call(t,...i)}),this.addHook("afterGetColumnHeaderRenderers",t=>_g(_x,this,_O).call(this,t)),this.addHook("modifyColWidth",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,_L).call(t,...i)}),this.addHook("modifyColumnHeaderValue",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,_N).call(t,...i)}),this.addHook("beforeHighlightingColumnHeader",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,__).call(t,...i)}),this.addHook("beforeCopy",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,_M).call(t,...i)}),this.addHook("beforeSelectColumns",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,_D).call(t,...i)}),this.addHook("afterViewportColumnCalculatorOverride",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,_P).call(t,...i)}),this.addHook("modifyFocusedElement",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _g(_x,t,_H).call(t,...i)}),this.hot.columnIndexMapper.addLocalHook("cacheUpdated",()=>_g(_x,this,_S).call(this)),this.hot.rowIndexMapper.addLocalHook("cacheUpdated",()=>_g(_x,this,_S).call(this)),super.enablePlugin(),this.updatePlugin()}updatePlugin(){if(!this.hot.view)return;let{nestedHeaders:t}=this.hot.getSettings();_f(_y,this).setColumnsLimit(this.hot.countCols()),Array.isArray(t)&&(this.detectedOverlappedHeaders=_f(_y,this).setState(t)),this.detectedOverlappedHeaders&&(0,e8.warn)((0,nJ.toSingleLine)`Your Nested Headers plugin setup contains overlapping headers. This kind of configuration\x20
                        is currently not supported.`),this.enabled&&this.hot.columnIndexMapper.hidingMapsCollection.getMergedValues().forEach((t,e)=>{_f(_y,this).triggerColumnModification(!0===t?"hide-column":"show-column",e)}),!_f(_v,this)&&this.enabled&&_p(_v,this,this.hot.columnIndexMapper.createChangesObserver("hiding").subscribe(t=>{t.forEach(t=>{let{op:e,index:i,newValue:n}=t;"replace"===e&&_f(_y,this).triggerColumnModification(!0===n?"hide-column":"show-column",i)}),this.ghostTable.buildWidthsMap()})),this.ghostTable.setLayersCount(this.getLayersCount()).buildWidthsMap(),super.updatePlugin()}disablePlugin(){this.clearColspans(),_f(_y,this).clear(),_f(_v,this).unsubscribe(),_p(_v,this,null),this.ghostTable.clear(),super.disablePlugin()}getStateManager(){return _f(_y,this)}getLayersCount(){return _f(_y,this).getLayersCount()}getHeaderSettings(t,e){return _f(_y,this).getHeaderSettings(t,e)}clearColspans(){if(!this.hot.view)return;let{_wt:t}=this.hot.view,e=t.getSetting("columnHeaders").length,i=t.wtTable.THEAD,n=t.wtOverlays.topOverlay.clone.wtTable.THEAD,r=t.wtOverlays.topInlineStartCornerOverlay?t.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null;for(let t=0;t<e;t++){let e=i.childNodes[t];if(!e)break;let o=n.childNodes[t],a=r?r.childNodes[t]:null;for(let t=0,i=e.childNodes.length;t<i;t++)e.childNodes[t].removeAttribute("colspan"),(0,eG.removeClass)(e.childNodes[t],"hiddenHeader"),o&&o.childNodes[t]&&(o.childNodes[t].removeAttribute("colspan"),(0,eG.removeClass)(o.childNodes[t],"hiddenHeader")),r&&a&&a.childNodes[t]&&(a.childNodes[t].removeAttribute("colspan"),(0,eG.removeClass)(a.childNodes[t],"hiddenHeader"))}}headerRendererFactory(t){var e=this;let i=this.hot.view._wt.getSetting("fixedColumnsStart");return(n,r)=>{var o,a,s;let{columnIndexMapper:l,view:h}=this.hot,u=l.getVisualFromRenderableIndex(n);null===u&&(u=n),r.removeAttribute("colspan"),(0,eG.removeClass)(r,"hiddenHeader");let{colspan:c,isHidden:d,isPlaceholder:p,headerClassNames:f}=null!==(o=_f(_y,this).getHeaderSettings(t,u))&&void 0!==o?o:{label:""};if(p||d)(0,eG.addClass)(r,"hiddenHeader");else if(c>1){let{wtOverlays:t}=h._wt,e=null===(a=t.topInlineStartCornerOverlay)||void 0===a?void 0:a.clone.wtTable.THEAD.contains(r),o=null===(s=t.inlineStartOverlay)||void 0===s?void 0:s.clone.wtTable.THEAD.contains(r),l=e||o?Math.min(c,i-n):c;l>1&&r.setAttribute("colspan",l)}if(this.hot.view.appendColHeader(u,r,function(){return e.getColumnHeaderValue(...arguments)},t),!p&&!d){let t=r.querySelector("div.relative");t&&f&&f.length>0&&((0,eG.removeClass)(t,this.hot.getColumnMeta(u).headerClassName),(0,eG.addClass)(t,f))}}}getColumnHeaderValue(t,e){var i;let{isHidden:n,isPlaceholder:r}=null!==(i=_f(_y,this).getHeaderSettings(e,t))&&void 0!==i?i:{};return r||n?"":this.hot.getColHeader(t,e)}destroy(){_p(_y,this,null),null!==_f(_v,this)&&(_f(_v,this).unsubscribe(),_p(_v,this,null)),super.destroy()}_getHeaderTreeNodeDataByCoords(t){if(!(t.row>=0)&&!(t.col<0))return _f(_y,this).getHeaderTreeNodeData(t.row,t.col)}}),nn(class extends cv{constructor(){super(...arguments),_K(this,_4),_4.add(this),_Q(this,"dataManager",null),_Q(this,"headersUI",null),_Q(this,"collapsedRowsMap",null),_q(this,_5,!1),_q(this,_3,!1)}static get PLUGIN_KEY(){return _2}static get PLUGIN_PRIORITY(){return 300}isEnabled(){return!!this.hot.getSettings()[_2]}enablePlugin(){var t=this;this.enabled||(this.collapsedRowsMap=this.hot.rowIndexMapper.registerMap("nestedRows",new aX),this.dataManager=new _W(this,this.hot),this.collapsingUI=new _G(this,this.hot),this.headersUI=new _U(this,this.hot),this.contextMenuUI=new _X(this,this.hot),this.rowMoveController=new _Z(this),this.addHook("afterInit",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,Mh).call(t,...i)}),this.addHook("beforeViewRender",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,Mu).call(t,...i)}),this.addHook("modifyRowData",function(){return t.onModifyRowData(...arguments)}),this.addHook("modifySourceLength",function(){return t.onModifySourceLength(...arguments)}),this.addHook("beforeDataSplice",function(){return t.onBeforeDataSplice(...arguments)}),this.addHook("filterData",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,_9).call(t,...i)}),this.addHook("afterContextMenuDefaultOptions",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,_7).call(t,...i)}),this.addHook("afterGetRowHeader",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,Mt).call(t,...i)}),this.addHook("beforeOnCellMouseDown",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,_8).call(t,...i)}),this.addHook("beforeRemoveRow",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,Mn).call(t,...i)}),this.addHook("afterRemoveRow",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,Mi).call(t,...i)}),this.addHook("beforeAddChild",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,Mr).call(t,...i)}),this.addHook("afterAddChild",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,Mo).call(t,...i)}),this.addHook("beforeDetachChild",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,Ma).call(t,...i)}),this.addHook("afterDetachChild",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,Ms).call(t,...i)}),this.addHook("modifyRowHeaderWidth",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,Me).call(t,...i)}),this.addHook("afterCreateRow",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,Ml).call(t,...i)}),this.addHook("beforeRowMove",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return _1(_4,t,_6).call(t,...i)}),this.addHook("beforeLoadData",t=>_1(_4,this,Mc).call(this,t)),this.addHook("beforeUpdateData",t=>_1(_4,this,Mc).call(this,t)),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("nestedRows"),this.unregisterShortcuts(),super.disablePlugin()}updatePlugin(){this.disablePlugin();let t=this.dataManager.getData();this.enablePlugin(),this.dataManager.updateWithData(t),super.updatePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{let{highlight:t}=this.hot.getSelectedRangeLast(),e=this.collapsingUI.translateTrimmedRow(t.row);return this.collapsingUI.areChildrenCollapsed(e)?this.collapsingUI.expandChildren(e):this.collapsingUI.collapseChildren(e),!1},runOnlyIf:()=>{var t,e;let i=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return i&&(null===(e=this.hot.getSelectedRangeLast())||void 0===e?void 0:e.isSingle())&&this.hot.selection.isCellVisible(i)&&-1===i.col&&i.row>=0},group:_2,relativeToGroup:ue,position:"before"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(_2)}disableCoreAPIModifiers(){_0(_3,this,!0)}enableCoreAPIModifiers(){_0(_3,this,!1)}onModifyRowData(t){if(!_J(_3,this))return this.dataManager.getDataObject(t)}onModifySourceLength(){if(!_J(_3,this))return this.dataManager.countAllRows()}onBeforeDataSplice(t,e,i){return!!(_J(_3,this)||this.dataManager.isRowHighestLevel(t))||(this.dataManager.spliceData(t,e,i),!1)}destroy(){super.destroy()}}),nn(class extends cv{constructor(){var t,e,i;super(...arguments),e=void 0,(t="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t="storage","string"))?i:i+"")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e}static get PLUGIN_KEY(){return Mf}static get PLUGIN_PRIORITY(){return 0}isEnabled(){return!!this.hot.getSettings()[Mf]}enablePlugin(){this.enabled||(this.storage||(this.storage=new Mp(this.hot.rootElement.id,this.hot.rootWindow)),this.addHook("persistentStateSave",(t,e)=>this.saveValue(t,e)),this.addHook("persistentStateLoad",(t,e)=>this.loadValue(t,e)),this.addHook("persistentStateReset",()=>this.resetValue()),super.enablePlugin())}disablePlugin(){this.storage=void 0,super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}loadValue(t,e){e.value=this.storage.loadValue(t)}saveValue(t,e){this.storage.saveValue(t,e)}resetValue(t){void 0===t?this.storage.resetAll():this.storage.reset(t)}destroy(){super.destroy()}}),nn(class extends cv{constructor(){super(...arguments),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,Mb),Mb.add(this),Mg(this,"callback",Mv),Mg(this,"queryMethod",Mw),Mg(this,"searchResultClass","htSearchResult")}static get PLUGIN_KEY(){return My}static get PLUGIN_PRIORITY(){return 190}isEnabled(){return this.hot.getSettings()[My]}enablePlugin(){var t=this;if(this.enabled)return;let e=this.hot.getSettings()[My];this.updatePluginSettings(e),this.addHook("beforeRenderer",function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return Mm(Mb,t,Mx).call(t,...i)}),super.enablePlugin()}disablePlugin(){var t=this;let e=function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return Mm(Mb,t,Mx).call(t,...i)};this.hot.addHook("beforeRenderer",e),this.hot.addHookOnce("afterViewRender",()=>{this.hot.removeHook("beforeRenderer",e)}),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}query(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCallback(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getQueryMethod(),n=this.hot.countRows(),r=this.hot.countCols(),o=[],a=this.hot;return(0,i0.rangeEach)(0,n-1,n=>{(0,i0.rangeEach)(0,r-1,r=>{let s=this.hot.getDataAtCell(n,r),l=this.hot.getCellMeta(n,r),h=l.search.callback||e,u=(l.search.queryMethod||i)(t,s,l);u&&o.push({row:n,col:r,data:s}),h&&h(a,n,r,s,u)})}),o}getCallback(){return this.callback}setCallback(t){this.callback=t}getQueryMethod(){return this.queryMethod}setQueryMethod(t){this.queryMethod=t}getSearchResultClass(){return this.searchResultClass}setSearchResultClass(t){this.searchResultClass=t}updatePluginSettings(t){(0,e6.isObject)(t)&&(t.searchResultClass&&this.setSearchResultClass(t.searchResultClass),t.queryMethod&&this.setQueryMethod(t.queryMethod),t.callback&&this.setCallback(t.callback))}destroy(){super.destroy()}}),nn(class extends cv{constructor(){super(...arguments),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,M_),M_.add(this),MS(this,"scrollbars",[]),MS(this,"clones",[]),MS(this,"lockedCollection",!1),MS(this,"freezeOverlays",!1)}static get PLUGIN_KEY(){return"touchScroll"}static get PLUGIN_PRIORITY(){return 200}static get SETTING_KEYS(){return!0}isEnabled(){return(0,nw.isTouchSupported)()}enablePlugin(){this.enabled||(this.addHook("afterViewRender",()=>MC(M_,this,MM).call(this)),this.registerEvents(),super.enablePlugin())}updatePlugin(){this.lockedCollection=!1,super.updatePlugin()}disablePlugin(){super.disablePlugin()}registerEvents(){this.addHook("beforeTouchScroll",()=>MC(M_,this,MT).call(this)),this.addHook("afterMomentumScroll",()=>MC(M_,this,MI).call(this))}}),nn(class extends cv{constructor(){var t,e;super(...arguments),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,ME),ME.add(this),(t="symbol"==typeof(e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t="trimmedRowsMap","string"))?e:e+"")in this?Object.defineProperty(this,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[t]=null}static get PLUGIN_KEY(){return MR}static get PLUGIN_PRIORITY(){return 330}isEnabled(){return!!this.hot.getSettings()[MR]}enablePlugin(){this.enabled||(this.trimmedRowsMap=this.hot.rowIndexMapper.registerMap("trimRows",new aX),this.trimmedRowsMap.addLocalHook("init",()=>(function(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw TypeError("Private element is not present on this object")})(ME,this,MA).call(this)),super.enablePlugin())}updatePlugin(){let t=this.hot.getSettings()[MR];Array.isArray(t)&&this.hot.batchExecution(()=>{this.trimmedRowsMap.clear(),(0,iy.arrayEach)(t,t=>{this.trimmedRowsMap.setValueAtIndex(t,!0)})},!0),super.updatePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("trimRows"),super.disablePlugin()}getTrimmedRows(){return this.trimmedRowsMap.getTrimmedIndexes()}trimRows(t){let e=this.getTrimmedRows(),i=this.isValidConfig(t),n=e;i&&(n=Array.from(new Set(e.concat(t)))),!1!==this.hot.runHooks("beforeTrimRow",e,n,i)&&(i&&this.hot.batchExecution(()=>{(0,iy.arrayEach)(t,t=>{this.trimmedRowsMap.setValueAtIndex(t,!0)})},!0),this.hot.runHooks("afterTrimRow",e,n,i,i&&n.length>e.length))}trimRow(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.trimRows(e)}untrimRows(t){let e=this.getTrimmedRows(),i=this.isValidConfig(t),n=e,r=this.trimmedRowsMap.getValues().slice(),o=t.length>0;i&&o&&((0,iy.arrayEach)(t,t=>{r[t]=!1}),n=(0,iy.arrayReduce)(r,(t,e,i)=>(e&&t.push(i),t),[])),!1!==this.hot.runHooks("beforeUntrimRow",e,n,i&&o)&&(i&&o&&this.trimmedRowsMap.setValues(r),this.hot.runHooks("afterUntrimRow",e,n,i&&o,i&&n.length<e.length))}untrimRow(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.untrimRows(e)}isTrimmed(t){return this.trimmedRowsMap.getValueAtIndex(t)||!1}untrimAll(){this.untrimRows(this.getTrimmedRows())}isValidConfig(t){let e=this.hot.countSourceRows();return t.every(t=>Number.isInteger(t)&&t>=0&&t<e)}destroy(){super.destroy()}}),nn(Mq),function(t){let e="undefined"!=typeof window&&window.jQuery;e&&(e.fn.handsontable=function(e){let i;let n=this.first(),r=n.data("handsontable");if("string"!=typeof e){let i=e||{};return r?r.updateSettings(i):(r=new t.Core(n[0],i),n.data("handsontable",r),r.init()),n}if(r){if(void 0!==r[e]){for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];i=r[e].call(r,...a),"destroy"===e&&n.removeData()}else throw Error(`Handsontable do not provide action: ${e}`)}return i})}(uA),uA.__GhostTable=cx,uA._getListenersCounter=eQ.getListenersCounter,uA._getRegisteredMapsCounter=function(){return aq},uA.EventManager=eQ.default;const M2=[iy,e$,ax,M1,nw,eY,eX,i0,e6,iJ,eZ,iv],M5=[eG,eq];uA.helper={},uA.dom={},iy.arrayEach(M2,t=>{iy.arrayEach(Object.getOwnPropertyNames(t),e=>{"_"!==e.charAt(0)&&(uA.helper[e]=t[e])})}),iy.arrayEach(M5,t=>{iy.arrayEach(Object.getOwnPropertyNames(t),e=>{"_"!==e.charAt(0)&&(uA.dom[e]=t[e])})}),uA.cellTypes=null!==(tl=uA.cellTypes)&&void 0!==tl?tl:{},iy.arrayEach(hV(),t=>{uA.cellTypes[t]=hF(t)}),uA.cellTypes.registerCellType=hW,uA.cellTypes.getCellType=hF,uA.editors=null!==(th=uA.editors)&&void 0!==th?th:{},iy.arrayEach((0,eK.getRegisteredEditorNames)(),t=>{uA.editors[`${iJ.toUpperCaseFirst(t)}Editor`]=(0,eK.getEditor)(t)}),uA.editors.registerEditor=eK.registerEditor,uA.editors.getEditor=eK.getEditor,uA.renderers=null!==(tu=uA.renderers)&&void 0!==tu?tu:{},iy.arrayEach(nl(),t=>{let e=nu(t);"base"===t&&(uA.renderers.cellDecorator=e),uA.renderers[`${iJ.toUpperCaseFirst(t)}Renderer`]=e}),uA.renderers.registerRenderer=nc,uA.renderers.getRenderer=nu,uA.validators=null!==(tc=uA.validators)&&void 0!==tc?tc:{},iy.arrayEach(ng(),t=>{uA.validators[`${iJ.toUpperCaseFirst(t)}Validator`]=ny(t)}),uA.validators.registerValidator=nv,uA.validators.getValidator=ny,uA.plugins=null!==(td=uA.plugins)&&void 0!==td?td:{},iy.arrayEach(ne(),t=>{uA.plugins[t]=ni(t)}),uA.plugins[`${iJ.toUpperCaseFirst(cv.PLUGIN_KEY)}Plugin`]=cv,uA.plugins.registerPlugin=nn,uA.plugins.getPlugin=ni;var M3={};N={},H={refPrefix:"`",refIntBase:96,refIntFloorCode:32,refIntCeilCode:void 0,maxStringDistance:void 0,minStringLength:5,maxStringLength:void 0,defaultWindow:144,maxWindow:void 0,windowLength:void 0},V=function(t){(H=F(H,t=t||{})).refIntCeilCode=H.refIntFloorCode+H.refIntBase-1,H.maxStringDistance=Math.pow(H.refIntBase,2)-1,H.maxStringLength=Math.pow(H.refIntBase,1)-1+H.minStringLength,H.maxWindow=H.maxStringDistance+H.minStringLength},B=function(t,e,i){var n={};if(null!==t){if(Array.prototype.forEach&&t.forEach===Array.prototype.forEach)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,o=t.length;r<o;r++)if(e.call(i,t[r],r,t)===n)return}else for(var a in t)if(t.hasOwnProperty(a)&&e.call(i,t[a],a,t)===n)return}},F=function(t){return B(Array.prototype.slice.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},W=function(t,e){if(t>=0&&t<Math.pow(H.refIntBase,e)-1){for(var i="";t>0;)i=String.fromCharCode(t%H.refIntBase+H.refIntFloorCode)+i,t=Math.floor(t/H.refIntBase);for(var n=e-i.length,r=0;r<n;r++)i=String.fromCharCode(H.refIntFloorCode)+i;return i}throw"Reference int out of range: "+t+" (width = "+e+")"},z=function(t,e){for(var i,n=0,r=0;r<e;r++)if(n*=H.refIntBase,(i=t.charCodeAt(r))>=H.refIntFloorCode&&i<=H.refIntCeilCode)n+=i-H.refIntFloorCode;else throw"Invalid char code in reference int: "+i;return n},N.compress=function(t,e){if("[object String]"!==Object.prototype.toString.call(t))throw"Input must be a string";V(e);var i=H.windowLength||H.defaultWindow;if(i>H.maxWindow)throw"Window length too large";for(var n="",r=0,o=t.length-H.minStringLength;r<o;){for(var a,s=Math.max(r-i,0),l=H.minStringLength,h=!1,u={distance:H.maxStringDistance,length:0},c=null;s+l<r;)t.substr(s,l)===t.substr(r,l)&&l<H.maxStringLength?(l++,h=!0):(a=l-1,h&&a>u.length&&(u.distance=r-s-a,u.length=a),l=H.minStringLength,s++,h=!1);u.length?(c=H.refPrefix+W(u.distance,2)+W(u.length-H.minStringLength,1),r+=u.length):(c=t.charAt(r)!==H.refPrefix?t.charAt(r):H.refPrefix+H.refPrefix,r++),n+=c}return n+t.slice(r).replace(/`/g,"``")},N.decompress=function(t,e){if("[object String]"!==Object.prototype.toString.call(t))throw"Input must be a string";var i,n,r,o="",a=0;for(V(e);a<t.length;)(i=t.charAt(a))!==H.refPrefix?(o+=i,a++):t.charAt(a+1)!==H.refPrefix?(n=z(t.substr(a+1,2),2),r=z(t.charAt(a+3),1)+H.minStringLength,o+=o.substr(o.length-n-r,r),a+=H.minStringLength-1):(o+=H.refPrefix,a+=2);return o},"undefined"!=typeof define&&define.amd?define([],function(){return N}):M3?M3=N:void 0!==window&&(window.LZ77=N);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var M4=function(t,e){return(M4=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function M6(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}M4(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var M8=function(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},M9=new function(){this.browser=new M8,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow="undefined"!=typeof window};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(M9.wxa=!0,M9.touchEventsSupported=!0):"undefined"==typeof document&&"undefined"!=typeof self?M9.worker=!0:"undefined"==typeof navigator||0===navigator.userAgent.indexOf("Node.js")?(M9.node=!0,M9.svgSupported=!0):(I=navigator.userAgent,R=M9.browser,E=I.match(/Firefox\/([\d.]+)/),A=I.match(/MSIE\s([\d.]+)/)||I.match(/Trident\/.+?rv:(([\d.]+))/),k=I.match(/Edge?\/([\d.]+)/),D=/micromessenger/i.test(I),E&&(R.firefox=!0,R.version=E[1]),A&&(R.ie=!0,R.version=A[1]),k&&(R.edge=!0,R.version=k[1],R.newEdge=+k[1].split(".")[0]>18),D&&(R.weChat=!0),M9.svgSupported="undefined"!=typeof SVGRect,M9.touchEventsSupported="ontouchstart"in window&&!R.ie&&!R.edge,M9.pointerEventsSupported="onpointerdown"in window&&(R.edge||R.ie&&+R.version>=11),M9.domSupported="undefined"!=typeof document,O=document.documentElement.style,M9.transform3dSupported=(R.ie&&"transition"in O||R.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in O)&&!("OTransition"in O),M9.transformSupported=M9.transform3dSupported||R.ie&&+R.version>=9);var M7="sans-serif",Tt="12px "+M7,Te=function(t){var e={};if("undefined"==typeof JSON)return e;for(var i=0;i<t.length;i++){var n=String.fromCharCode(i+32),r=(t.charCodeAt(i)-20)/100;e[n]=r}return e}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),Ti={createCanvas:function(){return"undefined"!=typeof document&&document.createElement("canvas")},measureText:function(t,e){if(!j){var i=Ti.createCanvas();j=i&&i.getContext("2d")}if(j)return U!==e&&(U=j.font=e||Tt),j.measureText(t);t=t||"",e=e||Tt;var n=/((?:\d+)?\.?\d*)px/.exec(e),r=n&&+n[1]||12,o=0;if(e.indexOf("mono")>=0)o=r*t.length;else for(var a=0;a<t.length;a++){var s=Te[t[a]];o+=null==s?r:s*r}return{width:o}},loadImage:function(t,e,i){var n=new Image;return n.onload=e,n.onerror=i,n.src=t,n}},Tn=TT(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(t,e){return t["[object "+e+"]"]=!0,t},{}),Tr=TT(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(t,e){return t["[object "+e+"Array]"]=!0,t},{}),To=Object.prototype.toString,Ta=Array.prototype,Ts=Ta.forEach,Tl=Ta.filter,Th=Ta.slice,Tu=Ta.map,Tc=(function(){}).constructor,Td=Tc?Tc.prototype:null,Tp="__proto__",Tf=2311;function Tg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];"undefined"!=typeof console&&console.error.apply(console,t)}function Tm(t){if(null==t||"object"!=typeof t)return t;var e=t,i=To.call(t);if("[object Array]"===i){if(!t[T$]){e=[];for(var n=0,r=t.length;n<r;n++)e[n]=Tm(t[n])}}else if(Tr[i]){if(!t[T$]){var o=t.constructor;if(o.from)e=o.from(t);else{e=new o(t.length);for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}}}else if(!Tn[i]&&!t[T$]&&!TB(t))for(var a in e={},t)t.hasOwnProperty(a)&&a!==Tp&&(e[a]=Tm(t[a]));return e}function Ty(t,e,i){if(!TN(e)||!TN(t))return i?Tm(e):t;for(var n in e)if(e.hasOwnProperty(n)&&n!==Tp){var r=t[n],o=e[n];!(TN(o)&&TN(r))||Tk(o)||Tk(r)||TB(o)||TB(r)||TH(o)||TH(r)||o[T$]||r[T$]?!i&&n in t||(t[n]=Tm(e[n])):Ty(r,o,i)}return t}function Tv(t,e){for(var i=t[0],n=1,r=t.length;n<r;n++)i=Ty(i,t[n],e);return i}function Tw(t,e){if(Object.assign)Object.assign(t,e);else for(var i in e)e.hasOwnProperty(i)&&i!==Tp&&(t[i]=e[i]);return t}function Tb(t,e,i){for(var n=TR(e),r=0;r<n.length;r++){var o=n[r];(i?null!=e[o]:null==t[o])&&(t[o]=e[o])}return t}function Tx(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i}return -1}function TS(t,e,i){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r];"constructor"!==o&&(i?null!=e[o]:null==t[o])&&(t[o]=e[o])}else Tb(t,e,i)}function TC(t){return!!t&&"string"!=typeof t&&"number"==typeof t.length}function T_(t,e,i){if(t&&e){if(t.forEach&&t.forEach===Ts)t.forEach(e,i);else if(t.length===+t.length)for(var n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t)}}function TM(t,e,i){if(!t)return[];if(!e)return TU(t);if(t.map&&t.map===Tu)return t.map(e,i);for(var n=[],r=0,o=t.length;r<o;r++)n.push(e.call(i,t[r],r,t));return n}function TT(t,e,i,n){if(t&&e){for(var r=0,o=t.length;r<o;r++)i=e.call(n,i,t[r],r,t);return i}}function TI(t,e,i){if(!t)return[];if(!e)return TU(t);if(t.filter&&t.filter===Tl)return t.filter(e,i);for(var n=[],r=0,o=t.length;r<o;r++)e.call(i,t[r],r,t)&&n.push(t[r]);return n}function TR(t){if(!t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}Ti.createCanvas;var TE=Td&&TD(Td.bind)?Td.call.bind(Td.bind):function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return function(){return t.apply(e,i.concat(Th.call(arguments)))}};function TA(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return function(){return t.apply(this,e.concat(Th.call(arguments)))}}function Tk(t){return Array.isArray?Array.isArray(t):"[object Array]"===To.call(t)}function TD(t){return"function"==typeof t}function TO(t){return"string"==typeof t}function TP(t){return"[object String]"===To.call(t)}function TL(t){return"number"==typeof t}function TN(t){var e=typeof t;return"function"===e||!!t&&"object"===e}function TH(t){return!!Tn[To.call(t)]}function TV(t){return!!Tr[To.call(t)]}function TB(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function TF(t){return null!=t.colorStops}function TW(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,n=t.length;i<n;i++)if(null!=t[i])return t[i]}function Tz(t,e){return null!=t?t:e}function Tj(t,e,i){return null!=t?t:null!=e?e:i}function TU(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return Th.apply(t,e)}function TG(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function TY(t,e){if(!t)throw Error(e)}function TX(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var T$="__ec_primitive__",TZ=function(){function t(){this.data={}}return t.prototype.delete=function(t){var e=this.has(t);return e&&delete this.data[t],e},t.prototype.has=function(t){return this.data.hasOwnProperty(t)},t.prototype.get=function(t){return this.data[t]},t.prototype.set=function(t,e){return this.data[t]=e,this},t.prototype.keys=function(){return TR(this.data)},t.prototype.forEach=function(t){var e=this.data;for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)},t}(),Tq="function"==typeof Map,TK=function(){function t(e){var i=Tk(e);this.data=Tq?new Map:new TZ;var n=this;function r(t,e){i?n.set(t,e):n.set(e,t)}e instanceof t?e.each(r):e&&T_(e,r)}return t.prototype.hasKey=function(t){return this.data.has(t)},t.prototype.get=function(t){return this.data.get(t)},t.prototype.set=function(t,e){return this.data.set(t,e),e},t.prototype.each=function(t,e){this.data.forEach(function(i,n){t.call(e,i,n)})},t.prototype.keys=function(){var t=this.data.keys();return Tq?Array.from(t):t},t.prototype.removeKey=function(t){this.data.delete(t)},t}();function TQ(t){return new TK(t)}function TJ(t,e){for(var i=new t.constructor(t.length+e.length),n=0;n<t.length;n++)i[n]=t[n];for(var r=t.length,n=0;n<e.length;n++)i[n+r]=e[n];return i}function T0(t,e){var i;if(Object.create)i=Object.create(t);else{var n=function(){};n.prototype=t,i=new n}return e&&Tw(i,e),i}function T1(t){var e=t.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function T2(t,e){return t.hasOwnProperty(e)}function T5(){}var T3=180/Math.PI,T4=function(t,e){return(T4=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function T6(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}T4(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function T8(t,e){return null==t&&(t=0),null==e&&(e=0),[t,e]}function T9(t,e){return t[0]=e[0],t[1]=e[1],t}function T7(t){return[t[0],t[1]]}function It(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function Ie(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t}function Ii(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function In(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ir(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function Io(t,e){var i=In(e);return 0===i?(t[0]=0,t[1]=0):(t[0]=e[0]/i,t[1]=e[1]/i),t}function Ia(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var Is=function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])};function Il(t,e,i,n){return t[0]=e[0]+n*(i[0]-e[0]),t[1]=e[1]+n*(i[1]-e[1]),t}function Ih(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t}function Iu(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function Ic(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}var Id=function(t,e){this.target=t,this.topTarget=e&&e.topTarget},Ip=function(){function t(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent||e.__hostTarget;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Id(e,t),"dragstart",t.event))},t.prototype._drag=function(t){var e=this._draggingTarget;if(e){var i=t.offsetX,n=t.offsetY,r=i-this._x,o=n-this._y;this._x=i,this._y=n,e.drift(r,o,t),this.handler.dispatchToElement(new Id(e,t),"drag",t.event);var a=this.handler.findHover(i,n,e).target,s=this._dropTarget;this._dropTarget=a,e!==a&&(s&&a!==s&&this.handler.dispatchToElement(new Id(s,t),"dragleave",t.event),a&&a!==s&&this.handler.dispatchToElement(new Id(a,t),"dragenter",t.event))}},t.prototype._dragEnd=function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.handler.dispatchToElement(new Id(e,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Id(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},t}(),If=function(){function t(t){t&&(this._$eventProcessor=t)}return t.prototype.on=function(t,e,i,n){this._$handlers||(this._$handlers={});var r=this._$handlers;if("function"==typeof e&&(n=i,i=e,e=null),!i||!t)return this;var o=this._$eventProcessor;null!=e&&o&&o.normalizeQuery&&(e=o.normalizeQuery(e)),r[t]||(r[t]=[]);for(var a=0;a<r[t].length;a++)if(r[t][a].h===i)return this;var s={h:i,query:e,ctx:n||this,callAtLast:i.zrEventfulCallAtLast},l=r[t].length-1,h=r[t][l];return h&&h.callAtLast?r[t].splice(l,0,s):r[t].push(s),this},t.prototype.isSilent=function(t){var e=this._$handlers;return!e||!e[t]||!e[t].length},t.prototype.off=function(t,e){var i=this._$handlers;if(!i)return this;if(!t)return this._$handlers={},this;if(e){if(i[t]){for(var n=[],r=0,o=i[t].length;r<o;r++)i[t][r].h!==e&&n.push(i[t][r]);i[t]=n}i[t]&&0===i[t].length&&delete i[t]}else delete i[t];return this},t.prototype.trigger=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!this._$handlers)return this;var n=this._$handlers[t],r=this._$eventProcessor;if(n)for(var o=e.length,a=n.length,s=0;s<a;s++){var l=n[s];if(!r||!r.filter||null==l.query||r.filter(t,l.query))switch(o){case 0:l.h.call(l.ctx);break;case 1:l.h.call(l.ctx,e[0]);break;case 2:l.h.call(l.ctx,e[0],e[1]);break;default:l.h.apply(l.ctx,e)}}return r&&r.afterTrigger&&r.afterTrigger(t),this},t.prototype.triggerWithContext=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!this._$handlers)return this;var n=this._$handlers[t],r=this._$eventProcessor;if(n)for(var o=e.length,a=e[o-1],s=n.length,l=0;l<s;l++){var h=n[l];if(!r||!r.filter||null==h.query||r.filter(t,h.query))switch(o){case 0:h.h.call(a);break;case 1:h.h.call(a,e[0]);break;case 2:h.h.call(a,e[0],e[1]);break;default:h.h.apply(a,e.slice(1,o-1))}}return r&&r.afterTrigger&&r.afterTrigger(t),this},t}(),Ig=Math.log(2);function Im(t,e,i,n,r,o){var a=n+"-"+r,s=t.length;if(o.hasOwnProperty(a))return o[a];if(1===e)return t[i][Math.round(Math.log((1<<s)-1&~r)/Ig)];for(var l=n|1<<i,h=i+1;n&1<<h;)h++;for(var u=0,c=0,d=0;c<s;c++){var p=1<<c;!(p&r)&&(u+=(d%2?-1:1)*t[i][c]*Im(t,e-1,h,l,r|p,o),d++)}return o[a]=u,u}function Iy(t,e){var i=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],n={},r=Im(i,8,0,0,0,n);if(0!==r){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)null==o[s]&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*Im(i,7,0===a?1:0,1<<a,1<<s,n)/r*e[a];return function(t,e,i){var n=e*o[6]+i*o[7]+1;t[0]=(e*o[0]+i*o[1]+o[2])/n,t[1]=(e*o[3]+i*o[4]+o[5])/n}}}var Iv="___zrEVENTSAVED",Iw=[];function Ib(t,e,i,n,r){if(e.getBoundingClientRect&&M9.domSupported&&!Ix(e)){var o=e[Iv]||(e[Iv]={}),a=function(t,e,i){for(var n=i?"invTrans":"trans",r=e[n],o=e.srcCoords,a=[],s=[],l=!0,h=0;h<4;h++){var u=t[h].getBoundingClientRect(),c=2*h,d=u.left,p=u.top;a.push(d,p),l=l&&o&&d===o[c]&&p===o[c+1],s.push(t[h].offsetLeft,t[h].offsetTop)}return l&&r?r:(e.srcCoords=a,e[n]=i?Iy(s,a):Iy(a,s))}(function(t,e){var i=e.markers;if(i)return i;i=e.markers=[];for(var n=["left","right"],r=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,l=o%2,h=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",r[h]+":0",n[1-l]+":auto",r[1-h]+":auto",""].join("!important;"),t.appendChild(a),i.push(a)}return i}(e,o),o,r);if(a)return a(t,i,n),!0}return!1}function Ix(t){return"CANVAS"===t.nodeName.toUpperCase()}var IS=/([&<>"'])/g,IC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function I_(t){return null==t?"":(t+"").replace(IS,function(t,e){return IC[e]})}var IM=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,IT=[],II=M9.browser.firefox&&39>+M9.browser.version.split(".")[0];function IR(t,e,i,n){return i=i||{},n?IE(t,e,i):II&&null!=e.layerX&&e.layerX!==e.offsetX?(i.zrX=e.layerX,i.zrY=e.layerY):null!=e.offsetX?(i.zrX=e.offsetX,i.zrY=e.offsetY):IE(t,e,i),i}function IE(t,e,i){if(M9.domSupported&&t.getBoundingClientRect){var n=e.clientX,r=e.clientY;if(Ix(t)){var o=t.getBoundingClientRect();i.zrX=n-o.left,i.zrY=r-o.top;return}if(Ib(IT,t,n,r)){i.zrX=IT[0],i.zrY=IT[1];return}}i.zrX=i.zrY=0}function IA(t){return t||window.event}function Ik(t,e,i){if(null!=(e=IA(e)).zrX)return e;var n=e.type;if(n&&n.indexOf("touch")>=0){var r="touchend"!==n?e.targetTouches[0]:e.changedTouches[0];r&&IR(t,r,e,i)}else{IR(t,e,e,i);var o=function(t){var e=t.wheelDelta;if(e)return e;var i=t.deltaX,n=t.deltaY;return null==i||null==n?e:3*(0!==n?Math.abs(n):Math.abs(i))*(n>0?-1:n<0?1:i>0?-1:1)}(e);e.zrDelta=o?o/120:-(e.detail||0)/3}var a=e.button;return null==e.which&&void 0!==a&&IM.test(e.type)&&(e.which=1&a?1:2&a?3:4&a?2:0),e}function ID(t,e,i,n){t.addEventListener(e,i,n)}var IO=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0};function IP(t){return 2===t.which||3===t.which}var IL=function(){function t(){this._track=[]}return t.prototype.recognize=function(t,e,i){return this._doTrack(t,e,i),this._recognize(t)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(t,e,i){var n=t.touches;if(n){for(var r={points:[],touches:[],target:e,event:t},o=0,a=n.length;o<a;o++){var s=n[o],l=IR(i,s,{});r.points.push([l.zrX,l.zrY]),r.touches.push(s)}this._track.push(r)}},t.prototype._recognize=function(t){for(var e in IH)if(IH.hasOwnProperty(e)){var i=IH[e](this._track,t);if(i)return i}},t}();function IN(t){var e=t[1][0]-t[0][0],i=t[1][1]-t[0][1];return Math.sqrt(e*e+i*i)}var IH={pinch:function(t,e){var i=t.length;if(i){var n=(t[i-1]||{}).points,r=(t[i-2]||{}).points||n;if(r&&r.length>1&&n&&n.length>1){var o=IN(n)/IN(r);isFinite(o)||(o=1),e.pinchScale=o;var a=[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2];return e.pinchX=a[0],e.pinchY=a[1],{type:"pinch",target:t[0].target,event:e}}}}};function IV(){return[1,0,0,1,0,0]}function IB(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function IF(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function IW(t,e,i){var n=e[0]*i[0]+e[2]*i[1],r=e[1]*i[0]+e[3]*i[1],o=e[0]*i[2]+e[2]*i[3],a=e[1]*i[2]+e[3]*i[3],s=e[0]*i[4]+e[2]*i[5]+e[4],l=e[1]*i[4]+e[3]*i[5]+e[5];return t[0]=n,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t}function Iz(t,e,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+i[0],t[5]=e[5]+i[1],t}function Ij(t,e,i,n){void 0===n&&(n=[0,0]);var r=e[0],o=e[2],a=e[4],s=e[1],l=e[3],h=e[5],u=Math.sin(i),c=Math.cos(i);return t[0]=r*c+s*u,t[1]=-r*u+s*c,t[2]=o*c+l*u,t[3]=-o*u+c*l,t[4]=c*(a-n[0])+u*(h-n[1])+n[0],t[5]=c*(h-n[1])-u*(a-n[0])+n[1],t}function IU(t,e,i){var n=i[0],r=i[1];return t[0]=e[0]*n,t[1]=e[1]*r,t[2]=e[2]*n,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*r,t}function IG(t,e){var i=e[0],n=e[2],r=e[4],o=e[1],a=e[3],s=e[5],l=i*a-o*n;return l?(l=1/l,t[0]=a*l,t[1]=-o*l,t[2]=-n*l,t[3]=i*l,t[4]=(n*s-a*r)*l,t[5]=(o*r-i*s)*l,t):null}var IY=function(){function t(t,e){this.x=t||0,this.y=e||0}return t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.scale=function(t){this.x*=t,this.y*=t},t.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},t.prototype.distance=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},t.prototype.distanceSquare=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(t){if(t){var e=this.x,i=this.y;return this.x=t[0]*e+t[2]*i+t[4],this.y=t[1]*e+t[3]*i+t[5],this}},t.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},t.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},t.set=function(t,e,i){t.x=e,t.y=i},t.copy=function(t,e){t.x=e.x,t.y=e.y},t.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.lenSquare=function(t){return t.x*t.x+t.y*t.y},t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.add=function(t,e,i){t.x=e.x+i.x,t.y=e.y+i.y},t.sub=function(t,e,i){t.x=e.x-i.x,t.y=e.y-i.y},t.scale=function(t,e,i){t.x=e.x*i,t.y=e.y*i},t.scaleAndAdd=function(t,e,i,n){t.x=e.x+i.x*n,t.y=e.y+i.y*n},t.lerp=function(t,e,i,n){var r=1-n;t.x=r*e.x+n*i.x,t.y=r*e.y+n*i.y},t}(),IX=Math.min,I$=Math.max,IZ=new IY,Iq=new IY,IK=new IY,IQ=new IY,IJ=new IY,I0=new IY,I1=function(){function t(t,e,i,n){i<0&&(t+=i,i=-i),n<0&&(e+=n,n=-n),this.x=t,this.y=e,this.width=i,this.height=n}return t.prototype.union=function(t){var e=IX(t.x,this.x),i=IX(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=I$(t.x+t.width,this.x+this.width)-e:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=I$(t.y+t.height,this.y+this.height)-i:this.height=t.height,this.x=e,this.y=i},t.prototype.applyTransform=function(e){t.applyTransform(this,this,e)},t.prototype.calculateTransform=function(t){var e=t.width/this.width,i=t.height/this.height,n=IV();return Iz(n,n,[-this.x,-this.y]),IU(n,n,[e,i]),Iz(n,n,[t.x,t.y]),n},t.prototype.intersect=function(e,i){if(!e)return!1;e instanceof t||(e=t.create(e));var n=this.x,r=this.x+this.width,o=this.y,a=this.y+this.height,s=e.x,l=e.x+e.width,h=e.y,u=e.y+e.height,c=!(r<s||l<n||a<h||u<o);if(i){var d=1/0,p=0,f=Math.abs(r-s),g=Math.abs(l-n),m=Math.abs(a-h),y=Math.abs(u-o),w=Math.min(f,g),b=Math.min(m,y);r<s||l<n?w>p&&(p=w,f<g?IY.set(I0,-f,0):IY.set(I0,g,0)):w<d&&(d=w,f<g?IY.set(IJ,f,0):IY.set(IJ,-g,0)),a<h||u<o?b>p&&(p=b,m<y?IY.set(I0,0,-m):IY.set(I0,0,y)):w<d&&(d=w,m<y?IY.set(IJ,0,m):IY.set(IJ,0,-y))}return i&&IY.copy(i,c?IJ:I0),c},t.prototype.contain=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(e){t.copy(this,e)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return 0===this.width||0===this.height},t.create=function(e){return new t(e.x,e.y,e.width,e.height)},t.copy=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},t.applyTransform=function(e,i,n){if(!n){e!==i&&t.copy(e,i);return}if(n[1]<1e-5&&n[1]>-.00001&&n[2]<1e-5&&n[2]>-.00001){var r=n[0],o=n[3],a=n[4],s=n[5];e.x=i.x*r+a,e.y=i.y*o+s,e.width=i.width*r,e.height=i.height*o,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}IZ.x=IK.x=i.x,IZ.y=IQ.y=i.y,Iq.x=IQ.x=i.x+i.width,Iq.y=IK.y=i.y+i.height,IZ.transform(n),IQ.transform(n),Iq.transform(n),IK.transform(n),e.x=IX(IZ.x,Iq.x,IK.x,IQ.x),e.y=IX(IZ.y,Iq.y,IK.y,IQ.y);var l=I$(IZ.x,Iq.x,IK.x,IQ.x),h=I$(IZ.y,Iq.y,IK.y,IQ.y);e.width=l-e.x,e.height=h-e.y},t}(),I2="silent";function I5(){IO(this.event)}var I3=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handler=null,e}return T6(e,t),e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(If),I4=function(t,e){this.x=t,this.y=e},I6=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],I8=new I1(0,0,0,0),I9=function(t){function e(e,i,n,r,o){var a=t.call(this)||this;return a._hovered=new I4(0,0),a.storage=e,a.painter=i,a.painterRoot=r,a._pointerSize=o,n=n||new I3,a.proxy=null,a.setHandlerProxy(n),a._draggingMgr=new Ip(a),a}return T6(e,t),e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(T_(I6,function(e){t.on&&t.on(e,this[e],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var e=t.zrX,i=t.zrY,n=Rt(this,e,i),r=this._hovered,o=r.target;o&&!o.__zr&&(o=(r=this.findHover(r.x,r.y)).target);var a=this._hovered=n?new I4(e,i):this.findHover(e,i),s=a.target,l=this.proxy;l.setCursor&&l.setCursor(s?s.cursor:"default"),o&&s!==o&&this.dispatchToElement(r,"mouseout",t),this.dispatchToElement(a,"mousemove",t),s&&s!==o&&this.dispatchToElement(a,"mouseover",t)},e.prototype.mouseout=function(t){var e=t.zrEventControl;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new I4(0,0)},e.prototype.dispatch=function(t,e){var i=this[t];i&&i.call(this,e)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},e.prototype.dispatchToElement=function(t,e,i){var n=(t=t||{}).target;if(!n||!n.silent){for(var r,o="on"+e,a={type:e,event:i,target:(r=t).target,topTarget:r.topTarget,cancelBubble:!1,offsetX:i.zrX,offsetY:i.zrY,gestureEvent:i.gestureEvent,pinchX:i.pinchX,pinchY:i.pinchY,pinchScale:i.pinchScale,wheelDelta:i.zrDelta,zrByTouch:i.zrByTouch,which:i.which,stop:I5};n&&(n[o]&&(a.cancelBubble=!!n[o].call(n,a)),n.trigger(e,a),n=n.__hostTarget?n.__hostTarget:n.parent,!a.cancelBubble););!a.cancelBubble&&(this.trigger(e,a),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(t){"function"==typeof t[o]&&t[o].call(t,a),t.trigger&&t.trigger(e,a)}))}},e.prototype.findHover=function(t,e,i){var n=this.storage.getDisplayList(),r=new I4(t,e);if(I7(n,r,t,e,i),this._pointerSize&&!r.target){for(var o=[],a=this._pointerSize,s=a/2,l=new I1(t-s,e-s,a,a),h=n.length-1;h>=0;h--){var u=n[h];u===i||u.ignore||u.ignoreCoarsePointer||u.parent&&u.parent.ignoreCoarsePointer||(I8.copy(u.getBoundingRect()),u.transform&&I8.applyTransform(u.transform),I8.intersect(l)&&o.push(u))}if(o.length){for(var c=Math.PI/12,d=2*Math.PI,p=0;p<s;p+=4)for(var f=0;f<d;f+=c)if(I7(o,r,t+p*Math.cos(f),e+p*Math.sin(f),i),r.target)return r}}return r},e.prototype.processGesture=function(t,e){this._gestureMgr||(this._gestureMgr=new IL);var i=this._gestureMgr;"start"===e&&i.clear();var n=i.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&i.clear(),n){var r=n.type;t.gestureEvent=r;var o=new I4;o.target=n.target,this.dispatchToElement(o,r,n.event)}},e}(If);function I7(t,e,i,n,r){for(var o=t.length-1;o>=0;o--){var a=t[o],s=void 0;if(a!==r&&!a.ignore&&(s=function(t,e,i){if(t[t.rectHover?"rectContain":"contain"](e,i)){for(var n=t,r=void 0,o=!1;n;){if(n.ignoreClip&&(o=!0),!o){var a=n.getClipPath();if(a&&!a.contain(e,i))return!1}n.silent&&(r=!0),n=n.__hostTarget||n.parent}return!r||I2}return!1}(a,i,n))&&(e.topTarget||(e.topTarget=a),s!==I2)){e.target=a;break}}}function Rt(t,e,i){var n=t.painter;return e<0||e>n.getWidth()||i<0||i>n.getHeight()}function Re(t,e,i,n){var r=e+1;if(r===i)return 1;if(0>n(t[r++],t[e])){for(;r<i&&0>n(t[r],t[r-1]);)r++;!function(t,e,i){for(i--;e<i;){var n=t[e];t[e++]=t[i],t[i--]=n}}(t,e,r)}else for(;r<i&&n(t[r],t[r-1])>=0;)r++;return r-e}function Ri(t,e,i,n,r){for(n===e&&n++;n<i;n++){for(var o,a=t[n],s=e,l=n;s<l;)0>r(a,t[o=s+l>>>1])?l=o:s=o+1;var h=n-s;switch(h){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;h>0;)t[s+h]=t[s+h-1],h--}t[s]=a}}function Rn(t,e,i,n,r,o){var a=0,s=0,l=1;if(o(t,e[i+r])>0){for(s=n-r;l<s&&o(t,e[i+r+l])>0;)a=l,(l=(l<<1)+1)<=0&&(l=s);l>s&&(l=s),a+=r,l+=r}else{for(s=r+1;l<s&&0>=o(t,e[i+r-l]);)a=l,(l=(l<<1)+1)<=0&&(l=s);l>s&&(l=s);var h=a;a=r-l,l=r-h}for(a++;a<l;){var u=a+(l-a>>>1);o(t,e[i+u])>0?a=u+1:l=u}return l}function Rr(t,e,i,n,r,o){var a=0,s=0,l=1;if(0>o(t,e[i+r])){for(s=r+1;l<s&&0>o(t,e[i+r-l]);)a=l,(l=(l<<1)+1)<=0&&(l=s);l>s&&(l=s);var h=a;a=r-l,l=r-h}else{for(s=n-r;l<s&&o(t,e[i+r+l])>=0;)a=l,(l=(l<<1)+1)<=0&&(l=s);l>s&&(l=s),a+=r,l+=r}for(a++;a<l;){var u=a+(l-a>>>1);0>o(t,e[i+u])?l=u:a=u+1}return l}function Ro(t,e,i,n){i||(i=0),n||(n=t.length);var r=n-i;if(!(r<2)){var o=0;if(r<32){o=Re(t,i,n,e),Ri(t,i,n,i+o,e);return}var a=function(t,e){var i,n,r=7,o=0,a=[];function s(s){var l=i[s],h=n[s],u=i[s+1],c=n[s+1];n[s]=h+c,s===o-3&&(i[s+1]=i[s+2],n[s+1]=n[s+2]),o--;var d=Rr(t[u],t,l,h,0,e);l+=d,0!=(h-=d)&&0!==(c=Rn(t[l+h-1],t,u,c,c-1,e))&&(h<=c?function(i,n,o,s){var l,h,u,c=0;for(c=0;c<n;c++)a[c]=t[i+c];var d=0,p=o,f=i;if(t[f++]=t[p++],0==--s){for(c=0;c<n;c++)t[f+c]=a[d+c];return}if(1===n){for(c=0;c<s;c++)t[f+c]=t[p+c];t[f+s]=a[d];return}for(var g=r;;){l=0,h=0,u=!1;do if(0>e(t[p],a[d])){if(t[f++]=t[p++],h++,l=0,0==--s){u=!0;break}}else if(t[f++]=a[d++],l++,h=0,1==--n){u=!0;break}while((l|h)<g)if(u)break;do{if(0!==(l=Rr(t[p],a,d,n,0,e))){for(c=0;c<l;c++)t[f+c]=a[d+c];if(f+=l,d+=l,(n-=l)<=1){u=!0;break}}if(t[f++]=t[p++],0==--s){u=!0;break}if(0!==(h=Rn(a[d],t,p,s,0,e))){for(c=0;c<h;c++)t[f+c]=t[p+c];if(f+=h,p+=h,0==(s-=h)){u=!0;break}}if(t[f++]=a[d++],1==--n){u=!0;break}g--}while(l>=7||h>=7)if(u)break;g<0&&(g=0),g+=2}if((r=g)<1&&(r=1),1===n){for(c=0;c<s;c++)t[f+c]=t[p+c];t[f+s]=a[d]}else if(0===n)throw Error();else for(c=0;c<n;c++)t[f+c]=a[d+c]}(l,h,u,c):function(i,n,o,s){var l=0;for(l=0;l<s;l++)a[l]=t[o+l];var h=i+n-1,u=s-1,c=o+s-1,d=0,p=0;if(t[c--]=t[h--],0==--n){for(l=0,d=c-(s-1);l<s;l++)t[d+l]=a[l];return}if(1===s){for(c-=n,h-=n,p=c+1,d=h+1,l=n-1;l>=0;l--)t[p+l]=t[d+l];t[c]=a[u];return}for(var f=r;;){var g=0,m=0,y=!1;do if(0>e(a[u],t[h])){if(t[c--]=t[h--],g++,m=0,0==--n){y=!0;break}}else if(t[c--]=a[u--],m++,g=0,1==--s){y=!0;break}while((g|m)<f)if(y)break;do{if(0!=(g=n-Rr(a[u],t,i,n,n-1,e))){for(c-=g,h-=g,n-=g,p=c+1,d=h+1,l=g-1;l>=0;l--)t[p+l]=t[d+l];if(0===n){y=!0;break}}if(t[c--]=a[u--],1==--s){y=!0;break}if(0!=(m=s-Rn(t[h],a,0,s,s-1,e))){for(c-=m,u-=m,s-=m,p=c+1,d=u+1,l=0;l<m;l++)t[p+l]=a[d+l];if(s<=1){y=!0;break}}if(t[c--]=t[h--],0==--n){y=!0;break}f--}while(g>=7||m>=7)if(y)break;f<0&&(f=0),f+=2}if((r=f)<1&&(r=1),1===s){for(c-=n,h-=n,p=c+1,d=h+1,l=n-1;l>=0;l--)t[p+l]=t[d+l];t[c]=a[u]}else if(0===s)throw Error();else for(l=0,d=c-(s-1);l<s;l++)t[d+l]=a[l]}(l,h,u,c))}return i=[],n=[],{mergeRuns:function(){for(;o>1;){var t=o-2;if(t>=1&&n[t-1]<=n[t]+n[t+1]||t>=2&&n[t-2]<=n[t]+n[t-1])n[t-1]<n[t+1]&&t--;else if(n[t]>n[t+1])break;s(t)}},forceMergeRuns:function(){for(;o>1;){var t=o-2;t>0&&n[t-1]<n[t+1]&&t--,s(t)}},pushRun:function(t,e){i[o]=t,n[o]=e,o+=1}}}(t,e),s=function(t){for(var e=0;t>=32;)e|=1&t,t>>=1;return t+e}(r);do{if((o=Re(t,i,n,e))<s){var l=r;l>s&&(l=s),Ri(t,i,i+l,i+o,e),o=l}a.pushRun(i,o),a.mergeRuns(),r-=o,i+=o}while(0!==r)a.forceMergeRuns()}}T_(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){I9.prototype[t]=function(e){var i,n,r=e.zrX,o=e.zrY,a=Rt(this,r,o);if("mouseup"===t&&a||(n=(i=this.findHover(r,o)).target),"mousedown"===t)this._downEl=n,this._downPoint=[e.zrX,e.zrY],this._upEl=n;else if("mouseup"===t)this._upEl=n;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||Ia(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(i,t,e)}});var Ra=!1;function Rs(){Ra||(Ra=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function Rl(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var Rh=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=Rl}return t.prototype.traverse=function(t,e){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(t,e)},t.prototype.getDisplayList=function(t,e){e=e||!1;var i=this._displayList;return(t||!i.length)&&this.updateDisplayList(e),i},t.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var e=this._roots,i=this._displayList,n=0,r=e.length;n<r;n++)this._updateAndAddDisplayable(e[n],null,t);i.length=this._displayListLen,Ro(i,Rl)},t.prototype._updateAndAddDisplayable=function(t,e,i){if(!t.ignore||i){t.beforeUpdate(),t.update(),t.afterUpdate();var n=t.getClipPath();if(t.ignoreClip)e=null;else if(n){e=e?e.slice():[];for(var r=n,o=t;r;)r.parent=o,r.updateTransform(),e.push(r),o=r,r=r.getClipPath()}if(t.childrenRef){for(var a=t.childrenRef(),s=0;s<a.length;s++){var l=a[s];t.__dirty&&(l.__dirty|=1),this._updateAndAddDisplayable(l,e,i)}t.__dirty=0}else e&&e.length?t.__clipPaths=e:t.__clipPaths&&t.__clipPaths.length>0&&(t.__clipPaths=[]),isNaN(t.z)&&(Rs(),t.z=0),isNaN(t.z2)&&(Rs(),t.z2=0),isNaN(t.zlevel)&&(Rs(),t.zlevel=0),this._displayList[this._displayListLen++]=t;var h=t.getDecalElement&&t.getDecalElement();h&&this._updateAndAddDisplayable(h,e,i);var u=t.getTextGuideLine();u&&this._updateAndAddDisplayable(u,e,i);var c=t.getTextContent();c&&this._updateAndAddDisplayable(c,e,i)}},t.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},t.prototype.delRoot=function(t){if(t instanceof Array){for(var e=0,i=t.length;e<i;e++)this.delRoot(t[e]);return}var n=Tx(this._roots,t);n>=0&&this._roots.splice(n,1)},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}();tp=M9.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};var Ru={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return .5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*Math.PI*(t-e)/.4)))},elasticOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin(2*Math.PI*(t-e)/.4)+1)},elasticInOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),(t*=2)<1)?-(i*Math.pow(2,10*(t-=1))*Math.sin(2*Math.PI*(t-e)/.4)*.5):i*Math.pow(2,-10*(t-=1))*Math.sin(2*Math.PI*(t-e)/.4)*.5+1},backIn:function(t){return t*t*(2.70158*t-1.70158)},backOut:function(t){return--t*t*(2.70158*t+1.70158)+1},backInOut:function(t){return(t*=2)<1?t*t*(3.5949095*t-2.5949095)*.5:.5*((t-=2)*t*(3.5949095*t+2.5949095)+2)},bounceIn:function(t){return 1-Ru.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*Ru.bounceIn(2*t):.5*Ru.bounceOut(2*t-1)+.5}},Rc=Math.pow,Rd=Math.sqrt,Rp=Rd(3),Rf=1/3,Rg=T8(),Rm=T8(),Ry=T8();function Rv(t){return t>-.00000001&&t<1e-8}function Rw(t){return t>1e-8||t<-.00000001}function Rb(t,e,i,n,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*n+3*o*i)}function Rx(t,e,i,n,r){var o=1-r;return 3*(((e-t)*o+2*(i-e)*r)*o+(n-i)*r*r)}function RS(t,e,i,n,r,o){var a=n+3*(e-i)-t,s=3*(i-2*e+t),l=3*(e-t),h=t-r,u=s*s-3*a*l,c=s*l-9*a*h,d=l*l-3*s*h,p=0;if(Rv(u)&&Rv(c)){if(Rv(s))o[0]=0;else{var f=-l/s;f>=0&&f<=1&&(o[p++]=f)}}else{var g=c*c-4*u*d;if(Rv(g)){var m=c/u,f=-s/a+m,y=-m/2;f>=0&&f<=1&&(o[p++]=f),y>=0&&y<=1&&(o[p++]=y)}else if(g>0){var w=Rd(g),b=u*s+1.5*a*(-c+w),x=u*s+1.5*a*(-c-w),f=(-s-((b=b<0?-Rc(-b,Rf):Rc(b,Rf))+(x=x<0?-Rc(-x,Rf):Rc(x,Rf))))/(3*a);f>=0&&f<=1&&(o[p++]=f)}else{var S=Math.acos((2*u*s-3*a*c)/(2*Rd(u*u*u)))/3,C=Rd(u),_=Math.cos(S),f=(-s-2*C*_)/(3*a),y=(-s+C*(_+Rp*Math.sin(S)))/(3*a),M=(-s+C*(_-Rp*Math.sin(S)))/(3*a);f>=0&&f<=1&&(o[p++]=f),y>=0&&y<=1&&(o[p++]=y),M>=0&&M<=1&&(o[p++]=M)}}return p}function RC(t,e,i,n,r){var o=6*i-12*e+6*t,a=9*e+3*n-3*t-9*i,s=3*e-3*t,l=0;if(Rv(a)){if(Rw(o)){var h=-s/o;h>=0&&h<=1&&(r[l++]=h)}}else{var u=o*o-4*a*s;if(Rv(u))r[0]=-o/(2*a);else if(u>0){var c=Rd(u),h=(-o+c)/(2*a),d=(-o-c)/(2*a);h>=0&&h<=1&&(r[l++]=h),d>=0&&d<=1&&(r[l++]=d)}}return l}function R_(t,e,i,n,r,o){var a=(e-t)*r+t,s=(i-e)*r+e,l=(n-i)*r+i,h=(s-a)*r+a,u=(l-s)*r+s,c=(u-h)*r+h;o[0]=t,o[1]=a,o[2]=h,o[3]=c,o[4]=c,o[5]=u,o[6]=l,o[7]=n}function RM(t,e,i,n,r,o,a,s,l,h,u){var c,d,p,f,g,m=.005,y=1/0;Rg[0]=l,Rg[1]=h;for(var w=0;w<1;w+=.05)Rm[0]=Rb(t,i,r,a,w),Rm[1]=Rb(e,n,o,s,w),(f=Is(Rg,Rm))<y&&(c=w,y=f);y=1/0;for(var b=0;b<32&&!(m<1e-4);b++)d=c-m,p=c+m,Rm[0]=Rb(t,i,r,a,d),Rm[1]=Rb(e,n,o,s,d),f=Is(Rm,Rg),d>=0&&f<y?(c=d,y=f):(Ry[0]=Rb(t,i,r,a,p),Ry[1]=Rb(e,n,o,s,p),g=Is(Ry,Rg),p<=1&&g<y?(c=p,y=g):m*=.5);return u&&(u[0]=Rb(t,i,r,a,c),u[1]=Rb(e,n,o,s,c)),Rd(y)}function RT(t,e,i,n){var r=1-n;return r*(r*t+2*n*e)+n*n*i}function RI(t,e,i,n){return 2*((1-n)*(e-t)+n*(i-e))}function RR(t,e,i){var n=t+i-2*e;return 0===n?.5:(t-e)/n}function RE(t,e,i,n,r){var o=(e-t)*n+t,a=(i-e)*n+e,s=(a-o)*n+o;r[0]=t,r[1]=o,r[2]=s,r[3]=s,r[4]=a,r[5]=i}function RA(t,e,i,n,r,o,a,s,l){var h,u=.005,c=1/0;Rg[0]=a,Rg[1]=s;for(var d=0;d<1;d+=.05){Rm[0]=RT(t,i,r,d),Rm[1]=RT(e,n,o,d);var p=Is(Rg,Rm);p<c&&(h=d,c=p)}c=1/0;for(var f=0;f<32&&!(u<1e-4);f++){var g=h-u,m=h+u;Rm[0]=RT(t,i,r,g),Rm[1]=RT(e,n,o,g);var p=Is(Rm,Rg);if(g>=0&&p<c)h=g,c=p;else{Ry[0]=RT(t,i,r,m),Ry[1]=RT(e,n,o,m);var y=Is(Ry,Rg);m<=1&&y<c?(h=m,c=y):u*=.5}}return l&&(l[0]=RT(t,i,r,h),l[1]=RT(e,n,o,h)),Rd(c)}var Rk=/cubic-bezier\(([0-9,\.e ]+)\)/;function RD(t){var e=t&&Rk.exec(t);if(e){var i=e[1].split(","),n=+TX(i[0]),r=+TX(i[1]),o=+TX(i[2]),a=+TX(i[3]);if(isNaN(n+r+o+a))return;var s=[];return function(t){return t<=0?0:t>=1?1:RS(0,n,o,1,t,s)&&Rb(0,r,a,1,s[0])}}}var RO=function(){function t(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||T5,this.ondestroy=t.ondestroy||T5,this.onrestart=t.onrestart||T5,t.easing&&this.setEasing(t.easing)}return t.prototype.step=function(t,e){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=e;return}var i=this._life,n=t-this._startTime-this._pausedTime,r=n/i;r<0&&(r=0),r=Math.min(r,1);var o=this.easingFunc,a=o?o(r):r;if(this.onframe(a),1===r){if(!this.loop)return!0;this._startTime=t-n%i,this._pausedTime=0,this.onrestart()}return!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(t){this.easing=t,this.easingFunc=TD(t)?t:Ru[t]||RD(t)},t}(),RP=function(t){this.value=t},RL=function(){function t(){this._len=0}return t.prototype.insert=function(t){var e=new RP(t);return this.insertEntry(e),e},t.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},t.prototype.remove=function(t){var e=t.prev,i=t.next;e?e.next=i:this.head=i,i?i.prev=e:this.tail=e,t.next=t.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),RN=function(){function t(t){this._list=new RL,this._maxSize=10,this._map={},this._maxSize=t}return t.prototype.put=function(t,e){var i=this._list,n=this._map,r=null;if(null==n[t]){var o=i.len(),a=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var s=i.head;i.remove(s),delete n[s.key],r=s.value,this._lastRemovedEntry=s}a?a.value=e:a=new RP(e),a.key=t,i.insertEntry(a),n[t]=a}return r},t.prototype.get=function(t){var e=this._map[t],i=this._list;if(null!=e)return e!==i.tail&&(i.remove(e),i.insertEntry(e)),e.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}(),RH={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function RV(t){return(t=Math.round(t))<0?0:t>255?255:t}function RB(t){return t<0?0:t>1?1:t}function RF(t){return t.length&&"%"===t.charAt(t.length-1)?RV(parseFloat(t)/100*255):RV(parseInt(t,10))}function RW(t){return t.length&&"%"===t.charAt(t.length-1)?RB(parseFloat(t)/100):RB(parseFloat(t))}function Rz(t,e,i){return(i<0?i+=1:i>1&&(i-=1),6*i<1)?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function Rj(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t}function RU(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var RG=new RN(20),RY=null;function RX(t,e){RY&&RU(RY,e),RY=RG.put(t,RY||e.slice())}function R$(t,e){if(t){e=e||[];var i=RG.get(t);if(i)return RU(e,i);var n=(t+="").replace(/ /g,"").toLowerCase();if(n in RH)return RU(e,RH[n]),RX(t,e),e;var r=n.length;if("#"===n.charAt(0)){if(4===r||5===r){var o=parseInt(n.slice(1,4),16);if(!(o>=0&&o<=4095)){Rj(e,0,0,0,1);return}return Rj(e,(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,5===r?parseInt(n.slice(4),16)/15:1),RX(t,e),e}if(7===r||9===r){var o=parseInt(n.slice(1,7),16);if(!(o>=0&&o<=16777215)){Rj(e,0,0,0,1);return}return Rj(e,(16711680&o)>>16,(65280&o)>>8,255&o,9===r?parseInt(n.slice(7),16)/255:1),RX(t,e),e}return}var a=n.indexOf("("),s=n.indexOf(")");if(-1!==a&&s+1===r){var l=n.substr(0,a),h=n.substr(a+1,s-(a+1)).split(","),u=1;switch(l){case"rgba":if(4!==h.length)return 3===h.length?Rj(e,+h[0],+h[1],+h[2],1):Rj(e,0,0,0,1);u=RW(h.pop());case"rgb":if(h.length>=3)return Rj(e,RF(h[0]),RF(h[1]),RF(h[2]),3===h.length?u:RW(h[3])),RX(t,e),e;Rj(e,0,0,0,1);return;case"hsla":if(4!==h.length){Rj(e,0,0,0,1);return}return h[3]=RW(h[3]),RZ(h,e),RX(t,e),e;case"hsl":if(3!==h.length){Rj(e,0,0,0,1);return}return RZ(h,e),RX(t,e),e;default:return}}Rj(e,0,0,0,1)}}function RZ(t,e){var i=(parseFloat(t[0])%360+360)%360/360,n=RW(t[1]),r=RW(t[2]),o=r<=.5?r*(n+1):r+n-r*n,a=2*r-o;return Rj(e=e||[],RV(255*Rz(a,o,i+1/3)),RV(255*Rz(a,o,i)),RV(255*Rz(a,o,i-1/3)),1),4===t.length&&(e[3]=t[3]),e}function Rq(t,e){var i=R$(t);if(i){for(var n=0;n<3;n++)e<0?i[n]=i[n]*(1-e)|0:i[n]=(255-i[n])*e+i[n]|0,i[n]>255?i[n]=255:i[n]<0&&(i[n]=0);return R0(i,4===i.length?"rgba":"rgb")}}function RK(t,e,i){if(e&&e.length&&t>=0&&t<=1){i=i||[];var n,r,o,a,s=t*(e.length-1),l=Math.floor(s),h=e[l],u=e[Math.ceil(s)],c=s-l;return i[0]=RV((n=h[0])+(u[0]-n)*c),i[1]=RV((r=h[1])+(u[1]-r)*c),i[2]=RV((o=h[2])+(u[2]-o)*c),i[3]=RB((a=h[3])+(u[3]-a)*c),i}}function RQ(t,e,i,n){var r,o=R$(t);if(t)return o=function(t){if(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,a=Math.min(n,r,o),s=Math.max(n,r,o),l=s-a,h=(s+a)/2;if(0===l)e=0,i=0;else{i=h<.5?l/(s+a):l/(2-s-a);var u=((s-n)/6+l/2)/l,c=((s-r)/6+l/2)/l,d=((s-o)/6+l/2)/l;n===s?e=d-c:r===s?e=1/3+u-d:o===s&&(e=2/3+c-u),e<0&&(e+=1),e>1&&(e-=1)}var p=[360*e,i,h];return null!=t[3]&&p.push(t[3]),p}}(o),null!=e&&(o[0]=(r=Math.round(r=e))<0?0:r>360?360:r),null!=i&&(o[1]=RW(i)),null!=n&&(o[2]=RW(n)),R0(RZ(o),"rgba")}function RJ(t,e){var i=R$(t);if(i&&null!=e)return i[3]=RB(e),R0(i,"rgba")}function R0(t,e){if(t&&t.length){var i=t[0]+","+t[1]+","+t[2];return("rgba"===e||"hsva"===e||"hsla"===e)&&(i+=","+t[3]),e+"("+i+")"}}function R1(t,e){var i=R$(t);return i?(.299*i[0]+.587*i[1]+.114*i[2])*i[3]/255+(1-i[3])*e:0}var R2=new RN(100);function R5(t){if(TO(t)){var e=R2.get(t);return e||(e=Rq(t,-.1),R2.put(t,e)),e}if(TF(t)){var i=Tw({},t);return i.colorStops=TM(t.colorStops,function(t){return{offset:t.offset,color:Rq(t.color,-.1)}}),i}return t}tf=function(t){var e,i,n=function(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");-1===i&&(i=e);var n=i===e?0:4-i%4;return[i,n]}(t),r=n[0],o=n[1],a=new R6((r+o)*3/4-o),s=0,l=o>0?r-4:r;for(i=0;i<l;i+=4)e=R4[t.charCodeAt(i)]<<18|R4[t.charCodeAt(i+1)]<<12|R4[t.charCodeAt(i+2)]<<6|R4[t.charCodeAt(i+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=255&e;return 2===o&&(e=R4[t.charCodeAt(i)]<<2|R4[t.charCodeAt(i+1)]>>4,a[s++]=255&e),1===o&&(e=R4[t.charCodeAt(i)]<<10|R4[t.charCodeAt(i+1)]<<4|R4[t.charCodeAt(i+2)]>>2,a[s++]=e>>8&255,a[s++]=255&e),a},tg=function(t){for(var e,i=t.length,n=i%3,r=[],o=0,a=i-n;o<a;o+=16383)r.push(function(t,e,i){for(var n,r=[],o=e;o<i;o+=3)r.push(R3[(n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]))>>18&63]+R3[n>>12&63]+R3[n>>6&63]+R3[63&n]);return r.join("")}(t,o,o+16383>a?a:o+16383));return 1===n?r.push(R3[(e=t[i-1])>>2]+R3[e<<4&63]+"=="):2===n&&r.push(R3[(e=(t[i-2]<<8)+t[i-1])>>10]+R3[e>>4&63]+R3[e<<2&63]+"="),r.join("")};for(var R3=[],R4=[],R6="undefined"!=typeof Uint8Array?Uint8Array:Array,R8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R9=0,R7=R8.length;R9<R7;++R9)R3[R9]=R8[R9],R4[R8.charCodeAt(R9)]=R9;R4["-".charCodeAt(0)]=62,R4["_".charCodeAt(0)]=63,tm=function(t,e,i,n,r){var o,a,s=8*r-n-1,l=(1<<s)-1,h=l>>1,u=-7,c=i?r-1:0,d=i?-1:1,p=t[e+c];for(c+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+c],c+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=256*a+t[e+c],c+=d,u-=8);if(0===o)o=1-h;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=h}return(p?-1:1)*a*Math.pow(2,o-n)},ty=function(t,e,i,n,r,o){var a,s,l,h=8*o-r-1,u=(1<<h)-1,c=u>>1,d=23===r?5960464477539062e-23:0,p=n?0:o-1,f=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+c>=1?e+=d/l:e+=d*Math.pow(2,1-c),e*l>=2&&(a++,l/=2),a+c>=u?(s=0,a=u):a+c>=1?(s=(e*l-1)*Math.pow(2,r),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,r),a=0));r>=8;t[i+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,h+=r;h>0;t[i+p]=255&a,p+=f,a/=256,h-=8);t[i+p-f]|=128*g};const Et="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function Ee(t){if(t>2147483647)throw RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,Ei.prototype),e}function Ei(t,e,i){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return Eo(t)}return En(t,e,i)}function En(t,e,i){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!Ei.isEncoding(e))throw TypeError("Unknown encoding: "+e);let i=0|Eh(t,e),n=Ee(i),r=n.write(t,e);return r!==i&&(n=n.slice(0,r)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(ED(t,Uint8Array)){let e=new Uint8Array(t);return Es(e.buffer,e.byteOffset,e.byteLength)}return Ea(t)}(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(ED(t,ArrayBuffer)||t&&ED(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(ED(t,SharedArrayBuffer)||t&&ED(t.buffer,SharedArrayBuffer)))return Es(t,e,i);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return Ei.from(n,e,i);let r=function(t){var e;if(Ei.isBuffer(t)){let e=0|El(t.length),i=Ee(e);return 0===i.length||t.copy(i,0,0,e),i}return void 0!==t.length?"number"!=typeof t.length||(e=t.length)!=e?Ee(0):Ea(t):"Buffer"===t.type&&Array.isArray(t.data)?Ea(t.data):void 0}(t);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return Ei.from(t[Symbol.toPrimitive]("string"),e,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function Er(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function Eo(t){return Er(t),Ee(t<0?0:0|El(t))}function Ea(t){let e=t.length<0?0:0|El(t.length),i=Ee(e);for(let n=0;n<e;n+=1)i[n]=255&t[n];return i}function Es(t,e,i){let n;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),Ei.prototype),n}function El(t){if(t>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function Eh(t,e){if(Ei.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||ED(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let i=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===i)return 0;let r=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return EE(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return EA(t).length;default:if(r)return n?-1:EE(t).length;e=(""+e).toLowerCase(),r=!0}}function Eu(t,e,i){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||(i>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,i){let n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);let r="";for(let n=e;n<i;++n)r+=EO[t[n]];return r}(this,e,i);case"utf8":case"utf-8":return Ef(this,e,i);case"ascii":return function(t,e,i){let n="";i=Math.min(t.length,i);for(let r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}(this,e,i);case"latin1":case"binary":return function(t,e,i){let n="";i=Math.min(t.length,i);for(let r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}(this,e,i);case"base64":var r,o;return r=e,o=i,0===r&&o===this.length?tg(this):tg(this.slice(r,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,i){let n=t.slice(e,i),r="";for(let t=0;t<n.length-1;t+=2)r+=String.fromCharCode(n[t]+256*n[t+1]);return r}(this,e,i);default:if(n)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function Ec(t,e,i){let n=t[e];t[e]=t[i],t[i]=n}function Ed(t,e,i,n,r){var o;if(0===t.length)return -1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),(o=i=+i)!=o&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return -1;i=t.length-1}else if(i<0){if(!r)return -1;i=0}if("string"==typeof e&&(e=Ei.from(e,n)),Ei.isBuffer(e))return 0===e.length?-1:Ep(t,e,i,n,r);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):Ep(t,[e],i,n,r);throw TypeError("val must be string, number or Buffer")}function Ep(t,e,i,n,r){let o,a=1,s=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return -1;a=2,s/=2,l/=2,i/=2}function h(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){let n=-1;for(o=i;o<s;o++)if(h(t,o)===h(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===l)return n*a}else -1!==n&&(o-=o-n),n=-1}else for(i+l>s&&(i=s-l),o=i;o>=0;o--){let i=!0;for(let n=0;n<l;n++)if(h(t,o+n)!==h(e,n)){i=!1;break}if(i)return o}return -1}function Ef(t,e,i){i=Math.min(t.length,i);let n=[],r=e;for(;r<i;){let e=t[r],o=null,a=e>239?4:e>223?3:e>191?2:1;if(r+a<=i){let i,n,s,l;switch(a){case 1:e<128&&(o=e);break;case 2:(192&(i=t[r+1]))==128&&(l=(31&e)<<6|63&i)>127&&(o=l);break;case 3:i=t[r+1],n=t[r+2],(192&i)==128&&(192&n)==128&&(l=(15&e)<<12|(63&i)<<6|63&n)>2047&&(l<55296||l>57343)&&(o=l);break;case 4:i=t[r+1],n=t[r+2],s=t[r+3],(192&i)==128&&(192&n)==128&&(192&s)==128&&(l=(15&e)<<18|(63&i)<<12|(63&n)<<6|63&s)>65535&&l<1114112&&(o=l)}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),r+=a}return function(t){let e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);let i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return i}(n)}function Eg(t,e,i){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>i)throw RangeError("Trying to access beyond buffer length")}function Em(t,e,i,n,r,o){if(!Ei.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw RangeError('"value" argument is out of bounds');if(i+n>t.length)throw RangeError("Index out of range")}function Ey(t,e,i,n,r){EM(e,n,r,t,i,7);let o=Number(e&BigInt(4294967295));t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,i}function Ev(t,e,i,n,r){EM(e,n,r,t,i,7);let o=Number(e&BigInt(4294967295));t[i+7]=o,o>>=8,t[i+6]=o,o>>=8,t[i+5]=o,o>>=8,t[i+4]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=a,a>>=8,t[i+2]=a,a>>=8,t[i+1]=a,a>>=8,t[i]=a,i+8}function Ew(t,e,i,n,r,o){if(i+n>t.length||i<0)throw RangeError("Index out of range")}function Eb(t,e,i,n,r){return e=+e,i>>>=0,r||Ew(t,e,i,4,34028234663852886e22,-34028234663852886e22),ty(t,e,i,n,23,4),i+4}function Ex(t,e,i,n,r){return e=+e,i>>>=0,r||Ew(t,e,i,8,17976931348623157e292,-17976931348623157e292),ty(t,e,i,n,52,8),i+8}Ei.TYPED_ARRAY_SUPPORT=function(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),Ei.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Ei.prototype,"parent",{enumerable:!0,get:function(){if(Ei.isBuffer(this))return this.buffer}}),Object.defineProperty(Ei.prototype,"offset",{enumerable:!0,get:function(){if(Ei.isBuffer(this))return this.byteOffset}}),Ei.poolSize=8192,Ei.from=function(t,e,i){return En(t,e,i)},Object.setPrototypeOf(Ei.prototype,Uint8Array.prototype),Object.setPrototypeOf(Ei,Uint8Array),Ei.alloc=function(t,e,i){return(Er(t),t<=0)?Ee(t):void 0!==e?"string"==typeof i?Ee(t).fill(e,i):Ee(t).fill(e):Ee(t)},Ei.allocUnsafe=function(t){return Eo(t)},Ei.allocUnsafeSlow=function(t){return Eo(t)},Ei.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==Ei.prototype},Ei.compare=function(t,e){if(ED(t,Uint8Array)&&(t=Ei.from(t,t.offset,t.byteLength)),ED(e,Uint8Array)&&(e=Ei.from(e,e.offset,e.byteLength)),!Ei.isBuffer(t)||!Ei.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,n=e.length;for(let r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},Ei.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Ei.concat=function(t,e){let i;if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Ei.alloc(0);if(void 0===e)for(i=0,e=0;i<t.length;++i)e+=t[i].length;let n=Ei.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){let e=t[i];if(ED(e,Uint8Array))r+e.length>n.length?(Ei.isBuffer(e)||(e=Ei.from(e)),e.copy(n,r)):Uint8Array.prototype.set.call(n,e,r);else if(Ei.isBuffer(e))e.copy(n,r);else throw TypeError('"list" argument must be an Array of Buffers');r+=e.length}return n},Ei.byteLength=Eh,Ei.prototype._isBuffer=!0,Ei.prototype.swap16=function(){let t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)Ec(this,e,e+1);return this},Ei.prototype.swap32=function(){let t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)Ec(this,e,e+3),Ec(this,e+1,e+2);return this},Ei.prototype.swap64=function(){let t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)Ec(this,e,e+7),Ec(this,e+1,e+6),Ec(this,e+2,e+5),Ec(this,e+3,e+4);return this},Ei.prototype.toString=function(){let t=this.length;return 0===t?"":0==arguments.length?Ef(this,0,t):Eu.apply(this,arguments)},Ei.prototype.toLocaleString=Ei.prototype.toString,Ei.prototype.equals=function(t){if(!Ei.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===Ei.compare(this,t)},Ei.prototype.inspect=function(){let t="";return t=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(t+=" ... "),"<Buffer "+t+">"},Et&&(Ei.prototype[Et]=Ei.prototype.inspect),Ei.prototype.compare=function(t,e,i,n,r){if(ED(t,Uint8Array)&&(t=Ei.from(t,t.offset,t.byteLength)),!Ei.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return -1;if(e>=i)return 1;if(e>>>=0,i>>>=0,n>>>=0,r>>>=0,this===t)return 0;let o=r-n,a=i-e,s=Math.min(o,a),l=this.slice(n,r),h=t.slice(e,i);for(let t=0;t<s;++t)if(l[t]!==h[t]){o=l[t],a=h[t];break}return o<a?-1:a<o?1:0},Ei.prototype.includes=function(t,e,i){return -1!==this.indexOf(t,e,i)},Ei.prototype.indexOf=function(t,e,i){return Ed(this,t,e,i,!0)},Ei.prototype.lastIndexOf=function(t,e,i){return Ed(this,t,e,i,!1)},Ei.prototype.write=function(t,e,i,n){var r,o,a,s,l,h,u,c;if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(i)?(i>>>=0,void 0===n&&(n="utf8")):(n=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-e;if((void 0===i||i>d)&&(i=d),t.length>0&&(i<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let p=!1;for(;;)switch(n){case"hex":return function(t,e,i,n){let r;i=Number(i)||0;let o=t.length-i;n?(n=Number(n))>o&&(n=o):n=o;let a=e.length;for(n>a/2&&(n=a/2),r=0;r<n;++r){let n=parseInt(e.substr(2*r,2),16);if(n!=n)break;t[i+r]=n}return r}(this,t,e,i);case"utf8":case"utf-8":return r=e,o=i,Ek(EE(t,this.length-r),this,r,o);case"ascii":case"latin1":case"binary":return a=e,s=i,Ek(function(t){let e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(t),this,a,s);case"base64":return l=e,h=i,Ek(EA(t),this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=e,c=i,Ek(function(t,e){let i,n;let r=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)n=(i=t.charCodeAt(o))>>8,r.push(i%256),r.push(n);return r}(t,this.length-u),this,u,c);default:if(p)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),p=!0}},Ei.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Ei.prototype.slice=function(t,e){let i=this.length;t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);let n=this.subarray(t,e);return Object.setPrototypeOf(n,Ei.prototype),n},Ei.prototype.readUintLE=Ei.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||Eg(t,e,this.length);let n=this[t],r=1,o=0;for(;++o<e&&(r*=256);)n+=this[t+o]*r;return n},Ei.prototype.readUintBE=Ei.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||Eg(t,e,this.length);let n=this[t+--e],r=1;for(;e>0&&(r*=256);)n+=this[t+--e]*r;return n},Ei.prototype.readUint8=Ei.prototype.readUInt8=function(t,e){return t>>>=0,e||Eg(t,1,this.length),this[t]},Ei.prototype.readUint16LE=Ei.prototype.readUInt16LE=function(t,e){return t>>>=0,e||Eg(t,2,this.length),this[t]|this[t+1]<<8},Ei.prototype.readUint16BE=Ei.prototype.readUInt16BE=function(t,e){return t>>>=0,e||Eg(t,2,this.length),this[t]<<8|this[t+1]},Ei.prototype.readUint32LE=Ei.prototype.readUInt32LE=function(t,e){return t>>>=0,e||Eg(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Ei.prototype.readUint32BE=Ei.prototype.readUInt32BE=function(t,e){return t>>>=0,e||Eg(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Ei.prototype.readBigUInt64LE=EP(function(t){ET(t>>>=0,"offset");let e=this[t],i=this[t+7];(void 0===e||void 0===i)&&EI(t,this.length-8);let n=e+256*this[++t]+65536*this[++t]+16777216*this[++t],r=this[++t]+256*this[++t]+65536*this[++t]+16777216*i;return BigInt(n)+(BigInt(r)<<BigInt(32))}),Ei.prototype.readBigUInt64BE=EP(function(t){ET(t>>>=0,"offset");let e=this[t],i=this[t+7];(void 0===e||void 0===i)&&EI(t,this.length-8);let n=16777216*e+65536*this[++t]+256*this[++t]+this[++t],r=16777216*this[++t]+65536*this[++t]+256*this[++t]+i;return(BigInt(n)<<BigInt(32))+BigInt(r)}),Ei.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||Eg(t,e,this.length);let n=this[t],r=1,o=0;for(;++o<e&&(r*=256);)n+=this[t+o]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},Ei.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||Eg(t,e,this.length);let n=e,r=1,o=this[t+--n];for(;n>0&&(r*=256);)o+=this[t+--n]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},Ei.prototype.readInt8=function(t,e){return(t>>>=0,e||Eg(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},Ei.prototype.readInt16LE=function(t,e){t>>>=0,e||Eg(t,2,this.length);let i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},Ei.prototype.readInt16BE=function(t,e){t>>>=0,e||Eg(t,2,this.length);let i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},Ei.prototype.readInt32LE=function(t,e){return t>>>=0,e||Eg(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Ei.prototype.readInt32BE=function(t,e){return t>>>=0,e||Eg(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Ei.prototype.readBigInt64LE=EP(function(t){ET(t>>>=0,"offset");let e=this[t],i=this[t+7];return(void 0===e||void 0===i)&&EI(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24))<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+16777216*this[++t])}),Ei.prototype.readBigInt64BE=EP(function(t){ET(t>>>=0,"offset");let e=this[t],i=this[t+7];return(void 0===e||void 0===i)&&EI(t,this.length-8),(BigInt((e<<24)+65536*this[++t]+256*this[++t]+this[++t])<<BigInt(32))+BigInt(16777216*this[++t]+65536*this[++t]+256*this[++t]+i)}),Ei.prototype.readFloatLE=function(t,e){return t>>>=0,e||Eg(t,4,this.length),tm(this,t,!0,23,4)},Ei.prototype.readFloatBE=function(t,e){return t>>>=0,e||Eg(t,4,this.length),tm(this,t,!1,23,4)},Ei.prototype.readDoubleLE=function(t,e){return t>>>=0,e||Eg(t,8,this.length),tm(this,t,!0,52,8)},Ei.prototype.readDoubleBE=function(t,e){return t>>>=0,e||Eg(t,8,this.length),tm(this,t,!1,52,8)},Ei.prototype.writeUintLE=Ei.prototype.writeUIntLE=function(t,e,i,n){if(t=+t,e>>>=0,i>>>=0,!n){let n=Math.pow(2,8*i)-1;Em(this,t,e,i,n,0)}let r=1,o=0;for(this[e]=255&t;++o<i&&(r*=256);)this[e+o]=t/r&255;return e+i},Ei.prototype.writeUintBE=Ei.prototype.writeUIntBE=function(t,e,i,n){if(t=+t,e>>>=0,i>>>=0,!n){let n=Math.pow(2,8*i)-1;Em(this,t,e,i,n,0)}let r=i-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+i},Ei.prototype.writeUint8=Ei.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||Em(this,t,e,1,255,0),this[e]=255&t,e+1},Ei.prototype.writeUint16LE=Ei.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||Em(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},Ei.prototype.writeUint16BE=Ei.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||Em(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},Ei.prototype.writeUint32LE=Ei.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||Em(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},Ei.prototype.writeUint32BE=Ei.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||Em(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},Ei.prototype.writeBigUInt64LE=EP(function(t,e=0){return Ey(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),Ei.prototype.writeBigUInt64BE=EP(function(t,e=0){return Ev(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),Ei.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e>>>=0,!n){let n=Math.pow(2,8*i-1);Em(this,t,e,i,n-1,-n)}let r=0,o=1,a=0;for(this[e]=255&t;++r<i&&(o*=256);)t<0&&0===a&&0!==this[e+r-1]&&(a=1),this[e+r]=(t/o>>0)-a&255;return e+i},Ei.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e>>>=0,!n){let n=Math.pow(2,8*i-1);Em(this,t,e,i,n-1,-n)}let r=i-1,o=1,a=0;for(this[e+r]=255&t;--r>=0&&(o*=256);)t<0&&0===a&&0!==this[e+r+1]&&(a=1),this[e+r]=(t/o>>0)-a&255;return e+i},Ei.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||Em(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},Ei.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||Em(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},Ei.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||Em(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},Ei.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||Em(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},Ei.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||Em(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},Ei.prototype.writeBigInt64LE=EP(function(t,e=0){return Ey(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Ei.prototype.writeBigInt64BE=EP(function(t,e=0){return Ev(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Ei.prototype.writeFloatLE=function(t,e,i){return Eb(this,t,e,!0,i)},Ei.prototype.writeFloatBE=function(t,e,i){return Eb(this,t,e,!1,i)},Ei.prototype.writeDoubleLE=function(t,e,i){return Ex(this,t,e,!0,i)},Ei.prototype.writeDoubleBE=function(t,e,i){return Ex(this,t,e,!1,i)},Ei.prototype.copy=function(t,e,i,n){if(!Ei.isBuffer(t))throw TypeError("argument should be a Buffer");if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);let r=n-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,n):Uint8Array.prototype.set.call(t,this.subarray(i,n),e),r},Ei.prototype.fill=function(t,e,i,n){let r;if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!Ei.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===t.length){let e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw RangeError("Out of range index");if(i<=e)return this;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(r=e;r<i;++r)this[r]=t;else{let o=Ei.isBuffer(t)?t:Ei.from(t,n),a=o.length;if(0===a)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(r=0;r<i-e;++r)this[r+e]=o[r%a]}return this};const ES={};function EC(t,e,i){ES[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function E_(t){let e="",i=t.length,n="-"===t[0]?1:0;for(;i>=n+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function EM(t,e,i,n,r,o){if(t>i||t<e){let n;let r="bigint"==typeof e?"n":"";throw n=o>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${(o+1)*8}${r}`:`>= -(2${r} ** ${(o+1)*8-1}${r}) and < 2 ** ${(o+1)*8-1}${r}`:`>= ${e}${r} and <= ${i}${r}`,new ES.ERR_OUT_OF_RANGE("value",n,t)}ET(r,"offset"),(void 0===n[r]||void 0===n[r+o])&&EI(r,n.length-(o+1))}function ET(t,e){if("number"!=typeof t)throw new ES.ERR_INVALID_ARG_TYPE(e,"number",t)}function EI(t,e,i){if(Math.floor(t)!==t)throw ET(t,i),new ES.ERR_OUT_OF_RANGE(i||"offset","an integer",t);if(e<0)throw new ES.ERR_BUFFER_OUT_OF_BOUNDS;throw new ES.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${e}`,t)}EC("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),EC("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),EC("ERR_OUT_OF_RANGE",function(t,e,i){let n=`The value of "${t}" is out of range.`,r=i;return Number.isInteger(i)&&Math.abs(i)>4294967296?r=E_(String(i)):"bigint"==typeof i&&(r=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(r=E_(r)),r+="n"),n+=` It must be ${e}. Received ${r}`},RangeError);const ER=/[^+/0-9A-Za-z-_]/g;function EE(t,e){let i;e=e||1/0;let n=t.length,r=null,o=[];for(let a=0;a<n;++a){if((i=t.charCodeAt(a))>55295&&i<57344){if(!r){if(i>56319||a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),r=i;continue}i=(r-55296<<10|i-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return o}function EA(t){return tf(function(t){if((t=(t=t.split("=")[0]).trim().replace(ER,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Ek(t,e,i,n){let r;for(r=0;r<n&&!(r+i>=e.length)&&!(r>=t.length);++r)e[r+i]=t[r];return r}function ED(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}const EO=function(){let t="0123456789abcdef",e=Array(256);for(let i=0;i<16;++i){let n=16*i;for(let r=0;r<16;++r)e[n+r]=t[i]+t[r]}return e}();function EP(t){return"undefined"==typeof BigInt?EL:t}function EL(){throw Error("BigInt not supported")}var EN=Math.round;function EH(t){var e;if(t&&"transparent"!==t){if("string"==typeof t&&t.indexOf("rgba")>-1){var i=R$(t);i&&(t="rgb("+i[0]+","+i[1]+","+i[2]+")",e=i[3])}}else t="none";return{color:t,opacity:null==e?1:e}}function EV(t){return t<1e-4&&t>-.0001}function EB(t){return EN(1e3*t)/1e3}function EF(t){return EN(1e4*t)/1e4}var EW={left:"start",right:"end",center:"middle",middle:"middle"};function Ez(t){return t&&!!t.image}function Ej(t){return Ez(t)||t&&!!t.svgElement}function EU(t){return"linear"===t.type}function EG(t){return"radial"===t.type}function EY(t){return t&&("linear"===t.type||"radial"===t.type)}function EX(t){return"url(#"+t+")"}function E$(t){var e=t.getGlobalScale();return Math.max(Math.ceil(Math.log(Math.max(e[0],e[1]))/Math.log(10)),1)}function EZ(t){var e=t.x||0,i=t.y||0,n=(t.rotation||0)*T3,r=Tz(t.scaleX,1),o=Tz(t.scaleY,1),a=t.skewX||0,s=t.skewY||0,l=[];return(e||i)&&l.push("translate("+e+"px,"+i+"px)"),n&&l.push("rotate("+n+")"),(1!==r||1!==o)&&l.push("scale("+r+","+o+")"),(a||s)&&l.push("skew("+EN(a*T3)+"deg, "+EN(s*T3)+"deg)"),l.join(" ")}var Eq=M9.hasGlobalWindow&&TD(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:function(t){return Ei.from(t).toString("base64")},EK=Array.prototype.slice;function EQ(t,e,i,n){for(var r,o=e.length,a=0;a<o;a++)t[a]=(r=e[a],(i[a]-r)*n+r);return t}function EJ(t,e,i,n){for(var r=e.length,o=0;o<r;o++)t[o]=e[o]+i[o]*n;return t}function E0(t,e,i,n){for(var r=e.length,o=r&&e[0].length,a=0;a<r;a++){t[a]||(t[a]=[]);for(var s=0;s<o;s++)t[a][s]=e[a][s]+i[a][s]*n}return t}function E1(t){if(TC(t)){var e=t.length;if(TC(t[0])){for(var i=[],n=0;n<e;n++)i.push(EK.call(t[n]));return i}return EK.call(t)}return t}function E2(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=null==t[3]?1:t[3],"rgba("+t.join(",")+")"}function E5(t){return 4===t||5===t}function E3(t){return 1===t||2===t}var E4=[0,0,0,0],E6=function(){function t(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(t,e,i){this._needsSort=!0;var n=this.keyframes,r=n.length,o=!1,a=6,s=e;if(TC(e)){var l=TC(e&&e[0])?2:1;a=l,(1!==l||TL(e[0]))&&(2!==l||TL(e[0][0]))||(o=!0)}else if(TL(e)&&!(e!=e))a=0;else if(TO(e)){if(isNaN(+e)){var h=R$(e);h&&(s=h,a=3)}else a=0}else if(TF(e)){var u=Tw({},s);u.colorStops=TM(e.colorStops,function(t){return{offset:t.offset,color:R$(t.color)}}),EU(e)?a=4:EG(e)&&(a=5),s=u}0===r?this.valType=a:(a!==this.valType||6===a)&&(o=!0),this.discrete=this.discrete||o;var c={time:t,value:s,rawValue:e,percent:0};return i&&(c.easing=i,c.easingFunc=TD(i)?i:Ru[i]||RD(i)),n.push(c),c},t.prototype.prepare=function(t,e){var i=this.keyframes;this._needsSort&&i.sort(function(t,e){return t.time-e.time});for(var n=this.valType,r=i.length,o=i[r-1],a=this.discrete,s=E3(n),l=E5(n),h=0;h<r;h++){var u=i[h],c=u.value,d=o.value;u.percent=u.time/t,!a&&(s&&h!==r-1?function(t,e,i){if(t.push&&e.push){var n=t.length,r=e.length;if(n!==r){if(n>r)t.length=r;else for(var o=n;o<r;o++)t.push(1===i?e[o]:EK.call(e[o]))}for(var a=t[0]&&t[0].length,o=0;o<t.length;o++)if(1===i)isNaN(t[o])&&(t[o]=e[o]);else for(var s=0;s<a;s++)isNaN(t[o][s])&&(t[o][s]=e[o][s])}}(c,d,n):l&&function(t,e){for(var i=t.length,n=e.length,r=i>n?e:t,o=Math.min(i,n),a=r[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(i,n);s++)r.push({offset:a.offset,color:a.color.slice()})}(c.colorStops,d.colorStops))}if(!a&&5!==n&&e&&this.needsAnimate()&&e.needsAnimate()&&n===e.valType&&!e._finished){this._additiveTrack=e;for(var p=i[0].value,h=0;h<r;h++)0===n?i[h].additiveValue=i[h].value-p:3===n?i[h].additiveValue=EJ([],i[h].value,p,-1):E3(n)&&(i[h].additiveValue=1===n?EJ([],i[h].value,p,-1):E0([],i[h].value,p,-1))}},t.prototype.step=function(t,e){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var i,n,r,o=null!=this._additiveTrack,a=o?"additiveValue":"value",s=this.valType,l=this.keyframes,h=l.length,u=this.propName,c=3===s,d=this._lastFr,p=Math.min;if(1===h)n=r=l[0];else{if(e<0)i=0;else if(e<this._lastFrP){for(i=p(d+1,h-1);i>=0&&!(l[i].percent<=e);i--);i=p(i,h-2)}else{for(i=d;i<h&&!(l[i].percent>e);i++);i=p(i-1,h-2)}r=l[i+1],n=l[i]}if(n&&r){this._lastFr=i,this._lastFrP=e;var f=r.percent-n.percent,g=0===f?1:p((e-n.percent)/f,1);r.easingFunc&&(g=r.easingFunc(g));var m=o?this._additiveValue:c?E4:t[u];if((E3(s)||c)&&!m&&(m=this._additiveValue=[]),this.discrete)t[u]=g<1?n.rawValue:r.rawValue;else if(E3(s))1===s?EQ(m,n[a],r[a],g):function(t,e,i,n){for(var r=e.length,o=r&&e[0].length,a=0;a<r;a++){t[a]||(t[a]=[]);for(var s,l=0;l<o;l++)t[a][l]=(s=e[a][l],(i[a][l]-s)*n+s)}return t}(m,n[a],r[a],g);else if(E5(s)){var y,w,b,x,S,C=n[a],_=r[a],M=4===s;(t[u]={type:M?"linear":"radial",x:(y=C.x,(_.x-y)*g+y),y:(w=C.y,(_.y-w)*g+w),colorStops:TM(C.colorStops,function(t,e){var i,n=_.colorStops[e];return{offset:(i=t.offset,(n.offset-i)*g+i),color:E2(EQ([],t.color,n.color,g))}}),global:_.global},M)?(t[u].x2=(b=C.x2,(_.x2-b)*g+b),t[u].y2=(x=C.y2,(_.y2-x)*g+x)):t[u].r=(S=C.r,(_.r-S)*g+S)}else if(c)EQ(m,n[a],r[a],g),o||(t[u]=E2(m));else{var T,I=(T=n[a],(r[a]-T)*g+T);o?this._additiveValue=I:t[u]=I}o&&this._addToTarget(t)}}},t.prototype._addToTarget=function(t){var e=this.valType,i=this.propName,n=this._additiveValue;0===e?t[i]=t[i]+n:3===e?(R$(t[i],E4),EJ(E4,E4,n,1),t[i]=E2(E4)):1===e?EJ(t[i],t[i],n,1):2===e&&E0(t[i],t[i],n,1)},t}(),E8=function(){function t(t,e,i,n){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=e,e&&n){Tg("Can' use additive animation on looped animation.");return}this._additiveAnimators=n,this._allowDiscrete=i}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(t){this._target=t},t.prototype.when=function(t,e,i){return this.whenWithKeys(t,e,TR(e),i)},t.prototype.whenWithKeys=function(t,e,i,n){for(var r=this._tracks,o=0;o<i.length;o++){var a=i[o],s=r[a];if(!s){s=r[a]=new E6(a);var l=void 0,h=this._getAdditiveTrack(a);if(h){var u=h.keyframes,c=u[u.length-1];l=c&&c.value,3===h.valType&&l&&(l=E2(l))}else l=this._target[a];if(null==l)continue;t>0&&s.addKeyframe(0,E1(l),n),this._trackKeys.push(a)}s.addKeyframe(t,E1(e[a]),n)}return this._maxTime=Math.max(this._maxTime,t),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var e=t.length,i=0;i<e;i++)t[i].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,e=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,e)for(var i=0;i<e.length;i++)e[i].call(this)},t.prototype._setTracksFinished=function(){for(var t=this._tracks,e=this._trackKeys,i=0;i<e.length;i++)t[e[i]].setFinished()},t.prototype._getAdditiveTrack=function(t){var e,i=this._additiveAnimators;if(i)for(var n=0;n<i.length;n++){var r=i[n].getTrack(t);r&&(e=r)}return e},t.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var e=this,i=[],n=this._maxTime||0,r=0;r<this._trackKeys.length;r++){var o=this._trackKeys[r],a=this._tracks[o],s=this._getAdditiveTrack(o),l=a.keyframes,h=l.length;if(a.prepare(n,s),a.needsAnimate()){if(!this._allowDiscrete&&a.discrete){var u=l[h-1];u&&(e._target[a.propName]=u.rawValue),a.setFinished()}else i.push(a)}}if(i.length||this._force){var c=new RO({life:n,loop:this._loop,delay:this._delay||0,onframe:function(t){e._started=2;var n=e._additiveAnimators;if(n){for(var r=!1,o=0;o<n.length;o++)if(n[o]._clip){r=!0;break}r||(e._additiveAnimators=null)}for(var o=0;o<i.length;o++)i[o].step(e._target,t);var a=e._onframeCbs;if(a)for(var o=0;o<a.length;o++)a[o](e._target,t)},ondestroy:function(){e._doneCallback()}});this._clip=c,this.animation&&this.animation.addClip(c),t&&c.setEasing(t)}else this._doneCallback();return this}},t.prototype.stop=function(t){if(this._clip){var e=this._clip;t&&e.onframe(1),this._abortedCallback()}},t.prototype.delay=function(t){return this._delay=t,this},t.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},t.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},t.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(t){return this._tracks[t]},t.prototype.getTracks=function(){var t=this;return TM(this._trackKeys,function(e){return t._tracks[e]})},t.prototype.stopTracks=function(t,e){if(!t.length||!this._clip)return!0;for(var i=this._tracks,n=this._trackKeys,r=0;r<t.length;r++){var o=i[t[r]];o&&!o.isFinished()&&(e?o.step(this._target,1):1===this._started&&o.step(this._target,0),o.setFinished())}for(var a=!0,r=0;r<n.length;r++)if(!i[n[r]].isFinished()){a=!1;break}return a&&this._abortedCallback(),a},t.prototype.saveTo=function(t,e,i){if(t){e=e||this._trackKeys;for(var n=0;n<e.length;n++){var r=e[n],o=this._tracks[r];if(!(!o||o.isFinished())){var a=o.keyframes,s=a[i?0:a.length-1];s&&(t[r]=E1(s.rawValue))}}}},t.prototype.__changeFinalValue=function(t,e){e=e||TR(t);for(var i=0;i<e.length;i++){var n=e[i],r=this._tracks[n];if(r){var o=r.keyframes;if(o.length>1){var a=o.pop();r.addKeyframe(a.time,t[n]),r.prepare(this._maxTime,r.getAdditiveTrack())}}}},t}();function E9(){return new Date().getTime()}var E7=function(t){function e(e){var i=t.call(this)||this;return i._running=!1,i._time=0,i._pausedTime=0,i._pauseStart=0,i._paused=!1,e=e||{},i.stage=e.stage||{},i}return T6(e,t),e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var e=t.getClip();e&&this.addClip(e)},e.prototype.removeClip=function(t){if(t.animation){var e=t.prev,i=t.next;e?e.next=i:this._head=i,i?i.prev=e:this._tail=e,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var e=t.getClip();e&&this.removeClip(e),t.animation=null},e.prototype.update=function(t){for(var e=E9()-this._pausedTime,i=e-this._time,n=this._head;n;){var r=n.next;n.step(e,i)&&(n.ondestroy(),this.removeClip(n)),n=r}this._time=e,!t&&(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0,tp(function e(){t._running&&(tp(e),t._paused||t.update())})},e.prototype.start=function(){this._running||(this._time=E9(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=E9(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=E9()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var e=t.next;t.prev=t.next=t.animation=null,t=e}this._head=this._tail=null},e.prototype.isFinished=function(){return null==this._head},e.prototype.animate=function(t,e){e=e||{},this.start();var i=new E8(t,e.loop);return this.addAnimator(i),i},e}(If),At=M9.domSupported,Ae=(Y={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},X=TM(G=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],function(t){var e=t.replace("mouse","pointer");return Y.hasOwnProperty(e)?e:t}),{mouse:G,touch:["touchstart","touchend","touchmove"],pointer:X}),Ai={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},An=!1;function Ar(t){var e=t.pointerType;return"pen"===e||"touch"===e}function Ao(t){t&&(t.zrByTouch=!0)}function Aa(t,e){for(var i=e,n=!1;i&&9!==i.nodeType&&!(n=i.domBelongToZr||i!==e&&i===t.painterRoot);)i=i.parentNode;return n}var As=function(t,e){this.stopPropagation=T5,this.stopImmediatePropagation=T5,this.preventDefault=T5,this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY},Al={mousedown:function(t){t=Ik(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=Ik(this.dom,t);var e=this.__mayPointerCapture;e&&(t.zrX!==e[0]||t.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=Ik(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){Aa(this,(t=Ik(this.dom,t)).toElement||t.relatedTarget)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){An=!0,t=Ik(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){An||(t=Ik(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){Ao(t=Ik(this.dom,t)),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),Al.mousemove.call(this,t),Al.mousedown.call(this,t)},touchmove:function(t){Ao(t=Ik(this.dom,t)),this.handler.processGesture(t,"change"),Al.mousemove.call(this,t)},touchend:function(t){Ao(t=Ik(this.dom,t)),this.handler.processGesture(t,"end"),Al.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<300&&Al.click.call(this,t)},pointerdown:function(t){Al.mousedown.call(this,t)},pointermove:function(t){Ar(t)||Al.mousemove.call(this,t)},pointerup:function(t){Al.mouseup.call(this,t)},pointerout:function(t){Ar(t)||Al.mouseout.call(this,t)}};T_(["click","dblclick","contextmenu"],function(t){Al[t]=function(e){e=Ik(this.dom,e),this.trigger(t,e)}});var Ah={pointermove:function(t){Ar(t)||Ah.mousemove.call(this,t)},pointerup:function(t){Ah.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function Au(t,e,i,n){t.mounted[e]=i,t.listenerOpts[e]=n,ID(t.domTarget,e,i,n)}function Ac(t){var e=t.mounted;for(var i in e)e.hasOwnProperty(i)&&function(t,e,i,n){t.removeEventListener(e,i,n)}(t.domTarget,i,e[i],t.listenerOpts[i]);t.mounted={}}var Ad=function(t,e){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=e},Ap=function(t){function e(e,i){var n,r,o=t.call(this)||this;return o.__pointerCapturing=!1,o.dom=e,o.painterRoot=i,o._localHandlerScope=new Ad(e,Al),At&&(o._globalHandlerScope=new Ad(document,Ah)),r=(n=o._localHandlerScope).domHandlers,M9.pointerEventsSupported?T_(Ae.pointer,function(t){Au(n,t,function(e){r[t].call(o,e)})}):(M9.touchEventsSupported&&T_(Ae.touch,function(t){Au(n,t,function(e){r[t].call(o,e),n.touching=!0,null!=n.touchTimer&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)})}),T_(Ae.mouse,function(t){Au(n,t,function(e){e=IA(e),n.touching||r[t].call(o,e)})})),o}return T6(e,t),e.prototype.dispose=function(){Ac(this._localHandlerScope),At&&Ac(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,At&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var e=this._globalHandlerScope;t?function(t,e){M9.pointerEventsSupported?T_(Ai.pointer,i):M9.touchEventsSupported||T_(Ai.mouse,i);function i(i){Au(e,i,function(n){if(!Aa(t,(n=IA(n)).target)){var r;r=n,n=Ik(t.dom,new As(t,r),!0),e.domHandlers[i].call(t,n)}},{capture:!0})}}(this,e):Ac(e)}},e}(If),Af=1;M9.hasGlobalWindow&&(Af=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Ag=Af,Am="#333",Ay="#ccc";function Av(t){return t>5e-5||t<-.00005}var Aw=[],Ab=[],Ax=IV(),AS=Math.abs,AC=function(){var t;function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return Av(this.rotation)||Av(this.x)||Av(this.y)||Av(this.scaleX-1)||Av(this.scaleY-1)||Av(this.skewX)||Av(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,e=this.needLocalTransform(),i=this.transform;if(!(e||t)){i&&(IB(i),this.invTransform=null);return}i=i||IV(),e?this.getLocalTransform(i):IB(i),t&&(e?IW(i,t,i):IF(i,t)),this.transform=i,this._resolveGlobalScaleRatio(i)},e.prototype._resolveGlobalScaleRatio=function(t){var e=this.globalScaleRatio;if(null!=e&&1!==e){this.getGlobalScale(Aw);var i=Aw[0]<0?-1:1,n=Aw[1]<0?-1:1,r=((Aw[0]-i)*e+i)/Aw[0]||0,o=((Aw[1]-n)*e+n)/Aw[1]||0;t[0]*=r,t[1]*=r,t[2]*=o,t[3]*=o}this.invTransform=this.invTransform||IV(),IG(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,e=[];t;)e.push(t),t=t.parent;for(;t=e.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],i=t[2]*t[2]+t[3]*t[3],n=Math.atan2(t[1],t[0]),r=Math.PI/2+n-Math.atan2(t[3],t[2]);i=Math.sqrt(i)*Math.cos(r),e=Math.sqrt(e),this.skewX=r,this.skewY=0,this.rotation=-n,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=i,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||IV(),IW(Ab,t.invTransform,e),e=Ab);var i=this.originX,n=this.originY;(i||n)&&(Ax[4]=i,Ax[5]=n,IW(Ab,e,Ax),Ab[4]-=i,Ab[5]-=n,e=Ab),this.setLocalTransform(e)}},e.prototype.getGlobalScale=function(t){var e=this.transform;return(t=t||[],e)?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1])):(t[0]=1,t[1]=1),t},e.prototype.transformCoordToLocal=function(t,e){var i=[t,e],n=this.invTransform;return n&&Ih(i,i,n),i},e.prototype.transformCoordToGlobal=function(t,e){var i=[t,e],n=this.transform;return n&&Ih(i,i,n),i},e.prototype.getLineScale=function(){var t=this.transform;return t&&AS(t[0]-1)>1e-10&&AS(t[3]-1)>1e-10?Math.sqrt(AS(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){AM(this,t)},e.getLocalTransform=function(t,e){e=e||[];var i=t.originX||0,n=t.originY||0,r=t.scaleX,o=t.scaleY,a=t.anchorX,s=t.anchorY,l=t.rotation||0,h=t.x,u=t.y,c=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(i||n||a||s){var p=i+a,f=n+s;e[4]=-p*r-c*f*o,e[5]=-f*o-d*p*r}else e[4]=e[5]=0;return e[0]=r,e[3]=o,e[1]=d*r,e[2]=c*o,l&&Ij(e,e,l),e[4]+=i+h,e[5]+=n+u,e},e.initDefaultProps=void((t=e.prototype).scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0),e}(),A_=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function AM(t,e){for(var i=0;i<A_.length;i++){var n=A_[i];t[n]=e[n]}}var AT={};function AI(t,e){var i=AT[e=e||Tt];i||(i=AT[e]=new RN(500));var n=i.get(t);return null==n&&(n=Ti.measureText(t,e).width,i.put(t,n)),n}function AR(t,e,i,n){var r=AI(t,e),o=AD(e);return new I1(AA(0,r,i),Ak(0,o,n),r,o)}function AE(t,e,i,n){var r=((t||"")+"").split("\n");if(1===r.length)return AR(r[0],e,i,n);for(var o=new I1(0,0,0,0),a=0;a<r.length;a++){var s=AR(r[a],e,i,n);0===a?o.copy(s):o.union(s)}return o}function AA(t,e,i){return"right"===i?t-=e:"center"===i&&(t-=e/2),t}function Ak(t,e,i){return"middle"===i?t-=e/2:"bottom"===i&&(t-=e),t}function AD(t){return AI("",t)}function AO(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function AP(t,e,i){var n=e.position||"inside",r=null!=e.distance?e.distance:5,o=i.height,a=i.width,s=o/2,l=i.x,h=i.y,u="left",c="top";if(n instanceof Array)l+=AO(n[0],i.width),h+=AO(n[1],i.height),u=null,c=null;else switch(n){case"left":l-=r,h+=s,u="right",c="middle";break;case"right":l+=r+a,h+=s,c="middle";break;case"top":l+=a/2,h-=r,u="center",c="bottom";break;case"bottom":l+=a/2,h+=o+r,u="center";break;case"inside":l+=a/2,h+=s,u="center",c="middle";break;case"insideLeft":l+=r,h+=s,c="middle";break;case"insideRight":l+=a-r,h+=s,u="right",c="middle";break;case"insideTop":l+=a/2,h+=r,u="center";break;case"insideBottom":l+=a/2,h+=o-r,u="center",c="bottom";break;case"insideTopLeft":l+=r,h+=r;break;case"insideTopRight":l+=a-r,h+=r,u="right";break;case"insideBottomLeft":l+=r,h+=o-r,c="bottom";break;case"insideBottomRight":l+=a-r,h+=o-r,u="right",c="bottom"}return(t=t||{}).x=l,t.y=h,t.align=u,t.verticalAlign=c,t}var AL="__zr_normal__",AN=A_.concat(["ignore"]),AH=TT(A_,function(t,e){return t[e]=!0,t},{ignore:!1}),AV={},AB=new I1(0,0,0,0),AF=function(){function t(t){this.id=Tf++,this.animators=[],this.currentStates=[],this.states={},this._init(t)}return t.prototype._init=function(t){this.attr(t)},t.prototype.drift=function(t,e,i){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=e,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(t){var e=this._textContent;if(e&&(!e.ignore||t)){this.textConfig||(this.textConfig={});var i=this.textConfig,n=i.local,r=e.innerTransformable,o=void 0,a=void 0,s=!1;r.parent=n?this:null;var l=!1;if(r.copyTransform(e),null!=i.position){i.layoutRect?AB.copy(i.layoutRect):AB.copy(this.getBoundingRect()),n||AB.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(AV,i,AB):AP(AV,i,AB),r.x=AV.x,r.y=AV.y,o=AV.align,a=AV.verticalAlign;var h=i.origin;if(h&&null!=i.rotation){var u=void 0,c=void 0;"center"===h?(u=.5*AB.width,c=.5*AB.height):(u=AO(h[0],AB.width),c=AO(h[1],AB.height)),l=!0,r.originX=-r.x+u+(n?0:AB.x),r.originY=-r.y+c+(n?0:AB.y)}}null!=i.rotation&&(r.rotation=i.rotation);var d=i.offset;d&&(r.x+=d[0],r.y+=d[1],l||(r.originX=-d[0],r.originY=-d[1]));var p=null==i.inside?"string"==typeof i.position&&i.position.indexOf("inside")>=0:i.inside,f=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),g=void 0,m=void 0,y=void 0;p&&this.canBeInsideText()?(g=i.insideFill,m=i.insideStroke,(null==g||"auto"===g)&&(g=this.getInsideTextFill()),(null==m||"auto"===m)&&(m=this.getInsideTextStroke(g),y=!0)):(g=i.outsideFill,m=i.outsideStroke,(null==g||"auto"===g)&&(g=this.getOutsideFill()),(null==m||"auto"===m)&&(m=this.getOutsideStroke(g),y=!0)),((g=g||"#000")!==f.fill||m!==f.stroke||y!==f.autoStroke||o!==f.align||a!==f.verticalAlign)&&(s=!0,f.fill=g,f.stroke=m,f.autoStroke=y,f.align=o,f.verticalAlign=a,e.setDefaultTextStyle(f)),e.__dirty|=1,s&&e.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(t){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?Ay:Am},t.prototype.getOutsideStroke=function(t){var e=this.__zr&&this.__zr.getBackgroundColor(),i="string"==typeof e&&R$(e);i||(i=[255,255,255,1]);for(var n=i[3],r=this.__zr.isDarkMode(),o=0;o<3;o++)i[o]=i[o]*n+(r?0:255)*(1-n);return i[3]=1,R0(i,"rgba")},t.prototype.traverse=function(t,e){},t.prototype.attrKV=function(t,e){"textConfig"===t?this.setTextConfig(e):"textContent"===t?this.setTextContent(e):"clipPath"===t?this.setClipPath(e):"extra"===t?(this.extra=this.extra||{},Tw(this.extra,e)):this[t]=e},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(TN(t))for(var i=TR(t),n=0;n<i.length;n++){var r=i[n];this.attrKV(r,t[r])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var e=this._normalState,i=0;i<this.animators.length;i++){var n=this.animators[i],r=n.__fromStateTransition;if(!n.getLoop()&&(!r||r===AL)){var o=n.targetName,a=o?e[o]:e;n.saveTo(a)}}},t.prototype._innerSaveToNormal=function(t){var e=this._normalState;e||(e=this._normalState={}),t.textConfig&&!e.textConfig&&(e.textConfig=this.textConfig),this._savePrimaryToNormal(t,e,AN)},t.prototype._savePrimaryToNormal=function(t,e,i){for(var n=0;n<i.length;n++){var r=i[n];null==t[r]||r in e||(e[r]=this[r])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(t){return this.states[t]},t.prototype.ensureState=function(t){var e=this.states;return e[t]||(e[t]={}),e[t]},t.prototype.clearStates=function(t){this.useState(AL,!1,t)},t.prototype.useState=function(t,e,i,n){var r,o=t===AL;if(this.hasState()||!o){var a=this.currentStates,s=this.stateTransition;if(!(Tx(a,t)>=0)||!e&&1!==a.length){if(this.stateProxy&&!o&&(r=this.stateProxy(t)),r||(r=this.states&&this.states[t]),!r&&!o){Tg("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(r);var l=!!(r&&r.hoverLayer||n);l&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,r,this._normalState,e,!i&&!this.__inHover&&s&&s.duration>0,s);var h=this._textContent,u=this._textGuide;return h&&h.useState(t,e,i,l),u&&u.useState(t,e,i,l),o?(this.currentStates=[],this._normalState={}):e?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!l&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),r}}},t.prototype.useStates=function(t,e,i){if(t.length){var n=[],r=this.currentStates,o=t.length,a=o===r.length;if(a){for(var s=0;s<o;s++)if(t[s]!==r[s]){a=!1;break}}if(!a){for(var s=0;s<o;s++){var l=t[s],h=void 0;this.stateProxy&&(h=this.stateProxy(l,t)),h||(h=this.states[l]),h&&n.push(h)}var u=n[o-1],c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(n),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!e&&!this.__inHover&&p&&p.duration>0,p);var f=this._textContent,g=this._textGuide;f&&f.useStates(t,e,c),g&&g.useStates(t,e,c),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}}else this.clearStates()},t.prototype.isSilent=function(){for(var t=this.silent,e=this.parent;!t&&e;){if(e.silent){t=!0;break}e=e.parent}return t},t.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var e=this.animators[t];e.targetName&&e.changeTarget(this[e.targetName])}},t.prototype.removeState=function(t){var e=Tx(this.currentStates,t);if(e>=0){var i=this.currentStates.slice();i.splice(e,1),this.useStates(i)}},t.prototype.replaceState=function(t,e,i){var n=this.currentStates.slice(),r=Tx(n,t),o=Tx(n,e)>=0;r>=0?o?n.splice(r,1):n[r]=e:i&&!o&&n.push(e),this.useStates(n)},t.prototype.toggleState=function(t,e){e?this.useState(t,!0):this.removeState(t)},t.prototype._mergeStates=function(t){for(var e,i={},n=0;n<t.length;n++){var r=t[n];Tw(i,r),r.textConfig&&Tw(e=e||{},r.textConfig)}return e&&(i.textConfig=e),i},t.prototype._applyStateObj=function(t,e,i,n,r,o){var a=!(e&&n);e&&e.textConfig?(this.textConfig=Tw({},n?this.textConfig:i.textConfig),Tw(this.textConfig,e.textConfig)):a&&i.textConfig&&(this.textConfig=i.textConfig);for(var s={},l=!1,h=0;h<AN.length;h++){var u=AN[h],c=r&&AH[u];e&&null!=e[u]?c?(l=!0,s[u]=e[u]):this[u]=e[u]:a&&null!=i[u]&&(c?(l=!0,s[u]=i[u]):this[u]=i[u])}if(!r)for(var h=0;h<this.animators.length;h++){var d=this.animators[h],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(e||i)[p]:e||i)}l&&this._transitionState(t,s,o)},t.prototype._attachComponent=function(t){if((!t.__zr||t.__hostTarget)&&t!==this){var e=this.__zr;e&&t.addSelfToZr(e),t.__zr=e,t.__hostTarget=this}},t.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},t.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(t){var e=this._textContent;e!==t&&(e&&e!==t&&this.removeTextContent(),t.innerTransformable=new AC,this._attachComponent(t),this._textContent=t,this.markRedraw())},t.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),Tw(this.textConfig,t),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=1;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var e=this._textContent,i=this._textGuide;e&&(e.__inHover=t),i&&(i.__inHover=t)},t.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.addAnimator(e[i]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},t.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.removeAnimator(e[i]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},t.prototype.animate=function(t,e,i){var n=new E8(t?this[t]:this,e,i);return t&&(n.targetName=t),this.addAnimator(n,t),n},t.prototype.addAnimator=function(t,e){var i=this.__zr,n=this;t.during(function(){n.updateDuringAnimation(e)}).done(function(){var e=n.animators,i=Tx(e,t);i>=0&&e.splice(i,1)}),this.animators.push(t),i&&i.animation.addAnimator(t),i&&i.wakeUp()},t.prototype.updateDuringAnimation=function(t){this.markRedraw()},t.prototype.stopAnimation=function(t,e){for(var i=this.animators,n=i.length,r=[],o=0;o<n;o++){var a=i[o];t&&t!==a.scope?r.push(a):a.stop(e)}return this.animators=r,this},t.prototype.animateTo=function(t,e,i){AW(this,t,e,i)},t.prototype.animateFrom=function(t,e,i){AW(this,t,e,i,!0)},t.prototype._transitionState=function(t,e,i,n){for(var r=AW(this,e,i,n),o=0;o<r.length;o++)r[o].__fromStateTransition=t},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var e=t.prototype;function i(t,i,n,r){Object.defineProperty(e,t,{get:function(){return this[i]||o(this,this[i]=[]),this[i]},set:function(t){this[n]=t[0],this[r]=t[1],this[i]=t,o(this,t)}});function o(t,e){Object.defineProperty(e,0,{get:function(){return t[n]},set:function(e){t[n]=e}}),Object.defineProperty(e,1,{get:function(){return t[r]},set:function(e){t[r]=e}})}}e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=1,Object.defineProperty&&(i("position","_legacyPos","x","y"),i("scale","_legacyScale","scaleX","scaleY"),i("origin","_legacyOrigin","originX","originY"))}(),t}();function AW(t,e,i,n,r){var o=[];!function t(e,i,n,r,o,a,s,l){for(var h=TR(r),u=o.duration,c=o.delay,d=o.additive,p=o.setToFinal,f=!TN(a),g=e.animators,m=[],y=0;y<h.length;y++){var w=h[y],b=r[w];if(null!=b&&null!=n[w]&&(f||a[w])){if(!TN(b)||TC(b)||TF(b))m.push(w);else{if(i){l||(n[w]=b,e.updateDuringAnimation(i));continue}t(e,w,n[w],b,o,a&&a[w],s,l)}}else l||(n[w]=b,e.updateDuringAnimation(i),m.push(w))}var x=m.length;if(!d&&x)for(var S=0;S<g.length;S++){var C=g[S];if(C.targetName===i&&C.stopTracks(m)){var _=Tx(g,C);g.splice(_,1)}}if(o.force||(x=(m=TI(m,function(t){var e,i;return!((e=r[t])===(i=n[t])||TC(e)&&TC(i)&&function(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}(e,i))})).length),x>0||o.force&&!s.length){var M=void 0,T=void 0,I=void 0;if(l){T={},p&&(M={});for(var S=0;S<x;S++){var w=m[S];T[w]=n[w],p?M[w]=r[w]:n[w]=r[w]}}else if(p){I={};for(var S=0;S<x;S++){var w=m[S];I[w]=E1(n[w]),function(t,e,i){if(TC(e[i])){if(TC(t[i])||(t[i]=[]),TV(e[i])){var n=e[i].length;t[i].length!==n&&(t[i]=new e[i].constructor(n),Az(t[i],e[i],n))}else{var r=e[i],o=t[i],a=r.length;if(TC(r[0]))for(var s=r[0].length,l=0;l<a;l++)o[l]?Az(o[l],r[l],s):o[l]=Array.prototype.slice.call(r[l]);else Az(o,r,a);o.length=r.length}}else t[i]=e[i]}(n,r,w)}}var C=new E8(n,!1,!1,d?TI(g,function(t){return t.targetName===i}):null);C.targetName=i,o.scope&&(C.scope=o.scope),p&&M&&C.whenWithKeys(0,M,m),I&&C.whenWithKeys(0,I,m),C.whenWithKeys(null==u?500:u,l?T:r,m).delay(c||0),e.addAnimator(C,i),s.push(C)}}(t,"",t,e,i=i||{},n,o,r);var a=o.length,s=!1,l=i.done,h=i.aborted,u=function(){s=!0,--a<=0&&(s?l&&l():h&&h())},c=function(){--a<=0&&(s?l&&l():h&&h())};!a&&l&&l(),o.length>0&&i.during&&o[0].during(function(t,e){i.during(e)});for(var d=0;d<o.length;d++){var p=o[d];u&&p.done(u),c&&p.aborted(c),i.force&&p.duration(i.duration),p.start(i.easing)}return o}function Az(t,e,i){for(var n=0;n<i;n++)t[n]=e[n]}TS(AF,If),TS(AF,AC);var Aj=function(t){function e(e){var i=t.call(this)||this;return i.isGroup=!0,i._children=[],i.attr(e),i}return T6(e,t),e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var e=this._children,i=0;i<e.length;i++)if(e[i].name===t)return e[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var i=this._children,n=i.indexOf(e);n>=0&&(i.splice(n,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,e){var i=Tx(this._children,t);return i>=0&&this.replaceAt(e,i),this},e.prototype.replaceAt=function(t,e){var i=this._children,n=i[e];if(t&&t!==this&&t.parent!==this&&t!==n){i[e]=t,n.parent=null;var r=this.__zr;r&&n.removeSelfFromZr(r),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__zr;e&&e!==t.__zr&&t.addSelfToZr(e),e&&e.refresh()},e.prototype.remove=function(t){var e=this.__zr,i=this._children,n=Tx(i,t);return n<0||(i.splice(n,1),t.parent=null,e&&t.removeSelfFromZr(e),e&&e.refresh()),this},e.prototype.removeAll=function(){for(var t=this._children,e=this.__zr,i=0;i<t.length;i++){var n=t[i];e&&n.removeSelfFromZr(e),n.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,e){for(var i=this._children,n=0;n<i.length;n++){var r=i[n];t.call(e,r,n)}return this},e.prototype.traverse=function(t,e){for(var i=0;i<this._children.length;i++){var n=this._children[i],r=t.call(e,n);n.isGroup&&!r&&n.traverse(t,e)}return this},e.prototype.addSelfToZr=function(e){t.prototype.addSelfToZr.call(this,e);for(var i=0;i<this._children.length;i++)this._children[i].addSelfToZr(e)},e.prototype.removeSelfFromZr=function(e){t.prototype.removeSelfFromZr.call(this,e);for(var i=0;i<this._children.length;i++)this._children[i].removeSelfFromZr(e)},e.prototype.getBoundingRect=function(t){for(var e=new I1(0,0,0,0),i=t||this._children,n=[],r=null,o=0;o<i.length;o++){var a=i[o];if(!a.ignore&&!a.invisible){var s=a.getBoundingRect(),l=a.getLocalTransform(n);l?(I1.applyTransform(e,s,l),(r=r||e.clone()).union(e)):(r=r||s.clone()).union(s)}}return r||e},e}(AF);Aj.prototype.type="group";var AU={},AG={},AY=function(){function t(t,e,i){var n,r=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,i=i||{},this.dom=e,this.id=t;var o=new Rh,a=i.renderer||"canvas";AU[a]||(a=TR(AU)[0]),i.useDirtyRect=null!=i.useDirtyRect&&i.useDirtyRect;var s=new AU[a](e,o,i,t),l=i.ssr||s.ssrOnly;this.storage=o,this.painter=s;var h=M9.node||M9.worker||l?null:new Ap(s.getViewportRoot(),s.root),u=i.useCoarsePointer;(null==u||"auto"===u?M9.touchEventsSupported:!!u)&&(n=Tz(i.pointerSize,44)),this.handler=new I9(o,s,h,s.root,n),this.animation=new E7({stage:{update:l?null:function(){return r._flush(!0)}}}),l||this.animation.start()}return t.prototype.add=function(t){!this._disposed&&t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},t.prototype.remove=function(t){!this._disposed&&t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(t,e){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,e),this.refresh())},t.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=function(t){if(!t)return!1;if("string"==typeof t)return .4>R1(t,1);if(t.colorStops){for(var e=t.colorStops,i=0,n=e.length,r=0;r<n;r++)i+=R1(e[r].color,1);return(i/=n)<.4}return!1}(t))},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(t){this._darkMode=t},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},t.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},t.prototype.flush=function(){this._disposed||this._flush(!1)},t.prototype._flush=function(t){var e,i=E9();this._needsRefresh&&(e=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately());var n=E9();e?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:n-i})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},t.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){!this._disposed&&(this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover())},t.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},t.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},t.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},t.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},t.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},t.prototype.findHover=function(t,e){if(!this._disposed)return this.handler.findHover(t,e)},t.prototype.on=function(t,e,i){return this._disposed||this.handler.on(t,e,i),this},t.prototype.off=function(t,e){this._disposed||this.handler.off(t,e)},t.prototype.trigger=function(t,e){this._disposed||this.handler.trigger(t,e)},t.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),e=0;e<t.length;e++)t[e]instanceof Aj&&t[e].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},t.prototype.dispose=function(){if(!this._disposed){var t;this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,t=this.id,delete AG[t]}},t}();function AX(t,e){var i=new AY(Tf++,t,e);return AG[i.id]=i,i}function A$(t,e,i,n){var r=e[0],o=e[1],a=i[0],s=i[1],l=o-r,h=s-a;if(0===l)return 0===h?a:(a+s)/2;if(n){if(l>0){if(t<=r)return a;if(t>=o)return s}else{if(t>=r)return a;if(t<=o)return s}}else{if(t===r)return a;if(t===o)return s}return(t-r)/l*h+a}function AZ(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return TO(t)?t.replace(/^\s+|\s+$/g,"").match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t}function Aq(t,e,i){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),i?t:+t}function AK(t){return t.sort(function(t,e){return t-e}),t}function AQ(t){if(isNaN(t=+t))return 0;if(t>1e-14){for(var e,i,n,r,o,a=1,s=0;s<15;s++,a*=10)if(Math.round(t*a)/a===t)return s}return n=(i=(e=t.toString().toLowerCase()).indexOf("e"))>0?+e.slice(i+1):0,r=i>0?i:e.length,Math.max(0,((o=e.indexOf("."))<0?0:r-1-o)-n)}function AJ(t,e){var i=Math.log,n=Math.LN10,r=Math.min(Math.max(-Math.floor(i(t[1]-t[0])/n)+Math.round(i(Math.abs(e[1]-e[0]))/n),0),20);return isFinite(r)?r:20}function A0(t){var e=2*Math.PI;return(t%e+e)%e}function A1(t){return t>-.0001&&t<1e-4}var A2=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function A5(t){if(t instanceof Date)return t;if(TO(t)){var e=A2.exec(t);if(!e)return new Date(NaN);if(!e[8])return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0);var i=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(i-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,i,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}return new Date(null==t?NaN:Math.round(t))}function A3(t){if(0===t)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,e)>=10&&e++,e}function A4(t,e){var i=A3(t),n=Math.pow(10,i),r=t/n;return t=(e?r<1.5?1:r<2.5?2:r<4?3:r<7?5:10:r<1?1:r<2?2:r<3?3:r<5?5:10)*n,i>=-20?+t.toFixed(i<0?-i:0):t}function A6(t,e){var i=(t.length-1)*e+1,n=Math.floor(i),r=+t[n-1],o=i-n;return o?r+o*(t[n]-r):r}function A8(t){t.sort(function(t,e){return!function t(e,i,n){return e.interval[n]<i.interval[n]||e.interval[n]===i.interval[n]&&(e.close[n]-i.close[n]==(n?-1:1)||!n&&t(e,i,1))}(t,e,0)?1:-1});for(var e=-1/0,i=1,n=0;n<t.length;){for(var r=t[n].interval,o=t[n].close,a=0;a<2;a++)r[a]<=e&&(r[a]=e,o[a]=a?1:1-i),e=r[a],i=o[a];r[0]===r[1]&&o[0]*o[1]!=1?t.splice(n,1):n++}return t}function A9(t){var e=parseFloat(t);return e==t&&(0!==e||!TO(t)||0>=t.indexOf("x"))?e:NaN}function A7(t){return!isNaN(A9(t))}function kt(){return Math.round(9*Math.random())}function ke(t,e){return null==t?e:null==e?t:t*e/function t(e,i){return 0===i?e:t(i,e%i)}(t,e)}var ki="series\0",kn="\0_ec_\0";function kr(t){return t instanceof Array?t:null==t?[]:[t]}function ko(t,e,i){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var n=0,r=i.length;n<r;n++){var o=i[n];!t.emphasis[e].hasOwnProperty(o)&&t[e].hasOwnProperty(o)&&(t.emphasis[e][o]=t[e][o])}}}var ka=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function ks(t){return!TN(t)||Tk(t)||t instanceof Date?t:t.value}function kl(t,e,i){var n,r,o,a,s="normalMerge"===i,l="replaceMerge"===i,h="replaceAll"===i;t=t||[],e=(e||[]).slice();var u=TQ();T_(e,function(t,i){if(!TN(t)){e[i]=null;return}});var c=function(t,e,i){var n=[];if("replaceAll"===i)return n;for(var r=0;r<t.length;r++){var o=t[r];o&&null!=o.id&&e.set(o.id,r),n.push({existing:"replaceMerge"===i||kp(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return n}(t,u,i);return(s||l)&&(n=t,T_(r=e,function(t,e){if(t&&null!=t.id){var i=ku(t.id),o=u.get(i);if(null!=o){var a=c[o];TY(!a.newOption,'Duplicated option on id "'+i+'".'),a.newOption=t,a.existing=n[o],r[e]=null}}})),s&&T_(o=e,function(t,e){if(t&&null!=t.name)for(var i=0;i<c.length;i++){var n=c[i].existing;if(!c[i].newOption&&n&&(null==n.id||null==t.id)&&!kp(t)&&!kp(n)&&kh("name",n,t)){c[i].newOption=t,o[e]=null;return}}}),s||l?T_(e,function(t){if(t){for(var e,i=0;(e=c[i])&&(e.newOption||kp(e.existing)||e.existing&&null!=t.id&&!kh("id",t,e.existing));)i++;e?(e.newOption=t,e.brandNew=l):c.push({newOption:t,brandNew:l,existing:null,keyInfo:null}),i++}}):h&&T_(e,function(t){c.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})}),a=TQ(),T_(c,function(t){var e=t.existing;e&&a.set(e.id,t)}),T_(c,function(t){var e=t.newOption;TY(!e||null==e.id||!a.get(e.id)||a.get(e.id)===t,"id duplicates: "+(e&&e.id)),e&&null!=e.id&&a.set(e.id,t),t.keyInfo||(t.keyInfo={})}),T_(c,function(t,e){var i=t.existing,n=t.newOption,r=t.keyInfo;if(TN(n)){if(r.name=null!=n.name?ku(n.name):i?i.name:ki+e,i)r.id=ku(i.id);else if(null!=n.id)r.id=ku(n.id);else{var o=0;do r.id="\0"+r.name+"\0"+o++;while(a.get(r.id))}a.set(r.id,t)}}),c}function kh(t,e,i){var n=kc(e[t],null),r=kc(i[t],null);return null!=n&&null!=r&&n===r}function ku(t){return kc(t,"")}function kc(t,e){return null==t?e:TO(t)?t:TL(t)||TP(t)?t+"":e}function kd(t){var e=t.name;return!!(e&&e.indexOf(ki))}function kp(t){return t&&null!=t.id&&0===ku(t.id).indexOf(kn)}function kf(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?Tk(e.dataIndex)?TM(e.dataIndex,function(e){return t.indexOfRawIndex(e)}):t.indexOfRawIndex(e.dataIndex):null!=e.name?Tk(e.name)?TM(e.name,function(e){return t.indexOfName(e)}):t.indexOfName(e.name):void 0}function kg(){var t="__ec_inner_"+km++;return function(e){return e[t]||(e[t]={})}}var km=kt();function ky(t,e,i){var n=kv(e,i),r=n.mainTypeSpecified,o=n.queryOptionMap,a=n.others,s=i?i.defaultMainType:null;return!r&&s&&o.set(s,{}),o.each(function(e,n){var r=kx(t,n,e,{useDefault:s===n,enableAll:!i||null==i.enableAll||i.enableAll,enableNone:!i||null==i.enableNone||i.enableNone});a[n+"Models"]=r.models,a[n+"Model"]=r.models[0]}),a}function kv(t,e){if(TO(t)){var i,n={};n[t+"Index"]=0,i=n}else i=t;var r=TQ(),o={},a=!1;return T_(i,function(t,i){if("dataIndex"===i||"dataIndexInside"===i){o[i]=t;return}var n=i.match(/^(\w+)(Index|Id|Name)$/)||[],s=n[1],l=(n[2]||"").toLowerCase();!s||!l||e&&e.includeMainTypes&&0>Tx(e.includeMainTypes,s)||(a=a||!!s,(r.get(s)||r.set(s,{}))[l]=t)}),{mainTypeSpecified:a,queryOptionMap:r,others:o}}var kw={useDefault:!0,enableAll:!1,enableNone:!1},kb={useDefault:!1,enableAll:!0,enableNone:!0};function kx(t,e,i,n){n=n||kw;var r=i.index,o=i.id,a=i.name,s={models:null,specified:null!=r||null!=o||null!=a};if(!s.specified){var l=void 0;return s.models=n.useDefault&&(l=t.getComponent(e))?[l]:[],s}return"none"===r||!1===r?(TY(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[]):("all"===r&&(TY(n.enableAll,'`"all"` is not a valid value on index option.'),r=o=a=null),s.models=t.queryComponents({mainType:e,index:r,id:o,name:a})),s}function kS(t,e,i){t.setAttribute?t.setAttribute(e,i):t[e]=i}function kC(t,e){var i=TQ(),n=[];return T_(t,function(t){var r=e(t);(i.get(r)||(n.push(r),i.set(r,[]))).push(t)}),{keys:n,buckets:i}}function k_(t,e,i,n,r){var o=null==e||"auto"===e;if(null==n)return n;if(TL(n)){var a,s=(n-(a=i||0))*r+a;return Aq(s,o?Math.max(AQ(i||0),AQ(n)):e)}if(TO(n))return r<1?i:n;for(var l=[],h=Math.max(i?i.length:0,n.length),u=0;u<h;++u){var c=t.getDimensionInfo(u);if(c&&"ordinal"===c.type)l[u]=(r<1&&i?i:n)[u];else{var d=i&&i[u]?i[u]:0,p=n[u],s=(p-d)*r+d;l[u]=Aq(s,o?Math.max(AQ(d),AQ(p)):e)}}return l}var kM="___EC__COMPONENT__CONTAINER___",kT="___EC__EXTENDED_CLASS___";function kI(t){var e={main:"",sub:""};if(t){var i=t.split(".");e.main=i[0]||"",e.sub=i[1]||""}return e}function kR(t,e){t.$constructor=t,t.extend=function(t){var e,i=this;return TD(i)&&/^class\s/.test(Function.prototype.toString.call(i))?e=function(t){function e(){return t.apply(this,arguments)||this}return M6(e,t),e}(i):function(t,e){var i=t.prototype;function n(){}for(var r in n.prototype=e.prototype,t.prototype=new n,i)i.hasOwnProperty(r)&&(t.prototype[r]=i[r]);t.prototype.constructor=t,t.superClass=e}(e=function(){(t.$constructor||i).apply(this,arguments)},this),Tw(e.prototype,t),e[kT]=!0,e.extend=this.extend,e.superCall=kk,e.superApply=kD,e.superClass=i,e}}function kE(t,e){t.extend=e.extend}var kA=Math.round(10*Math.random());function kk(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return this.superClass.prototype[e].apply(t,i)}function kD(t,e,i){return this.superClass.prototype[e].apply(t,i)}function kO(t){var e={};t.registerClass=function(t){var i=t.type||t.prototype.type;if(i){TY(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(i),'componentType "'+i+'" illegal'),t.prototype.type=i;var n,r=kI(i);r.sub?r.sub!==kM&&(((n=e[r.main])&&n[kM]||((n=e[r.main]={})[kM]=!0),n)[r.sub]=t):e[r.main]=t}return t},t.getClass=function(t,i,n){var r=e[t];if(r&&r[kM]&&(r=i?r[i]:null),n&&!r)throw Error(i?"Component "+t+"."+(i||"")+" is used but not imported.":t+".type should be specified.");return r},t.getClassesByMainType=function(t){var i=kI(t),n=[],r=e[i.main];return r&&r[kM]?T_(r,function(t,e){e!==kM&&n.push(t)}):n.push(r),n},t.hasClass=function(t){return!!e[kI(t).main]},t.getAllClassMainTypes=function(){var t=[];return T_(e,function(e,i){t.push(i)}),t},t.hasSubTypes=function(t){var i=e[kI(t).main];return i&&i[kM]}}function kP(t,e){for(var i=0;i<t.length;i++)t[i][1]||(t[i][1]=t[i][0]);return e=e||!1,function(i,n,r){for(var o={},a=0;a<t.length;a++){var s=t[a][1];if(!(n&&Tx(n,s)>=0||r&&0>Tx(r,s))){var l=i.getShallow(s,e);null!=l&&(o[t[a][0]]=l)}}return o}}var kL=kP([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),kN=function(){function t(){}return t.prototype.getAreaStyle=function(t,e){return kL(this,t,e)},t}(),kH=new RN(50);function kV(t,e,i,n,r){if(!t)return e;if("string"!=typeof t)return t;if(e&&e.__zrImageSrc===t||!i)return e;var o=kH.get(t),a={hostEl:i,cb:n,cbPayload:r};return o?kF(e=o.image)||o.pending.push(a):((e=Ti.loadImage(t,kB,kB)).__zrImageSrc=t,kH.put(t,e.__cachedImgObj={image:e,pending:[a]})),e}function kB(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var i=t.pending[e],n=i.cb;n&&n(this,i.cbPayload),i.hostEl.dirty()}t.pending.length=0}function kF(t){return t&&t.width&&t.height}var kW=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function kz(t,e,i,n){var r=Tw({},n=n||{});r.font=e,i=Tz(i,"..."),r.maxIterations=Tz(n.maxIterations,2);var o=r.minChar=Tz(n.minChar,0);r.cnCharWidth=AI("",e);var a=r.ascCharWidth=AI("a",e);r.placeholder=Tz(n.placeholder,"");for(var s=t=Math.max(0,t-1),l=0;l<o&&s>=a;l++)s-=a;var h=AI(i,e);return h>s&&(i="",h=0),s=t-h,r.ellipsis=i,r.ellipsisWidth=h,r.contentWidth=s,r.containerWidth=t,r}function kj(t,e){var i=e.containerWidth,n=e.font,r=e.contentWidth;if(!i)return"";var o=AI(t,n);if(o<=i)return t;for(var a=0;;a++){if(o<=r||a>=e.maxIterations){t+=e.ellipsis;break}var s=0===a?function(t,e,i,n){for(var r=0,o=0,a=t.length;o<a&&r<e;o++){var s=t.charCodeAt(o);r+=0<=s&&s<=127?i:n}return o}(t,r,e.ascCharWidth,e.cnCharWidth):o>0?Math.floor(t.length*r/o):0;o=AI(t=t.substr(0,s),n)}return""===t&&(t=e.placeholder),t}var kU=function(){},kG=function(t){this.tokens=[],t&&(this.tokens=t)},kY=function(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function kX(t,e,i,n,r){var o,a,s=""===e,l=r&&i.rich[r]||{},h=t.lines,u=l.font||i.font,c=!1;if(n){var d=l.padding,p=d?d[1]+d[3]:0;if(null!=l.width&&"auto"!==l.width){var f=AO(l.width,n.width)+p;h.length>0&&f+n.accumWidth>n.width&&(o=e.split("\n"),c=!0),n.accumWidth=f}else{var g=kZ(e,u,n.width,n.breakAll,n.accumWidth);n.accumWidth=g.accumWidth+p,a=g.linesWidths,o=g.lines}}else o=e.split("\n");for(var m=0;m<o.length;m++){var y=o[m],w=new kU;if(w.styleName=r,w.text=y,w.isLineHolder=!y&&!s,"number"==typeof l.width?w.width=l.width:w.width=a?a[m]:AI(y,u),m||c)h.push(new kG([w]));else{var b=(h[h.length-1]||(h[0]=new kG)).tokens,x=b.length;1===x&&b[0].isLineHolder?b[0]=w:(y||!x||s)&&b.push(w)}}}var k$=TT(",&?/;] ".split(""),function(t,e){return t[e]=!0,t},{});function kZ(t,e,i,n,r){for(var o=[],a=[],s="",l="",h=0,u=0,c=0;c<t.length;c++){var d=t.charAt(c);if("\n"===d){l&&(s+=l,u+=h),o.push(s),a.push(u),s="",l="",h=0,u=0;continue}var p=AI(d,e),f=!n&&!function(t){var e;return(!((e=t.charCodeAt(0))>=32)||!(e<=591))&&(!(e>=880)||!(e<=4351))&&(!(e>=4608)||!(e<=5119))&&(!(e>=7680)||!(e<=8303))||!!k$[t]}(d);if(o.length?u+p>i:r+u+p>i){u?(s||l)&&(f?(s||(s=l,l="",u=h=0),o.push(s),a.push(u-h),l+=d,h+=p,s="",u=h):(l&&(s+=l,l="",h=0),o.push(s),a.push(u),s=d,u=p)):f?(o.push(l),a.push(h),l=d,h=p):(o.push(d),a.push(p));continue}u+=p,f?(l+=d,h+=p):(l&&(s+=l,l="",h=0),s+=d)}return o.length||s||(s=t,l="",h=0),l&&(s+=l),s&&(o.push(s),a.push(u)),1===o.length&&(u+=r),{accumWidth:u,lines:o,linesWidths:a}}var kq="__zr_style_"+Math.round(10*Math.random()),kK={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},kQ={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};kK[kq]=!0;var kJ=["z","z2","invisible"],k0=["invisible"],k1=function(t){var e;function i(e){return t.call(this,e)||this}return T6(i,t),i.prototype._init=function(e){for(var i=TR(e),n=0;n<i.length;n++){var r=i[n];"style"===r?this.useStyle(e[r]):t.prototype.attrKV.call(this,r,e[r])}this.style||this.useStyle({})},i.prototype.beforeBrush=function(){},i.prototype.afterBrush=function(){},i.prototype.innerBeforeBrush=function(){},i.prototype.innerAfterBrush=function(){},i.prototype.shouldBePainted=function(t,e,i,n){var r=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&(k2.copy(this.getBoundingRect()),this.transform&&k2.applyTransform(this.transform),k5.width=t,k5.height=e,!k2.intersect(k5))||r&&!r[0]&&!r[3])return!1;if(i&&this.__clipPaths){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(n&&this.parent)for(var a=this.parent;a;){if(a.ignore)return!1;a=a.parent}return!0},i.prototype.contain=function(t,e){return this.rectContain(t,e)},i.prototype.traverse=function(t,e){t.call(e,this)},i.prototype.rectContain=function(t,e){var i=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(i[0],i[1])},i.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var e=this.transform,i=this.getBoundingRect(),n=this.style,r=n.shadowBlur||0,o=n.shadowOffsetX||0,a=n.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new I1(0,0,0,0)),e?I1.applyTransform(t,i,e):t.copy(i),(r||o||a)&&(t.width+=2*r+Math.abs(o),t.height+=2*r+Math.abs(a),t.x=Math.min(t.x,t.x+o-r),t.y=Math.min(t.y,t.y+a-r));var s=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-s),t.y=Math.floor(t.y-s),t.width=Math.ceil(t.width+1+2*s),t.height=Math.ceil(t.height+1+2*s))}return t},i.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new I1(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},i.prototype.getPrevPaintRect=function(){return this._prevPaintRect},i.prototype.animateStyle=function(t){return this.animate("style",t)},i.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():this.markRedraw()},i.prototype.attrKV=function(e,i){"style"!==e?t.prototype.attrKV.call(this,e,i):this.style?this.setStyle(i):this.useStyle(i)},i.prototype.setStyle=function(t,e){return"string"==typeof t?this.style[t]=e:Tw(this.style,t),this.dirtyStyle(),this},i.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=2,this._rect&&(this._rect=null)},i.prototype.dirty=function(){this.dirtyStyle()},i.prototype.styleChanged=function(){return!!(2&this.__dirty)},i.prototype.styleUpdated=function(){this.__dirty&=-3},i.prototype.createStyle=function(t){return T0(kK,t)},i.prototype.useStyle=function(t){t[kq]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},i.prototype.isStyleObject=function(t){return t[kq]},i.prototype._innerSaveToNormal=function(e){t.prototype._innerSaveToNormal.call(this,e);var i=this._normalState;e.style&&!i.style&&(i.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(e,i,kJ)},i.prototype._applyStateObj=function(e,i,n,r,o,a){t.prototype._applyStateObj.call(this,e,i,n,r,o,a);var s,l=!(i&&r);if(i&&i.style?o?r?s=i.style:(s=this._mergeStyle(this.createStyle(),n.style),this._mergeStyle(s,i.style)):(s=this._mergeStyle(this.createStyle(),r?this.style:n.style),this._mergeStyle(s,i.style)):l&&(s=n.style),s){if(o){var h=this.style;if(this.style=this.createStyle(l?{}:h),l)for(var u=TR(h),c=0;c<u.length;c++){var d=u[c];d in s&&(s[d]=s[d],this.style[d]=h[d])}for(var p=TR(s),c=0;c<p.length;c++){var d=p[c];this.style[d]=this.style[d]}this._transitionState(e,{style:s},a,this.getAnimationStyleProps())}else this.useStyle(s)}for(var f=this.__inHover?k0:kJ,c=0;c<f.length;c++){var d=f[c];i&&null!=i[d]?this[d]=i[d]:l&&null!=n[d]&&(this[d]=n[d])}},i.prototype._mergeStates=function(e){for(var i,n=t.prototype._mergeStates.call(this,e),r=0;r<e.length;r++){var o=e[r];o.style&&(i=i||{},this._mergeStyle(i,o.style))}return i&&(n.style=i),n},i.prototype._mergeStyle=function(t,e){return Tw(t,e),t},i.prototype.getAnimationStyleProps=function(){return kQ},i.initDefaultProps=void((e=i.prototype).type="displayable",e.invisible=!1,e.z=0,e.z2=0,e.zlevel=0,e.culling=!1,e.cursor="pointer",e.rectHover=!1,e.incremental=!1,e._rect=null,e.dirtyRectTolerance=0,e.__dirty=3),i}(AF),k2=new I1(0,0,0,0),k5=new I1(0,0,0,0),k3=Math.min,k4=Math.max,k6=Math.sin,k8=Math.cos,k9=2*Math.PI,k7=T8(),Dt=T8(),De=T8();function Di(t,e,i){if(0!==t.length){for(var n=t[0],r=n[0],o=n[0],a=n[1],s=n[1],l=1;l<t.length;l++)r=k3(r,(n=t[l])[0]),o=k4(o,n[0]),a=k3(a,n[1]),s=k4(s,n[1]);e[0]=r,e[1]=a,i[0]=o,i[1]=s}}function Dn(t,e,i,n,r,o){r[0]=k3(t,i),r[1]=k3(e,n),o[0]=k4(t,i),o[1]=k4(e,n)}var Dr=[],Do=[],Da={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Ds=[],Dl=[],Dh=[],Du=[],Dc=[],Dd=[],Dp=Math.min,Df=Math.max,Dg=Math.cos,Dm=Math.sin,Dy=Math.abs,Dv=Math.PI,Dw=2*Dv,Db="undefined"!=typeof Float32Array,Dx=[];function DS(t){return Math.round(t/Dv*1e8)/1e8%2*Dv}function DC(t,e){var i=DS(t[0]);i<0&&(i+=Dw);var n=i-t[0],r=t[1];r+=n,!e&&r-i>=Dw?r=i+Dw:e&&i-r>=Dw?r=i-Dw:!e&&i>r?r=i+(Dw-DS(i-r)):e&&i<r&&(r=i-(Dw-DS(r-i))),t[0]=i,t[1]=r}var D_=function(){var t;function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,e,i){(i=i||0)>0&&(this._ux=Dy(i/Ag/t)||0,this._uy=Dy(i/Ag/e)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,e){return this._drawPendingPt(),this.addData(Da.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},e.prototype.lineTo=function(t,e){var i=Dy(t-this._xi),n=Dy(e-this._yi),r=i>this._ux||n>this._uy;if(this.addData(Da.L,t,e),this._ctx&&r&&this._ctx.lineTo(t,e),r)this._xi=t,this._yi=e,this._pendingPtDist=0;else{var o=i*i+n*n;o>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=e,this._pendingPtDist=o)}return this},e.prototype.bezierCurveTo=function(t,e,i,n,r,o){return this._drawPendingPt(),this.addData(Da.C,t,e,i,n,r,o),this._ctx&&this._ctx.bezierCurveTo(t,e,i,n,r,o),this._xi=r,this._yi=o,this},e.prototype.quadraticCurveTo=function(t,e,i,n){return this._drawPendingPt(),this.addData(Da.Q,t,e,i,n),this._ctx&&this._ctx.quadraticCurveTo(t,e,i,n),this._xi=i,this._yi=n,this},e.prototype.arc=function(t,e,i,n,r,o){this._drawPendingPt(),Dx[0]=n,Dx[1]=r,DC(Dx,o),n=Dx[0];var a=(r=Dx[1])-n;return this.addData(Da.A,t,e,i,i,n,a,0,o?0:1),this._ctx&&this._ctx.arc(t,e,i,n,r,o),this._xi=Dg(r)*i+t,this._yi=Dm(r)*i+e,this},e.prototype.arcTo=function(t,e,i,n,r){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,e,i,n,r),this},e.prototype.rect=function(t,e,i,n){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,e,i,n),this.addData(Da.R,t,e,i,n),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(Da.Z);var t=this._ctx,e=this._x0,i=this._y0;return t&&t.closePath(),this._xi=e,this._yi=i,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var e=t.length;!(this.data&&this.data.length===e)&&Db&&(this.data=new Float32Array(e));for(var i=0;i<e;i++)this.data[i]=t[i];this._len=e},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var e=t.length,i=0,n=this._len,r=0;r<e;r++)i+=t[r].len();Db&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(var r=0;r<e;r++)for(var o=t[r].data,a=0;a<o.length;a++)this.data[n++]=o[a];this._len=n},e.prototype.addData=function(t,e,i,n,r,o,a,s,l){if(this._saveData){var h=this.data;this._len+arguments.length>h.length&&(this._expandData(),h=this.data);for(var u=0;u<arguments.length;u++)h[this._len++]=arguments[u]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,Db&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){Dh[0]=Dh[1]=Dc[0]=Dc[1]=Number.MAX_VALUE,Du[0]=Du[1]=Dd[0]=Dd[1]=-Number.MAX_VALUE;var t,e=this.data,i=0,n=0,r=0,o=0;for(t=0;t<this._len;){var a=e[t++],s=1===t;switch(s&&(i=e[t],n=e[t+1],r=i,o=n),a){case Da.M:i=r=e[t++],n=o=e[t++],Dc[0]=r,Dc[1]=o,Dd[0]=r,Dd[1]=o;break;case Da.L:Dn(i,n,e[t],e[t+1],Dc,Dd),i=e[t++],n=e[t++];break;case Da.C:(function(t,e,i,n,r,o,a,s,l,h){var u=RC(t,i,r,a,Dr);l[0]=1/0,l[1]=1/0,h[0]=-1/0,h[1]=-1/0;for(var c=0;c<u;c++){var d=Rb(t,i,r,a,Dr[c]);l[0]=k3(d,l[0]),h[0]=k4(d,h[0])}u=RC(e,n,o,s,Do);for(var c=0;c<u;c++){var p=Rb(e,n,o,s,Do[c]);l[1]=k3(p,l[1]),h[1]=k4(p,h[1])}l[0]=k3(t,l[0]),h[0]=k4(t,h[0]),l[0]=k3(a,l[0]),h[0]=k4(a,h[0]),l[1]=k3(e,l[1]),h[1]=k4(e,h[1]),l[1]=k3(s,l[1]),h[1]=k4(s,h[1])})(i,n,e[t++],e[t++],e[t++],e[t++],e[t],e[t+1],Dc,Dd),i=e[t++],n=e[t++];break;case Da.Q:(function(t,e,i,n,r,o,a,s){var l=k4(k3(RR(t,i,r),1),0),h=k4(k3(RR(e,n,o),1),0),u=RT(t,i,r,l),c=RT(e,n,o,h);a[0]=k3(t,r,u),a[1]=k3(e,o,c),s[0]=k4(t,r,u),s[1]=k4(e,o,c)})(i,n,e[t++],e[t++],e[t],e[t+1],Dc,Dd),i=e[t++],n=e[t++];break;case Da.A:var l=e[t++],h=e[t++],u=e[t++],c=e[t++],d=e[t++],p=e[t++]+d;t+=1;var f=!e[t++];s&&(r=Dg(d)*u+l,o=Dm(d)*c+h),function(t,e,i,n,r,o,a,s,l){var h=Math.abs(r-o);if(h%k9<1e-4&&h>1e-4){s[0]=t-i,s[1]=e-n,l[0]=t+i,l[1]=e+n;return}if(k7[0]=k8(r)*i+t,k7[1]=k6(r)*n+e,Dt[0]=k8(o)*i+t,Dt[1]=k6(o)*n+e,Iu(s,k7,Dt),Ic(l,k7,Dt),(r%=k9)<0&&(r+=k9),(o%=k9)<0&&(o+=k9),r>o&&!a?o+=k9:r<o&&a&&(r+=k9),a){var u=o;o=r,r=u}for(var c=0;c<o;c+=Math.PI/2)c>r&&(De[0]=k8(c)*i+t,De[1]=k6(c)*n+e,Iu(s,De,s),Ic(l,De,l))}(l,h,u,c,d,p,f,Dc,Dd),i=Dg(p)*u+l,n=Dm(p)*c+h;break;case Da.R:Dn(r=i=e[t++],o=n=e[t++],r+e[t++],o+e[t++],Dc,Dd);break;case Da.Z:i=r,n=o}Iu(Dh,Dh,Dc),Ic(Du,Du,Dd)}return 0===t&&(Dh[0]=Dh[1]=Du[0]=Du[1]=0),new I1(Dh[0],Dh[1],Du[0]-Dh[0],Du[1]-Dh[1])},e.prototype._calculateLength=function(){var t=this.data,e=this._len,i=this._ux,n=this._uy,r=0,o=0,a=0,s=0;this._pathSegLen||(this._pathSegLen=[]);for(var l=this._pathSegLen,h=0,u=0,c=0;c<e;){var d=t[c++],p=1===c;p&&(r=t[c],o=t[c+1],a=r,s=o);var f=-1;switch(d){case Da.M:r=a=t[c++],o=s=t[c++];break;case Da.L:var g=t[c++],m=t[c++],y=g-r,w=m-o;(Dy(y)>i||Dy(w)>n||c===e-1)&&(f=Math.sqrt(y*y+w*w),r=g,o=m);break;case Da.C:var b=t[c++],x=t[c++],g=t[c++],m=t[c++],S=t[c++],C=t[c++];f=function(t,e,i,n,r,o,a,s,l){for(var h=t,u=e,c=0,d=1;d<=10;d++){var p=.1*d,f=Rb(t,i,r,a,p),g=Rb(e,n,o,s,p),m=f-h,y=g-u;c+=Math.sqrt(m*m+y*y),h=f,u=g}return c}(r,o,b,x,g,m,S,C,0),r=S,o=C;break;case Da.Q:var b=t[c++],x=t[c++],g=t[c++],m=t[c++];f=function(t,e,i,n,r,o,a){for(var s=t,l=e,h=0,u=1;u<=10;u++){var c=.1*u,d=RT(t,i,r,c),p=RT(e,n,o,c),f=d-s,g=p-l;h+=Math.sqrt(f*f+g*g),s=d,l=p}return h}(r,o,b,x,g,m,0),r=g,o=m;break;case Da.A:var _=t[c++],M=t[c++],T=t[c++],I=t[c++],R=t[c++],E=t[c++],A=E+R;c+=1,p&&(a=Dg(R)*T+_,s=Dm(R)*I+M),f=Df(T,I)*Dp(Dw,Math.abs(E)),r=Dg(A)*T+_,o=Dm(A)*I+M;break;case Da.R:a=r=t[c++],s=o=t[c++],f=2*t[c++]+2*t[c++];break;case Da.Z:var y=a-r,w=s-o;f=Math.sqrt(y*y+w*w),r=a,o=s}f>=0&&(l[u++]=f,h+=f)}return this._pathLen=h,h},e.prototype.rebuildPath=function(t,e){var i,n,r,o,a,s,l,h,u,c,d=this.data,p=this._ux,f=this._uy,g=this._len,m=e<1,y=0,w=0,b=0;if(!m||(this._pathSegLen||this._calculateLength(),l=this._pathSegLen,h=e*this._pathLen))e:for(var x=0;x<g;){var S=d[x++],C=1===x;switch(C&&(r=d[x],o=d[x+1],i=r,n=o),S!==Da.L&&b>0&&(t.lineTo(u,c),b=0),S){case Da.M:i=r=d[x++],n=o=d[x++],t.moveTo(r,o);break;case Da.L:a=d[x++],s=d[x++];var _=Dy(a-r),M=Dy(s-o);if(_>p||M>f){if(m){var T=l[w++];if(y+T>h){var I=(h-y)/T;t.lineTo(r*(1-I)+a*I,o*(1-I)+s*I);break e}y+=T}t.lineTo(a,s),r=a,o=s,b=0}else{var R=_*_+M*M;R>b&&(u=a,c=s,b=R)}break;case Da.C:var E=d[x++],A=d[x++],k=d[x++],D=d[x++],O=d[x++],P=d[x++];if(m){var T=l[w++];if(y+T>h){var I=(h-y)/T;R_(r,E,k,O,I,Ds),R_(o,A,D,P,I,Dl),t.bezierCurveTo(Ds[1],Dl[1],Ds[2],Dl[2],Ds[3],Dl[3]);break e}y+=T}t.bezierCurveTo(E,A,k,D,O,P),r=O,o=P;break;case Da.Q:var E=d[x++],A=d[x++],k=d[x++],D=d[x++];if(m){var T=l[w++];if(y+T>h){var I=(h-y)/T;RE(r,E,k,I,Ds),RE(o,A,D,I,Dl),t.quadraticCurveTo(Ds[1],Dl[1],Ds[2],Dl[2]);break e}y+=T}t.quadraticCurveTo(E,A,k,D),r=k,o=D;break;case Da.A:var L=d[x++],N=d[x++],H=d[x++],V=d[x++],B=d[x++],F=d[x++],W=d[x++],z=!d[x++],j=H>V?H:V,U=Dy(H-V)>.001,G=B+F,Y=!1;if(m){var T=l[w++];y+T>h&&(G=B+F*(h-y)/T,Y=!0),y+=T}if(U&&t.ellipse?t.ellipse(L,N,H,V,W,B,G,z):t.arc(L,N,j,B,G,z),Y)break e;C&&(i=Dg(B)*H+L,n=Dm(B)*V+N),r=Dg(G)*H+L,o=Dm(G)*V+N;break;case Da.R:i=r=d[x],n=o=d[x+1],a=d[x++],s=d[x++];var X=d[x++],$=d[x++];if(m){var T=l[w++];if(y+T>h){var Z=h-y;t.moveTo(a,s),t.lineTo(a+Dp(Z,X),s),(Z-=X)>0&&t.lineTo(a+X,s+Dp(Z,$)),(Z-=$)>0&&t.lineTo(a+Df(X-Z,0),s+$),(Z-=X)>0&&t.lineTo(a,s+Df($-Z,0));break e}y+=T}t.rect(a,s,X,$);break;case Da.Z:if(m){var T=l[w++];if(y+T>h){var I=(h-y)/T;t.lineTo(r*(1-I)+i*I,o*(1-I)+n*I);break e}y+=T}t.closePath(),r=i,o=n}}},e.prototype.clone=function(){var t=new e,i=this.data;return t.data=i.slice?i.slice():Array.prototype.slice.call(i),t._len=this._len,t},e.CMD=Da,e.initDefaultProps=void((t=e.prototype)._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0),e}();function DM(t,e,i,n,r,o,a){if(0===r)return!1;var s=0,l=t;if(a>e+r&&a>n+r||a<e-r&&a<n-r||o>t+r&&o>i+r||o<t-r&&o<i-r)return!1;if(t===i)return Math.abs(o-t)<=r/2;var h=(s=(e-n)/(t-i))*o-a+(t*n-i*e)/(t-i);return h*h/(s*s+1)<=r/2*r/2}function DT(t,e,i,n,r,o,a,s,l){return 0!==a&&(!(l>e+a)||!(l>n+a)||!(l>o+a))&&(!(l<e-a)||!(l<n-a)||!(l<o-a))&&(!(s>t+a)||!(s>i+a)||!(s>r+a))&&(!(s<t-a)||!(s<i-a)||!(s<r-a))&&RA(t,e,i,n,r,o,s,l,null)<=a/2}var DI=2*Math.PI;function DR(t){return(t%=DI)<0&&(t+=DI),t}var DE=2*Math.PI;function DA(t,e,i,n,r,o){if(o>e&&o>n||o<e&&o<n||n===e)return 0;var a=(o-e)/(n-e),s=n<e?1:-1;(1===a||0===a)&&(s=n<e?.5:-.5);var l=a*(i-t)+t;return l===r?1/0:l>r?s:0}var Dk=D_.CMD,DD=2*Math.PI,DO=[-1,-1,-1],DP=[-1,-1];function DL(t,e,i,n,r){for(var o,a,s=t.data,l=t.len(),h=0,u=0,c=0,d=0,p=0,f=0;f<l;){var g,m,y,w,b,x,S,C,_=s[f++],M=1===f;switch(_===Dk.M&&f>1&&!i&&(h+=DA(u,c,d,p,n,r)),M&&(u=s[f],c=s[f+1],d=u,p=c),_){case Dk.M:d=s[f++],p=s[f++],u=d,c=p;break;case Dk.L:if(i){if(DM(u,c,s[f],s[f+1],e,n,r))return!0}else h+=DA(u,c,s[f],s[f+1],n,r)||0;u=s[f++],c=s[f++];break;case Dk.C:if(i){if(g=u,m=c,y=s[f++],w=s[f++],b=s[f++],x=s[f++],S=s[f],C=s[f+1],0!==e&&(!(r>m+e)||!(r>w+e)||!(r>x+e)||!(r>C+e))&&(!(r<m-e)||!(r<w-e)||!(r<x-e)||!(r<C-e))&&(!(n>g+e)||!(n>y+e)||!(n>b+e)||!(n>S+e))&&(!(n<g-e)||!(n<y-e)||!(n<b-e)||!(n<S-e))&&RM(g,m,y,w,b,x,S,C,n,r,null)<=e/2)return!0}else h+=function(t,e,i,n,r,o,a,s,l,h){if(h>e&&h>n&&h>o&&h>s||h<e&&h<n&&h<o&&h<s)return 0;var u=RS(e,n,o,s,h,DO);if(0===u)return 0;for(var c=0,d=-1,p=void 0,f=void 0,g=0;g<u;g++){var m=DO[g],y=0===m||1===m?.5:1;Rb(t,i,r,a,m)<l||(d<0&&(d=RC(e,n,o,s,DP),DP[1]<DP[0]&&d>1&&function(){var t=DP[0];DP[0]=DP[1],DP[1]=t}(),p=Rb(e,n,o,s,DP[0]),d>1&&(f=Rb(e,n,o,s,DP[1]))),2===d?m<DP[0]?c+=p<e?y:-y:m<DP[1]?c+=f<p?y:-y:c+=s<f?y:-y:m<DP[0]?c+=p<e?y:-y:c+=s<p?y:-y)}return c}(u,c,s[f++],s[f++],s[f++],s[f++],s[f],s[f+1],n,r)||0;u=s[f++],c=s[f++];break;case Dk.Q:if(i){if(DT(u,c,s[f++],s[f++],s[f],s[f+1],e,n,r))return!0}else h+=function(t,e,i,n,r,o,a,s){if(s>e&&s>n&&s>o||s<e&&s<n&&s<o)return 0;var l=function(t,e,i,n,r){var o=t-2*e+i,a=2*(e-t),s=t-n,l=0;if(Rv(o)){if(Rw(a)){var h=-s/a;h>=0&&h<=1&&(r[l++]=h)}}else{var u=a*a-4*o*s;if(Rv(u)){var h=-a/(2*o);h>=0&&h<=1&&(r[l++]=h)}else if(u>0){var c=Rd(u),h=(-a+c)/(2*o),d=(-a-c)/(2*o);h>=0&&h<=1&&(r[l++]=h),d>=0&&d<=1&&(r[l++]=d)}}return l}(e,n,o,s,DO);if(0===l)return 0;var h=RR(e,n,o);if(h>=0&&h<=1){for(var u=0,c=RT(e,n,o,h),d=0;d<l;d++){var p=0===DO[d]||1===DO[d]?.5:1,f=RT(t,i,r,DO[d]);f<a||(DO[d]<h?u+=c<e?p:-p:u+=o<c?p:-p)}return u}var p=0===DO[0]||1===DO[0]?.5:1,f=RT(t,i,r,DO[0]);return f<a?0:o<e?p:-p}(u,c,s[f++],s[f++],s[f],s[f+1],n,r)||0;u=s[f++],c=s[f++];break;case Dk.A:var T=s[f++],I=s[f++],R=s[f++],E=s[f++],A=s[f++],k=s[f++];f+=1;var D=!!(1-s[f++]);o=Math.cos(A)*R+T,a=Math.sin(A)*E+I,M?(d=o,p=a):h+=DA(u,c,o,a,n,r);var O=(n-T)*E/R+T;if(i){if(function(t,e,i,n,r,o,a,s,l){if(0===a)return!1;var h=Math.sqrt((s-=t)*s+(l-=e)*l);if(h-a>i||h+a<i)return!1;if(Math.abs(n-r)%DE<1e-4)return!0;if(o){var u=n;n=DR(r),r=DR(u)}else n=DR(n),r=DR(r);n>r&&(r+=DE);var c=Math.atan2(l,s);return c<0&&(c+=DE),c>=n&&c<=r||c+DE>=n&&c+DE<=r}(T,I,E,A,A+k,D,e,O,r))return!0}else h+=function(t,e,i,n,r,o,a,s){if((s-=e)>i||s<-i)return 0;var l=Math.sqrt(i*i-s*s);DO[0]=-l,DO[1]=l;var h=Math.abs(n-r);if(h<1e-4)return 0;if(h>=DD-1e-4){n=0,r=DD;var u=o?1:-1;return a>=DO[0]+t&&a<=DO[1]+t?u:0}if(n>r){var c=n;n=r,r=c}n<0&&(n+=DD,r+=DD);for(var d=0,p=0;p<2;p++){var f=DO[p];if(f+t>a){var g=Math.atan2(s,f),u=o?1:-1;g<0&&(g=DD+g),(g>=n&&g<=r||g+DD>=n&&g+DD<=r)&&(g>Math.PI/2&&g<1.5*Math.PI&&(u=-u),d+=u)}}return d}(T,I,E,A,A+k,D,O,r);u=Math.cos(A+k)*R+T,c=Math.sin(A+k)*E+I;break;case Dk.R:d=u=s[f++],p=c=s[f++];var P=s[f++],L=s[f++];if(o=d+P,a=p+L,i){if(DM(d,p,o,p,e,n,r)||DM(o,p,o,a,e,n,r)||DM(o,a,d,a,e,n,r)||DM(d,a,d,p,e,n,r))return!0}else h+=DA(o,p,o,a,n,r)+DA(d,a,d,p,n,r);break;case Dk.Z:if(i){if(DM(u,c,d,p,e,n,r))return!0}else h+=DA(u,c,d,p,n,r);u=d,c=p}}return i||1e-4>Math.abs(c-p)||(h+=DA(u,c,d,p,n,r)||0),0!==h}var DN=Tb({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},kK),DH={style:Tb({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},kQ.style)},DV=A_.concat(["invisible","culling","z","z2","zlevel","parent"]),DB=function(t){var e;function i(e){return t.call(this,e)||this}return T6(i,t),i.prototype.update=function(){var e=this;t.prototype.update.call(this);var n=this.style;if(n.decal){var r=this._decalEl=this._decalEl||new i;r.buildPath===i.prototype.buildPath&&(r.buildPath=function(t){e.buildPath(t,e.shape)}),r.silent=!0;var o=r.style;for(var a in n)o[a]!==n[a]&&(o[a]=n[a]);o.fill=n.fill?n.decal:null,o.decal=null,o.shadowColor=null,n.strokeFirst&&(o.stroke=null);for(var s=0;s<DV.length;++s)r[DV[s]]=this[DV[s]];r.__dirty|=1}else this._decalEl&&(this._decalEl=null)},i.prototype.getDecalElement=function(){return this._decalEl},i.prototype._init=function(e){var i=TR(e);this.shape=this.getDefaultShape();var n=this.getDefaultStyle();n&&this.useStyle(n);for(var r=0;r<i.length;r++){var o=i[r],a=e[o];"style"===o?this.style?Tw(this.style,a):this.useStyle(a):"shape"===o?Tw(this.shape,a):t.prototype.attrKV.call(this,o,a)}this.style||this.useStyle({})},i.prototype.getDefaultStyle=function(){return null},i.prototype.getDefaultShape=function(){return{}},i.prototype.canBeInsideText=function(){return this.hasFill()},i.prototype.getInsideTextFill=function(){var t=this.style.fill;if("none"!==t){if(TO(t)){var e=R1(t,0);return e>.5?Am:e>.2?"#eee":Ay}if(t)return Ay}return Am},i.prototype.getInsideTextStroke=function(t){var e=this.style.fill;if(TO(e)){var i=this.__zr;if(!!(i&&i.isDarkMode())==.4>R1(t,0))return e}},i.prototype.buildPath=function(t,e,i){},i.prototype.pathUpdated=function(){this.__dirty&=-5},i.prototype.getUpdatedPathProxy=function(t){return this.path||this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},i.prototype.createPathProxy=function(){this.path=new D_(!1)},i.prototype.hasStroke=function(){var t=this.style,e=t.stroke;return!(null==e||"none"===e||!(t.lineWidth>0))},i.prototype.hasFill=function(){var t=this.style.fill;return null!=t&&"none"!==t},i.prototype.getBoundingRect=function(){var t=this._rect,e=this.style,i=!t;if(i){var n=!1;this.path||(n=!0,this.createPathProxy());var r=this.path;(n||4&this.__dirty)&&(r.beginPath(),this.buildPath(r,this.shape,!1),this.pathUpdated()),t=r.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||i){o.copy(t);var a=e.strokeNoScale?this.getLineScale():1,s=e.lineWidth;if(!this.hasFill()){var l=this.strokeContainThreshold;s=Math.max(s,null==l?4:l)}a>1e-10&&(o.width+=s/a,o.height+=s/a,o.x-=s/a/2,o.y-=s/a/2)}return o}return t},i.prototype.contain=function(t,e){var i=this.transformCoordToLocal(t,e),n=this.getBoundingRect(),r=this.style;if(t=i[0],e=i[1],n.contain(t,e)){var o=this.path;if(this.hasStroke()){var a=r.lineWidth,s=r.strokeNoScale?this.getLineScale():1;if(s>1e-10&&(this.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),DL(o,a/s,!0,t,e)))return!0}if(this.hasFill())return DL(o,0,!1,t,e)}return!1},i.prototype.dirtyShape=function(){this.__dirty|=4,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},i.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},i.prototype.animateShape=function(t){return this.animate("shape",t)},i.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():"shape"===t?this.dirtyShape():this.markRedraw()},i.prototype.attrKV=function(e,i){"shape"===e?this.setShape(i):t.prototype.attrKV.call(this,e,i)},i.prototype.setShape=function(t,e){var i=this.shape;return i||(i=this.shape={}),"string"==typeof t?i[t]=e:Tw(i,t),this.dirtyShape(),this},i.prototype.shapeChanged=function(){return!!(4&this.__dirty)},i.prototype.createStyle=function(t){return T0(DN,t)},i.prototype._innerSaveToNormal=function(e){t.prototype._innerSaveToNormal.call(this,e);var i=this._normalState;e.shape&&!i.shape&&(i.shape=Tw({},this.shape))},i.prototype._applyStateObj=function(e,i,n,r,o,a){t.prototype._applyStateObj.call(this,e,i,n,r,o,a);var s,l=!(i&&r);if(i&&i.shape?o?r?s=i.shape:(s=Tw({},n.shape),Tw(s,i.shape)):(s=Tw({},r?this.shape:n.shape),Tw(s,i.shape)):l&&(s=n.shape),s){if(o){this.shape=Tw({},this.shape);for(var h={},u=TR(s),c=0;c<u.length;c++){var d=u[c];"object"==typeof s[d]?this.shape[d]=s[d]:h[d]=s[d]}this._transitionState(e,{shape:h},a)}else this.shape=s,this.dirtyShape()}},i.prototype._mergeStates=function(e){for(var i,n=t.prototype._mergeStates.call(this,e),r=0;r<e.length;r++){var o=e[r];o.shape&&(i=i||{},this._mergeStyle(i,o.shape))}return i&&(n.shape=i),n},i.prototype.getAnimationStyleProps=function(){return DH},i.prototype.isZeroArea=function(){return!1},i.extend=function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return t.init&&t.init.call(n,i),n}return T6(i,e),i.prototype.getDefaultStyle=function(){return Tm(t.style)},i.prototype.getDefaultShape=function(){return Tm(t.shape)},i}(i);for(var n in t)"function"==typeof t[n]&&(e.prototype[n]=t[n]);return e},i.initDefaultProps=void((e=i.prototype).type="path",e.strokeContainThreshold=5,e.segmentIgnoreThreshold=0,e.subPixelOptimize=!1,e.autoBatch=!1,e.__dirty=7),i}(k1),DF=Tb({strokeFirst:!0,font:Tt,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DN),DW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T6(e,t),e.prototype.hasStroke=function(){var t=this.style,e=t.stroke;return null!=e&&"none"!==e&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style.fill;return null!=t&&"none"!==t},e.prototype.createStyle=function(t){return T0(DF,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var e=t.text;null!=e?e+="":e="";var i=AE(e,t.font,t.textAlign,t.textBaseline);if(i.x+=t.x||0,i.y+=t.y||0,this.hasStroke()){var n=t.lineWidth;i.x-=n/2,i.y-=n/2,i.width+=n,i.height+=n}this._rect=i}return this._rect},e.initDefaultProps=void(e.prototype.dirtyRectTolerance=10),e}(k1);DW.prototype.type="tspan";var Dz=Tb({x:0,y:0},kK),Dj={style:Tb({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},kQ.style)},DU=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T6(e,t),e.prototype.createStyle=function(t){return T0(Dz,t)},e.prototype._getSize=function(t){var e,i=this.style,n=i[t];if(null!=n)return n;var r=(e=i.image)&&"string"!=typeof e&&e.width&&e.height?i.image:this.__image;if(!r)return 0;var o="width"===t?"height":"width",a=i[o];return null==a?r[t]:r[t]/r[o]*a},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return Dj},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new I1(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(k1);DU.prototype.type="image";var DG=Math.round;function DY(t,e,i){if(e){var n=e.x1,r=e.x2,o=e.y1,a=e.y2;t.x1=n,t.x2=r,t.y1=o,t.y2=a;var s=i&&i.lineWidth;return s&&(DG(2*n)===DG(2*r)&&(t.x1=t.x2=D$(n,s,!0)),DG(2*o)===DG(2*a)&&(t.y1=t.y2=D$(o,s,!0))),t}}function DX(t,e,i){if(e){var n=e.x,r=e.y,o=e.width,a=e.height;t.x=n,t.y=r,t.width=o,t.height=a;var s=i&&i.lineWidth;return s&&(t.x=D$(n,s,!0),t.y=D$(r,s,!0),t.width=Math.max(D$(n+o,s,!1)-t.x,0===o?0:1),t.height=Math.max(D$(r+a,s,!1)-t.y,0===a?0:1)),t}}function D$(t,e,i){if(!e)return t;var n=DG(2*t);return(n+DG(e))%2==0?n/2:(n+(i?1:-1))/2}var DZ=function(){this.x=0,this.y=0,this.width=0,this.height=0},Dq={},DK=function(t){function e(e){return t.call(this,e)||this}return T6(e,t),e.prototype.getDefaultShape=function(){return new DZ},e.prototype.buildPath=function(t,e){if(this.subPixelOptimize){var i,n,r,o,a,s,l,h,u,c,d,p,f,g,m,y=DX(Dq,e,this.style);p=y.x,f=y.y,g=y.width,m=y.height,y.r=e.r,e=y}else p=e.x,f=e.y,g=e.width,m=e.height;e.r?(l=(i=e).x,h=i.y,u=i.width,c=i.height,d=i.r,u<0&&(l+=u,u=-u),c<0&&(h+=c,c=-c),"number"==typeof d?n=r=o=a=d:d instanceof Array?1===d.length?n=r=o=a=d[0]:2===d.length?(n=o=d[0],r=a=d[1]):3===d.length?(n=d[0],r=a=d[1],o=d[2]):(n=d[0],r=d[1],o=d[2],a=d[3]):n=r=o=a=0,n+r>u&&(s=n+r,n*=u/s,r*=u/s),o+a>u&&(s=o+a,o*=u/s,a*=u/s),r+o>c&&(s=r+o,r*=c/s,o*=c/s),n+a>c&&(s=n+a,n*=c/s,a*=c/s),t.moveTo(l+n,h),t.lineTo(l+u-r,h),0!==r&&t.arc(l+u-r,h+r,r,-Math.PI/2,0),t.lineTo(l+u,h+c-o),0!==o&&t.arc(l+u-o,h+c-o,o,0,Math.PI/2),t.lineTo(l+a,h+c),0!==a&&t.arc(l+a,h+c-a,a,Math.PI/2,Math.PI),t.lineTo(l,h+n),0!==n&&t.arc(l+n,h+n,n,Math.PI,1.5*Math.PI)):t.rect(p,f,g,m)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(DB);DK.prototype.type="rect";var DQ={fill:"#000"},DJ={style:Tb({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},kQ.style)},D0=function(t){function e(e){var i=t.call(this)||this;return i.type="text",i._children=[],i._defaultStyle=DQ,i.attr(e),i}return T6(e,t),e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var e=0;e<this._children.length;e++){var i=this._children[e];i.zlevel=this.zlevel,i.z=this.z,i.z2=this.z2,i.culling=this.culling,i.cursor=this.cursor,i.invisible=this.invisible}},e.prototype.updateTransform=function(){var e=this.innerTransformable;e?(e.updateTransform(),e.transform&&(this.transform=e.transform)):t.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(e){var i=this.innerTransformable;return i?i.getLocalTransform(e):t.prototype.getLocalTransform.call(this,e)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){var t;this._childCursor=0,D8(t=this.style),T_(t.rich,D8),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(e){t.prototype.addSelfToZr.call(this,e);for(var i=0;i<this._children.length;i++)this._children[i].__zr=e},e.prototype.removeSelfFromZr=function(e){t.prototype.removeSelfFromZr.call(this,e);for(var i=0;i<this._children.length;i++)this._children[i].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new I1(0,0,0,0),e=this._children,i=[],n=null,r=0;r<e.length;r++){var o=e[r],a=o.getBoundingRect(),s=o.getLocalTransform(i);s?(t.copy(a),t.applyTransform(s),(n=n||t.clone()).union(t)):(n=n||a.clone()).union(a)}this._rect=n||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||DQ},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,e){if(!e)return t;var i=e.rich,n=t.rich||i&&{};return Tw(t,e),i&&n?(this._mergeRich(n,i),t.rich=n):n&&(t.rich=n),t},e.prototype._mergeRich=function(t,e){for(var i=TR(e),n=0;n<i.length;n++){var r=i[n];t[r]=t[r]||{},Tw(t[r],e[r])}},e.prototype.getAnimationStyleProps=function(){return DJ},e.prototype._getOrCreateChild=function(t){var e=this._children[this._childCursor];return e&&e instanceof t||(e=new t),this._children[this._childCursor++]=e,e.__zr=this.__zr,e.parent=this,e},e.prototype._updatePlainTexts=function(){var t=this.style,e=t.font||Tt,i=t.padding,n=function(t,e){null!=t&&(t+="");var i,n=e.overflow,r=e.padding,o=e.font,a=AD(o),s=Tz(e.lineHeight,a),l=!!e.backgroundColor,h="truncate"===e.lineOverflow,u=e.width,c=(i=null!=u&&("break"===n||"breakAll"===n)?t?kZ(t,e.font,u,"breakAll"===n,0).lines:[]:t?t.split("\n"):[]).length*s,d=Tz(e.height,c);if(c>d&&h&&(i=i.slice(0,Math.floor(d/s))),t&&"truncate"===n&&null!=u)for(var p=kz(u,o,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),f=0;f<i.length;f++)i[f]=kj(i[f],p);for(var g=d,m=0,f=0;f<i.length;f++)m=Math.max(AI(i[f],o),m);null==u&&(u=m);var y=m;return r&&(g+=r[0]+r[2],y+=r[1]+r[3],u+=r[1]+r[3]),l&&(y=u),{lines:i,height:d,outerWidth:y,outerHeight:g,lineHeight:s,calculatedLineHeight:a,contentWidth:m,contentHeight:c,width:u}}(Oe(t),t),r=Oi(t),o=!!t.backgroundColor,a=n.outerHeight,s=n.outerWidth,l=n.contentWidth,h=n.lines,u=n.lineHeight,c=this._defaultStyle,d=t.x||0,p=t.y||0,f=t.align||c.align||"left",g=t.verticalAlign||c.verticalAlign||"top",m=d,y=Ak(p,n.contentHeight,g);if(r||i){var w=AA(d,s,f),b=Ak(p,a,g);r&&this._renderBackground(t,t,w,b,s,a)}y+=u/2,i&&(m=Ot(d,f,i),"top"===g?y+=i[0]:"bottom"===g&&(y-=i[2]));for(var x=0,S=!1,C=D7(("fill"in t)?t.fill:(S=!0,c.fill)),_=D9(("stroke"in t)?t.stroke:o||c.autoStroke&&!S?null:(x=2,c.stroke)),M=t.textShadowBlur>0,T=null!=t.width&&("truncate"===t.overflow||"break"===t.overflow||"breakAll"===t.overflow),I=n.calculatedLineHeight,R=0;R<h.length;R++){var E=this._getOrCreateChild(DW),A=E.createStyle();E.useStyle(A),A.text=h[R],A.x=m,A.y=y,f&&(A.textAlign=f),A.textBaseline="middle",A.opacity=t.opacity,A.strokeFirst=!0,M&&(A.shadowBlur=t.textShadowBlur||0,A.shadowColor=t.textShadowColor||"transparent",A.shadowOffsetX=t.textShadowOffsetX||0,A.shadowOffsetY=t.textShadowOffsetY||0),A.stroke=_,A.fill=C,_&&(A.lineWidth=t.lineWidth||x,A.lineDash=t.lineDash,A.lineDashOffset=t.lineDashOffset||0),A.font=e,D4(A,t),y+=u,T&&E.setBoundingRect(new I1(AA(A.x,t.width,A.textAlign),Ak(A.y,I,A.textBaseline),l,I))}},e.prototype._updateRichTexts=function(){var t=this.style,e=function(t,e){var i,n=new kY;if(null!=t&&(t+=""),!t)return n;for(var r=e.width,o=e.height,a=e.overflow,s=("break"===a||"breakAll"===a)&&null!=r?{width:r,accumWidth:0,breakAll:"breakAll"===a}:null,l=kW.lastIndex=0;null!=(i=kW.exec(t));){var h=i.index;h>l&&kX(n,t.substring(l,h),e,s),kX(n,i[2],e,s,i[1]),l=kW.lastIndex}l<t.length&&kX(n,t.substring(l,t.length),e,s);var u=[],c=0,d=0,p=e.padding,f="truncate"===a,g="truncate"===e.lineOverflow;function m(t,e,i){t.width=e,t.lineHeight=i,c+=i,d=Math.max(d,e)}i:for(var y=0;y<n.lines.length;y++){for(var w=n.lines[y],b=0,x=0,S=0;S<w.tokens.length;S++){var C=w.tokens[S],_=C.styleName&&e.rich[C.styleName]||{},M=C.textPadding=_.padding,T=M?M[1]+M[3]:0,I=C.font=_.font||e.font;C.contentHeight=AD(I);var R=Tz(_.height,C.contentHeight);if(C.innerHeight=R,M&&(R+=M[0]+M[2]),C.height=R,C.lineHeight=Tj(_.lineHeight,e.lineHeight,R),C.align=_&&_.align||e.align,C.verticalAlign=_&&_.verticalAlign||"middle",g&&null!=o&&c+C.lineHeight>o){S>0?(w.tokens=w.tokens.slice(0,S),m(w,x,b),n.lines=n.lines.slice(0,y+1)):n.lines=n.lines.slice(0,y);break i}var E=_.width,A=null==E||"auto"===E;if("string"==typeof E&&"%"===E.charAt(E.length-1))C.percentWidth=E,u.push(C),C.contentWidth=AI(C.text,I);else{if(A){var k=_.backgroundColor,D=k&&k.image;D&&kF(D=function(t){if("string"!=typeof t)return t;var e=kH.get(t);return e&&e.image}(D))&&(C.width=Math.max(C.width,D.width*R/D.height))}var O=f&&null!=r?r-x:null;null!=O&&O<C.width?!A||O<T?(C.text="",C.width=C.contentWidth=0):(C.text=function(t,e,i,n,r){if(!e)return"";var o=(t+"").split("\n");r=kz(e,i,n,r);for(var a=0,s=o.length;a<s;a++)o[a]=kj(o[a],r);return o.join("\n")}(C.text,O-T,I,e.ellipsis,{minChar:e.truncateMinChar}),C.width=C.contentWidth=AI(C.text,I)):C.contentWidth=AI(C.text,I)}C.width+=T,x+=C.width,_&&(b=Math.max(b,C.lineHeight))}m(w,x,b)}n.outerWidth=n.width=Tz(r,d),n.outerHeight=n.height=Tz(o,c),n.contentHeight=c,n.contentWidth=d,p&&(n.outerWidth+=p[1]+p[3],n.outerHeight+=p[0]+p[2]);for(var y=0;y<u.length;y++){var C=u[y],P=C.percentWidth;C.width=parseInt(P,10)/100*n.width}return n}(Oe(t),t),i=e.width,n=e.outerWidth,r=e.outerHeight,o=t.padding,a=t.x||0,s=t.y||0,l=this._defaultStyle,h=t.align||l.align,u=t.verticalAlign||l.verticalAlign,c=AA(a,n,h),d=Ak(s,r,u),p=c,f=d;o&&(p+=o[3],f+=o[0]);var g=p+i;Oi(t)&&this._renderBackground(t,t,c,d,n,r);for(var m=!!t.backgroundColor,y=0;y<e.lines.length;y++){for(var w=e.lines[y],b=w.tokens,x=b.length,S=w.lineHeight,C=w.width,_=0,M=p,T=g,I=x-1,R=void 0;_<x&&(!(R=b[_]).align||"left"===R.align);)this._placeToken(R,t,S,f,M,"left",m),C-=R.width,M+=R.width,_++;for(;I>=0&&"right"===(R=b[I]).align;)this._placeToken(R,t,S,f,T,"right",m),C-=R.width,T-=R.width,I--;for(M+=(i-(M-p)-(g-T)-C)/2;_<=I;)R=b[_],this._placeToken(R,t,S,f,M+R.width/2,"center",m),M+=R.width,_++;f+=S}},e.prototype._placeToken=function(t,e,i,n,r,o,a){var s=e.rich[t.styleName]||{};s.text=t.text;var l=t.verticalAlign,h=n+i/2;"top"===l?h=n+t.height/2:"bottom"===l&&(h=n+i-t.height/2),!t.isLineHolder&&Oi(s)&&this._renderBackground(s,e,"right"===o?r-t.width:"center"===o?r-t.width/2:r,h-t.height/2,t.width,t.height);var u=!!s.backgroundColor,c=t.textPadding;c&&(r=Ot(r,o,c),h-=t.height/2-c[0]-t.innerHeight/2);var d=this._getOrCreateChild(DW),p=d.createStyle();d.useStyle(p);var f=this._defaultStyle,g=!1,m=0,y=D7("fill"in s?s.fill:"fill"in e?e.fill:(g=!0,f.fill)),w=D9("stroke"in s?s.stroke:"stroke"in e?e.stroke:u||a||f.autoStroke&&!g?null:(m=2,f.stroke)),b=s.textShadowBlur>0||e.textShadowBlur>0;p.text=t.text,p.x=r,p.y=h,b&&(p.shadowBlur=s.textShadowBlur||e.textShadowBlur||0,p.shadowColor=s.textShadowColor||e.textShadowColor||"transparent",p.shadowOffsetX=s.textShadowOffsetX||e.textShadowOffsetX||0,p.shadowOffsetY=s.textShadowOffsetY||e.textShadowOffsetY||0),p.textAlign=o,p.textBaseline="middle",p.font=t.font||Tt,p.opacity=Tj(s.opacity,e.opacity,1),D4(p,s),w&&(p.lineWidth=Tj(s.lineWidth,e.lineWidth,m),p.lineDash=Tz(s.lineDash,e.lineDash),p.lineDashOffset=e.lineDashOffset||0,p.stroke=w),y&&(p.fill=y);var x=t.contentWidth,S=t.contentHeight;d.setBoundingRect(new I1(AA(p.x,x,p.textAlign),Ak(p.y,S,p.textBaseline),x,S))},e.prototype._renderBackground=function(t,e,i,n,r,o){var a,s,l=t.backgroundColor,h=t.borderWidth,u=t.borderColor,c=l&&l.image,d=l&&!c,p=t.borderRadius,f=this;if(d||t.lineHeight||h&&u){(a=this._getOrCreateChild(DK)).useStyle(a.createStyle()),a.style.fill=null;var g=a.shape;g.x=i,g.y=n,g.width=r,g.height=o,g.r=p,a.dirtyShape()}if(d){var m=a.style;m.fill=l||null,m.fillOpacity=Tz(t.fillOpacity,1)}else if(c){(s=this._getOrCreateChild(DU)).onload=function(){f.dirtyStyle()};var y=s.style;y.image=l.image,y.x=i,y.y=n,y.width=r,y.height=o}if(h&&u){var m=a.style;m.lineWidth=h,m.stroke=u,m.strokeOpacity=Tz(t.strokeOpacity,1),m.lineDash=t.borderDash,m.lineDashOffset=t.borderDashOffset||0,a.strokeContainThreshold=0,a.hasFill()&&a.hasStroke()&&(m.strokeFirst=!0,m.lineWidth*=2)}var w=(a||s).style;w.shadowBlur=t.shadowBlur||0,w.shadowColor=t.shadowColor||"transparent",w.shadowOffsetX=t.shadowOffsetX||0,w.shadowOffsetY=t.shadowOffsetY||0,w.opacity=Tj(t.opacity,e.opacity,1)},e.makeFont=function(t){var e="";return D6(t)&&(e=[t.fontStyle,t.fontWeight,D3(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),e&&TX(e)||t.textFont||t.font},e}(k1),D1={left:!0,right:1,center:1},D2={top:1,bottom:1,middle:1},D5=["fontStyle","fontWeight","fontSize","fontFamily"];function D3(t){return"string"==typeof t&&(-1!==t.indexOf("px")||-1!==t.indexOf("rem")||-1!==t.indexOf("em"))?t:isNaN(+t)?"12px":t+"px"}function D4(t,e){for(var i=0;i<D5.length;i++){var n=D5[i],r=e[n];null!=r&&(t[n]=r)}}function D6(t){return null!=t.fontSize||t.fontFamily||t.fontWeight}function D8(t){if(t){t.font=D0.makeFont(t);var e=t.align;"middle"===e&&(e="center"),t.align=null==e||D1[e]?e:"left";var i=t.verticalAlign;"center"===i&&(i="middle"),t.verticalAlign=null==i||D2[i]?i:"top",t.padding&&(t.padding=TG(t.padding))}}function D9(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function D7(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function Ot(t,e,i){return"right"===e?t-i[1]:"center"===e?t+i[3]/2-i[1]/2:t+i[3]}function Oe(t){var e=t.text;return null!=e&&(e+=""),e}function Oi(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}var On=kg(),Or=function(t,e,i,n){if(n){var r=On(n);r.dataIndex=i,r.dataType=e,r.seriesIndex=t,r.ssrType="chart","group"===n.type&&n.traverse(function(n){var r=On(n);r.seriesIndex=t,r.dataIndex=i,r.dataType=e,r.ssrType="chart"})}},Oo=1,Oa={},Os=kg(),Ol=kg(),Oh=["emphasis","blur","select"],Ou=["normal","emphasis","blur","select"],Oc="highlight",Od="downplay",Op="select",Of="unselect",Og="toggleSelect";function Om(t){return null!=t&&"none"!==t}function Oy(t,e,i){t.onHoverStateChange&&(t.hoverState||0)!==i&&t.onHoverStateChange(e),t.hoverState=i}function Ov(t){Oy(t,"emphasis",2)}function Ow(t){2===t.hoverState&&Oy(t,"normal",0)}function Ob(t){Oy(t,"blur",1)}function Ox(t){1===t.hoverState&&Oy(t,"normal",0)}function OS(t){t.selected=!0}function OC(t){t.selected=!1}function O_(t,e,i){e(t,i),t.isGroup&&t.traverse(function(t){e(t,i)})}function OM(t,e){switch(e){case"emphasis":t.hoverState=2;break;case"normal":t.hoverState=0;break;case"blur":t.hoverState=1;break;case"select":t.selected=!0}}function OT(t,e){var i,n,r,o,a,s=this.states[t];if(this.style){if("emphasis"===t)return function(t,e,i,n){var r=i&&Tx(i,"select")>=0,o=!1;if(t instanceof DB){var a=Os(t),s=r&&a.selectFill||a.normalFill,l=r&&a.selectStroke||a.normalStroke;if(Om(s)||Om(l)){var h=(n=n||{}).style||{};"inherit"===h.fill?(o=!0,n=Tw({},n),(h=Tw({},h)).fill=s):!Om(h.fill)&&Om(s)?(o=!0,n=Tw({},n),(h=Tw({},h)).fill=R5(s)):!Om(h.stroke)&&Om(l)&&(o||(n=Tw({},n),h=Tw({},h)),h.stroke=R5(l)),n.style=h}}if(n&&null==n.z2){o||(n=Tw({},n));var u=t.z2EmphasisLift;n.z2=t.z2+(null!=u?u:10)}return n}(this,0,e,s);if("blur"===t)return i=s,n=Tx(this.currentStates,t)>=0,r=this.style.opacity,o=n?null:function(t,e,i,n){for(var r=t.style,o={},a=0;a<e.length;a++){var s=e[a],l=r[s];o[s]=null==l?n&&n[s]:l}for(var a=0;a<t.animators.length;a++){var h=t.animators[a];h.__fromStateTransition&&0>h.__fromStateTransition.indexOf(i)&&"style"===h.targetName&&h.saveTo(o,e)}return o}(this,["opacity"],t,{opacity:1}),null==(a=(i=i||{}).style||{}).opacity&&(i=Tw({},i),a=Tw({opacity:n?r:.1*o.opacity},a),i.style=a),i;if("select"===t)return function(t,e,i){if(i&&null==i.z2){i=Tw({},i);var n=t.z2SelectLift;i.z2=t.z2+(null!=n?n:9)}return i}(this,0,s)}return s}function OI(t){t.stateProxy=OT;var e=t.getTextContent(),i=t.getTextGuideLine();e&&(e.stateProxy=OT),i&&(i.stateProxy=OT)}function OR(t,e){OD(t,e)||t.__highByOuter||O_(t,Ov)}function OE(t,e){OD(t,e)||t.__highByOuter||O_(t,Ow)}function OA(t,e){t.__highByOuter|=1<<(e||0),O_(t,Ov)}function Ok(t,e){(t.__highByOuter&=~(1<<(e||0)))||O_(t,Ow)}function OD(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function OO(t){var e=t.getModel(),i=[],n=[];e.eachComponent(function(e,r){var o=Ol(r),a="series"===e,s=a?t.getViewOfSeriesModel(r):t.getViewOfComponentModel(r);a||n.push(s),o.isBlured&&(s.group.traverse(function(t){Ox(t)}),a&&i.push(r)),o.isBlured=!1}),T_(n,function(t){t&&t.toggleBlurSeries&&t.toggleBlurSeries(i,!1,e)})}function OP(t,e,i,n){var r=n.getModel();function o(t,e){for(var i=0;i<e.length;i++){var n=t.getItemGraphicEl(e[i]);n&&O_(n,Ox)}}if(i=i||"coordinateSystem",null!=t&&e&&"none"!==e){var a=r.getSeriesByIndex(t),s=a.coordinateSystem;s&&s.master&&(s=s.master);var l=[];r.eachSeries(function(t){var r=a===t,h=t.coordinateSystem;h&&h.master&&(h=h.master);var u=h&&s?h===s:r;if(!("series"===i&&!r||"coordinateSystem"===i&&!u||"series"===e&&r)){if(n.getViewOfSeriesModel(t).group.traverse(function(t){t.__highByOuter&&r&&"self"===e||Ob(t)}),TC(e))o(t.getData(),e);else if(TN(e))for(var c=TR(e),d=0;d<c.length;d++)o(t.getData(c[d]),e[c[d]]);l.push(t),Ol(t).isBlured=!0}}),r.eachComponent(function(t,e){if("series"!==t){var i=n.getViewOfComponentModel(e);i&&i.toggleBlurSeries&&i.toggleBlurSeries(l,!0,r)}})}}function OL(t,e,i){if(null!=t&&null!=e){var n=i.getModel().getComponent(t,e);if(n){Ol(n).isBlured=!0;var r=i.getViewOfComponentModel(n);r&&r.focusBlurEnabled&&r.group.traverse(function(t){Ob(t)})}}}function ON(t,e,i,n){var r,o={focusSelf:!1,dispatchers:null};if(null==t||"series"===t||null==e||null==i)return o;var a=n.getModel().getComponent(t,e);if(!a)return o;var s=n.getViewOfComponentModel(a);if(!s||!s.findHighDownDispatchers)return o;for(var l=s.findHighDownDispatchers(i),h=0;h<l.length;h++)if("self"===On(l[h]).focus){r=!0;break}return{focusSelf:r,dispatchers:l}}function OH(t){T_(t.getAllData(),function(e){var i=e.data,n=e.type;i.eachItemGraphicEl(function(e,i){t.isSelected(i,n)?O_(e,OS):O_(e,OC)})})}function OV(t,e,i){OU(t,!0),O_(t,OI),OF(t,e,i)}function OB(t,e,i,n){n?OU(t,!1):OV(t,e,i)}function OF(t,e,i){var n=On(t);null!=e?(n.focus=e,n.blurScope=i):n.focus&&(n.focus=null)}var OW=["emphasis","blur","select"],Oz={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Oj(t,e,i,n){i=i||"itemStyle";for(var r=0;r<OW.length;r++){var o=OW[r],a=e.getModel([o,i]);t.ensureState(o).style=n?n(a):a[Oz[i]]()}}function OU(t,e){var i=!1===e;t.highDownSilentOnTouch&&(t.__highDownSilentOnTouch=t.highDownSilentOnTouch),(!i||t.__highDownDispatcher)&&(t.__highByOuter=t.__highByOuter||0,t.__highDownDispatcher=!i)}function OG(t){return!!(t&&t.__highDownDispatcher)}function OY(t){var e=t.type;return e===Op||e===Of||e===Og}function OX(t){var e=t.type;return e===Oc||e===Od}var O$=kg();function OZ(t,e,i,n,r){if(e&&e.ecModel){var o,a=e.ecModel.getUpdatePayload();o=a&&a.animation}var s=e&&e.isAnimationEnabled(),l="update"===t;if(!s)return null;var h=void 0,u=void 0,c=void 0;return n?(h=Tz(n.duration,200),u=Tz(n.easing,"cubicOut"),c=0):(h=e.getShallow(l?"animationDurationUpdate":"animationDuration"),u=e.getShallow(l?"animationEasingUpdate":"animationEasing"),c=e.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(null!=o.duration&&(h=o.duration),null!=o.easing&&(u=o.easing),null!=o.delay&&(c=o.delay)),TD(c)&&(c=c(i,r)),TD(h)&&(h=h(i)),{duration:h||0,delay:c,easing:u}}function Oq(t,e,i,n,r,o,a){var s,l=!1;TD(r)?(a=o,o=r,r=null):TN(r)&&(o=r.cb,a=r.during,l=r.isFrom,s=r.removeOpt,r=r.dataIndex);var h="leave"===t;h||e.stopAnimation("leave");var u=OZ(t,n,r,h?s||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(e,r):null);if(u&&u.duration>0){var c={duration:u.duration,delay:u.delay||0,easing:u.easing,done:o,force:!!o||!!a,setToFinal:!h,scope:t,during:a};l?e.animateFrom(i,c):e.animateTo(i,c)}else e.stopAnimation(),l||e.attr(i),a&&a(1),o&&o()}function OK(t,e,i,n,r,o){Oq("update",t,e,i,n,r,o)}function OQ(t,e,i,n,r,o){Oq("enter",t,e,i,n,r,o)}function OJ(t){if(!t.__zr)return!0;for(var e=0;e<t.animators.length;e++)if("leave"===t.animators[e].scope)return!0;return!1}function O0(t,e,i,n,r,o){OJ(t)||Oq("leave",t,e,i,n,r,o)}function O1(t,e,i,n){t.removeTextContent(),t.removeTextGuideLine(),O0(t,{style:{opacity:0}},e,i,n)}function O2(t,e,i){function n(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(t){t.isGroup||O1(t,e,i,n)}):O1(t,e,i,n)}function O5(t){O$(t).oldStyle=t.style}var O3={};n(O3,"extendShape",()=>La),n(O3,"extendPath",()=>Ll),n(O3,"registerShape",()=>Lh),n(O3,"getShapeClass",()=>Lu),n(O3,"makePath",()=>Lc),n(O3,"resizePath",()=>Lg),n(O3,"makeImage",()=>Ld),n(O3,"mergePath",()=>Lf),n(O3,"subPixelOptimizeLine",()=>Lm),n(O3,"subPixelOptimizeRect",()=>Ly),n(O3,"subPixelOptimize",()=>Lv),n(O3,"getTransform",()=>Lw),n(O3,"applyTransform",()=>Lb),n(O3,"transformDirection",()=>Lx),n(O3,"groupTransition",()=>LS),n(O3,"clipPointsByRect",()=>LC),n(O3,"clipRectByRect",()=>L_),n(O3,"createIcon",()=>LM),n(O3,"linePolygonIntersect",()=>LT),n(O3,"lineLineIntersect",()=>LI),n(O3,"setTooltipConfig",()=>LR),n(O3,"traverseElements",()=>LA),n(O3,"updateProps",()=>OK),n(O3,"initProps",()=>OQ),n(O3,"removeElement",()=>O0),n(O3,"removeElementWithFadeOut",()=>O2),n(O3,"isElementRemoved",()=>OJ),n(O3,"Group",()=>Aj),n(O3,"Image",()=>DU),n(O3,"Text",()=>D0),n(O3,"Circle",()=>Pm),n(O3,"Ellipse",()=>Pw),n(O3,"Sector",()=>PO),n(O3,"Ring",()=>PN),n(O3,"Polygon",()=>PF),n(O3,"Polyline",()=>Pj),n(O3,"Rect",()=>DK),n(O3,"Line",()=>PX),n(O3,"BezierCurve",()=>PQ),n(O3,"Arc",()=>P1),n(O3,"IncrementalDisplayable",()=>Li),n(O3,"CompoundPath",()=>P2),n(O3,"LinearGradient",()=>P3),n(O3,"RadialGradient",()=>P4),n(O3,"BoundingRect",()=>I1),n(O3,"OrientedBoundingRect",()=>Lt),n(O3,"Point",()=>IY),n(O3,"Path",()=>DB);var O4=D_.CMD,O6=[[],[],[]],O8=Math.sqrt,O9=Math.atan2;function O7(t,e){if(e){var i,n,r,o,a,s,l=t.data,h=t.len(),u=O4.M,c=O4.C,d=O4.L,p=O4.R,f=O4.A,g=O4.Q;for(r=0,o=0;r<h;){switch(i=l[r++],o=r,n=0,i){case u:case d:n=1;break;case c:n=3;break;case g:n=2;break;case f:var m=e[4],y=e[5],w=O8(e[0]*e[0]+e[1]*e[1]),b=O8(e[2]*e[2]+e[3]*e[3]),x=O9(-e[1]/b,e[0]/w);l[r]*=w,l[r++]+=m,l[r]*=b,l[r++]+=y,l[r++]*=w,l[r++]*=b,l[r++]+=x,l[r++]+=x,r+=2,o=r;break;case p:s[0]=l[r++],s[1]=l[r++],Ih(s,s,e),l[o++]=s[0],l[o++]=s[1],s[0]+=l[r++],s[1]+=l[r++],Ih(s,s,e),l[o++]=s[0],l[o++]=s[1]}for(a=0;a<n;a++){var S=O6[a];S[0]=l[r++],S[1]=l[r++],Ih(S,S,e),l[o++]=S[0],l[o++]=S[1]}}t.increaseVersion()}}var Pt=Math.sqrt,Pe=Math.sin,Pi=Math.cos,Pn=Math.PI;function Pr(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Po(t,e){return(t[0]*e[0]+t[1]*e[1])/(Pr(t)*Pr(e))}function Pa(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Po(t,e))}function Ps(t,e,i,n,r,o,a,s,l,h,u){var c=Pn/180*l,d=Pi(c)*(t-i)/2+Pe(c)*(e-n)/2,p=-1*Pe(c)*(t-i)/2+Pi(c)*(e-n)/2,f=d*d/(a*a)+p*p/(s*s);f>1&&(a*=Pt(f),s*=Pt(f));var g=(r===o?-1:1)*Pt((a*a*(s*s)-a*a*(p*p)-s*s*(d*d))/(a*a*(p*p)+s*s*(d*d)))||0,m=g*a*p/s,y=-(g*s)*d/a,w=(t+i)/2+Pi(c)*m-Pe(c)*y,b=(e+n)/2+Pe(c)*m+Pi(c)*y,x=Pa([1,0],[(d-m)/a,(p-y)/s]),S=[(d-m)/a,(p-y)/s],C=[(-1*d-m)/a,(-1*p-y)/s],_=Pa(S,C);if(-1>=Po(S,C)&&(_=Pn),Po(S,C)>=1&&(_=0),_<0){var M=Math.round(_/Pn*1e6)/1e6;_=2*Pn+M%2*Pn}u.addData(h,w,b,a,s,x,_,c,o)}var Pl=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,Ph=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,Pu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T6(e,t),e.prototype.applyTransform=function(t){},e}(DB);function Pc(t){return null!=t.setData}function Pd(t,e){var i=function(t){var e,i=new D_;if(!t)return i;var n=0,r=0,o=0,a=0,s=D_.CMD,l=t.match(Pl);if(!l)return i;for(var h=0;h<l.length;h++){for(var u=l[h],c=u.charAt(0),d=void 0,p=u.match(Ph)||[],f=p.length,g=0;g<f;g++)p[g]=parseFloat(p[g]);for(var m=0;m<f;){var y=void 0,w=void 0,b=void 0,x=void 0,S=void 0,C=void 0,_=void 0,M=n,T=r,I=void 0,R=void 0;switch(c){case"l":n+=p[m++],r+=p[m++],d=s.L,i.addData(d,n,r);break;case"L":n=p[m++],r=p[m++],d=s.L,i.addData(d,n,r);break;case"m":n+=p[m++],r+=p[m++],d=s.M,i.addData(d,n,r),o=n,a=r,c="l";break;case"M":n=p[m++],r=p[m++],d=s.M,i.addData(d,n,r),o=n,a=r,c="L";break;case"h":n+=p[m++],d=s.L,i.addData(d,n,r);break;case"H":n=p[m++],d=s.L,i.addData(d,n,r);break;case"v":r+=p[m++],d=s.L,i.addData(d,n,r);break;case"V":r=p[m++],d=s.L,i.addData(d,n,r);break;case"C":d=s.C,i.addData(d,p[m++],p[m++],p[m++],p[m++],p[m++],p[m++]),n=p[m-2],r=p[m-1];break;case"c":d=s.C,i.addData(d,p[m++]+n,p[m++]+r,p[m++]+n,p[m++]+r,p[m++]+n,p[m++]+r),n+=p[m-2],r+=p[m-1];break;case"S":y=n,w=r,I=i.len(),R=i.data,e===s.C&&(y+=n-R[I-4],w+=r-R[I-3]),d=s.C,M=p[m++],T=p[m++],n=p[m++],r=p[m++],i.addData(d,y,w,M,T,n,r);break;case"s":y=n,w=r,I=i.len(),R=i.data,e===s.C&&(y+=n-R[I-4],w+=r-R[I-3]),d=s.C,M=n+p[m++],T=r+p[m++],n+=p[m++],r+=p[m++],i.addData(d,y,w,M,T,n,r);break;case"Q":M=p[m++],T=p[m++],n=p[m++],r=p[m++],d=s.Q,i.addData(d,M,T,n,r);break;case"q":M=p[m++]+n,T=p[m++]+r,n+=p[m++],r+=p[m++],d=s.Q,i.addData(d,M,T,n,r);break;case"T":y=n,w=r,I=i.len(),R=i.data,e===s.Q&&(y+=n-R[I-4],w+=r-R[I-3]),n=p[m++],r=p[m++],d=s.Q,i.addData(d,y,w,n,r);break;case"t":y=n,w=r,I=i.len(),R=i.data,e===s.Q&&(y+=n-R[I-4],w+=r-R[I-3]),n+=p[m++],r+=p[m++],d=s.Q,i.addData(d,y,w,n,r);break;case"A":b=p[m++],x=p[m++],S=p[m++],C=p[m++],_=p[m++],Ps(M=n,T=r,n=p[m++],r=p[m++],C,_,b,x,S,d=s.A,i);break;case"a":b=p[m++],x=p[m++],S=p[m++],C=p[m++],_=p[m++],Ps(M=n,T=r,n+=p[m++],r+=p[m++],C,_,b,x,S,d=s.A,i)}}("z"===c||"Z"===c)&&(d=s.Z,i.addData(d),n=o,r=a),e=d}return i.toStatic(),i}(t),n=Tw({},e);return n.buildPath=function(t){if(Pc(t)){t.setData(i.data);var e=t.getContext();e&&t.rebuildPath(e,1)}else{var e=t;i.rebuildPath(e,1)}},n.applyTransform=function(t){O7(i,t),this.dirtyShape()},n}function Pp(t,e){e=e||{};var i=new DB;return t.shape&&i.setShape(t.shape),i.setStyle(t.style),e.bakeTransform?O7(i.path,t.getComputedTransform()):e.toLocal?i.setLocalTransform(t.getComputedTransform()):i.copyTransform(t),i.buildPath=t.buildPath,i.applyTransform=i.applyTransform,i.z=t.z,i.z2=t.z2,i.zlevel=t.zlevel,i}var Pf=function(){this.cx=0,this.cy=0,this.r=0},Pg=function(t){function e(e){return t.call(this,e)||this}return T6(e,t),e.prototype.getDefaultShape=function(){return new Pf},e.prototype.buildPath=function(t,e){t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI)},e}(DB);Pg.prototype.type="circle";var Pm=Pg,Py=function(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},Pv=function(t){function e(e){return t.call(this,e)||this}return T6(e,t),e.prototype.getDefaultShape=function(){return new Py},e.prototype.buildPath=function(t,e){var i=e.cx,n=e.cy,r=e.rx,o=e.ry,a=.5522848*r,s=.5522848*o;t.moveTo(i-r,n),t.bezierCurveTo(i-r,n-s,i-a,n-o,i,n-o),t.bezierCurveTo(i+a,n-o,i+r,n-s,i+r,n),t.bezierCurveTo(i+r,n+s,i+a,n+o,i,n+o),t.bezierCurveTo(i-a,n+o,i-r,n+s,i-r,n),t.closePath()},e}(DB);Pv.prototype.type="ellipse";var Pw=Pv,Pb=Math.PI,Px=2*Pb,PS=Math.sin,PC=Math.cos,P_=Math.acos,PM=Math.atan2,PT=Math.abs,PI=Math.sqrt,PR=Math.max,PE=Math.min;function PA(t,e,i,n,r,o,a){var s=t-i,l=e-n,h=(a?o:-o)/PI(s*s+l*l),u=h*l,c=-h*s,d=t+u,p=e+c,f=i+u,g=n+c,m=(d+f)/2,y=(p+g)/2,w=f-d,b=g-p,x=w*w+b*b,S=r-o,C=d*g-f*p,_=(b<0?-1:1)*PI(PR(0,S*S*x-C*C)),M=(C*b-w*_)/x,T=(-C*w-b*_)/x,I=(C*b+w*_)/x,R=(-C*w+b*_)/x,E=M-m,A=T-y,k=I-m,D=R-y;return E*E+A*A>k*k+D*D&&(M=I,T=R),{cx:M,cy:T,x0:-u,y0:-c,x1:M*(r/S-1),y1:T*(r/S-1)}}var Pk=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0},PD=function(t){function e(e){return t.call(this,e)||this}return T6(e,t),e.prototype.getDefaultShape=function(){return new Pk},e.prototype.buildPath=function(t,e){!function(t,e){var i,n=PR(e.r,0),r=PR(e.r0||0,0),o=n>0,a=r>0;if(o||a){if(o||(n=r,r=0),r>n){var s=n;n=r,r=s}var l=e.startAngle,h=e.endAngle;if(!(isNaN(l)||isNaN(h))){var u=e.cx,c=e.cy,d=!!e.clockwise,p=PT(h-l),f=p>Px&&p%Px;if(f>1e-4&&(p=f),n>1e-4){if(p>Px-1e-4)t.moveTo(u+n*PC(l),c+n*PS(l)),t.arc(u,c,n,l,h,!d),r>1e-4&&(t.moveTo(u+r*PC(h),c+r*PS(h)),t.arc(u,c,r,h,l,d));else{var g=void 0,m=void 0,y=void 0,w=void 0,b=void 0,x=void 0,S=void 0,C=void 0,_=void 0,M=void 0,T=void 0,I=void 0,R=void 0,E=void 0,A=void 0,k=void 0,D=n*PC(l),O=n*PS(l),P=r*PC(h),L=r*PS(h),N=p>1e-4;if(N){var H=e.cornerRadius;H&&(g=(i=function(t){var e;if(Tk(t)){var i=t.length;if(!i)return t;e=1===i?[t[0],t[0],0,0]:2===i?[t[0],t[0],t[1],t[1]]:3===i?t.concat(t[2]):t}else e=[t,t,t,t];return e}(H))[0],m=i[1],y=i[2],w=i[3]);var V=PT(n-r)/2;if(b=PE(V,y),x=PE(V,w),S=PE(V,g),C=PE(V,m),T=_=PR(b,x),I=M=PR(S,C),(_>1e-4||M>1e-4)&&(R=n*PC(h),E=n*PS(h),A=r*PC(l),k=r*PS(l),p<Pb)){var B=function(t,e,i,n,r,o,a,s){var l=i-t,h=n-e,u=a-r,c=s-o,d=c*l-u*h;if(!(d*d<1e-4))return d=(u*(e-o)-c*(t-r))/d,[t+d*l,e+d*h]}(D,O,A,k,R,E,P,L);if(B){var F=D-B[0],W=O-B[1],z=R-B[0],j=E-B[1],U=1/PS(P_((F*z+W*j)/(PI(F*F+W*W)*PI(z*z+j*j)))/2),G=PI(B[0]*B[0]+B[1]*B[1]);T=PE(_,(n-G)/(U+1)),I=PE(M,(r-G)/(U-1))}}}if(N){if(T>1e-4){var Y=PE(y,T),X=PE(w,T),$=PA(A,k,D,O,n,Y,d),Z=PA(R,E,P,L,n,X,d);t.moveTo(u+$.cx+$.x0,c+$.cy+$.y0),T<_&&Y===X?t.arc(u+$.cx,c+$.cy,T,PM($.y0,$.x0),PM(Z.y0,Z.x0),!d):(Y>0&&t.arc(u+$.cx,c+$.cy,Y,PM($.y0,$.x0),PM($.y1,$.x1),!d),t.arc(u,c,n,PM($.cy+$.y1,$.cx+$.x1),PM(Z.cy+Z.y1,Z.cx+Z.x1),!d),X>0&&t.arc(u+Z.cx,c+Z.cy,X,PM(Z.y1,Z.x1),PM(Z.y0,Z.x0),!d))}else t.moveTo(u+D,c+O),t.arc(u,c,n,l,h,!d)}else t.moveTo(u+D,c+O);if(r>1e-4&&N){if(I>1e-4){var Y=PE(g,I),X=PE(m,I),$=PA(P,L,R,E,r,-X,d),Z=PA(D,O,A,k,r,-Y,d);t.lineTo(u+$.cx+$.x0,c+$.cy+$.y0),I<M&&Y===X?t.arc(u+$.cx,c+$.cy,I,PM($.y0,$.x0),PM(Z.y0,Z.x0),!d):(X>0&&t.arc(u+$.cx,c+$.cy,X,PM($.y0,$.x0),PM($.y1,$.x1),!d),t.arc(u,c,r,PM($.cy+$.y1,$.cx+$.x1),PM(Z.cy+Z.y1,Z.cx+Z.x1),d),Y>0&&t.arc(u+Z.cx,c+Z.cy,Y,PM(Z.y1,Z.x1),PM(Z.y0,Z.x0),!d))}else t.lineTo(u+P,c+L),t.arc(u,c,r,h,l,d)}else t.lineTo(u+P,c+L)}}else t.moveTo(u,c);t.closePath()}}}(t,e)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(DB);PD.prototype.type="sector";var PO=PD,PP=function(){this.cx=0,this.cy=0,this.r=0,this.r0=0},PL=function(t){function e(e){return t.call(this,e)||this}return T6(e,t),e.prototype.getDefaultShape=function(){return new PP},e.prototype.buildPath=function(t,e){var i=e.cx,n=e.cy,r=2*Math.PI;t.moveTo(i+e.r,n),t.arc(i,n,e.r,0,r,!1),t.moveTo(i+e.r0,n),t.arc(i,n,e.r0,0,r,!0)},e}(DB);PL.prototype.type="ring";var PN=PL;function PH(t,e,i){var n=e.smooth,r=e.points;if(r&&r.length>=2){if(n){var o=function(t,e,i,n){var r,o,a,s,l=[],h=[],u=[],c=[];if(n){a=[1/0,1/0],s=[-1/0,-1/0];for(var d=0,p=t.length;d<p;d++)Iu(a,a,t[d]),Ic(s,s,t[d]);Iu(a,a,n[0]),Ic(s,s,n[1])}for(var d=0,p=t.length;d<p;d++){var f=t[d];if(i)r=t[d?d-1:p-1],o=t[(d+1)%p];else if(0===d||d===p-1){l.push(T7(t[d]));continue}else r=t[d-1],o=t[d+1];Ii(h,o,r),Ir(h,h,e);var g=Ia(f,r),m=Ia(f,o),y=g+m;0!==y&&(g/=y,m/=y),Ir(u,h,-g),Ir(c,h,m);var w=It([],f,u),b=It([],f,c);n&&(Ic(w,w,a),Iu(w,w,s),Ic(b,b,a),Iu(b,b,s)),l.push(w),l.push(b)}return i&&l.push(l.shift()),l}(r,n,i,e.smoothConstraint);t.moveTo(r[0][0],r[0][1]);for(var a=r.length,s=0;s<(i?a:a-1);s++){var l=o[2*s],h=o[2*s+1],u=r[(s+1)%a];t.bezierCurveTo(l[0],l[1],h[0],h[1],u[0],u[1])}}else{t.moveTo(r[0][0],r[0][1]);for(var s=1,c=r.length;s<c;s++)t.lineTo(r[s][0],r[s][1])}i&&t.closePath()}}var PV=function(){this.points=null,this.smooth=0,this.smoothConstraint=null},PB=function(t){function e(e){return t.call(this,e)||this}return T6(e,t),e.prototype.getDefaultShape=function(){return new PV},e.prototype.buildPath=function(t,e){PH(t,e,!0)},e}(DB);PB.prototype.type="polygon";var PF=PB,PW=function(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},Pz=function(t){function e(e){return t.call(this,e)||this}return T6(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new PW},e.prototype.buildPath=function(t,e){PH(t,e,!1)},e}(DB);Pz.prototype.type="polyline";var Pj=Pz,PU={},PG=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},PY=function(t){function e(e){return t.call(this,e)||this}return T6(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new PG},e.prototype.buildPath=function(t,e){if(this.subPixelOptimize){var i,n,r,o,a=DY(PU,e,this.style);i=a.x1,n=a.y1,r=a.x2,o=a.y2}else i=e.x1,n=e.y1,r=e.x2,o=e.y2;var s=e.percent;0!==s&&(t.moveTo(i,n),s<1&&(r=i*(1-s)+r*s,o=n*(1-s)+o*s),t.lineTo(r,o))},e.prototype.pointAt=function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]},e}(DB);PY.prototype.type="line";var PX=PY,P$=[],PZ=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function Pq(t,e,i){var n=t.cpx2,r=t.cpy2;return null!=n||null!=r?[(i?Rx:Rb)(t.x1,t.cpx1,t.cpx2,t.x2,e),(i?Rx:Rb)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(i?RI:RT)(t.x1,t.cpx1,t.x2,e),(i?RI:RT)(t.y1,t.cpy1,t.y2,e)]}var PK=function(t){function e(e){return t.call(this,e)||this}return T6(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new PZ},e.prototype.buildPath=function(t,e){var i=e.x1,n=e.y1,r=e.x2,o=e.y2,a=e.cpx1,s=e.cpy1,l=e.cpx2,h=e.cpy2,u=e.percent;0!==u&&(t.moveTo(i,n),null==l||null==h?(u<1&&(RE(i,a,r,u,P$),a=P$[1],r=P$[2],RE(n,s,o,u,P$),s=P$[1],o=P$[2]),t.quadraticCurveTo(a,s,r,o)):(u<1&&(R_(i,a,l,r,u,P$),a=P$[1],l=P$[2],r=P$[3],R_(n,s,h,o,u,P$),s=P$[1],h=P$[2],o=P$[3]),t.bezierCurveTo(a,s,l,h,r,o)))},e.prototype.pointAt=function(t){return Pq(this.shape,t,!1)},e.prototype.tangentAt=function(t){var e=Pq(this.shape,t,!0);return Io(e,e)},e}(DB);PK.prototype.type="bezier-curve";var PQ=PK,PJ=function(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},P0=function(t){function e(e){return t.call(this,e)||this}return T6(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new PJ},e.prototype.buildPath=function(t,e){var i=e.cx,n=e.cy,r=Math.max(e.r,0),o=e.startAngle,a=e.endAngle,s=e.clockwise,l=Math.cos(o),h=Math.sin(o);t.moveTo(l*r+i,h*r+n),t.arc(i,n,r,o,a,!s)},e}(DB);P0.prototype.type="arc";var P1=P0,P2=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="compound",e}return T6(e,t),e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,e=this.shapeChanged(),i=0;i<t.length;i++)e=e||t[i].shapeChanged();e&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),i=0;i<t.length;i++)t[i].path||t[i].createPathProxy(),t[i].path.setScale(e[0],e[1],t[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,e){for(var i=e.paths||[],n=0;n<i.length;n++)i[n].buildPath(t,i[n].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),DB.prototype.getBoundingRect.call(this)},e}(DB),P5=function(){function t(t){this.colorStops=t||[]}return t.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},t}(),P3=function(t){function e(e,i,n,r,o,a){var s=t.call(this,o)||this;return s.x=null==e?0:e,s.y=null==i?0:i,s.x2=null==n?1:n,s.y2=null==r?0:r,s.type="linear",s.global=a||!1,s}return T6(e,t),e}(P5),P4=function(t){function e(e,i,n,r,o){var a=t.call(this,r)||this;return a.x=null==e?.5:e,a.y=null==i?.5:i,a.r=null==n?.5:n,a.type="radial",a.global=o||!1,a}return T6(e,t),e}(P5),P6=[0,0],P8=[0,0],P9=new IY,P7=new IY,Lt=function(){function t(t,e){this._corners=[],this._axes=[],this._origin=[0,0];for(var i=0;i<4;i++)this._corners[i]=new IY;for(var i=0;i<2;i++)this._axes[i]=new IY;t&&this.fromBoundingRect(t,e)}return t.prototype.fromBoundingRect=function(t,e){var i=this._corners,n=this._axes,r=t.x,o=t.y,a=r+t.width,s=o+t.height;if(i[0].set(r,o),i[1].set(a,o),i[2].set(a,s),i[3].set(r,s),e)for(var l=0;l<4;l++)i[l].transform(e);IY.sub(n[0],i[1],i[0]),IY.sub(n[1],i[3],i[0]),n[0].normalize(),n[1].normalize();for(var l=0;l<2;l++)this._origin[l]=n[l].dot(i[0])},t.prototype.intersect=function(t,e){var i=!0,n=!e;return P9.set(1/0,1/0),P7.set(0,0),!this._intersectCheckOneSide(this,t,P9,P7,n,1)&&(i=!1,n)||!this._intersectCheckOneSide(t,this,P9,P7,n,-1)&&(i=!1,n)||n||IY.copy(e,i?P9:P7),i},t.prototype._intersectCheckOneSide=function(t,e,i,n,r,o){for(var a=!0,s=0;s<2;s++){var l=this._axes[s];if(this._getProjMinMaxOnAxis(s,t._corners,P6),this._getProjMinMaxOnAxis(s,e._corners,P8),P6[1]<P8[0]||P6[0]>P8[1]){if(a=!1,r)return a;var h=Math.abs(P8[0]-P6[1]),u=Math.abs(P6[0]-P8[1]);Math.min(h,u)>n.len()&&(h<u?IY.scale(n,l,-h*o):IY.scale(n,l,u*o))}else if(i){var h=Math.abs(P8[0]-P6[1]),u=Math.abs(P6[0]-P8[1]);Math.min(h,u)<i.len()&&(h<u?IY.scale(i,l,h*o):IY.scale(i,l,-u*o))}}return a},t.prototype._getProjMinMaxOnAxis=function(t,e,i){for(var n=this._axes[t],r=this._origin,o=e[0].dot(n)+r[t],a=o,s=o,l=1;l<e.length;l++){var h=e[l].dot(n)+r[t];a=Math.min(h,a),s=Math.max(h,s)}i[0]=a,i[1]=s},t}(),Le=[],Li=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.notClear=!0,e.incremental=!0,e._displayables=[],e._temporaryDisplayables=[],e._cursor=0,e}return T6(e,t),e.prototype.traverse=function(t,e){t.call(e,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,e){e=e||!1;for(var i=0;i<t.length;i++)this.addDisplayable(t[i],e)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(var e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var e=this._displayables[t];e.parent=this,e.update(),e.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var e=this._temporaryDisplayables[t];e.parent=this,e.update(),e.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new I1(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var i=this._displayables[e],n=i.getBoundingRect().clone();i.needLocalTransform()&&n.applyTransform(i.getLocalTransform(Le)),t.union(n)}this._rect=t}return this._rect},e.prototype.contain=function(t,e){var i=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(i[0],i[1])){for(var n=0;n<this._displayables.length;n++)if(this._displayables[n].contain(t,e))return!0}return!1},e}(k1),Ln=Math.max,Lr=Math.min,Lo={};function La(t){return DB.extend(t)}var Ls=function(t,e){var i=Pd(t,e);return function(t){function e(e){var n=t.call(this,e)||this;return n.applyTransform=i.applyTransform,n.buildPath=i.buildPath,n}return T6(e,t),e}(Pu)};function Ll(t,e){return Ls(t,e)}function Lh(t,e){Lo[t]=e}function Lu(t){if(Lo.hasOwnProperty(t))return Lo[t]}function Lc(t,e,i,n){var r=new Pu(Pd(t,e));return i&&("center"===n&&(i=Lp(i,r.getBoundingRect())),Lg(r,i)),r}function Ld(t,e,i){var n=new DU({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){if("center"===i){var r={width:t.width,height:t.height};n.setStyle(Lp(e,r))}}});return n}function Lp(t,e){var i,n=e.width/e.height,r=t.height*n;return i=r<=t.width?t.height:(r=t.width)/n,{x:t.x+t.width/2-r/2,y:t.y+t.height/2-i/2,width:r,height:i}}var Lf=function(t,e){for(var i=[],n=t.length,r=0;r<n;r++){var o=t[r];i.push(o.getUpdatedPathProxy(!0))}var a=new DB(e);return a.createPathProxy(),a.buildPath=function(t){if(Pc(t)){t.appendPath(i);var e=t.getContext();e&&t.rebuildPath(e,1)}},a};function Lg(t,e){if(t.applyTransform){var i=t.getBoundingRect().calculateTransform(e);t.applyTransform(i)}}function Lm(t,e){return DY(t,t,{lineWidth:e}),t}function Ly(t){return DX(t.shape,t.shape,t.style),t}var Lv=D$;function Lw(t,e){for(var i=IB([]);t&&t!==e;)IW(i,t.getLocalTransform(),i),t=t.parent;return i}function Lb(t,e,i){return e&&!TC(e)&&(e=AC.getLocalTransform(e)),i&&(e=IG([],e)),Ih([],t,e)}function Lx(t,e,i){var n=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),o=["left"===t?-n:"right"===t?n:0,"top"===t?-r:"bottom"===t?r:0];return Math.abs((o=Lb(o,e,i))[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function LS(t,e,i){if(t&&e){var n,r=(n={},t.traverse(function(t){!t.isGroup&&t.anid&&(n[t.anid]=t)}),n);e.traverse(function(t){if(!t.isGroup&&t.anid){var e=r[t.anid];if(e){var n=o(t);t.attr(o(e)),OK(t,n,i,On(t).dataIndex)}}})}function o(t){var e={x:t.x,y:t.y,rotation:t.rotation};return null!=t.shape&&(e.shape=Tw({},t.shape)),e}}function LC(t,e){return TM(t,function(t){var i=t[0];i=Lr(i=Ln(i,e.x),e.x+e.width);var n=t[1];return[i,n=Lr(n=Ln(n,e.y),e.y+e.height)]})}function L_(t,e){var i=Ln(t.x,e.x),n=Lr(t.x+t.width,e.x+e.width),r=Ln(t.y,e.y),o=Lr(t.y+t.height,e.y+e.height);if(n>=i&&o>=r)return{x:i,y:r,width:n-i,height:o-r}}function LM(t,e,i){var n=Tw({rectHover:!0},e),r=n.style={strokeNoScale:!0};if(i=i||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(r.image=t.slice(8),Tb(r,i),new DU(n)):Lc(t.replace("path://",""),n,i,"center")}function LT(t,e,i,n,r){for(var o=0,a=r[r.length-1];o<r.length;o++){var s=r[o];if(LI(t,e,i,n,s[0],s[1],a[0],a[1]))return!0;a=s}}function LI(t,e,i,n,r,o,a,s){var l=i-t,h=n-e,u=a-r,c=s-o,d=u*h-l*c;if(d<=1e-6&&d>=-.000001)return!1;var p=t-r,f=e-o,g=(p*h-l*f)/d;if(g<0||g>1)return!1;var m=(p*c-u*f)/d;return!(m<0)&&!(m>1)}function LR(t){var e=t.itemTooltipOption,i=t.componentModel,n=t.itemName,r=TO(e)?{formatter:e}:e,o=i.mainType,a=i.componentIndex,s={componentType:o,name:n,$vars:["name"]};s[o+"Index"]=a;var l=t.formatterParamsExtra;l&&T_(TR(l),function(t){T2(s,t)||(s[t]=l[t],s.$vars.push(t))});var h=On(t.el);h.componentMainType=o,h.componentIndex=a,h.tooltipConfig={name:n,option:Tb({content:n,encodeHTMLContent:!0,formatterParams:s},r)}}function LE(t,e){var i;t.isGroup&&(i=e(t)),i||t.traverse(e)}function LA(t,e){if(t){if(Tk(t))for(var i=0;i<t.length;i++)LE(t[i],e);else LE(t,e)}}Lo.circle=Pm,Lo.ellipse=Pw,Lo.sector=PO,Lo.ring=PN,Lo.polygon=PF,Lo.polyline=Pj,Lo.rect=DK,Lo.line=PX,Lo.bezierCurve=PQ,Lo.arc=P1;var Lk={};function LD(t,e){for(var i=0;i<Oh.length;i++){var n=Oh[i],r=e[n],o=t.ensureState(n);o.style=o.style||{},o.style.text=r}var a=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:e.normal}),t.useStates(a,!0)}function LO(t,e,i){var n,r=t.labelFetcher,o=t.labelDataIndex,a=t.labelDimIndex,s=e.normal;r&&(n=r.getFormattedLabel(o,"normal",null,a,s&&s.get("formatter"),null!=i?{interpolatedValue:i}:null)),null==n&&(n=TD(t.defaultText)?t.defaultText(o,t,i):t.defaultText);for(var l={normal:n},h=0;h<Oh.length;h++){var u=Oh[h],c=e[u];l[u]=Tz(r?r.getFormattedLabel(o,u,null,a,c&&c.get("formatter")):null,n)}return l}function LP(t,e,i,n){i=i||Lk;for(var r=t instanceof D0,o=!1,a=0;a<Ou.length;a++){var s=e[Ou[a]];if(s&&s.getShallow("show")){o=!0;break}}var l=r?t:t.getTextContent();if(o){!r&&(l||(l=new D0,t.setTextContent(l)),t.stateProxy&&(l.stateProxy=t.stateProxy));var h=LO(i,e),u=e.normal,c=!!u.getShallow("show"),d=LN(u,n&&n.normal,i,!1,!r);d.text=h.normal,r||t.setTextConfig(LH(u,i,!1));for(var a=0;a<Oh.length;a++){var p=Oh[a],s=e[p];if(s){var f=l.ensureState(p),g=!!Tz(s.getShallow("show"),c);g!==c&&(f.ignore=!g),f.style=LN(s,n&&n[p],i,!0,!r),f.style.text=h[p],r||(t.ensureState(p).textConfig=LH(s,i,!0))}}l.silent=!!u.getShallow("silent"),null!=l.style.x&&(d.x=l.style.x),null!=l.style.y&&(d.y=l.style.y),l.ignore=!c,l.useStyle(d),l.dirty(),i.enableTextSetter&&(Lj(l).setLabelText=function(t){var n=LO(i,e,t);LD(l,n)})}else l&&(l.ignore=!0);t.dirty()}function LL(t,e){e=e||"label";for(var i={normal:t.getModel(e)},n=0;n<Oh.length;n++){var r=Oh[n];i[r]=t.getModel([r,e])}return i}function LN(t,e,i,n,r){var o={};return function(t,e,i,n,r){i=i||Lk;var o,a=e.ecModel,s=a&&a.option.textStyle,l=function(t){for(var e;t&&t!==t.ecModel;){var i=(t.option||Lk).rich;if(i){e=e||{};for(var n=TR(i),r=0;r<n.length;r++)e[n[r]]=1}t=t.parentModel}return e}(e);if(l){for(var h in o={},l)if(l.hasOwnProperty(h)){var u=e.getModel(["rich",h]);LW(o[h]={},u,s,i,n,r,!1,!0)}}o&&(t.rich=o);var c=e.get("overflow");c&&(t.overflow=c);var d=e.get("minMargin");null!=d&&(t.margin=d),LW(t,e,s,i,n,r,!0,!1)}(o,t,i,n,r),e&&Tw(o,e),o}function LH(t,e,i){e=e||{};var n,r={},o=t.getShallow("rotate"),a=Tz(t.getShallow("distance"),i?null:5),s=t.getShallow("offset");return"outside"===(n=t.getShallow("position")||(i?null:"inside"))&&(n=e.defaultOutsidePosition||"top"),null!=n&&(r.position=n),null!=s&&(r.offset=s),null!=o&&(o*=Math.PI/180,r.rotation=o),null!=a&&(r.distance=a),r.outsideFill="inherit"===t.get("color")?e.inheritColor||null:"auto",r}var LV=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],LB=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],LF=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function LW(t,e,i,n,r,o,a,s){i=!r&&i||Lk;var l=n&&n.inheritColor,h=e.getShallow("color"),u=e.getShallow("textBorderColor"),c=Tz(e.getShallow("opacity"),i.opacity);("inherit"===h||"auto"===h)&&(h=l||null),("inherit"===u||"auto"===u)&&(u=l||null),o||(h=h||i.color,u=u||i.textBorderColor),null!=h&&(t.fill=h),null!=u&&(t.stroke=u);var d=Tz(e.getShallow("textBorderWidth"),i.textBorderWidth);null!=d&&(t.lineWidth=d);var p=Tz(e.getShallow("textBorderType"),i.textBorderType);null!=p&&(t.lineDash=p);var f=Tz(e.getShallow("textBorderDashOffset"),i.textBorderDashOffset);null!=f&&(t.lineDashOffset=f),r||null!=c||s||(c=n&&n.defaultOpacity),null!=c&&(t.opacity=c),r||o||null!=t.fill||!n.inheritColor||(t.fill=n.inheritColor);for(var g=0;g<LV.length;g++){var m=LV[g],y=Tz(e.getShallow(m),i[m]);null!=y&&(t[m]=y)}for(var g=0;g<LB.length;g++){var m=LB[g],y=e.getShallow(m);null!=y&&(t[m]=y)}if(null==t.verticalAlign){var w=e.getShallow("baseline");null!=w&&(t.verticalAlign=w)}if(!a||!n.disableBox){for(var g=0;g<LF.length;g++){var m=LF[g],y=e.getShallow(m);null!=y&&(t[m]=y)}var b=e.getShallow("borderType");null!=b&&(t.borderDash=b),("auto"===t.backgroundColor||"inherit"===t.backgroundColor)&&l&&(t.backgroundColor=l),("auto"===t.borderColor||"inherit"===t.borderColor)&&l&&(t.borderColor=l)}}function Lz(t,e){var i=e&&e.getModel("textStyle");return TX([t.fontStyle||i&&i.getShallow("fontStyle")||"",t.fontWeight||i&&i.getShallow("fontWeight")||"",(t.fontSize||i&&i.getShallow("fontSize")||12)+"px",t.fontFamily||i&&i.getShallow("fontFamily")||"sans-serif"].join(" "))}var Lj=kg();function LU(t,e,i,n){if(t){var r=Lj(t);r.prevValue=r.value,r.value=i;var o=e.normal;r.valueAnimation=o.get("valueAnimation"),r.valueAnimation&&(r.precision=o.get("precision"),r.defaultInterpolatedText=n,r.statesModels=e)}}function LG(t,e,i,n,r){var o=Lj(t);if(o.valueAnimation&&o.prevValue!==o.value){var a=o.defaultInterpolatedText,s=Tz(o.interpolatedValue,o.prevValue),l=o.value;t.percent=0,(null==o.prevValue?OQ:OK)(t,{percent:1},n,e,null,function(n){var h=k_(i,o.precision,s,l,n);o.interpolatedValue=1===n?null:h,LD(t,LO({labelDataIndex:e,labelFetcher:r,defaultText:a?a(h):h+""},o.statesModels,h))})}}var LY=["textStyle","color"],LX=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],L$=new D0,LZ=function(){function t(){}return t.prototype.getTextColor=function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(LY):null)},t.prototype.getFont=function(){return Lz({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(t){for(var e={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},i=0;i<LX.length;i++)e[LX[i]]=this.getShallow(LX[i]);return L$.useStyle(e),L$.update(),L$.getBoundingRect()},t}(),Lq=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],LK=kP(Lq),LQ=function(){function t(){}return t.prototype.getLineStyle=function(t){return LK(this,t)},t}(),LJ=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],L0=kP(LJ),L1=function(){function t(){}return t.prototype.getItemStyle=function(t,e){return L0(this,t,e)},t}(),L2=function(){function t(t,e,i){this.parentModel=e,this.ecModel=i,this.option=t}return t.prototype.init=function(t,e,i){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r]},t.prototype.mergeOption=function(t,e){Ty(this.option,t,!0)},t.prototype.get=function(t,e){return null==t?this.option:this._doGet(this.parsePath(t),!e&&this.parentModel)},t.prototype.getShallow=function(t,e){var i=this.option,n=null==i?i:i[t];if(null==n&&!e){var r=this.parentModel;r&&(n=r.getShallow(t))}return n},t.prototype.getModel=function(e,i){var n=null!=e,r=n?this.parsePath(e):null;return new t(n?this._doGet(r):this.option,i=i||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(r)),this.ecModel)},t.prototype.isEmpty=function(){return null==this.option},t.prototype.restoreData=function(){},t.prototype.clone=function(){return new this.constructor(Tm(this.option))},t.prototype.parsePath=function(t){return"string"==typeof t?t.split("."):t},t.prototype.resolveParentPath=function(t){return t},t.prototype.isAnimationEnabled=function(){if(!M9.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(t,e){var i=this.option;if(!t)return i;for(var n=0;n<t.length&&(!t[n]||null!=(i=i&&"object"==typeof i?i[t[n]]:null));n++);return null==i&&e&&(i=e._doGet(this.resolveParentPath(t),e.parentModel)),i},t}();kR(L2),$=["__\0is_clz",kA++].join("_"),L2.prototype[$]=!0,L2.isInstance=function(t){return!!(t&&t[$])},TS(L2,LQ),TS(L2,L1),TS(L2,kN),TS(L2,LZ);var L5=Math.round(10*Math.random());function L3(t){return[t||"",L5++].join("_")}function L4(t,e){return Ty(Ty({},t,!0),e,!0)}var L6={},L8={},L9=M9.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage||"EN").toUpperCase().indexOf("ZH")>-1?"ZH":"EN";function L7(t,e){L8[t=t.toUpperCase()]=new L2(e),L6[t]=e}L7("EN",{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),L7("ZH",{time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}});var Nt={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Ne="{yyyy}-{MM}-{dd}",Ni={year:"{yyyy}",month:"{yyyy}-{MM}",day:Ne,hour:Ne+" "+Nt.hour,minute:Ne+" "+Nt.minute,second:Ne+" "+Nt.second,millisecond:Nt.none},Nn=["year","month","day","hour","minute","second","millisecond"],Nr=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function No(t,e){return t+="","0000".substr(0,e-t.length)+t}function Na(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function Ns(t,e,i,n){var r=A5(t),o=r[Nu(i)](),a=r[Nc(i)]()+1,s=Math.floor((a-1)/3)+1,l=r[Nd(i)](),h=r["get"+(i?"UTC":"")+"Day"](),u=r[Np(i)](),c=(u-1)%12+1,d=r[Nf(i)](),p=r[Ng(i)](),f=r[Nm(i)](),g=u>=12?"pm":"am",m=g.toUpperCase(),y=(n instanceof L2?n:L8[n||L9]||L8.EN).getModel("time"),w=y.get("month"),b=y.get("monthAbbr"),x=y.get("dayOfWeek"),S=y.get("dayOfWeekAbbr");return(e||"").replace(/{a}/g,g+"").replace(/{A}/g,m+"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,No(o%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,w[a-1]).replace(/{MMM}/g,b[a-1]).replace(/{MM}/g,No(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,No(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,x[h]).replace(/{ee}/g,S[h]).replace(/{e}/g,h+"").replace(/{HH}/g,No(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,No(c+"",2)).replace(/{h}/g,c+"").replace(/{mm}/g,No(d,2)).replace(/{m}/g,d+"").replace(/{ss}/g,No(p,2)).replace(/{s}/g,p+"").replace(/{SSS}/g,No(f,3)).replace(/{S}/g,f+"")}function Nl(t,e){var i=A5(t),n=i[Nc(e)]()+1,r=i[Nd(e)](),o=i[Np(e)](),a=i[Nf(e)](),s=i[Ng(e)](),l=0===i[Nm(e)](),h=l&&0===s,u=h&&0===a,c=u&&0===o,d=c&&1===r;return d&&1===n?"year":d?"month":c?"day":u?"hour":h?"minute":l?"second":"millisecond"}function Nh(t,e,i){var n=TL(t)?A5(t):t;switch(e=e||Nl(t,i)){case"year":return n[Nu(i)]();case"half-year":return n[Nc(i)]()>=6?1:0;case"quarter":return Math.floor((n[Nc(i)]()+1)/4);case"month":return n[Nc(i)]();case"day":return n[Nd(i)]();case"half-day":return n[Np(i)]()/24;case"hour":return n[Np(i)]();case"minute":return n[Nf(i)]();case"second":return n[Ng(i)]();case"millisecond":return n[Nm(i)]()}}function Nu(t){return t?"getUTCFullYear":"getFullYear"}function Nc(t){return t?"getUTCMonth":"getMonth"}function Nd(t){return t?"getUTCDate":"getDate"}function Np(t){return t?"getUTCHours":"getHours"}function Nf(t){return t?"getUTCMinutes":"getMinutes"}function Ng(t){return t?"getUTCSeconds":"getSeconds"}function Nm(t){return t?"getUTCMilliseconds":"getMilliseconds"}function Ny(t){return t?"setUTCMonth":"setMonth"}function Nv(t){return t?"setUTCDate":"setDate"}function Nw(t){return t?"setUTCHours":"setHours"}function Nb(t){return t?"setUTCMinutes":"setMinutes"}function Nx(t){return t?"setUTCSeconds":"setSeconds"}function NS(t){return t?"setUTCMilliseconds":"setMilliseconds"}function NC(t){if(!A7(t))return TO(t)?t:"-";var e=(t+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function N_(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}function NM(t,e,i){function n(t){return t&&TX(t)?t:"-"}function r(t){return!!(null!=t&&!isNaN(t)&&isFinite(t))}var o="time"===e,a=t instanceof Date;if(o||a){var s=o?A5(t):t;if(!isNaN(+s))return Ns(s,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",i);if(a)return"-"}if("ordinal"===e)return TP(t)?n(t):TL(t)&&r(t)?t+"":"-";var l=A9(t);return r(l)?NC(l):TP(t)?n(t):"boolean"==typeof t?t+"":"-"}var NT=["a","b","c","d","e","f","g"],NI=function(t,e){return"{"+t+(null==e?"":e)+"}"};function NR(t,e,i){Tk(e)||(e=[e]);var n=e.length;if(!n)return"";for(var r=e[0].$vars||[],o=0;o<r.length;o++){var a=NT[o];t=t.replace(NI(a),NI(a,0))}for(var s=0;s<n;s++)for(var l=0;l<r.length;l++){var h=e[s][r[l]];t=t.replace(NI(NT[l],s),i?I_(h):h)}return t}function NE(t,e){return e=e||"transparent",TO(t)?t:TN(t)&&t.colorStops&&(t.colorStops[0]||{}).color||e}function NA(t,e){if("_blank"===e||"blank"===e){var i=window.open();i.opener=null,i.location.href=t}else window.open(t,e)}var Nk=["left","right","top","bottom","width","height"],ND=[["width","left","right"],["height","top","bottom"]];function NO(t,e,i,n,r){var o=0,a=0;null==n&&(n=1/0),null==r&&(r=1/0);var s=0;e.eachChild(function(l,h){var u,c,d=l.getBoundingRect(),p=e.childAt(h+1),f=p&&p.getBoundingRect();if("horizontal"===t){var g=d.width+(f?-f.x+d.x:0);(u=o+g)>n||l.newline?(o=0,u=g,a+=s+i,s=d.height):s=Math.max(s,d.height)}else{var m=d.height+(f?-f.y+d.y:0);(c=a+m)>r||l.newline?(o+=s+i,a=0,c=m,s=d.width):s=Math.max(s,d.width)}l.newline||(l.x=o,l.y=a,l.markRedraw(),"horizontal"===t?o=u+i:a=c+i)})}function NP(t,e,i){i=TG(i||0);var n=e.width,r=e.height,o=AZ(t.left,n),a=AZ(t.top,r),s=AZ(t.right,n),l=AZ(t.bottom,r),h=AZ(t.width,n),u=AZ(t.height,r),c=i[2]+i[0],d=i[1]+i[3],p=t.aspect;switch(isNaN(h)&&(h=n-s-d-o),isNaN(u)&&(u=r-l-c-a),null!=p&&(isNaN(h)&&isNaN(u)&&(p>n/r?h=.8*n:u=.8*r),isNaN(h)&&(h=p*u),isNaN(u)&&(u=h/p)),isNaN(o)&&(o=n-s-h-d),isNaN(a)&&(a=r-l-u-c),t.left||t.right){case"center":o=n/2-h/2-i[3];break;case"right":o=n-h-d}switch(t.top||t.bottom){case"middle":case"center":a=r/2-u/2-i[0];break;case"bottom":a=r-u-c}o=o||0,a=a||0,isNaN(h)&&(h=n-d-o-(s||0)),isNaN(u)&&(u=r-c-a-(l||0));var f=new I1(o+i[3],a+i[0],h,u);return f.margin=i,f}function NL(t,e,i,n,r,o){var a,s=!r||!r.hv||r.hv[0],l=!r||!r.hv||r.hv[1],h=r&&r.boundingMode||"all";if((o=o||t).x=t.x,o.y=t.y,!s&&!l)return!1;if("raw"===h)a="group"===t.type?new I1(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(a=t.getBoundingRect(),t.needLocalTransform()){var u=t.getLocalTransform();(a=a.clone()).applyTransform(u)}var c=NP(Tb({width:a.width,height:a.height},e),i,n),d=s?c.x-a.x:0,p=l?c.y-a.y:0;return"raw"===h?(o.x=d,o.y=p):(o.x+=d,o.y+=p),o===t&&t.markRedraw(),!0}function NN(t){var e=t.layoutMode||t.constructor.layoutMode;return TN(e)?e:e?{type:e}:null}function NH(t,e,i){var n=i&&i.ignoreSize;Tk(n)||(n=[n,n]);var r=a(ND[0],0),o=a(ND[1],1);function a(i,r){var o={},a=0,h={},u=0;if(T_(i,function(e){h[e]=t[e]}),T_(i,function(t){s(e,t)&&(o[t]=h[t]=e[t]),l(o,t)&&a++,l(h,t)&&u++}),n[r])return l(e,i[1])?h[i[2]]=null:l(e,i[2])&&(h[i[1]]=null),h;if(2===u||!a)return h;if(a>=2)return o;for(var c=0;c<i.length;c++){var d=i[c];if(!s(o,d)&&s(t,d)){o[d]=t[d];break}}return o}function s(t,e){return t.hasOwnProperty(e)}function l(t,e){return null!=t[e]&&"auto"!==t[e]}function h(t,e,i){T_(t,function(t){e[t]=i[t]})}h(ND[0],t,r),h(ND[1],t,o)}function NV(t){return NB({},t)}function NB(t,e){return e&&t&&T_(Nk,function(i){e.hasOwnProperty(i)&&(t[i]=e[i])}),t}TA(NO,"vertical"),TA(NO,"horizontal");var NF=kg(),NW=function(t){var e;function i(e,i,n){var r=t.call(this,e,i,n)||this;return r.uid=L3("ec_cpt_model"),r}return M6(i,t),i.prototype.init=function(t,e,i){this.mergeDefaultAndTheme(t,i)},i.prototype.mergeDefaultAndTheme=function(t,e){var i=NN(this),n=i?NV(t):{};Ty(t,e.getTheme().get(this.mainType)),Ty(t,this.getDefaultOption()),i&&NH(t,n,i)},i.prototype.mergeOption=function(t,e){Ty(this.option,t,!0);var i=NN(this);i&&NH(this.option,t,i)},i.prototype.optionUpdated=function(t,e){},i.prototype.getDefaultOption=function(){var t=this.constructor;if(!(t&&t[kT]))return t.defaultOption;var e=NF(this);if(!e.defaultOption){for(var i=[],n=t;n;){var r=n.prototype.defaultOption;r&&i.push(r),n=n.superClass}for(var o={},a=i.length-1;a>=0;a--)o=Ty(o,i[a],!0);e.defaultOption=o}return e.defaultOption},i.prototype.getReferringComponents=function(t,e){return kx(this.ecModel,t,{index:this.get(t+"Index",!0),id:this.get(t+"Id",!0)},e)},i.prototype.getBoxLayoutParams=function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}},i.prototype.getZLevelKey=function(){return""},i.prototype.setZLevel=function(t){this.option.zlevel=t},i.protoInitialize=void((e=i.prototype).type="component",e.id="",e.name="",e.mainType="",e.subType="",e.componentIndex=0),i}(L2);kE(NW,L2),kO(NW),Z={},NW.registerSubTypeDefaulter=function(t,e){Z[kI(t).main]=e},NW.determineSubType=function(t,e){var i=e.type;if(!i){var n=kI(t).main;NW.hasSubTypes(t)&&Z[n]&&(i=Z[n](e))}return i},function(t,e){t.topologicalTravel=function(t,n,r,o){if(t.length){var a,s,l=(a={},s=[],T_(n,function(t){var r,o,l=i(a,t),h=(r=l.originalDeps=e(t),o=[],T_(r,function(t){Tx(n,t)>=0&&o.push(t)}),o);l.entryCount=h.length,0===l.entryCount&&s.push(t),T_(h,function(e){0>Tx(l.predecessor,e)&&l.predecessor.push(e);var n=i(a,e);0>Tx(n.successor,e)&&n.successor.push(t)})}),{graph:a,noEntryList:s}),h=l.graph,u=l.noEntryList,c={};for(T_(t,function(t){c[t]=!0});u.length;){var d=u.pop(),p=h[d],f=!!c[d];f&&(r.call(o,d,p.originalDeps.slice()),delete c[d]),T_(p.successor,f?m:g)}T_(c,function(){throw Error("")})}function g(t){h[t].entryCount--,0===h[t].entryCount&&u.push(t)}function m(t){c[t]=!0,g(t)}};function i(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}}(NW,function(t){var e=[];return T_(NW.getClassesByMainType(t),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=TM(e,function(t){return kI(t).main}),"dataset"!==t&&0>=Tx(e,"dataset")&&e.unshift("dataset"),e});var Nz="";"undefined"!=typeof navigator&&(Nz=navigator.platform||"");var Nj="rgba(0, 0, 0, 0.2)",NU={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Nj,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Nj,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Nj,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Nj,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Nj,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Nj,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:Nz.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},NG=TQ(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),NY="original",NX="arrayRows",N$="objectRows",NZ="keyedColumns",Nq="typedArray",NK="unknown",NQ="column",NJ={Must:1,Might:2,Not:3},N0=kg();function N1(t,e,i){var n,r,o={},a=N5(e);if(!a||!t)return o;var s=[],l=[],h=N0(e.ecModel).datasetMap,u=a.uid+"_"+i.seriesLayoutBy;T_(t=t.slice(),function(e,i){var a=TN(e)?e:t[i]={name:e};"ordinal"===a.type&&null==n&&(n=i,r=p(a)),o[a.name]=[]});var c=h.get(u)||h.set(u,{categoryWayDim:r,valueWayDim:0});function d(t,e,i){for(var n=0;n<i;n++)t.push(e+n)}function p(t){var e=t.dimsDef;return e?e.length:1}return T_(t,function(t,e){var i=t.name,r=p(t);if(null==n){var a=c.valueWayDim;d(o[i],a,r),d(l,a,r),c.valueWayDim+=r}else if(n===e)d(o[i],0,r),d(s,0,r);else{var a=c.categoryWayDim;d(o[i],a,r),d(l,a,r),c.categoryWayDim+=r}}),s.length&&(o.itemName=s),l.length&&(o.seriesName=l),o}function N2(t,e,i){var n,r={};if(!N5(t))return r;var o=e.sourceFormat,a=e.dimensionsDefine;(o===N$||o===NZ)&&T_(a,function(t,e){(TN(t)?t.name:t)==="name"&&(n=e)});var s=function(){for(var t={},r={},s=[],l=0,h=Math.min(5,i);l<h;l++){var u=N4(e.data,o,e.seriesLayoutBy,a,e.startIndex,l);s.push(u);var c=u===NJ.Not;if(c&&null==t.v&&l!==n&&(t.v=l),null!=t.n&&t.n!==t.v&&(c||s[t.n]!==NJ.Not)||(t.n=l),d(t)&&s[t.n]!==NJ.Not)return t;c||(u===NJ.Might&&null==r.v&&l!==n&&(r.v=l),null!=r.n&&r.n!==r.v||(r.n=l))}function d(t){return null!=t.v&&null!=t.n}return d(t)?t:d(r)?r:null}();if(s){r.value=[s.v];var l=null!=n?n:s.n;r.itemName=[l],r.seriesName=[l]}return r}function N5(t){if(!t.get("data",!0))return kx(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},kw).models[0]}function N3(t,e){return N4(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function N4(t,e,i,n,r,o){var a,s,l;if(TV(t))return NJ.Not;if(n){var h=n[o];TN(h)?(s=h.name,l=h.type):TO(h)&&(s=h)}if(null!=l)return"ordinal"===l?NJ.Must:NJ.Not;if(e===NX){if("row"===i){for(var u=t[o],c=0;c<(u||[]).length&&c<5;c++)if(null!=(a=g(u[r+c])))return a}else for(var c=0;c<t.length&&c<5;c++){var d=t[r+c];if(d&&null!=(a=g(d[o])))return a}}else if(e===N$){if(!s)return NJ.Not;for(var c=0;c<t.length&&c<5;c++){var p=t[c];if(p&&null!=(a=g(p[s])))return a}}else if(e===NZ){if(!s)return NJ.Not;var u=t[s];if(!u||TV(u))return NJ.Not;for(var c=0;c<u.length&&c<5;c++)if(null!=(a=g(u[c])))return a}else if(e===NY)for(var c=0;c<t.length&&c<5;c++){var p=t[c],f=ks(p);if(!Tk(f))return NJ.Not;if(null!=(a=g(f[o])))return a}function g(t){var e=TO(t);return null!=t&&Number.isFinite(Number(t))&&""!==t?e?NJ.Might:NJ.Not:e&&"-"!==t?NJ.Must:void 0}return NJ.Not}var N6=TQ(),N8=kg(),N9=kg(),N7=function(){function t(){}return t.prototype.getColorFromPalette=function(t,e,i){return He(this,N8,kr(this.get("color",!0)),this.get("colorLayer",!0),t,e,i)},t.prototype.clearColorPalette=function(){N8(this).paletteIdx=0,N8(this).paletteNameMap={}},t}();function Ht(t,e,i,n){var r=kr(t.get(["aria","decal","decals"]));return He(t,N9,r,null,e,i,n)}function He(t,e,i,n,r,o,a){var s=e(o=o||t),l=s.paletteIdx||0,h=s.paletteNameMap=s.paletteNameMap||{};if(h.hasOwnProperty(r))return h[r];var u=null!=a&&n?function(t,e){for(var i=t.length,n=0;n<i;n++)if(t[n].length>e)return t[n];return t[i-1]}(n,a):i;if((u=u||i)&&u.length){var c=u[l];return r&&(h[r]=c),s.paletteIdx=(l+1)%u.length,c}}function Hi(t){throw Error(t)}var Hn="\0_ec_inner",Hr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.init=function(t,e,i,n,r,o){n=n||{},this.option=null,this._theme=new L2(n),this._locale=new L2(r),this._optionManager=o},e.prototype.setOption=function(t,e,i){var n=Hs(e);this._optionManager.setOption(t,i,n),this._resetOption(null,n)},e.prototype.resetOption=function(t,e){return this._resetOption(t,Hs(e))},e.prototype._resetOption=function(t,e){var i=!1,n=this._optionManager;if(!t||"recreate"===t){var r=n.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this._mergeOption(r,e)):tx(this,r),i=!0}if(("timeline"===t||"media"===t)&&this.restoreData(),!t||"recreate"===t||"timeline"===t){var o=n.getTimelineOption(this);o&&(i=!0,this._mergeOption(o,e))}if(!t||"recreate"===t||"media"===t){var a=n.getMediaOption(this);a.length&&T_(a,function(t){i=!0,this._mergeOption(t,e)},this)}return i},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,e){var i=this.option,n=this._componentsMap,r=this._componentsCount,o=[],a=TQ(),s=e&&e.replaceMergeMainTypeMap;N0(this).datasetMap=TQ(),T_(t,function(t,e){null!=t&&(NW.hasClass(e)?e&&(o.push(e),a.set(e,!0)):i[e]=null==i[e]?Tm(t):Ty(i[e],t,!0))}),s&&s.each(function(t,e){NW.hasClass(e)&&!a.get(e)&&(o.push(e),a.set(e,!0))}),NW.topologicalTravel(o,NW.getAllClassMainTypes(),function(e){var o,a=function(t,e,i){var n=N6.get(e);if(!n)return i;var r=n(t);return r?i.concat(r):i}(this,e,kr(t[e])),l=n.get(e),h=l?s&&s.get(e)?"replaceMerge":"normalMerge":"replaceAll",u=kl(l,a,h);T_(u,function(t){var i,n=t.newOption;TN(n)&&(t.keyInfo.mainType=e,t.keyInfo.subType=(i=t.existing,n.type?n.type:i?i.subType:NW.determineSubType(e,n)))}),i[e]=null,n.set(e,null),r.set(e,0);var c=[],d=[],p=0;T_(u,function(t,i){var n=t.existing,r=t.newOption;if(r){var a="series"===e,s=NW.getClass(e,t.keyInfo.subType,!a);if(!s)return;if("tooltip"===e){if(o)return;o=!0}if(n&&n.constructor===s)n.name=t.keyInfo.name,n.mergeOption(r,this),n.optionUpdated(r,!1);else{var l=Tw({componentIndex:i},t.keyInfo);Tw(n=new s(r,this,this,l),l),t.brandNew&&(n.__requireNewView=!0),n.init(r,this,this),n.optionUpdated(null,!0)}}else n&&(n.mergeOption({},this),n.optionUpdated({},!1));n?(c.push(n.option),d.push(n),p++):(c.push(void 0),d.push(void 0))},this),i[e]=c,n.set(e,d),r.set(e,p),"series"===e&&tw(this)},this),this._seriesIndices||tw(this)},e.prototype.getOption=function(){var t=Tm(this.option);return T_(t,function(e,i){if(NW.hasClass(i)){for(var n=kr(e),r=n.length,o=!1,a=r-1;a>=0;a--)n[a]&&!kp(n[a])?o=!0:(n[a]=null,!o&&r--);n.length=r,t[i]=n}}),delete t[Hn],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,e){var i=this._componentsMap.get(t);if(i){var n=i[e||0];if(n)return n;if(null==e){for(var r=0;r<i.length;r++)if(i[r])return i[r]}}},e.prototype.queryComponents=function(t){var e,i=t.mainType;if(!i)return[];var n=t.index,r=t.id,o=t.name,a=this._componentsMap.get(i);return a&&a.length?(null!=n?(e=[],T_(kr(n),function(t){a[t]&&e.push(a[t])})):e=null!=r?Ho("id",r,a):null!=o?Ho("name",o,a):TI(a,function(t){return!!t}),Ha(e,t)):[]},e.prototype.findComponents=function(t){var e,i,n,r,o=t.query,a=t.mainType,s=(e=a+"Index",i=a+"Id",n=a+"Name",o&&(null!=o[e]||null!=o[i]||null!=o[n])?{mainType:a,index:o[e],id:o[i],name:o[n]}:null);return r=Ha(s?this.queryComponents(s):TI(this._componentsMap.get(a),function(t){return!!t}),t),t.filter?TI(r,t.filter):r},e.prototype.eachComponent=function(t,e,i){var n=this._componentsMap;if(TD(t))n.each(function(i,n){for(var r=0;i&&r<i.length;r++){var o=i[r];o&&t.call(e,n,o,o.componentIndex)}});else for(var r=TO(t)?n.get(t):TN(t)?this.findComponents(t):null,o=0;r&&o<r.length;o++){var a=r[o];a&&e.call(i,a,a.componentIndex)}},e.prototype.getSeriesByName=function(t){var e=kc(t,null);return TI(this._componentsMap.get("series"),function(t){return!!t&&null!=e&&t.name===e})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return TI(this._componentsMap.get("series"),function(e){return!!e&&e.subType===t})},e.prototype.getSeries=function(){return TI(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,e){tb(this),T_(this._seriesIndices,function(i){var n=this._componentsMap.get("series")[i];t.call(e,n,i)},this)},e.prototype.eachRawSeries=function(t,e){T_(this._componentsMap.get("series"),function(i){i&&t.call(e,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(t,e,i){tb(this),T_(this._seriesIndices,function(n){var r=this._componentsMap.get("series")[n];r.subType===t&&e.call(i,r,n)},this)},e.prototype.eachRawSeriesByType=function(t,e,i){return T_(this.getSeriesByType(t),e,i)},e.prototype.isSeriesFiltered=function(t){return tb(this),null==this._seriesIndicesMap.get(t.componentIndex)},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,e){tb(this);var i=[];T_(this._seriesIndices,function(n){var r=this._componentsMap.get("series")[n];t.call(e,r,n)&&i.push(n)},this),this._seriesIndices=i,this._seriesIndicesMap=TQ(i)},e.prototype.restoreData=function(t){tw(this);var e=this._componentsMap,i=[];e.each(function(t,e){NW.hasClass(e)&&i.push(e)}),NW.topologicalTravel(i,NW.getAllClassMainTypes(),function(i){T_(e.get(i),function(e){e&&("series"!==i||!function(t,e){if(e){var i=e.seriesIndex,n=e.seriesId,r=e.seriesName;return null!=i&&t.componentIndex!==i||null!=n&&t.id!==n||null!=r&&t.name!==r}}(e,t))&&e.restoreData()})})},e.internalField=void(tw=function(t){var e=t._seriesIndices=[];T_(t._componentsMap.get("series"),function(t){t&&e.push(t.componentIndex)}),t._seriesIndicesMap=TQ(e)},tb=function(t){},tx=function(t,e){t.option={},t.option[Hn]=1,t._componentsMap=TQ({series:[]}),t._componentsCount=TQ();var i,n,r=e.aria;TN(r)&&null==r.enabled&&(r.enabled=!0),i=t._theme.option,n=e.color&&!e.colorLayer,T_(i,function(t,i){"colorLayer"===i&&n||NW.hasClass(i)||("object"==typeof t?e[i]=e[i]?Ty(e[i],t,!1):Tm(t):null!=e[i]||(e[i]=t))}),Ty(e,NU,!1),t._mergeOption(e,null)}),e}(L2);function Ho(t,e,i){if(Tk(e)){var n=TQ();return T_(e,function(t){null!=t&&null!=kc(t,null)&&n.set(t,!0)}),TI(i,function(e){return e&&n.get(e[t])})}var r=kc(e,null);return TI(i,function(e){return e&&null!=r&&e[t]===r})}function Ha(t,e){return e.hasOwnProperty("subType")?TI(t,function(t){return t&&t.subType===e.subType}):t}function Hs(t){var e=TQ();return t&&T_(kr(t.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}TS(Hr,N7);var Hl=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],Hh=function(t){T_(Hl,function(e){this[e]=TE(t[e],t)},this)},Hu={},Hc=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(t,e){var i=[];T_(Hu,function(n,r){var o=n.create(t,e);i=i.concat(o||[])}),this._coordinateSystems=i},t.prototype.update=function(t,e){T_(this._coordinateSystems,function(i){i.update&&i.update(t,e)})},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(t,e){Hu[t]=e},t.get=function(t){return Hu[t]},t}(),Hd=/^(min|max)?(.+)$/,Hp=function(){function t(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return t.prototype.setOption=function(t,e,i){t&&(T_(kr(t.series),function(t){t&&t.data&&TV(t.data)&&(t.data[T$]=!0)}),T_(kr(t.dataset),function(t){t&&t.source&&TV(t.source)&&(t.source[T$]=!0)})),t=Tm(t);var n=this._optionBackup,r=function(t,e,i){var n,r,o=[],a=t.baseOption,s=t.timeline,l=t.options,h=t.media,u=!!t.media,c=!!(l||s||a&&a.timeline);function d(t){T_(e,function(e){e(t,i)})}return a?(r=a).timeline||(r.timeline=s):((c||u)&&(t.options=t.media=null),r=t),u&&Tk(h)&&T_(h,function(t){t&&t.option&&(t.query?o.push(t):n||(n=t))}),d(r),T_(l,function(t){return d(t)}),T_(o,function(t){return d(t.option)}),{baseOption:r,timelineOptions:l||[],mediaDefault:n,mediaList:o}}(t,e,!n);this._newBaseOption=r.baseOption,n?(r.timelineOptions.length&&(n.timelineOptions=r.timelineOptions),r.mediaList.length&&(n.mediaList=r.mediaList),r.mediaDefault&&(n.mediaDefault=r.mediaDefault)):this._optionBackup=r},t.prototype.mountOption=function(t){var e=this._optionBackup;return this._timelineOptions=e.timelineOptions,this._mediaList=e.mediaList,this._mediaDefault=e.mediaDefault,this._currentMediaIndices=[],Tm(t?e.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(t){var e,i=this._timelineOptions;if(i.length){var n=t.getComponent("timeline");n&&(e=Tm(i[n.getCurrentIndex()]))}return e},t.prototype.getMediaOption=function(t){var e,i,n=this._api.getWidth(),r=this._api.getHeight(),o=this._mediaList,a=this._mediaDefault,s=[],l=[];if(!o.length&&!a)return l;for(var h=0,u=o.length;h<u;h++)(function(t,e,i){var n={width:e,height:i,aspectratio:e/i},r=!0;return T_(t,function(t,e){var i=e.match(Hd);if(i&&i[1]&&i[2]){var o,a=i[1];o=n[i[2].toLowerCase()],("min"===a?o>=t:"max"===a?o<=t:o===t)||(r=!1)}}),r})(o[h].query,n,r)&&s.push(h);return!s.length&&a&&(s=[-1]),s.length&&(e=s,i=this._currentMediaIndices,e.join(",")!==i.join(","))&&(l=TM(s,function(t){return Tm(-1===t?a.option:o[t].option)})),this._currentMediaIndices=s,l},t}(),Hf=TN,Hg=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Hm(t){var e=t&&t.itemStyle;if(e)for(var i=0,n=Hg.length;i<n;i++){var r=Hg[i],o=e.normal,a=e.emphasis;o&&o[r]&&(t[r]=t[r]||{},t[r].normal?Ty(t[r].normal,o[r]):t[r].normal=o[r],o[r]=null),a&&a[r]&&(t[r]=t[r]||{},t[r].emphasis?Ty(t[r].emphasis,a[r]):t[r].emphasis=a[r],a[r]=null)}}function Hy(t,e,i){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var n=t[e].normal,r=t[e].emphasis;n&&(i?(t[e].normal=t[e].emphasis=null,Tb(t[e],n)):t[e]=n),r&&(t.emphasis=t.emphasis||{},t.emphasis[e]=r,r.focus&&(t.emphasis.focus=r.focus),r.blurScope&&(t.emphasis.blurScope=r.blurScope))}}function Hv(t){Hy(t,"itemStyle"),Hy(t,"lineStyle"),Hy(t,"areaStyle"),Hy(t,"label"),Hy(t,"labelLine"),Hy(t,"upperLabel"),Hy(t,"edgeLabel")}function Hw(t,e){var i=Hf(t)&&t[e],n=Hf(i)&&i.textStyle;if(n)for(var r=0,o=ka.length;r<o;r++){var a=ka[r];n.hasOwnProperty(a)&&(i[a]=n[a])}}function Hb(t){t&&(Hv(t),Hw(t,"label"),t.emphasis&&Hw(t.emphasis,"label"))}function Hx(t){return Tk(t)?t:t?[t]:[]}function HS(t){return(Tk(t)?t[0]:t)||{}}function HC(t){t&&T_(H_,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var H_=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],HM=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],HT=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function HI(t){var e=t&&t.itemStyle;if(e)for(var i=0;i<HT.length;i++){var n=HT[i][1],r=HT[i][0];null!=e[n]&&(e[r]=e[n])}}function HR(t){t&&"edge"===t.alignTo&&null!=t.margin&&null==t.edgeDistance&&(t.edgeDistance=t.margin)}function HE(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function HA(t,e){var i;T_(Hx(t.series),function(t){Hf(t)&&function(t){if(Hf(t)){Hm(t),Hv(t),Hw(t,"label"),Hw(t,"upperLabel"),Hw(t,"edgeLabel"),t.emphasis&&(Hw(t.emphasis,"label"),Hw(t.emphasis,"upperLabel"),Hw(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(Hm(e),Hb(e));var i=t.markLine;i&&(Hm(i),Hb(i));var n=t.markArea;n&&Hb(n);var r=t.data;if("graph"===t.type){r=r||t.nodes;var o=t.links||t.edges;if(o&&!TV(o))for(var a=0;a<o.length;a++)Hb(o[a]);T_(t.categories,function(t){Hv(t)})}if(r&&!TV(r))for(var a=0;a<r.length;a++)Hb(r[a]);if((e=t.markPoint)&&e.data)for(var s=e.data,a=0;a<s.length;a++)Hb(s[a]);if((i=t.markLine)&&i.data)for(var l=i.data,a=0;a<l.length;a++)Tk(l[a])?(Hb(l[a][0]),Hb(l[a][1])):Hb(l[a]);"gauge"===t.type?(Hw(t,"axisLabel"),Hw(t,"title"),Hw(t,"detail")):"treemap"===t.type?(Hy(t.breadcrumb,"itemStyle"),T_(t.levels,function(t){Hv(t)})):"tree"===t.type&&Hv(t.leaves)}}(t)}),i=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"],e&&i.push("valueAxis","categoryAxis","logAxis","timeAxis"),T_(i,function(e){T_(Hx(t[e]),function(t){t&&(Hw(t,"axisLabel"),Hw(t.axisPointer,"label"))})}),T_(Hx(t.parallel),function(t){var e=t&&t.parallelAxisDefault;Hw(e,"axisLabel"),Hw(e&&e.axisPointer,"label")}),T_(Hx(t.calendar),function(t){Hy(t,"itemStyle"),Hw(t,"dayLabel"),Hw(t,"monthLabel"),Hw(t,"yearLabel")}),T_(Hx(t.radar),function(t){Hw(t,"name"),t.name&&null==t.axisName&&(t.axisName=t.name,delete t.name),null!=t.nameGap&&null==t.axisNameGap&&(t.axisNameGap=t.nameGap,delete t.nameGap)}),T_(Hx(t.geo),function(t){Hf(t)&&(Hb(t),T_(Hx(t.regions),function(t){Hb(t)}))}),T_(Hx(t.timeline),function(t){Hb(t),Hy(t,"label"),Hy(t,"itemStyle"),Hy(t,"controlStyle",!0);var e=t.data;Tk(e)&&T_(e,function(t){TN(t)&&(Hy(t,"label"),Hy(t,"itemStyle"))})}),T_(Hx(t.toolbox),function(t){Hy(t,"iconStyle"),T_(t.feature,function(t){Hy(t,"iconStyle")})}),Hw(HS(t.axisPointer),"label"),Hw(HS(t.tooltip).axisPointer,"label"),t.series=kr(t.series),T_(t.series,function(t){if(TN(t)){var e=t.type;if("line"===e)null!=t.clipOverflow&&(t.clip=t.clipOverflow);else if("pie"===e||"gauge"===e){null!=t.clockWise&&(t.clockwise=t.clockWise),HR(t.label);var i=t.data;if(i&&!TV(i))for(var n=0;n<i.length;n++)HR(i[n]);null!=t.hoverOffset&&(t.emphasis=t.emphasis||{},t.emphasis.scaleSize=null)}else if("gauge"===e){var r=function(t,e){for(var i=e.split(","),n=t,r=0;r<i.length&&null!=(n=n&&n[i[r]]);r++);return n}(t,"pointer.color");null!=r&&function(t,e,i,n){for(var r,o=e.split(","),a=t,s=0;s<o.length-1;s++)null==a[r=o[s]]&&(a[r]={}),a=a[r];null==a[o[s]]&&(a[o[s]]=i)}(t,"itemStyle.color",r)}else if("bar"===e){HI(t),HI(t.backgroundStyle),HI(t.emphasis);var i=t.data;if(i&&!TV(i))for(var n=0;n<i.length;n++)"object"==typeof i[n]&&(HI(i[n]),HI(i[n]&&i[n].emphasis))}else if("sunburst"===e){var o=t.highlightPolicy;o&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=o)),HE(t),function t(e,i){if(e)for(var n=0;n<e.length;n++)i(e[n]),e[n]&&t(e[n].children,i)}(t.data,HE)}else"graph"===e||"sankey"===e?t&&null!=t.focusNodeAdjacency&&(t.emphasis=t.emphasis||{},null==t.emphasis.focus&&(t.emphasis.focus="adjacency")):"map"===e&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&Tb(t,t.mapLocation));null!=t.hoverAnimation&&(t.emphasis=t.emphasis||{},t.emphasis&&null==t.emphasis.scale&&(t.emphasis.scale=t.hoverAnimation)),HC(t)}}),t.dataRange&&(t.visualMap=t.dataRange),T_(HM,function(e){var i=t[e];i&&(Tk(i)||(i=[i]),T_(i,function(t){HC(t)}))})}function Hk(t){T_(t,function(e,i){var n=[],r=[NaN,NaN],o=[e.stackResultDimension,e.stackedOverDimension],a=e.data,s=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";a.modify(o,function(o,h,u){var c,d,p=a.get(e.stackedDimension,u);if(isNaN(p))return r;s?d=a.getRawIndex(u):c=a.get(e.stackedByDimension,u);for(var f=NaN,g=i-1;g>=0;g--){var m=t[g];if(s||(d=m.data.rawIndexOf(m.stackedByDimension,c)),d>=0){var y=m.data.getByRawIndex(m.stackResultDimension,d);if("all"===l||"positive"===l&&y>0||"negative"===l&&y<0||"samesign"===l&&p>=0&&y>0||"samesign"===l&&p<=0&&y<0){p=function(t,e){var i=Math.max(AQ(t),AQ(e)),n=t+e;return i>20?n:Aq(n,i)}(p,y),f=y;break}}}return n[0]=p,n[1]=f,n})})}var HD=function(t){this.data=t.data||(t.sourceFormat===NZ?{}:[]),this.sourceFormat=t.sourceFormat||NK,this.seriesLayoutBy=t.seriesLayoutBy||NQ,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var e=this.dimensionsDefine=t.dimensionsDefine;if(e)for(var i=0;i<e.length;i++){var n=e[i];null==n.type&&N3(this,i)===NJ.Must&&(n.type="ordinal")}};function HO(t){return t instanceof HD}function HP(t,e,i){i=i||HN(t);var n=e.seriesLayoutBy,r=function(t,e,i,n,r){if(!t)return{dimensionsDefine:HH(r),startIndex:a,dimensionsDetectedCount:o};if(e===NX){var o,a;"auto"===n||null==n?HV(function(t){null!=t&&"-"!==t&&(TO(t)?null==a&&(a=1):a=0)},i,t,10):a=TL(n)?n:n?1:0,r||1!==a||(r=[],HV(function(t,e){r[e]=null!=t?t+"":""},i,t,1/0)),o=r?r.length:"row"===i?t.length:t[0]?t[0].length:null}else if(e===N$)r||(r=function(t){for(var e,i=0;i<t.length&&!(e=t[i++]););if(e)return TR(e)}(t));else if(e===NZ)r||(r=[],T_(t,function(t,e){r.push(e)}));else if(e===NY){var s=ks(t[0]);o=Tk(s)&&s.length||1}return{startIndex:a,dimensionsDefine:HH(r),dimensionsDetectedCount:o}}(t,i,n,e.sourceHeader,e.dimensions);return new HD({data:t,sourceFormat:i,seriesLayoutBy:n,dimensionsDefine:r.dimensionsDefine,startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount,metaRawOption:Tm(e)})}function HL(t){return new HD({data:t,sourceFormat:TV(t)?Nq:NY})}function HN(t){var e=NK;if(TV(t))e=Nq;else if(Tk(t)){0===t.length&&(e=NX);for(var i=0,n=t.length;i<n;i++){var r=t[i];if(null!=r){if(Tk(r)||TV(r)){e=NX;break}if(TN(r)){e=N$;break}}}}else if(TN(t)){for(var o in t)if(T2(t,o)&&TC(t[o])){e=NZ;break}}return e}function HH(t){if(t){var e=TQ();return TM(t,function(t,i){var n={name:(t=TN(t)?t:{name:t}).name,displayName:t.displayName,type:t.type};if(null==n.name)return n;n.name+="",null==n.displayName&&(n.displayName=n.name);var r=e.get(n.name);return r?n.name+="-"+r.count++:e.set(n.name,{count:1}),n})}}function HV(t,e,i,n){if("row"===e)for(var r=0;r<i.length&&r<n;r++)t(i[r]?i[r][0]:null,r);else for(var o=i[0]||[],r=0;r<o.length&&r<n;r++)t(o[r],r)}function HB(t){var e=t.sourceFormat;return e===N$||e===NZ}var HF=function(){var t;function e(t,e){var i=HO(t)?t:HL(t);this._source=i;var n=this._data=i.data;i.sourceFormat===Nq&&(this._offset=0,this._dimSize=e,this._data=n),tT(this,n,i)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,e){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=void((t=e.prototype).pure=!1,t.persistent=!0),e.internalField=function(){tT=function(t,r,o){var a=o.sourceFormat,s=o.seriesLayoutBy,l=o.startIndex,h=o.dimensionsDefine;if(Tw(t,tM[HX(a,s)]),a===Nq)t.getItem=e,t.count=n,t.fillStorage=i;else{var u=Hz[HX(a,s)];t.getItem=TE(u,null,r,l,h);var c=HU[HX(a,s)];t.count=TE(c,null,r,l,h)}};var t,e=function(t,e){t-=this._offset,e=e||[];for(var i=this._data,n=this._dimSize,r=n*t,o=0;o<n;o++)e[o]=i[r+o];return e},i=function(t,e,i,n){for(var r=this._data,o=this._dimSize,a=0;a<o;a++){for(var s=n[a],l=null==s[0]?1/0:s[0],h=null==s[1]?-1/0:s[1],u=e-t,c=i[a],d=0;d<u;d++){var p=r[d*o+a];c[t+d]=p,p<l&&(l=p),p>h&&(h=p)}s[0]=l,s[1]=h}},n=function(){return this._data?this._data.length/this._dimSize:0};function r(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}(t={})[NX+"_"+NQ]={pure:!0,appendData:r},t[NX+"_row"]={pure:!0,appendData:function(){throw Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[N$]={pure:!0,appendData:r},t[NZ]={pure:!0,appendData:function(t){var e=this._data;T_(t,function(t,i){for(var n=e[i]||(e[i]=[]),r=0;r<(t||[]).length;r++)n.push(t[r])})}},t[NY]={appendData:r},t[Nq]={persistent:!1,pure:!0,appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}},tM=t}(),e}(),HW=function(t,e,i,n){return t[n]},Hz=((tS={})[NX+"_"+NQ]=function(t,e,i,n){return t[n+e]},tS[NX+"_row"]=function(t,e,i,n,r){n+=e;for(var o=r||[],a=0;a<t.length;a++){var s=t[a];o[a]=s?s[n]:null}return o},tS[N$]=HW,tS[NZ]=function(t,e,i,n,r){for(var o=r||[],a=0;a<i.length;a++){var s=t[i[a].name];o[a]=s?s[n]:null}return o},tS[NY]=HW,tS),Hj=function(t,e,i){return t.length},HU=((tC={})[NX+"_"+NQ]=function(t,e,i){return Math.max(0,t.length-e)},tC[NX+"_row"]=function(t,e,i){var n=t[0];return n?Math.max(0,n.length-e):0},tC[N$]=Hj,tC[NZ]=function(t,e,i){var n=t[i[0].name];return n?n.length:0},tC[NY]=Hj,tC),HG=function(t,e,i){return t[e]},HY=((t_={})[NX]=HG,t_[N$]=function(t,e,i){return t[i]},t_[NZ]=HG,t_[NY]=function(t,e,i){var n=ks(t);return n instanceof Array?n[e]:n},t_[Nq]=HG,t_);function HX(t,e){return t===NX?t+"_"+e:t}function H$(t,e,i){if(t){var n=t.getRawDataItem(e);if(null!=n){var r=t.getStore(),o=r.getSource().sourceFormat;if(null!=i){var a=t.getDimensionIndex(i),s=r.getDimensionProperty(a);return HY[o](n,a,s)}var l=n;return o===NY&&(l=ks(n)),l}}}var HZ=/\{@(.+?)\}/g,Hq=function(){function t(){}return t.prototype.getDataParams=function(t,e){var i=this.getData(e),n=this.getRawValue(t,e),r=i.getRawIndex(t),o=i.getName(t),a=i.getRawDataItem(t),s=i.getItemVisual(t,"style"),l=s&&s[i.getItemVisual(t,"drawType")||"fill"],h=s&&s.stroke,u=this.mainType,c="series"===u,d=i.userOutput&&i.userOutput.get();return{componentType:u,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:c?this.subType:null,seriesIndex:this.seriesIndex,seriesId:c?this.id:null,seriesName:c?this.name:null,name:o,dataIndex:r,data:a,dataType:e,value:n,color:l,borderColor:h,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(t,e,i,n,r,o){e=e||"normal";var a=this.getData(i),s=this.getDataParams(t,i);return(o&&(s.value=o.interpolatedValue),null!=n&&Tk(s.value)&&(s.value=s.value[n]),r||(r=a.getItemModel(t).get("normal"===e?["label","formatter"]:[e,"label","formatter"])),TD(r))?(s.status=e,s.dimensionIndex=n,r(s)):TO(r)?NR(r,s).replace(HZ,function(e,i){var n=i.length,r=i;"["===r.charAt(0)&&"]"===r.charAt(n-1)&&(r=+r.slice(1,n-1));var s=H$(a,t,r);if(o&&Tk(o.interpolatedValue)){var l=a.getDimensionIndex(r);l>=0&&(s=o.interpolatedValue[l])}return null!=s?s+"":""}):void 0},t.prototype.getRawValue=function(t,e){return H$(this.getData(e),t)},t.prototype.formatTooltip=function(t,e,i){},t}();function HK(t){var e,i;return TN(t)?t.type&&(i=t):e=t,{text:e,frag:i}}function HQ(t){return new HJ(t)}var HJ=function(){function t(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return t.prototype.perform=function(t){var e,i,n,r,o=this._upstream,a=t&&t.skip;if(this._dirty&&o){var s=this.context;s.data=s.outputData=o.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!a&&(n=this._plan(this.context));var l=((e=this._modBy)>=1||(e=1),e),h=this._modDataCount||0,u=((i=t&&t.modBy)>=1||(i=1),i),c=t&&t.modDataCount||0;(l!==u||h!==c)&&(n="reset"),(this._dirty||"reset"===n)&&(this._dirty=!1,r=this._doReset(a)),this._modBy=u,this._modDataCount=c;var d=t&&t.step;if(o?this._dueEnd=o._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var p=this._dueIndex,f=Math.min(null!=d?this._dueIndex+d:1/0,this._dueEnd);if(!a&&(r||p<f)){var g=this._progress;if(Tk(g))for(var m=0;m<g.length;m++)this._doProgress(g[m],p,f,u,c);else this._doProgress(g,p,f,u,c)}this._dueIndex=f;var y=null!=this._settedOutputEnd?this._settedOutputEnd:f;this._outputDueEnd=y}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(t,e,i,n,r){H0.reset(e,i,n,r),this._callingProgress=t,this._callingProgress({start:e,end:i,count:i-e,next:H0.next},this.context)},t.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!t&&this._reset&&((e=this._reset(this.context))&&e.progress&&(i=e.forceFirstProgress,e=e.progress),Tk(e)&&!e.length&&(e=null)),this._progress=e,this._modBy=this._modDataCount=null;var e,i,n=this._downstream;return n&&n.dirty(),i},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},t}(),H0=function(){var t,e,i,n,r,o={reset:function(l,h,u,c){e=l,t=h,i=u,r=Math.ceil((n=c)/i),o.next=i>1&&n>0?s:a}};return o;function a(){return e<t?e++:null}function s(){var o=e%r*i+Math.ceil(e/r),a=e>=t?null:o<n?o:e;return e++,a}}();function H1(t,e){var i=e&&e.type;return"ordinal"===i?t:("time"!==i||TL(t)||null==t||"-"===t||(t=+A5(t)),null==t||""===t?NaN:Number(t))}var H2=TQ({number:function(t){return parseFloat(t)},time:function(t){return+A5(t)},trim:function(t){return TO(t)?TX(t):t}}),H5={lt:function(t,e){return t<e},lte:function(t,e){return t<=e},gt:function(t,e){return t>e},gte:function(t,e){return t>=e}},H3=function(){function t(t,e){TL(e)||Hi(""),this._opFn=H5[t],this._rvalFloat=A9(e)}return t.prototype.evaluate=function(t){return TL(t)?this._opFn(t,this._rvalFloat):this._opFn(A9(t),this._rvalFloat)},t}(),H4=function(){function t(t,e){var i="desc"===t;this._resultLT=i?1:-1,null==e&&(e=i?"min":"max"),this._incomparable="min"===e?-1/0:1/0}return t.prototype.evaluate=function(t,e){var i=TL(t)?t:A9(t),n=TL(e)?e:A9(e),r=isNaN(i),o=isNaN(n);if(r&&(i=this._incomparable),o&&(n=this._incomparable),r&&o){var a=TO(t),s=TO(e);a&&(i=s?t:0),s&&(n=a?e:0)}return i<n?this._resultLT:i>n?-this._resultLT:0},t}(),H6=function(){function t(t,e){this._rval=e,this._isEQ=t,this._rvalTypeof=typeof e,this._rvalFloat=A9(e)}return t.prototype.evaluate=function(t){var e=t===this._rval;if(!e){var i=typeof t;i!==this._rvalTypeof&&("number"===i||"number"===this._rvalTypeof)&&(e=A9(t)===this._rvalFloat)}return this._isEQ?e:!e},t}(),H8=function(){function t(){}return t.prototype.getRawData=function(){throw Error("not supported")},t.prototype.getRawDataItem=function(t){throw Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(t){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(t,e){},t.prototype.retrieveValueFromItem=function(t,e){},t.prototype.convertValue=function(t,e){return H1(t,e)},t}();function H9(t){return Vn(t.sourceFormat)||Hi(""),t.data}function H7(t){var e=t.sourceFormat,i=t.data;if(Vn(e)||Hi(""),e===NX){for(var n=[],r=0,o=i.length;r<o;r++)n.push(i[r].slice());return n}if(e===N$){for(var n=[],r=0,o=i.length;r<o;r++)n.push(Tw({},i[r]));return n}}function Vt(t,e,i){if(null!=i){if(TL(i)||!isNaN(i)&&!T2(e,i))return t[i];if(T2(e,i))return e[i]}}function Ve(t){return Tm(t)}var Vi=TQ();function Vn(t){return t===NX||t===N$}var Vr="undefined",Vo=typeof Uint32Array===Vr?Array:Uint32Array,Va=typeof Uint16Array===Vr?Array:Uint16Array,Vs=typeof Int32Array===Vr?Array:Int32Array,Vl=typeof Float64Array===Vr?Array:Float64Array,Vh={float:Vl,int:Vs,ordinal:Array,number:Array,time:Vl};function Vu(t){return t>65535?Vo:Va}function Vc(){return[1/0,-1/0]}function Vd(t,e,i,n,r){var o=Vh[i||"float"];if(r){var a=t[e],s=a&&a.length;if(s!==n){for(var l=new o(n),h=0;h<s;h++)l[h]=a[h];t[e]=l}}else t[e]=new o(n)}var Vp=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=TQ()}return t.prototype.initData=function(t,e,i){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var n=t.getSource(),r=this.defaultDimValueGetter=tI[n.sourceFormat];this._dimValueGetter=i||r,this._rawExtent=[],HB(n),this._dimensions=TM(e,function(t){return{type:t.type,property:t.property}}),this._initDataFromProvider(0,t.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(t,e){var i=this._calcDimNameToIdx,n=this._dimensions,r=i.get(t);if(null!=r){if(n[r].type===e)return r}else r=n.length;return n[r]={type:e},i.set(t,r),this._chunks[r]=new Vh[e||"float"](this._rawCount),this._rawExtent[r]=Vc(),r},t.prototype.collectOrdinalMeta=function(t,e){var i=this._chunks[t],n=this._dimensions[t],r=this._rawExtent,o=n.ordinalOffset||0,a=i.length;0===o&&(r[t]=Vc());for(var s=r[t],l=o;l<a;l++){var h=i[l]=e.parseAndCollect(i[l]);isNaN(h)||(s[0]=Math.min(h,s[0]),s[1]=Math.max(h,s[1]))}n.ordinalMeta=e,n.ordinalOffset=a,n.type="ordinal"},t.prototype.getOrdinalMeta=function(t){return this._dimensions[t].ordinalMeta},t.prototype.getDimensionProperty=function(t){var e=this._dimensions[t];return e&&e.property},t.prototype.appendData=function(t){var e=this._provider,i=this.count();e.appendData(t);var n=e.count();return e.persistent||(n+=i),i<n&&this._initDataFromProvider(i,n,!0),[i,n]},t.prototype.appendValues=function(t,e){for(var i=this._chunks,n=this._dimensions,r=n.length,o=this._rawExtent,a=this.count(),s=a+Math.max(t.length,e||0),l=0;l<r;l++){var h=n[l];Vd(i,l,h.type,s,!0)}for(var u=[],c=a;c<s;c++)for(var d=c-a,p=0;p<r;p++){var h=n[p],f=tI.arrayRows.call(this,t[d]||u,h.property,d,p);i[p][c]=f;var g=o[p];f<g[0]&&(g[0]=f),f>g[1]&&(g[1]=f)}return this._rawCount=this._count=s,{start:a,end:s}},t.prototype._initDataFromProvider=function(t,e,i){for(var n=this._provider,r=this._chunks,o=this._dimensions,a=o.length,s=this._rawExtent,l=TM(o,function(t){return t.property}),h=0;h<a;h++){var u=o[h];s[h]||(s[h]=Vc()),Vd(r,h,u.type,e,i)}if(n.fillStorage)n.fillStorage(t,e,r,s);else for(var c=[],d=t;d<e;d++){c=n.getItem(d,c);for(var p=0;p<a;p++){var f=r[p],g=this._dimValueGetter(c,l[p],d,p);f[d]=g;var m=s[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}!n.persistent&&n.clean&&n.clean(),this._rawCount=this._count=e,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var i=this._chunks[t];return i?i[this.getRawIndex(e)]:NaN},t.prototype.getValues=function(t,e){var i=[],n=[];if(null==e){e=t,t=[];for(var r=0;r<this._dimensions.length;r++)n.push(r)}else n=t;for(var r=0,o=n.length;r<o;r++)i.push(this.get(n[r],e));return i},t.prototype.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var i=this._chunks[t];return i?i[e]:NaN},t.prototype.getSum=function(t){var e=this._chunks[t],i=0;if(e)for(var n=0,r=this.count();n<r;n++){var o=this.get(t,n);isNaN(o)||(i+=o)}return i},t.prototype.getMedian=function(t){var e=[];this.each([t],function(t){isNaN(t)||e.push(t)});var i=e.sort(function(t,e){return t-e}),n=this.count();return 0===n?0:n%2==1?i[(n-1)/2]:(i[n/2]+i[n/2-1])/2},t.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return -1;if(!this._indices)return t;var e=this._indices,i=e[t];if(null!=i&&i<this._count&&i===t)return t;for(var n=0,r=this._count-1;n<=r;){var o=(n+r)/2|0;if(e[o]<t)n=o+1;else{if(!(e[o]>t))return o;r=o-1}}return -1},t.prototype.indicesOfNearest=function(t,e,i){var n=this._chunks[t],r=[];if(!n)return r;null==i&&(i=1/0);for(var o=1/0,a=-1,s=0,l=0,h=this.count();l<h;l++){var u=e-n[this.getRawIndex(l)],c=Math.abs(u);c<=i&&((c<o||c===o&&u>=0&&a<0)&&(o=c,a=u,s=0),u===a&&(r[s++]=l))}return r.length=s,r},t.prototype.getIndices=function(){var t,e=this._indices;if(e){var i=e.constructor,n=this._count;if(i===Array){t=new i(n);for(var r=0;r<n;r++)t[r]=e[r]}else t=new i(e.buffer,0,n)}else{var i=Vu(this._rawCount);t=new i(this.count());for(var r=0;r<t.length;r++)t[r]=r}return t},t.prototype.filter=function(t,e){if(!this._count)return this;for(var i=this.clone(),n=i.count(),r=new(Vu(i._rawCount))(n),o=[],a=t.length,s=0,l=t[0],h=i._chunks,u=0;u<n;u++){var c=void 0,d=i.getRawIndex(u);if(0===a)c=e(u);else if(1===a)c=e(h[l][d],u);else{for(var p=0;p<a;p++)o[p]=h[t[p]][d];o[p]=u,c=e.apply(null,o)}c&&(r[s++]=d)}return s<n&&(i._indices=r),i._count=s,i._extent=[],i._updateGetRawIdx(),i},t.prototype.selectRange=function(t){var e=this.clone(),i=e._count;if(!i)return this;var n=TR(t),r=n.length;if(!r)return this;var o=e.count(),a=new(Vu(e._rawCount))(o),s=0,l=n[0],h=t[l][0],u=t[l][1],c=e._chunks,d=!1;if(!e._indices){var p=0;if(1===r){for(var f=c[n[0]],g=0;g<i;g++){var m=f[g];(m>=h&&m<=u||isNaN(m))&&(a[s++]=p),p++}d=!0}else if(2===r){for(var f=c[n[0]],y=c[n[1]],w=t[n[1]][0],b=t[n[1]][1],g=0;g<i;g++){var m=f[g],x=y[g];(m>=h&&m<=u||isNaN(m))&&(x>=w&&x<=b||isNaN(x))&&(a[s++]=p),p++}d=!0}}if(!d){if(1===r)for(var g=0;g<o;g++){var S=e.getRawIndex(g),m=c[n[0]][S];(m>=h&&m<=u||isNaN(m))&&(a[s++]=S)}else for(var g=0;g<o;g++){for(var C=!0,S=e.getRawIndex(g),_=0;_<r;_++){var M=n[_],m=c[M][S];(m<t[M][0]||m>t[M][1])&&(C=!1)}C&&(a[s++]=e.getRawIndex(g))}}return s<o&&(e._indices=a),e._count=s,e._extent=[],e._updateGetRawIdx(),e},t.prototype.map=function(t,e){var i=this.clone(t);return this._updateDims(i,t,e),i},t.prototype.modify=function(t,e){this._updateDims(this,t,e)},t.prototype._updateDims=function(t,e,i){for(var n=t._chunks,r=[],o=e.length,a=t.count(),s=[],l=t._rawExtent,h=0;h<e.length;h++)l[e[h]]=Vc();for(var u=0;u<a;u++){for(var c=t.getRawIndex(u),d=0;d<o;d++)s[d]=n[e[d]][c];s[o]=u;var p=i&&i.apply(null,s);if(null!=p){"object"!=typeof p&&(r[0]=p,p=r);for(var h=0;h<p.length;h++){var f=e[h],g=p[h],m=l[f],y=n[f];y&&(y[c]=g),g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}}},t.prototype.lttbDownSample=function(t,e){var i,n,r,o=this.clone([t],!0),a=o._chunks[t],s=this.count(),l=0,h=Math.floor(1/e),u=this.getRawIndex(0),c=new(Vu(this._rawCount))(Math.min((Math.ceil(s/h)+2)*2,s));c[l++]=u;for(var d=1;d<s-1;d+=h){for(var p=Math.min(d+h,s-1),f=Math.min(d+2*h,s),g=(f+p)/2,m=0,y=p;y<f;y++){var w=this.getRawIndex(y),b=a[w];isNaN(b)||(m+=b)}m/=f-p;var x=d,S=Math.min(d+h,s),C=d-1,_=a[u];i=-1,r=x;for(var M=-1,T=0,y=x;y<S;y++){var w=this.getRawIndex(y),b=a[w];if(isNaN(b)){T++,M<0&&(M=w);continue}(n=Math.abs((C-g)*(b-_)-(C-y)*(m-_)))>i&&(i=n,r=w)}T>0&&T<S-x&&(c[l++]=Math.min(M,r),r=Math.max(M,r)),c[l++]=r,u=r}return c[l++]=this.getRawIndex(s-1),o._count=l,o._indices=c,o.getRawIndex=this._getRawIdx,o},t.prototype.downSample=function(t,e,i,n){for(var r=this.clone([t],!0),o=r._chunks,a=[],s=Math.floor(1/e),l=o[t],h=this.count(),u=r._rawExtent[t]=Vc(),c=new(Vu(this._rawCount))(Math.ceil(h/s)),d=0,p=0;p<h;p+=s){s>h-p&&(s=h-p,a.length=s);for(var f=0;f<s;f++){var g=this.getRawIndex(p+f);a[f]=l[g]}var m=i(a),y=this.getRawIndex(Math.min(p+n(a,m)||0,h-1));l[y]=m,m<u[0]&&(u[0]=m),m>u[1]&&(u[1]=m),c[d++]=y}return r._count=d,r._indices=c,r._updateGetRawIdx(),r},t.prototype.each=function(t,e){if(this._count)for(var i=t.length,n=this._chunks,r=0,o=this.count();r<o;r++){var a=this.getRawIndex(r);switch(i){case 0:e(r);break;case 1:e(n[t[0]][a],r);break;case 2:e(n[t[0]][a],n[t[1]][a],r);break;default:for(var s=0,l=[];s<i;s++)l[s]=n[t[s]][a];l[s]=r,e.apply(null,l)}}},t.prototype.getDataExtent=function(t){var e,i=this._chunks[t],n=Vc();if(!i)return n;var r=this.count();if(!this._indices)return this._rawExtent[t].slice();if(e=this._extent[t])return e.slice();for(var o=(e=n)[0],a=e[1],s=0;s<r;s++){var l=i[this.getRawIndex(s)];l<o&&(o=l),l>a&&(a=l)}return e=[o,a],this._extent[t]=e,e},t.prototype.getRawDataItem=function(t){var e=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(e);for(var i=[],n=this._chunks,r=0;r<n.length;r++)i.push(n[r][e]);return i},t.prototype.clone=function(e,i){var n=new t,r=this._chunks,o=e&&TT(e,function(t,e){return t[e]=!0,t},{});if(o)for(var a=0;a<r.length;a++)n._chunks[a]=o[a]?function(t){var e=t.constructor;return e===Array?t.slice():new e(t)}(r[a]):r[a];else n._chunks=r;return this._copyCommonProps(n),i||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},t.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=Tm(this._extent),t._rawExtent=Tm(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,e=void 0;if(t===Array){var i=this._indices.length;e=new t(i);for(var n=0;n<i;n++)e[n]=this._indices[n]}else e=new t(this._indices);return e}return null},t.prototype._getRawIdxIdentity=function(t){return t},t.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function t(t,e,i,n){return H1(t[n],this._dimensions[n])}tI={arrayRows:t,objectRows:function(t,e,i,n){return H1(t[e],this._dimensions[n])},keyedColumns:t,original:function(t,e,i,n){var r=t&&(null==t.value?t:t.value);return H1(r instanceof Array?r[n]:r,this._dimensions[n])},typedArray:function(t,e,i,n){return t[n]}}}(),t}(),Vf=function(){function t(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(t,e){this._sourceList=t,this._upstreamSignList=e,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var t,e,i=this._sourceHost,n=this._getUpstreamSourceManagers(),r=!!n.length;if(Vm(i)){var o=void 0,a=void 0,s=void 0;if(r){var l=n[0];l.prepareSource(),o=(s=l.getSource()).data,a=s.sourceFormat,e=[l._getVersionSign()]}else a=TV(o=i.get("data",!0))?Nq:NY,e=[];var h=this._getSourceMetaRawOption()||{},u=s&&s.metaRawOption||{},c=Tz(h.seriesLayoutBy,u.seriesLayoutBy)||null,d=Tz(h.sourceHeader,u.sourceHeader),p=Tz(h.dimensions,u.dimensions);t=c!==u.seriesLayoutBy||!!d!=!!u.sourceHeader||p?[HP(o,{seriesLayoutBy:c,sourceHeader:d,dimensions:p},a)]:[]}else if(r){var f=this._applyTransform(n);t=f.sourceList,e=f.upstreamSignList}else t=[HP(i.get("source",!0),this._getSourceMetaRawOption(),null)],e=[];this._setLocalSource(t,e)},t.prototype._applyTransform=function(t){var e,i,n=this._sourceHost,r=n.get("transform",!0),o=n.get("fromTransformResult",!0);null!=o&&1!==t.length&&Vy("");var a=[],s=[];return(T_(t,function(t){t.prepareSource();var e=t.getSource(o||0);null==o||e||Vy(""),a.push(e),s.push(t._getVersionSign())}),r)?i=function(t,e,i){var n=kr(t),r=n.length;r||Hi("");for(var o=0;o<r;o++)e=function(t,e,i,n){e.length||Hi(""),TN(t)||Hi("");var r=t.type,o=Vi.get(r);o||Hi("");var a=TM(e,function(t){return function(t,e){var i=new H8,n=t.data,r=i.sourceFormat=t.sourceFormat,o=t.startIndex;t.seriesLayoutBy!==NQ&&Hi("");var a=[],s={},l=t.dimensionsDefine;if(l)T_(l,function(t,e){var i=t.name,n={index:e,name:i,displayName:t.displayName};a.push(n),null!=i&&(T2(s,i)&&Hi(""),s[i]=n)});else for(var h=0;h<t.dimensionsDetectedCount;h++)a.push({index:h});var u=Hz[HX(r,NQ)];e.__isBuiltIn&&(i.getRawDataItem=function(t){return u(n,o,a,t)},i.getRawData=TE(H9,null,t)),i.cloneRawData=TE(H7,null,t);var c=HU[HX(r,NQ)];i.count=TE(c,null,n,o,a);var d=HY[r];i.retrieveValue=function(t,e){return p(u(n,o,a,t),e)};var p=i.retrieveValueFromItem=function(t,e){if(null!=t){var i=a[e];if(i)return d(t,e,i.name)}};return i.getDimensionInfo=TE(Vt,null,a,s),i.cloneAllDimensionInfo=TE(Ve,null,a),i}(t,o)});return TM(kr(o.transform({upstream:a[0],upstreamList:a,config:Tm(t.config)})),function(t,i){TN(t)||Hi(""),t.data||Hi(""),Vn(HN(t.data))||Hi("");var n,r=e[0];if(r&&0===i&&!t.dimensions){var o=r.startIndex;o&&(t.data=r.data.slice(0,o).concat(t.data)),n={seriesLayoutBy:NQ,sourceHeader:o,dimensions:r.metaRawOption.dimensions}}else n={seriesLayoutBy:NQ,sourceHeader:0,dimensions:t.dimensions};return HP(t.data,n,null)})}(n[o],e,0,0),o!==r-1&&(e.length=Math.max(e.length,1));return e}(r,a,n.componentIndex):null!=o&&(i=[new HD({data:(e=a[0]).data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:Tm(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})]),{sourceList:i,upstreamSignList:s}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),e=0;e<t.length;e++){var i=t[e];if(i._isDirty()||this._upstreamSignList[e]!==i._getVersionSign())return!0}},t.prototype.getSource=function(t){t=t||0;var e=this._sourceList[t];if(!e){var i=this._getUpstreamSourceManagers();return i[0]&&i[0].getSource(t)}return e},t.prototype.getSharedDataStore=function(t){var e=t.makeStoreSchema();return this._innerGetDataStore(e.dimensions,t.source,e.hash)},t.prototype._innerGetDataStore=function(t,e,i){var n=this._storeList,r=n[0];r||(r=n[0]={});var o=r[i];if(!o){var a=this._getUpstreamSourceManagers()[0];Vm(this._sourceHost)&&a?o=a._innerGetDataStore(t,e,i):(o=new Vp).initData(new HF(e,t.length),t),r[i]=o}return o},t.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(Vm(t)){var e=N5(t);return e?[e.getSourceManager()]:[]}return TM(t.get("transform",!0)||t.get("fromTransformResult",!0)?kx(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},kw).models:[],function(t){return t.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var t,e,i,n=this._sourceHost;return Vm(n)?(t=n.get("seriesLayoutBy",!0),e=n.get("sourceHeader",!0),i=n.get("dimensions",!0)):this._getUpstreamSourceManagers().length||(t=n.get("seriesLayoutBy",!0),e=n.get("sourceHeader",!0),i=n.get("dimensions",!0)),{seriesLayoutBy:t,sourceHeader:e,dimensions:i}},t}();function Vg(t){t.option.transform&&(t.option.transform[T$]=!0)}function Vm(t){return"series"===t.mainType}function Vy(t){throw Error(t)}var Vv="line-height:1";function Vw(t,e){var i=t.color||"#6e7079",n=t.fontSize||12,r=t.fontWeight||"400",o=t.color||"#464646",a=t.fontSize||14,s=t.fontWeight||"900";return"html"===e?{nameStyle:"font-size:"+I_(n+"")+"px;color:"+I_(i)+";font-weight:"+I_(r+""),valueStyle:"font-size:"+I_(a+"")+"px;color:"+I_(o)+";font-weight:"+I_(s+"")}:{nameStyle:{fontSize:n,fill:i,fontWeight:r},valueStyle:{fontSize:a,fill:o,fontWeight:s}}}var Vb=[0,10,20,30],Vx=["","\n","\n\n","\n\n\n"];function VS(t,e){return e.type=t,e}function VC(t){return"section"===t.type}function V_(t,e,i,n){var r=t.renderMode,o=e.noName,a=e.noValue,s=!e.markerType,l=e.name,h=t.useUTC,u=e.valueFormatter||t.valueFormatter||function(t){return TM(t=Tk(t)?t:[t],function(t,e){return NM(t,Tk(g)?g[e]:g,h)})};if(!o||!a){var c,d,p=s?"":t.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",r),f=o?"":NM(l,"ordinal",h),g=e.valueType,m=a?[]:u(e.value,e.dataIndex),y=!s||!o,w=!s&&o,b=Vw(n,r),x=b.nameStyle,S=b.valueStyle;return"richText"===r?(s?"":p)+(o?"":VI(t,f,x))+(a?"":(c=[S],y&&c.push({padding:[0,0,0,w?10:20],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(Tk(m)?m.join("  "):m,c))):VT((s?"":p)+(o?"":'<span style="'+x+";"+(s?"":"margin-left:2px")+'">'+I_(f)+"</span>")+(a?"":'<span style="'+(y?"float:right;margin-left:"+(w?"10px":"20px"):"")+";"+S+'">'+TM(d=Tk(d=m)?d:[d],function(t){return I_(t)}).join("&nbsp;&nbsp;")+"</span>"),i)}}function VM(t,e,i,n,r,o){if(t)return(VC(t)?function t(e,i,n,r){var o,a=i.noHeader,s={html:Vb[o=function t(e){if(VC(e)){var i=0,n=e.blocks.length,r=n>1||n>0&&!e.noHeader;return T_(e.blocks,function(e){var n=t(e);n>=i&&(i=n+ +(r&&(!n||VC(e)&&!e.noHeader)))}),i}return 0}(i)],richText:Vx[o]},l=[],h=i.blocks||[];TY(!h||Tk(h)),h=h||[];var u=e.orderMode;if(i.sortBlocks&&u){h=h.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(T2(c,u)){var d=new H4(c[u],null);h.sort(function(t,e){return d.evaluate(t.sortParam,e.sortParam)})}else"seriesDesc"===u&&h.reverse()}T_(h,function(n,o){var a=i.valueFormatter,h=(VC(n)?t:V_)(a?Tw(Tw({},e),{valueFormatter:a}):e,n,o>0?s.html:0,r);null!=h&&l.push(h)});var p="richText"===e.renderMode?l.join(s.richText):VT(l.join(""),a?n:s.html);if(a)return p;var f=NM(i.header,"ordinal",e.useUTC),g=Vw(r,e.renderMode).nameStyle;return"richText"===e.renderMode?VI(e,f,g)+s.richText+p:VT('<div style="'+g+";"+Vv+';">'+I_(f)+"</div>"+p,n)}:V_)({useUTC:r,renderMode:i,orderMode:n,markupStyleCreator:e,valueFormatter:t.valueFormatter},t,0,o)}function VT(t,e){return'<div style="margin: '+e+"px 0 0;"+Vv+';">'+t+'<div style="clear:both"></div></div>'}function VI(t,e,i){return t.markupStyleCreator.wrapRichTextStyle(e,i)}function VR(t,e){return NE(t.getData().getItemVisual(e,"style")[t.visualDrawType])}function VE(t,e){var i=t.get("padding");return null!=i?i:"richText"===e?[8,10]:10}var VA=function(){function t(){this.richTextStyles={},this._nextStyleNameId=kt()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(t,e,i){var n,r,o,a,s,l,h="richText"===i?this._generateStyleName():null,u=(a=(o=TO(n={color:e,type:t,renderMode:i,markerId:h})?{color:n,extraCssText:r}:n||{}).color,s=o.type,r=o.extraCssText,l=o.renderMode||"html",a?"html"===l?"subItem"===s?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+I_(a)+";"+(r||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+I_(a)+";"+(r||"")+'"></span>':{renderMode:l,content:"{"+(o.markerId||"markerX")+"|}  ",style:"subItem"===s?{width:4,height:4,borderRadius:2,backgroundColor:a}:{width:10,height:10,borderRadius:5,backgroundColor:a}}:"");return TO(u)?u:(this.richTextStyles[h]=u.style,u.content)},t.prototype.wrapRichTextStyle=function(t,e){var i={};Tk(e)?T_(e,function(t){return Tw(i,t)}):Tw(i,e);var n=this._generateStyleName();return this.richTextStyles[n]=i,"{"+n+"|"+t+"}"},t}();function Vk(t){var e,i,n,r,o=t.series,a=t.dataIndex,s=t.multipleSeries,l=o.getData(),h=l.mapDimensionsAll("defaultedTooltip"),u=h.length,c=o.getRawValue(a),d=Tk(c),p=VR(o,a);if(u>1||d&&!u){var f=function(t,e,i,n,r){var o=e.getData(),a=TT(t,function(t,e,i){var n=o.getDimensionInfo(i);return t=t||n&&!1!==n.tooltip&&null!=n.displayName},!1),s=[],l=[],h=[];function u(t,e){var i=o.getDimensionInfo(e);i&&!1!==i.otherDims.tooltip&&(a?h.push(VS("nameValue",{markerType:"subItem",markerColor:r,name:i.displayName,value:t,valueType:i.type})):(s.push(t),l.push(i.type)))}return n.length?T_(n,function(t){u(H$(o,i,t),t)}):T_(t,u),{inlineValues:s,inlineValueTypes:l,blocks:h}}(c,o,a,h,p);e=f.inlineValues,i=f.inlineValueTypes,n=f.blocks,r=f.inlineValues[0]}else if(u){var g=l.getDimensionInfo(h[0]);r=e=H$(l,a,h[0]),i=g.type}else r=e=d?c[0]:c;var m=kd(o),y=m&&o.name||"",w=l.getName(a),b=s?y:w;return VS("section",{header:y,noHeader:s||!m,sortParam:r,blocks:[VS("nameValue",{markerType:"item",markerColor:p,name:b,noName:!TX(b),value:e,valueType:i,dataIndex:a})].concat(n||[])})}var VD=kg();function VO(t,e){return t.getName(e)||t.getId(e)}var VP="__universalTransitionEnabled",VL=function(t){var e;function i(){var e=null!==t&&t.apply(this,arguments)||this;return e._selectedDataIndicesMap={},e}return M6(i,t),i.prototype.init=function(t,e,i){this.seriesIndex=this.componentIndex,this.dataTask=HQ({count:VH,reset:VV}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,i),(VD(this).sourceManager=new Vf(this)).prepareSource();var n=this.getInitialData(t,i);VF(n,this),this.dataTask.context.data=n,VD(this).dataBeforeProcessed=n,VN(this),this._initSelectedMapFromData(n)},i.prototype.mergeDefaultAndTheme=function(t,e){var i=NN(this),n=i?NV(t):{},r=this.subType;NW.hasClass(r)&&(r+="Series"),Ty(t,e.getTheme().get(this.subType)),Ty(t,this.getDefaultOption()),ko(t,"label",["show"]),this.fillDataTextStyle(t.data),i&&NH(t,n,i)},i.prototype.mergeOption=function(t,e){t=Ty(this.option,t,!0),this.fillDataTextStyle(t.data);var i=NN(this);i&&NH(this.option,t,i);var n=VD(this).sourceManager;n.dirty(),n.prepareSource();var r=this.getInitialData(t,e);VF(r,this),this.dataTask.dirty(),this.dataTask.context.data=r,VD(this).dataBeforeProcessed=r,VN(this),this._initSelectedMapFromData(r)},i.prototype.fillDataTextStyle=function(t){if(t&&!TV(t))for(var e=["show"],i=0;i<t.length;i++)t[i]&&t[i].label&&ko(t[i],"label",e)},i.prototype.getInitialData=function(t,e){},i.prototype.appendData=function(t){this.getRawData().appendData(t.data)},i.prototype.getData=function(t){var e=Vz(this);if(!e)return VD(this).data;var i=e.context.data;return null!=t&&i.getLinkedData?i.getLinkedData(t):i},i.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},i.prototype.setData=function(t){var e=Vz(this);if(e){var i=e.context;i.outputData=t,e!==this.dataTask&&(i.data=t)}VD(this).data=t},i.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return TQ(t)},i.prototype.getSourceManager=function(){return VD(this).sourceManager},i.prototype.getSource=function(){return this.getSourceManager().getSource()},i.prototype.getRawData=function(){return VD(this).dataBeforeProcessed},i.prototype.getColorBy=function(){return this.get("colorBy")||"series"},i.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},i.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},i.prototype.formatTooltip=function(t,e,i){return Vk({series:this,dataIndex:t,multipleSeries:e})},i.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(M9.node&&!(t&&t.ssr))return!1;var e=this.getShallow("animation");return e&&this.getData().count()>this.getShallow("animationThreshold")&&(e=!1),!!e},i.prototype.restoreData=function(){this.dataTask.dirty()},i.prototype.getColorFromPalette=function(t,e,i){var n=this.ecModel,r=N7.prototype.getColorFromPalette.call(this,t,e,i);return r||(r=n.getColorFromPalette(t,e,i)),r},i.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},i.prototype.getProgressive=function(){return this.get("progressive")},i.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},i.prototype.select=function(t,e){this._innerSelect(this.getData(e),t)},i.prototype.unselect=function(t,e){var i=this.option.selectedMap;if(i){var n=this.option.selectedMode,r=this.getData(e);if("series"===n||"all"===i){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<t.length;o++){var a=VO(r,t[o]);i[a]=!1,this._selectedDataIndicesMap[a]=-1}}},i.prototype.toggleSelect=function(t,e){for(var i=[],n=0;n<t.length;n++)i[0]=t[n],this.isSelected(t[n],e)?this.unselect(i,e):this.select(i,e)},i.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,e=TR(t),i=[],n=0;n<e.length;n++){var r=t[e[n]];r>=0&&i.push(r)}return i},i.prototype.isSelected=function(t,e){var i=this.option.selectedMap;if(!i)return!1;var n=this.getData(e);return("all"===i||i[VO(n,t)])&&!n.getItemModel(t).get(["select","disabled"])},i.prototype.isUniversalTransitionEnabled=function(){if(this[VP])return!0;var t=this.option.universalTransition;return!!t&&(!0===t||t&&t.enabled)},i.prototype._innerSelect=function(t,e){var i,n,r=this.option,o=r.selectedMode,a=e.length;if(o&&a){if("series"===o)r.selectedMap="all";else if("multiple"===o){TN(r.selectedMap)||(r.selectedMap={});for(var s=r.selectedMap,l=0;l<a;l++){var h=e[l],u=VO(t,h);s[u]=!0,this._selectedDataIndicesMap[u]=t.getRawIndex(h)}}else if("single"===o||!0===o){var c=e[a-1],u=VO(t,c);r.selectedMap=((i={})[u]=!0,i),this._selectedDataIndicesMap=((n={})[u]=t.getRawIndex(c),n)}}},i.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var e=[];t.hasItemOption&&t.each(function(i){var n=t.getRawDataItem(i);n&&n.selected&&e.push(i)}),e.length>0&&this._innerSelect(t,e)}},i.registerClass=function(t){return NW.registerClass(t)},i.protoInitialize=void((e=i.prototype).type="series.__base__",e.seriesIndex=0,e.ignoreStyleOnData=!1,e.hasSymbolVisual=!1,e.defaultSymbol="circle",e.visualStyleAccessPath="itemStyle",e.visualDrawType="fill"),i}(NW);function VN(t){var e,i,n,r=t.name;kd(t)||(t.name=(i=(e=t.getRawData()).mapDimensionsAll("seriesName"),n=[],T_(i,function(t){var i=e.getDimensionInfo(t);i.displayName&&n.push(i.displayName)}),n.join(" ")||r))}function VH(t){return t.model.getRawData().count()}function VV(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),VB}function VB(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function VF(t,e){T_(TJ(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(i){t.wrapMethod(i,TA(VW,e))})}function VW(t,e){var i=Vz(t);return i&&i.setOutputEnd((e||this).count()),e}function Vz(t){var e=(t.ecModel||{}).scheduler,i=e&&e.getPipeline(t.uid);if(i){var n=i.currentTask;if(n){var r=n.agentStubMap;r&&(n=r.get(t.uid))}return n}}TS(VL,Hq),TS(VL,N7),kE(VL,NW);var Vj=function(){function t(){this.group=new Aj,this.uid=L3("viewComponent")}return t.prototype.init=function(t,e){},t.prototype.render=function(t,e,i,n){},t.prototype.dispose=function(t,e){},t.prototype.updateView=function(t,e,i,n){},t.prototype.updateLayout=function(t,e,i,n){},t.prototype.updateVisual=function(t,e,i,n){},t.prototype.toggleBlurSeries=function(t,e,i){},t.prototype.eachRendered=function(t){var e=this.group;e&&e.traverse(t)},t}();function VU(){var t=kg();return function(e){var i=t(e),n=e.pipelineContext,r=!!i.large,o=!!i.progressiveRender,a=i.large=!!(n&&n.large),s=i.progressiveRender=!!(n&&n.progressiveRender);return!!(r!==a||o!==s)&&"reset"}}kR(Vj),kO(Vj);var VG=kg(),VY=VU(),VX=function(){function t(){this.group=new Aj,this.uid=L3("viewChart"),this.renderTask=HQ({plan:Vq,reset:VK}),this.renderTask.context={view:this}}return t.prototype.init=function(t,e){},t.prototype.render=function(t,e,i,n){},t.prototype.highlight=function(t,e,i,n){var r=t.getData(n&&n.dataType);r&&VZ(r,n,"emphasis")},t.prototype.downplay=function(t,e,i,n){var r=t.getData(n&&n.dataType);r&&VZ(r,n,"normal")},t.prototype.remove=function(t,e){this.group.removeAll()},t.prototype.dispose=function(t,e){},t.prototype.updateView=function(t,e,i,n){this.render(t,e,i,n)},t.prototype.updateLayout=function(t,e,i,n){this.render(t,e,i,n)},t.prototype.updateVisual=function(t,e,i,n){this.render(t,e,i,n)},t.prototype.eachRendered=function(t){LA(this.group,t)},t.markUpdateMethod=function(t,e){VG(t).updateMethod=e},t.protoInitialize=void(t.prototype.type="chart"),t}();function V$(t,e,i){t&&OG(t)&&("emphasis"===e?OA:Ok)(t,i)}function VZ(t,e,i){var n,r,o=kf(t,e),a=e&&null!=e.highlightKey?(null==(r=Oa[n=e.highlightKey])&&Oo<=32&&(r=Oa[n]=Oo++),r):null;null!=o?T_(kr(o),function(e){V$(t.getItemGraphicEl(e),i,a)}):t.eachItemGraphicEl(function(t){V$(t,i,a)})}function Vq(t){return VY(t.model)}function VK(t){var e=t.model,i=t.ecModel,n=t.api,r=t.payload,o=e.pipelineContext.progressiveRender,a=t.view,s=r&&VG(r).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return"render"!==l&&a[l](e,i,n,r),VQ[l]}kR(VX,["dispose"]),kO(VX);var VQ={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},VJ="\0__throttleOriginMethod",V0="\0__throttleRate",V1="\0__throttleType";function V2(t,e,i){var n,r,o,a,s,l=0,h=0,u=null;function c(){h=new Date().getTime(),u=null,t.apply(o,a||[])}e=e||0;var d=function(){for(var t=[],d=0;d<arguments.length;d++)t[d]=arguments[d];n=new Date().getTime(),o=this,a=t;var p=s||e,f=s||i;s=null,r=n-(f?l:h)-p,clearTimeout(u),f?u=setTimeout(c,p):r>=0?c():u=setTimeout(c,-r),l=n};return d.clear=function(){u&&(clearTimeout(u),u=null)},d.debounceNextCall=function(t){s=t},d}function V5(t,e,i,n){var r=t[e];if(r){var o=r[VJ]||r,a=r[V1];if(r[V0]!==i||a!==n){if(null==i||!n)return t[e]=o;(r=t[e]=V2(o,i,"debounce"===n))[VJ]=o,r[V1]=n,r[V0]=i}return r}}function V3(t,e){var i=t[e];i&&i[VJ]&&(i.clear&&i.clear(),t[e]=i[VJ])}var V4=kg(),V6={itemStyle:kP(LJ,!0),lineStyle:kP(Lq,!0)},V8={lineStyle:"stroke",itemStyle:"fill"};function V9(t,e){return t.visualStyleMapper||V6[e]||(console.warn("Unknown style type '"+e+"'."),V6.itemStyle)}function V7(t,e){return t.visualDrawType||V8[e]||(console.warn("Unknown style type '"+e+"'."),"fill")}var Bt=new L2,Be=Math.PI,Bi=function(){function t(t,e,i,n){this._stageTaskMap=TQ(),this.ecInstance=t,this.api=e,i=this._dataProcessorHandlers=i.slice(),n=this._visualHandlers=n.slice(),this._allHandlers=i.concat(n)}return t.prototype.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(t){var e=t.overallTask;e&&e.dirty()})},t.prototype.getPerformArgs=function(t,e){if(t.__pipeline){var i=this._pipelineMap.get(t.__pipeline.id),n=i.context,r=!e&&i.progressiveEnabled&&(!n||n.progressiveRender)&&t.__idxInPipeline>i.blockIndex?i.step:null,o=n&&n.modDataCount;return{step:r,modBy:null!=o?Math.ceil(o/r):null,modDataCount:o}}},t.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},t.prototype.updateStreamModes=function(t,e){var i=this._pipelineMap.get(t.uid),n=t.getData().count(),r=i.progressiveEnabled&&e.incrementalPrepareRender&&n>=i.threshold,o=t.get("large")&&n>=t.get("largeThreshold"),a="mod"===t.get("progressiveChunkMode")?n:null;t.pipelineContext=i.context={progressiveRender:r,modDataCount:a,large:o}},t.prototype.restorePipelines=function(t){var e=this,i=e._pipelineMap=TQ();t.eachSeries(function(t){var n=t.getProgressive(),r=t.uid;i.set(r,{id:r,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:n&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(n||700),count:0}),e._pipe(t,t.dataTask)})},t.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.api.getModel(),i=this.api;T_(this._allHandlers,function(n){var r=t.get(n.uid)||t.set(n.uid,{});TY(!(n.reset&&n.overallReset),""),n.reset&&this._createSeriesStageTask(n,r,e,i),n.overallReset&&this._createOverallStageTask(n,r,e,i)},this)},t.prototype.prepareView=function(t,e,i,n){var r=t.renderTask,o=r.context;o.model=e,o.ecModel=i,o.api=n,r.__block=!t.incrementalPrepareRender,this._pipe(e,r)},t.prototype.performDataProcessorTasks=function(t,e){this._performStageTasks(this._dataProcessorHandlers,t,e,{block:!0})},t.prototype.performVisualTasks=function(t,e,i){this._performStageTasks(this._visualHandlers,t,e,i)},t.prototype._performStageTasks=function(t,e,i,n){n=n||{};var r=!1,o=this;function a(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}T_(t,function(t,s){if(!n.visualType||n.visualType===t.visualType){var l=o._stageTaskMap.get(t.uid),h=l.seriesTaskMap,u=l.overallTask;if(u){var c,d=u.agentStubMap;d.each(function(t){a(n,t)&&(t.dirty(),c=!0)}),c&&u.dirty(),o.updatePayload(u,i);var p=o.getPerformArgs(u,n.block);d.each(function(t){t.perform(p)}),u.perform(p)&&(r=!0)}else h&&h.each(function(s,l){a(n,s)&&s.dirty();var h=o.getPerformArgs(s,n.block);h.skip=!t.performRawSeries&&e.isSeriesFiltered(s.context.model),o.updatePayload(s,i),s.perform(h)&&(r=!0)})}}),this.unfinished=r||this.unfinished},t.prototype.performSeriesTasks=function(t){var e;t.eachSeries(function(t){e=t.dataTask.perform()||e}),this.unfinished=e||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})},t.prototype.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)},t.prototype._createSeriesStageTask=function(t,e,i,n){var r=this,o=e.seriesTaskMap,a=e.seriesTaskMap=TQ(),s=t.seriesType,l=t.getTargetSeries;function h(e){var s=e.uid,l=a.set(s,o&&o.get(s)||HQ({plan:Bs,reset:Bl,count:Bc}));l.context={model:e,ecModel:i,api:n,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:r},r._pipe(e,l)}t.createOnAllSeries?i.eachRawSeries(h):s?i.eachRawSeriesByType(s,h):l&&l(i,n).each(h)},t.prototype._createOverallStageTask=function(t,e,i,n){var r=this,o=e.overallTask=e.overallTask||HQ({reset:Bn});o.context={ecModel:i,api:n,overallReset:t.overallReset,scheduler:r};var a=o.agentStubMap,s=o.agentStubMap=TQ(),l=t.seriesType,h=t.getTargetSeries,u=!0,c=!1;function d(t){var e=t.uid,i=s.set(e,a&&a.get(e)||(c=!0,HQ({reset:Br,onDirty:Ba})));i.context={model:t,overallProgress:u},i.agent=o,i.__block=u,r._pipe(t,i)}TY(!t.createOnAllSeries,""),l?i.eachRawSeriesByType(l,d):h?h(i,n).each(d):(u=!1,T_(i.getSeries(),d)),c&&o.dirty()},t.prototype._pipe=function(t,e){var i=t.uid,n=this._pipelineMap.get(i);n.head||(n.head=e),n.tail&&n.tail.pipe(e),n.tail=e,e.__idxInPipeline=n.count++,e.__pipeline=n},t.wrapStageHandler=function(t,e){return TD(t)&&(t={overallReset:t,seriesType:function(t){tR=null;try{t(Bd,Bp)}catch(t){}return tR}(t)}),t.uid=L3("stageHandler"),e&&(t.visualType=e),t},t}();function Bn(t){t.overallReset(t.ecModel,t.api,t.payload)}function Br(t){return t.overallProgress&&Bo}function Bo(){this.agent.dirty(),this.getDownstream().dirty()}function Ba(){this.agent&&this.agent.dirty()}function Bs(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function Bl(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=kr(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?TM(e,function(t,e){return Bu(e)}):Bh}var Bh=Bu(0);function Bu(t){return function(e,i){var n=i.data,r=i.resetDefines[t];if(r&&r.dataEach)for(var o=e.start;o<e.end;o++)r.dataEach(n,o);else r&&r.progress&&r.progress(e,n)}}function Bc(t){return t.data.count()}var Bd={},Bp={};function Bf(t,e){for(var i in e.prototype)t[i]=T5}Bf(Bd,Hr),Bf(Bp,Hh),Bd.eachSeriesByType=Bd.eachRawSeriesByType=function(t){tR=t},Bd.eachComponent=function(t){"series"===t.mainType&&t.subType&&(tR=t.subType)};var Bg=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],Bm="#B9B8CE",By="#100C2A",Bv=function(){return{axisLine:{lineStyle:{color:Bm}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},Bw=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],Bb={darkMode:!0,color:Bw,backgroundColor:By,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Bm}},textStyle:{color:Bm},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Bm}},dataZoom:{borderColor:"#71708A",textStyle:{color:Bm},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Bm}},timeline:{lineStyle:{color:Bm},label:{color:Bm},controlStyle:{color:Bm,borderColor:Bm}},calendar:{itemStyle:{color:By},dayLabel:{color:Bm},monthLabel:{color:Bm},yearLabel:{color:Bm}},timeAxis:Bv(),logAxis:Bv(),valueAxis:Bv(),categoryAxis:Bv(),line:{symbol:"circle"},graph:{color:Bw},gauge:{title:{color:Bm},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Bm},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};Bb.categoryAxis.splitLine.show=!1;var Bx=function(){function t(){}return t.prototype.normalizeQuery=function(t){var e={},i={},n={};if(TO(t)){var r=kI(t);e.mainType=r.main||null,e.subType=r.sub||null}else{var o=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};T_(t,function(t,r){for(var s=!1,l=0;l<o.length;l++){var h=o[l],u=r.lastIndexOf(h);if(u>0&&u===r.length-h.length){var c=r.slice(0,u);"data"!==c&&(e.mainType=c,e[h.toLowerCase()]=t,s=!0)}}a.hasOwnProperty(r)&&(i[r]=t,s=!0),s||(n[r]=t)})}return{cptQuery:e,dataQuery:i,otherQuery:n}},t.prototype.filter=function(t,e){var i=this.eventInfo;if(!i)return!0;var n=i.targetEl,r=i.packedEvent,o=i.model,a=i.view;if(!o||!a)return!0;var s=e.cptQuery,l=e.dataQuery;return h(s,o,"mainType")&&h(s,o,"subType")&&h(s,o,"index","componentIndex")&&h(s,o,"name")&&h(s,o,"id")&&h(l,r,"name")&&h(l,r,"dataIndex")&&h(l,r,"dataType")&&(!a.filterForExposedEvent||a.filterForExposedEvent(t,e.otherQuery,n,r));function h(t,e,i,n){return null==t[i]||e[n||i]===t[i]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),BS=["symbol","symbolSize","symbolRotate","symbolOffset"],BC=BS.concat(["symbolKeepAspect"]);function B_(t,e,i){switch(i){case"color":return t.getItemVisual(e,"style")[t.getVisual("drawType")];case"opacity":return t.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(e,i)}}function BM(t,e){switch(e){case"color":return t.getVisual("style")[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(e)}}function BT(t,e,i,n){switch(i){case"color":t.ensureUniqueItemVisual(e,"style")[t.getVisual("drawType")]=n,t.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":t.ensureUniqueItemVisual(e,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":t.setItemVisual(e,i,n)}}function BI(t,e){T_([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(i){e(i[0],function(e,n,r){var o,a;e=Tw({},e),r.dispatchAction(Tw(e,{type:i[1],seriesIndex:(o=e,a=[],n.eachComponent({mainType:"series",subType:t,query:o},function(t){a.push(t.seriesIndex)}),a)}))})})}function BR(t,e,i,n,r){var o=t+e;i.isSilent(o)||n.eachComponent({mainType:"series",subType:"pie"},function(t){for(var e=t.seriesIndex,n=t.option.selectedMap,a=r.selected,s=0;s<a.length;s++)if(a[s].seriesIndex===e){var l=t.getData(),h=kf(l,r.fromActionPayload);i.trigger(o,{type:o,seriesId:t.id,name:Tk(h)?l.getName(h[0]):l.getName(h),selected:TO(n)?n:Tw({},n)})}})}function BE(t,e,i){for(var n;t&&(!e(t)||(n=t,!i));)t=t.__hostTarget||t.parent;return n}var BA=Math.round(9*Math.random()),Bk="function"==typeof Object.defineProperty,BD=function(){function t(){this._id="__ec_inner_"+BA++}return t.prototype.get=function(t){return this._guard(t)[this._id]},t.prototype.set=function(t,e){var i=this._guard(t);return Bk?Object.defineProperty(i,this._id,{value:e,enumerable:!1,configurable:!0}):i[this._id]=e,this},t.prototype.delete=function(t){return!!this.has(t)&&(delete this._guard(t)[this._id],!0)},t.prototype.has=function(t){return!!this._guard(t)[this._id]},t.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},t}(),BO=DB.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=e.width/2,o=e.height/2;t.moveTo(i,n-o),t.lineTo(i+r,n+o),t.lineTo(i-r,n+o),t.closePath()}}),BP=DB.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=e.width/2,o=e.height/2;t.moveTo(i,n-o),t.lineTo(i+r,n),t.lineTo(i,n+o),t.lineTo(i-r,n),t.closePath()}}),BL=DB.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.x,n=e.y,r=e.width/5*3,o=Math.max(r,e.height),a=r/2,s=a*a/(o-a),l=n-o+a+s,h=Math.asin(s/a),u=Math.cos(h)*a,c=Math.sin(h),d=Math.cos(h),p=.6*a,f=.7*a;t.moveTo(i-u,l+s),t.arc(i,l,a,Math.PI-h,2*Math.PI+h),t.bezierCurveTo(i+u-c*p,l+s+d*p,i,n-f,i,n),t.bezierCurveTo(i,n-f,i-u+c*p,l+s+d*p,i-u,l+s),t.closePath()}}),BN=DB.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.height,n=e.width,r=e.x,o=e.y,a=n/3*2;t.moveTo(r,o),t.lineTo(r+a,o+i),t.lineTo(r,o+i/4*3),t.lineTo(r-a,o+i),t.lineTo(r,o),t.closePath()}}),BH={line:function(t,e,i,n,r){r.x1=t,r.y1=e+n/2,r.x2=t+i,r.y2=e+n/2},rect:function(t,e,i,n,r){r.x=t,r.y=e,r.width=i,r.height=n},roundRect:function(t,e,i,n,r){r.x=t,r.y=e,r.width=i,r.height=n,r.r=Math.min(i,n)/4},square:function(t,e,i,n,r){var o=Math.min(i,n);r.x=t,r.y=e,r.width=o,r.height=o},circle:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.r=Math.min(i,n)/2},diamond:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.width=i,r.height=n},pin:function(t,e,i,n,r){r.x=t+i/2,r.y=e+n/2,r.width=i,r.height=n},arrow:function(t,e,i,n,r){r.x=t+i/2,r.y=e+n/2,r.width=i,r.height=n},triangle:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.width=i,r.height=n}},BV={};T_({line:PX,rect:DK,roundRect:DK,square:DK,circle:Pm,diamond:BP,pin:BL,arrow:BN,triangle:BO},function(t,e){BV[e]=new t});var BB=DB.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,i){var n=AP(t,e,i),r=this.shape;return r&&"pin"===r.symbolType&&"inside"===e.position&&(n.y=i.y+.4*i.height),n},buildPath:function(t,e,i){var n=e.symbolType;if("none"!==n){var r=BV[n];r||(r=BV[n="rect"]),BH[n](e.x,e.y,e.width,e.height,r.shape),r.buildPath(t,r.shape,i)}}});function BF(t,e){if("image"!==this.type){var i=this.style;this.__isEmptyBrush?(i.stroke=t,i.fill=e||"#fff",i.lineWidth=2):"line"===this.shape.symbolType?i.stroke=t:i.fill=t,this.markRedraw()}}function BW(t,e,i,n,r,o,a){var s,l=0===t.indexOf("empty");return l&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),(s=0===t.indexOf("image://")?Ld(t.slice(8),new I1(e,i,n,r),a?"center":"cover"):0===t.indexOf("path://")?Lc(t.slice(7),{},new I1(e,i,n,r),a?"center":"cover"):new BB({shape:{symbolType:t,x:e,y:i,width:n,height:r}})).__isEmptyBrush=l,s.setColor=BF,o&&s.setColor(o),s}function Bz(t){return Tk(t)||(t=[+t,+t]),[t[0]||0,t[1]||0]}function Bj(t,e){if(null!=t)return Tk(t)||(t=[t,t]),[AZ(t[0],e[0])||0,AZ(Tz(t[1],t[0]),e[1])||0]}function BU(t){return isFinite(t)}function BG(t,e,i){for(var n,r,o,a,s,l,h,u,c,d="radial"===e.type?(n=i.width,r=i.height,o=null==e.x?.5:e.x,a=null==e.y?.5:e.y,s=null==e.r?.5:e.r,e.global||(o=o*n+i.x,a=a*r+i.y,s*=Math.min(n,r)),o=BU(o)?o:.5,a=BU(a)?a:.5,s=s>=0&&BU(s)?s:.5,t.createRadialGradient(o,a,0,o,a,s)):(l=null==e.x?0:e.x,h=null==e.x2?1:e.x2,u=null==e.y?0:e.y,c=null==e.y2?0:e.y2,e.global||(l=l*i.width+i.x,h=h*i.width+i.x,u=u*i.height+i.y,c=c*i.height+i.y),l=BU(l)?l:0,h=BU(h)?h:1,u=BU(u)?u:0,c=BU(c)?c:0,t.createLinearGradient(l,u,h,c)),p=e.colorStops,f=0;f<p.length;f++)d.addColorStop(p[f].offset,p[f].color);return d}function BY(t){return parseInt(t,10)}function BX(t,e,i){var n=["width","height"][e],r=["clientWidth","clientHeight"][e],o=["paddingLeft","paddingTop"][e],a=["paddingRight","paddingBottom"][e];if(null!=i[n]&&"auto"!==i[n])return parseFloat(i[n]);var s=document.defaultView.getComputedStyle(t);return(t[r]||BY(s[n])||BY(t.style[n]))-(BY(s[o])||0)-(BY(s[a])||0)|0}function B$(t){var e,i,n=t.style,r=n.lineDash&&n.lineWidth>0&&(e=n.lineDash,i=n.lineWidth,e&&"solid"!==e&&i>0?"dashed"===e?[4*i,2*i]:"dotted"===e?[i]:TL(e)?[e]:Tk(e)?e:null:null),o=n.lineDashOffset;if(r){var a=n.strokeNoScale&&t.getLineScale?t.getLineScale():1;a&&1!==a&&(r=TM(r,function(t){return t/a}),o/=a)}return[r,o]}var BZ=new D_(!0);function Bq(t){var e=t.stroke;return!(null==e||"none"===e||!(t.lineWidth>0))}function BK(t){return"string"==typeof t&&"none"!==t}function BQ(t){var e=t.fill;return null!=e&&"none"!==e}function BJ(t,e){if(null!=e.fillOpacity&&1!==e.fillOpacity){var i=t.globalAlpha;t.globalAlpha=e.fillOpacity*e.opacity,t.fill(),t.globalAlpha=i}else t.fill()}function B0(t,e){if(null!=e.strokeOpacity&&1!==e.strokeOpacity){var i=t.globalAlpha;t.globalAlpha=e.strokeOpacity*e.opacity,t.stroke(),t.globalAlpha=i}else t.stroke()}function B1(t,e,i){var n=kV(e.image,e.__image,i);if(kF(n)){var r=t.createPattern(n,e.repeat||"repeat");if("function"==typeof DOMMatrix&&r&&r.setTransform){var o=new DOMMatrix;o.translateSelf(e.x||0,e.y||0),o.rotateSelf(0,0,(e.rotation||0)*T3),o.scaleSelf(e.scaleX||1,e.scaleY||1),r.setTransform(o)}return r}}var B2=["shadowBlur","shadowOffsetX","shadowOffsetY"],B5=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function B3(t,e,i,n,r){var o=!1;if(!n&&e===(i=i||{}))return!1;if(n||e.opacity!==i.opacity){B8(t,r),o=!0;var a=Math.max(Math.min(e.opacity,1),0);t.globalAlpha=isNaN(a)?kK.opacity:a}(n||e.blend!==i.blend)&&(o||(B8(t,r),o=!0),t.globalCompositeOperation=e.blend||kK.blend);for(var s=0;s<B2.length;s++){var l=B2[s];(n||e[l]!==i[l])&&(o||(B8(t,r),o=!0),t[l]=t.dpr*(e[l]||0))}return(n||e.shadowColor!==i.shadowColor)&&(o||(B8(t,r),o=!0),t.shadowColor=e.shadowColor||kK.shadowColor),o}function B4(t,e,i,n,r){var o=B9(e,r.inHover),a=n?null:i&&B9(i,r.inHover)||{};if(o===a)return!1;var s=B3(t,o,a,n,r);if((n||o.fill!==a.fill)&&(s||(B8(t,r),s=!0),BK(o.fill)&&(t.fillStyle=o.fill)),(n||o.stroke!==a.stroke)&&(s||(B8(t,r),s=!0),BK(o.stroke)&&(t.strokeStyle=o.stroke)),(n||o.opacity!==a.opacity)&&(s||(B8(t,r),s=!0),t.globalAlpha=null==o.opacity?1:o.opacity),e.hasStroke()){var l=o.lineWidth/(o.strokeNoScale&&e.getLineScale?e.getLineScale():1);t.lineWidth!==l&&(s||(B8(t,r),s=!0),t.lineWidth=l)}for(var h=0;h<B5.length;h++){var u=B5[h],c=u[0];(n||o[c]!==a[c])&&(s||(B8(t,r),s=!0),t[c]=o[c]||u[1])}return s}function B6(t,e){var i=e.transform,n=t.dpr||1;i?t.setTransform(n*i[0],n*i[1],n*i[2],n*i[3],n*i[4],n*i[5]):t.setTransform(n,0,0,n,0,0)}function B8(t,e){e.batchFill&&t.fill(),e.batchStroke&&t.stroke(),e.batchFill="",e.batchStroke=""}function B9(t,e){return e&&t.__hoverStyle||t.style}function B7(t,e){Ft(t,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Ft(t,e,i,n){var r,o,a,s,l,h=e.transform;if(!e.shouldBePainted(i.viewWidth,i.viewHeight,!1,!1)){e.__dirty&=-2,e.__isRendered=!1;return}var u=e.__clipPaths,c=i.prevElClipPaths,d=!1,p=!1;if((!c||function(t,e){if(t===e||!t&&!e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!0;return!1}(u,c))&&(c&&c.length&&(B8(t,i),t.restore(),p=d=!0,i.prevElClipPaths=null,i.allClipped=!1,i.prevEl=null),u&&u.length&&(B8(t,i),t.save(),function(t,e,i){for(var n=!1,r=0;r<t.length;r++){var o=t[r];n=n||o.isZeroArea(),B6(e,o),e.beginPath(),o.buildPath(e,o.shape),e.clip()}i.allClipped=n}(u,t,i),d=!0),i.prevElClipPaths=u),i.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var f=i.prevEl;f||(p=d=!0);var g=e instanceof DB&&e.autoBatch&&(o=BQ(r=e.style),a=Bq(r),!(r.lineDash||!(+o^+a)||o&&"string"!=typeof r.fill||a&&"string"!=typeof r.stroke||r.strokePercent<1||r.strokeOpacity<1||r.fillOpacity<1));!d&&(s=f.transform,h&&s?h[0]===s[0]&&h[1]===s[1]&&h[2]===s[2]&&h[3]===s[3]&&h[4]===s[4]&&h[5]===s[5]:h||s?0:1)?g||B8(t,i):(B8(t,i),B6(t,e));var m=B9(e,i.inHover);e instanceof DB?(1!==i.lastDrawType&&(p=!0,i.lastDrawType=1),B4(t,e,f,p,i),g&&(i.batchFill||i.batchStroke)||t.beginPath(),function(t,e,i,n){var r,o,a,s=Bq(i),l=BQ(i),h=i.strokePercent,u=h<1,c=!e.path;(!e.silent||u)&&c&&e.createPathProxy();var d=e.path||BZ,p=e.__dirty;if(!n){var f=i.fill,g=i.stroke,m=l&&!!f.colorStops,y=s&&!!g.colorStops,w=l&&!!f.image,b=s&&!!g.image,x=void 0,S=void 0,C=void 0,_=void 0,M=void 0;(m||y)&&(M=e.getBoundingRect()),m&&(x=p?BG(t,f,M):e.__canvasFillGradient,e.__canvasFillGradient=x),y&&(S=p?BG(t,g,M):e.__canvasStrokeGradient,e.__canvasStrokeGradient=S),w&&(C=p||!e.__canvasFillPattern?B1(t,f,e):e.__canvasFillPattern,e.__canvasFillPattern=C),b&&(_=p||!e.__canvasStrokePattern?B1(t,g,e):e.__canvasStrokePattern,e.__canvasStrokePattern=C),m?t.fillStyle=x:w&&(C?t.fillStyle=C:l=!1),y?t.strokeStyle=S:b&&(_?t.strokeStyle=_:s=!1)}var T=e.getGlobalScale();d.setScale(T[0],T[1],e.segmentIgnoreThreshold),t.setLineDash&&i.lineDash&&(o=(r=B$(e))[0],a=r[1]);var I=!0;(c||4&p)&&(d.setDPR(t.dpr),u?d.setContext(null):(d.setContext(t),I=!1),d.reset(),e.buildPath(d,e.shape,n),d.toStatic(),e.pathUpdated()),I&&d.rebuildPath(t,u?h:1),o&&(t.setLineDash(o),t.lineDashOffset=a),!n&&(i.strokeFirst?(s&&B0(t,i),l&&BJ(t,i)):(l&&BJ(t,i),s&&B0(t,i))),o&&t.setLineDash([])}(t,e,m,g),g&&(i.batchFill=m.fill||"",i.batchStroke=m.stroke||"")):e instanceof DW?(3!==i.lastDrawType&&(p=!0,i.lastDrawType=3),B4(t,e,f,p,i),function(t,e,i){var n,r=i.text;if(null!=r&&(r+=""),r){t.font=i.font||Tt,t.textAlign=i.textAlign,t.textBaseline=i.textBaseline;var o=void 0,a=void 0;t.setLineDash&&i.lineDash&&(o=(n=B$(e))[0],a=n[1]),o&&(t.setLineDash(o),t.lineDashOffset=a),i.strokeFirst?(Bq(i)&&t.strokeText(r,i.x,i.y),BQ(i)&&t.fillText(r,i.x,i.y)):(BQ(i)&&t.fillText(r,i.x,i.y),Bq(i)&&t.strokeText(r,i.x,i.y)),o&&t.setLineDash([])}}(t,e,m)):e instanceof DU?(2!==i.lastDrawType&&(p=!0,i.lastDrawType=2),l=p,B3(t,B9(e,i.inHover),f&&B9(f,i.inHover),l,i),function(t,e,i){var n=e.__image=kV(i.image,e.__image,e,e.onload);if(n&&kF(n)){var r=i.x||0,o=i.y||0,a=e.getWidth(),s=e.getHeight(),l=n.width/n.height;if(null==a&&null!=s?a=s*l:null==s&&null!=a?s=a/l:null==a&&null==s&&(a=n.width,s=n.height),i.sWidth&&i.sHeight){var h=i.sx||0,u=i.sy||0;t.drawImage(n,h,u,i.sWidth,i.sHeight,r,o,a,s)}else if(i.sx&&i.sy){var h=i.sx,u=i.sy,c=a-h,d=s-u;t.drawImage(n,h,u,c,d,r,o,a,s)}else t.drawImage(n,r,o,a,s)}}(t,e,m)):e.getTemporalDisplayables&&(4!==i.lastDrawType&&(p=!0,i.lastDrawType=4),function(t,e,i){var n,r,o=e.getDisplayables(),a=e.getTemporalDisplayables();t.save();var s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:i.viewWidth,viewHeight:i.viewHeight,inHover:i.inHover};for(n=e.getCursor(),r=o.length;n<r;n++){var l=o[n];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Ft(t,l,s,n===r-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}for(var h=0,u=a.length;h<u;h++){var l=a[h];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Ft(t,l,s,h===u-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,t.restore()}(t,e,i)),g&&n&&B8(t,i),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),i.prevEl=e,e.__dirty=0,e.__isRendered=!0}var Fe=new BD,Fi=new RN(100),Fn=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Fr(t,e){if("none"===t)return null;var i=e.getDevicePixelRatio(),n=e.getZr(),r="svg"===n.painter.type;t.dirty&&Fe.delete(t);var o=Fe.get(t);if(o)return o;var a=Tb(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===a.backgroundColor&&(a.backgroundColor=null);var s={repeat:"repeat"};return function(t){for(var e,o,s=[i],l=!0,h=0;h<Fn.length;++h){var u=a[Fn[h]];if(null!=u&&!Tk(u)&&!TO(u)&&!TL(u)&&"boolean"!=typeof u){l=!1;break}s.push(u)}if(l){e=s.join(",")+(r?"-svg":"");var c=Fi.get(e);c&&(r?t.svgElement=c:t.image=c)}var d=function t(e){if(!e||0===e.length)return[[0,0]];if(TL(e)){var i=Math.ceil(e);return[[i,i]]}for(var n=!0,r=0;r<e.length;++r)if(!TL(e[r])){n=!1;break}if(n)return t([e]);for(var o=[],r=0;r<e.length;++r)if(TL(e[r])){var i=Math.ceil(e[r]);o.push([i,i])}else{var i=TM(e[r],function(t){return Math.ceil(t)});i.length%2==1?o.push(i.concat(i)):o.push(i)}return o}(a.dashArrayX),p=function(t){if(!t||"object"==typeof t&&0===t.length)return[0,0];if(TL(t)){var e=Math.ceil(t);return[e,e]}var i=TM(t,function(t){return Math.ceil(t)});return t.length%2?i.concat(i):i}(a.dashArrayY),f=function t(e){if(!e||0===e.length)return[["rect"]];if(TO(e))return[[e]];for(var i=!0,n=0;n<e.length;++n)if(!TO(e[n])){i=!1;break}if(i)return t([e]);for(var r=[],n=0;n<e.length;++n)TO(e[n])?r.push([e[n]]):r.push(e[n]);return r}(a.symbol),g=TM(d,function(t){return Fo(t)}),m=Fo(p),y=!r&&Ti.createCanvas(),w=r&&{tag:"g",attrs:{},key:"dcl",children:[]},b=function(){for(var t=1,e=0,i=g.length;e<i;++e)t=ke(t,g[e]);for(var n=1,e=0,i=f.length;e<i;++e)n=ke(n,f[e].length);t*=n;var r=m*g.length*f.length;return{width:Math.max(1,Math.min(t,a.maxTileWidth)),height:Math.max(1,Math.min(r,a.maxTileHeight))}}();y&&(y.width=b.width*i,y.height=b.height*i,o=y.getContext("2d")),function(){o&&(o.clearRect(0,0,y.width,y.height),a.backgroundColor&&(o.fillStyle=a.backgroundColor,o.fillRect(0,0,y.width,y.height)));for(var t=0,e=0;e<p.length;++e)t+=p[e];if(!(t<=0))for(var s=-m,l=0,h=0,u=0;s<b.height;){if(l%2==0){for(var c=h/2%f.length,g=0,x=0,S=0;g<2*b.width;){for(var C=0,e=0;e<d[u].length;++e)C+=d[u][e];if(C<=0)break;if(x%2==0){var _=(1-a.symbolSize)*.5,M=g+d[u][x]*_,T=s+p[l]*_,I=d[u][x]*a.symbolSize,R=p[l]*a.symbolSize,E=S/2%f[c].length;(function(t,e,s,l,h){var u=r?1:i,c=BW(h,t*u,e*u,s*u,l*u,a.color,a.symbolKeepAspect);if(r){var d=n.painter.renderOneToVNode(c);d&&w.children.push(d)}else B7(o,c)})(M,T,I,R,f[c][E])}g+=d[u][x],++S,++x===d[u].length&&(x=0)}++u===d.length&&(u=0)}s+=p[l],++h,++l===p.length&&(l=0)}}(),l&&Fi.put(e,y||w),t.image=y,t.svgElement=w,t.svgWidth=b.width,t.svgHeight=b.height}(s),s.rotation=a.rotation,s.scaleX=s.scaleY=r?1:1/i,Fe.set(t,s),t.dirty=!1,s}function Fo(t){for(var e=0,i=0;i<t.length;++i)e+=t[i];return t.length%2==1?2*e:e}var Fa=new If,Fs={},Fl="__flagInMainProcess",Fh="__pendingUpdate",Fu="__needsUpdateStatus",Fc=/^[a-zA-Z0-9_]+$/,Fd="__connectUpdateStatus";function Fp(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(this.isDisposed()){this.id;return}return Fg(this,t,e)}}function Ff(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return Fg(this,t,e)}}function Fg(t,e,i){return i[0]=i[0]&&i[0].toLowerCase(),If.prototype[e].apply(t,i)}var Fm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e}(If),Fy=Fm.prototype;Fy.on=Ff("on"),Fy.off=Ff("off");var Fv=function(t){function e(e,i,n){var r=t.call(this,new Bx)||this;r._chartsViews=[],r._chartsMap={},r._componentsViews=[],r._componentsMap={},r._pendingActions=[],n=n||{},TO(i)&&(i=FT[i]),r._dom=e,n.ssr&&(tv=function(t){var e=On(t),i=e.dataIndex;if(null!=i){var n=TQ();return n.set("series_index",e.seriesIndex),n.set("data_index",i),e.ssrType&&n.set("ssr_type",e.ssrType),n}});var o=r._zr=AX(e,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height,ssr:n.ssr,useDirtyRect:Tz(n.useDirtyRect,!1),useCoarsePointer:Tz(n.useCoarsePointer,"auto"),pointerSize:n.pointerSize});r._ssr=n.ssr,r._throttledZrFlush=V2(TE(o.flush,o),17),(i=Tm(i))&&HA(i,!0),r._theme=i,r._locale=function(t){if(!TO(t))return Ty(Tm(t),Tm(L6.EN),!1);var e=L6[t.toUpperCase()]||{};return"ZH"===t||"EN"===t?Tm(e):Ty(Tm(e),Tm(L6.EN),!1)}(n.locale||L9),r._coordSysMgr=new Hc;var a=r._api=tj(r);function s(t,e){return t.__prio-e.__prio}return Ro(FM,s),Ro(FC,s),r._scheduler=new Bi(r,a,FC,FM),r._messageCenter=new Fm,r._initEvents(),r.resize=TE(r.resize,r),o.animation.on("frame",r._onframe,r),tV(o,r),tB(o,r),r[T$]=!0,r}return M6(e,t),e.prototype._onframe=function(){if(!this._disposed){tY(this);var t=this._scheduler;if(this[Fh]){var e=this[Fh].silent;this[Fl]=!0;try{tE(this),tD.update.call(this,null,this[Fh].updateParams)}catch(t){throw this[Fl]=!1,this[Fh]=null,t}this._zr.flush(),this[Fl]=!1,this[Fh]=null,tN.call(this,e),tH.call(this,e)}else if(t.unfinished){var i=1,n=this._model,r=this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(n),t.performDataProcessorTasks(n),tP(this,n),t.performVisualTasks(n),tz(this,this._model,r,"remain",{}),i-=+new Date-o}while(i>0&&t.unfinished)t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,e,i){if(!this[Fl]){if(this._disposed){this.id;return}if(TN(e)&&(i=e.lazyUpdate,n=e.silent,r=e.replaceMerge,o=e.transition,e=e.notMerge),this[Fl]=!0,!this._model||e){var n,r,o,a=new Hp(this._api),s=this._theme,l=this._model=new Hr;l.scheduler=this._scheduler,l.ssr=this._ssr,l.init(null,null,null,s,this._locale,a)}this._model.setOption(t,{replaceMerge:r},F_);var h={seriesTransition:o,optionChanged:!0};if(i)this[Fh]={silent:n,updateParams:h},this[Fl]=!1,this.getZr().wakeUp();else{try{tE(this),tD.update.call(this,null,h)}catch(t){throw this[Fh]=null,this[Fl]=!1,t}this._ssr||this._zr.flush(),this[Fh]=null,this[Fl]=!1,tN.call(this,n),tH.call(this,n)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||M9.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){return t=t||{},this._zr.painter.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){return t=t||{},this._zr.painter.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(M9.svgSupported){var t=this._zr;return T_(t.storage.getDisplayList(),function(t){t.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}var e=(t=t||{}).excludeComponents,i=this._model,n=[],r=this;T_(e,function(t){i.eachComponent({mainType:t},function(t){var e=r._componentsMap[t.__viewId];e.group.ignore||(n.push(e),e.group.ignore=!0)})});var o="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return T_(n,function(t){t.group.ignore=!1}),o},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var e="svg"===t.type,i=this.group,n=Math.min,r=Math.max,o=1/0;if(!FE[i])return this.getDataURL(t);var a=o,s=o,l=-o,h=-o,u=[],c=t&&t.pixelRatio||this.getDevicePixelRatio();T_(FR,function(o,c){if(o.group===i){var d=e?o.getZr().painter.getSvgDom().innerHTML:o.renderToCanvas(Tm(t)),p=o.getDom().getBoundingClientRect();a=n(p.left,a),s=n(p.top,s),l=r(p.right,l),h=r(p.bottom,h),u.push({dom:d,left:p.left,top:p.top})}}),a*=c,s*=c,l*=c,h*=c;var d=l-a,p=h-s,f=Ti.createCanvas(),g=AX(f,{renderer:e?"svg":"canvas"});if(g.resize({width:d,height:p}),!e)return t.connectedBackgroundColor&&g.add(new DK({shape:{x:0,y:0,width:d,height:p},style:{fill:t.connectedBackgroundColor}})),T_(u,function(t){var e=new DU({style:{x:t.left*c-a,y:t.top*c-s,image:t.dom}});g.add(e)}),g.refreshImmediately(),f.toDataURL("image/"+(t&&t.type||"png"));var m="";return T_(u,function(t){var e=t.left-a,i=t.top-s;m+='<g transform="translate('+e+","+i+')">'+t.dom+"</g>"}),g.painter.getSvgRoot().innerHTML=m,t.connectedBackgroundColor&&g.painter.setBackgroundColor(t.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()},e.prototype.convertToPixel=function(t,e){return tO(this,"convertToPixel",t,e)},e.prototype.convertFromPixel=function(t,e){return tO(this,"convertFromPixel",t,e)},e.prototype.containPixel=function(t,e){var i;if(this._disposed){this.id;return}return T_(ky(this._model,t),function(t,n){n.indexOf("Models")>=0&&T_(t,function(t){var r=t.coordinateSystem;if(r&&r.containPoint)i=i||!!r.containPoint(e);else if("seriesModels"===n){var o=this._chartsMap[t.__viewId];o&&o.containPoint&&(i=i||o.containPoint(e,t))}},this)},this),!!i},e.prototype.getVisual=function(t,e){var i=ky(this._model,t,{defaultMainType:"series"}),n=i.seriesModel.getData(),r=i.hasOwnProperty("dataIndexInside")?i.dataIndexInside:i.hasOwnProperty("dataIndex")?n.indexOfRawIndex(i.dataIndex):null;return null!=r?B_(n,r,e):BM(n,e)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;T_(Fb,function(e){var i=function(i){var n,r=t.getModel(),o=i.target;if("globalout"===e?n={}:o&&BE(o,function(t){var e=On(t);if(e&&null!=e.dataIndex){var i=e.dataModel||r.getSeriesByIndex(e.seriesIndex);return n=i&&i.getDataParams(e.dataIndex,e.dataType,o)||{},!0}if(e.eventData)return n=Tw({},e.eventData),!0},!0),n){var a=n.componentType,s=n.componentIndex;("markLine"===a||"markPoint"===a||"markArea"===a)&&(a="series",s=n.seriesIndex);var l=a&&null!=s&&r.getComponent(a,s),h=l&&t["series"===l.mainType?"_chartsMap":"_componentsMap"][l.__viewId];n.event=i,n.type=e,t._$eventProcessor.eventInfo={targetEl:o,packedEvent:n,model:l,view:h},t.trigger(e,n)}};i.zrEventfulCallAtLast=!0,t._zr.on(e,i,t)}),T_(FS,function(e,i){t._messageCenter.on(i,function(t){this.trigger(i,t)},t)}),T_(["selectchanged"],function(e){t._messageCenter.on(e,function(t){this.trigger(e,t)},t)}),function(t,e,i){t.on("selectchanged",function(t){var n=i.getModel();t.isFromClick?(BR("map","selectchanged",e,n,t),BR("pie","selectchanged",e,n,t)):"select"===t.fromAction?(BR("map","selected",e,n,t),BR("pie","selected",e,n,t)):"unselect"===t.fromAction&&(BR("map","unselected",e,n,t),BR("pie","unselected",e,n,t))})}(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0,this.getDom()&&kS(this.getDom(),Fk,"");var t=this._api,e=this._model;T_(this._componentsViews,function(i){i.dispose(e,t)}),T_(this._chartsViews,function(i){i.dispose(e,t)}),this._zr.dispose(),this._dom=this._model=this._chartsMap=this._componentsMap=this._chartsViews=this._componentsViews=this._scheduler=this._api=this._zr=this._throttledZrFlush=this._theme=this._coordSysMgr=this._messageCenter=null,delete FR[this.id]},e.prototype.resize=function(t){if(!this[Fl]){if(this._disposed){this.id;return}this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var i=e.resetOption("media"),n=t&&t.silent;this[Fh]&&(null==n&&(n=this[Fh].silent),i=!0,this[Fh]=null),this[Fl]=!0;try{i&&tE(this),tD.update.call(this,{type:"resize",animation:Tw({duration:0},t&&t.animation)})}catch(t){throw this[Fl]=!1,t}this[Fl]=!1,tN.call(this,n),tH.call(this,n)}}},e.prototype.showLoading=function(t,e){if(this._disposed){this.id;return}if(TN(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),FI[t]){var i=FI[t](this._api,e),n=this._zr;this._loadingFX=i,n.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var e=Tw({},t);return e.type=FS[t.type],e},e.prototype.dispatchAction=function(t,e){if(this._disposed){this.id;return}if(TN(e)||(e={silent:!!e}),Fx[t.type]&&this._model){if(this[Fl]){this._pendingActions.push(t);return}var i=e.silent;tL.call(this,t,i);var n=e.flush;n?this._zr.flush():!1!==n&&M9.browser.weChat&&this._throttledZrFlush(),tN.call(this,i),tH.call(this,i)}},e.prototype.updateLabelLayout=function(){Fa.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var e=t.seriesIndex;this.getModel().getSeriesByIndex(e).appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){function t(t){t.clearColorPalette(),t.eachSeries(function(t){t.clearColorPalette()})}function e(t){for(var e=[],i=t.currentStates,n=0;n<i.length;n++){var r=i[n];"emphasis"===r||"blur"===r||"select"===r||e.push(r)}t.selected&&t.states.select&&e.push("select"),2===t.hoverState&&t.states.emphasis?e.push("emphasis"):1===t.hoverState&&t.states.blur&&e.push("blur"),t.useStates(e)}function i(t,e){if(!t.preventAutoZ){var i=t.get("z")||0,n=t.get("zlevel")||0;e.eachRendered(function(t){return function t(e,i,n,r){var o=e.getTextContent(),a=e.getTextGuideLine();if(e.isGroup)for(var s=e.childrenRef(),l=0;l<s.length;l++)r=Math.max(t(s[l],i,n,r),r);else e.z=i,e.zlevel=n,r=Math.max(e.z2,r);if(o&&(o.z=i,o.zlevel=n,isFinite(r)&&(o.z2=r+2)),a){var h=e.textGuideLineConfig;a.z=i,a.zlevel=n,isFinite(r)&&(a.z2=r+(h&&h.showAbove?1:-1))}return r}(t,i,n,-1/0),!0})}}function n(t,e){e.eachRendered(function(t){if(!OJ(t)){var e=t.getTextContent(),i=t.getTextGuideLine();t.stateTransition&&(t.stateTransition=null),e&&e.stateTransition&&(e.stateTransition=null),i&&i.stateTransition&&(i.stateTransition=null),t.hasState()?(t.prevStates=t.currentStates,t.clearStates()):t.prevStates&&(t.prevStates=null)}})}function r(t,i){var n=t.getModel("stateAnimation"),r=t.isAnimationEnabled(),o=n.get("duration"),a=o>0?{duration:o,delay:n.get("delay"),easing:n.get("easing")}:null;i.eachRendered(function(t){if(t.states&&t.states.emphasis&&!OJ(t)){if(t instanceof DB){var i,n;(i=Os(t)).normalFill=t.style.fill,i.normalStroke=t.style.stroke,n=t.states.select||{},i.selectFill=n.style&&n.style.fill||null,i.selectStroke=n.style&&n.style.stroke||null}if(t.__dirty){var o=t.prevStates;o&&t.useStates(o)}if(r){t.stateTransition=a;var s=t.getTextContent(),l=t.getTextGuideLine();s&&(s.stateTransition=a),l&&(l.stateTransition=a)}t.__dirty&&e(t)}})}tE=function(t){var e=t._scheduler;e.restorePipelines(t._model),e.prepareStageTasks(),tA(t,!0),tA(t,!1),e.plan()},tA=function(t,e){for(var i=t._model,n=t._scheduler,r=e?t._componentsViews:t._chartsViews,o=e?t._componentsMap:t._chartsMap,a=t._zr,s=t._api,l=0;l<r.length;l++)r[l].__alive=!1;function h(t){var l=t.__requireNewView;t.__requireNewView=!1;var h="_ec_"+t.id+"_"+t.type,u=!l&&o[h];if(!u){var c=kI(t.type);(u=new(e?Vj.getClass(c.main,c.sub):VX.getClass(c.sub))).init(i,s),o[h]=u,r.push(u),a.add(u.group)}t.__viewId=u.__id=h,u.__alive=!0,u.__model=t,u.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},e||n.prepareView(u,t,i,s)}e?i.eachComponent(function(t,e){"series"!==t&&h(e)}):i.eachSeries(h);for(var l=0;l<r.length;){var u=r[l];u.__alive?l++:(e||u.renderTask.dispose(),a.remove(u.group),u.dispose(i,s),r.splice(l,1),o[u.__id]===u&&delete o[u.__id],u.__id=u.group.__ecComponentInfo=null)}},tk=function(t,e,i,n,r){var o,a=t._model;if(a.setUpdatePayload(i),!n){T_([].concat(t._componentsViews).concat(t._chartsViews),u);return}var s={};s[n+"Id"]=i[n+"Id"],s[n+"Index"]=i[n+"Index"],s[n+"Name"]=i[n+"Name"];var l={mainType:n,query:s};r&&(l.subType=r);var h=i.excludeSeriesId;function u(n){n&&n.__alive&&n[e]&&n[e](n.__model,a,t._api,i)}null!=h&&(o=TQ(),T_(kr(h),function(t){var e=kc(t,null);null!=e&&o.set(e,!0)})),a&&a.eachComponent(l,function(e){if(!(o&&null!=o.get(e.id))){if(OX(i)){if(e instanceof VL)i.type!==Oc||i.notBlur||e.get(["emphasis","disabled"])||function(t,e,i){var n=t.seriesIndex,r=t.getData(e.dataType);if(r){var o=kf(r,e);o=(Tk(o)?o[0]:o)||0;var a=r.getItemGraphicEl(o);if(!a)for(var s=r.count(),l=0;!a&&l<s;)a=r.getItemGraphicEl(l++);if(a){var h=On(a);OP(n,h.focus,h.blurScope,i)}else{var u=t.get(["emphasis","focus"]),c=t.get(["emphasis","blurScope"]);null!=u&&OP(n,u,c,i)}}}(e,i,t._api);else{var n=ON(e.mainType,e.componentIndex,i.name,t._api),r=n.focusSelf,a=n.dispatchers;i.type===Oc&&r&&!i.notBlur&&OL(e.mainType,e.componentIndex,t._api),a&&T_(a,function(t){i.type===Oc?OA(t):Ok(t)})}}else OY(i)&&e instanceof VL&&(function(t,e,i){if(OY(e)){var n=e.dataType,r=kf(t.getData(n),e);Tk(r)||(r=[r]),t[e.type===Og?"toggleSelect":e.type===Op?"select":"unselect"](r,n)}}(e,i,t._api),OH(e),tG(t))}},t),a&&a.eachComponent(l,function(e){o&&null!=o.get(e.id)||u(t["series"===n?"_chartsMap":"_componentsMap"][e.__viewId])},t)},tD={prepareAndUpdate:function(t){tE(this),tD.update.call(this,t,{optionChanged:null!=t.newOption})},update:function(e,i){var n=this._model,r=this._api,o=this._zr,a=this._coordSysMgr,s=this._scheduler;if(n){n.setUpdatePayload(e),s.restoreData(n,e),s.performSeriesTasks(n),a.create(n,r),s.performDataProcessorTasks(n,e),tP(this,n),a.update(n,r),t(n),s.performVisualTasks(n,e),tF(this,n,r,e,i);var l=n.get("backgroundColor")||"transparent",h=n.get("darkMode");o.setBackgroundColor(l),null!=h&&"auto"!==h&&o.setDarkMode(h),Fa.trigger("afterupdate",n,r)}},updateTransform:function(e){var i=this,n=this._model,r=this._api;if(n){n.setUpdatePayload(e);var o=[];n.eachComponent(function(t,a){if("series"!==t){var s=i.getViewOfComponentModel(a);if(s&&s.__alive){if(s.updateTransform){var l=s.updateTransform(a,n,r,e);l&&l.update&&o.push(s)}else o.push(s)}}});var a=TQ();n.eachSeries(function(t){var o=i._chartsMap[t.__viewId];if(o.updateTransform){var s=o.updateTransform(t,n,r,e);s&&s.update&&a.set(t.uid,1)}else a.set(t.uid,1)}),t(n),this._scheduler.performVisualTasks(n,e,{setDirty:!0,dirtyMap:a}),tz(this,n,r,e,{},a),Fa.trigger("afterupdate",n,r)}},updateView:function(e){var i=this._model;i&&(i.setUpdatePayload(e),VX.markUpdateMethod(e,"updateView"),t(i),this._scheduler.performVisualTasks(i,e,{setDirty:!0}),tF(this,i,this._api,e,{}),Fa.trigger("afterupdate",i,this._api))},updateVisual:function(e){var i=this,n=this._model;n&&(n.setUpdatePayload(e),n.eachSeries(function(t){t.getData().clearAllVisual()}),VX.markUpdateMethod(e,"updateVisual"),t(n),this._scheduler.performVisualTasks(n,e,{visualType:"visual",setDirty:!0}),n.eachComponent(function(t,r){if("series"!==t){var o=i.getViewOfComponentModel(r);o&&o.__alive&&o.updateVisual(r,n,i._api,e)}}),n.eachSeries(function(t){i._chartsMap[t.__viewId].updateVisual(t,n,i._api,e)}),Fa.trigger("afterupdate",n,this._api))},updateLayout:function(t){tD.update.call(this,t)}},tO=function(t,e,i,n){if(t._disposed){t.id;return}for(var r,o=t._model,a=t._coordSysMgr.getCoordinateSystems(),s=ky(o,i),l=0;l<a.length;l++){var h=a[l];if(h[e]&&null!=(r=h[e](o,s,n)))return r}},tP=function(t,e){var i=t._chartsMap,n=t._scheduler;e.eachSeries(function(t){n.updateStreamModes(t,i[t.__viewId])})},tL=function(t,e){var i,n=this,r=this.getModel(),o=t.type,a=t.escapeConnect,s=Fx[o],l=s.actionInfo,h=(l.update||"update").split(":"),u=h.pop(),c=null!=h[0]&&kI(h[0]);this[Fl]=!0;var d=[t],p=!1;t.batch&&(p=!0,d=TM(t.batch,function(e){return(e=Tb(Tw({},e),t)).batch=null,e}));var f=[],g=OY(t),m=OX(t);if(m&&OO(this._api),T_(d,function(e){if((i=(i=s.action(e,n._model,n._api))||Tw({},e)).type=l.event||i.type,f.push(i),m){var r=kv(t),o=r.queryOptionMap;tk(n,u,e,r.mainTypeSpecified?o.keys()[0]:"series"),tG(n)}else g?(tk(n,u,e,"series"),tG(n)):c&&tk(n,u,e,c.main,c.sub)}),"none"!==u&&!m&&!g&&!c)try{this[Fh]?(tE(this),tD.update.call(this,t),this[Fh]=null):tD[u].call(this,t)}catch(t){throw this[Fl]=!1,t}if(i=p?{type:l.event||o,escapeConnect:a,batch:f}:f[0],this[Fl]=!1,!e){var y=this._messageCenter;if(y.trigger(i.type,i),g){var w,b={type:"selectchanged",escapeConnect:a,selected:(w=[],r.eachSeries(function(t){T_(t.getAllData(),function(e){e.data;var i=e.type,n=t.getSelectedDataIndices();if(n.length>0){var r={dataIndex:n,seriesIndex:t.seriesIndex};null!=i&&(r.dataType=i),w.push(r)}})}),w),isFromClick:t.isFromClick||!1,fromAction:t.type,fromActionPayload:t};y.trigger(b.type,b)}}},tN=function(t){for(var e=this._pendingActions;e.length;){var i=e.shift();tL.call(this,i,t)}},tH=function(t){t||this.trigger("updated")},tV=function(t,e){t.on("rendered",function(i){e.trigger("rendered",i),!t.animation.isFinished()||e[Fh]||e._scheduler.unfinished||e._pendingActions.length||e.trigger("finished")})},tB=function(t,e){t.on("mouseover",function(t){var i,n,r,o,a,s=BE(t.target,OG);s&&(i=e._api,o=(r=ON((n=On(s)).componentMainType,n.componentIndex,n.componentHighDownName,i)).dispatchers,a=r.focusSelf,o?(a&&OL(n.componentMainType,n.componentIndex,i),T_(o,function(e){return OR(e,t)})):(OP(n.seriesIndex,n.focus,n.blurScope,i),"self"===n.focus&&OL(n.componentMainType,n.componentIndex,i),OR(s,t)),tG(e))}).on("mouseout",function(t){var i,n,r,o=BE(t.target,OG);o&&(OO(i=e._api),(r=ON((n=On(o)).componentMainType,n.componentIndex,n.componentHighDownName,i).dispatchers)?T_(r,function(e){return OE(e,t)}):OE(o,t),tG(e))}).on("click",function(t){var i=BE(t.target,function(t){return null!=On(t).dataIndex},!0);if(i){var n=i.selected?"unselect":"select",r=On(i);e._api.dispatchAction({type:n,dataType:r.dataType,dataIndexInside:r.dataIndex,seriesIndex:r.seriesIndex,isFromClick:!0})}})},tF=function(t,e,i,n,r){(function(t){var e=[],i=[],n=!1;if(t.eachComponent(function(t,r){var o=r.get("zlevel")||0,a=r.get("z")||0,s=r.getZLevelKey();n=n||!!s,("series"===t?i:e).push({zlevel:o,z:a,idx:r.componentIndex,type:t,key:s})}),n){var r,o,a=e.concat(i);Ro(a,function(t,e){return t.zlevel===e.zlevel?t.z-e.z:t.zlevel-e.zlevel}),T_(a,function(e){var i=t.getComponent(e.type,e.idx),n=e.zlevel,a=e.key;null!=r&&(n=Math.max(r,n)),a?(n===r&&a!==o&&n++,o=a):o&&(n===r&&n++,o=""),r=n,i.setZLevel(n)})}})(e),tW(t,e,i,n,r),T_(t._chartsViews,function(t){t.__alive=!1}),tz(t,e,i,n,r),T_(t._chartsViews,function(t){t.__alive||t.remove(e,i)})},tW=function(t,e,o,a,s,l){T_(l||t._componentsViews,function(t){var s=t.__model;n(s,t),t.render(s,e,o,a),i(s,t),r(s,t)})},tz=function(t,e,o,a,s,l){var h,u,c=t._scheduler;s=Tw(s||{},{updatedSeries:e.getSeries()}),Fa.trigger("series:beforeupdate",e,o,s);var d=!1;e.eachSeries(function(e){var i=t._chartsMap[e.__viewId];i.__alive=!0;var r=i.renderTask;c.updatePayload(r,a),n(e,i),l&&l.get(e.uid)&&r.dirty(),r.perform(c.getPerformArgs(r))&&(d=!0),i.group.silent=!!e.get("silent"),function(t,e){var i=t.get("blendMode")||null;e.eachRendered(function(t){t.isGroup||(t.style.blend=i)})}(e,i),OH(e)}),c.unfinished=d||c.unfinished,Fa.trigger("series:layoutlabels",e,o,s),Fa.trigger("series:transition",e,o,s),e.eachSeries(function(e){var n=t._chartsMap[e.__viewId];i(e,n),r(e,n)}),h=t._zr.storage,u=0,h.traverse(function(t){!t.isGroup&&u++}),!(u>e.get("hoverLayerThreshold"))||M9.node||M9.worker||e.eachSeries(function(e){if(!e.preventUsingHoverLayer){var i=t._chartsMap[e.__viewId];i.__alive&&i.eachRendered(function(t){t.states.emphasis&&(t.states.emphasis.hoverLayer=!0)})}}),Fa.trigger("series:afterupdate",e,o,s)},tG=function(t){t[Fu]=!0,t.getZr().wakeUp()},tY=function(t){t[Fu]&&(t.getZr().storage.traverse(function(t){OJ(t)||e(t)}),t[Fu]=!1)},tj=function(t){return new(function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return M6(i,e),i.prototype.getCoordinateSystems=function(){return t._coordSysMgr.getCoordinateSystems()},i.prototype.getComponentByElement=function(e){for(;e;){var i=e.__ecComponentInfo;if(null!=i)return t._model.getComponent(i.mainType,i.index);e=e.parent}},i.prototype.enterEmphasis=function(e,i){OA(e,i),tG(t)},i.prototype.leaveEmphasis=function(e,i){Ok(e,i),tG(t)},i.prototype.enterBlur=function(e){O_(e,Ob),tG(t)},i.prototype.leaveBlur=function(e){O_(e,Ox),tG(t)},i.prototype.enterSelect=function(e){O_(e,OS),tG(t)},i.prototype.leaveSelect=function(e){O_(e,OC),tG(t)},i.prototype.getModel=function(){return t.getModel()},i.prototype.getViewOfComponentModel=function(e){return t.getViewOfComponentModel(e)},i.prototype.getViewOfSeriesModel=function(e){return t.getViewOfSeriesModel(e)},i}(Hh))(t)},tU=function(t){function e(t,e){for(var i=0;i<t.length;i++)t[i][Fd]=e}T_(FS,function(i,n){t._messageCenter.on(n,function(i){if(FE[t.group]&&0!==t[Fd]&&(!i||!i.escapeConnect)){var n=t.makeActionFromEvent(i),r=[];T_(FR,function(e){e!==t&&e.group===t.group&&r.push(e)}),e(r,0),T_(r,function(t){1!==t[Fd]&&t.dispatchAction(n)}),e(r,2)}})})}}(),e}(If),Fw=Fv.prototype;Fw.on=Fp("on"),Fw.off=Fp("off"),Fw.one=function(t,e,i){var n=this;this.on.call(this,t,function i(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];e&&e.apply&&e.apply(this,r),n.off(t,i)},i)};var Fb=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],Fx={},FS={},FC=[],F_=[],FM=[],FT={},FI={},FR={},FE={},FA=+new Date-0,Fk="_echarts_instance_";function FD(t,e,i){var n=!(i&&i.ssr);if(n){var r,o=FR[(r=t).getAttribute?r.getAttribute(Fk):r[Fk]];if(o)return o}var a=new Fv(t,e,i);return a.id="ec_"+FA++,FR[a.id]=a,n&&kS(t,Fk,a.id),tU(a),Fa.trigger("afterinit",a),a}function FO(t){0>Tx(F_,t)&&F_.push(t)}function FP(t,e){FB(FC,t,e,2e3)}function FL(t,e){Fa.on(t,e)}function FN(t,e,i){TD(e)&&(i=e,e="");var n=TN(t)?t.type:[t,t={event:e}][0];t.event=(t.event||n).toLowerCase(),FS[e=t.event]||(TY(Fc.test(n)&&Fc.test(e)),Fx[n]||(Fx[n]={action:i,actionInfo:t}),FS[e]=n)}function FH(t,e){FB(FM,t,e,3e3,"visual")}var FV=[];function FB(t,e,i,n,r){if((TD(e)||TN(e))&&(i=e,e=n),!(Tx(FV,i)>=0)){FV.push(i);var o=Bi.wrapStageHandler(i,r);o.__prio=e,o.__raw=i,t.push(o)}}FH(2e3,{createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var i=t.getData(),n=t.visualStyleAccessPath||"itemStyle",r=t.getModel(n),o=V9(t,n)(r),a=r.getShallow("decal");a&&(i.setVisual("decal",a),a.dirty=!0);var s=V7(t,n),l=o[s],h=TD(l)?l:null,u="auto"===o.fill||"auto"===o.stroke;if(!o[s]||h||u){var c=t.getColorFromPalette(t.name,null,e.getSeriesCount());o[s]||(o[s]=c,i.setVisual("colorFromPalette",!0)),o.fill="auto"===o.fill||TD(o.fill)?c:o.fill,o.stroke="auto"===o.stroke||TD(o.stroke)?c:o.stroke}if(i.setVisual("style",o),i.setVisual("drawType",s),!e.isSeriesFiltered(t)&&h)return i.setVisual("colorFromPalette",!1),{dataEach:function(e,i){var n=t.getDataParams(i),r=Tw({},o);r[s]=h(n),e.setItemVisual(i,"style",r)}}}}),FH(4500,{createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!(t.ignoreStyleOnData||e.isSeriesFiltered(t))){var i=t.getData(),n=t.visualStyleAccessPath||"itemStyle",r=V9(t,n),o=i.getVisual("drawType");return{dataEach:i.hasItemOption?function(t,e){var i=t.getRawDataItem(e);if(i&&i[n]){Bt.option=i[n];var a=r(Bt);Tw(t.ensureUniqueItemVisual(e,"style"),a),Bt.option.decal&&(t.setItemVisual(e,"decal",Bt.option.decal),Bt.option.decal.dirty=!0),o in a&&t.setItemVisual(e,"colorFromPalette",!1)}}:null}}}}),FH(4500,{performRawSeries:!0,overallReset:function(t){var e=TQ();t.eachSeries(function(t){var i=t.getColorBy();if(!t.isColorBySeries()){var n=t.type+"-"+i,r=e.get(n);r||(r={},e.set(n,r)),V4(t).scope=r}}),t.eachSeries(function(e){if(!(e.isColorBySeries()||t.isSeriesFiltered(e))){var i=e.getRawData(),n={},r=e.getData(),o=V4(e).scope,a=e.visualStyleAccessPath||"itemStyle",s=V7(e,a);r.each(function(t){n[r.getRawIndex(t)]=t}),i.each(function(t){var a=n[t];if(r.getItemVisual(a,"colorFromPalette")){var l=r.ensureUniqueItemVisual(a,"style"),h=i.getName(t)||t+"",u=i.count();l[s]=e.getColorFromPalette(h,o,u)}})}})}}),FH(2e3,{createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var i=t.getData();if(t.legendIcon&&i.setVisual("legendIcon",t.legendIcon),t.hasSymbolVisual){for(var n={},r={},o=!1,a=0;a<BS.length;a++){var s=BS[a],l=t.get(s);TD(l)?(o=!0,r[s]=l):n[s]=l}if(n.symbol=n.symbol||t.defaultSymbol,i.setVisual(Tw({legendIcon:t.legendIcon||n.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},n)),!e.isSeriesFiltered(t)){var h=TR(r);return{dataEach:o?function(e,i){for(var n=t.getRawValue(i),o=t.getDataParams(i),a=0;a<h.length;a++){var s=h[a];e.setItemVisual(i,s,r[s](n,o))}}:null}}}}}),FH(4500,{createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(t.hasSymbolVisual&&!e.isSeriesFiltered(t))return{dataEach:t.getData().hasItemOption?function(t,e){for(var i=t.getItemModel(e),n=0;n<BC.length;n++){var r=BC[n],o=i.getShallow(r,!0);null!=o&&t.setItemVisual(e,r,o)}}:null}}}),FH(7e3,function(t,e){t.eachRawSeries(function(i){if(!t.isSeriesFiltered(i)){var n=i.getData();n.hasItemVisual()&&n.each(function(t){var i=n.getItemVisual(t,"decal");i&&(n.ensureUniqueItemVisual(t,"style").decal=Fr(i,e))});var r=n.getVisual("decal");r&&(n.getVisual("style").decal=Fr(r,e))}})}),FO(HA),FP(900,function(t){var e=TQ();t.eachSeries(function(t){var i=t.get("stack");if(i){var n=e.get(i)||e.set(i,[]),r=t.getData(),o={stackResultDimension:r.getCalculationInfo("stackResultDimension"),stackedOverDimension:r.getCalculationInfo("stackedOverDimension"),stackedDimension:r.getCalculationInfo("stackedDimension"),stackedByDimension:r.getCalculationInfo("stackedByDimension"),isStackedByIndex:r.getCalculationInfo("isStackedByIndex"),data:r,seriesModel:t};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;n.length&&r.setCalculationInfo("stackedOnSeries",n[n.length-1].seriesModel),n.push(o)}}),e.each(Hk)}),q=function(t,e){Tb(e=e||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var i,n=new Aj,r=new DK({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(r);var o=new D0({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new DK({style:{fill:"none"},textContent:o,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});return n.add(a),e.showSpinner&&((i=new P1({shape:{startAngle:-Be/2,endAngle:-Be/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*Be/2}).start("circularInOut"),i.animateShape(!0).when(1e3,{startAngle:3*Be/2}).delay(300).start("circularInOut"),n.add(i)),n.resize=function(){var n=o.getBoundingRect().width,s=e.showSpinner?e.spinnerRadius:0,l=(t.getWidth()-2*s-(e.showSpinner&&n?10:0)-n)/2-(e.showSpinner&&n?0:5+n/2)+(e.showSpinner?0:n/2)+(n?0:s),h=t.getHeight()/2;e.showSpinner&&i.setShape({cx:l,cy:h}),a.setShape({x:l-s,y:h-s,width:2*s,height:2*s}),r.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n},FI.default=q,FN({type:Oc,event:Oc,update:Oc},T5),FN({type:Od,event:Od,update:Od},T5),FN({type:Op,event:Op,update:Op},T5),FN({type:Of,event:Of,update:Of},T5),FN({type:Og,event:Og,update:Og},T5),K={color:Bg,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Bg]},FT.light=K,FT.dark=Bb;var FF=[],FW={registerPreprocessor:FO,registerProcessor:FP,registerPostInit:function(t){FL("afterinit",t)},registerPostUpdate:function(t){FL("afterupdate",t)},registerUpdateLifecycle:FL,registerAction:FN,registerCoordinateSystem:function(t,e){Hc.register(t,e)},registerLayout:function(t,e){FB(FM,t,e,1e3,"layout")},registerVisual:FH,registerTransform:function(t){var e=(t=Tm(t)).type;e||Hi("");var i=e.split(":");2!==i.length&&Hi("");var n=!1;"echarts"===i[0]&&(e=i[1],n=!0),t.__isBuiltIn=n,Vi.set(e,t)},registerLoading:function(t,e){FI[t]=e},registerMap:function(t,e,i){var n=Fs.registerMap;n&&n(t,e,i)},registerImpl:function(t,e){Fs[t]=e},PRIORITY:{PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:4500,ARIA:6e3,DECAL:7e3}},ComponentModel:NW,ComponentView:Vj,SeriesModel:VL,ChartView:VX,registerComponentModel:function(t){NW.registerClass(t)},registerComponentView:function(t){Vj.registerClass(t)},registerSeriesModel:function(t){VL.registerClass(t)},registerChartView:function(t){VX.registerClass(t)},registerSubTypeDefaulter:function(t,e){NW.registerSubTypeDefaulter(t,e)},registerPainter:function(t,e){AU[t]=e}};function Fz(t){if(Tk(t)){T_(t,function(t){Fz(t)});return}Tx(FF,t)>=0||(FF.push(t),TD(t)&&(t={install:t}),t.install(FW))}function Fj(t,e,i){var n=Ti.createCanvas(),r=e.getWidth(),o=e.getHeight(),a=n.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=r+"px",a.height=o+"px",n.setAttribute("data-zr-dom-id",t)),n.width=r*i,n.height=o*i,n}var FU=function(t){function e(e,i,n){var r,o=t.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null,n=n||Ag,"string"==typeof e?r=Fj(e,i,n):TN(e)&&(e=(r=e).id),o.id=e,o.dom=r;var a=r.style;return a&&(T1(r),r.onselectstart=function(){return!1},a.padding="0",a.margin="0",a.borderWidth="0"),o.painter=i,o.dpr=n,o}return T6(e,t),e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=Fj("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,e,i,n){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var r,o=[],a=this.maxRepaintRectCount,s=!1,l=new I1(0,0,0,0);function h(t){if(!(!t.isFinite()||t.isZero())){if(0===o.length){var e=new I1(0,0,0,0);e.copy(t),o.push(e)}else{for(var i=!1,n=1/0,r=0,h=0;h<o.length;++h){var u=o[h];if(u.intersect(t)){var c=new I1(0,0,0,0);c.copy(u),c.union(t),o[h]=c,i=!0;break}if(s){l.copy(t),l.union(u);var d=t.width*t.height,p=u.width*u.height,f=l.width*l.height-d-p;f<n&&(n=f,r=h)}}if(s&&(o[r].union(t),i=!0),!i){var e=new I1(0,0,0,0);e.copy(t),o.push(e)}s||(s=o.length>=a)}}}for(var u=this.__startIndex;u<this.__endIndex;++u){var c=t[u];if(c){var d=c.shouldBePainted(i,n,!0,!0),p=c.__isRendered&&(1&c.__dirty||!d)?c.getPrevPaintRect():null;p&&h(p);var f=d&&(1&c.__dirty||!c.__isRendered)?c.getPaintRect():null;f&&h(f)}}for(var u=this.__prevStartIndex;u<this.__prevEndIndex;++u){var c=e[u],d=c&&c.shouldBePainted(i,n,!0,!0);if(c&&(!d||!c.__zr)&&c.__isRendered){var p=c.getPrevPaintRect();p&&h(p)}}do{r=!1;for(var u=0;u<o.length;){if(o[u].isZero()){o.splice(u,1);continue}for(var g=u+1;g<o.length;)o[u].intersect(o[g])?(r=!0,o[u].union(o[g]),o.splice(g,1)):g++;u++}}while(r)return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,e){var i=this.dpr,n=this.dom,r=n.style,o=this.domBack;r&&(r.width=t+"px",r.height=e+"px"),n.width=t*i,n.height=e*i,o&&(o.width=t*i,o.height=e*i,1!==i&&this.ctxBack.scale(i,i))},e.prototype.clear=function(t,e,i){var n=this.dom,r=this.ctx,o=n.width,a=n.height;e=e||this.clearColor;var s=this.motionBlur&&!t,l=this.lastFrameAlpha,h=this.dpr,u=this;s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(n,0,0,o/h,a/h));var c=this.domBack;function d(t,i,n,o){if(r.clearRect(t,i,n,o),e&&"transparent"!==e){var a=void 0;TF(e)?(a=(e.global||e.__width===n&&e.__height===o)&&e.__canvasGradient||BG(r,e,{x:0,y:0,width:n,height:o}),e.__canvasGradient=a,e.__width=n,e.__height=o):null!=e.image&&(e.scaleX=e.scaleX||h,e.scaleY=e.scaleY||h,a=B1(r,e,{dirty:function(){u.setUnpainted(),u.painter.refresh()}})),r.save(),r.fillStyle=a||e,r.fillRect(t,i,n,o),r.restore()}s&&(r.save(),r.globalAlpha=l,r.drawImage(c,t,i,n,o),r.restore())}!i||s?d(0,0,o,a):i.length&&T_(i,function(t){d(t.x*h,t.y*h,t.width*h,t.height*h)})},e}(If),FG=function(){function t(t,e,i,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var r=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=i=Tw({},i||{}),this.dpr=i.devicePixelRatio||Ag,this._singleCanvas=r,this.root=t,t.style&&(T1(t),t.innerHTML=""),this.storage=e;var o=this._zlevelList;this._prevDisplayList=[];var a=this._layers;if(r){var s=t.width,l=t.height;null!=i.width&&(s=i.width),null!=i.height&&(l=i.height),this.dpr=i.devicePixelRatio||1,t.width=s*this.dpr,t.height=l*this.dpr,this._width=s,this._height=l;var h=new FU(t,this,this.dpr);h.__builtin__=!0,h.initContext(),a[314159]=h,h.zlevel=314159,o.push(314159),this._domRoot=t}else{this._width=BX(t,0,i),this._height=BX(t,1,i);var u,c,d,p=this._domRoot=(u=this._width,c=this._height,(d=document.createElement("div")).style.cssText=["position:relative","width:"+u+"px","height:"+c+"px","padding:0","margin:0","border-width:0"].join(";")+";",d);t.appendChild(p)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),i=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,i,t,this._redrawId);for(var r=0;r<n.length;r++){var o=n[r],a=this._layers[o];if(!a.__builtin__&&a.refresh){var s=0===r?this._backgroundColor:null;a.refresh(s)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(t){var e,i=t.length,n=this._hoverlayer;if(n&&n.clear(),i){for(var r={inHover:!0,viewWidth:this._width,viewHeight:this._height},o=0;o<i;o++){var a=t[o];a.__inHover&&(n||(n=this._hoverlayer=this.getLayer(1e5)),e||(e=n.ctx).save(),Ft(e,a,r,o===i-1))}e&&e.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(1e5)},t.prototype.paintOne=function(t,e){B7(t,e)},t.prototype._paintList=function(t,e,i,n){if(this._redrawId===n){i=i||!1,this._updateLayerStatus(t);var r=this._doPaintList(t,e,i),o=r.finished,a=r.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),a&&this._paintHoverList(t),o)this.eachLayer(function(t){t.afterBrush&&t.afterBrush()});else{var s=this;tp(function(){s._paintList(t,e,i,n)})}}},t.prototype._compositeManually=function(){var t=this.getLayer(314159).ctx,e=this._domRoot.width,i=this._domRoot.height;t.clearRect(0,0,e,i),this.eachBuiltinLayer(function(n){n.virtual&&t.drawImage(n.dom,0,0,e,i)})},t.prototype._doPaintList=function(t,e,i){for(var n=this,r=[],o=this._opts.useDirtyRect,a=0;a<this._zlevelList.length;a++){var s=this._zlevelList[a],l=this._layers[s];l.__builtin__&&l!==this._hoverlayer&&(l.__dirty||i)&&r.push(l)}for(var h=!0,u=!1,c=this,d=0;d<r.length;d++)!function(a){var s,l=r[a],d=l.ctx,p=o&&l.createRepaintRects(t,e,c._width,c._height),f=i?l.__startIndex:l.__drawIndex,g=!i&&l.incremental&&Date.now,m=g&&Date.now(),y=l.zlevel===c._zlevelList[0]?c._backgroundColor:null;if(l.__startIndex===l.__endIndex)l.clear(!1,y,p);else if(f===l.__startIndex){var w=t[f];w.incremental&&w.notClear&&!i||l.clear(!1,y,p)}-1===f&&(console.error("For some unknown reason. drawIndex is -1"),f=l.__startIndex);var b=function(e){var i={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(s=f;s<l.__endIndex;s++){var r=t[s];if(r.__inHover&&(u=!0),n._doPaintEl(r,l,o,e,i,s===l.__endIndex-1),g&&Date.now()-m>15)break}i.prevElClipPaths&&d.restore()};if(p){if(0===p.length)s=l.__endIndex;else for(var x=c.dpr,S=0;S<p.length;++S){var C=p[S];d.save(),d.beginPath(),d.rect(C.x*x,C.y*x,C.width*x,C.height*x),d.clip(),b(C),d.restore()}}else d.save(),b(),d.restore();l.__drawIndex=s,l.__drawIndex<l.__endIndex&&(h=!1)}(d);return M9.wxa&&T_(this._layers,function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()}),{finished:h,needsRefreshHover:u}},t.prototype._doPaintEl=function(t,e,i,n,r,o){var a=e.ctx;if(i){var s=t.getPaintRect();(!n||s&&s.intersect(n))&&(Ft(a,t,r,o),t.setPrevPaintRect(s))}else Ft(a,t,r,o)},t.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=314159);var i=this._layers[t];return i||((i=new FU("zr_"+t,this,this.dpr)).zlevel=t,i.__builtin__=!0,this._layerConfig[t]?Ty(i,this._layerConfig[t],!0):this._layerConfig[t-.01]&&Ty(i,this._layerConfig[t-.01],!0),e&&(i.virtual=e),this.insertLayer(t,i),i.initContext()),i},t.prototype.insertLayer=function(t,e){var i=this._layers,n=this._zlevelList,r=n.length,o=this._domRoot,a=null,s=-1;if(!i[t]&&e&&(e.__builtin__||"function"==typeof e.resize&&"function"==typeof e.refresh)){if(r>0&&t>n[0]){for(s=0;s<r-1&&(!(n[s]<t)||!(n[s+1]>t));s++);a=i[n[s]]}if(n.splice(s+1,0,t),i[t]=e,!e.virtual){if(a){var l=a.dom;l.nextSibling?o.insertBefore(e.dom,l.nextSibling):o.appendChild(e.dom)}else o.firstChild?o.insertBefore(e.dom,o.firstChild):o.appendChild(e.dom)}e.painter||(e.painter=this)}},t.prototype.eachLayer=function(t,e){for(var i=this._zlevelList,n=0;n<i.length;n++){var r=i[n];t.call(e,this._layers[r],r)}},t.prototype.eachBuiltinLayer=function(t,e){for(var i=this._zlevelList,n=0;n<i.length;n++){var r=i[n],o=this._layers[r];o.__builtin__&&t.call(e,o,r)}},t.prototype.eachOtherLayer=function(t,e){for(var i=this._zlevelList,n=0;n<i.length;n++){var r=i[n],o=this._layers[r];o.__builtin__||t.call(e,o,r)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(t){function e(t){a&&(a.__endIndex!==t&&(a.__dirty=!0),a.__endIndex=t)}if(this.eachBuiltinLayer(function(t,e){t.__dirty=t.__used=!1}),this._singleCanvas)for(var i,n,r=1;r<t.length;r++){var o=t[r];if(o.zlevel!==t[r-1].zlevel||o.incremental){this._needsManuallyCompositing=!0;break}}var a=null,s=0;for(n=0;n<t.length;n++){var o=t[n],l=o.zlevel,h=void 0;i!==l&&(i=l,s=0),o.incremental?((h=this.getLayer(l+.001,this._needsManuallyCompositing)).incremental=!0,s=1):h=this.getLayer(l+(s>0?.01:0),this._needsManuallyCompositing),h.__builtin__||Tg("ZLevel "+l+" has been used by unkown layer "+h.id),h!==a&&(h.__used=!0,h.__startIndex!==n&&(h.__dirty=!0),h.__startIndex=n,h.incremental?h.__drawIndex=-1:h.__drawIndex=n,e(n),a=h),1&o.__dirty&&!o.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=n))}e(n),this.eachBuiltinLayer(function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(t){t.clear()},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t,T_(this._layers,function(t){t.setUnpainted()})},t.prototype.configLayer=function(t,e){if(e){var i=this._layerConfig;i[t]?Ty(i[t],e,!0):i[t]=e;for(var n=0;n<this._zlevelList.length;n++){var r=this._zlevelList[n];(r===t||r===t+.01)&&Ty(this._layers[r],i[t],!0)}}},t.prototype.delLayer=function(t){var e=this._layers,i=this._zlevelList,n=e[t];n&&(n.dom.parentNode.removeChild(n.dom),delete e[t],i.splice(Tx(i,t),1))},t.prototype.resize=function(t,e){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var n=this._opts,r=this.root;if(null!=t&&(n.width=t),null!=e&&(n.height=e),t=BX(r,0,n),e=BX(r,1,n),i.style.display="",this._width!==t||e!==this._height){for(var o in i.style.width=t+"px",i.style.height=e+"px",this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(314159).resize(t,e)}return this},t.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new FU("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var i=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,r=e.dom.height;this.eachLayer(function(t){t.__builtin__?i.drawImage(t.dom,0,0,n,r):t.renderToCanvas&&(i.save(),t.renderToCanvas(i),i.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},a=this.storage.getDisplayList(!0),s=0,l=a.length;s<l;s++)Ft(i,a[s],o,s===l-1);return e.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}(),FY=Math.sin,FX=Math.cos,F$=Math.PI,FZ=2*Math.PI,Fq=180/F$,FK=function(){function t(){}return t.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},t.prototype.moveTo=function(t,e){this._add("M",t,e)},t.prototype.lineTo=function(t,e){this._add("L",t,e)},t.prototype.bezierCurveTo=function(t,e,i,n,r,o){this._add("C",t,e,i,n,r,o)},t.prototype.quadraticCurveTo=function(t,e,i,n){this._add("Q",t,e,i,n)},t.prototype.arc=function(t,e,i,n,r,o){this.ellipse(t,e,i,i,0,n,r,o)},t.prototype.ellipse=function(t,e,i,n,r,o,a,s){var l=a-o,h=!s,u=Math.abs(l),c=EV(u-FZ)||(h?l>=FZ:-l>=FZ),d=l>0?l%FZ:l%FZ+FZ,p=!1;p=!!c||!EV(u)&&d>=F$==!!h;var f=t+i*FX(o),g=e+n*FY(o);this._start&&this._add("M",f,g);var m=Math.round(r*Fq);if(c){var y=1/this._p,w=(h?1:-1)*(FZ-y);this._add("A",i,n,m,1,+h,t+i*FX(o+w),e+n*FY(o+w)),y>.01&&this._add("A",i,n,m,0,+h,f,g)}else{var b=t+i*FX(a),x=e+n*FY(a);this._add("A",i,n,m,+p,+h,b,x)}},t.prototype.rect=function(t,e,i,n){this._add("M",t,e),this._add("l",i,0),this._add("l",0,n),this._add("l",-i,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(t,e,i,n,r,o,a,s,l){for(var h=[],u=this._p,c=1;c<arguments.length;c++){var d=arguments[c];if(isNaN(d)){this._invalid=!0;return}h.push(Math.round(d*u)/u)}this._d.push(t+h.join(" ")),this._start="Z"===t},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),FQ="none",FJ=Math.round,F0=["lineCap","miterLimit","lineJoin"],F1=TM(F0,function(t){return"stroke-"+t.toLowerCase()}),F2="http://www.w3.org/2000/svg",F5="http://www.w3.org/1999/xlink",F3="ecmeta_";function F4(t){return document.createElementNS(F2,t)}function F6(t,e,i,n,r){return{tag:t,attrs:i||{},children:n,text:r,key:e}}function F8(t,e){var i=(e=e||{}).newline?"\n":"";return function t(e){var n=e.children,r=e.tag,o=e.attrs,a=e.text;return function(t,e){var i=[];if(e)for(var n in e){var r=e[n],o=n;!1!==r&&(!0!==r&&null!=r&&(o+='="'+r+'"'),i.push(o))}return"<"+t+" "+i.join(" ")+">"}(r,o)+("style"!==r?I_(a):a||"")+(n?""+i+TM(n,function(e){return t(e)}).join(i)+i:"")+"</"+r+">"}(t)}function F9(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function F7(t,e,i,n){return F6("svg","root",{width:t,height:e,xmlns:F2,"xmlns:xlink":F5,version:"1.1",baseProfile:"full",viewBox:!!n&&"0 0 "+t+" "+e},i)}var Wt=0,We={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Wi="transform-origin",Wn={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Wr(t,e){var i=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[i]=t,i}function Wo(t){return TO(t)?We[t]?"cubic-bezier("+We[t]+")":RD(t)?t:"":""}function Wa(t,e,i,n){var r=t.animators,o=r.length,a=[];if(t instanceof P2){var s=function(t,e,i){var n,r,o=t.shape.paths,a={};if(T_(o,function(t){var e=F9(i.zrId);e.animation=!0,Wa(t,{},e,!0);var o=e.cssAnims,s=e.cssNodes,l=TR(o),h=l.length;if(h){var u=o[r=l[h-1]];for(var c in u){var d=u[c];a[c]=a[c]||{d:""},a[c].d+=d.d||""}for(var p in s){var f=s[p].animation;f.indexOf(r)>=0&&(n=f)}}}),n){e.d=!1;var s=Wr(a,i);return n.replace(r,s)}}(t,e,i);if(s)a.push(s);else if(!o)return}else if(!o)return;for(var l={},h=0;h<o;h++){var u=r[h],c=[u.getMaxTime()/1e3+"s"],d=Wo(u.getClip().easing),p=u.getDelay();d?c.push(d):c.push("linear"),p&&c.push(p/1e3+"s"),u.getLoop()&&c.push("infinite");var f=c.join(" ");l[f]=l[f]||[f,[]],l[f][1].push(u)}for(var g in l){var s=function(r){var o,a,s=r[1],l=s.length,h={},u={},c={},d="animation-timing-function";function p(t,e,i){for(var n=t.getTracks(),r=t.getMaxTime(),o=0;o<n.length;o++){var a=n[o];if(a.needsAnimate()){var s=a.keyframes,l=a.propName;if(i&&(l=i(l)),l)for(var h=0;h<s.length;h++){var u=s[h],c=Math.round(u.time/r*100)+"%",p=Wo(u.easing),f=u.rawValue;(TO(f)||TL(f))&&(e[c]=e[c]||{},e[c][l]=u.rawValue,p&&(e[c][d]=p))}}}}for(var f=0;f<l;f++){var g=s[f],m=g.targetName;m?"shape"===m&&p(g,u):n||p(g,h)}for(var y in h){var w={};AM(w,t),Tw(w,h[y]);var b=EZ(w),x=h[y][d];c[y]=b?{transform:b}:{},function(t,e){var i=e.originX,n=e.originY;(i||n)&&(t[Wi]=i+"px "+n+"px")}(c[y],w),x&&(c[y][d]=x)}var S=!0;for(var y in u){c[y]=c[y]||{};var C=!o,x=u[y][d];C&&(o=new D_);var _=o.len();o.reset(),c[y].d=function(t,e,i){var n=Tw({},t.shape);Tw(n,e),t.buildPath(i,n);var r=new FK;return r.reset(E$(t)),i.rebuildPath(r,1),r.generateStr(),r.getStr()}(t,u[y],o);var M=o.len();if(!C&&_!==M){S=!1;break}x&&(c[y][d]=x)}if(!S)for(var y in c)delete c[y].d;if(!n)for(var f=0;f<l;f++){var g=s[f],m=g.targetName;"style"===m&&p(g,c,function(t){return Wn[t]})}for(var T=TR(c),I=!0,f=1;f<T.length;f++){var R=T[f-1],E=T[f];if(c[R][Wi]!==c[E][Wi]){I=!1;break}a=c[R][Wi]}if(I&&a){for(var y in c)c[y][Wi]&&delete c[y][Wi];e[Wi]=a}if(TI(T,function(t){return TR(c[t]).length>0}).length)return Wr(c,i)+" "+r[0]+" both"}(l[g]);s&&a.push(s)}if(a.length){var m=i.zrId+"-cls-"+Wt++;i.cssNodes["."+m]={animation:a.join(",")},e.class=m}}function Ws(t,e,i,n){var r=JSON.stringify(t),o=i.cssStyleCache[r];o||(o=i.zrId+"-cls-"+Wt++,i.cssStyleCache[r]=o,i.cssNodes["."+o+(n?":hover":"")]=t),e.class=e.class?e.class+" "+o:o}var Wl=Math.round;function Wh(t){return t&&TD(t.toDataURL)}function Wu(t,e,i,n){!function(t,e,i,n){var r,o,a=null==e.opacity?1:e.opacity;if(i instanceof DU){t("opacity",a);return}if(null!=(r=e.fill)&&r!==FQ){var s=EH(e.fill);t("fill",s.color);var l=null!=e.fillOpacity?e.fillOpacity*s.opacity*a:s.opacity*a;(n||l<1)&&t("fill-opacity",l)}else t("fill",FQ);if(null!=(o=e.stroke)&&o!==FQ){var h=EH(e.stroke);t("stroke",h.color);var u=e.strokeNoScale?i.getLineScale():1,c=u?(e.lineWidth||0)/u:0,d=null!=e.strokeOpacity?e.strokeOpacity*h.opacity*a:h.opacity*a,p=e.strokeFirst;if((n||1!==c)&&t("stroke-width",c),(n||p)&&t("paint-order",p?"stroke":"fill"),(n||d<1)&&t("stroke-opacity",d),e.lineDash){var f=B$(i),g=f[0],m=f[1];g&&(m=FJ(m||0),t("stroke-dasharray",g.join(",")),(m||n)&&t("stroke-dashoffset",m))}else n&&t("stroke-dasharray",FQ);for(var y=0;y<F0.length;y++){var w=F0[y];if(n||e[w]!==DN[w]){var b=e[w]||DN[w];b&&t(F1[y],b)}}}else n&&t("stroke",FQ)}(function(r,o){var a="fill"===r||"stroke"===r;a&&EY(o)?Ww(e,t,r,n):a&&Ej(o)?Wb(i,t,r,n):a&&"none"===o?t[r]="transparent":t[r]=o},e,i,!1),function(t,e,i){var n=t.style;if(n&&(n.shadowBlur||n.shadowOffsetX||n.shadowOffsetY)){var r,o,a=(r=t.style,o=t.getGlobalScale(),[r.shadowColor,(r.shadowBlur||0).toFixed(2),(r.shadowOffsetX||0).toFixed(2),(r.shadowOffsetY||0).toFixed(2),o[0],o[1]].join(",")),s=i.shadowCache,l=s[a];if(!l){var h=t.getGlobalScale(),u=h[0],c=h[1];if(!u||!c)return;var d=n.shadowOffsetX||0,p=n.shadowOffsetY||0,f=n.shadowBlur,g=EH(n.shadowColor),m=g.opacity,y=g.color;l=i.zrId+"-s"+i.shadowIdx++,i.defs[l]=F6("filter",l,{id:l,x:"-100%",y:"-100%",width:"300%",height:"300%"},[F6("feDropShadow","",{dx:d/u,dy:p/c,stdDeviation:f/2/u+" "+f/2/c,"flood-color":y,"flood-opacity":m})]),s[a]=l}e.filter=EX(l)}}(i,t,n)}function Wc(t,e){var i=function(t){if("function"==typeof tv)return tv(t)}(e);i&&(i.each(function(e,i){null!=e&&(t[(F3+i).toLowerCase()]=e+"")}),e.isSilent()&&(t[F3+"silent"]="true"))}function Wd(t){return EV(t[0]-1)&&EV(t[1])&&EV(t[2])&&EV(t[3]-1)}function Wp(t,e,i){if(e&&!(EV(e[4])&&EV(e[5])&&Wd(e))){var n=i?10:1e4;t.transform=Wd(e)?"translate("+Wl(e[4]*n)/n+" "+Wl(e[5]*n)/n+")":"matrix("+EB(e[0])+","+EB(e[1])+","+EB(e[2])+","+EB(e[3])+","+EF(e[4])+","+EF(e[5])+")"}}function Wf(t,e,i){for(var n=t.points,r=[],o=0;o<n.length;o++)r.push(Wl(n[o][0]*i)/i),r.push(Wl(n[o][1]*i)/i);e.points=r.join(" ")}function Wg(t){return!t.smooth}var Wm={circle:[(Q=TM(["cx","cy","r"],function(t){return"string"==typeof t?[t,t]:t}),function(t,e,i){for(var n=0;n<Q.length;n++){var r=Q[n],o=t[r[0]];null!=o&&(e[r[1]]=Wl(o*i)/i)}})],polyline:[Wf,Wg],polygon:[Wf,Wg]};function Wy(t,e){var i=t.style,n=t.shape,r=Wm[t.type],o={},a=e.animation,s="path",l=t.style.strokePercent,h=e.compress&&E$(t)||4;if(!r||e.willUpdate||r[1]&&!r[1](n)||a&&function(t){for(var e=t.animators,i=0;i<e.length;i++)if("shape"===e[i].targetName)return!0;return!1}(t)||l<1){var u=!t.path||t.shapeChanged();t.path||t.createPathProxy();var c=t.path;u&&(c.beginPath(),t.buildPath(c,t.shape),t.pathUpdated());var d=c.getVersion(),p=t.__svgPathBuilder;t.__svgPathVersion===d&&p&&l===t.__svgPathStrokePercent||(p||(p=t.__svgPathBuilder=new FK),p.reset(h),c.rebuildPath(p,l),p.generateStr(),t.__svgPathVersion=d,t.__svgPathStrokePercent=l),o.d=p.getStr()}else s=t.type,r[0](n,o,Math.pow(10,h));return Wp(o,t.transform),Wu(o,i,t,e),Wc(o,t),e.animation&&Wa(t,o,e),e.emphasis&&function(t,e,i){if(!t.ignore){if(t.isSilent()){var n={"pointer-events":"none"};Ws(n,e,i,!0)}else{var r=t.states.emphasis&&t.states.emphasis.style?t.states.emphasis.style:{},o=r.fill;if(!o){var a=t.style&&t.style.fill,s=t.states.select&&t.states.select.style&&t.states.select.style.fill,l=t.currentStates.indexOf("select")>=0&&s||a;l&&(o=R5(l))}var h=r.lineWidth;h&&(h/=!r.strokeNoScale&&t.transform?t.transform[0]:1);var n={cursor:"pointer"};o&&(n.fill=o),r.stroke&&(n.stroke=r.stroke),h&&(n["stroke-width"]=h),Ws(n,e,i,!0)}}}(t,o,e),F6(s,t.id+"",o)}function Wv(t,e){return t instanceof DB?Wy(t,e):t instanceof DU?function(t,e){var i,n=t.style,r=n.image;if(r&&!TO(r)&&((i=r)&&TO(i.src)?r=r.src:Wh(r)&&(r=r.toDataURL())),r){var o=n.x||0,a=n.y||0,s={href:r,width:n.width,height:n.height};return o&&(s.x=o),a&&(s.y=a),Wp(s,t.transform),Wu(s,n,t,e),Wc(s,t),e.animation&&Wa(t,s,e),F6("image",t.id+"",s)}}(t,e):t instanceof DW?function(t,e){var i=t.style,n=i.text;if(null!=n&&(n+=""),!(!n||isNaN(i.x)||isNaN(i.y))){var r,o,a,s=i.font||Tt,l=i.x||0,h=(r=i.y||0,o=AD(s),"top"===(a=i.textBaseline)?r+=o/2:"bottom"===a&&(r-=o/2),r),u={"dominant-baseline":"central","text-anchor":EW[i.textAlign]||i.textAlign};if(D6(i)){var c="",d=i.fontStyle,p=D3(i.fontSize);if(!parseFloat(p))return;var f=i.fontFamily||M7,g=i.fontWeight;c+="font-size:"+p+";font-family:"+f+";",d&&"normal"!==d&&(c+="font-style:"+d+";"),g&&"normal"!==g&&(c+="font-weight:"+g+";"),u.style=c}else u.style="font: "+s;return n.match(/\s/)&&(u["xml:space"]="preserve"),l&&(u.x=l),h&&(u.y=h),Wp(u,t.transform),Wu(u,i,t,e),Wc(u,t),e.animation&&Wa(t,u,e),F6("text",t.id+"",u,void 0,n)}}(t,e):void 0}function Ww(t,e,i,n){var r,o=t[i],a={gradientUnits:o.global?"userSpaceOnUse":"objectBoundingBox"};if(EU(o))r="linearGradient",a.x1=o.x,a.y1=o.y,a.x2=o.x2,a.y2=o.y2;else{if(!EG(o))return;r="radialGradient",a.cx=Tz(o.x,.5),a.cy=Tz(o.y,.5),a.r=Tz(o.r,.5)}for(var s=o.colorStops,l=[],h=0,u=s.length;h<u;++h){var c=100*EF(s[h].offset)+"%",d=EH(s[h].color),p=d.color,f=d.opacity,g={offset:c};g["stop-color"]=p,f<1&&(g["stop-opacity"]=f),l.push(F6("stop",h+"",g))}var m=F8(F6(r,"",a,l)),y=n.gradientCache,w=y[m];w||(w=n.zrId+"-g"+n.gradientIdx++,y[m]=w,a.id=w,n.defs[w]=F6(r,w,a,l)),e[i]=EX(w)}function Wb(t,e,i,n){var r,o,a,s=t.style[i],l=t.getBoundingRect(),h={},u=s.repeat,c="no-repeat"===u,d="repeat-x"===u,p="repeat-y"===u;if(Ez(s)){var f=s.imageWidth,g=s.imageHeight,m=void 0,y=s.image;if(TO(y)?m=y:y&&TO(y.src)?m=y.src:Wh(y)&&(m=y.toDataURL()),"undefined"==typeof Image){var w="Image width/height must been given explictly in svg-ssr renderer.";TY(f,w),TY(g,w)}else if(null==f||null==g){var b=function(t,e){if(t){var i=t.elm,n=f||e.width,r=g||e.height;"pattern"===t.tag&&(d?(r=1,n/=l.width):p&&(n=1,r/=l.height)),t.attrs.width=n,t.attrs.height=r,i&&(i.setAttribute("width",n),i.setAttribute("height",r))}},x=kV(m,null,t,function(t){c||b(C,t),b(r,t)});x&&x.width&&x.height&&(f=f||x.width,g=g||x.height)}r=F6("image","img",{href:m,width:f,height:g}),h.width=f,h.height=g}else s.svgElement&&(r=Tm(s.svgElement),h.width=s.svgWidth,h.height=s.svgHeight);if(r){c?o=a=1:d?(a=1,o=h.width/l.width):p?(o=1,a=h.height/l.height):h.patternUnits="userSpaceOnUse",null==o||isNaN(o)||(h.width=o),null==a||isNaN(a)||(h.height=a);var S=EZ(s);S&&(h.patternTransform=S);var C=F6("pattern","",h,[r]),_=F8(C),M=n.patternCache,T=M[_];T||(T=n.zrId+"-p"+n.patternIdx++,M[_]=T,h.id=T,C=n.defs[T]=F6("pattern",T,h,[r])),e[i]=EX(T)}}function Wx(t){return document.createTextNode(t)}function WS(t,e,i){t.insertBefore(e,i)}function WC(t,e){t.removeChild(e)}function W_(t,e){t.appendChild(e)}function WM(t){return t.parentNode}function WT(t){return t.nextSibling}function WI(t,e){t.textContent=e}var WR=F6("","");function WE(t){return void 0===t}function WA(t){return void 0!==t}function Wk(t,e){var i=t.key===e.key;return t.tag===e.tag&&i}function WD(t){var e,i=t.children,n=t.tag;if(WA(n)){var r=t.elm=F4(n);if(WL(WR,t),Tk(i))for(e=0;e<i.length;++e){var o=i[e];null!=o&&W_(r,WD(o))}else WA(t.text)&&!TN(t.text)&&W_(r,Wx(t.text))}else t.elm=Wx(t.text);return t.elm}function WO(t,e,i,n,r){for(;n<=r;++n){var o=i[n];null!=o&&WS(t,WD(o),e)}}function WP(t,e,i,n){for(;i<=n;++i){var r=e[i];null!=r&&(WA(r.tag)?WC(WM(r.elm),r.elm):WC(t,r.elm))}}function WL(t,e){var i,n=e.elm,r=t&&t.attrs||{},o=e.attrs||{};if(r!==o){for(i in o){var a=o[i];r[i]!==a&&(!0===a?n.setAttribute(i,""):!1===a?n.removeAttribute(i):"style"===i?n.style.cssText=a:120!==i.charCodeAt(0)?n.setAttribute(i,a):"xmlns:xlink"===i||"xmlns"===i?n.setAttributeNS("http://www.w3.org/2000/xmlns/",i,a):58===i.charCodeAt(3)?n.setAttributeNS("http://www.w3.org/XML/1998/namespace",i,a):58===i.charCodeAt(5)?n.setAttributeNS(F5,i,a):n.setAttribute(i,a))}for(i in r)i in o||n.removeAttribute(i)}}var WN=0,WH=function(){function t(t,e,i){if(this.type="svg",this.refreshHover=WV("refreshHover"),this.configLayer=WV("configLayer"),this.storage=e,this._opts=i=Tw({},i),this.root=t,this._id="zr"+WN++,this._oldVNode=F7(i.width,i.height),t&&!i.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var r=this._svgDom=this._oldVNode.elm=F4("svg");WL(null,this._oldVNode),n.appendChild(r),t.appendChild(n)}this.resize(i.width,i.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",function(t,e){if(Wk(t,e))(function t(e,i){var n=i.elm=e.elm,r=e.children,o=i.children;e!==i&&(WL(e,i),WE(i.text)?WA(r)&&WA(o)?r!==o&&function(e,i,n){for(var r,o,a,s=0,l=0,h=i.length-1,u=i[0],c=i[h],d=n.length-1,p=n[0],f=n[d];s<=h&&l<=d;)null==u?u=i[++s]:null==c?c=i[--h]:null==p?p=n[++l]:null==f?f=n[--d]:Wk(u,p)?(t(u,p),u=i[++s],p=n[++l]):Wk(c,f)?(t(c,f),c=i[--h],f=n[--d]):Wk(u,f)?(t(u,f),WS(e,u.elm,WT(c.elm)),u=i[++s],f=n[--d]):(Wk(c,p)?(t(c,p),WS(e,c.elm,u.elm),c=i[--h]):(WE(r)&&(r=function(t,e,i){for(var n={},r=e;r<=i;++r){var o=t[r].key;void 0!==o&&(n[o]=r)}return n}(i,s,h)),WE(o=r[p.key])?WS(e,WD(p),u.elm):(a=i[o]).tag!==p.tag?WS(e,WD(p),u.elm):(t(a,p),i[o]=void 0,WS(e,a.elm,u.elm))),p=n[++l]);(s<=h||l<=d)&&(s>h?WO(e,null==n[d+1]?null:n[d+1].elm,n,l,d):WP(e,i,s,h))}(n,r,o):WA(o)?(WA(e.text)&&WI(n,""),WO(n,null,o,0,o.length-1)):WA(r)?WP(n,r,0,r.length-1):WA(e.text)&&WI(n,""):e.text!==i.text&&(WA(r)&&WP(n,r,0,r.length-1),WI(n,i.text)))})(t,e);else{var i=t.elm,n=WM(i);WD(e),null!==n&&(WS(n,e.elm,WT(i)),WP(n,[t],0,0))}}(this._oldVNode,t),this._oldVNode=t}},t.prototype.renderOneToVNode=function(t){return Wv(t,F9(this._id))},t.prototype.renderToVNode=function(t){t=t||{};var e=this.storage.getDisplayList(!0),i=this._width,n=this._height,r=F9(this._id);r.animation=t.animation,r.willUpdate=t.willUpdate,r.compress=t.compress,r.emphasis=t.emphasis;var o=[],a=this._bgVNode=function(t,e,i,n){var r;if(i&&"none"!==i){if(r=F6("rect","bg",{width:t,height:e,x:"0",y:"0"}),EY(i))Ww({fill:i},r.attrs,"fill",n);else if(Ej(i))Wb({style:{fill:i},dirty:T5,getBoundingRect:function(){return{width:t,height:e}}},r.attrs,"fill",n);else{var o=EH(i),a=o.color,s=o.opacity;r.attrs.fill=a,s<1&&(r.attrs["fill-opacity"]=s)}}return r}(i,n,this._backgroundColor,r);a&&o.push(a);var s=t.compress?null:this._mainVNode=F6("g","main",{},[]);this._paintList(e,r,s?s.children:o),s&&o.push(s);var l=TM(TR(r.defs),function(t){return r.defs[t]});if(l.length&&o.push(F6("defs","defs",{},l)),t.animation){var h,u,c,d,p,f,g,m=(h=r.cssNodes,u=r.cssAnims,d=" {"+(c="\n"),p=c+"}",f=TM(TR(h),function(t){return t+d+TM(TR(h[t]),function(e){return e+":"+h[t][e]+";"}).join(c)+p}).join(c),g=TM(TR(u),function(t){return"@keyframes "+t+d+TM(TR(u[t]),function(e){return e+d+TM(TR(u[t][e]),function(i){var n=u[t][e][i];return"d"===i&&(n='path("'+n+'")'),i+":"+n+";"}).join(c)+p}).join(c)+p}).join(c),f||g?["<![CDATA[",f,g,"]]>"].join(c):"");if(m){var y=F6("style","stl",{},[],m);o.push(y)}}return F7(i,n,o,t.useViewBox)},t.prototype.renderToString=function(t){return t=t||{},F8(this.renderToVNode({animation:Tz(t.cssAnimation,!0),emphasis:Tz(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Tz(t.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(t,e,i){for(var n,r,o=t.length,a=[],s=0,l=0,h=0;h<o;h++){var u=t[h];if(!u.invisible){var c=u.__clipPaths,d=c&&c.length||0,p=r&&r.length||0,f=void 0;for(f=Math.max(d-1,p-1);f>=0&&(!c||!r||c[f]!==r[f]);f--);for(var g=p-1;g>f;g--)n=a[--s-1];for(var m=f+1;m<d;m++){var y={};!function(t,e,i){var n=i.clipPathCache,r=i.defs,o=n[t.id];if(!o){var a={id:o=i.zrId+"-c"+i.clipPathIdx++};n[t.id]=o,r[o]=F6("clipPath",o,a,[Wy(t,i)])}e["clip-path"]=EX(o)}(c[m],y,e);var w=F6("g","clip-g-"+l++,y,[]);(n?n.children:i).push(w),a[s++]=w,n=w}r=c;var b=Wv(u,e);b&&(n?n.children:i).push(b)}}},t.prototype.resize=function(t,e){var i=this._opts,n=this.root,r=this._viewport;if(null!=t&&(i.width=t),null!=e&&(i.height=e),n&&r&&(r.style.display="none",t=BX(n,0,i),e=BX(n,1,i),r.style.display=""),this._width!==t||this._height!==e){if(this._width=t,this._height=e,r){var o=r.style;o.width=t+"px",o.height=e+"px"}if(Ej(this._backgroundColor))this.refresh();else{var a=this._svgDom;a&&(a.setAttribute("width",t),a.setAttribute("height",e));var s=this._bgVNode&&this._bgVNode.elm;s&&(s.setAttribute("width",t),s.setAttribute("height",e))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(t){var e=this.renderToString(),i="data:image/svg+xml;";return t?(e=Eq(e))&&i+"base64,"+e:i+"charset=UTF-8,"+encodeURIComponent(e)},t}();function WV(t){return function(){}}var WB=kg(),WF={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},WW=function(){function t(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&!this._dimNameMap&&(this._dimNameMap=WU(this.source))},t.prototype.getSourceDimensionIndex=function(t){return Tz(this._dimNameMap.get(t),-1)},t.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},t.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=HB(this.source),i=!(t>30),n="",r=[],o=0,a=0;o<t;o++){var s=void 0,l=void 0,h=void 0,u=this.dimensions[a];if(u&&u.storeDimIndex===o)s=e?u.name:null,l=u.type,h=u.ordinalMeta,a++;else{var c=this.getSourceDimension(o);c&&(s=e?c.name:null,l=c.type)}r.push({property:s,type:l,ordinalMeta:h}),!e||null==s||u&&u.isCalculationCoord||(n+=i?s.replace(/\`/g,"`1").replace(/\$/g,"`2"):s),n+="$"+(WF[l]||"f"),h&&(n+=h.uid),n+="$"}var d=this.source;return{dimensions:r,hash:[d.seriesLayoutBy,d.startIndex,n].join("$$")}},t.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,i=0;e<this._fullDimCount;e++){var n=void 0,r=this.dimensions[i];if(r&&r.storeDimIndex===e)r.isCalculationCoord||(n=r.name),i++;else{var o=this.getSourceDimension(e);o&&(n=o.name)}t.push(n)}return t},t.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function Wz(t){return t instanceof WW}function Wj(t){for(var e=TQ(),i=0;i<(t||[]).length;i++){var n=t[i],r=TN(n)?n.name:n;null!=r&&null==e.get(r)&&e.set(r,i)}return e}function WU(t){var e=WB(t);return e.dimNameMap||(e.dimNameMap=Wj(t.dimensionsDefine))}function WG(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function WY(t,e){return WG(t,e)?t.getCalculationInfo("stackResultDimension"):e}var WX="undefined"!=typeof Float32Array,W$=WX?Float32Array:Array;function WZ(t){return Tk(t)?WX?new Float32Array(t):t:new W$(t)}var Wq="__ec_stack_";function WK(t){return t.get("stack")||Wq+t.seriesIndex}function WQ(t){return t.dim+t.index}function WJ(t,e){var i=[];return e.eachSeriesByType(t,function(t){W3(t)&&i.push(t)}),i}function W0(t){var e=function(t){var e={};T_(t,function(t){var i=t.coordinateSystem.getBaseAxis();if("time"===i.type||"value"===i.type)for(var n=t.getData(),r=i.dim+"_"+i.index,o=n.getDimensionIndex(n.mapDimension(i.dim)),a=n.getStore(),s=0,l=a.count();s<l;++s){var h=a.get(o,s);e[r]?e[r].push(h):e[r]=[h]}});var i={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(r){r.sort(function(t,e){return t-e});for(var o=null,a=1;a<r.length;++a){var s=r[a]-r[a-1];s>0&&(o=null===o?s:Math.min(o,s))}i[n]=o}}return i}(t),i=[];return T_(t,function(t){var n,r=t.coordinateSystem.getBaseAxis(),o=r.getExtent();if("category"===r.type)n=r.getBandWidth();else if("value"===r.type||"time"===r.type){var a=e[r.dim+"_"+r.index],s=Math.abs(o[1]-o[0]),l=r.scale.getExtent(),h=Math.abs(l[1]-l[0]);n=a?s/h*a:s}else{var u=t.getData();n=Math.abs(o[1]-o[0])/u.count()}var c=AZ(t.get("barWidth"),n),d=AZ(t.get("barMaxWidth"),n),p=AZ(t.get("barMinWidth")||(W4(t)?.5:1),n),f=t.get("barGap"),g=t.get("barCategoryGap");i.push({bandWidth:n,barWidth:c,barMaxWidth:d,barMinWidth:p,barGap:f,barCategoryGap:g,axisKey:WQ(r),stackId:WK(t)})}),W1(i)}function W1(t){var e={};T_(t,function(t,i){var n=t.axisKey,r=t.bandWidth,o=e[n]||{bandWidth:r,remainedWidth:r,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},a=o.stacks;e[n]=o;var s=t.stackId;!a[s]&&o.autoWidthCount++,a[s]=a[s]||{width:0,maxWidth:0};var l=t.barWidth;l&&!a[s].width&&(a[s].width=l,l=Math.min(o.remainedWidth,l),o.remainedWidth-=l);var h=t.barMaxWidth;h&&(a[s].maxWidth=h);var u=t.barMinWidth;u&&(a[s].minWidth=u);var c=t.barGap;null!=c&&(o.gap=c);var d=t.barCategoryGap;null!=d&&(o.categoryGap=d)});var i={};return T_(e,function(t,e){i[e]={};var n,r=t.stacks,o=t.bandWidth,a=t.categoryGap;null==a&&(a=Math.max(35-4*TR(r).length,15)+"%");var s=AZ(a,o),l=AZ(t.gap,1),h=t.remainedWidth,u=t.autoWidthCount,c=(h-s)/(u+(u-1)*l);c=Math.max(c,0),T_(r,function(t){var e=t.maxWidth,i=t.minWidth;if(t.width){var n=t.width;e&&(n=Math.min(n,e)),i&&(n=Math.max(n,i)),t.width=n,h-=n+l*n,u--}else{var n=c;e&&e<n&&(n=Math.min(e,h)),i&&i>n&&(n=i),n!==c&&(t.width=n,h-=n+l*n,u--)}}),c=Math.max(c=(h-s)/(u+(u-1)*l),0);var d=0;T_(r,function(t,e){t.width||(t.width=c),n=t,d+=t.width*(1+l)}),n&&(d-=n.width*l);var p=-d/2;T_(r,function(t,n){i[e][n]=i[e][n]||{bandWidth:o,offset:p,width:t.width},p+=t.width*(1+l)})}),i}function W2(t,e){var i=WJ(t,e),n=W0(i);T_(i,function(t){var e=t.getData(),i=t.coordinateSystem.getBaseAxis(),r=WK(t),o=n[WQ(i)][r],a=o.offset,s=o.width;e.setLayout({bandWidth:o.bandWidth,offset:a,size:s})})}function W5(t){return{seriesType:t,plan:VU(),reset:function(t){if(W3(t)){var e,i=t.getData(),n=t.coordinateSystem,r=n.getBaseAxis(),o=n.getOtherAxis(r),a=i.getDimensionIndex(i.mapDimension(o.dim)),s=i.getDimensionIndex(i.mapDimension(r.dim)),l=t.get("showBackground",!0),h=i.mapDimension(o.dim),u=i.getCalculationInfo("stackResultDimension"),c=WG(i,h)&&!!i.getCalculationInfo("stackedOnSeries"),d=o.isHorizontal(),p=((e=o.model.get("startValue"))||(e=0),o.toGlobalCoord(o.dataToCoord("log"===o.type?e>0?e:1:e))),f=W4(t),g=t.get("barMinHeight")||0,m=u&&i.getDimensionIndex(u),y=i.getLayout("size"),w=i.getLayout("offset");return{progress:function(t,e){for(var i,r=t.count,o=f&&WZ(3*r),h=f&&l&&WZ(3*r),u=f&&WZ(r),b=n.master.getRect(),x=d?b.width:b.height,S=e.getStore(),C=0;null!=(i=t.next());){var _=S.get(c?m:a,i),M=S.get(s,i),T=p,I=void 0;c&&(I=+_-S.get(a,i));var R=void 0,E=void 0,A=void 0,k=void 0;if(d){var D=n.dataToPoint([_,M]);if(c){var O=n.dataToPoint([I,M]);T=O[0]}R=T,E=D[1]+w,A=D[0]-T,k=y,Math.abs(A)<g&&(A=(A<0?-1:1)*g)}else{var D=n.dataToPoint([M,_]);if(c){var O=n.dataToPoint([M,I]);T=O[1]}R=D[0]+w,E=T,A=y,Math.abs(k=D[1]-T)<g&&(k=(k<=0?-1:1)*g)}f?(o[C]=R,o[C+1]=E,o[C+2]=d?A:k,h&&(h[C]=d?b.x:R,h[C+1]=d?E:b.y,h[C+2]=x),u[i]=i):e.setItemLayout(i,{x:R,y:E,width:A,height:k}),C+=3}f&&e.setLayout({largePoints:o,largeDataIndices:u,largeBackgroundPoints:h,valueAxisHorizontal:d})}}}}}}function W3(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function W4(t){return t.pipelineContext&&t.pipelineContext.large}var W6={average:function(t){for(var e=0,i=0,n=0;n<t.length;n++)!isNaN(t[n])&&(e+=t[n],i++);return 0===i?NaN:e/i},sum:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i]||0;return e},max:function(t){for(var e=-1/0,i=0;i<t.length;i++)t[i]>e&&(e=t[i]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,i=0;i<t.length;i++)t[i]<e&&(e=t[i]);return isFinite(e)?e:NaN},minmax:function(t){for(var e=-1/0,i=-1/0,n=0;n<t.length;n++){var r=t[n],o=Math.abs(r);o>e&&(e=o,i=r)}return isFinite(i)?i:NaN},nearest:function(t){return t[0]}},W8=function(t){return Math.round(t.length/2)};function W9(t){return{seriesType:t,reset:function(t,e,i){var n=t.getData(),r=t.get("sampling"),o=t.coordinateSystem,a=n.count();if(a>10&&"cartesian2d"===o.type&&r){var s=o.getBaseAxis(),l=o.getOtherAxis(s),h=s.getExtent(),u=i.getDevicePixelRatio(),c=Math.round(a/(Math.abs(h[1]-h[0])*(u||1)));if(isFinite(c)&&c>1){"lttb"===r&&t.setData(n.lttbDownSample(n.mapDimension(l.dim),1/c));var d=void 0;TO(r)?d=W6[r]:TD(r)&&(d=r),d&&t.setData(n.downSample(n.mapDimension(l.dim),1/c,d,W8))}}}}}function W7(t){return null==t?0:t.length||1}function zt(t){return t}var ze=function(){function t(t,e,i,n,r,o){this._old=t,this._new=e,this._oldKeyGetter=i||zt,this._newKeyGetter=n||zt,this.context=r,this._diffModeMultiple="multiple"===o}return t.prototype.add=function(t){return this._add=t,this},t.prototype.update=function(t){return this._update=t,this},t.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},t.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},t.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},t.prototype.remove=function(t){return this._remove=t,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var t=this._old,e=this._new,i={},n=Array(t.length),r=Array(e.length);this._initIndexMap(t,null,n,"_oldKeyGetter"),this._initIndexMap(e,i,r,"_newKeyGetter");for(var o=0;o<t.length;o++){var a=n[o],s=i[a],l=W7(s);if(l>1){var h=s.shift();1===s.length&&(i[a]=s[0]),this._update&&this._update(h,o)}else 1===l?(i[a]=null,this._update&&this._update(s,o)):this._remove&&this._remove(o)}this._performRestAdd(r,i)},t.prototype._executeMultiple=function(){var t=this._old,e=this._new,i={},n={},r=[],o=[];this._initIndexMap(t,i,r,"_oldKeyGetter"),this._initIndexMap(e,n,o,"_newKeyGetter");for(var a=0;a<r.length;a++){var s=r[a],l=i[s],h=n[s],u=W7(l),c=W7(h);if(u>1&&1===c)this._updateManyToOne&&this._updateManyToOne(h,l),n[s]=null;else if(1===u&&c>1)this._updateOneToMany&&this._updateOneToMany(h,l),n[s]=null;else if(1===u&&1===c)this._update&&this._update(h,l),n[s]=null;else if(u>1&&c>1)this._updateManyToMany&&this._updateManyToMany(h,l),n[s]=null;else if(u>1)for(var d=0;d<u;d++)this._remove&&this._remove(l[d]);else this._remove&&this._remove(l)}this._performRestAdd(o,n)},t.prototype._performRestAdd=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=e[n],o=W7(r);if(o>1)for(var a=0;a<o;a++)this._add&&this._add(r[a]);else 1===o&&this._add&&this._add(r);e[n]=null}},t.prototype._initIndexMap=function(t,e,i,n){for(var r=this._diffModeMultiple,o=0;o<t.length;o++){var a="_ec_"+this[n](t[o],o);if(r||(i[o]=a),e){var s=e[a],l=W7(s);0===l?(e[a]=o,r&&i.push(a)):1===l?e[a]=[s,o]:s.push(o)}}},t}(),zi=function(){function t(t,e){this._encode=t,this._schema=e}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function zn(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function zr(t){return"category"===t?"ordinal":"time"===t?"time":"float"}var zo=function(t){this.otherDims={},null!=t&&Tw(this,t)},za=TN,zs="undefined"==typeof Int32Array?Array:Int32Array,zl=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],zh=["_approximateExtent"],zu=function(){function t(t,e){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i,n=!1;Wz(t)?(i=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(n=!0,i=t),i=i||["x","y"];for(var r={},o=[],a={},s=!1,l={},h=0;h<i.length;h++){var u=i[h],c=TO(u)?new zo({name:u}):u instanceof zo?u:new zo(u),d=c.name;c.type=c.type||"float",c.coordDim||(c.coordDim=d,c.coordDimIndex=0);var p=c.otherDims=c.otherDims||{};o.push(d),r[d]=c,null!=l[d]&&(s=!0),c.createInvertedIndices&&(a[d]=[]),0===p.itemName&&(this._nameDimIdx=h),0===p.itemId&&(this._idDimIdx=h),n&&(c.storeDimIndex=h)}if(this.dimensions=o,this._dimInfos=r,this._initGetDimensionInfo(s),this.hostModel=e,this._invertedIndicesMap=a,this._dimOmitted){var f=this._dimIdxToName=TQ();T_(o,function(t){f.set(r[t].storeDimIndex,t)})}}return t.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(null==e)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var i=this._dimIdxToName.get(e);if(null!=i)return i;var n=this._schema.getSourceDimension(e);if(n)return n.name},t.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(null!=e)return e;if(null==t)return -1;var i=this._getDimInfo(t);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},t.prototype._recognizeDimIndex=function(t){if(TL(t)||null!=t&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||0>this._schema.getSourceDimensionIndex(t)))return+t},t.prototype._getStoreDimIndex=function(t){return this.getDimensionIndex(t)},t.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},t.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(t){return e.hasOwnProperty(t)?e[t]:void 0}:function(t){return e[t]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(t,e){var i=this._dimSummary;if(null==e)return i.encodeFirstDimNotExtra[t];var n=i.encode[t];return n?n[e]:null},t.prototype.mapDimensionsAll=function(t){return(this._dimSummary.encode[t]||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(t,e,i){var n,r,o,a,s,l,h,u,c,d,p,f,g,m=this;if(t instanceof Vp&&(g=t),!g){var y=this.dimensions,w=HO(t)||TC(t)?new HF(t,y.length):t;g=new Vp;var b=TM(y,function(t){return{type:m._dimInfos[t].type,property:t}});g.initData(w,b,i)}this._store=g,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,g.count()),this._dimSummary=(n=this,r=this._schema,a=(o={}).encode={},s=TQ(),l=[],h=[],u={},T_(n.dimensions,function(t){var e=n.getDimensionInfo(t),i=e.coordDim;if(i){var r,o=e.coordDimIndex;zn(a,i)[o]=t,e.isExtraCoord||(s.set(i,1),"ordinal"===(r=e.type)||"time"===r||(l[0]=t),zn(u,i)[o]=n.getDimensionIndex(e.name)),e.defaultTooltip&&h.push(t)}NG.each(function(t,i){var n=zn(a,i),r=e.otherDims[i];null!=r&&!1!==r&&(n[r]=e.name)})}),c=[],d={},s.each(function(t,e){var i=a[e];d[e]=i[0],c=c.concat(i)}),o.dataDimsOnCoord=c,o.dataDimIndicesOnCoord=TM(c,function(t){return n.getDimensionInfo(t).storeDimIndex}),o.encodeFirstDimNotExtra=d,(p=a.label)&&p.length&&(l=p.slice()),(f=a.tooltip)&&f.length?h=f.slice():h.length||(h=l.slice()),a.defaultedLabel=l,a.defaultedTooltip=h,o.userOutput=new zi(u,r),o),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},t.prototype.appendValues=function(t,e){var i=this._store.appendValues(t,e.length),n=i.start,r=i.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var a=n;a<r;a++){var s=a-n;this._nameList[a]=e[s],o&&tJ(this,a)}},t.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,i=0;i<e.length;i++){var n=this._dimInfos[e[i]];n.ordinalMeta&&t.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return null==this._idDimIdx&&t.getSource().sourceFormat!==Nq&&!t.fillStorage},t.prototype._doInit=function(t,e){if(!(t>=e)){var i=this._store.getProvider();this._updateOrdinalMeta();var n=this._nameList,r=this._idList;if(i.getSource().sourceFormat===NY&&!i.pure)for(var o=[],a=t;a<e;a++){var s,l=i.getItem(a,o);if(!(!this.hasItemOption&&TN(s=l))||s instanceof Array||(this.hasItemOption=!0),l){var h=l.name;null==n[a]&&null!=h&&(n[a]=kc(h,null));var u=l.id;null==r[a]&&null!=u&&(r[a]=kc(u,null))}}if(this._shouldMakeIdFromName())for(var a=t;a<e;a++)tJ(this,a);tX(this)}},t.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},t.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},t.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},t.prototype.setCalculationInfo=function(t,e){za(t)?Tw(this._calculationInfo,t):this._calculationInfo[t]=e},t.prototype.getName=function(t){var e=this.getRawIndex(t),i=this._nameList[e];return null==i&&null!=this._nameDimIdx&&(i=tZ(this,this._nameDimIdx,e)),null==i&&(i=""),i},t.prototype._getCategory=function(t,e){var i=this._store.get(t,e),n=this._store.getOrdinalMeta(t);return n?n.categories[i]:i},t.prototype.getId=function(t){return t$(this,this.getRawIndex(t))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(t,e){var i=this._store,n=this._dimInfos[t];if(n)return i.get(n.storeDimIndex,e)},t.prototype.getByRawIndex=function(t,e){var i=this._store,n=this._dimInfos[t];if(n)return i.getByRawIndex(n.storeDimIndex,e)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},t.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},t.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},t.prototype.getValues=function(t,e){var i=this,n=this._store;return Tk(t)?n.getValues(TM(t,function(t){return i._getStoreDimIndex(t)}),e):n.getValues(t)},t.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,i=0,n=e.length;i<n;i++)if(isNaN(this._store.get(e[i],t)))return!1;return!0},t.prototype.indexOfName=function(t){for(var e=0,i=this._store.count();e<i;e++)if(this.getName(e)===t)return e;return -1},t.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},t.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},t.prototype.rawIndexOf=function(t,e){var i=(t&&this._invertedIndicesMap[t])[e];return null==i||isNaN(i)?-1:i},t.prototype.indicesOfNearest=function(t,e,i){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,i)},t.prototype.each=function(t,e,i){TD(t)&&(i=e,e=t,t=[]);var n=i||this,r=TM(tq(t),this._getStoreDimIndex,this);this._store.each(r,n?TE(e,n):e)},t.prototype.filterSelf=function(t,e,i){TD(t)&&(i=e,e=t,t=[]);var n=i||this,r=TM(tq(t),this._getStoreDimIndex,this);return this._store=this._store.filter(r,n?TE(e,n):e),this},t.prototype.selectRange=function(t){var e=this,i={},n=TR(t),r=[];return T_(n,function(n){var o=e._getStoreDimIndex(n);i[o]=t[n],r.push(o)}),this._store=this._store.selectRange(i),this},t.prototype.mapArray=function(t,e,i){TD(t)&&(i=e,e=t,t=[]),i=i||this;var n=[];return this.each(t,function(){n.push(e&&e.apply(this,arguments))},i),n},t.prototype.map=function(t,e,i,n){var r=i||n||this,o=TM(tq(t),this._getStoreDimIndex,this),a=tQ(this);return a._store=this._store.map(o,r?TE(e,r):e),a},t.prototype.modify=function(t,e,i,n){var r=i||n||this,o=TM(tq(t),this._getStoreDimIndex,this);this._store.modify(o,r?TE(e,r):e)},t.prototype.downSample=function(t,e,i,n){var r=tQ(this);return r._store=this._store.downSample(this._getStoreDimIndex(t),e,i,n),r},t.prototype.lttbDownSample=function(t,e){var i=tQ(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),i},t.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},t.prototype.getItemModel=function(t){var e=this.hostModel;return new L2(this.getRawDataItem(t),e,e&&e.ecModel)},t.prototype.diff=function(t){var e=this;return new ze(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(e){return t$(t,e)},function(t){return t$(e,t)})},t.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},t.prototype.setVisual=function(t,e){this._visual=this._visual||{},za(t)?Tw(this._visual,t):this._visual[t]=e},t.prototype.getItemVisual=function(t,e){var i=this._itemVisuals[t],n=i&&i[e];return null==n?this.getVisual(e):n},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(t,e){var i=this._itemVisuals,n=i[t];n||(n=i[t]={});var r=n[e];return null==r&&(Tk(r=this.getVisual(e))?r=r.slice():za(r)&&(r=Tw({},r)),n[e]=r),r},t.prototype.setItemVisual=function(t,e,i){var n=this._itemVisuals[t]||{};this._itemVisuals[t]=n,za(e)?Tw(n,e):n[e]=i},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(t,e){za(t)?Tw(this._layout,t):this._layout[t]=e},t.prototype.getLayout=function(t){return this._layout[t]},t.prototype.getItemLayout=function(t){return this._itemLayouts[t]},t.prototype.setItemLayout=function(t,e,i){this._itemLayouts[t]=i?Tw(this._itemLayouts[t]||{},e):e},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(t,e){Or(this.hostModel&&this.hostModel.seriesIndex,this.dataType,t,e),this._graphicEls[t]=e},t.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},t.prototype.eachItemGraphicEl=function(t,e){T_(this._graphicEls,function(i,n){i&&t&&t.call(e,i,n)})},t.prototype.cloneShallow=function(e){return e||(e=new t(this._schema?this._schema:TM(this.dimensions,this._getDimInfo,this),this.hostModel)),tK(e,this),e._store=this._store,e},t.prototype.wrapMethod=function(t,e){var i=this[t];TD(i)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=i.apply(this,arguments);return e.apply(this,[t].concat(TU(arguments)))})},t.internalField=void(tX=function(t){var e=t._invertedIndicesMap;T_(e,function(i,n){var r=t._dimInfos[n],o=r.ordinalMeta,a=t._store;if(o){i=e[n]=new zs(o.categories.length);for(var s=0;s<i.length;s++)i[s]=-1;for(var s=0;s<a.count();s++)i[a.get(r.storeDimIndex,s)]=s}})},tZ=function(t,e,i){return kc(t._getCategory(e,i),null)},t$=function(t,e){var i=t._idList[e];return null==i&&null!=t._idDimIdx&&(i=tZ(t,t._idDimIdx,e)),null==i&&(i="e\0\0"+e),i},tq=function(t){return Tk(t)||(t=null!=t?[t]:[]),t},tQ=function(e){var i=new t(e._schema?e._schema:TM(e.dimensions,e._getDimInfo,e),e.hostModel);return tK(i,e),i},tK=function(t,e){T_(zl.concat(e.__wrappedMethods||[]),function(i){e.hasOwnProperty(i)&&(t[i]=e[i])}),t.__wrappedMethods=e.__wrappedMethods,T_(zh,function(i){t[i]=Tm(e[i])}),t._calculationInfo=Tw({},e._calculationInfo)},tJ=function(t,e){var i=t._nameList,n=t._idList,r=t._nameDimIdx,o=t._idDimIdx,a=i[e],s=n[e];if(null==a&&null!=r&&(i[e]=a=tZ(t,r,e)),null==s&&null!=o&&(n[e]=s=tZ(t,o,e)),null==s&&null!=a){var l=t._nameRepeatCount,h=l[a]=(l[a]||0)+1;s=a,h>1&&(s+="__ec__"+h),n[e]=s}}),t}();function zc(t,e){HO(t)||(t=HL(t));var i,n,r,o=(e=e||{}).coordDimensions||[],a=e.dimensionsDefine||t.dimensionsDefine||[],s=TQ(),l=[],h=(i=t,n=e.dimensionsCount,r=Math.max(i.dimensionsDetectedCount||1,o.length,a.length,n||0),T_(o,function(t){var e;TN(t)&&(e=t.dimsDef)&&(r=Math.max(r,e.length))}),r),u=e.canOmitUnusedDimensions&&h>30,c=a===t.dimensionsDefine,d=c?WU(t):Wj(a),p=e.encodeDefine;!p&&e.encodeDefaulter&&(p=e.encodeDefaulter(t,h));for(var f=TQ(p),g=new Vs(h),m=0;m<g.length;m++)g[m]=-1;function y(t){var e=g[t];if(e<0){var i=a[t],n=TN(i)?i:{name:i},r=new zo,o=n.name;null!=o&&null!=d.get(o)&&(r.name=r.displayName=o),null!=n.type&&(r.type=n.type),null!=n.displayName&&(r.displayName=n.displayName);var s=l.length;return g[t]=s,r.storeDimIndex=t,l.push(r),r}return l[e]}if(!u)for(var m=0;m<h;m++)y(m);f.each(function(t,e){var i=kr(t).slice();if(1===i.length&&!TO(i[0])&&i[0]<0){f.set(e,!1);return}var n=f.set(e,[]);T_(i,function(t,i){var r=TO(t)?d.get(t):t;null!=r&&r<h&&(n[i]=r,b(y(r),e,i))})});var w=0;function b(t,e,i){null!=NG.get(e)?t.otherDims[e]=i:(t.coordDim=e,t.coordDimIndex=i,s.set(e,!0))}T_(o,function(t){if(TO(t))e=t,r={};else{e=(r=t).name;var e,i,n,r,o=r.ordinalMeta;r.ordinalMeta=null,(r=Tw({},r)).ordinalMeta=o,i=r.dimsDef,n=r.otherDims,r.name=r.coordDim=r.coordDimIndex=r.dimsDef=r.otherDims=null}var a=f.get(e);if(!1!==a){if(!(a=kr(a)).length)for(var s=0;s<(i&&i.length||1);s++){for(;w<h&&null!=y(w).coordDim;)w++;w<h&&a.push(w++)}T_(a,function(t,o){var a=y(t);if(c&&null!=r.type&&(a.type=r.type),b(Tb(a,r),e,o),null==a.name&&i){var s=i[o];TN(s)||(s={name:s}),a.name=a.displayName=s.name,a.defaultTooltip=s.defaultTooltip}n&&Tb(a.otherDims,n)})}});var x=e.generateCoord,S=e.generateCoordCount,C=null!=S;S=x?S||1:0;var _=x||"value";function M(t){null==t.name&&(t.name=t.coordDim)}if(u)T_(l,function(t){M(t)}),l.sort(function(t,e){return t.storeDimIndex-e.storeDimIndex});else for(var T=0;T<h;T++){var I=y(T);null==I.coordDim&&(I.coordDim=function(t,e,i){if(i||e.hasKey(t)){for(var n=0;e.hasKey(t+n);)n++;t+=n}return e.set(t,!0),t}(_,s,C),I.coordDimIndex=0,(!x||S<=0)&&(I.isExtraCoord=!0),S--),M(I),null==I.type&&(N3(t,T)===NJ.Must||I.isExtraCoord&&(null!=I.otherDims.itemName||null!=I.otherDims.seriesName))&&(I.type="ordinal")}return function(t){for(var e=TQ(),i=0;i<t.length;i++){var n=t[i],r=n.name,o=e.get(r)||0;o>0&&(n.name=r+(o-1)),o++,e.set(r,o)}}(l),new WW({source:t,dimensions:l,fullDimensionCount:h,dimensionOmitted:u})}var zd=function(t){this.coordSysDims=[],this.axisMap=TQ(),this.categoryAxisMap=TQ(),this.coordSysName=t},zp={cartesian2d:function(t,e,i,n){var r=t.getReferringComponents("xAxis",kw).models[0],o=t.getReferringComponents("yAxis",kw).models[0];e.coordSysDims=["x","y"],i.set("x",r),i.set("y",o),zf(r)&&(n.set("x",r),e.firstCategoryDimIndex=0),zf(o)&&(n.set("y",o),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,i,n){var r=t.getReferringComponents("singleAxis",kw).models[0];e.coordSysDims=["single"],i.set("single",r),zf(r)&&(n.set("single",r),e.firstCategoryDimIndex=0)},polar:function(t,e,i,n){var r=t.getReferringComponents("polar",kw).models[0],o=r.findAxisModel("radiusAxis"),a=r.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],i.set("radius",o),i.set("angle",a),zf(o)&&(n.set("radius",o),e.firstCategoryDimIndex=0),zf(a)&&(n.set("angle",a),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,i,n){e.coordSysDims=["lng","lat"]},parallel:function(t,e,i,n){var r=t.ecModel,o=r.getComponent("parallel",t.get("parallelIndex")),a=e.coordSysDims=o.dimensions.slice();T_(o.parallelAxisIndex,function(t,o){var s=r.getComponent("parallelAxis",t),l=a[o];i.set(l,s),zf(s)&&(n.set(l,s),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=o))})}};function zf(t){return"category"===t.get("type")}var zg=function(t,e,i){i=i||{};var n,r,o,a,s,l,h,u,c=e.getSourceManager(),d=!1;t?(d=!0,u=HL(t)):d=(u=c.getSource()).sourceFormat===NY;var p=function(t){var e=t.get("coordinateSystem"),i=new zd(e),n=zp[e];if(n)return n(t,i,i.axisMap,i.categoryAxisMap),i}(e),f=(r=e.get("coordinateSystem"),o=Hc.get(r),p&&p.coordSysDims&&(n=TM(p.coordSysDims,function(t){var e={name:t},i=p.axisMap.get(t);if(i){var n=i.get("type");e.type=zr(n)}return e})),n||(n=o&&(o.getDimensionsInfo?o.getDimensionsInfo():o.dimensions.slice())||["x","y"]),n),g=i.useEncodeDefaulter,m=TD(g)?g:g?TA(N1,f,e):null,y=zc(u,{coordDimensions:f,generateCoord:i.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:m,canOmitUnusedDimensions:!d}),w=(a=y.dimensions,s=i.createInvertedIndices,p&&T_(a,function(t,e){var i=t.coordDim,n=p.categoryAxisMap.get(i);n&&(null==l&&(l=e),t.ordinalMeta=n.getOrdinalMeta(),s&&(t.createInvertedIndices=!0)),null!=t.otherDims.itemName&&(h=!0)}),h||null==l||(a[l].otherDims.itemName=0),l),b=d?null:c.getSharedDataStore(y),x=function(t,e,i){var n,r,o,a,s,l,h,u=(i=i||{}).byIndex,c=i.stackedCoordDimension;Wz(e.schema)?(n=(r=e.schema).dimensions,o=e.store):n=e;var d=!!(t&&t.get("stack"));if(T_(n,function(t,e){TO(t)&&(n[e]=t={name:t}),!d||t.isExtraCoord||(u||a||!t.ordinalMeta||(a=t),s||"ordinal"===t.type||"time"===t.type||c&&c!==t.coordDim||(s=t))}),!s||u||a||(u=!0),s){l="__\0ecstackresult_"+t.id,h="__\0ecstackedover_"+t.id,a&&(a.createInvertedIndices=!0);var p=s.coordDim,f=s.type,g=0;T_(n,function(t){t.coordDim===p&&g++});var m={name:l,coordDim:p,coordDimIndex:g,type:f,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:n.length},y={name:h,coordDim:h,coordDimIndex:g+1,type:f,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:n.length+1};r?(o&&(m.storeDimIndex=o.ensureCalculationDimension(h,f),y.storeDimIndex=o.ensureCalculationDimension(l,f)),r.appendCalculationDimension(m),r.appendCalculationDimension(y)):(n.push(m),n.push(y))}return{stackedDimension:s&&s.name,stackedByDimension:a&&a.name,isStackedByIndex:u,stackedOverDimension:h,stackResultDimension:l}}(e,{schema:y,store:b}),S=new zu(y,e);S.setCalculationInfo(x);var C=null!=w&&function(t){if(t.sourceFormat===NY)return!Tk(ks(function(t){for(var e=0;e<t.length&&null==t[e];)e++;return t[e]}(t.data||[])))}(u)?function(t,e,i,n){return n===w?i:this.defaultDimValueGetter(t,e,i,n)}:null;return S.hasItemOption=!1,S.initData(d?u:b,null,C),S},zm=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.getInitialData=function(t,e){return zg(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,e,i){var n=this.coordinateSystem;if(n&&n.clampData){var r=n.clampData(t),o=n.dataToPoint(r);if(i)T_(n.getAxes(),function(t,i){if("category"===t.type&&null!=e){var n=t.getTicksCoords(),a=t.getTickModel().get("alignWithLabel"),s=r[i],l="x1"===e[i]||"y1"===e[i];if(l&&!a&&(s+=1),!(n.length<2)){if(2===n.length){o[i]=t.toGlobalCoord(t.getExtent()[l?1:0]);return}for(var h=void 0,u=void 0,c=1,d=0;d<n.length;d++){var p=n[d].coord,f=d===n.length-1?n[d-1].tickValue+c:n[d].tickValue;if(f===s){u=p;break}if(f<s)h=p;else if(null!=h&&f>s){u=(p+h)/2;break}1===d&&(c=f-n[0].tickValue)}null==u&&(h?h&&(u=n[n.length-1].coord):u=n[0].coord),o[i]=t.toGlobalCoord(u)}}});else{var a=this.getData(),s=a.getLayout("offset"),l=a.getLayout("size"),h=n.getBaseAxis().isHorizontal()?0:1;o[h]+=s+l/2}return o}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(VL);VL.registerClass(zm);var zy=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.getInitialData=function(){return zg(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t},e.prototype.brushSelector=function(t,e,i){return i.rect(e.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=L4(zm.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(zm);function zv(t,e,i,n,r){var o=t.getArea(),a=o.x,s=o.y,l=o.width,h=o.height,u=i.get(["lineStyle","width"])||2;a-=u/2,s-=u/2,l+=u,h+=u,l=Math.ceil(l),a!==Math.floor(a)&&(a=Math.floor(a),l++);var c=new DK({shape:{x:a,y:s,width:l,height:h}});if(e){var d=t.getBaseAxis(),p=d.isHorizontal(),f=d.inverse;p?(f&&(c.shape.x+=l),c.shape.width=0):(f||(c.shape.y+=h),c.shape.height=0);var g=TD(r)?function(t){r(t,c)}:null;OQ(c,{shape:{width:l,height:h,x:a,y:s}},i,null,n,g)}return c}function zw(t,e,i){var n=t.getArea(),r=Aq(n.r0,1),o=Aq(n.r,1),a=new PO({shape:{cx:Aq(t.cx,1),cy:Aq(t.cy,1),r0:r,r:o,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});return e&&("angle"===t.getBaseAxis().dim?a.shape.endAngle=n.startAngle:a.shape.r=r,OQ(a,{shape:{endAngle:n.endAngle,r:o}},i)),a}function zb(t,e,i,n,r){if(t){if("polar"===t.type)return zw(t,e,i);if("cartesian2d"===t.type)return zv(t,e,i,n,r)}return null}var zx=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},zS=function(t){function e(e){var i=t.call(this,e)||this;return i.type="sausage",i}return M6(e,t),e.prototype.getDefaultShape=function(){return new zx},e.prototype.buildPath=function(t,e){var i=e.cx,n=e.cy,r=Math.max(e.r0||0,0),o=Math.max(e.r,0),a=(o-r)*.5,s=r+a,l=e.startAngle,h=e.endAngle,u=e.clockwise,c=2*Math.PI,d=u?h-l<c:l-h<c;d||(l=h-(u?c:-c));var p=Math.cos(l),f=Math.sin(l),g=Math.cos(h),m=Math.sin(h);d?(t.moveTo(p*r+i,f*r+n),t.arc(p*s+i,f*s+n,a,-Math.PI+l,l,!u)):t.moveTo(p*o+i,f*o+n),t.arc(i,n,o,l,h,!u),t.arc(g*s+i,m*s+n,a,h-2*Math.PI,h-Math.PI,!u),0!==r&&t.arc(i,n,r,h,l,u)},e}(DB);function zC(t,e){return t.type===e}function z_(t,e){var i=t.mapDimensionsAll("defaultedLabel"),n=i.length;if(1===n){var r=H$(t,e,i[0]);return null!=r?r+"":null}if(n){for(var o=[],a=0;a<i.length;a++)o.push(H$(t,e,i[a]));return o.join(" ")}}function zM(t,e){var i=t.mapDimensionsAll("defaultedLabel");if(!Tk(e))return e+"";for(var n=[],r=0;r<i.length;r++){var o=t.getDimensionIndex(i[r]);o>=0&&n.push(e[o])}return n.join(" ")}function zT(t,e,i){return e*Math.sin(t)*(i?-1:1)}function zI(t,e,i){return e*Math.cos(t)*(i?1:-1)}function zR(t,e,i){var n=t.get("borderRadius");if(null==n)return i?{cornerRadius:0}:null;Tk(n)||(n=[n,n,n,n]);var r=Math.abs(e.r||0-e.r0||0);return{cornerRadius:TM(n,function(t){return AO(t,r)})}}var zE=Math.max,zA=Math.min,zk=function(t){function e(){var i=t.call(this)||this;return i.type=e.type,i._isFirstFrame=!0,i}return M6(e,t),e.prototype.render=function(t,e,i,n){this._model=t,this._removeOnRenderedListener(i),this._updateDrawMode(t);var r=t.get("coordinateSystem");("cartesian2d"===r||"polar"===r)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,e,i):this._renderNormal(t,e,i,n))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,e){this._progressiveEls=[],this._incrementalRenderLarge(t,e)},e.prototype.eachRendered=function(t){LA(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e!==this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},e.prototype._renderNormal=function(t,e,i,n){var r,o=this.group,a=t.getData(),s=this._data,l=t.coordinateSystem,h=l.getBaseAxis();"cartesian2d"===l.type?r=h.isHorizontal():"polar"===l.type&&(r="angle"===h.dim);var u=t.isAnimationEnabled()?t:null,c=function(t,e){var i=t.get("realtimeSort",!0),n=e.getBaseAxis();if(i&&"category"===n.type&&"cartesian2d"===e.type)return{baseAxis:n,otherAxis:e.getOtherAxis(n)}}(t,l);c&&this._enableRealtimeSort(c,a,i);var d=t.get("clip",!0)||c,p=function(t,e){var i=t.getArea&&t.getArea();if(zC(t,"cartesian2d")){var n=t.getBaseAxis();if("category"!==n.type||!n.onBand){var r=e.getLayout("bandWidth");n.isHorizontal()?(i.x-=r,i.width+=2*r):(i.y-=r,i.height+=2*r)}}return i}(l,a);o.removeClipPath();var f=t.get("roundCap",!0),g=t.get("showBackground",!0),m=t.getModel("backgroundStyle"),y=m.get("borderRadius")||0,w=[],b=this._backgroundEls,x=n&&n.isInitSort,S=n&&"changeAxisOrder"===n.type;function C(t){var e,i=zB[l.type](a,t),n=(e=r,new("polar"===l.type?PO:DK)({shape:zY(e,i,l),silent:!0,z2:0}));return n.useStyle(m.getItemStyle()),"cartesian2d"===l.type?n.setShape("r",y):n.setShape("cornerRadius",y),w[t]=n,n}a.diff(s).add(function(e){var i=a.getItemModel(e),n=zB[l.type](a,e,i);if(g&&C(e),a.hasValue(e)&&zV[l.type](n)){var s=!1;d&&(s=zD[l.type](p,n));var m=zO[l.type](t,a,e,n,r,u,h.model,!1,f);c&&(m.forceLabelAnimation=!0),zW(m,a,e,i,n,t,r,"polar"===l.type),x?m.attr({shape:n}):c?zP(c,u,m,n,e,r,!1,!1):OQ(m,{shape:n},t,e),a.setItemGraphicEl(e,m),o.add(m),m.ignore=s}}).update(function(e,i){var n=a.getItemModel(e),_=zB[l.type](a,e,n);if(g){var M=void 0;0===b.length?M=C(i):((M=b[i]).useStyle(m.getItemStyle()),"cartesian2d"===l.type?M.setShape("r",y):M.setShape("cornerRadius",y),w[e]=M);var T=zB[l.type](a,e);OK(M,{shape:zY(r,T,l)},u,e)}var I=s.getItemGraphicEl(i);if(!a.hasValue(e)||!zV[l.type](_)){o.remove(I);return}var R=!1;if(d&&(R=zD[l.type](p,_))&&o.remove(I),I?O5(I):I=zO[l.type](t,a,e,_,r,u,h.model,!!I,f),c&&(I.forceLabelAnimation=!0),S){var E=I.getTextContent();if(E){var A=Lj(E);null!=A.prevValue&&(A.prevValue=A.value)}}else zW(I,a,e,n,_,t,r,"polar"===l.type);x?I.attr({shape:_}):c?zP(c,u,I,_,e,r,!0,S):OK(I,{shape:_},t,e,null),a.setItemGraphicEl(e,I),I.ignore=R,o.add(I)}).remove(function(e){var i=s.getItemGraphicEl(e);i&&O2(i,t,e)}).execute();var _=this._backgroundGroup||(this._backgroundGroup=new Aj);_.removeAll();for(var M=0;M<w.length;++M)_.add(w[M]);o.add(_),this._backgroundEls=w,this._data=a},e.prototype._renderLarge=function(t,e,i){this._clear(),zU(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,e){this._removeBackground(),zU(e,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var e=t.get("clip",!0)&&zb(t.coordinateSystem,!1,t),i=this.group;e?i.setClipPath(e):i.removeClipPath()},e.prototype._enableRealtimeSort=function(t,e,i){var n=this;if(e.count()){var r=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(e,t,i),this._isFirstFrame=!1;else{var o=function(t){var i=e.getItemGraphicEl(t),n=i&&i.shape;return n&&Math.abs(r.isHorizontal()?n.height:n.width)||0};this._onRendered=function(){n._updateSortWithinSameData(e,o,r,i)},i.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,e,i){var n=[];return t.each(t.mapDimension(e.dim),function(t,e){var r=i(e);r=null==r?NaN:r,n.push({dataIndex:e,mappedValue:r,ordinalNumber:t})}),n.sort(function(t,e){return e.mappedValue-t.mappedValue}),{ordinalNumbers:TM(n,function(t){return t.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,e,i){for(var n=i.scale,r=t.mapDimension(i.dim),o=Number.MAX_VALUE,a=0,s=n.getOrdinalMeta().categories.length;a<s;++a){var l=t.rawIndexOf(r,n.getRawOrdinalNumber(a)),h=l<0?Number.MIN_VALUE:e(t.indexOfRawIndex(l));if(h>o)return!0;o=h}return!1},e.prototype._isOrderDifferentInView=function(t,e){for(var i=e.scale,n=i.getExtent(),r=Math.max(0,n[0]),o=Math.min(n[1],i.getOrdinalMeta().categories.length-1);r<=o;++r)if(t.ordinalNumbers[r]!==i.getRawOrdinalNumber(r))return!0},e.prototype._updateSortWithinSameData=function(t,e,i,n){if(this._isOrderChangedWithinSameData(t,e,i)){var r=this._dataSort(t,i,e);this._isOrderDifferentInView(r,i)&&(this._removeOnRenderedListener(n),n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:r}))}},e.prototype._dispatchInitSort=function(t,e,i){var n=e.baseAxis,r=this._dataSort(t,n,function(i){return t.get(t.mapDimension(e.otherAxis.dim),i)});i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",isInitSort:!0,axisId:n.index,sortInfo:r})},e.prototype.remove=function(t,e){this._clear(this._model),this._removeOnRenderedListener(e)},e.prototype.dispose=function(t,e){this._removeOnRenderedListener(e)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var e=this.group,i=this._data;t&&t.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(e){O2(e,t,On(e).dataIndex)})):e.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(VX),zD={cartesian2d:function(t,e){var i=e.width<0?-1:1,n=e.height<0?-1:1;i<0&&(e.x+=e.width,e.width=-e.width),n<0&&(e.y+=e.height,e.height=-e.height);var r=t.x+t.width,o=t.y+t.height,a=zE(e.x,t.x),s=zA(e.x+e.width,r),l=zE(e.y,t.y),h=zA(e.y+e.height,o),u=s<a,c=h<l;return e.x=u&&a>r?s:a,e.y=c&&l>o?h:l,e.width=u?0:s-a,e.height=c?0:h-l,i<0&&(e.x+=e.width,e.width=-e.width),n<0&&(e.y+=e.height,e.height=-e.height),u||c},polar:function(t,e){var i=e.r0<=e.r?1:-1;if(i<0){var n=e.r;e.r=e.r0,e.r0=n}var r=zA(e.r,t.r),o=zE(e.r0,t.r0);e.r=r,e.r0=o;var a=r-o<0;if(i<0){var n=e.r;e.r=e.r0,e.r0=n}return a}},zO={cartesian2d:function(t,e,i,n,r,o,a,s,l){var h=new DK({shape:Tw({},n),z2:1});return h.__dataIndex=i,h.name="item",o&&(h.shape[r?"height":"width"]=0),h},polar:function(t,e,i,n,r,o,a,s,l){var h,u=!r&&l?zS:PO,c=new u({shape:n,z2:1});c.name="item";var d=zF(r);if(c.calculateTextPosition=(h=u===zS,function(t,e,i){var n=e.position;if(!n||n instanceof Array)return AP(t,e,i);var r=d(n),o=null!=e.distance?e.distance:5,a=this.shape,s=a.cx,l=a.cy,u=a.r,c=a.r0,p=(u+c)/2,f=a.startAngle,g=a.endAngle,m=(f+g)/2,y=h?Math.abs(u-c)/2:0,w=Math.cos,b=Math.sin,x=s+u*w(f),S=l+u*b(f),C="left",_="top";switch(r){case"startArc":x=s+(c-o)*w(m),S=l+(c-o)*b(m),C="center",_="top";break;case"insideStartArc":x=s+(c+o)*w(m),S=l+(c+o)*b(m),C="center",_="bottom";break;case"startAngle":x=s+p*w(f)+zT(f,o+y,!1),S=l+p*b(f)+zI(f,o+y,!1),C="right",_="middle";break;case"insideStartAngle":x=s+p*w(f)+zT(f,-o+y,!1),S=l+p*b(f)+zI(f,-o+y,!1),C="left",_="middle";break;case"middle":x=s+p*w(m),S=l+p*b(m),C="center",_="middle";break;case"endArc":x=s+(u+o)*w(m),S=l+(u+o)*b(m),C="center",_="bottom";break;case"insideEndArc":x=s+(u-o)*w(m),S=l+(u-o)*b(m),C="center",_="top";break;case"endAngle":x=s+p*w(g)+zT(g,o+y,!0),S=l+p*b(g)+zI(g,o+y,!0),C="left",_="middle";break;case"insideEndAngle":x=s+p*w(g)+zT(g,-o+y,!0),S=l+p*b(g)+zI(g,-o+y,!0),C="right",_="middle";break;default:return AP(t,e,i)}return(t=t||{}).x=x,t.y=S,t.align=C,t.verticalAlign=_,t}),o){var p=c.shape,f=r?"r":"endAngle",g={};p[f]=r?n.r0:n.startAngle,g[f]=n[f],(s?OK:OQ)(c,{shape:g},o)}return c}};function zP(t,e,i,n,r,o,a,s){var l,h;o?(h={x:n.x,width:n.width},l={y:n.y,height:n.height}):(h={y:n.y,height:n.height},l={x:n.x,width:n.width}),s||(a?OK:OQ)(i,{shape:l},e,r,null),(a?OK:OQ)(i,{shape:h},e?t.baseAxis.model:null,r)}function zL(t,e){for(var i=0;i<e.length;i++)if(!isFinite(t[e[i]]))return!0;return!1}var zN=["x","y","width","height"],zH=["cx","cy","r","startAngle","endAngle"],zV={cartesian2d:function(t){return!zL(t,zN)},polar:function(t){return!zL(t,zH)}},zB={cartesian2d:function(t,e,i){var n,r=t.getItemLayout(e),o=i&&(n=i.get(["itemStyle","borderColor"]))&&"none"!==n?Math.min(i.get(["itemStyle","borderWidth"])||0,isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height)):0,a=r.width>0?1:-1,s=r.height>0?1:-1;return{x:r.x+a*o/2,y:r.y+s*o/2,width:r.width-a*o,height:r.height-s*o}},polar:function(t,e,i){var n=t.getItemLayout(e);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function zF(t){var e;return e=t?"Arc":"Angle",function(t){switch(t){case"start":case"insideStart":case"end":case"insideEnd":return t+e;default:return t}}}function zW(t,e,i,n,r,o,a,s){var l=e.getItemVisual(i,"style");if(s){if(!o.get("roundCap")){var h=t.shape,u=zR(n.getModel("itemStyle"),h,!0);Tw(h,u),t.setShape(h)}}else{var c=n.get(["itemStyle","borderRadius"])||0;t.setShape("r",c)}t.useStyle(l);var d=n.getShallow("cursor");d&&t.attr("cursor",d);var p=s?a?r.r>=r.r0?"endArc":"startArc":r.endAngle>=r.startAngle?"endAngle":"startAngle":a?r.height>=0?"bottom":"top":r.width>=0?"right":"left",f=LL(n);LP(t,f,{labelFetcher:o,labelDataIndex:i,defaultText:z_(o.getData(),i),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:p});var g=t.getTextContent();if(s&&g){var m=n.get(["label","position"]);t.textConfig.inside="middle"===m||null,function(t,e,i,n){if(TL(n)){t.setTextConfig({rotation:n});return}if(Tk(e)){t.setTextConfig({rotation:0});return}var r,o=t.shape,a=o.clockwise?o.startAngle:o.endAngle,s=o.clockwise?o.endAngle:o.startAngle,l=i(e);switch(l){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":r=(a+s)/2;break;case"startAngle":case"insideStartAngle":r=a;break;case"endAngle":case"insideEndAngle":r=s;break;default:t.setTextConfig({rotation:0});return}var h=1.5*Math.PI-r;"middle"===l&&h>Math.PI/2&&h<1.5*Math.PI&&(h-=Math.PI),t.setTextConfig({rotation:h})}(t,"outside"===m?p:m,zF(a),n.get(["label","rotate"]))}LU(g,f,o.getRawValue(i),function(t){return zM(e,t)});var y=n.getModel(["emphasis"]);OB(t,y.get("focus"),y.get("blurScope"),y.get("disabled")),Oj(t,n),null!=r.startAngle&&null!=r.endAngle&&r.startAngle===r.endAngle&&(t.style.fill="none",t.style.stroke="none",T_(t.states,function(t){t.style&&(t.style.fill=t.style.stroke="none")}))}var zz=function(){},zj=function(t){function e(e){var i=t.call(this,e)||this;return i.type="largeBar",i}return M6(e,t),e.prototype.getDefaultShape=function(){return new zz},e.prototype.buildPath=function(t,e){for(var i=e.points,n=this.baseDimIdx,r=1-this.baseDimIdx,o=[],a=[],s=this.barWidth,l=0;l<i.length;l+=3)a[n]=s,a[r]=i[l+2],o[n]=i[l+n],o[r]=i[l+r],t.rect(o[0],o[1],a[0],a[1])},e}(DB);function zU(t,e,i,n){var r=t.getData(),o=r.getLayout("valueAxisHorizontal")?1:0,a=r.getLayout("largeDataIndices"),s=r.getLayout("size"),l=t.getModel("backgroundStyle"),h=r.getLayout("largeBackgroundPoints");if(h){var u=new zj({shape:{points:h},incremental:!!n,silent:!0,z2:0});u.baseDimIdx=o,u.largeDataIndices=a,u.barWidth=s,u.useStyle(l.getItemStyle()),e.add(u),i&&i.push(u)}var c=new zj({shape:{points:r.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});c.baseDimIdx=o,c.largeDataIndices=a,c.barWidth=s,e.add(c),c.useStyle(r.getVisual("style")),On(c).seriesIndex=t.seriesIndex,t.get("silent")||(c.on("mousedown",zG),c.on("mousemove",zG)),i&&i.push(c)}var zG=V2(function(t){var e=function(t,e,i){for(var n=t.baseDimIdx,r=1-n,o=t.shape.points,a=t.largeDataIndices,s=[],l=[],h=t.barWidth,u=0,c=o.length/3;u<c;u++){var d=3*u;if(l[n]=h,l[r]=o[d+2],s[n]=o[d+n],s[r]=o[d+r],l[r]<0&&(s[r]+=l[r],l[r]=-l[r]),e>=s[0]&&e<=s[0]+l[0]&&i>=s[1]&&i<=s[1]+l[1])return a[u]}return -1}(this,t.offsetX,t.offsetY);On(this).dataIndex=e>=0?e:null},30,!1);function zY(t,e,i){if(zC(i,"cartesian2d")){var n=i.getArea();return{x:t?e.x:n.x,y:t?n.y:e.y,width:t?e.width:n.width,height:t?n.height:e.height}}var n=i.getArea();return{cx:n.cx,cy:n.cy,r0:t?n.r0:e.r0,r:t?n.r:e.r,startAngle:t?e.startAngle:0,endAngle:t?e.endAngle:2*Math.PI}}function zX(t,e,i){e=Tk(e)&&{coordDimensions:e}||Tw({encodeDefine:t.getEncode()},e);var n=t.getSource(),r=new zu(zc(n,e).dimensions,t);return r.initData(n,i),r}var z$=function(){function t(){}return t.prototype.getInitialData=function(t,e){var i,n,r=e.getComponent("xAxis",this.get("xAxisIndex")),o=e.getComponent("yAxis",this.get("yAxisIndex")),a=r.get("type"),s=o.get("type");"category"===a?(t.layout="horizontal",i=r.getOrdinalMeta(),n=!0):"category"===s?(t.layout="vertical",i=o.getOrdinalMeta(),n=!0):t.layout=t.layout||"horizontal";var l=["x","y"],h="horizontal"===t.layout?0:1,u=this._baseAxisDim=l[h],c=l[1-h],d=[r,o],p=d[h].get("type"),f=d[1-h].get("type"),g=t.data;if(g&&n){var m=[];T_(g,function(t,e){var i;Tk(t)?(i=t.slice(),t.unshift(e)):Tk(t.value)?((i=Tw({},t)).value=i.value.slice(),t.value.unshift(e)):i=t,m.push(i)}),t.data=m}var y=this.defaultValueDimensions,w=[{name:u,type:zr(p),ordinalMeta:i,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:c,type:zr(f),dimsDef:y.slice()}];return zX(this,{coordDimensions:w,dimensionsCount:y.length+1,encodeDefaulter:TA(N1,w,this)})},t.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},t}(),zZ=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],i.visualDrawType="stroke",i}return M6(e,t),e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(VL);TS(zZ,z$,!0);var zq=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i){var n=t.getData(),r=this.group,o=this._data;this._data||r.removeAll();var a="horizontal"===t.get("layout")?1:0;n.diff(o).add(function(t){if(n.hasValue(t)){var e=zJ(n.getItemLayout(t),n,t,a,!0);n.setItemGraphicEl(t,e),r.add(e)}}).update(function(t,e){var i=o.getItemGraphicEl(e);if(!n.hasValue(t)){r.remove(i);return}var s=n.getItemLayout(t);i?(O5(i),z0(s,i,n,t)):i=zJ(s,n,t,a),r.add(i),n.setItemGraphicEl(t,i)}).remove(function(t){var e=o.getItemGraphicEl(t);e&&r.remove(e)}).execute(),this._data=n},e.prototype.remove=function(t){var e=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(t){t&&e.remove(t)})},e.type="boxplot",e}(VX),zK=function(){},zQ=function(t){function e(e){var i=t.call(this,e)||this;return i.type="boxplotBoxPath",i}return M6(e,t),e.prototype.getDefaultShape=function(){return new zK},e.prototype.buildPath=function(t,e){var i=e.points,n=0;for(t.moveTo(i[n][0],i[n][1]),n++;n<4;n++)t.lineTo(i[n][0],i[n][1]);for(t.closePath();n<i.length;n++)t.moveTo(i[n][0],i[n][1]),n++,t.lineTo(i[n][0],i[n][1])},e}(DB);function zJ(t,e,i,n,r){var o=t.ends,a=new zQ({shape:{points:r?TM(o,function(e){return(e=e.slice())[n]=t.initBaseline,e}):o}});return z0(t,a,e,i,r),a}function z0(t,e,i,n,r){var o=i.hostModel;(0,O3[r?"initProps":"updateProps"])(e,{shape:{points:t.ends}},o,n),e.useStyle(i.getItemVisual(n,"style")),e.style.strokeNoScale=!0,e.z2=100;var a=i.getItemModel(n),s=a.getModel("emphasis");Oj(e,a),OB(e,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function z1(t){var e,i;T_((e=[],i=[],t.eachSeriesByType("boxplot",function(t){var n=t.getBaseAxis(),r=Tx(i,n);r<0&&(r=i.length,i[r]=n,e[r]={axis:n,seriesModels:[]}),e[r].seriesModels.push(t)}),e),function(t){var e=t.seriesModels;e.length&&(function(t){var e,i=t.axis,n=t.seriesModels,r=n.length,o=t.boxWidthList=[],a=t.boxOffsetList=[],s=[];if("category"===i.type)e=i.getBandWidth();else{var l=0;T_(n,function(t){l=Math.max(l,t.getData().count())});var h=i.getExtent();e=Math.abs(h[1]-h[0])/l}T_(n,function(t){var i=t.get("boxWidth");Tk(i)||(i=[i,i]),s.push([AZ(i[0],e)||0,AZ(i[1],e)||0])});var u=.8*e-2,c=u/r*.3,d=(u-c*(r-1))/r,p=d/2-u/2;T_(n,function(t,e){a.push(p),p+=c+d,o.push(Math.min(Math.max(d,s[e][0]),s[e][1]))})}(t),T_(e,function(e,i){(function(t,e,i){var n=t.coordinateSystem,r=t.getData(),o=i/2,a="horizontal"===t.get("layout")?0:1,s=1-a,l=["x","y"],h=r.mapDimension(l[a]),u=r.mapDimensionsAll(l[s]);if(null!=h&&!(u.length<5))for(var c=0;c<r.count();c++){var d=r.get(h,c),p=b(d,u[2],c),f=b(d,u[0],c),g=b(d,u[1],c),m=b(d,u[3],c),y=b(d,u[4],c),w=[];x(w,g,!1),x(w,m,!0),w.push(f,g,y,m),S(w,f),S(w,y),S(w,p),r.setItemLayout(c,{initBaseline:p[s],ends:w})}function b(t,i,o){var l,h=r.get(i,o),u=[];return u[a]=t,u[s]=h,isNaN(t)||isNaN(h)?l=[NaN,NaN]:(l=n.dataToPoint(u),l[a]+=e),l}function x(t,e,i){var n=e.slice(),r=e.slice();n[a]+=o,r[a]-=o,i?t.push(n,r):t.push(r,n)}function S(t,e){var i=e.slice(),n=e.slice();i[a]-=o,n[a]+=o,t.push(i,n)}})(e,t.boxOffsetList[i],t.boxWidthList[i])}))})}var z2={type:"echarts:boxplot",transform:function(t){var e=t.upstream;e.sourceFormat!==NX&&Hi("");var i=function(t,e){for(var i=[],n=[],r=(e=e||{}).boundIQR,o="none"===r||0===r,a=0;a<t.length;a++){var s=AK(t[a].slice()),l=A6(s,.25),h=A6(s,.5),u=A6(s,.75),c=s[0],d=s[s.length-1],p=(null==r?1.5:r)*(u-l),f=o?c:Math.max(c,l-p),g=o?d:Math.min(d,u+p),m=e.itemNameFormatter,y=TD(m)?m({value:a}):TO(m)?m.replace("{value}",a+""):a+"";i.push([y,f,l,h,u,g]);for(var w=0;w<s.length;w++){var b=s[w];if(b<f||b>g){var x=[y,b];n.push(x)}}}return{boxData:i,outliers:n}}(e.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:i.boxData},{data:i.outliers}]}},z5=["color","borderColor"],z3=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,e,i){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,e,i,n){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},e.prototype.eachRendered=function(t){LA(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e!==this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},e.prototype._renderNormal=function(t){var e=t.getData(),i=this._data,n=this.group,r=e.getLayout("isSimpleBox"),o=t.get("clip",!0),a=t.coordinateSystem,s=a.getArea&&a.getArea();this._data||n.removeAll(),e.diff(i).add(function(i){if(e.hasValue(i)){var a=e.getItemLayout(i);if(!(o&&z9(s,a))){var l=z8(a,i,!0);OQ(l,{shape:{points:a.ends}},t,i),z7(l,e,i,r),n.add(l),e.setItemGraphicEl(i,l)}}}).update(function(a,l){var h=i.getItemGraphicEl(l);if(!e.hasValue(a)){n.remove(h);return}var u=e.getItemLayout(a);if(o&&z9(s,u)){n.remove(h);return}h?(OK(h,{shape:{points:u.ends}},t,a),O5(h)):h=z8(u,a),z7(h,e,a,r),n.add(h),e.setItemGraphicEl(a,h)}).remove(function(t){var e=i.getItemGraphicEl(t);e&&n.remove(e)}).execute(),this._data=e},e.prototype._renderLarge=function(t){this._clear(),ji(t,this.group);var e=t.get("clip",!0)?zb(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,e){for(var i,n=e.getData(),r=n.getLayout("isSimpleBox");null!=(i=t.next());){var o=z8(n.getItemLayout(i),i);z7(o,n,i,r),o.incremental=!0,this.group.add(o),this._progressiveEls.push(o)}},e.prototype._incrementalRenderLarge=function(t,e){ji(e,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(VX),z4=function(){},z6=function(t){function e(e){var i=t.call(this,e)||this;return i.type="normalCandlestickBox",i}return M6(e,t),e.prototype.getDefaultShape=function(){return new z4},e.prototype.buildPath=function(t,e){var i=e.points;this.__simpleBox?(t.moveTo(i[4][0],i[4][1]),t.lineTo(i[6][0],i[6][1])):(t.moveTo(i[0][0],i[0][1]),t.lineTo(i[1][0],i[1][1]),t.lineTo(i[2][0],i[2][1]),t.lineTo(i[3][0],i[3][1]),t.closePath(),t.moveTo(i[4][0],i[4][1]),t.lineTo(i[5][0],i[5][1]),t.moveTo(i[6][0],i[6][1]),t.lineTo(i[7][0],i[7][1]))},e}(DB);function z8(t,e,i){var n=t.ends;return new z6({shape:{points:i?TM(n,function(e){return(e=e.slice())[1]=t.initBaseline,e}):n},z2:100})}function z9(t,e){for(var i=!0,n=0;n<e.ends.length;n++)if(t.contain(e.ends[n][0],e.ends[n][1])){i=!1;break}return i}function z7(t,e,i,n){var r=e.getItemModel(i);t.useStyle(e.getItemVisual(i,"style")),t.style.strokeNoScale=!0,t.__simpleBox=n,Oj(t,r)}var jt=function(){},je=function(t){function e(e){var i=t.call(this,e)||this;return i.type="largeCandlestickBox",i}return M6(e,t),e.prototype.getDefaultShape=function(){return new jt},e.prototype.buildPath=function(t,e){for(var i=e.points,n=0;n<i.length;)if(this.__sign===i[n++]){var r=i[n++];t.moveTo(r,i[n++]),t.lineTo(r,i[n++])}else n+=3},e}(DB);function ji(t,e,i,n){var r=t.getData(),o=r.getLayout("largePoints"),a=new je({shape:{points:o},__sign:1,ignoreCoarsePointer:!0});e.add(a);var s=new je({shape:{points:o},__sign:-1,ignoreCoarsePointer:!0});e.add(s);var l=new je({shape:{points:o},__sign:0,ignoreCoarsePointer:!0});e.add(l),jn(1,a,t,r),jn(-1,s,t,r),jn(0,l,t,r),n&&(a.incremental=!0,s.incremental=!0),i&&i.push(a,s)}function jn(t,e,i,n){var r=i.get(["itemStyle",t>0?"borderColor":"borderColor0"])||i.get(["itemStyle",t>0?"color":"color0"]);0===t&&(r=i.get(["itemStyle","borderColorDoji"]));var o=i.getModel("itemStyle").getItemStyle(z5);e.useStyle(o),e.style.fill=null,e.style.stroke=r}var jr=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],i}return M6(e,t),e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,e,i){var n=e.getItemLayout(t);return n&&i.rect(n.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(VL);function jo(t){t&&Tk(t.series)&&T_(t.series,function(t){TN(t)&&"k"===t.type&&(t.type="candlestick")})}TS(jr,z$,!0);var ja=["itemStyle","borderColor"],js=["itemStyle","borderColor0"],jl=["itemStyle","borderColorDoji"],jh=["itemStyle","color"],ju=["itemStyle","color0"],jc={seriesType:"candlestick",plan:VU(),performRawSeries:!0,reset:function(t,e){if(!e.isSeriesFiltered(t))return!t.pipelineContext.large&&{progress:function(t,e){for(var i;null!=(i=t.next());){var n=e.getItemModel(i),r=e.getItemLayout(i).sign,o=n.getItemStyle();o.fill=n.get(r>0?jh:ju),o.stroke=n.get(0===r?jl:r>0?ja:js)||o.fill,Tw(e.ensureUniqueItemVisual(i,"style"),o)}}}}},jd={seriesType:"candlestick",plan:VU(),reset:function(t){var e,i,n,r,o,a,s=t.coordinateSystem,l=t.getData(),h=(n="category"===(i=t.getBaseAxis()).type?i.getBandWidth():Math.abs((e=i.getExtent())[1]-e[0])/l.count(),r=AZ(Tz(t.get("barMaxWidth"),n),n),o=AZ(Tz(t.get("barMinWidth"),1),n),null!=(a=t.get("barWidth"))?AZ(a,n):Math.max(Math.min(n/2,r),o)),u=l.getDimensionIndex(l.mapDimension("x")),c=TM(l.mapDimensionsAll("y"),l.getDimensionIndex,l),d=c[0],p=c[1],f=c[2],g=c[3];if(l.setLayout({candleWidth:h,isSimpleBox:h<=1.3}),!(u<0)&&!(c.length<4))return{progress:t.pipelineContext.large?function(e,i){for(var n,r,o=WZ(4*e.count),a=0,l=[],h=[],c=i.getStore(),m=!!t.get(["itemStyle","borderColorDoji"]);null!=(r=e.next());){var y=c.get(u,r),w=c.get(d,r),b=c.get(p,r),x=c.get(f,r),S=c.get(g,r);if(isNaN(y)||isNaN(x)||isNaN(S)){o[a++]=NaN,a+=3;continue}o[a++]=jp(c,r,w,b,p,m),l[0]=y,l[1]=x,n=s.dataToPoint(l,null,h),o[a++]=n?n[0]:NaN,o[a++]=n?n[1]:NaN,l[1]=S,n=s.dataToPoint(l,null,h),o[a++]=n?n[1]:NaN}i.setLayout("largePoints",o)}:function(t,e){for(var i,n=e.getStore();null!=(i=t.next());){var r=n.get(u,i),o=n.get(d,i),a=n.get(p,i),l=n.get(f,i),c=n.get(g,i),m=Math.min(o,a),y=Math.max(o,a),w=M(m,r),b=M(y,r),x=M(l,r),S=M(c,r),C=[];T(C,b,0),T(C,w,1),C.push(I(S),I(b),I(x),I(w));var _=!!e.getItemModel(i).get(["itemStyle","borderColorDoji"]);e.setItemLayout(i,{sign:jp(n,i,o,a,p,_),initBaseline:o>a?b[1]:w[1],ends:C,brushRect:function(t,e,i){var n=M(t,i),r=M(e,i);return n[0]-=h/2,r[0]-=h/2,{x:n[0],y:n[1],width:h,height:r[1]-n[1]}}(l,c,r)})}function M(t,e){var i=[];return i[0]=e,i[1]=t,isNaN(e)||isNaN(t)?[NaN,NaN]:s.dataToPoint(i)}function T(t,e,i){var n=e.slice(),r=e.slice();n[0]=Lv(n[0]+h/2,1,!1),r[0]=Lv(r[0]-h/2,1,!0),i?t.push(n,r):t.push(r,n)}function I(t){return t[0]=Lv(t[0],1),t}}}}};function jp(t,e,i,n,r,o){return i>n?-1:i<n?1:o?0:e>0?t.get(r,e-1)<=n?1:-1:1}var jf={color:"fill",borderColor:"stroke"},jg={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},jm=kg(),jy=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,e){return zg(null,this)},e.prototype.getDataParams=function(e,i,n){var r=t.prototype.getDataParams.call(this,e,i);return n&&(r.info=jm(n).info),r},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(VL);function jv(t,e){return e=e||[0,0],TM(["x","y"],function(i,n){var r=this.getAxis(i),o=e[n],a=t[n]/2;return"category"===r.type?r.getBandWidth():Math.abs(r.dataToCoord(o-a)-r.dataToCoord(o+a))},this)}function jw(t,e){return e=e||[0,0],TM([0,1],function(i){var n=e[i],r=t[i]/2,o=[],a=[];return o[i]=n-r,a[i]=n+r,o[1-i]=a[1-i]=e[1-i],Math.abs(this.dataToPoint(o)[i]-this.dataToPoint(a)[i])},this)}function jb(t,e){var i=this.getAxis(),n=e instanceof Array?e[0]:e,r=(t instanceof Array?t[0]:t)/2;return"category"===i.type?i.getBandWidth():Math.abs(i.dataToCoord(n-r)-i.dataToCoord(n+r))}function jx(t,e){return e=e||[0,0],TM(["Radius","Angle"],function(i,n){var r=this["get"+i+"Axis"](),o=e[n],a=t[n]/2,s="category"===r.type?r.getBandWidth():Math.abs(r.dataToCoord(o-a)-r.dataToCoord(o+a));return"Angle"===i&&(s=s*Math.PI/180),s},this)}function jS(t,e,i,n){return t&&(t.legacy||!1!==t.legacy&&!i&&!n&&"tspan"!==e&&("text"===e||T2(t,"text")))}function jC(t,e,i){var n,r,o;if("text"===e)o=t;else{o={},T2(t,"text")&&(o.text=t.text),T2(t,"rich")&&(o.rich=t.rich),T2(t,"textFill")&&(o.fill=t.textFill),T2(t,"textStroke")&&(o.stroke=t.textStroke),T2(t,"fontFamily")&&(o.fontFamily=t.fontFamily),T2(t,"fontSize")&&(o.fontSize=t.fontSize),T2(t,"fontStyle")&&(o.fontStyle=t.fontStyle),T2(t,"fontWeight")&&(o.fontWeight=t.fontWeight),r={type:"text",style:o,silent:!0},n={};var a=T2(t,"textPosition");i?n.position=a?t.textPosition:"inside":a&&(n.position=t.textPosition),T2(t,"textPosition")&&(n.position=t.textPosition),T2(t,"textOffset")&&(n.offset=t.textOffset),T2(t,"textRotation")&&(n.rotation=t.textRotation),T2(t,"textDistance")&&(n.distance=t.textDistance)}return j_(o,t),T_(o.rich,function(t){j_(t,t)}),{textConfig:n,textContent:r}}function j_(t,e){e&&(e.font=e.textFont||e.font,T2(e,"textStrokeWidth")&&(t.lineWidth=e.textStrokeWidth),T2(e,"textAlign")&&(t.align=e.textAlign),T2(e,"textVerticalAlign")&&(t.verticalAlign=e.textVerticalAlign),T2(e,"textLineHeight")&&(t.lineHeight=e.textLineHeight),T2(e,"textWidth")&&(t.width=e.textWidth),T2(e,"textHeight")&&(t.height=e.textHeight),T2(e,"textBackgroundColor")&&(t.backgroundColor=e.textBackgroundColor),T2(e,"textPadding")&&(t.padding=e.textPadding),T2(e,"textBorderColor")&&(t.borderColor=e.textBorderColor),T2(e,"textBorderWidth")&&(t.borderWidth=e.textBorderWidth),T2(e,"textBorderRadius")&&(t.borderRadius=e.textBorderRadius),T2(e,"textBoxShadowColor")&&(t.shadowColor=e.textBoxShadowColor),T2(e,"textBoxShadowBlur")&&(t.shadowBlur=e.textBoxShadowBlur),T2(e,"textBoxShadowOffsetX")&&(t.shadowOffsetX=e.textBoxShadowOffsetX),T2(e,"textBoxShadowOffsetY")&&(t.shadowOffsetY=e.textBoxShadowOffsetY))}function jM(t,e,i){t.textPosition=t.textPosition||i.position||"inside",null!=i.offset&&(t.textOffset=i.offset),null!=i.rotation&&(t.textRotation=i.rotation),null!=i.distance&&(t.textDistance=i.distance);var n=t.textPosition.indexOf("inside")>=0,r=t.fill||"#000";jT(t,e);var o=null==t.textFill;return n?o&&(t.textFill=i.insideFill||"#fff",!t.textStroke&&i.insideStroke&&(t.textStroke=i.insideStroke),t.textStroke||(t.textStroke=r),null==t.textStrokeWidth&&(t.textStrokeWidth=2)):(o&&(t.textFill=t.fill||i.outsideFill||"#000"),!t.textStroke&&i.outsideStroke&&(t.textStroke=i.outsideStroke)),t.text=e.text,t.rich=e.rich,T_(e.rich,function(t){jT(t,t)}),t}function jT(t,e){e&&(T2(e,"fill")&&(t.textFill=e.fill),T2(e,"stroke")&&(t.textStroke=e.fill),T2(e,"lineWidth")&&(t.textStrokeWidth=e.lineWidth),T2(e,"font")&&(t.font=e.font),T2(e,"fontStyle")&&(t.fontStyle=e.fontStyle),T2(e,"fontWeight")&&(t.fontWeight=e.fontWeight),T2(e,"fontSize")&&(t.fontSize=e.fontSize),T2(e,"fontFamily")&&(t.fontFamily=e.fontFamily),T2(e,"align")&&(t.textAlign=e.align),T2(e,"verticalAlign")&&(t.textVerticalAlign=e.verticalAlign),T2(e,"lineHeight")&&(t.textLineHeight=e.lineHeight),T2(e,"width")&&(t.textWidth=e.width),T2(e,"height")&&(t.textHeight=e.height),T2(e,"backgroundColor")&&(t.textBackgroundColor=e.backgroundColor),T2(e,"padding")&&(t.textPadding=e.padding),T2(e,"borderColor")&&(t.textBorderColor=e.borderColor),T2(e,"borderWidth")&&(t.textBorderWidth=e.borderWidth),T2(e,"borderRadius")&&(t.textBorderRadius=e.borderRadius),T2(e,"shadowColor")&&(t.textBoxShadowColor=e.shadowColor),T2(e,"shadowBlur")&&(t.textBoxShadowBlur=e.shadowBlur),T2(e,"shadowOffsetX")&&(t.textBoxShadowOffsetX=e.shadowOffsetX),T2(e,"shadowOffsetY")&&(t.textBoxShadowOffsetY=e.shadowOffsetY),T2(e,"textShadowColor")&&(t.textShadowColor=e.textShadowColor),T2(e,"textShadowBlur")&&(t.textShadowBlur=e.textShadowBlur),T2(e,"textShadowOffsetX")&&(t.textShadowOffsetX=e.textShadowOffsetX),T2(e,"textShadowOffsetY")&&(t.textShadowOffsetY=e.textShadowOffsetY))}var jI={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},jR=TR(jI);TT(A_,function(t,e){return t[e]=1,t},{}),A_.join(", ");var jE=["","style","shape","extra"],jA=kg();function jk(t,e,i,n,r){var o=t+"Animation",a=OZ(t,n,r)||{},s=jA(e).userDuring;return a.duration>0&&(a.during=s?TE(jV,{el:e,userDuring:s}):null,a.setToFinal=!0,a.scope=t),Tw(a,i[o]),a}function jD(t,e,i,n){var r=(n=n||{}).dataIndex,o=n.isInit,a=n.clearStyle,s=i.isAnimationEnabled(),l=jA(t),h=e.style;l.userDuring=e.during;var u={},c={};if(function(t,e,i){for(var n=0;n<jR.length;n++){var r=jR[n],o=jI[r],a=e[r];a&&(i[o[0]]=a[0],i[o[1]]=a[1])}for(var n=0;n<A_.length;n++){var s=A_[n];null!=e[s]&&(i[s]=e[s])}}(0,e,c),jF("shape",e,c),jF("extra",e,c),!o&&s&&(function(t,e,i){for(var n=e.transition,r=jL(n)?A_:kr(n||[]),o=0;o<r.length;o++){var a=r[o];if("style"!==a&&"shape"!==a&&"extra"!==a){var s=t[a];i[a]=s}}}(t,e,u),jB("shape",t,e,u),jB("extra",t,e,u),function(t,e,i,n){if(i){var r,o=t.style;if(o){var a=i.transition,s=e.transition;if(a&&!jL(a)){var l=kr(a);r||(r=n.style={});for(var h=0;h<l.length;h++){var u=l[h],c=o[u];r[u]=c}}else if(t.getAnimationStyleProps&&(jL(s)||jL(a)||Tx(s,"style")>=0)){var d=t.getAnimationStyleProps(),p=d?d.style:null;if(p){r||(r=n.style={});for(var f=TR(i),h=0;h<f.length;h++){var u=f[h];if(p[u]){var c=o[u];r[u]=c}}}}}}}(t,e,h,u)),c.style=h,function(t,e,i){var n=e.style;if(!t.isGroup&&n){if(i){t.useStyle({});for(var r=t.animators,o=0;o<r.length;o++){var a=r[o];"style"===a.targetName&&a.changeTarget(t.style)}}t.setStyle(n)}e&&(e.style=null,e&&t.attr(e),e.style=n)}(t,c,a),T2(e,"silent")&&(t.silent=e.silent),T2(e,"ignore")&&(t.ignore=e.ignore),t instanceof k1&&T2(e,"invisible")&&(t.invisible=e.invisible),t instanceof DB&&T2(e,"autoBatch")&&(t.autoBatch=e.autoBatch),s){if(o){var d={};T_(jE,function(t){var i=t?e[t]:e;i&&i.enterFrom&&(t&&(d[t]=d[t]||{}),Tw(t?d[t]:d,i.enterFrom))});var p=jk("enter",t,e,i,r);p.duration>0&&t.animateFrom(d,p)}else!function(t,e,i,n,r){if(r){var o=jk("update",t,e,n,i);o.duration>0&&t.animateFrom(r,o)}}(t,e,r||0,i,u)}jO(t,e),h?t.dirty():t.markRedraw()}function jO(t,e){for(var i=jA(t).leaveToProps,n=0;n<jE.length;n++){var r=jE[n],o=r?e[r]:e;o&&o.leaveTo&&(i||(i=jA(t).leaveToProps={}),r&&(i[r]=i[r]||{}),Tw(r?i[r]:i,o.leaveTo))}}function jP(t,e,i,n){if(t){var r=t.parent,o=jA(t).leaveToProps;if(o){var a=jk("update",t,e,i,0);a.done=function(){r.remove(t),n&&n()},t.animateTo(o,a)}else r.remove(t),n&&n()}}function jL(t){return"all"===t}var jN={},jH={setTransform:function(t,e){return jN.el[t]=e,this},getTransform:function(t){return jN.el[t]},setShape:function(t,e){var i=jN.el;return(i.shape||(i.shape={}))[t]=e,i.dirtyShape&&i.dirtyShape(),this},getShape:function(t){var e=jN.el.shape;if(e)return e[t]},setStyle:function(t,e){var i=jN.el,n=i.style;return n&&(n[t]=e,i.dirtyStyle&&i.dirtyStyle()),this},getStyle:function(t){var e=jN.el.style;if(e)return e[t]},setExtra:function(t,e){return(jN.el.extra||(jN.el.extra={}))[t]=e,this},getExtra:function(t){var e=jN.el.extra;if(e)return e[t]}};function jV(){var t=this.el;if(t){var e=jA(t).userDuring,i=this.userDuring;if(e!==i){this.el=this.userDuring=null;return}jN.el=t,i(jH)}}function jB(t,e,i,n){var r,o=i[t];if(o){var a=e[t];if(a){var s=i.transition,l=o.transition;if(l){if(r||(r=n[t]={}),jL(l))Tw(r,a);else for(var h=kr(l),u=0;u<h.length;u++){var c=h[u],d=a[c];r[c]=d}}else if(jL(s)||Tx(s,t)>=0){r||(r=n[t]={});for(var p=TR(a),u=0;u<p.length;u++){var f,g,c=p[u],d=a[c];f=o[c],g=d,(TC(f)?f!==g:null!=f&&isFinite(f))&&(r[c]=d)}}}}}function jF(t,e,i){var n=e[t];if(n)for(var r=i[t]={},o=TR(n),a=0;a<o.length;a++){var s=o[a];r[s]=E1(n[s])}}var jW=kg(),jz=["percent","easing","shape","style","extra"];function jj(t){t.stopAnimation("keyframe"),t.attr(jW(t))}function jU(t,e,i){if(i.isAnimationEnabled()&&e){if(Tk(e)){T_(e,function(e){jU(t,e,i)});return}var n=e.keyframes,r=e.duration;if(i&&null==r){var o=OZ("enter",i,0);r=o&&o.duration}if(n&&r){var a=jW(t);T_(jE,function(i){var o;(!i||t[i])&&(n.sort(function(t,e){return t.percent-e.percent}),T_(n,function(n){var s=t.animators,l=i?n[i]:n;if(l){var h=TR(l);if(i||(h=TI(h,function(t){return 0>Tx(jz,t)})),h.length){o||((o=t.animate(i,e.loop,!0)).scope="keyframe");for(var u=0;u<s.length;u++)s[u]!==o&&s[u].targetName===o.targetName&&s[u].stopTracks(h);i&&(a[i]=a[i]||{});var c=i?a[i]:a;T_(h,function(e){c[e]=((i?t[i]:t)||{})[e]}),o.whenWithKeys(r*n.percent,l,h,n.easing)}}}),o&&o.delay(e.delay||0).duration(r).start(e.easing))})}}}var jG="emphasis",jY="normal",jX="blur",j$="select",jZ=[jY,jG,jX,j$],jq={normal:["itemStyle"],emphasis:[jG,"itemStyle"],blur:[jX,"itemStyle"],select:[j$,"itemStyle"]},jK={normal:["label"],emphasis:[jG,"label"],blur:[jX,"label"],select:[j$,"label"]},jQ=["x","y"],jJ={normal:{},emphasis:{},blur:{},select:{}},j0={cartesian2d:function(t){var e=t.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:TE(jv,t)}}},geo:function(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(e){return t.dataToPoint(e)},size:TE(jw,t)}}},single:function(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:TE(jb,t)}}},polar:function(t){var e=t.getRadiusAxis(),i=t.getAngleAxis(),n=e.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:n[1],r0:n[0]},api:{coord:function(n){var r=e.dataToRadius(n[0]),o=i.dataToAngle(n[1]),a=t.coordToPoint([r,o]);return a.push(r,o*Math.PI/180),a},size:TE(jx,t)}}},calendar:function(t){var e=t.getRect(),i=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:i.start,end:i.end,weeks:i.weeks,dayCount:i.allDay}},api:{coord:function(e,i){return t.dataToPoint(e,i)}}}}};function j1(t){return t instanceof DB}function j2(t){return t instanceof k1}var j5=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i,n){this._progressiveEls=null;var r=this._data,o=t.getData(),a=this.group,s=j8(t,o,e,i);r||a.removeAll(),o.diff(r).add(function(e){j9(i,null,e,s(e,n),t,a,o)}).remove(function(e){var i=r.getItemGraphicEl(e);i&&jP(i,jm(i).option,t)}).update(function(e,l){j9(i,r.getItemGraphicEl(l),e,s(e,n),t,a,o)}).execute();var l=t.get("clip",!0)?zb(t.coordinateSystem,!1,t):null;l?a.setClipPath(l):a.removeClipPath(),this._data=o},e.prototype.incrementalPrepareRender=function(t,e,i){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,e,i,n,r){var o=e.getData(),a=j8(e,o,i,n),s=this._progressiveEls=[];function l(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}for(var h=t.start;h<t.end;h++){var u=j9(null,null,h,a(h,r),e,this.group,o);u&&(u.traverse(l),s.push(u))}},e.prototype.eachRendered=function(t){LA(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,e,i,n){var r=e.element;if(null==r||i.name===r)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===r)return!0;return!1},e.type="custom",e}(VX);function j3(t){var e,i=t.type;if("path"===i){var n=t.shape,r=null!=n.width&&null!=n.height?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,o=Us(n);jm(e=Lc(o,null,r,n.layout||"center")).customPathData=o}else if("image"===i)jm(e=new DU({})).customImagePath=t.style.image;else if("text"===i)e=new D0({});else if("group"===i)e=new Aj;else if("compoundPath"===i)throw Error('"compoundPath" is not supported yet.');else{var a=Lu(i);a||Hi(""),e=new a}return jm(e).customGraphicType=i,e.name=t.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function j4(t,e,i,n,r,o,a){jj(e);var s=r&&r.normal.cfg;s&&e.setTextConfig(s),n&&null==n.transition&&(n.transition=jQ);var l=n&&n.style;if(l){"text"===e.type&&(T2(l,"textFill")&&(l.fill=l.textFill),T2(l,"textStroke")&&(l.stroke=l.textStroke));var h=void 0,u=j1(e)?l.decal:null;t&&u&&(u.dirty=!0,h=Fr(u,t)),l.__decalPattern=h}if(j2(e)&&l){var h=l.__decalPattern;h&&(l.decal=h)}jD(e,n,o,{dataIndex:i,isInit:a,clearStyle:!0}),jU(e,n.keyframeAnimation,o)}function j6(t,e,i,n,r){var o=e.isGroup?null:e,a=r&&r[t].cfg;if(o){var s=o.ensureState(t);if(!1===n){var l=o.getState(t);l&&(l.style=null)}else s.style=n||null;a&&(s.textConfig=a),OI(o)}}function j8(t,e,i,n){var r,o,a,s,l=t.get("renderItem"),h=t.coordinateSystem,u={};h&&(u=h.prepareCustoms?h.prepareCustoms(h):j0[h.type](h));for(var c=Tb({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:function(t,i){return null==i&&(i=a),e.getStore().get(e.getDimensionIndex(t||0),i)},style:function(i,n){null==n&&(n=a);var r=e.getItemVisual(n,"style"),o=r&&r.fill,s=r&&r.opacity,l=x(n,jY).getItemStyle();null!=o&&(l.fill=o),null!=s&&(l.opacity=s);var h={inheritColor:TO(o)?o:"#000"},u=S(n,jY),c=LN(u,null,h,!1,!0);c.text=u.getShallow("show")?Tz(t.getFormattedLabel(n,jY),z_(e,n)):null;var d=LH(u,h,!1);return _(i,l),l=jM(l,c,d),i&&C(l,i),l.legacy=!0,l},ordinalRawValue:function(t,i){null==i&&(i=a),t=t||0;var n=e.getDimensionInfo(t);if(!n){var r=e.getDimensionIndex(t);return r>=0?e.getStore().get(r,i):void 0}var o=e.get(n.name,i),s=n&&n.ordinalMeta;return s?s.categories[o]:o},styleEmphasis:function(i,n){null==n&&(n=a);var r=x(n,jG).getItemStyle(),o=S(n,jG),s=LN(o,null,null,!0,!0);s.text=o.getShallow("show")?Tj(t.getFormattedLabel(n,jG),t.getFormattedLabel(n,jY),z_(e,n)):null;var l=LH(o,null,!0);return _(i,r),r=jM(r,s,l),i&&C(r,i),r.legacy=!0,r},visual:function(t,i){if(null==i&&(i=a),T2(jf,t)){var n=e.getItemVisual(i,"style");return n?n[jf[t]]:null}if(T2(jg,t))return e.getItemVisual(i,t)},barLayout:function(t){if("cartesian2d"===h.type)return function(t){var e=[],i=t.axis,n="axis0";if("category"===i.type){for(var r=i.getBandWidth(),o=0;o<t.count;o++)e.push(Tb({bandWidth:r,axisKey:n,stackId:Wq+o},t));for(var a=W1(e),s=[],o=0;o<t.count;o++){var l=a[n][Wq+o];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}(Tb({axis:h.getBaseAxis()},t))},currentSeriesIndices:function(){return i.getCurrentSeriesIndices()},font:function(t){return Lz(t,i)}},u.api||{}),d={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:u.coordSys,dataInsideLength:e.count(),encode:(r=t.getData(),o={},T_(r.dimensions,function(t){var e=r.getDimensionInfo(t);if(!e.isExtraCoord){var i=e.coordDim;(o[i]=o[i]||[])[e.coordDimIndex]=r.getDimensionIndex(t)}}),o)},p={},f={},g={},m={},y=0;y<jZ.length;y++){var w=jZ[y];g[w]=t.getModel(jq[w]),m[w]=t.getModel(jK[w])}function b(t){return t===a?s||(s=e.getItemModel(t)):e.getItemModel(t)}function x(t,i){return e.hasItemOption?t===a?p[i]||(p[i]=b(t).getModel(jq[i])):b(t).getModel(jq[i]):g[i]}function S(t,i){return e.hasItemOption?t===a?f[i]||(f[i]=b(t).getModel(jK[i])):b(t).getModel(jK[i]):m[i]}return function(t,i){return a=t,s=null,p={},f={},l&&l(Tb({dataIndexInside:t,dataIndex:e.getRawIndex(t),actionType:i?i.type:null},d),c)};function C(t,e){for(var i in e)T2(e,i)&&(t[i]=e[i])}function _(t,e){t&&(t.textFill&&(e.textFill=t.textFill),t.textPosition&&(e.textPosition=t.textPosition))}}function j9(t,e,i,n,r,o,a){if(!n){o.remove(e);return}var s=j7(t,e,i,n,r,o);return s&&a.setItemGraphicEl(i,s),s&&OB(s,n.focus,n.blurScope,n.emphasisDisabled),s}function j7(t,e,i,n,r,o){var a,s=-1,l=e;e&&Ut(e,n,r)&&(s=Tx(o.childrenRef(),e),e=null);var h=!e,u=e;u?u.clearStates():(u=j3(n),l&&((a=u).copyTransform(l),j2(a)&&j2(l)&&(a.setStyle(l.style),a.z=l.z,a.z2=l.z2,a.zlevel=l.zlevel,a.invisible=l.invisible,a.ignore=l.ignore,j1(a)&&j1(l)&&a.setShape(l.shape)))),!1===n.morph?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),jJ.normal.cfg=jJ.normal.conOpt=jJ.emphasis.cfg=jJ.emphasis.conOpt=jJ.blur.cfg=jJ.blur.conOpt=jJ.select.cfg=jJ.select.conOpt=null,jJ.isLegacy=!1,function(t,e,i,n,r,o){if(!t.isGroup){Ue(i,null,o),Ue(i,jG,o);var a=o.normal.conOpt,s=o.emphasis.conOpt,l=o.blur.conOpt,h=o.select.conOpt;if(null!=a||null!=s||null!=h||null!=l){var u=t.getTextContent();if(!1===a)u&&t.removeTextContent();else{a=o.normal.conOpt=a||{type:"text"},u?u.clearStates():(u=j3(a),t.setTextContent(u)),j4(null,u,e,a,null,n,r);for(var c=a&&a.style,d=0;d<jZ.length;d++){var p=jZ[d];if(p!==jY){var f=o[p].conOpt;j6(p,u,f,Un(a,f,p),null)}}c?u.dirty():u.markRedraw()}}}}(u,i,n,r,h,jJ),function(t,e,i,n,r){var o=i.clipPath;if(!1===o)t&&t.getClipPath()&&t.removeClipPath();else if(o){var a=t.getClipPath();a&&Ut(a,o,n)&&(a=null),a||(a=j3(o),t.setClipPath(a)),j4(null,a,e,o,null,n,r)}}(u,i,n,r,h),j4(t,u,i,n,jJ,r,h),T2(n,"info")&&(jm(u).info=n.info);for(var c=0;c<jZ.length;c++){var d=jZ[c];if(d!==jY){var p=Ui(n,d),f=Un(n,p,d);j6(d,u,p,f,jJ)}}return!function(t,e,i){if(!t.isGroup){var n=i.currentZ,r=i.currentZLevel;t.z=n,t.zlevel=r;var o=e.z2;null!=o&&(t.z2=o||0);for(var a=0;a<jZ.length;a++)(function(t,e,i){var n=i===jY,r=n?e:Ui(e,i),o=r?r.z2:null;null!=o&&((n?t:t.ensureState(i)).z2=o||0)})(t,e,jZ[a])}}(u,n,r),"group"===n.type&&function(t,e,i,n,r){var o=n.children,a=o?o.length:0,s=n.$mergeChildren,l="byName"===s||n.diffChildrenByName,h=!1===s;if(a||l||h){if(l){(function(t){new ze(t.oldChildren,t.newChildren,Ur,Ur,t).add(Uo).update(Uo).remove(Ua).execute()})({api:t,oldChildren:e.children()||[],newChildren:o||[],dataIndex:i,seriesModel:r,group:e});return}h&&e.removeAll();for(var u=0;u<a;u++){var c=o[u],d=e.childAt(u);c?(null==c.ignore&&(c.ignore=!1),j7(t,d,i,c,r,e)):d.ignore=!0}for(var p=e.childCount()-1;p>=u;p--){var f=e.childAt(p);f&&jP(f,jm(e).option,r)}}}(t,u,i,n,r),s>=0?o.replaceAt(u,s):o.add(u),u}function Ut(t,e,i){var n,r=jm(t),o=e.type,a=e.shape,s=e.style;return i.isUniversalTransitionEnabled()||null!=o&&o!==r.customGraphicType||"path"===o&&(n=a)&&(T2(n,"pathData")||T2(n,"d"))&&Us(a)!==r.customPathData||"image"===o&&T2(s,"image")&&s.image!==r.customImagePath}function Ue(t,e,i){var n=e?Ui(t,e):t,r=e?Un(t,n,jG):t.style,o=t.type,a=n?n.textConfig:null,s=t.textContent,l=s?e?Ui(s,e):s:null;if(r&&(i.isLegacy||jS(r,o,!!a,!!l))){i.isLegacy=!0;var h=jC(r,o,!e);!a&&h.textConfig&&(a=h.textConfig),!l&&h.textContent&&(l=h.textContent)}if(!e&&l){var u=l;u.type||(u.type="text")}var c=e?i[e]:i.normal;c.cfg=a,c.conOpt=l}function Ui(t,e){return e?t?t[e]:null:t}function Un(t,e,i){var n=e&&e.style;return null==n&&i===jG&&t&&(n=t.styleEmphasis),n}function Ur(t,e){var i=t&&t.name;return null!=i?i:"e\0\0"+e}function Uo(t,e){var i=this.context,n=null!=t?i.newChildren[t]:null,r=null!=e?i.oldChildren[e]:null;j7(i.api,r,i.dataIndex,n,i.seriesModel,i.group)}function Ua(t){var e=this.context,i=e.oldChildren[t];i&&jP(i,jm(i).option,e.seriesModel)}function Us(t){return t&&(t.pathData||t.d)}var Ul=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.updateData(e,i,n,r),o}return M6(e,t),e.prototype._createSymbol=function(t,e,i,n,r){this.removeAll();var o=BW(t,-1,-1,2,2,null,r);o.attr({z2:100,culling:!0,scaleX:n[0]/2,scaleY:n[1]/2}),o.drift=Uh,this._symbolType=t,this.add(o)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){OA(this.childAt(0))},e.prototype.downplay=function(){Ok(this.childAt(0))},e.prototype.setZ=function(t,e){var i=this.childAt(0);i.zlevel=t,i.z=e},e.prototype.setDraggable=function(t,e){var i=this.childAt(0);i.draggable=t,i.cursor=!e&&t?"move":i.cursor},e.prototype.updateData=function(t,i,n,r){this.silent=!1;var o=t.getItemVisual(i,"symbol")||"circle",a=t.hostModel,s=e.getSymbolSize(t,i),l=o!==this._symbolType,h=r&&r.disableAnimation;if(l){var u=t.getItemVisual(i,"symbolKeepAspect");this._createSymbol(o,t,i,s,u)}else{var c=this.childAt(0);c.silent=!1;var d={scaleX:s[0]/2,scaleY:s[1]/2};h?c.attr(d):OK(c,d,a,i),O5(c)}if(this._updateCommon(t,i,s,n,r),l){var c=this.childAt(0);if(!h){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:c.style.opacity}};c.scaleX=c.scaleY=0,c.style.opacity=0,OQ(c,d,a,i)}}h&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,e,i,n,r){var o,a,s,l,h,u,c,d,p,f=this.childAt(0),g=t.hostModel;if(n&&(o=n.emphasisItemStyle,a=n.blurItemStyle,s=n.selectItemStyle,l=n.focus,h=n.blurScope,c=n.labelStatesModels,d=n.hoverScale,p=n.cursorStyle,u=n.emphasisDisabled),!n||t.hasItemOption){var m=n&&n.itemModel?n.itemModel:t.getItemModel(e),y=m.getModel("emphasis");o=y.getModel("itemStyle").getItemStyle(),s=m.getModel(["select","itemStyle"]).getItemStyle(),a=m.getModel(["blur","itemStyle"]).getItemStyle(),l=y.get("focus"),h=y.get("blurScope"),u=y.get("disabled"),c=LL(m),d=y.getShallow("scale"),p=m.getShallow("cursor")}var w=t.getItemVisual(e,"symbolRotate");f.attr("rotation",(w||0)*Math.PI/180||0);var b=Bj(t.getItemVisual(e,"symbolOffset"),i);b&&(f.x=b[0],f.y=b[1]),p&&f.attr("cursor",p);var x=t.getItemVisual(e,"style"),S=x.fill;if(f instanceof DU){var C=f.style;f.useStyle(Tw({image:C.image,x:C.x,y:C.y,width:C.width,height:C.height},x))}else f.__isEmptyBrush?f.useStyle(Tw({},x)):f.useStyle(x),f.style.decal=null,f.setColor(S,r&&r.symbolInnerColor),f.style.strokeNoScale=!0;var _=t.getItemVisual(e,"liftZ"),M=this._z2;null!=_?null==M&&(this._z2=f.z2,f.z2+=_):null!=M&&(f.z2=M,this._z2=null);var T=r&&r.useNameLabel;LP(f,c,{labelFetcher:g,labelDataIndex:e,defaultText:function(e){return T?t.getName(e):z_(t,e)},inheritColor:S,defaultOpacity:x.opacity}),this._sizeX=i[0]/2,this._sizeY=i[1]/2;var I=f.ensureState("emphasis");I.style=o,f.ensureState("select").style=s,f.ensureState("blur").style=a;var R=null==d||!0===d?Math.max(1.1,3/this._sizeY):isFinite(d)&&d>0?+d:1;I.scaleX=this._sizeX*R,I.scaleY=this._sizeY*R,this.setSymbolScale(1),OB(this,l,h,u)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,e,i){var n=this.childAt(0),r=On(this).dataIndex,o=i&&i.animation;if(this.silent=n.silent=!0,i&&i.fadeLabel){var a=n.getTextContent();a&&O0(a,{style:{opacity:0}},e,{dataIndex:r,removeOpt:o,cb:function(){n.removeTextContent()}})}else n.removeTextContent();O0(n,{style:{opacity:0},scaleX:0,scaleY:0},e,{dataIndex:r,cb:t,removeOpt:o})},e.getSymbolSize=function(t,e){return Bz(t.getItemVisual(e,"symbolSize"))},e}(Aj);function Uh(t,e){this.parent.drift(t,e)}function Uu(t,e,i,n){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(n.isIgnore&&n.isIgnore(i))&&!(n.clipShape&&!n.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(i,"symbol")}function Uc(t){return null==t||TN(t)||(t={isIgnore:t}),t||{}}function Ud(t){var e=t.hostModel,i=e.getModel("emphasis");return{emphasisItemStyle:i.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:i.get("focus"),blurScope:i.get("blurScope"),emphasisDisabled:i.get("disabled"),hoverScale:i.get("scale"),labelStatesModels:LL(e),cursorStyle:e.get("cursor")}}var Up=function(){function t(t){this.group=new Aj,this._SymbolCtor=t||Ul}return t.prototype.updateData=function(t,e){this._progressiveEls=null,e=Uc(e);var i=this.group,n=t.hostModel,r=this._data,o=this._SymbolCtor,a=e.disableAnimation,s=Ud(t),l={disableAnimation:a},h=e.getSymbolPoint||function(e){return t.getItemLayout(e)};r||i.removeAll(),t.diff(r).add(function(n){var r=h(n);if(Uu(t,r,n,e)){var a=new o(t,n,s,l);a.setPosition(r),t.setItemGraphicEl(n,a),i.add(a)}}).update(function(u,c){var d=r.getItemGraphicEl(c),p=h(u);if(!Uu(t,p,u,e)){i.remove(d);return}var f=t.getItemVisual(u,"symbol")||"circle",g=d&&d.getSymbolType&&d.getSymbolType();if(!d||g&&g!==f)i.remove(d),(d=new o(t,u,s,l)).setPosition(p);else{d.updateData(t,u,s,l);var m={x:p[0],y:p[1]};a?d.attr(m):OK(d,m,n)}i.add(d),t.setItemGraphicEl(u,d)}).remove(function(t){var e=r.getItemGraphicEl(t);e&&e.fadeOut(function(){i.remove(e)},n)}).execute(),this._getSymbolPoint=h,this._data=t},t.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl(function(e,i){var n=t._getSymbolPoint(i);e.setPosition(n),e.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Ud(t),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e,i){function n(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],i=Uc(i);for(var r=t.start;r<t.end;r++){var o=e.getItemLayout(r);if(Uu(e,o,r,i)){var a=new this._SymbolCtor(e,r,this._seriesScope);a.traverse(n),a.setPosition(o),this.group.add(a),e.setItemGraphicEl(r,a),this._progressiveEls.push(a)}}},t.prototype.eachRendered=function(t){LA(this._progressiveEls||this.group,t)},t.prototype.remove=function(t){var e=this.group,i=this._data;i&&t?i.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)},i.hostModel)}):e.removeAll()},t}();function Uf(t,e){var i=e.rippleEffectColor||e.color;t.eachChild(function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:"stroke"===e.brushType?i:null,fill:"fill"===e.brushType?i:null}})})}var Ug=function(t){function e(e,i){var n=t.call(this)||this,r=new Ul(e,i),o=new Aj;return n.add(r),n.add(o),n.updateData(e,i),n}return M6(e,t),e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var e=t.symbolType,i=t.color,n=t.rippleNumber,r=this.childAt(1),o=0;o<n;o++){var a=BW(e,-1,-1,2,2,i);a.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var s=-o/n*t.period+t.effectOffset;a.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(s).start(),a.animateStyle(!0).when(t.period,{opacity:0}).delay(s).start(),r.add(a)}Uf(r,t)},e.prototype.updateEffectAnimation=function(t){for(var e=this._effectCfg,i=this.childAt(1),n=["symbolType","period","rippleScale","rippleNumber"],r=0;r<n.length;r++){var o=n[r];if(e[o]!==t[o]){this.stopEffectAnimation(),this.startEffectAnimation(t);return}}Uf(i,t)},e.prototype.highlight=function(){OA(this)},e.prototype.downplay=function(){Ok(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,e){var i=this,n=t.hostModel;this.childAt(0).updateData(t,e);var r=this.childAt(1),o=t.getItemModel(e),a=t.getItemVisual(e,"symbol"),s=Bz(t.getItemVisual(e,"symbolSize")),l=t.getItemVisual(e,"style"),h=l&&l.fill,u=o.getModel("emphasis");r.setScale(s),r.traverse(function(t){t.setStyle("fill",h)});var c=Bj(t.getItemVisual(e,"symbolOffset"),s);c&&(r.x=c[0],r.y=c[1]);var d=t.getItemVisual(e,"symbolRotate");r.rotation=(d||0)*Math.PI/180||0;var p={};p.showEffectOn=n.get("showEffectOn"),p.rippleScale=o.get(["rippleEffect","scale"]),p.brushType=o.get(["rippleEffect","brushType"]),p.period=1e3*o.get(["rippleEffect","period"]),p.effectOffset=e/t.count(),p.z=n.getShallow("z")||0,p.zlevel=n.getShallow("zlevel")||0,p.symbolType=a,p.color=h,p.rippleEffectColor=o.get(["rippleEffect","color"]),p.rippleNumber=o.get(["rippleEffect","number"]),"render"===p.showEffectOn?(this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(t){"emphasis"===t?"render"!==p.showEffectOn&&i.startEffectAnimation(p):"normal"===t&&"render"!==p.showEffectOn&&i.stopEffectAnimation()}),this._effectCfg=p,OB(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e}(Aj);function Um(t,e){return{seriesType:t,plan:VU(),reset:function(t){var i=t.getData(),n=t.coordinateSystem,r=t.pipelineContext,o=e||r.large;if(n){var a=TM(n.dimensions,function(t){return i.mapDimension(t)}).slice(0,2),s=a.length,l=i.getCalculationInfo("stackResultDimension");WG(i,a[0])&&(a[0]=l),WG(i,a[1])&&(a[1]=l);var h=i.getStore(),u=i.getDimensionIndex(a[0]),c=i.getDimensionIndex(a[1]);return s&&{progress:function(t,e){for(var i=t.end-t.start,r=o&&WZ(i*s),a=[],l=[],d=t.start,p=0;d<t.end;d++){var f=void 0;if(1===s){var g=h.get(u,d);f=n.dataToPoint(g,null,l)}else a[0]=h.get(u,d),a[1]=h.get(c,d),f=n.dataToPoint(a,null,l);o?(r[p++]=f[0],r[p++]=f[1]):e.setItemLayout(d,f.slice())}o&&e.setLayout("points",r)}}}}}}var Uy=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.init=function(){this._symbolDraw=new Up(Ug)},e.prototype.render=function(t,e,i){var n=t.getData(),r=this._symbolDraw;r.updateData(n,{clipShape:this._getClipShape(t)}),this.group.add(r.group)},e.prototype._getClipShape=function(t){var e=t.coordinateSystem,i=e&&e.getArea&&e.getArea();return t.get("clip",!0)?i:null},e.prototype.updateTransform=function(t,e,i){var n=t.getData();this.group.dirty();var r=Um("").reset(t,e,i);r.progress&&r.progress({start:0,end:n.count(),count:n.count()},n),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var e,i,n=t.coordinateSystem;n&&n.getRoamTransform&&(this.group.transform=(e=n.getRoamTransform(),IF(i=IV(),e),i),this.group.decomposeTransform())},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(VX),Uv=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.hasSymbolVisual=!0,i}return M6(e,t),e.prototype.getInitialData=function(t,e){return zg(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,e,i){return i.point(e.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(VL),Uw=2*Math.PI,Ub=D_.CMD,Ux=["top","right","bottom","left"];function US(t,e,i,n,r,o,a,s){var l=i-t,h=n-e,u=Math.sqrt(l*l+h*h),c=((r-t)*(l/=u)+(o-e)*(h/=u))/u;s&&(c=Math.min(Math.max(c,0),1)),c*=u;var d=a[0]=t+c*l,p=a[1]=e+c*h;return Math.sqrt((d-r)*(d-r)+(p-o)*(p-o))}function UC(t,e,i,n,r,o,a){i<0&&(t+=i,i=-i),n<0&&(e+=n,n=-n);var s=t+i,l=e+n,h=a[0]=Math.min(Math.max(r,t),s),u=a[1]=Math.min(Math.max(o,e),l);return Math.sqrt((h-r)*(h-r)+(u-o)*(u-o))}var U_=[],UM=new IY,UT=new IY,UI=new IY,UR=new IY,UE=new IY;function UA(t,e){if(t){var i=t.getTextGuideLine(),n=t.getTextContent();if(n&&i){var r=t.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],a=r.candidates||Ux,s=n.getBoundingRect().clone();s.applyTransform(n.getComputedTransform());var l=1/0,h=r.anchor,u=t.getComputedTransform(),c=u&&IG([],u),d=e.get("length2")||0;h&&UI.copy(h);for(var p=0;p<a.length;p++){!function(t,e,i,n,r){var o=i.width,a=i.height;switch(t){case"top":n.set(i.x+o/2,i.y-0),r.set(0,-1);break;case"bottom":n.set(i.x+o/2,i.y+a+0),r.set(0,1);break;case"left":n.set(i.x-0,i.y+a/2),r.set(-1,0);break;case"right":n.set(i.x+o+e,i.y+a/2),r.set(1,0)}}(a[p],0,s,UM,UR),IY.scaleAndAdd(UT,UM,UR,d),UT.transform(c);var f=t.getBoundingRect(),g=h?h.distance(UT):t instanceof DB?function(t,e,i){for(var n,r,o=0,a=0,s=0,l=0,h=1/0,u=e.data,c=t.x,d=t.y,p=0;p<u.length;){var f=u[p++];1===p&&(o=u[p],a=u[p+1],s=o,l=a);var g=h;switch(f){case Ub.M:s=u[p++],l=u[p++],o=s,a=l;break;case Ub.L:g=US(o,a,u[p],u[p+1],c,d,U_,!0),o=u[p++],a=u[p++];break;case Ub.C:g=RM(o,a,u[p++],u[p++],u[p++],u[p++],u[p],u[p+1],c,d,U_),o=u[p++],a=u[p++];break;case Ub.Q:g=RA(o,a,u[p++],u[p++],u[p],u[p+1],c,d,U_),o=u[p++],a=u[p++];break;case Ub.A:var m=u[p++],y=u[p++],w=u[p++],b=u[p++],x=u[p++],S=u[p++];p+=1;var C=!!(1-u[p++]);n=Math.cos(x)*w+m,r=Math.sin(x)*b+y,p<=1&&(s=n,l=r);var _=(c-m)*b/w+m;g=function(t,e,i,n,r,o,a,s,l){var h=Math.sqrt((a-=t)*a+(s-=e)*s),u=(a/=h)*i+t,c=(s/=h)*i+e;if(Math.abs(n-r)%Uw<1e-4)return l[0]=u,l[1]=c,h-i;if(o){var d=n;n=DR(r),r=DR(d)}else n=DR(n),r=DR(r);n>r&&(r+=Uw);var p=Math.atan2(s,a);if(p<0&&(p+=Uw),p>=n&&p<=r||p+Uw>=n&&p+Uw<=r)return l[0]=u,l[1]=c,h-i;var f=i*Math.cos(n)+t,g=i*Math.sin(n)+e,m=i*Math.cos(r)+t,y=i*Math.sin(r)+e,w=(f-a)*(f-a)+(g-s)*(g-s),b=(m-a)*(m-a)+(y-s)*(y-s);return w<b?(l[0]=f,l[1]=g,Math.sqrt(w)):(l[0]=m,l[1]=y,Math.sqrt(b))}(m,y,b,x,x+S,C,_,d,U_),o=Math.cos(x+S)*w+m,a=Math.sin(x+S)*b+y;break;case Ub.R:g=UC(s=o=u[p++],l=a=u[p++],u[p++],u[p++],c,d,U_);break;case Ub.Z:g=US(o,a,s,l,c,d,U_,!0),o=s,a=l}g<h&&(h=g,i.set(U_[0],U_[1]))}return h}(UT,t.path,UI):function(t,e,i){var n=UC(e.x,e.y,e.width,e.height,t.x,t.y,U_);return i.set(U_[0],U_[1]),n}(UT,f,UI);g<l&&(l=g,UT.transform(u),UI.transform(u),UI.toArray(o[0]),UT.toArray(o[1]),UM.toArray(o[2]))}UO(o,e.get("minTurnAngle")),i.setShape({points:o})}}}var Uk=[],UD=new IY;function UO(t,e){if(e<=180&&e>0){e=e/180*Math.PI,UM.fromArray(t[0]),UT.fromArray(t[1]),UI.fromArray(t[2]),IY.sub(UR,UM,UT),IY.sub(UE,UI,UT);var i=UR.len(),n=UE.len();if(!(i<.001)&&!(n<.001)&&(UR.scale(1/i),UE.scale(1/n),Math.cos(e)<UR.dot(UE))){var r=US(UT.x,UT.y,UI.x,UI.y,UM.x,UM.y,Uk,!1);UD.fromArray(Uk),UD.scaleAndAdd(UE,r/Math.tan(Math.PI-e));var o=UI.x!==UT.x?(UD.x-UT.x)/(UI.x-UT.x):(UD.y-UT.y)/(UI.y-UT.y);if(isNaN(o))return;o<0?IY.copy(UD,UT):o>1&&IY.copy(UD,UI),UD.toArray(t[1])}}}function UP(t,e,i,n){var r="normal"===i,o=r?t:t.ensureState(i);o.ignore=e;var a=n.get("smooth");a&&!0===a&&(a=.3),o.shape=o.shape||{},a>0&&(o.shape.smooth=a);var s=n.getModel("lineStyle").getLineStyle();r?t.useStyle(s):o.style=s}function UL(t,e){var i=e.smooth,n=e.points;if(n){if(t.moveTo(n[0][0],n[0][1]),i>0&&n.length>=3){var r=Ia(n[0],n[1]),o=Ia(n[1],n[2]);if(!r||!o){t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]);return}var a=Math.min(r,o)*i,s=Il([],n[1],n[0],a/r),l=Il([],n[1],n[2],a/o),h=Il([],s,l,.5);t.bezierCurveTo(s[0],s[1],s[0],s[1],h[0],h[1]),t.bezierCurveTo(l[0],l[1],l[0],l[1],n[2][0],n[2][1])}else for(var u=1;u<n.length;u++)t.lineTo(n[u][0],n[u][1])}}function UN(t,e,i){var n=t.getTextGuideLine(),r=t.getTextContent();if(!r){n&&t.removeTextGuideLine();return}for(var o=e.normal,a=o.get("show"),s=r.ignore,l=0;l<Ou.length;l++){var h=Ou[l],u=e[h],c="normal"===h;if(u){var d=u.get("show");if((c?s:Tz(r.states[h]&&r.states[h].ignore,s))||!Tz(d,a)){var p=c?n:n&&n.states[h];p&&(p.ignore=!0),n&&UP(n,!0,h,u);continue}!n&&(n=new Pj,t.setTextGuideLine(n),c||!s&&a||UP(n,!0,"normal",e.normal),t.stateProxy&&(n.stateProxy=t.stateProxy)),UP(n,!1,h,u)}}if(n){Tb(n.style,i),n.style.fill=null;var f=o.get("showAbove");(t.textGuideLineConfig=t.textGuideLineConfig||{}).showAbove=f||!1,n.buildPath=UL}}function UH(t,e){e=e||"labelLine";for(var i={normal:t.getModel(e)},n=0;n<Oh.length;n++){var r=Oh[n];i[r]=t.getModel([r,e])}return i}var UV=["itemStyle","opacity"],UB=function(t){function e(e,i){var n=t.call(this)||this,r=new Pj,o=new D0;return n.setTextContent(o),n.setTextGuideLine(r),n.updateData(e,i,!0),n}return M6(e,t),e.prototype.updateData=function(t,e,i){var n=t.hostModel,r=t.getItemModel(e),o=t.getItemLayout(e),a=r.getModel("emphasis"),s=r.get(UV);s=null==s?1:s,i||O5(this),this.useStyle(t.getItemVisual(e,"style")),this.style.lineJoin="round",i?(this.setShape({points:o.points}),this.style.opacity=0,OQ(this,{style:{opacity:s}},n,e)):OK(this,{style:{opacity:s},shape:{points:o.points}},n,e),Oj(this,r),this._updateLabel(t,e),OB(this,a.get("focus"),a.get("blurScope"),a.get("disabled"))},e.prototype._updateLabel=function(t,e){var i=this.getTextGuideLine(),n=this.getTextContent(),r=t.hostModel,o=t.getItemModel(e),a=t.getItemLayout(e).label,s=t.getItemVisual(e,"style"),l=s.fill;LP(n,LL(o),{labelFetcher:t.hostModel,labelDataIndex:e,defaultOpacity:s.opacity,defaultText:t.getName(e)},{normal:{align:a.textAlign,verticalAlign:a.verticalAlign}}),this.setTextConfig({local:!0,inside:!!a.inside,insideStroke:l,outsideFill:l});var h=a.linePoints;i.setShape({points:h}),this.textGuideLineConfig={anchor:h?new IY(h[0][0],h[0][1]):null},OK(n,{style:{x:a.x,y:a.y}},r,e),n.attr({rotation:a.rotation,originX:a.x,originY:a.y,z2:10}),UN(this,UH(o),{stroke:l})},e}(PF),UF=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.ignoreLabelLineUpdate=!0,i}return M6(e,t),e.prototype.render=function(t,e,i){var n=t.getData(),r=this._data,o=this.group;n.diff(r).add(function(t){var e=new UB(n,t);n.setItemGraphicEl(t,e),o.add(e)}).update(function(t,e){var i=r.getItemGraphicEl(e);i.updateData(n,t),o.add(i),n.setItemGraphicEl(t,i)}).remove(function(e){O2(r.getItemGraphicEl(e),t,e)}).execute(),this._data=n},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(VX),UW=function(){function t(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return t.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},t.prototype.containName=function(t){return this._getRawData().indexOfName(t)>=0},t.prototype.indexOfName=function(t){return this._getDataWithEncodedVisual().indexOfName(t)},t.prototype.getItemVisual=function(t,e){return this._getDataWithEncodedVisual().getItemVisual(t,e)},t}(),Uz=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new UW(TE(this.getData,this),TE(this.getRawData,this)),this._defaultLabelLine(e)},e.prototype.getInitialData=function(t,e){return zX(this,{coordDimensions:["value"],encodeDefaulter:TA(N2,this)})},e.prototype._defaultLabelLine=function(t){ko(t,"labelLine",["show"]);var e=t.labelLine,i=t.emphasis.labelLine;e.show=e.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.prototype.getDataParams=function(e){var i=this.getData(),n=t.prototype.getDataParams.call(this,e),r=i.mapDimension("value"),o=i.getSum(r);return n.percent=o?+(i.get(r,e)/o*100).toFixed(2):0,n.$vars.push("percent"),n},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(VL);function Uj(t,e){t.eachSeriesByType("funnel",function(t){var i=t.getData(),n=i.mapDimension("value"),r=t.get("sort"),o=NP(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),a=t.get("orient"),s=o.width,l=o.height,h=function(t,e){for(var i=t.mapDimension("value"),n=t.mapArray(i,function(t){return t}),r=[],o="ascending"===e,a=0,s=t.count();a<s;a++)r[a]=a;return TD(e)?r.sort(e):"none"!==e&&r.sort(function(t,e){return o?n[t]-n[e]:n[e]-n[t]}),r}(i,r),u=o.x,c=o.y,d="horizontal"===a?[AZ(t.get("minSize"),l),AZ(t.get("maxSize"),l)]:[AZ(t.get("minSize"),s),AZ(t.get("maxSize"),s)],p=i.getDataExtent(n),f=t.get("min"),g=t.get("max");null==f&&(f=Math.min(p[0],0)),null==g&&(g=p[1]);var m=t.get("funnelAlign"),y=t.get("gap"),w=(("horizontal"===a?s:l)-y*(i.count()-1))/i.count(),b=function(t,e){if("horizontal"===a){var r,o=A$(i.get(n,t)||0,[f,g],d,!0),h=void 0;switch(m){case"top":h=c;break;case"center":h=c+(l-o)/2;break;case"bottom":h=c+(l-o)}return[[e,h],[e,h+o]]}var p=A$(i.get(n,t)||0,[f,g],d,!0);switch(m){case"left":r=u;break;case"center":r=u+(s-p)/2;break;case"right":r=u+s-p}return[[r,e],[r+p,e]]};"ascending"===r&&(w=-w,y=-y,"horizontal"===a?u+=s:c+=l,h=h.reverse());for(var x=0;x<h.length;x++){var S=h[x],C=h[x+1],_=i.getItemModel(S);if("horizontal"===a){var M=_.get(["itemStyle","width"]);null==M?M=w:(M=AZ(M,s),"ascending"===r&&(M=-M));var T=b(S,u),I=b(C,u+M);u+=M+y,i.setItemLayout(S,{points:T.concat(I.slice().reverse())})}else{var R=_.get(["itemStyle","height"]);null==R?R=w:(R=AZ(R,l),"ascending"===r&&(R=-R));var T=b(S,c),I=b(C,c+R);c+=R+y,i.setItemLayout(S,{points:T.concat(I.slice().reverse())})}}!function(t){var e=t.hostModel.get("orient");t.each(function(i){var n,r,o,a,s=t.getItemModel(i),l=s.getModel("label").get("position"),h=s.getModel("labelLine"),u=t.getItemLayout(i),c=u.points,d="inner"===l||"inside"===l||"center"===l||"insideLeft"===l||"insideRight"===l;if(d)"insideLeft"===l?(r=(c[0][0]+c[3][0])/2+5,o=(c[0][1]+c[3][1])/2,n="left"):"insideRight"===l?(r=(c[1][0]+c[2][0])/2-5,o=(c[1][1]+c[2][1])/2,n="right"):(r=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,o=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4,n="center"),a=[[r,o],[r,o]];else{var p=void 0,f=void 0,g=void 0,m=void 0,y=h.get("length");"left"===l?(p=(c[3][0]+c[0][0])/2,f=(c[3][1]+c[0][1])/2,r=(g=p-y)-5,n="right"):"right"===l?(p=(c[1][0]+c[2][0])/2,f=(c[1][1]+c[2][1])/2,r=(g=p+y)+5,n="left"):"top"===l?(p=(c[3][0]+c[0][0])/2,o=(m=(f=(c[3][1]+c[0][1])/2)-y)-5,n="center"):"bottom"===l?(p=(c[1][0]+c[2][0])/2,o=(m=(f=(c[1][1]+c[2][1])/2)+y)+5,n="center"):"rightTop"===l?(p="horizontal"===e?c[3][0]:c[1][0],f="horizontal"===e?c[3][1]:c[1][1],"horizontal"===e?(o=(m=f-y)-5,n="center"):(r=(g=p+y)+5,n="top")):"rightBottom"===l?(p=c[2][0],f=c[2][1],"horizontal"===e?(o=(m=f+y)+5,n="center"):(r=(g=p+y)+5,n="bottom")):"leftTop"===l?(p=c[0][0],f="horizontal"===e?c[0][1]:c[1][1],"horizontal"===e?(o=(m=f-y)-5,n="center"):(r=(g=p-y)-5,n="right")):"leftBottom"===l?(p="horizontal"===e?c[1][0]:c[3][0],f="horizontal"===e?c[1][1]:c[2][1],"horizontal"===e?(o=(m=f+y)+5,n="center"):(r=(g=p-y)-5,n="right")):(p=(c[1][0]+c[2][0])/2,f=(c[1][1]+c[2][1])/2,"horizontal"===e?(o=(m=f+y)+5,n="center"):(r=(g=p+y)+5,n="left")),"horizontal"===e?r=g=p:o=m=f,a=[[p,f],[g,m]]}u.label={linePoints:a,x:r,y:o,verticalAlign:"middle",textAlign:n,inside:d}})}(i)})}function UU(t){return{seriesType:t,reset:function(t,e){var i=e.findComponents({mainType:"legend"});if(i&&i.length){var n=t.getData();n.filterSelf(function(t){for(var e=n.getName(t),r=0;r<i.length;r++)if(!i[r].isSelected(e))return!1;return!0})}}}}var UG=function(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0},UY=function(t){function e(e){var i=t.call(this,e)||this;return i.type="pointer",i}return M6(e,t),e.prototype.getDefaultShape=function(){return new UG},e.prototype.buildPath=function(t,e){var i=Math.cos,n=Math.sin,r=e.r,o=e.width,a=e.angle,s=e.x-i(a)*o*(o>=r/3?1:2),l=e.y-n(a)*o*(o>=r/3?1:2);a=e.angle-Math.PI/2,t.moveTo(s,l),t.lineTo(e.x+i(a)*o,e.y+n(a)*o),t.lineTo(e.x+i(e.angle)*r,e.y+n(e.angle)*r),t.lineTo(e.x-i(a)*o,e.y-n(a)*o),t.lineTo(s,l)},e}(DB);function UX(t,e){var i=null==t?"":t+"";return e&&(TO(e)?i=e.replace("{value}",i):TD(e)&&(i=e(t))),i}var U$=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i){this.group.removeAll();var n,r,o,a=t.get(["axisLine","lineStyle","color"]),s=(n=t.get("center"),r=i.getWidth(),o=i.getHeight(),{cx:AZ(n[0],i.getWidth()),cy:AZ(n[1],i.getHeight()),r:AZ(t.get("radius"),Math.min(r,o)/2)});this._renderMain(t,e,i,a,s),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,e,i,n,r){var o=this.group,a=t.get("clockwise"),s=-t.get("startAngle")/180*Math.PI,l=-t.get("endAngle")/180*Math.PI,h=t.getModel("axisLine"),u=h.get("roundCap")?zS:PO,c=h.get("show"),d=h.getModel("lineStyle"),p=d.get("width"),f=[s,l];DC(f,!a),s=f[0];for(var g=(l=f[1])-s,m=s,y=[],w=0;c&&w<n.length;w++){var b=new u({shape:{startAngle:m,endAngle:l=s+g*Math.min(Math.max(n[w][0],0),1),cx:r.cx,cy:r.cy,clockwise:a,r0:r.r-p,r:r.r},silent:!0});b.setStyle({fill:n[w][1]}),b.setStyle(d.getLineStyle(["color","width"])),y.push(b),m=l}y.reverse(),T_(y,function(t){return o.add(t)});var x=function(t){var e;if(t<=0)return n[0][1];for(e=0;e<n.length;e++)if(n[e][0]>=t&&(0===e?0:n[e-1][0])<t)return n[e][1];return n[e-1][1]};this._renderTicks(t,e,i,x,r,s,l,a,p),this._renderTitleAndDetail(t,e,i,x,r),this._renderAnchor(t,r),this._renderPointer(t,e,i,x,r,s,l,a,p)},e.prototype._renderTicks=function(t,e,i,n,r,o,a,s,l){for(var h,u,c=this.group,d=r.cx,p=r.cy,f=r.r,g=+t.get("min"),m=+t.get("max"),y=t.getModel("splitLine"),w=t.getModel("axisTick"),b=t.getModel("axisLabel"),x=t.get("splitNumber"),S=w.get("splitNumber"),C=AZ(y.get("length"),f),_=AZ(w.get("length"),f),M=o,T=(a-o)/x,I=T/S,R=y.getModel("lineStyle").getLineStyle(),E=w.getModel("lineStyle").getLineStyle(),A=y.get("distance"),k=0;k<=x;k++){if(h=Math.cos(M),u=Math.sin(M),y.get("show")){var D=A?A+l:l,O=new PX({shape:{x1:h*(f-D)+d,y1:u*(f-D)+p,x2:h*(f-C-D)+d,y2:u*(f-C-D)+p},style:R,silent:!0});"auto"===R.stroke&&O.setStyle({stroke:n(k/x)}),c.add(O)}if(b.get("show")){var D=b.get("distance")+A,P=UX(Aq(k/x*(m-g)+g),b.get("formatter")),L=n(k/x),N=h*(f-C-D)+d,H=u*(f-C-D)+p,V=b.get("rotate"),B=0;"radial"===V?(B=-M+2*Math.PI)>Math.PI/2&&(B+=Math.PI):"tangential"===V?B=-M-Math.PI/2:TL(V)&&(B=V*Math.PI/180),0===B?c.add(new D0({style:LN(b,{text:P,x:N,y:H,verticalAlign:u<-.8?"top":u>.8?"bottom":"middle",align:h<-.4?"left":h>.4?"right":"center"},{inheritColor:L}),silent:!0})):c.add(new D0({style:LN(b,{text:P,x:N,y:H,verticalAlign:"middle",align:"center"},{inheritColor:L}),silent:!0,originX:N,originY:H,rotation:B}))}if(w.get("show")&&k!==x){var D=w.get("distance");D=D?D+l:l;for(var F=0;F<=S;F++){var W=new PX({shape:{x1:(h=Math.cos(M))*(f-D)+d,y1:(u=Math.sin(M))*(f-D)+p,x2:h*(f-_-D)+d,y2:u*(f-_-D)+p},silent:!0,style:E});"auto"===E.stroke&&W.setStyle({stroke:n((k+F/S)/x)}),c.add(W),M+=I}M-=I}else M+=T}},e.prototype._renderPointer=function(t,e,i,n,r,o,a,s,l){var h=this.group,u=this._data,c=this._progressEls,d=[],p=t.get(["pointer","show"]),f=t.getModel("progress"),g=f.get("show"),m=t.getData(),y=m.mapDimension("value"),w=+t.get("min"),b=+t.get("max"),x=[w,b],S=[o,a];function C(e,i){var n,o=m.getItemModel(e).getModel("pointer"),a=AZ(o.get("width"),r.r),s=AZ(o.get("length"),r.r),l=t.get(["pointer","icon"]),h=o.get("offsetCenter"),u=AZ(h[0],r.r),c=AZ(h[1],r.r),d=o.get("keepAspect");return(n=l?BW(l,u-a/2,c-s,a,s,null,d):new UY({shape:{angle:-Math.PI/2,width:a,r:s,x:u,y:c}})).rotation=-(i+Math.PI/2),n.x=r.cx,n.y=r.cy,n}function _(t,e){var i=f.get("roundCap")?zS:PO,n=f.get("overlap"),a=n?f.get("width"):l/m.count(),h=n?r.r-a:r.r-(t+1)*a,u=n?r.r:r.r-t*a,c=new i({shape:{startAngle:o,endAngle:e,cx:r.cx,cy:r.cy,clockwise:s,r0:h,r:u}});return n&&(c.z2=b-m.get(y,t)%b),c}(g||p)&&(m.diff(u).add(function(e){var i=m.get(y,e);if(p){var n=C(e,o);OQ(n,{rotation:-((isNaN(+i)?S[0]:A$(i,x,S,!0))+Math.PI/2)},t),h.add(n),m.setItemGraphicEl(e,n)}if(g){var r=_(e,o);OQ(r,{shape:{endAngle:A$(i,x,S,f.get("clip"))}},t),h.add(r),Or(t.seriesIndex,m.dataType,e,r),d[e]=r}}).update(function(e,i){var n=m.get(y,e);if(p){var r=u.getItemGraphicEl(i),a=r?r.rotation:o,s=C(e,a);s.rotation=a,OK(s,{rotation:-((isNaN(+n)?S[0]:A$(n,x,S,!0))+Math.PI/2)},t),h.add(s),m.setItemGraphicEl(e,s)}if(g){var l=c[i],w=_(e,l?l.shape.endAngle:o);OK(w,{shape:{endAngle:A$(n,x,S,f.get("clip"))}},t),h.add(w),Or(t.seriesIndex,m.dataType,e,w),d[e]=w}}).execute(),m.each(function(t){var e=m.getItemModel(t),i=e.getModel("emphasis"),r=i.get("focus"),o=i.get("blurScope"),a=i.get("disabled");if(p){var s=m.getItemGraphicEl(t),l=m.getItemVisual(t,"style"),h=l.fill;if(s instanceof DU){var u=s.style;s.useStyle(Tw({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},l))}else s.useStyle(l),"pointer"!==s.type&&s.setColor(h);s.setStyle(e.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===s.style.fill&&s.setStyle("fill",n(A$(m.get(y,t),x,[0,1],!0))),s.z2EmphasisLift=0,Oj(s,e),OB(s,r,o,a)}if(g){var c=d[t];c.useStyle(m.getItemVisual(t,"style")),c.setStyle(e.getModel(["progress","itemStyle"]).getItemStyle()),c.z2EmphasisLift=0,Oj(c,e),OB(c,r,o,a)}}),this._progressEls=d)},e.prototype._renderAnchor=function(t,e){var i=t.getModel("anchor");if(i.get("show")){var n=i.get("size"),r=i.get("icon"),o=i.get("offsetCenter"),a=i.get("keepAspect"),s=BW(r,e.cx-n/2+AZ(o[0],e.r),e.cy-n/2+AZ(o[1],e.r),n,n,null,a);s.z2=i.get("showAbove")?1:0,s.setStyle(i.getModel("itemStyle").getItemStyle()),this.group.add(s)}},e.prototype._renderTitleAndDetail=function(t,e,i,n,r){var o=this,a=t.getData(),s=a.mapDimension("value"),l=+t.get("min"),h=+t.get("max"),u=new Aj,c=[],d=[],p=t.isAnimationEnabled(),f=t.get(["pointer","showAbove"]);a.diff(this._data).add(function(t){c[t]=new D0({silent:!0}),d[t]=new D0({silent:!0})}).update(function(t,e){c[t]=o._titleEls[e],d[t]=o._detailEls[e]}).execute(),a.each(function(e){var i=a.getItemModel(e),o=a.get(s,e),g=new Aj,m=n(A$(o,[l,h],[0,1],!0)),y=i.getModel("title");if(y.get("show")){var w=y.get("offsetCenter"),b=r.cx+AZ(w[0],r.r),x=r.cy+AZ(w[1],r.r),S=c[e];S.attr({z2:f?0:2,style:LN(y,{x:b,y:x,text:a.getName(e),align:"center",verticalAlign:"middle"},{inheritColor:m})}),g.add(S)}var C=i.getModel("detail");if(C.get("show")){var _=C.get("offsetCenter"),M=r.cx+AZ(_[0],r.r),T=r.cy+AZ(_[1],r.r),I=AZ(C.get("width"),r.r),R=AZ(C.get("height"),r.r),E=t.get(["progress","show"])?a.getItemVisual(e,"style").fill:m,S=d[e],A=C.get("formatter");S.attr({z2:f?0:2,style:LN(C,{x:M,y:T,text:UX(o,A),width:isNaN(I)?null:I,height:isNaN(R)?null:R,align:"center",verticalAlign:"middle"},{inheritColor:E})}),LU(S,{normal:C},o,function(t){return UX(t,A)}),p&&LG(S,e,a,t,{getFormattedLabel:function(t,e,i,n,r,a){return UX(a?a.interpolatedValue:o,A)}}),g.add(S)}u.add(g)}),this.group.add(u),this._titleEls=c,this._detailEls=d},e.type="gauge",e}(VX),UZ=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.visualStyleAccessPath="itemStyle",i}return M6(e,t),e.prototype.getInitialData=function(t,e){return zX(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(VL);function Uq(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.eachSeriesByType("graph",function(t){var i=t.getCategoriesData(),n=t.getGraph().data,r=i.mapArray(i.getName);n.filterSelf(function(t){var i=n.getItemModel(t).getShallow("category");if(null!=i){TL(i)&&(i=r[i]);for(var o=0;o<e.length;o++)if(!e[o].isSelected(i))return!1}return!0})})}function UK(t){var e={};t.eachSeriesByType("graph",function(t){var i=t.getCategoriesData(),n=t.getData(),r={};i.each(function(n){var o=i.getName(n);r["ec-"+o]=n;var a=i.getItemModel(n),s=a.getModel("itemStyle").getItemStyle();s.fill||(s.fill=t.getColorFromPalette(o,e)),i.setItemVisual(n,"style",s);for(var l=["symbol","symbolSize","symbolKeepAspect"],h=0;h<l.length;h++){var u=a.getShallow(l[h],!0);null!=u&&i.setItemVisual(n,l[h],u)}}),i.count()&&n.each(function(t){var e=n.getItemModel(t).getShallow("category");if(null!=e){TO(e)&&(e=r["ec-"+e]);var o=i.getItemVisual(e,"style");Tw(n.ensureUniqueItemVisual(t,"style"),o);for(var a=["symbol","symbolSize","symbolKeepAspect"],s=0;s<a.length;s++)n.setItemVisual(t,a[s],i.getItemVisual(e,a[s]))}})})}function UQ(t){return t instanceof Array||(t=[t,t]),t}function UJ(t){t.eachSeriesByType("graph",function(t){var e=t.getGraph(),i=t.getEdgeData(),n=UQ(t.get("edgeSymbol")),r=UQ(t.get("edgeSymbolSize"));i.setVisual("fromSymbol",n&&n[0]),i.setVisual("toSymbol",n&&n[1]),i.setVisual("fromSymbolSize",r&&r[0]),i.setVisual("toSymbolSize",r&&r[1]),i.setVisual("style",t.getModel("lineStyle").getLineStyle()),i.each(function(t){var n=i.getItemModel(t),r=e.getEdgeByIndex(t),o=UQ(n.getShallow("symbol",!0)),a=UQ(n.getShallow("symbolSize",!0)),s=n.getModel("lineStyle").getLineStyle(),l=i.ensureUniqueItemVisual(t,"style");switch(Tw(l,s),l.stroke){case"source":var h=r.node1.getVisual("style");l.stroke=h&&h.fill;break;case"target":var h=r.node2.getVisual("style");l.stroke=h&&h.fill}o[0]&&r.setVisual("fromSymbol",o[0]),o[1]&&r.setVisual("toSymbol",o[1]),a[0]&&r.setVisual("fromSymbolSize",a[0]),a[1]&&r.setVisual("toSymbolSize",a[1])})})}var U0=function(t){return t.get("autoCurveness")||null},U1=function(t,e){var i=U0(t),n=20,r=[];if(TL(i))n=i;else if(Tk(i)){t.__curvenessList=i;return}e>n&&(n=e);var o=n%2?n+2:n+3;r=[];for(var a=0;a<o;a++)r.push((a%2?a+1:a)/10*(a%2?-1:1));t.__curvenessList=r},U2=function(t,e,i){var n=[t.id,t.dataIndex].join("."),r=[e.id,e.dataIndex].join(".");return[i.uid,n,r].join("-->")},U5=function(t){var e=t.split("-->");return[e[0],e[2],e[1]].join("-->")},U3=function(t,e){var i=U2(t.node1,t.node2,e);return e.__edgeMap[i]},U4=function(t,e){var i=e.__edgeMap;return i[t]?i[t].length:0};function U6(t,e,i,n){var r=U0(e),o=Tk(r);if(!r)return null;var a=U3(t,e);if(!a)return null;for(var s=-1,l=0;l<a.length;l++)if(a[l]===i){s=l;break}var h=U4(U2(t.node1,t.node2,e),e)+U4(U2(t.node2,t.node1,e),e);U1(e,h),t.lineStyle=t.lineStyle||{};var u=U2(t.node1,t.node2,e),c=e.__curvenessList,d=o?0:h%2?0:1;if(a.isForward)return c[d+s];var p=U4(U5(u),e),f=c[s+p+d];return n?o?r&&0===r[0]?(p+d)%2?f:-f:((p%2?0:1)+d)%2?f:-f:(p+d)%2?f:-f:c[s+p+d]}function U8(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var i=t.getGraph();i.eachNode(function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])}),U9(i,t)}}function U9(t,e){t.eachEdge(function(t,i){var n=Tj(t.getModel().get(["lineStyle","curveness"]),-U6(t,e,i,!0),0),r=T7(t.node1.getLayout()),o=T7(t.node2.getLayout()),a=[r,o];+n&&a.push([(r[0]+o[0])/2-(r[1]-o[1])*n,(r[1]+o[1])/2-(o[0]-r[0])*n]),t.setLayout(a)})}function U7(t,e){t.eachSeriesByType("graph",function(t){var e=t.get("layout"),i=t.coordinateSystem;if(i&&"view"!==i.type){var n=t.getData(),r=[];T_(i.dimensions,function(t){r=r.concat(n.mapDimensionsAll(t))});for(var o=0;o<n.count();o++){for(var a=[],s=!1,l=0;l<r.length;l++){var h=n.get(r[l],o);isNaN(h)||(s=!0),a.push(h)}s?n.setItemLayout(o,i.dataToPoint(a)):n.setItemLayout(o,[NaN,NaN])}U9(n.graph,t)}else e&&"none"!==e||U8(t)})}function Gt(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var i=t.option.nodeScaleRatio,n=e.scaleX;return((e.getZoom()-1)*i+1)/n}function Ge(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var Gi=Math.PI,Gn=[];function Gr(t,e,i,n){var r=t.coordinateSystem;if(!r||"view"===r.type){var o=r.getBoundingRect(),a=t.getData(),s=a.graph,l=o.width/2+o.x,h=o.height/2+o.y,u=Math.min(o.width,o.height)/2,c=a.count();if(a.setLayout({cx:l,cy:h}),c){if(i){var d=r.pointToData(n),p=[d[0]-l,d[1]-h];Io(p,p),Ir(p,p,u),i.setLayout([l+p[0],h+p[1]],!0),Ga(i,t.get(["circular","rotateLabel"]),l,h)}Go[e](t,s,a,u,l,h,c),s.eachEdge(function(e,i){var n,r=Tj(e.getModel().get(["lineStyle","curveness"]),U6(e,t,i),0),o=T7(e.node1.getLayout()),a=T7(e.node2.getLayout()),s=(o[0]+a[0])/2,u=(o[1]+a[1])/2;+r&&(r*=3,n=[l*r+s*(1-r),h*r+u*(1-r)]),e.setLayout([o,a,n])})}}}var Go={value:function(t,e,i,n,r,o,a){var s=0,l=i.getSum("value"),h=2*Math.PI/(l||a);e.eachNode(function(t){var e=t.getValue("value"),i=h*(l?e:1)/2;s+=i,t.setLayout([n*Math.cos(s)+r,n*Math.sin(s)+o]),s+=i})},symbolSize:function(t,e,i,n,r,o,a){var s=0;Gn.length=a;var l=Gt(t);e.eachNode(function(t){var e=Ge(t);isNaN(e)&&(e=2),e<0&&(e=0);var i=Math.asin((e*=l)/2/n);isNaN(i)&&(i=Gi/2),Gn[t.dataIndex]=i,s+=2*i});var h=(2*Gi-s)/a/2,u=0;e.eachNode(function(t){var e=h+Gn[t.dataIndex];u+=e,t.getLayout()&&t.getLayout().fixed||t.setLayout([n*Math.cos(u)+r,n*Math.sin(u)+o]),u+=e})}};function Ga(t,e,i,n){var r=t.getGraphicEl();if(r){var o=t.getModel().get(["label","rotate"])||0,a=r.getSymbolPath();if(e){var s=t.getLayout(),l=Math.atan2(s[1]-n,s[0]-i);l<0&&(l=2*Math.PI+l);var h=s[0]<i;h&&(l-=Math.PI);var u=h?"left":"right";a.setTextConfig({rotation:-l,position:u,origin:"center"});var c=a.ensureState("emphasis");Tw(c.textConfig||(c.textConfig={}),{position:u})}else a.setTextConfig({rotation:o*=Math.PI/180})}}function Gs(t){t.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&Gr(t,"symbolSize")})}function Gl(t){t.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!e||"view"===e.type){if("force"===t.get("layout")){var i=t.preservedPoints||{},n=t.getGraph(),r=n.data,o=n.edgeData,a=t.getModel("force"),s=a.get("initLayout");t.preservedPoints?r.each(function(t){var e=r.getId(t);r.setItemLayout(t,i[e]||[NaN,NaN])}):s&&"none"!==s?"circular"===s&&Gr(t,"value"):U8(t);var l=r.getDataExtent("value"),h=o.getDataExtent("value"),u=a.get("repulsion"),c=a.get("edgeLength"),d=Tk(u)?u:[u,u],p=Tk(c)?c:[c,c];p=[p[1],p[0]];var f=r.mapArray("value",function(t,e){var i=r.getItemLayout(e),n=A$(t,l,d);return isNaN(n)&&(n=(d[0]+d[1])/2),{w:n,rep:n,fixed:r.getItemModel(e).get("fixed"),p:!i||isNaN(i[0])||isNaN(i[1])?null:i}}),g=o.mapArray("value",function(e,i){var r=n.getEdgeByIndex(i),o=A$(e,h,p);isNaN(o)&&(o=(p[0]+p[1])/2);var a=r.getModel(),s=Tj(r.getModel().get(["lineStyle","curveness"]),-U6(r,t,i,!0),0);return{n1:f[r.node1.dataIndex],n2:f[r.node2.dataIndex],d:o,curveness:s,ignoreForceLayout:a.get("ignoreForceLayout")}}),m=function(t,e,i){for(var n,r,o=i.rect,a=o.width,s=o.height,l=[o.x+a/2,o.y+s/2],h=null==i.gravity?.1:i.gravity,u=0;u<t.length;u++){var c=t[u];c.p||(c.p=T8(a*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),c.pp=T7(c.p),c.edges=null}var d=null==i.friction?.6:i.friction,p=d;return{warmUp:function(){p=.8*d},setFixed:function(e){t[e].fixed=!0},setUnfixed:function(e){t[e].fixed=!1},beforeStep:function(t){n=t},afterStep:function(t){r=t},step:function(i){n&&n(t,e);for(var o=[],a=t.length,s=0;s<e.length;s++){var u=e[s];if(!u.ignoreForceLayout){var c=u.n1,d=u.n2;Ii(o,d.p,c.p);var f=In(o)-u.d,g=d.w/(c.w+d.w);isNaN(g)&&(g=0),Io(o,o),c.fixed||Ie(c.p,c.p,o,g*f*p),d.fixed||Ie(d.p,d.p,o,-(1-g)*f*p)}}for(var s=0;s<a;s++){var m=t[s];m.fixed||(Ii(o,l,m.p),Ie(m.p,m.p,o,h*p))}for(var s=0;s<a;s++)for(var c=t[s],y=s+1;y<a;y++){var w,b,d=t[y];Ii(o,d.p,c.p);var f=In(o);0===f&&(w=Math.random()-.5,b=Math.random()-.5,o[0]=w,o[1]=b,f=1);var x=(c.rep+d.rep)/f/f;c.fixed||Ie(c.pp,c.pp,o,x),d.fixed||Ie(d.pp,d.pp,o,-x)}for(var S=[],s=0;s<a;s++){var m=t[s];m.fixed||(Ii(S,m.p,m.pp),Ie(m.p,m.p,S,p),T9(m.pp,m.p))}var C=(p*=.992)<.01;r&&r(t,e,C),i&&i(C)}}}(f,g,{rect:e.getBoundingRect(),gravity:a.get("gravity"),friction:a.get("friction")});m.beforeStep(function(t,e){for(var i=0,r=t.length;i<r;i++)t[i].fixed&&T9(t[i].p,n.getNodeByIndex(i).getLayout())}),m.afterStep(function(t,e,o){for(var a=0,s=t.length;a<s;a++)t[a].fixed||n.getNodeByIndex(a).setLayout(t[a].p),i[r.getId(a)]=t[a].p;for(var a=0,s=e.length;a<s;a++){var l=e[a],h=n.getEdgeByIndex(a),u=l.n1.p,c=l.n2.p,d=h.getLayout();(d=d?d.slice():[])[0]=d[0]||[],d[1]=d[1]||[],T9(d[0],u),T9(d[1],c),+l.curveness&&(d[2]=[(u[0]+c[0])/2-(u[1]-c[1])*l.curveness,(u[1]+c[1])/2-(c[0]-u[0])*l.curveness]),h.setLayout(d)}}),t.forceLayout=m,t.preservedPoints=i,m.step()}else t.forceLayout=null}})}var Gh=function(t){function e(e){var i=t.call(this)||this;return i.type="view",i.dimensions=["x","y"],i._roamTransformable=new AC,i._rawTransformable=new AC,i.name=e,i}return M6(e,t),e.prototype.setBoundingRect=function(t,e,i,n){return this._rect=new I1(t,e,i,n),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,e,i,n){this._transformTo(t,e,i,n),this._viewRect=new I1(t,e,i,n)},e.prototype._transformTo=function(t,e,i,n){var r=this.getBoundingRect(),o=this._rawTransformable;o.transform=r.calculateTransform(new I1(t,e,i,n));var a=o.parent;o.parent=null,o.decomposeTransform(),o.parent=a,this._updateTransform()},e.prototype.setCenter=function(t,e){t&&(this._center=[AZ(t[0],e.getWidth()),AZ(t[1],e.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(t){t=t||1;var e=this.zoomLimit;e&&(null!=e.max&&(t=Math.min(e.max,t)),null!=e.min&&(t=Math.max(e.min,t))),this._zoom=t,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect();return[t.x+t.width/2,t.y+t.height/2]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),e=this._roamTransformable,i=this.getDefaultCenter(),n=this.getCenter(),r=this.getZoom();n=Ih([],n,t),i=Ih([],i,t),e.originX=n[0],e.originY=n[1],e.x=i[0]-n[0],e.y=i[1]-n[1],e.scaleX=e.scaleY=r,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,e=this._rawTransformable;e.parent=t,t.updateTransform(),e.updateTransform(),IF(this.transform||(this.transform=[]),e.transform||IV()),this._rawTransform=e.getLocalTransform(),this.invTransform=this.invTransform||[],IG(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,e=this._roamTransformable,i=new AC;return i.transform=e.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,e,i){var n=e?this._rawTransform:this.transform;return i=i||[],n?Ih(i,t,n):T9(i,t)},e.prototype.pointToData=function(t){var e=this.invTransform;return e?Ih([],t,e):[t[0],t[1]]},e.prototype.convertToPixel=function(t,e,i){var n=Gu(e);return n===this?n.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,e,i){var n=Gu(e);return n===this?n.pointToData(i):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e}(AC);function Gu(t){var e=t.seriesModel;return e?e.coordinateSystem:null}function Gc(t,e){var i=[];return t.eachSeriesByType("graph",function(t){var n=t.get("coordinateSystem");if(!n||"view"===n){var r=t.getData(),o=r.mapArray(function(t){var e=r.getItemModel(t);return[+e.get("x"),+e.get("y")]}),a=[],s=[];Di(o,a,s),s[0]-a[0]==0&&(s[0]+=1,a[0]-=1),s[1]-a[1]==0&&(s[1]+=1,a[1]-=1);var l=(s[0]-a[0])/(s[1]-a[1]),h=NP(Tw(t.getBoxLayoutParams(),{aspect:l}),{width:e.getWidth(),height:e.getHeight()});isNaN(l)&&(a=[h.x,h.y],s=[h.x+h.width,h.y+h.height]);var u=s[0]-a[0],c=s[1]-a[1],d=h.width,p=h.height,f=t.coordinateSystem=new Gh;f.zoomLimit=t.get("scaleLimit"),f.setBoundingRect(a[0],a[1],u,c),f.setViewRect(h.x,h.y,d,p),f.setCenter(t.get("center"),e),f.setZoom(t.get("zoom")),i.push(f)}}),i}var Gd=PX.prototype,Gp=PQ.prototype,Gf=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};function Gg(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}M6(function(){return null!==J&&J.apply(this,arguments)||this},J=Gf);var Gm=function(t){function e(e){var i=t.call(this,e)||this;return i.type="ec-line",i}return M6(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Gf},e.prototype.buildPath=function(t,e){Gg(e)?Gd.buildPath.call(this,t,e):Gp.buildPath.call(this,t,e)},e.prototype.pointAt=function(t){return Gg(this.shape)?Gd.pointAt.call(this,t):Gp.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var e=this.shape,i=Gg(e)?[e.x2-e.x1,e.y2-e.y1]:Gp.tangentAt.call(this,t);return Io(i,i)},e}(DB),Gy=["fromSymbol","toSymbol"];function Gv(t){return"_"+t+"Type"}function Gw(t,e,i){var n=e.getItemVisual(i,t);if(!n||"none"===n)return n;var r=e.getItemVisual(i,t+"Size"),o=e.getItemVisual(i,t+"Rotate"),a=e.getItemVisual(i,t+"Offset"),s=e.getItemVisual(i,t+"KeepAspect"),l=Bz(r),h=Bj(a||0,l);return n+l+h+(o||"")+(s||"")}function Gb(t,e,i){var n=e.getItemVisual(i,t);if(n&&"none"!==n){var r=e.getItemVisual(i,t+"Size"),o=e.getItemVisual(i,t+"Rotate"),a=e.getItemVisual(i,t+"Offset"),s=e.getItemVisual(i,t+"KeepAspect"),l=Bz(r),h=Bj(a||0,l),u=BW(n,-l[0]/2+h[0],-l[1]/2+h[1],l[0],l[1],null,s);return u.__specifiedRotation=null==o||isNaN(o)?void 0:+o*Math.PI/180||0,u.name=t,u}}function Gx(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var i=e[2];i?(t.cpx1=i[0],t.cpy1=i[1]):(t.cpx1=NaN,t.cpy1=NaN)}var GS=function(t){function e(e,i,n){var r=t.call(this)||this;return r._createLine(e,i,n),r}return M6(e,t),e.prototype._createLine=function(t,e,i){var n,r,o=t.hostModel,a=(n=t.getItemLayout(e),Gx((r=new Gm({name:"line",subPixelOptimize:!0})).shape,n),r);a.shape.percent=0,OQ(a,{shape:{percent:1}},o,e),this.add(a),T_(Gy,function(i){var n=Gb(i,t,e);this.add(n),this[Gv(i)]=Gw(i,t,e)},this),this._updateCommonStl(t,e,i)},e.prototype.updateData=function(t,e,i){var n=t.hostModel,r=this.childOfName("line"),o=t.getItemLayout(e),a={shape:{}};Gx(a.shape,o),OK(r,a,n,e),T_(Gy,function(i){var n=Gw(i,t,e),r=Gv(i);if(this[r]!==n){this.remove(this.childOfName(i));var o=Gb(i,t,e);this.add(o)}this[r]=n},this),this._updateCommonStl(t,e,i)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,e,i){var n=t.hostModel,r=this.childOfName("line"),o=i&&i.emphasisLineStyle,a=i&&i.blurLineStyle,s=i&&i.selectLineStyle,l=i&&i.labelStatesModels,h=i&&i.emphasisDisabled,u=i&&i.focus,c=i&&i.blurScope;if(!i||t.hasItemOption){var d=t.getItemModel(e),p=d.getModel("emphasis");o=p.getModel("lineStyle").getLineStyle(),a=d.getModel(["blur","lineStyle"]).getLineStyle(),s=d.getModel(["select","lineStyle"]).getLineStyle(),h=p.get("disabled"),u=p.get("focus"),c=p.get("blurScope"),l=LL(d)}var f=t.getItemVisual(e,"style"),g=f.stroke;r.useStyle(f),r.style.fill=null,r.style.strokeNoScale=!0,r.ensureState("emphasis").style=o,r.ensureState("blur").style=a,r.ensureState("select").style=s,T_(Gy,function(t){var e=this.childOfName(t);if(e){e.setColor(g),e.style.opacity=f.opacity;for(var i=0;i<Oh.length;i++){var n=Oh[i],o=r.getState(n);if(o){var a=o.style||{},s=e.ensureState(n),l=s.style||(s.style={});null!=a.stroke&&(l[e.__isEmptyBrush?"stroke":"fill"]=a.stroke),null!=a.opacity&&(l.opacity=a.opacity)}}e.markRedraw()}},this);var m=n.getRawValue(e);LP(this,l,{labelDataIndex:e,labelFetcher:{getFormattedLabel:function(e,i){return n.getFormattedLabel(e,i,t.dataType)}},inheritColor:g||"#000",defaultOpacity:f.opacity,defaultText:(null==m?t.getName(e):isFinite(m)?Aq(m):m)+""});var y=this.getTextContent();if(y){var w=l.normal;y.__align=y.style.align,y.__verticalAlign=y.style.verticalAlign,y.__position=w.get("position")||"middle";var b=w.get("distance");Tk(b)||(b=[b,b]),y.__labelDistance=b}this.setTextConfig({position:null,local:!0,inside:!1}),OB(this,u,c,h)},e.prototype.highlight=function(){OA(this)},e.prototype.downplay=function(){Ok(this)},e.prototype.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},e.prototype.setLinePoints=function(t){var e=this.childOfName("line");Gx(e.shape,t),e.dirty()},e.prototype.beforeUpdate=function(){var t=this.childOfName("fromSymbol"),e=this.childOfName("toSymbol"),i=this.getTextContent();if(t||e||i&&!i.ignore){for(var n=1,r=this.parent;r;)r.scaleX&&(n/=r.scaleX),r=r.parent;var o=this.childOfName("line");if(this.__dirty||o.__dirty){var a=o.shape.percent,s=o.pointAt(0),l=o.pointAt(a),h=Ii([],l,s);if(Io(h,h),t&&(t.setPosition(s),C(t,0),t.scaleX=t.scaleY=n*a,t.markRedraw()),e&&(e.setPosition(l),C(e,1),e.scaleX=e.scaleY=n*a,e.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var u=void 0,c=void 0,d=i.__labelDistance,p=d[0]*n,f=d[1]*n,g=a/2,m=o.tangentAt(g),y=[m[1],-m[0]],w=o.pointAt(g);y[1]>0&&(y[0]=-y[0],y[1]=-y[1]);var b=m[0]<0?-1:1;if("start"!==i.__position&&"end"!==i.__position){var x=-Math.atan2(m[1],m[0]);l[0]<s[0]&&(x=Math.PI+x),i.rotation=x}var S=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":S=-f,c="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":S=f,c="top";break;default:S=0,c="middle"}switch(i.__position){case"end":i.x=h[0]*p+l[0],i.y=h[1]*f+l[1],u=h[0]>.8?"left":h[0]<-.8?"right":"center",c=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":i.x=-h[0]*p+s[0],i.y=-h[1]*f+s[1],u=h[0]>.8?"right":h[0]<-.8?"left":"center",c=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=p*b+s[0],i.y=s[1]+S,u=m[0]<0?"right":"left",i.originX=-p*b,i.originY=-S;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=w[0],i.y=w[1]+S,u="center",i.originY=-S;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-p*b+l[0],i.y=l[1]+S,u=m[0]>=0?"right":"left",i.originX=p*b,i.originY=-S}i.scaleX=i.scaleY=n,i.setStyle({verticalAlign:i.__verticalAlign||c,align:i.__align||u})}}}function C(t,e){var i=t.__specifiedRotation;if(null==i){var n=o.tangentAt(e);t.attr("rotation",(1===e?-1:1)*Math.PI/2-Math.atan2(n[1],n[0]))}else t.attr("rotation",i)}},e}(Aj),GC=function(){function t(t){this.group=new Aj,this._LineCtor=t||GS}return t.prototype.updateData=function(t){var e=this;this._progressiveEls=null;var i=this.group,n=this._lineData;this._lineData=t,n||i.removeAll();var r=G_(t);t.diff(n).add(function(i){e._doAdd(t,i,r)}).update(function(i,o){e._doUpdate(n,t,o,i,r)}).remove(function(t){i.remove(n.getItemGraphicEl(t))}).execute()},t.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,i){e.updateLayout(t,i)},this)},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=G_(t),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e){function i(t){t.isGroup||t.animators&&t.animators.length>0||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var n=t.start;n<t.end;n++)if(GT(e.getItemLayout(n))){var r=new this._LineCtor(e,n,this._seriesScope);r.traverse(i),this.group.add(r),e.setItemGraphicEl(n,r),this._progressiveEls.push(r)}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(t){LA(this._progressiveEls||this.group,t)},t.prototype._doAdd=function(t,e,i){if(GT(t.getItemLayout(e))){var n=new this._LineCtor(t,e,i);t.setItemGraphicEl(e,n),this.group.add(n)}},t.prototype._doUpdate=function(t,e,i,n,r){var o=t.getItemGraphicEl(i);if(!GT(e.getItemLayout(n))){this.group.remove(o);return}o?o.updateData(e,n,r):o=new this._LineCtor(e,n,r),e.setItemGraphicEl(n,o),this.group.add(o)},t}();function G_(t){var e=t.hostModel,i=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:i.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:i.get("disabled"),blurScope:i.get("blurScope"),focus:i.get("focus"),labelStatesModels:LL(e)}}function GM(t){return isNaN(t[0])||isNaN(t[1])}function GT(t){return t&&!GM(t[0])&&!GM(t[1])}var GI="\0_ec_interaction_mutex";function GR(t){return t[GI]||(t[GI]={})}FN({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},T5);var GE=function(t){function e(e){var i=t.call(this)||this;i._zr=e;var n=TE(i._mousedownHandler,i),r=TE(i._mousemoveHandler,i),o=TE(i._mouseupHandler,i),a=TE(i._mousewheelHandler,i),s=TE(i._pinchHandler,i);return i.enable=function(t,i){this.disable(),this._opt=Tb(Tm(i)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),(!0===t||"move"===t||"pan"===t)&&(e.on("mousedown",n),e.on("mousemove",r),e.on("mouseup",o)),(!0===t||"scale"===t||"zoom"===t)&&(e.on("mousewheel",a),e.on("pinch",s))},i.disable=function(){e.off("mousedown",n),e.off("mousemove",r),e.off("mouseup",o),e.off("mousewheel",a),e.off("pinch",s)},i}return M6(e,t),e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!IP(t)){for(var e=t.target;e;){if(e.draggable)return;e=e.__hostTarget||e.parent}var i=t.offsetX,n=t.offsetY;this.pointerChecker&&this.pointerChecker(t,i,n)&&(this._x=i,this._y=n,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(!(!this._dragging||!GD("moveOnMouseMove",t,this._opt)||"pinch"===t.gestureEvent||GR(this._zr).globalPan)){var e=t.offsetX,i=t.offsetY,n=this._x,r=this._y;this._x=e,this._y=i,this._opt.preventDefaultMouseMove&&IO(t.event),Gk(this,"pan","moveOnMouseMove",t,{dx:e-n,dy:i-r,oldX:n,oldY:r,newX:e,newY:i,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){IP(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var e=GD("zoomOnMouseWheel",t,this._opt),i=GD("moveOnMouseWheel",t,this._opt),n=t.wheelDelta,r=Math.abs(n),o=t.offsetX,a=t.offsetY;if(0!==n&&(e||i)){if(e){var s=r>3?1.4:r>1?1.2:1.1;GA(this,"zoom","zoomOnMouseWheel",t,{scale:n>0?s:1/s,originX:o,originY:a,isAvailableBehavior:null})}if(i){var l=Math.abs(n);GA(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(n>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:o,originY:a,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){if(!GR(this._zr).globalPan){var e=t.pinchScale>1?1.1:1/1.1;GA(this,"zoom",null,t,{scale:e,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e}(If);function GA(t,e,i,n,r){t.pointerChecker&&t.pointerChecker(n,r.originX,r.originY)&&(IO(n.event),Gk(t,e,i,n,r))}function Gk(t,e,i,n,r){r.isAvailableBehavior=TE(GD,null,i,n),t.trigger(e,r)}function GD(t,e,i){var n=i[t];return!t||n&&(!TO(n)||e.event[n+"Key"])}function GO(t,e,i){var n=t.target;n.x+=e,n.y+=i,n.dirty()}function GP(t,e,i,n){var r=t.target,o=t.zoomLimit,a=t.zoom=t.zoom||1;if(a*=e,o){var s=o.min||0;a=Math.max(Math.min(o.max||1/0,a),s)}var l=a/t.zoom;t.zoom=a,r.x-=(i-r.x)*(l-1),r.y-=(n-r.y)*(l-1),r.scaleX*=l,r.scaleY*=l,r.dirty()}var GL={axisPointer:1,tooltip:1,brush:1};function GN(t,e,i){var n=e.getComponentByElement(t.topTarget),r=n&&n.coordinateSystem;return n&&n!==i&&!GL.hasOwnProperty(n.mainType)&&r&&r.model!==i}var GH=[],GV=[],GB=[],GF=Math.abs;function GW(t,e,i){for(var n,r=t[0],o=t[1],a=t[2],s=1/0,l=i*i,h=.1,u=.1;u<=.9;u+=.1){GH[0]=RT(r[0],o[0],a[0],u),GH[1]=RT(r[1],o[1],a[1],u);var c=GF(Is(GH,e)-l);c<s&&(s=c,n=u)}for(var d=0;d<32;d++){var p=n+h;GV[0]=RT(r[0],o[0],a[0],n),GV[1]=RT(r[1],o[1],a[1],n),GB[0]=RT(r[0],o[0],a[0],p),GB[1]=RT(r[1],o[1],a[1],p);var c=Is(GV,e)-l;if(.01>GF(c))break;var f=Is(GB,e)-l;h/=2,c<0?f>=0?n+=h:n-=h:f>=0?n-=h:n+=h}return n}function Gz(t,e){var i=[],n=[[],[],[]],r=[[],[]],o=[];e/=2,t.eachEdge(function(t,a){var s=t.getLayout(),l=t.getVisual("fromSymbol"),h=t.getVisual("toSymbol");!s.__original&&(s.__original=[T7(s[0]),T7(s[1])],s[2]&&s.__original.push(T7(s[2])));var u=s.__original;if(null!=s[2]){if(T9(n[0],u[0]),T9(n[1],u[2]),T9(n[2],u[1]),l&&"none"!==l){var c=Ge(t.node1),d=GW(n,u[0],c*e);RE(n[0][0],n[1][0],n[2][0],d,i),n[0][0]=i[3],n[1][0]=i[4],RE(n[0][1],n[1][1],n[2][1],d,i),n[0][1]=i[3],n[1][1]=i[4]}if(h&&"none"!==h){var c=Ge(t.node2),d=GW(n,u[1],c*e);RE(n[0][0],n[1][0],n[2][0],d,i),n[1][0]=i[1],n[2][0]=i[2],RE(n[0][1],n[1][1],n[2][1],d,i),n[1][1]=i[1],n[2][1]=i[2]}T9(s[0],n[0]),T9(s[1],n[2]),T9(s[2],n[1])}else{if(T9(r[0],u[0]),T9(r[1],u[1]),Ii(o,r[1],r[0]),Io(o,o),l&&"none"!==l){var c=Ge(t.node1);Ie(r[0],r[0],o,c*e)}if(h&&"none"!==h){var c=Ge(t.node2);Ie(r[1],r[1],o,-c*e)}T9(s[0],r[0]),T9(s[1],r[1])}})}function Gj(t){return"view"===t.type}var GU=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.init=function(t,e){var i=new Up,n=new GC,r=this.group;this._controller=new GE(e.getZr()),this._controllerHost={target:r},r.add(i.group),r.add(n.group),this._symbolDraw=i,this._lineDraw=n,this._firstRender=!0},e.prototype.render=function(t,e,i){var n=this,r=t.coordinateSystem;this._model=t;var o=this._symbolDraw,a=this._lineDraw,s=this.group;if(Gj(r)){var l={x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY};this._firstRender?s.attr(l):OK(s,l,t)}Gz(t.getGraph(),Gt(t));var h=t.getData();o.updateData(h);var u=t.getEdgeData();a.updateData(u),this._updateNodeAndLinkScale(),this._updateController(t,e,i),clearTimeout(this._layoutTimeout);var c=t.forceLayout,d=t.get(["force","layoutAnimation"]);c&&this._startForceLayoutIteration(c,d);var p=t.get("layout");h.graph.eachNode(function(e){var i=e.dataIndex,r=e.getGraphicEl(),o=e.getModel();if(r){r.off("drag").off("dragend");var a=o.get("draggable");a&&r.on("drag",function(o){switch(p){case"force":c.warmUp(),n._layouting||n._startForceLayoutIteration(c,d),c.setFixed(i),h.setItemLayout(i,[r.x,r.y]);break;case"circular":h.setItemLayout(i,[r.x,r.y]),e.setLayout({fixed:!0},!0),Gr(t,"symbolSize",e,[o.offsetX,o.offsetY]),n.updateLayout(t);break;default:h.setItemLayout(i,[r.x,r.y]),U9(t.getGraph(),t),n.updateLayout(t)}}).on("dragend",function(){c&&c.setUnfixed(i)}),r.setDraggable(a,!!o.get("cursor")),"adjacency"===o.get(["emphasis","focus"])&&(On(r).focus=e.getAdjacentDataIndices())}}),h.graph.eachEdge(function(t){var e=t.getGraphicEl(),i=t.getModel().get(["emphasis","focus"]);e&&"adjacency"===i&&(On(e).focus={edge:[t.dataIndex],node:[t.node1.dataIndex,t.node2.dataIndex]})});var f="circular"===t.get("layout")&&t.get(["circular","rotateLabel"]),g=h.getLayout("cx"),m=h.getLayout("cy");h.graph.eachNode(function(t){Ga(t,f,g,m)}),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,e){var i=this;!function n(){t.step(function(t){i.updateLayout(i._model),(i._layouting=!t)&&(e?i._layoutTimeout=setTimeout(n,16):n())})}()},e.prototype._updateController=function(t,e,i){var n=this,r=this._controller,o=this._controllerHost,a=this.group;if(r.setPointerChecker(function(e,n,r){var o=a.getBoundingRect();return o.applyTransform(a.transform),o.contain(n,r)&&!GN(e,i,t)}),!Gj(t.coordinateSystem)){r.disable();return}r.enable(t.get("roam")),o.zoomLimit=t.get("scaleLimit"),o.zoom=t.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",function(e){GO(o,e.dx,e.dy),i.dispatchAction({seriesId:t.id,type:"graphRoam",dx:e.dx,dy:e.dy})}).on("zoom",function(e){GP(o,e.scale,e.originX,e.originY),i.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),n._updateNodeAndLinkScale(),Gz(t.getGraph(),Gt(t)),n._lineDraw.updateLayout(),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,e=t.getData(),i=Gt(t);e.eachItemGraphicEl(function(t,e){t&&t.setSymbolScale(i)})},e.prototype.updateLayout=function(t){Gz(t.getGraph(),Gt(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(VX);function GG(t){return"_EC_"+t}var GY=function(){function t(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(t,e){t=null==t?""+e:""+t;var i=this._nodesMap;if(!i[GG(t)]){var n=new GX(t,e);return n.hostGraph=this,this.nodes.push(n),i[GG(t)]=n,n}},t.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},t.prototype.getNodeById=function(t){return this._nodesMap[GG(t)]},t.prototype.addEdge=function(t,e,i){var n=this._nodesMap,r=this._edgesMap;if(TL(t)&&(t=this.nodes[t]),TL(e)&&(e=this.nodes[e]),t instanceof GX||(t=n[GG(t)]),e instanceof GX||(e=n[GG(e)]),t&&e){var o=t.id+"-"+e.id,a=new G$(t,e,i);return a.hostGraph=this,this._directed&&(t.outEdges.push(a),e.inEdges.push(a)),t.edges.push(a),t!==e&&e.edges.push(a),this.edges.push(a),r[o]=a,a}},t.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},t.prototype.getEdge=function(t,e){t instanceof GX&&(t=t.id),e instanceof GX&&(e=e.id);var i=this._edgesMap;return this._directed?i[t+"-"+e]:i[t+"-"+e]||i[e+"-"+t]},t.prototype.eachNode=function(t,e){for(var i=this.nodes,n=i.length,r=0;r<n;r++)i[r].dataIndex>=0&&t.call(e,i[r],r)},t.prototype.eachEdge=function(t,e){for(var i=this.edges,n=i.length,r=0;r<n;r++)i[r].dataIndex>=0&&i[r].node1.dataIndex>=0&&i[r].node2.dataIndex>=0&&t.call(e,i[r],r)},t.prototype.breadthFirstTraverse=function(t,e,i,n){if(e instanceof GX||(e=this._nodesMap[GG(e)]),e){for(var r="out"===i?"outEdges":"in"===i?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!t.call(n,e,null))for(var a=[e];a.length;)for(var s=a.shift(),l=s[r],o=0;o<l.length;o++){var h=l[o],u=h.node1===s?h.node2:h.node1;if(!u.__visited){if(t.call(n,u,s))return;a.push(u),u.__visited=!0}}}},t.prototype.update=function(){for(var t=this.data,e=this.edgeData,i=this.nodes,n=this.edges,r=0,o=i.length;r<o;r++)i[r].dataIndex=-1;for(var r=0,o=t.count();r<o;r++)i[t.getRawIndex(r)].dataIndex=r;e.filterSelf(function(t){var i=n[e.getRawIndex(t)];return i.node1.dataIndex>=0&&i.node2.dataIndex>=0});for(var r=0,o=n.length;r<o;r++)n[r].dataIndex=-1;for(var r=0,o=e.count();r<o;r++)n[e.getRawIndex(r)].dataIndex=r},t.prototype.clone=function(){for(var e=new t(this._directed),i=this.nodes,n=this.edges,r=0;r<i.length;r++)e.addNode(i[r].id,i[r].dataIndex);for(var r=0;r<n.length;r++){var o=n[r];e.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return e},t}(),GX=function(){function t(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==t?"":t,this.dataIndex=null==e?-1:e}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)},t.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var i=this.edges[e];i.dataIndex<0||(t.edge.push(i.dataIndex),t.node.push(i.node1.dataIndex,i.node2.dataIndex))}return t},t.prototype.getTrajectoryDataIndices=function(){for(var t=TQ(),e=TQ(),i=0;i<this.edges.length;i++){var n=this.edges[i];if(!(n.dataIndex<0)){t.set(n.dataIndex,!0);for(var r=[n.node1],o=[n.node2],a=0;a<r.length;){var s=r[a];a++,e.set(s.dataIndex,!0);for(var l=0;l<s.inEdges.length;l++)t.set(s.inEdges[l].dataIndex,!0),r.push(s.inEdges[l].node1)}for(a=0;a<o.length;){var h=o[a];a++,e.set(h.dataIndex,!0);for(var l=0;l<h.outEdges.length;l++)t.set(h.outEdges[l].dataIndex,!0),o.push(h.outEdges[l].node2)}}}return{edge:t.keys(),node:e.keys()}},t}(),G$=function(){function t(t,e,i){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=null==i?-1:i}return t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var t=TQ(),e=TQ();t.set(this.dataIndex,!0);for(var i=[this.node1],n=[this.node2],r=0;r<i.length;){var o=i[r];r++,e.set(o.dataIndex,!0);for(var a=0;a<o.inEdges.length;a++)t.set(o.inEdges[a].dataIndex,!0),i.push(o.inEdges[a].node1)}for(r=0;r<n.length;){var s=n[r];r++,e.set(s.dataIndex,!0);for(var a=0;a<s.outEdges.length;a++)t.set(s.outEdges[a].dataIndex,!0),n.push(s.outEdges[a].node2)}return{edge:t.keys(),node:e.keys()}},t}();function GZ(t,e){return{getValue:function(i){var n=this[t][e];return n.getStore().get(n.getDimensionIndex(i||"value"),this.dataIndex)},setVisual:function(i,n){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,i,n)},getVisual:function(i){return this[t][e].getItemVisual(this.dataIndex,i)},setLayout:function(i,n){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,i,n)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}TS(GX,GZ("hostGraph","data")),TS(G$,GZ("hostGraph","edgeData"));var Gq=kg();function GK(t,e){if(Gq(this).mainData===this){var i=Tw({},Gq(this).datas);i[this.dataType]=e,G2(e,i,t)}else G5(e,this.dataType,Gq(this).mainData,t);return e}function GQ(t,e){return t.struct&&t.struct.update(),e}function GJ(t,e){return T_(Gq(e).datas,function(i,n){i!==e&&G5(i.cloneShallow(),n,e,t)}),e}function G0(t){var e=Gq(this).mainData;return null==t||null==e?e:Gq(e).datas[t]}function G1(){var t=Gq(this).mainData;return null==t?[{data:t}]:TM(TR(Gq(t).datas),function(e){return{type:e,data:Gq(t).datas[e]}})}function G2(t,e,i){Gq(t).datas={},T_(e,function(e,n){G5(e,n,t,i)})}function G5(t,e,i,n){Gq(i).datas[e]=t,Gq(t).mainData=i,t.dataType=e,n.struct&&(t[n.structAttr]=n.struct,n.struct[n.datasAttr[e]]=t),t.getLinkedData=G0,t.getLinkedDataAll=G1}var G3=function(t){var e=t.mainData,i=t.datas;i||(i={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,G2(e,i,t),T_(i,function(i){T_(e.TRANSFERABLE_METHODS,function(e){i.wrapMethod(e,TA(GK,t))})}),e.wrapMethod("cloneShallow",TA(GJ,t)),T_(e.CHANGABLE_METHODS,function(i){e.wrapMethod(i,TA(GQ,t))}),TY(i[e.dataType]===e)};function G4(t,e,i,n,r){for(var o,a=new GY(n),s=0;s<t.length;s++)a.addNode(TW(t[s].id,t[s].name,s),s);for(var l=[],h=[],u=0,s=0;s<e.length;s++){var c=e[s],d=c.source,p=c.target;a.addEdge(d,p,u)&&(h.push(c),l.push(TW(kc(c.id,null),d+" > "+p)),u++)}var f=i.get("coordinateSystem");if("cartesian2d"===f||"polar"===f)o=zg(t,i);else{var g=Hc.get(f),m=g&&g.dimensions||[];0>Tx(m,"value")&&m.concat(["value"]),(o=new zu(zc(t,{coordDimensions:m,encodeDefine:i.getEncode()}).dimensions,i)).initData(t)}var y=new zu(["value"],i);return y.initData(h,l),r&&r(o,y),G3({mainData:o,struct:a,structAttr:"graph",datas:{node:o,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var G6=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.hasSymbolVisual=!0,i}return M6(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments);var i=this;function n(){return i._categoriesData}this.legendVisualProvider=new UW(n,n),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(e){t.prototype.mergeDefaultAndTheme.apply(this,arguments),ko(e,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,e){var i=t.edges||t.links||[],n=t.data||t.nodes||[],r=this;if(n&&i){U0(this)&&(this.__curvenessList=[],this.__edgeMap={},U1(this));var o=G4(n,i,this,!0,function(t,e){t.wrapMethod("getItemModel",function(t){var e=r._categoriesModels[t.getShallow("category")];return e&&(e.parentModel=t.parentModel,t.parentModel=e),t});var i=L2.prototype.getModel;function n(t,e){var n=i.call(this,t,e);return n.resolveParentPath=o,n}function o(t){if(t&&("label"===t[0]||"label"===t[1])){var e=t.slice();return"label"===t[0]?e[0]="edgeLabel":"label"===t[1]&&(e[1]="edgeLabel"),e}return t}e.wrapMethod("getItemModel",function(t){return t.resolveParentPath=o,t.getModel=n,t})});return T_(o.edges,function(t){!function(t,e,i,n){if(U0(i)){var r=U2(t,e,i),o=i.__edgeMap,a=o[U5(r)];o[r]&&!a?o[r].isForward=!0:a&&o[r]&&(a.isForward=!0,o[r].isForward=!1),o[r]=o[r]||[],o[r].push(n)}}(t.node1,t.node2,this,t.dataIndex)},this),o.data}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,e,i){if("edge"===i){var n=this.getData(),r=this.getDataParams(t,i),o=n.graph.getEdgeByIndex(t),a=n.getName(o.node1.dataIndex),s=n.getName(o.node2.dataIndex),l=[];return null!=a&&l.push(a),null!=s&&l.push(s),VS("nameValue",{name:l.join(" > "),value:r.value,noValue:null==r.value})}return Vk({series:this,dataIndex:t,multipleSeries:e})},e.prototype._updateCategoriesData=function(){var t=TM(this.option.categories||[],function(t){return null!=t.value?t:Tw({value:0},t)}),e=new zu(["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray(function(t){return e.getItemModel(t)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(VL);function G8(t,e){return t.pointToProjected?t.pointToProjected(e):t.pointToData(e)}function G9(t,e,i,n){var r=t.getZoom(),o=t.getCenter(),a=e.zoom,s=t.projectedToPoint?t.projectedToPoint(o):t.dataToPoint(o);if(null!=e.dx&&null!=e.dy&&(s[0]-=e.dx,s[1]-=e.dy,t.setCenter(G8(t,s),n)),null!=a){if(i){var l=i.min||0;a=Math.max(Math.min(r*a,i.max||1/0),l)/r}t.scaleX*=a,t.scaleY*=a;var h=(e.originX-t.x)*(a-1),u=(e.originY-t.y)*(a-1);t.x-=h,t.y-=u,t.updateTransform(),t.setCenter(G8(t,s),n),t.setZoom(a*r)}return{center:t.getCenter(),zoom:t.getZoom()}}var G7={type:"graphRoam",event:"graphRoam",update:"none"},Yt=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=Ti.createCanvas();this.canvas=t}return t.prototype.update=function(t,e,i,n,r,o){var a=this._getBrush(),s=this._getGradient(r,"inRange"),l=this._getGradient(r,"outOfRange"),h=this.pointSize+this.blurSize,u=this.canvas,c=u.getContext("2d"),d=t.length;u.width=e,u.height=i;for(var p=0;p<d;++p){var f=t[p],g=f[0],m=f[1],y=n(f[2]);c.globalAlpha=y,c.drawImage(a,g-h,m-h)}if(!u.width||!u.height)return u;for(var w=c.getImageData(0,0,u.width,u.height),b=w.data,x=0,S=b.length,C=this.minOpacity,_=this.maxOpacity-C;x<S;){var y=b[x+3]/256,M=4*Math.floor(255*y);if(y>0){var T=o(y)?s:l;y>0&&(y=y*_+C),b[x++]=T[M],b[x++]=T[M+1],b[x++]=T[M+2],b[x++]=T[M+3]*y*256}else x+=4}return c.putImageData(w,0,0),u},t.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=Ti.createCanvas()),e=this.pointSize+this.blurSize,i=2*e;t.width=i,t.height=i;var n=t.getContext("2d");return n.clearRect(0,0,i,i),n.shadowOffsetX=i,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-e,e,this.pointSize,0,2*Math.PI,!0),n.closePath(),n.fill(),t},t.prototype._getGradient=function(t,e){for(var i=this._gradientPixels,n=i[e]||(i[e]=new Uint8ClampedArray(1024)),r=[0,0,0,0],o=0,a=0;a<256;a++)t[e](a/255,!0,r),n[o++]=r[0],n[o++]=r[1],n[o++]=r[2],n[o++]=r[3];return n},t}();function Ye(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}var Yi=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i){e.eachComponent("visualMap",function(e){e.eachTargetSeries(function(i){i===t&&(n=e)})}),this._progressiveEls=null,this.group.removeAll();var n,r=t.coordinateSystem;"cartesian2d"===r.type||"calendar"===r.type?this._renderOnCartesianAndCalendar(t,i,0,t.getData().count()):Ye(r)&&this._renderOnGeo(r,t,n,i)},e.prototype.incrementalPrepareRender=function(t,e,i){this.group.removeAll()},e.prototype.incrementalRender=function(t,e,i,n){var r=e.coordinateSystem;r&&(Ye(r)?this.render(e,i,n):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(e,n,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){LA(this._progressiveEls||this.group,t)},e.prototype._renderOnCartesianAndCalendar=function(t,e,i,n,r){var o,a,s,l,h=t.coordinateSystem,u=zC(h,"cartesian2d");if(u){var c=h.getAxis("x"),d=h.getAxis("y");o=c.getBandWidth()+.5,a=d.getBandWidth()+.5,s=c.scale.getExtent(),l=d.scale.getExtent()}for(var p=this.group,f=t.getData(),g=t.getModel(["emphasis","itemStyle"]).getItemStyle(),m=t.getModel(["blur","itemStyle"]).getItemStyle(),y=t.getModel(["select","itemStyle"]).getItemStyle(),w=t.get(["itemStyle","borderRadius"]),b=LL(t),x=t.getModel("emphasis"),S=x.get("focus"),C=x.get("blurScope"),_=x.get("disabled"),M=u?[f.mapDimension("x"),f.mapDimension("y"),f.mapDimension("value")]:[f.mapDimension("time"),f.mapDimension("value")],T=i;T<n;T++){var I=void 0,R=f.getItemVisual(T,"style");if(u){var E=f.get(M[0],T),A=f.get(M[1],T);if(isNaN(f.get(M[2],T))||isNaN(E)||isNaN(A)||E<s[0]||E>s[1]||A<l[0]||A>l[1])continue;var k=h.dataToPoint([E,A]);I=new DK({shape:{x:k[0]-o/2,y:k[1]-a/2,width:o,height:a},style:R})}else{if(isNaN(f.get(M[1],T)))continue;I=new DK({z2:1,shape:h.dataToRect([f.get(M[0],T)]).contentShape,style:R})}if(f.hasItemOption){var D=f.getItemModel(T),O=D.getModel("emphasis");g=O.getModel("itemStyle").getItemStyle(),m=D.getModel(["blur","itemStyle"]).getItemStyle(),y=D.getModel(["select","itemStyle"]).getItemStyle(),w=D.get(["itemStyle","borderRadius"]),S=O.get("focus"),C=O.get("blurScope"),_=O.get("disabled"),b=LL(D)}I.shape.r=w;var P=t.getRawValue(T),L="-";P&&null!=P[2]&&(L=P[2]+""),LP(I,b,{labelFetcher:t,labelDataIndex:T,defaultOpacity:R.opacity,defaultText:L}),I.ensureState("emphasis").style=g,I.ensureState("blur").style=m,I.ensureState("select").style=y,OB(I,S,C,_),I.incremental=r,r&&(I.states.emphasis.hoverLayer=!0),p.add(I),f.setItemGraphicEl(T,I),this._progressiveEls&&this._progressiveEls.push(I)}},e.prototype._renderOnGeo=function(t,e,i,n){var r,o,a,s,l,h,u,c=i.targetVisuals.inRange,d=i.targetVisuals.outOfRange,p=e.getData(),f=this._hmLayer||this._hmLayer||new Yt;f.blurSize=e.get("blurSize"),f.pointSize=e.get("pointSize"),f.minOpacity=e.get("minOpacity"),f.maxOpacity=e.get("maxOpacity");var g=t.getViewRect().clone(),m=t.getRoamTransform();g.applyTransform(m);var y=Math.max(g.x,0),w=Math.max(g.y,0),b=Math.min(g.width+g.x,n.getWidth()),x=Math.min(g.height+g.y,n.getHeight()),S=b-y,C=x-w,_=[p.mapDimension("lng"),p.mapDimension("lat"),p.mapDimension("value")],M=p.mapArray(_,function(e,i,n){var r=t.dataToPoint([e,i]);return r[0]-=y,r[1]-=w,r.push(n),r}),T=i.getExtent(),I="visualMap.continuous"===i.type?(r=i.option.range,o=T[1]-T[0],r=[(r[0]-T[0])/o,(r[1]-T[0])/o],function(t){return t>=r[0]&&t<=r[1]}):(a=i.getPieceList(),s=i.option.selected,l=T[1]-T[0],h=(a=TM(a,function(t){return{interval:[(t.interval[0]-T[0])/l,(t.interval[1]-T[0])/l]}})).length,u=0,function(t){var e;for(e=u;e<h;e++){var i=a[e].interval;if(i[0]<=t&&t<=i[1]){u=e;break}}if(e===h)for(e=u-1;e>=0;e--){var i=a[e].interval;if(i[0]<=t&&t<=i[1]){u=e;break}}return e>=0&&e<h&&s[e]});f.update(M,S,C,c.color.getNormalizer(),{inRange:c.color.getColorMapper(),outOfRange:d.color.getColorMapper()},I);var R=new DU({style:{width:S,height:C,x:y,y:w,image:f.canvas},silent:!0});this.group.add(R)},e.type="heatmap",e}(VX),Yn=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.getInitialData=function(t,e){return zg(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=Hc.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(VL),Yr=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.hasSymbolVisual=!0,i}return M6(e,t),e.prototype.getInitialData=function(t){return zg(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var e=new Aj,i=BW("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);e.add(i),i.setStyle(t.lineStyle);var n=this.getData().getVisual("symbol"),r=this.getData().getVisual("symbolRotate"),o="none"===n?"circle":n,a=.8*t.itemHeight,s=BW(o,(t.itemWidth-a)/2,(t.itemHeight-a)/2,a,a,t.itemStyle.fill);e.add(s),s.setStyle(t.itemStyle);var l="inherit"===t.iconRotate?r:t.iconRotate||0;return s.rotation=l*Math.PI/180,s.setOrigin([t.itemWidth/2,t.itemHeight/2]),o.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),e},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(VL);function Yo(t,e,i){var n,r,o=t.getBaseAxis(),a=t.getOtherAxis(o),s=(n=0,r=a.scale.getExtent(),"start"===i?n=r[0]:"end"===i?n=r[1]:TL(i)&&!isNaN(i)?n=i:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]),n),l=o.dim,h=a.dim,u=e.mapDimension(h),c=e.mapDimension(l),d="x"===h||"radius"===h?1:0,p=TM(t.dimensions,function(t){return e.mapDimension(t)}),f=!1,g=e.getCalculationInfo("stackResultDimension");return WG(e,p[0])&&(f=!0,p[0]=g),WG(e,p[1])&&(f=!0,p[1]=g),{dataDimsForPoint:p,valueStart:s,valueAxisDim:h,baseAxisDim:l,stacked:!!f,valueDim:u,baseDim:c,baseDataOffset:d,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Ya(t,e,i,n){var r=NaN;t.stacked&&(r=i.get(i.getCalculationInfo("stackedOverDimension"),n)),isNaN(r)&&(r=t.valueStart);var o=t.baseDataOffset,a=[];return a[o]=i.get(t.baseDim,n),a[1-o]=r,e.dataToPoint(a)}var Ys=Math.min,Yl=Math.max;function Yh(t,e){return isNaN(t)||isNaN(e)}function Yu(t,e,i,n,r,o,a,s,l){for(var h,u,c,d,p,f,g=i,m=0;m<n;m++){var y=e[2*g],w=e[2*g+1];if(g>=r||g<0)break;if(Yh(y,w)){if(l){g+=o;continue}break}if(g===i)t[o>0?"moveTo":"lineTo"](y,w),c=y,d=w;else{var b=y-h,x=w-u;if(b*b+x*x<.5){g+=o;continue}if(a>0){for(var S=g+o,C=e[2*S],_=e[2*S+1];C===y&&_===w&&m<n;)m++,S+=o,g+=o,C=e[2*S],_=e[2*S+1],y=e[2*g],w=e[2*g+1],b=y-h,x=w-u;var M=m+1;if(l)for(;Yh(C,_)&&M<n;)M++,S+=o,C=e[2*S],_=e[2*S+1];var T=.5,I=0,R=0,E=void 0,A=void 0;if(M>=n||Yh(C,_))p=y,f=w;else{I=C-h,R=_-u;var k=y-h,D=C-y,O=w-u,P=_-w,L=void 0,N=void 0;if("x"===s){L=Math.abs(k),N=Math.abs(D);var H=I>0?1:-1;p=y-H*L*a,f=w,E=y+H*N*a,A=w}else if("y"===s){L=Math.abs(O),N=Math.abs(P);var V=R>0?1:-1;p=y,f=w-V*L*a,E=y,A=w+V*N*a}else L=Math.sqrt(k*k+O*O),p=y-I*a*(1-(T=(N=Math.sqrt(D*D+P*P))/(N+L))),f=w-R*a*(1-T),E=y+I*a*T,A=w+R*a*T,E=Ys(E,Yl(C,y)),A=Ys(A,Yl(_,w)),E=Yl(E,Ys(C,y)),A=Yl(A,Ys(_,w)),I=E-y,R=A-w,p=y-I*L/N,f=w-R*L/N,p=Ys(p,Yl(h,y)),f=Ys(f,Yl(u,w)),p=Yl(p,Ys(h,y)),f=Yl(f,Ys(u,w)),I=y-p,R=w-f,E=y+I*N/L,A=w+R*N/L}t.bezierCurveTo(c,d,p,f,y,w),c=E,d=A}else t.lineTo(y,w)}h=y,u=w,g+=o}return m}var Yc=function(){this.smooth=0,this.smoothConstraint=!0},Yd=function(t){function e(e){var i=t.call(this,e)||this;return i.type="ec-polyline",i}return M6(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Yc},e.prototype.buildPath=function(t,e){var i=e.points,n=0,r=i.length/2;if(e.connectNulls){for(;r>0&&Yh(i[2*r-2],i[2*r-1]);r--);for(;n<r&&Yh(i[2*n],i[2*n+1]);n++);}for(;n<r;)n+=Yu(t,i,n,r,r,1,e.smooth,e.smoothMonotone,e.connectNulls)+1},e.prototype.getPointOn=function(t,e){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i,n,r=this.path.data,o=D_.CMD,a="x"===e,s=[],l=0;l<r.length;){var h=r[l++],u=void 0,c=void 0,d=void 0,p=void 0,f=void 0,g=void 0,m=void 0;switch(h){case o.M:i=r[l++],n=r[l++];break;case o.L:if(u=r[l++],c=r[l++],(m=a?(t-i)/(u-i):(t-n)/(c-n))<=1&&m>=0){var y=a?(c-n)*m+n:(u-i)*m+i;return a?[t,y]:[y,t]}i=u,n=c;break;case o.C:u=r[l++],c=r[l++],d=r[l++],p=r[l++],f=r[l++],g=r[l++];var w=a?RS(i,u,d,f,t,s):RS(n,c,p,g,t,s);if(w>0)for(var b=0;b<w;b++){var x=s[b];if(x<=1&&x>=0){var y=a?Rb(n,c,p,g,x):Rb(i,u,d,f,x);return a?[t,y]:[y,t]}}i=f,n=g}}},e}(DB),Yp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e}(Yc),Yf=function(t){function e(e){var i=t.call(this,e)||this;return i.type="ec-polygon",i}return M6(e,t),e.prototype.getDefaultShape=function(){return new Yp},e.prototype.buildPath=function(t,e){var i=e.points,n=e.stackedOnPoints,r=0,o=i.length/2,a=e.smoothMonotone;if(e.connectNulls){for(;o>0&&Yh(i[2*o-2],i[2*o-1]);o--);for(;r<o&&Yh(i[2*r],i[2*r+1]);r++);}for(;r<o;){var s=Yu(t,i,r,o,o,1,e.smooth,a,e.connectNulls);Yu(t,n,r+s-1,s,o,-1,e.stackedOnSmooth,a,e.connectNulls),r+=s+1,t.closePath()}},e}(DB);function Yg(t,e){if(t.length===e.length){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return;return!0}}function Ym(t){for(var e=1/0,i=1/0,n=-1/0,r=-1/0,o=0;o<t.length;){var a=t[o++],s=t[o++];isNaN(a)||(e=Math.min(a,e),n=Math.max(a,n)),isNaN(s)||(i=Math.min(s,i),r=Math.max(s,r))}return[[e,i],[n,r]]}function Yy(t,e){var i=Ym(t),n=i[0],r=i[1],o=Ym(e),a=o[0],s=o[1];return Math.max(Math.abs(n[0]-a[0]),Math.abs(n[1]-a[1]),Math.abs(r[0]-s[0]),Math.abs(r[1]-s[1]))}function Yv(t){return TL(t)?t:t?.5:0}function Yw(t,e,i,n){var r=e.getBaseAxis(),o="x"===r.dim||"radius"===r.dim?0:1,a=[],s=0,l=[],h=[],u=[],c=[];if(n){for(s=0;s<t.length;s+=2)isNaN(t[s])||isNaN(t[s+1])||c.push(t[s],t[s+1]);t=c}for(s=0;s<t.length-2;s+=2)switch(u[0]=t[s+2],u[1]=t[s+3],h[0]=t[s],h[1]=t[s+1],a.push(h[0],h[1]),i){case"end":l[o]=u[o],l[1-o]=h[1-o],a.push(l[0],l[1]);break;case"middle":var d=(h[o]+u[o])/2,p=[];l[o]=p[o]=d,l[1-o]=h[1-o],p[1-o]=u[1-o],a.push(l[0],l[1]),a.push(p[0],p[1]);break;default:l[o]=h[o],l[1-o]=u[1-o],a.push(l[0],l[1])}return a.push(t[s++],t[s++]),a}function Yb(t,e){return[t[2*e],t[2*e+1]]}function Yx(t){if(t.get(["endLabel","show"]))return!0;for(var e=0;e<Oh.length;e++)if(t.get([Oh[e],"endLabel","show"]))return!0;return!1}function YS(t,e,i,n){if(!zC(e,"cartesian2d"))return zw(e,i,n);var r=n.getModel("endLabel"),o=r.get("valueAnimation"),a=n.getData(),s={lastFrameIndex:0},l=Yx(n)?function(i,n){t._endLabelOnDuring(i,n,a,s,o,r,e)}:null,h=e.getBaseAxis().isHorizontal(),u=zv(e,i,n,function(){var e=t._endLabel;e&&i&&null!=s.originalX&&e.attr({x:s.originalX,y:s.originalY})},l);if(!n.get("clip",!0)){var c=u.shape,d=Math.max(c.width,c.height);h?(c.y-=d,c.height+=2*d):(c.x-=d,c.width+=2*d)}return l&&l(1,u),u}var YC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.init=function(){var t=new Aj,e=new Up;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},e.prototype.render=function(t,e,i){var n,r=this,o=t.coordinateSystem,a=this.group,s=t.getData(),l=t.getModel("lineStyle"),h=t.getModel("areaStyle"),u=s.getLayout("points")||[],c="polar"===o.type,d=this._coordSys,p=this._symbolDraw,f=this._polyline,g=this._polygon,m=this._lineGroup,y=!e.ssr&&t.get("animation"),w=!h.isEmpty(),b=h.get("origin"),x=Yo(o,s,b),S=w&&function(t,e,i){if(!i.valueDim)return[];for(var n=e.count(),r=WZ(2*n),o=0;o<n;o++){var a=Ya(i,t,e,o);r[2*o]=a[0],r[2*o+1]=a[1]}return r}(o,s,x),C=t.get("showSymbol"),_=t.get("connectNulls"),M=C&&!c&&function(t,e,i){var n=t.get("showAllSymbol"),r="auto"===n;if(!n||r){var o=i.getAxesByScale("ordinal")[0];if(o&&!(r&&function(t,e){var i=t.getExtent(),n=Math.abs(i[1]-i[0])/t.scale.count();isNaN(n)&&(n=0);for(var r=e.count(),o=Math.max(1,Math.round(r/5)),a=0;a<r;a+=o)if(1.5*Ul.getSymbolSize(e,a)[t.isHorizontal()?1:0]>n)return!1;return!0}(o,e))){var a=e.mapDimension(o.dim),s={};return T_(o.getViewLabels(),function(t){s[o.scale.getRawOrdinalNumber(t.tickValue)]=1}),function(t){return!s.hasOwnProperty(e.get(a,t))}}}}(t,s,o),T=this._data;T&&T.eachItemGraphicEl(function(t,e){t.__temp&&(a.remove(t),T.setItemGraphicEl(e,null))}),C||p.remove(),a.add(m);var I=!c&&t.get("step");o&&o.getArea&&t.get("clip",!0)&&(null!=(n=o.getArea()).width?(n.x-=.1,n.y-=.1,n.width+=.2,n.height+=.2):n.r0&&(n.r0-=.5,n.r+=.5)),this._clipShapeForSymbol=n;var R=function(t,e,i){var n,r,o=t.getVisual("visualMeta");if(o&&o.length&&t.count()&&"cartesian2d"===e.type){for(var a=o.length-1;a>=0;a--){var s=t.getDimensionInfo(o[a].dimension);if("x"===(n=s&&s.coordDim)||"y"===n){r=o[a];break}}if(r){var l=e.getAxis(n),h=TM(r.stops,function(t){return{coord:l.toGlobalCoord(l.dataToCoord(t.value)),color:t.color}}),u=h.length,c=r.outerColors.slice();u&&h[0].coord>h[u-1].coord&&(h.reverse(),c.reverse());var d=function(t,e){var i,n,r=[],o=t.length;function a(t,e,i){var n=t.coord,r=function(t,e,i){if(e&&e.length&&t>=0&&t<=1){var n,r,o,a,s=t*(e.length-1),l=Math.floor(s),h=R$(e[l]),u=R$(e[Math.ceil(s)]),c=s-l;return R0([RV((n=h[0])+(u[0]-n)*c),RV((r=h[1])+(u[1]-r)*c),RV((o=h[2])+(u[2]-o)*c),RB((a=h[3])+(u[3]-a)*c)],"rgba")}}((i-n)/(e.coord-n),[t.color,e.color]);return{coord:i,color:r}}for(var s=0;s<o;s++){var l=t[s],h=l.coord;if(h<0)i=l;else if(h>e){n?r.push(a(n,l,e)):i&&r.push(a(i,l,0),a(i,l,e));break}else i&&(r.push(a(i,l,0)),i=null),r.push(l),n=l}return r}(h,"x"===n?i.getWidth():i.getHeight()),p=d.length;if(!p&&u)return h[0].coord<0?c[1]?c[1]:h[u-1].color:c[0]?c[0]:h[0].color;var f=d[0].coord-10,g=d[p-1].coord+10,m=g-f;if(m<.001)return"transparent";T_(d,function(t){t.offset=(t.coord-f)/m}),d.push({offset:p?d[p-1].offset:.5,color:c[1]||"transparent"}),d.unshift({offset:p?d[0].offset:.5,color:c[0]||"transparent"});var y=new P3(0,0,0,0,d,!0);return y[n]=f,y[n+"2"]=g,y}}}(s,o,i)||s.getVisual("style")[s.getVisual("drawType")];if(f&&d.type===o.type&&I===this._step){w&&!g?g=this._newPolygon(u,S):g&&!w&&(m.remove(g),g=this._polygon=null),c||this._initOrUpdateEndLabel(t,o,NE(R));var E=m.getClipPath();E?OQ(E,{shape:YS(this,o,!1,t).shape},t):m.setClipPath(YS(this,o,!0,t)),C&&p.updateData(s,{isIgnore:M,clipShape:n,disableAnimation:!0,getSymbolPoint:function(t){return[u[2*t],u[2*t+1]]}}),Yg(this._stackedOnPoints,S)&&Yg(this._points,u)||(y?this._doUpdateAnimation(s,S,o,i,I,b,_):(I&&(u=Yw(u,o,I,_),S&&(S=Yw(S,o,I,_))),f.setShape({points:u}),g&&g.setShape({points:u,stackedOnPoints:S})))}else C&&p.updateData(s,{isIgnore:M,clipShape:n,disableAnimation:!0,getSymbolPoint:function(t){return[u[2*t],u[2*t+1]]}}),y&&this._initSymbolLabelAnimation(s,o,n),I&&(u=Yw(u,o,I,_),S&&(S=Yw(S,o,I,_))),f=this._newPolyline(u),w?g=this._newPolygon(u,S):g&&(m.remove(g),g=this._polygon=null),c||this._initOrUpdateEndLabel(t,o,NE(R)),m.setClipPath(YS(this,o,!0,t));var A=t.getModel("emphasis"),k=A.get("focus"),D=A.get("blurScope"),O=A.get("disabled");f.useStyle(Tb(l.getLineStyle(),{fill:"none",stroke:R,lineJoin:"bevel"})),Oj(f,t,"lineStyle"),f.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"])&&(f.getState("emphasis").style.lineWidth=+f.style.lineWidth+1),On(f).seriesIndex=t.seriesIndex,OB(f,k,D,O);var P=Yv(t.get("smooth")),L=t.get("smoothMonotone");if(f.setShape({smooth:P,smoothMonotone:L,connectNulls:_}),g){var N=s.getCalculationInfo("stackedOnSeries"),H=0;g.useStyle(Tb(h.getAreaStyle(),{fill:R,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),N&&(H=Yv(N.get("smooth"))),g.setShape({smooth:P,stackedOnSmooth:H,smoothMonotone:L,connectNulls:_}),Oj(g,t,"areaStyle"),On(g).seriesIndex=t.seriesIndex,OB(g,k,D,O)}var V=function(t){r._changePolyState(t)};s.eachItemGraphicEl(function(t){t&&(t.onHoverStateChange=V)}),this._polyline.onHoverStateChange=V,this._data=s,this._coordSys=o,this._stackedOnPoints=S,this._points=u,this._step=I,this._valueOrigin=b,t.get("triggerLineEvent")&&(this.packEventData(t,f),g&&this.packEventData(t,g))},e.prototype.packEventData=function(t,e){On(e).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,e,i,n){var r=t.getData(),o=kf(r,n);if(this._changePolyState("emphasis"),o instanceof Array||null==o||!(o>=0))VX.prototype.highlight.call(this,t,e,i,n);else{var a=r.getLayout("points"),s=r.getItemGraphicEl(o);if(!s){var l=a[2*o],h=a[2*o+1];if(isNaN(l)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,h))return;var u=t.get("zlevel")||0,c=t.get("z")||0;(s=new Ul(r,o)).x=l,s.y=h,s.setZ(u,c);var d=s.getSymbolPath().getTextContent();d&&(d.zlevel=u,d.z=c,d.z2=this._polyline.z2+1),s.__temp=!0,r.setItemGraphicEl(o,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}},e.prototype.downplay=function(t,e,i,n){var r=t.getData(),o=kf(r,n);if(this._changePolyState("normal"),null!=o&&o>=0){var a=r.getItemGraphicEl(o);a&&(a.__temp?(r.setItemGraphicEl(o,null),this.group.remove(a)):a.downplay())}else VX.prototype.downplay.call(this,t,e,i,n)},e.prototype._changePolyState=function(t){var e=this._polygon;OM(this._polyline,t),e&&OM(e,t)},e.prototype._newPolyline=function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new Yd({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(e),this._polyline=e,e},e.prototype._newPolygon=function(t,e){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Yf({shape:{points:t,stackedOnPoints:e},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(t,e,i){var n,r,o=e.getBaseAxis(),a=o.inverse;"cartesian2d"===e.type?(n=o.isHorizontal(),r=!1):"polar"===e.type&&(n="angle"===o.dim,r=!0);var s=t.hostModel,l=s.get("animationDuration");TD(l)&&(l=l(null));var h=s.get("animationDelay")||0,u=TD(h)?h(null):h;t.eachItemGraphicEl(function(t,o){if(t){var s=[t.x,t.y],c=void 0,d=void 0,p=void 0;if(i){if(r){var f=e.pointToCoord(s);n?(c=i.startAngle,d=i.endAngle,p=-f[1]/180*Math.PI):(c=i.r0,d=i.r,p=f[0])}else n?(c=i.x,d=i.x+i.width,p=t.x):(c=i.y+i.height,d=i.y,p=t.y)}var g=d===c?0:(p-c)/(d-c);a&&(g=1-g);var m=TD(h)?h(o):l*g+u,y=t.getSymbolPath(),w=y.getTextContent();t.attr({scaleX:0,scaleY:0}),t.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:m}),w&&w.animateFrom({style:{opacity:0}},{duration:300,delay:m}),y.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,e,i){var n=t.getModel("endLabel");if(Yx(t)){var r,o,a,s=t.getData(),l=this._polyline,h=s.getLayout("points");if(!h){l.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||((u=this._endLabel=new D0({z2:200})).ignoreClip=!0,l.setTextContent(this._endLabel),l.disableLabelAnimation=!0);var c=function(t){for(var e,i,n=t.length/2;n>0&&(e=t[2*n-2],i=t[2*n-1],isNaN(e)||isNaN(i));n--);return n-1}(h);c>=0&&(LP(l,LL(t,"endLabel"),{inheritColor:i,labelFetcher:t,labelDataIndex:c,defaultText:function(t,e,i){return null!=i?zM(s,i):z_(s,t)},enableTextSetter:!0},(o=(r=e.getBaseAxis()).isHorizontal(),a=r.inverse,{normal:{align:n.get("align")||(o?a?"right":"left":"center"),verticalAlign:n.get("verticalAlign")||(o?"middle":a?"top":"bottom")}})),l.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,e,i,n,r,o,a){var s=this._endLabel,l=this._polyline;if(s){t<1&&null==n.originalX&&(n.originalX=s.x,n.originalY=s.y);var h=i.getLayout("points"),u=i.hostModel,c=u.get("connectNulls"),d=o.get("precision"),p=o.get("distance")||0,f=a.getBaseAxis(),g=f.isHorizontal(),m=f.inverse,y=e.shape,w=m?g?y.x:y.y+y.height:g?y.x+y.width:y.y,b=(g?p:0)*(m?-1:1),x=(g?0:-p)*(m?-1:1),S=g?"x":"y",C=function(t,e,i){for(var n,r,o=t.length/2,a="x"===i?0:1,s=0,l=-1,h=0;h<o;h++)if(!(isNaN(r=t[2*h+a])||isNaN(t[2*h+1-a]))){if(0===h){n=r;continue}if(n<=e&&r>=e||n>=e&&r<=e){l=h;break}s=h,n=r}return{range:[s,l],t:(e-n)/(r-n)}}(h,w,S),_=C.range,M=_[1]-_[0],T=void 0;if(M>=1){if(M>1&&!c){var I=Yb(h,_[0]);s.attr({x:I[0]+b,y:I[1]+x}),r&&(T=u.getRawValue(_[0]))}else{var I=l.getPointOn(w,S);I&&s.attr({x:I[0]+b,y:I[1]+x});var R=u.getRawValue(_[0]),E=u.getRawValue(_[1]);r&&(T=k_(i,d,R,E,C.t))}n.lastFrameIndex=_[0]}else{var A=1===t||n.lastFrameIndex>0?_[0]:0,I=Yb(h,A);r&&(T=u.getRawValue(A)),s.attr({x:I[0]+b,y:I[1]+x})}if(r){var k=Lj(s);"function"==typeof k.setLabelText&&k.setLabelText(T)}}},e.prototype._doUpdateAnimation=function(t,e,i,n,r,o,a){var s=this._polyline,l=this._polygon,h=t.hostModel,u=function(t,e,i,n,r,o,a,s){for(var l,h=(l=[],e.diff(t).add(function(t){l.push({cmd:"+",idx:t})}).update(function(t,e){l.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){l.push({cmd:"-",idx:t})}).execute(),l),u=[],c=[],d=[],p=[],f=[],g=[],m=[],y=Yo(r,e,a),w=t.getLayout("points")||[],b=e.getLayout("points")||[],x=0;x<h.length;x++){var S=h[x],C=!0,_=void 0,M=void 0;switch(S.cmd){case"=":_=2*S.idx,M=2*S.idx1;var T=w[_],I=w[_+1],R=b[M],E=b[M+1];(isNaN(T)||isNaN(I))&&(T=R,I=E),u.push(T,I),c.push(R,E),d.push(i[_],i[_+1]),p.push(n[M],n[M+1]),m.push(e.getRawIndex(S.idx1));break;case"+":var A=S.idx,k=y.dataDimsForPoint,D=r.dataToPoint([e.get(k[0],A),e.get(k[1],A)]);M=2*A,u.push(D[0],D[1]),c.push(b[M],b[M+1]);var O=Ya(y,r,e,A);d.push(O[0],O[1]),p.push(n[M],n[M+1]),m.push(e.getRawIndex(A));break;case"-":C=!1}C&&(f.push(S),g.push(g.length))}g.sort(function(t,e){return m[t]-m[e]});for(var P=u.length,L=WZ(P),N=WZ(P),H=WZ(P),V=WZ(P),B=[],x=0;x<g.length;x++){var F=g[x],W=2*x,z=2*F;L[W]=u[z],L[W+1]=u[z+1],N[W]=c[z],N[W+1]=c[z+1],H[W]=d[z],H[W+1]=d[z+1],V[W]=p[z],V[W+1]=p[z+1],B[x]=f[F]}return{current:L,next:N,stackedOnCurrent:H,stackedOnNext:V,status:B}}(this._data,t,this._stackedOnPoints,e,this._coordSys,0,this._valueOrigin,0),c=u.current,d=u.stackedOnCurrent,p=u.next,f=u.stackedOnNext;if(r&&(c=Yw(u.current,i,r,a),d=Yw(u.stackedOnCurrent,i,r,a),p=Yw(u.next,i,r,a),f=Yw(u.stackedOnNext,i,r,a)),Yy(c,p)>3e3||l&&Yy(d,f)>3e3){s.stopAnimation(),s.setShape({points:p}),l&&(l.stopAnimation(),l.setShape({points:p,stackedOnPoints:f}));return}s.shape.__points=u.current,s.shape.points=c;var g={shape:{points:p}};u.current!==c&&(g.shape.__points=u.next),s.stopAnimation(),OK(s,g,h),l&&(l.setShape({points:c,stackedOnPoints:d}),l.stopAnimation(),OK(l,{shape:{stackedOnPoints:f}},h),s.shape.points!==l.shape.points&&(l.shape.points=s.shape.points));for(var m=[],y=u.status,w=0;w<y.length;w++)if("="===y[w].cmd){var b=t.getItemGraphicEl(y[w].idx1);b&&m.push({el:b,ptIdx:w})}s.animators&&s.animators.length&&s.animators[0].during(function(){l&&l.dirtyShape();for(var t=s.shape.__points,e=0;e<m.length;e++){var i=m[e].el,n=2*m[e].ptIdx;i.x=t[n],i.y=t[n+1],i.markRedraw()}})},e.prototype.remove=function(t){var e=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(t,n){t.__temp&&(e.remove(t),i.setItemGraphicEl(n,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(VX),Y_=function(t){function e(e,i,n){var r=t.call(this)||this;return r.add(r.createLine(e,i,n)),r._updateEffectSymbol(e,i),r}return M6(e,t),e.prototype.createLine=function(t,e,i){return new GS(t,e,i)},e.prototype._updateEffectSymbol=function(t,e){var i=t.getItemModel(e).getModel("effect"),n=i.get("symbolSize"),r=i.get("symbol");Tk(n)||(n=[n,n]);var o=t.getItemVisual(e,"style"),a=i.get("color")||o&&o.stroke,s=this.childAt(1);this._symbolType!==r&&(this.remove(s),(s=BW(r,-.5,-.5,1,1,a)).z2=100,s.culling=!0,this.add(s)),s&&(s.setStyle("shadowColor",a),s.setStyle(i.getItemStyle(["color"])),s.scaleX=n[0],s.scaleY=n[1],s.setColor(a),this._symbolType=r,this._symbolScale=n,this._updateEffectAnimation(t,i,e))},e.prototype._updateEffectAnimation=function(t,e,i){var n=this.childAt(1);if(n){var r=t.getItemLayout(i),o=1e3*e.get("period"),a=e.get("loop"),s=e.get("roundTrip"),l=e.get("constantSpeed"),h=TW(e.get("delay"),function(e){return e/t.count()*o/3});if(n.ignore=!0,this._updateAnimationPoints(n,r),l>0&&(o=this._getLineLength(n)/l*1e3),o!==this._period||a!==this._loop||s!==this._roundTrip){n.stopAnimation();var u=void 0;u=TD(h)?h(i):h,n.__t>0&&(u=-o*n.__t),this._animateSymbol(n,o,u,a,s)}this._period=o,this._loop=a,this._roundTrip=s}},e.prototype._animateSymbol=function(t,e,i,n,r){if(e>0){t.__t=0;var o=this,a=t.animate("",n).when(r?2*e:e,{__t:r?2:1}).delay(i).during(function(){o._updateSymbolPosition(t)});n||a.done(function(){o.remove(t)}),a.start()}},e.prototype._getLineLength=function(t){return Ia(t.__p1,t.__cp1)+Ia(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},e.prototype.updateData=function(t,e,i){this.childAt(0).updateData(t,e,i),this._updateEffectSymbol(t,e)},e.prototype._updateSymbolPosition=function(t){var e=t.__p1,i=t.__p2,n=t.__cp1,r=t.__t<1?t.__t:2-t.__t,o=[t.x,t.y],a=o.slice();o[0]=RT(e[0],n[0],i[0],r),o[1]=RT(e[1],n[1],i[1],r);var s=t.__t<1?RI(e[0],n[0],i[0],r):RI(i[0],n[0],e[0],1-r),l=t.__t<1?RI(e[1],n[1],i[1],r):RI(i[1],n[1],e[1],1-r);t.rotation=-Math.atan2(l,s)-Math.PI/2,("line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)&&(void 0!==t.__lastT&&t.__lastT<t.__t?(t.scaleY=1.05*Ia(a,o),1===r&&(o[0]=a[0]+(o[0]-a[0])/2,o[1]=a[1]+(o[1]-a[1])/2)):1===t.__lastT?t.scaleY=2*Ia(e,o):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=o[0],t.y=o[1]},e.prototype.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var i=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,i,e)},e}(Aj),YM=function(t){function e(e,i,n){var r=t.call(this)||this;return r._createPolyline(e,i,n),r}return M6(e,t),e.prototype._createPolyline=function(t,e,i){var n=new Pj({shape:{points:t.getItemLayout(e)}});this.add(n),this._updateCommonStl(t,e,i)},e.prototype.updateData=function(t,e,i){var n=t.hostModel;OK(this.childAt(0),{shape:{points:t.getItemLayout(e)}},n,e),this._updateCommonStl(t,e,i)},e.prototype._updateCommonStl=function(t,e,i){var n=this.childAt(0),r=t.getItemModel(e),o=i&&i.emphasisLineStyle,a=i&&i.focus,s=i&&i.blurScope,l=i&&i.emphasisDisabled;if(!i||t.hasItemOption){var h=r.getModel("emphasis");o=h.getModel("lineStyle").getLineStyle(),l=h.get("disabled"),a=h.get("focus"),s=h.get("blurScope")}n.useStyle(t.getItemVisual(e,"style")),n.style.fill=null,n.style.strokeNoScale=!0,n.ensureState("emphasis").style=o,OB(this,a,s,l)},e.prototype.updateLayout=function(t,e){this.childAt(0).setShape("points",t.getItemLayout(e))},e}(Aj),YT=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return M6(e,t),e.prototype.createLine=function(t,e,i){return new YM(t,e,i)},e.prototype._updateAnimationPoints=function(t,e){this._points=e;for(var i=[0],n=0,r=1;r<e.length;r++)n+=Ia(e[r-1],e[r]),i.push(n);if(0===n){this._length=0;return}for(var r=0;r<i.length;r++)i[r]/=n;this._offsets=i,this._length=n},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var e,i=t.__t<1?t.__t:2-t.__t,n=this._points,r=this._offsets,o=n.length;if(r){var a=this._lastFrame;if(i<this._lastFramePercent){for(e=Math.min(a+1,o-1);e>=0&&!(r[e]<=i);e--);e=Math.min(e,o-2)}else{for(e=a;e<o&&!(r[e]>i);e++);e=Math.min(e-1,o-2)}var s=(i-r[e])/(r[e+1]-r[e]),l=n[e],h=n[e+1];t.x=l[0]*(1-s)+s*h[0],t.y=l[1]*(1-s)+s*h[1];var u=t.__t<1?h[0]-l[0]:l[0]-h[0],c=t.__t<1?h[1]-l[1]:l[1]-h[1];t.rotation=-Math.atan2(c,u)-Math.PI/2,this._lastFrame=e,this._lastFramePercent=i,t.ignore=!1}},e}(Y_),YI=function(){this.polyline=!1,this.curveness=0,this.segs=[]},YR=function(t){function e(e){var i=t.call(this,e)||this;return i._off=0,i.hoverDataIdx=-1,i}return M6(e,t),e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new YI},e.prototype.buildPath=function(t,e){var i,n=e.segs,r=e.curveness;if(e.polyline)for(i=this._off;i<n.length;){var o=n[i++];if(o>0){t.moveTo(n[i++],n[i++]);for(var a=1;a<o;a++)t.lineTo(n[i++],n[i++])}}else for(i=this._off;i<n.length;){var s=n[i++],l=n[i++],h=n[i++],u=n[i++];if(t.moveTo(s,l),r>0){var c=(s+h)/2-(l-u)*r,d=(l+u)/2-(h-s)*r;t.quadraticCurveTo(c,d,h,u)}else t.lineTo(h,u)}this.incremental&&(this._off=i,this.notClear=!0)},e.prototype.findDataIndex=function(t,e){var i=this.shape,n=i.segs,r=i.curveness,o=this.style.lineWidth;if(i.polyline)for(var a=0,s=0;s<n.length;){var l=n[s++];if(l>0)for(var h=n[s++],u=n[s++],c=1;c<l;c++){var d=n[s++],p=n[s++];if(DM(h,u,d,p,o,t,e))return a}a++}else for(var a=0,s=0;s<n.length;){var h=n[s++],u=n[s++],d=n[s++],p=n[s++];if(r>0){var f=(h+d)/2-(u-p)*r,g=(u+p)/2-(d-h)*r;if(DT(h,u,f,g,d,p,o,t,e))return a}else if(DM(h,u,d,p,o,t,e))return a;a++}return -1},e.prototype.contain=function(t,e){var i=this.transformCoordToLocal(t,e),n=this.getBoundingRect();return(t=i[0],e=i[1],n.contain(t,e))?(this.hoverDataIdx=this.findDataIndex(t,e))>=0:(this.hoverDataIdx=-1,!1)},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var e=this.shape.segs,i=1/0,n=1/0,r=-1/0,o=-1/0,a=0;a<e.length;){var s=e[a++],l=e[a++];i=Math.min(s,i),r=Math.max(s,r),n=Math.min(l,n),o=Math.max(l,o)}t=this._rect=new I1(i,n,r,o)}return t},e}(DB),YE=function(){function t(){this.group=new Aj}return t.prototype.updateData=function(t){this._clear();var e=this._create();e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t)},t.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},t.prototype.incrementalUpdate=function(t,e){var i=this._newAdded[0],n=e.getLayout("linesPoints"),r=i&&i.shape.segs;if(r&&r.length<2e4){var o=r.length,a=new Float32Array(o+n.length);a.set(r),a.set(n,o),i.setShape({segs:a})}else{this._newAdded=[];var s=this._create();s.incremental=!0,s.setShape({segs:n}),this._setCommon(s,e),s.__startIndex=t.start}},t.prototype.remove=function(){this._clear()},t.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},t.prototype._create=function(){var t=new YR({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},t.prototype._setCommon=function(t,e,i){var n=e.hostModel;t.setShape({polyline:n.get("polyline"),curveness:n.get(["lineStyle","curveness"])}),t.useStyle(n.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var r=e.getVisual("style");r&&r.stroke&&t.setStyle("stroke",r.stroke),t.setStyle("fill",null);var o=On(t);o.seriesIndex=n.seriesIndex,t.on("mousemove",function(e){o.dataIndex=null;var i=t.hoverDataIdx;i>0&&(o.dataIndex=i+t.__startIndex)})},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),YA={seriesType:"lines",plan:VU(),reset:function(t){var e=t.coordinateSystem;if(e){var i=t.get("polyline"),n=t.pipelineContext.large;return{progress:function(r,o){var a=[];if(n){var s=void 0,l=r.end-r.start;if(i){for(var h=0,u=r.start;u<r.end;u++)h+=t.getLineCoordsCount(u);s=new Float32Array(l+2*h)}else s=new Float32Array(4*l);for(var c=0,d=[],u=r.start;u<r.end;u++){var p=t.getLineCoords(u,a);i&&(s[c++]=p);for(var f=0;f<p;f++)d=e.dataToPoint(a[f],!1,d),s[c++]=d[0],s[c++]=d[1]}o.setLayout("linesPoints",s)}else for(var u=r.start;u<r.end;u++){var g=o.getItemModel(u),p=t.getLineCoords(u,a),m=[];if(i)for(var y=0;y<p;y++)m.push(e.dataToPoint(a[y]));else{m[0]=e.dataToPoint(a[0]),m[1]=e.dataToPoint(a[1]);var w=g.get(["lineStyle","curveness"]);+w&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*w,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*w])}o.setItemLayout(u,m)}}}}}},Yk=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i){var n=t.getData(),r=this._updateLineDraw(n,t),o=t.get("zlevel"),a=t.get(["effect","trailLength"]),s=i.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(o).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&a>0&&!l&&s.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(a/10+.9,1),0)}),r.updateData(n);var h=t.get("clip",!0)&&zb(t.coordinateSystem,!1,t);h?this.group.setClipPath(h):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,e,i){var n=t.getData();this._updateLineDraw(n,t).incrementalPrepareUpdate(n),this._clearLayer(i),this._finished=!1},e.prototype.incrementalRender=function(t,e,i){this._lineDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,e,i){var n=t.getData(),r=t.pipelineContext;if(!this._finished||r.large||r.progressiveRender)return{update:!0};var o=YA.reset(t,e,i);o.progress&&o.progress({start:0,end:n.count(),count:n.count()},n),this._lineDraw.updateLayout(),this._clearLayer(i)},e.prototype._updateLineDraw=function(t,e){var i=this._lineDraw,n=this._showEffect(e),r=!!e.get("polyline"),o=e.pipelineContext.large;return i&&n===this._hasEffet&&r===this._isPolyline&&o===this._isLargeDraw||(i&&i.remove(),i=this._lineDraw=o?new YE:new GC(r?n?YT:YM:n?Y_:GS),this._hasEffet=n,this._isPolyline=r,this._isLargeDraw=o),this.group.add(i.group),i},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var e=t.getZr();"svg"!==e.painter.getType()&&null!=this._lastZlevel&&e.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,e){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(e)},e.prototype.dispose=function(t,e){this.remove(t,e)},e.type="lines",e}(VX),YD="undefined"==typeof Uint32Array?Array:Uint32Array,YO="undefined"==typeof Float64Array?Array:Float64Array;function YP(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=TM(e,function(t){var e={coords:[t[0].coord,t[1].coord]};return t[0].name&&(e.fromName=t[0].name),t[1].name&&(e.toName=t[1].name),Tv([e,t[0],t[1]])}))}var YL=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.visualStyleAccessPath="lineStyle",i.visualDrawType="stroke",i}return M6(e,t),e.prototype.init=function(e){e.data=e.data||[],YP(e);var i=this._processFlatCoordsArray(e.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(e.data=new Float32Array(i.count)),t.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(e){if(YP(e),e.data){var i=this._processFlatCoordsArray(e.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(e.data=new Float32Array(i.count))}t.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=TJ(this._flatCoords,e.flatCoords),this._flatCoordsOffset=TJ(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var e=this.getData().getItemModel(t);return e.option instanceof Array?e.option:e.getShallow("coords")},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,e){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[2*t],n=this._flatCoordsOffset[2*t+1],r=0;r<n;r++)e[r]=e[r]||[],e[r][0]=this._flatCoords[i+2*r],e[r][1]=this._flatCoords[i+2*r+1];return n}for(var o=this._getCoordsFromItemModel(t),r=0;r<o.length;r++)e[r]=e[r]||[],e[r][0]=o[r][0],e[r][1]=o[r][1];return o.length},e.prototype._processFlatCoordsArray=function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),TL(t[0])){for(var i=t.length,n=new YD(i),r=new YO(i),o=0,a=0,s=0,l=0;l<i;){s++;var h=t[l++];n[a++]=o+e,n[a++]=h;for(var u=0;u<h;u++){var c=t[l++],d=t[l++];r[o++]=c,r[o++]=d}}return{flatCoordsOffset:new Uint32Array(n.buffer,0,a),flatCoords:r,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,e){var i=new zu(["value"],this);return i.hasItemOption=!1,i.initData(t.data,[],function(t,e,n,r){if(t instanceof Array)return NaN;i.hasItemOption=!0;var o=t.value;if(null!=o)return o instanceof Array?o[r]:o}),i},e.prototype.formatTooltip=function(t,e,i){var n=this.getData().getItemModel(t),r=n.get("name");if(r)return r;var o=n.get("fromName"),a=n.get("toName"),s=[];return null!=o&&s.push(o),null!=a&&s.push(a),VS("nameValue",{name:s.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),e=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&e>0?e+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(VL);function YN(t){return t instanceof Array||(t=[t,t]),t}var YH={seriesType:"lines",reset:function(t){var e=YN(t.get("symbol")),i=YN(t.get("symbolSize")),n=t.getData();return n.setVisual("fromSymbol",e&&e[0]),n.setVisual("toSymbol",e&&e[1]),n.setVisual("fromSymbolSize",i&&i[0]),n.setVisual("toSymbolSize",i&&i[1]),{dataEach:n.hasItemOption?function(t,e){var i=t.getItemModel(e),n=YN(i.getShallow("symbol",!0)),r=YN(i.getShallow("symbolSize",!0));n[0]&&t.setItemVisual(e,"fromSymbol",n[0]),n[1]&&t.setItemVisual(e,"toSymbol",n[1]),r[0]&&t.setItemVisual(e,"fromSymbolSize",r[0]),r[1]&&t.setItemVisual(e,"toSymbolSize",r[1])}:null}}};function YV(t){TO(t)&&(t=new DOMParser().parseFromString(t,"text/xml"));var e=t;for(9===e.nodeType&&(e=e.firstChild);"svg"!==e.nodeName.toLowerCase()||1!==e.nodeType;)e=e.nextSibling;return e}var YB={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},YF=TR(YB),YW={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Yz=TR(YW),Yj=function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(t,e){e=e||{};var i,n,r=YV(t);this._defsUsePending=[];var o=new Aj;this._root=o;var a=[],s=r.getAttribute("viewBox")||"",l=parseFloat(r.getAttribute("width")||e.width),h=parseFloat(r.getAttribute("height")||e.height);isNaN(l)&&(l=null),isNaN(h)&&(h=null),YZ(r,o,null,!0,!1);for(var u=r.firstChild;u;)this._parseNode(u,o,a,null,!1,!1),u=u.nextSibling;if(function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n[0].style[n[1]]=t[n[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],s){var c=YJ(s);c.length>=4&&(i={x:parseFloat(c[0]||0),y:parseFloat(c[1]||0),width:parseFloat(c[2]),height:parseFloat(c[3])})}if(i&&null!=l&&null!=h&&(n=Y3(i,{x:0,y:0,width:l,height:h}),!e.ignoreViewBox)){var d=o;(o=new Aj).add(d),d.scaleX=d.scaleY=n.scale,d.x=n.x,d.y=n.y}return e.ignoreRootClip||null==l||null==h||o.setClipPath(new DK({shape:{x:0,y:0,width:l,height:h}})),{root:o,width:l,height:h,viewBoxRect:i,viewBoxTransform:n,named:a}},t.prototype._parseNode=function(t,e,i,n,r,o){var a,s=t.nodeName.toLowerCase(),l=n;if("defs"===s&&(r=!0),"text"===s&&(o=!0),"defs"===s||"switch"===s)a=e;else{if(!r){var h=t0[s];if(h&&T2(t0,s)){a=h.call(this,t,e);var u=t.getAttribute("name");if(u){var c={name:u,namedFrom:null,svgNodeTagLower:s,el:a};i.push(c),"g"===s&&(l=c)}else n&&i.push({name:n.name,namedFrom:n,svgNodeTagLower:s,el:a});e.add(a)}}var d=YU[s];if(d&&T2(YU,s)){var p=d.call(this,t),f=t.getAttribute("id");f&&(this._defs[f]=p)}}if(a&&a.isGroup)for(var g=t.firstChild;g;)1===g.nodeType?this._parseNode(g,a,i,l,r,o):3===g.nodeType&&o&&this._parseText(g,a),g=g.nextSibling},t.prototype._parseText=function(t,e){var i=new DW({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});YX(e,i),YZ(t,i,this._defsUsePending,!1,!1),function(t,e){var i=e.__selfStyle;if(i){var n=i.textBaseline,r=n;n&&"auto"!==n?"baseline"===n?r="alphabetic":"before-edge"===n||"text-before-edge"===n?r="top":"after-edge"===n||"text-after-edge"===n?r="bottom":("central"===n||"mathematical"===n)&&(r="middle"):r="alphabetic",t.style.textBaseline=r}var o=e.__inheritedStyle;if(o){var a=o.textAlign,s=a;a&&("middle"===a&&(s="center"),t.style.textAlign=s)}}(i,e);var n=i.style,r=n.fontSize;r&&r<9&&(n.fontSize=9,i.scaleX*=r/9,i.scaleY*=r/9);var o=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=o;var a=i.getBoundingRect();return this._textX+=a.width,e.add(i),i},t.internalField=void(t0={g:function(t,e){var i=new Aj;return YX(e,i),YZ(t,i,this._defsUsePending,!1,!1),i},rect:function(t,e){var i=new DK;return YX(e,i),YZ(t,i,this._defsUsePending,!1,!1),i.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),i.silent=!0,i},circle:function(t,e){var i=new Pm;return YX(e,i),YZ(t,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),i.silent=!0,i},line:function(t,e){var i=new PX;return YX(e,i),YZ(t,i,this._defsUsePending,!1,!1),i.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),i.silent=!0,i},ellipse:function(t,e){var i=new Pw;return YX(e,i),YZ(t,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),i.silent=!0,i},polygon:function(t,e){var i,n=t.getAttribute("points");n&&(i=Y$(n));var r=new PF({shape:{points:i||[]},silent:!0});return YX(e,r),YZ(t,r,this._defsUsePending,!1,!1),r},polyline:function(t,e){var i,n=t.getAttribute("points");n&&(i=Y$(n));var r=new Pj({shape:{points:i||[]},silent:!0});return YX(e,r),YZ(t,r,this._defsUsePending,!1,!1),r},image:function(t,e){var i=new DU;return YX(e,i),YZ(t,i,this._defsUsePending,!1,!1),i.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),i.silent=!0,i},text:function(t,e){var i=t.getAttribute("x")||"0",n=t.getAttribute("y")||"0",r=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0";this._textX=parseFloat(i)+parseFloat(r),this._textY=parseFloat(n)+parseFloat(o);var a=new Aj;return YX(e,a),YZ(t,a,this._defsUsePending,!1,!0),a},tspan:function(t,e){var i=t.getAttribute("x"),n=t.getAttribute("y");null!=i&&(this._textX=parseFloat(i)),null!=n&&(this._textY=parseFloat(n));var r=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0",a=new Aj;return YX(e,a),YZ(t,a,this._defsUsePending,!1,!0),this._textX+=parseFloat(r),this._textY+=parseFloat(o),a},path:function(t,e){var i=new Pu(Pd(t.getAttribute("d")||"",void 0));return YX(e,i),YZ(t,i,this._defsUsePending,!1,!1),i.silent=!0,i}}),t}(),YU={lineargradient:function(t){var e=new P3(parseInt(t.getAttribute("x1")||"0",10),parseInt(t.getAttribute("y1")||"0",10),parseInt(t.getAttribute("x2")||"10",10),parseInt(t.getAttribute("y2")||"0",10));return YG(t,e),YY(t,e),e},radialgradient:function(t){var e=new P4(parseInt(t.getAttribute("cx")||"0",10),parseInt(t.getAttribute("cy")||"0",10),parseInt(t.getAttribute("r")||"0",10));return YG(t,e),YY(t,e),e}};function YG(t,e){"userSpaceOnUse"===t.getAttribute("gradientUnits")&&(e.global=!0)}function YY(t,e){for(var i=t.firstChild;i;){if(1===i.nodeType&&"stop"===i.nodeName.toLocaleLowerCase()){var n=i.getAttribute("offset"),r=void 0;r=n&&n.indexOf("%")>0?parseInt(n,10)/100:n?parseFloat(n):0;var o={};Y5(i,o,o);var a=o.stopColor||i.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:r,color:a})}i=i.nextSibling}}function YX(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),Tb(e.__inheritedStyle,t.__inheritedStyle))}function Y$(t){for(var e=YJ(t),i=[],n=0;n<e.length;n+=2){var r=parseFloat(e[n]),o=parseFloat(e[n+1]);i.push([r,o])}return i}function YZ(t,e,i,n,r){var o=e.__inheritedStyle=e.__inheritedStyle||{},a={};1!==t.nodeType||(function(t,e){var i=t.getAttribute("transform");if(i){i=i.replace(/,/g," ");var n=[],r=null;i.replace(Y0,function(t,e,i){return n.push(e,i),""});for(var o=n.length-1;o>0;o-=2){var a=n[o],s=n[o-1],l=YJ(a);switch(r=r||IV(),s){case"translate":Iz(r,r,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":IU(r,r,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":Ij(r,r,-parseFloat(l[0])*Y1,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":IW(r,[1,0,Math.tan(parseFloat(l[0])*Y1),1,0,0],r);break;case"skewY":IW(r,[1,Math.tan(parseFloat(l[0])*Y1),0,1,0,0],r);break;case"matrix":r[0]=parseFloat(l[0]),r[1]=parseFloat(l[1]),r[2]=parseFloat(l[2]),r[3]=parseFloat(l[3]),r[4]=parseFloat(l[4]),r[5]=parseFloat(l[5])}}e.setLocalTransform(r)}}(t,e),Y5(t,o,a),n||function(t,e,i){for(var n=0;n<YF.length;n++){var r=YF[n],o=t.getAttribute(r);null!=o&&(e[YB[r]]=o)}for(var n=0;n<Yz.length;n++){var r=Yz[n],o=t.getAttribute(r);null!=o&&(i[YW[r]]=o)}}(t,o,a)),e.style=e.style||{},null!=o.fill&&(e.style.fill=YK(e,"fill",o.fill,i)),null!=o.stroke&&(e.style.stroke=YK(e,"stroke",o.stroke,i)),T_(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(t){null!=o[t]&&(e.style[t]=parseFloat(o[t]))}),T_(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(t){null!=o[t]&&(e.style[t]=o[t])}),r&&(e.__selfStyle=a),o.lineDash&&(e.style.lineDash=TM(YJ(o.lineDash),function(t){return parseFloat(t)})),("hidden"===o.visibility||"collapse"===o.visibility)&&(e.invisible=!0),"none"===o.display&&(e.ignore=!0)}var Yq=/^url\(\s*#(.*?)\)/;function YK(t,e,i,n){var r=i&&i.match(Yq);if(r){var o=TX(r[1]);n.push([t,e,o]);return}return"none"===i&&(i=null),i}var YQ=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function YJ(t){return t.match(YQ)||[]}var Y0=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Y1=Math.PI/180,Y2=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Y5(t,e,i){var n,r=t.getAttribute("style");if(r)for(Y2.lastIndex=0;null!=(n=Y2.exec(r));){var o=n[1],a=T2(YB,o)?YB[o]:null;a&&(e[a]=n[2]);var s=T2(YW,o)?YW[o]:null;s&&(i[s]=n[2])}}function Y3(t,e){var i=Math.min(e.width/t.width,e.height/t.height);return{scale:i,x:-(t.x+t.width/2)*i+(e.x+e.width/2),y:-(t.y+t.height/2)*i+(e.y+e.height/2)}}function Y4(t,e){return 1e-8>Math.abs(t-e)}function Y6(t,e,i){var n=0,r=t[0];if(!r)return!1;for(var o=1;o<t.length;o++){var a=t[o];n+=DA(r[0],r[1],a[0],a[1],e,i),r=a}var s=t[0];return Y4(r[0],s[0])&&Y4(r[1],s[1])||(n+=DA(r[0],r[1],s[0],s[1],e,i)),0!==n}var Y8=[];function Y9(t,e){for(var i=0;i<t.length;i++)Ih(t[i],t[i],e)}function Y7(t,e,i,n){for(var r=0;r<t.length;r++){var o=t[r];n&&(o=n.project(o)),o&&isFinite(o[0])&&isFinite(o[1])&&(Iu(e,e,o),Ic(i,i,o))}}var Xt=function(){function t(t){this.name=t}return t.prototype.setCenter=function(t){this._center=t},t.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},t}(),Xe=function(t,e){this.type="polygon",this.exterior=t,this.interiors=e},Xi=function(t){this.type="linestring",this.points=t},Xn=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.type="geoJSON",r.geometries=i,r._center=n&&[n[0],n[1]],r}return M6(e,t),e.prototype.calcCenter=function(){for(var t,e=this.geometries,i=0,n=0;n<e.length;n++){var r=e[n],o=r.exterior,a=o&&o.length;a>i&&(t=r,i=a)}if(t)return function(t){for(var e=0,i=0,n=0,r=t.length,o=t[r-1][0],a=t[r-1][1],s=0;s<r;s++){var l=t[s][0],h=t[s][1],u=o*h-l*a;e+=u,i+=(o+l)*u,n+=(a+h)*u,o=l,a=h}return e?[i/e/3,n/e/3,e]:[t[0][0]||0,t[0][1]||0]}(t.exterior);var s=this.getBoundingRect();return[s.x+s.width/2,s.y+s.height/2]},e.prototype.getBoundingRect=function(t){var e=this._rect;if(e&&!t)return e;var i=[1/0,1/0],n=[-1/0,-1/0];return T_(this.geometries,function(e){"polygon"===e.type?Y7(e.exterior,i,n,t):T_(e.points,function(e){Y7(e,i,n,t)})}),isFinite(i[0])&&isFinite(i[1])&&isFinite(n[0])&&isFinite(n[1])||(i[0]=i[1]=n[0]=n[1]=0),e=new I1(i[0],i[1],n[0]-i[0],n[1]-i[1]),t||(this._rect=e),e},e.prototype.contain=function(t){var e=this.getBoundingRect(),i=this.geometries;if(!e.contain(t[0],t[1]))return!1;n:for(var n=0,r=i.length;n<r;n++){var o=i[n];if("polygon"===o.type){var a=o.exterior,s=o.interiors;if(Y6(a,t[0],t[1])){for(var l=0;l<(s?s.length:0);l++)if(Y6(s[l],t[0],t[1]))continue n;return!0}}}return!1},e.prototype.transformTo=function(t,e,i,n){var r=this.getBoundingRect(),o=r.width/r.height;i?n||(n=i/o):i=o*n;for(var a=new I1(t,e,i,n),s=r.calculateTransform(a),l=this.geometries,h=0;h<l.length;h++){var u=l[h];"polygon"===u.type?(Y9(u.exterior,s),T_(u.interiors,function(t){Y9(t,s)})):T_(u.points,function(t){Y9(t,s)})}(r=this._rect).copy(a),this._center=[r.x+r.width/2,r.y+r.height/2]},e.prototype.cloneShallow=function(t){null==t&&(t=this.name);var i=new e(t,this.geometries,this._center);return i._rect=this._rect,i.transformTo=null,i},e}(Xt),Xr=function(t){function e(e,i){var n=t.call(this,e)||this;return n.type="geoSVG",n._elOnlyForCalculate=i,n}return M6(e,t),e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,e=t.getBoundingRect(),i=[e.x+e.width/2,e.y+e.height/2],n=IB(Y8),r=t;r&&!r.isGeoSVGGraphicRoot;)IW(n,r.getLocalTransform(),n),r=r.parent;return IG(n,n),Ih(i,i,n),i},e}(Xt),Xo=TQ(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Xa=function(){function t(t,e){this.type="geoSVG",this._usedGraphicMap=TQ(),this._freedGraphics=[],this._mapName=t,this._parsedXML=YV(e)}return t.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e,i,n,r=(e=t.named,i=[],n=TQ(),T_(e,function(t){if(null==t.namedFrom){var e=new Xr(t.name,t.el);i.push(e),n.set(t.name,e)}}),{regions:i,regionsMap:n}),o=r.regions,a=r.regionsMap;this._regions=o,this._regionsMap=a}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(t){try{var e;n=(i=t&&(e={ignoreViewBox:!0,ignoreRootClip:!0},new Yj().parse(t,e))||{}).root,TY(null!=n)}catch(t){throw Error("Invalid svg format\n"+t.message)}var i,n,r=new Aj;r.add(n),r.isGeoSVGGraphicRoot=!0;var o=i.width,a=i.height,s=i.viewBoxRect,l=this._boundingRect;if(!l){var h=void 0,u=void 0,c=void 0,d=void 0;if(null!=o?(h=0,c=o):s&&(h=s.x,c=s.width),null!=a?(u=0,d=a):s&&(u=s.y,d=s.height),null==h||null==u){var p=n.getBoundingRect();null==h&&(h=p.x,c=p.width),null==u&&(u=p.y,d=p.height)}l=this._boundingRect=new I1(h,u,c,d)}if(s){var f=Y3(s,l);n.scaleX=n.scaleY=f.scale,n.x=f.x,n.y=f.y}r.setClipPath(new DK({shape:l.plain()}));var g=[];return T_(i.named,function(t){var e;null!=Xo.get(t.svgNodeTagLower)&&(g.push(t),(e=t.el).silent=!1,e.isGroup&&e.traverse(function(t){t.silent=!1}))}),{root:r,boundingRect:l,named:g}},t.prototype.useGraphic=function(t){var e=this._usedGraphicMap,i=e.get(t);return i||(i=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,i)),i},t.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,i=e.get(t);i&&(e.removeKey(t),this._freedGraphics.push(i))},t}();function Xs(t,e,i){for(var n=0;n<t.length;n++)t[n]=Xl(t[n],e[n],i)}function Xl(t,e,i){for(var n=[],r=e[0],o=e[1],a=0;a<t.length;a+=2){var s=t.charCodeAt(a)-64,l=t.charCodeAt(a+1)-64;l=l>>1^-(1&l),s=(s>>1^-(1&s))+r,l+=o,r=s,o=l,n.push([s/i,l/i])}return n}for(var Xh=[126,25],Xu="",Xc=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],Xd=0;Xd<Xc.length;Xd++)for(var Xp=0;Xp<Xc[Xd].length;Xp++)Xc[Xd][Xp][0]/=10.5,Xc[Xd][Xp][1]/=-14,Xc[Xd][Xp][0]+=Xh[0],Xc[Xd][Xp][1]+=Xh[1];var Xf={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]},Xg=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],Xm=function(){function t(t,e,i){this.type="geoJSON",this._parsedMap=TQ(),this._mapName=t,this._specialAreas=i,this._geoJSON=TO(e)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):Function("return ("+e+");")():e}return t.prototype.load=function(t,e){e=e||"name";var i=this._parsedMap.get(e);if(!i){var n=this._parseToRegions(e);i=this._parsedMap.set(e,{regions:n,boundingRect:function(t){for(var e,i=0;i<t.length;i++){var n=t[i].getBoundingRect();(e=e||n.clone()).union(n)}return e}(n)})}var r=TQ(),o=[];return T_(i.regions,function(e){var i=e.name;t&&T2(t,i)&&(e=e.cloneShallow(i=t[i])),o.push(e),r.set(i,e)}),{regions:o,boundingRect:i.boundingRect||new I1(0,0,0,0),regionsMap:r}},t.prototype._parseToRegions=function(t){var e,i,n=this._mapName,r=this._geoJSON;try{i=r?(e=r,TM(TI((e=function(t){if(!t.UTF8Encoding)return t;var e=t.UTF8Scale;return null==e&&(e=1024),T_(t.features,function(t){var i=t.geometry,n=i.encodeOffsets,r=i.coordinates;if(n)switch(i.type){case"LineString":i.coordinates=Xl(r,n,e);break;case"Polygon":case"MultiLineString":Xs(r,n,e);break;case"MultiPolygon":T_(r,function(t,i){return Xs(t,n[i],e)})}}),t.UTF8Encoding=!1,t}(e)).features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(e){var i=e.properties,n=e.geometry,r=[];switch(n.type){case"Polygon":var o=n.coordinates;r.push(new Xe(o[0],o.slice(1)));break;case"MultiPolygon":T_(n.coordinates,function(t){t[0]&&r.push(new Xe(t[0],t.slice(1)))});break;case"LineString":r.push(new Xi([n.coordinates]));break;case"MultiLineString":r.push(new Xi(n.coordinates))}var a=new Xn(i[t||"name"],r,i.cp);return a.properties=i,a})):[]}catch(t){throw Error("Invalid geoJson format\n"+t.message)}return function(t,e){if("china"===t){for(var i=0;i<e.length;i++)if(e[i].name===Xu)return;e.push(new Xn(Xu,TM(Xc,function(t){return{type:"polygon",exterior:t}}),Xh))}}(n,i),T_(i,function(t){var e=t.name;(function(t,e){if("china"===t){var i=Xf[e.name];if(i){var n=e.getCenter();n[0]+=i[0]/10.5,n[1]+=-i[1]/14,e.setCenter(n)}}})(n,t),"china"===n&&""===t.name&&t.geometries.push({type:"polygon",exterior:Xg[0]});var i=this._specialAreas&&this._specialAreas[e];i&&t.transformTo(i.left,i.top,i.width,i.height)},this),i},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t}(),Xy=TQ(),Xv={registerMap:function(t,e,i){if(e.svg){var n=new Xa(t,e.svg);Xy.set(t,n)}else{var r=e.geoJson||e.geoJSON;r&&!e.features?i=e.specialAreas:r=e;var n=new Xm(t,r,i);Xy.set(t,n)}},getGeoResource:function(t){return Xy.get(t)},getMapForUser:function(t){var e=Xy.get(t);return e&&"geoJSON"===e.type&&e.getMapForUser()},load:function(t,e,i){var n=Xy.get(t);if(n)return n.load(e,i)}},Xw=["rect","circle","line","ellipse","polygon","polyline","path"],Xb=TQ(Xw),Xx=TQ(Xw.concat(["g"])),XS=TQ(Xw.concat(["g"])),XC=kg();function X_(t){var e=t.getItemStyle(),i=t.get("areaColor");return null!=i&&(e.fill=i),e}function XM(t){var e=t.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var XT=function(){function t(t){var e=new Aj;this.uid=L3("ec_map_draw"),this._controller=new GE(t.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new Aj),e.add(this._svgGroup=new Aj)}return t.prototype.draw=function(t,e,i,n,r){var o="geo"===t.mainType,a=t.getData&&t.getData();o&&e.eachComponent({mainType:"series",subType:"map"},function(e){a||e.getHostGeoModel()!==t||(a=e.getData())});var s=t.coordinateSystem,l=this._regionsGroup,h=this.group,u=s.getTransformInfo(),c=u.raw,d=u.roam;!l.childAt(0)||r?(h.x=d.x,h.y=d.y,h.scaleX=d.scaleX,h.scaleY=d.scaleY,h.dirty()):OK(h,d,t);var p=a&&a.getVisual("visualMeta")&&a.getVisual("visualMeta").length>0,f={api:i,geo:s,mapOrGeoModel:t,data:a,isVisualEncodedByVisualMap:p,isGeo:o,transformInfoRaw:c};"geoJSON"===s.resourceType?this._buildGeoJSON(f):"geoSVG"===s.resourceType&&this._buildSVG(f),this._updateController(t,e,i),this._updateMapSelectHandler(t,l,i,n)},t.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=TQ(),i=TQ(),n=this._regionsGroup,r=t.transformInfoRaw,o=t.mapOrGeoModel,a=t.data,s=t.geo.projection,l=s&&s.stream;function h(t,e){return e&&(t=e(t)),t&&[t[0]*r.scaleX+r.x,t[1]*r.scaleY+r.y]}function u(t){return{shape:{points:function(t){for(var e=[],i=!l&&s&&s.project,n=0;n<t.length;++n){var r=h(t[n],i);r&&e.push(r)}return e}(t)}}}n.removeAll(),T_(t.geo.regions,function(r){var c=r.name,d=e.get(c),p=i.get(c)||{},f=p.dataIdx,g=p.regionModel;d||(d=e.set(c,new Aj),n.add(d),f=a?a.indexOfName(c):null,g=t.isGeo?o.getRegionModel(c):a?a.getItemModel(f):null,i.set(c,{dataIdx:f,regionModel:g}));var m=[],y=[];T_(r.geometries,function(t){if("polygon"===t.type){var e=[t.exterior].concat(t.interiors||[]);l&&(e=XD(e,l)),T_(e,function(t){m.push(new PF(u(t)))})}else{var i=t.points;l&&(i=XD(i,l,!0)),T_(i,function(t){y.push(new Pj(u(t)))})}});var w=h(r.getCenter(),s&&s.project);function b(e,i){if(e.length){var n=new P2({culling:!0,segmentIgnoreThreshold:1,shape:{paths:e}});d.add(n),XI(t,n,f,g),XR(t,n,c,g,o,f,w),i&&(XM(n),T_(n.states,XM))}}b(m),b(y,!0)}),e.each(function(e,n){var r=i.get(n),a=r.dataIdx,s=r.regionModel;XE(t,e,n,s,o,a),XA(t,e,n,s,o),Xk(t,e,n,s,o)},this)},t.prototype._buildSVG=function(t){var e=t.geo.map,i=t.transformInfoRaw;this._svgGroup.x=i.x,this._svgGroup.y=i.y,this._svgGroup.scaleX=i.scaleX,this._svgGroup.scaleY=i.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var n=this._svgDispatcherMap=TQ(),r=!1;T_(this._svgGraphicRecord.named,function(e){var i=e.name,o=t.mapOrGeoModel,a=t.data,s=e.svgNodeTagLower,l=e.el,h=a?a.indexOfName(i):null,u=o.getRegionModel(i);null!=Xb.get(s)&&l instanceof k1&&XI(t,l,h,u),l instanceof k1&&(l.culling=!0),l.z2EmphasisLift=0,e.namedFrom||(null!=XS.get(s)&&XR(t,l,i,u,o,h,null),XE(t,l,i,u,o,h),XA(t,l,i,u,o),null!=Xx.get(s)&&("self"===Xk(t,l,i,u,o)&&(r=!0),(n.get(i)||n.set(i,[])).push(l)))},this),this._enableBlurEntireSVG(r,t)},t.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var i=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse(function(t){if(!t.isGroup){OI(t);var e=t.ensureState("blur").style||{};null==e.opacity&&null!=i&&(e.opacity=i),t.ensureState("emphasis")}})}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(t,e){if(null==t)return[];var i=e.coordinateSystem;if("geoJSON"===i.resourceType){var n=this._regionsGroupByName;if(n){var r=n.get(t);return r?[r]:[]}}else if("geoSVG"===i.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},t.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},t.prototype._useSVG=function(t){var e=Xv.getGeoResource(t);if(e&&"geoSVG"===e.type){var i=e.useGraphic(this.uid);this._svgGroup.add(i.root),this._svgGraphicRecord=i,this._svgMapName=t}},t.prototype._freeSVG=function(){var t=this._svgMapName;if(null!=t){var e=Xv.getGeoResource(t);e&&"geoSVG"===e.type&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(t,e,i){var n=t.coordinateSystem,r=this._controller,o=this._controllerHost;o.zoomLimit=t.get("scaleLimit"),o.zoom=n.getZoom(),r.enable(t.get("roam")||!1);var a=t.mainType;function s(){var e={type:"geoRoam",componentType:a};return e[a+"Id"]=t.id,e}r.off("pan").on("pan",function(t){this._mouseDownFlag=!1,GO(o,t.dx,t.dy),i.dispatchAction(Tw(s(),{dx:t.dx,dy:t.dy,animation:{duration:0}}))},this),r.off("zoom").on("zoom",function(t){this._mouseDownFlag=!1,GP(o,t.scale,t.originX,t.originY),i.dispatchAction(Tw(s(),{totalZoom:o.zoom,zoom:t.scale,originX:t.originX,originY:t.originY,animation:{duration:0}}))},this),r.setPointerChecker(function(e,r,o){return n.containPoint([r,o])&&!GN(e,i,t)})},t.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var e=t.getTextContent();e&&(e.ignore=XC(e).ignore)})},t.prototype._updateMapSelectHandler=function(t,e,i,n){var r=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",function(){r._mouseDownFlag=!0}),e.on("click",function(t){r._mouseDownFlag&&(r._mouseDownFlag=!1)}))},t}();function XI(t,e,i,n){var r=n.getModel("itemStyle"),o=n.getModel(["emphasis","itemStyle"]),a=n.getModel(["blur","itemStyle"]),s=n.getModel(["select","itemStyle"]),l=X_(r),h=X_(o),u=X_(s),c=X_(a),d=t.data;if(d){var p=d.getItemVisual(i,"style"),f=d.getItemVisual(i,"decal");t.isVisualEncodedByVisualMap&&p.fill&&(l.fill=p.fill),f&&(l.decal=Fr(f,t.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=h,e.ensureState("select").style=u,e.ensureState("blur").style=c,OI(e)}function XR(t,e,i,n,r,o,a){var s=t.data,l=t.isGeo,h=s&&isNaN(s.get(s.mapDimension("value"),o)),u=s&&s.getItemLayout(o);if(l||h||u&&u.showLabel){var c=l?i:o,d=void 0;(!s||o>=0)&&(d=r),LP(e,LL(n),{labelFetcher:d,labelDataIndex:c,defaultText:i},a?{normal:{align:"center",verticalAlign:"middle"}}:null);var p=e.getTextContent();if(p&&(XC(p).ignore=p.ignore,e.textConfig&&a)){var f=e.getBoundingRect().clone();e.textConfig.layoutRect=f,e.textConfig.position=[(a[0]-f.x)/f.width*100+"%",(a[1]-f.y)/f.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function XE(t,e,i,n,r,o){t.data?t.data.setItemGraphicEl(o,e):On(e).eventData={componentType:"geo",componentIndex:r.componentIndex,geoIndex:r.componentIndex,name:i,region:n&&n.option||{}}}function XA(t,e,i,n,r){t.data||LR({el:e,componentModel:r,itemName:i,itemTooltipOption:n.get("tooltip")})}function Xk(t,e,i,n,r){e.highDownSilentOnTouch=!!r.get("selectedMode");var o,a=n.getModel("emphasis"),s=a.get("focus");return OB(e,s,a.get("blurScope"),a.get("disabled")),t.isGeo&&((o=On(e)).componentMainType=r.mainType,o.componentIndex=r.componentIndex,o.componentHighDownName=i),s}function XD(t,e,i){var n,r=[];function o(){n=[]}function a(){n.length&&(r.push(n),n=[])}var s=e({polygonStart:o,polygonEnd:a,lineStart:o,lineEnd:a,point:function(t,e){isFinite(t)&&isFinite(e)&&n.push([t,e])},sphere:function(){}});return i||s.polygonStart(),T_(t,function(t){s.lineStart();for(var e=0;e<t.length;e++)s.point(t[e][0],t[e][1]);s.lineEnd()}),i||s.polygonEnd(),r}var XO=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i,n){if(!n||"mapToggleSelect"!==n.type||n.from!==this.uid){var r=this.group;if(r.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&n&&"geoRoam"===n.type&&this._mapDraw.resetForLabelLayout(),n&&"geoRoam"===n.type&&"series"===n.componentType&&n.seriesId===t.id){var o=this._mapDraw;o&&r.add(o.group)}else if(t.needsDrawMap){var o=this._mapDraw||new XT(i);r.add(o.group),o.draw(t,e,i,this,n),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,i)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,e,i){var n=t.originalData,r=this.group;n.each(n.mapDimension("value"),function(e,i){if(!isNaN(e)){var o=n.getItemLayout(i);if(o&&o.point){var a=o.point,s=o.offset,l=new Pm({style:{fill:t.getData().getVisual("style").fill},shape:{cx:a[0]+9*s,cy:a[1],r:3},silent:!0,z2:8+(s?0:11)});if(!s){var h=t.mainSeries.getData(),u=n.getName(i),c=h.indexOfName(u),d=n.getItemModel(i),p=d.getModel("label"),f=h.getItemGraphicEl(c);LP(l,LL(d),{labelFetcher:{getFormattedLabel:function(e,i){return t.getFormattedLabel(c,i)}},defaultText:u}),l.disableLabelAnimation=!0,p.get("position")||l.setTextConfig({position:"bottom"}),f.onHoverStateChange=function(t){OM(l,t)}}r.add(l)}}})},e.type="map",e}(VX),XP=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.needsDrawMap=!1,i.seriesGroup=[],i.getTooltipPosition=function(t){if(null!=t){var e=this.getData().getName(t),i=this.coordinateSystem,n=i.getRegion(e);return n&&i.dataToPoint(n.getCenter())}},i}return M6(e,t),e.prototype.getInitialData=function(t){for(var e=zX(this,{coordDimensions:["value"],encodeDefaulter:TA(N2,this)}),i=TQ(),n=[],r=0,o=e.count();r<o;r++){var a=e.getName(r);i.set(a,!0)}return T_(Xv.load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(t){var e=t.name;i.get(e)||n.push(e)}),e.appendValues([],n),e},e.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return null!=t?this.ecModel.getComponent("geo",t):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var e=this.getData();return e.get(e.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},e.prototype.formatTooltip=function(t,e,i){for(var n=this.getData(),r=this.getRawValue(t),o=n.getName(t),a=this.seriesGroup,s=[],l=0;l<a.length;l++){var h=a[l].originalData.indexOfName(o),u=n.mapDimension("value");isNaN(a[l].originalData.get(u,h))||s.push(a[l].name)}return VS("section",{header:s.join(", "),noHeader:!s.length,blocks:[VS("nameValue",{name:o,value:r})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var e=t.icon||"roundRect",i=BW(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return i.setStyle(t.itemStyle),i.style.stroke="none",e.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(VL);function XL(t){var e={};t.eachSeriesByType("map",function(t){var i=t.getHostGeoModel(),n=i?"o"+i.id:"i"+t.getMapType();(e[n]=e[n]||[]).push(t)}),T_(e,function(t,e){for(var i,n,r,o=(i=TM(t,function(t){return t.getData()}),n=t[0].get("mapValueCalculation"),r={},T_(i,function(t){t.each(t.mapDimension("value"),function(e,i){var n="ec-"+t.getName(i);r[n]=r[n]||[],isNaN(e)||r[n].push(e)})}),i[0].map(i[0].mapDimension("value"),function(t,e){for(var o,a="ec-"+i[0].getName(e),s=0,l=1/0,h=-1/0,u=r[a].length,c=0;c<u;c++)l=Math.min(l,r[a][c]),h=Math.max(h,r[a][c]),s+=r[a][c];return o="min"===n?l:"max"===n?h:"average"===n?s/u:s,0===u?NaN:o})),a=0;a<t.length;a++)t[a].originalData=t[a].getData();for(var a=0;a<t.length;a++)t[a].seriesGroup=t,t[a].needsDrawMap=0===a&&!t[a].getHostGeoModel(),t[a].setData(o.cloneShallow()),t[a].mainSeries=t[0]})}function XN(t){var e={};t.eachSeriesByType("map",function(i){var n=i.getMapType();if(!i.getHostGeoModel()&&!e[n]){var r={};T_(i.seriesGroup,function(e){var i=e.coordinateSystem,n=e.originalData;e.get("showLegendSymbol")&&t.getComponent("legend")&&n.each(n.mapDimension("value"),function(t,e){var o=n.getName(e),a=i.getRegion(o);if(!(!a||isNaN(t))){var s=r[o]||0,l=i.dataToPoint(a.getCenter());r[o]=s+1,n.setItemLayout(e,{point:l,offset:s})}})});var o=i.getData();o.each(function(t){var e=o.getName(t),i=o.getItemLayout(t)||{};i.showLabel=!r[e],o.setItemLayout(t,i)}),e[n]=!0}})}var XH={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},XV=["lng","lat"],XB=function(t){function e(e,i,n){var r,o=t.call(this,e)||this;o.dimensions=XV,o.type="geo",o._nameCoordMap=TQ(),o.map=i;var a=n.projection,s=Xv.load(i,n.nameMap,n.nameProperty),l=Xv.getGeoResource(i);o.resourceType=l?l.type:null;var h=o.regions=s.regions,u=XH[l.type];if(o._regionsMap=s.regionsMap,o.regions=s.regions,o.projection=a,a)for(var c=0;c<h.length;c++){var d=h[c].getBoundingRect(a);(r=r||d.clone()).union(d)}else r=s.boundingRect;return o.setBoundingRect(r.x,r.y,r.width,r.height),o.aspectScale=a?1:Tz(n.aspectScale,u.aspectScale),o._invertLongitute=!a&&u.invertLongitute,o}return M6(e,t),e.prototype._transformTo=function(t,e,i,n){var r=this.getBoundingRect(),o=this._invertLongitute;r=r.clone(),o&&(r.y=-r.y-r.height);var a=this._rawTransformable;a.transform=r.calculateTransform(new I1(t,e,i,n));var s=a.parent;a.parent=null,a.decomposeTransform(),a.parent=s,o&&(a.scaleY=-a.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var e=this.regions,i=0;i<e.length;i++){var n=e[i];if("geoJSON"===n.type&&n.contain(t))return e[i]}},e.prototype.addGeoCoord=function(t,e){this._nameCoordMap.set(t,e)},e.prototype.getGeoCoord=function(t){var e=this._regionsMap.get(t);return this._nameCoordMap.get(t)||e&&e.getCenter()},e.prototype.dataToPoint=function(t,e,i){if(TO(t)&&(t=this.getGeoCoord(t)),t){var n=this.projection;return n&&(t=n.project(t)),t&&this.projectedToPoint(t,e,i)}},e.prototype.pointToData=function(t){var e=this.projection;return e&&(t=e.unproject(t)),t&&this.pointToProjected(t)},e.prototype.pointToProjected=function(e){return t.prototype.pointToData.call(this,e)},e.prototype.projectedToPoint=function(e,i,n){return t.prototype.dataToPoint.call(this,e,i,n)},e.prototype.convertToPixel=function(t,e,i){var n=XF(e);return n===this?n.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,e,i){var n=XF(e);return n===this?n.pointToData(i):null},e}(Gh);function XF(t){var e=t.geoModel,i=t.seriesModel;return e?e.coordinateSystem:i?i.coordinateSystem||(i.getReferringComponents("geo",kw).models[0]||{}).coordinateSystem:null}function XW(t,e){var i,n,r,o=t.get("boundingCoords");if(null!=o){var a=o[0],s=o[1];if(isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])){var l=this.projection;if(l){var h=a[0],u=a[1],c=s[0],d=s[1];a=[1/0,1/0],s=[-1/0,-1/0];var p=function(t,e,i,n){for(var r=i-t,o=n-e,h=0;h<=100;h++){var u=h/100,c=l.project([t+r*u,e+o*u]);Iu(a,a,c),Ic(s,s,c)}};p(h,u,c,u),p(c,u,c,d),p(c,d,h,d),p(h,d,c,u)}this.setBoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1])}}var f=this.getBoundingRect(),g=t.get("layoutCenter"),m=t.get("layoutSize"),y=e.getWidth(),w=e.getHeight(),b=f.width/f.height*this.aspectScale,x=!1;if(!g||!m||(i=[AZ(g[0],y),AZ(g[1],w)],n=AZ(m,Math.min(y,w)),isNaN(i[0])||isNaN(i[1])||isNaN(n)||(x=!0)),x)r={},b>1?(r.width=n,r.height=n/b):(r.height=n,r.width=n*b),r.y=i[1]-r.height/2,r.x=i[0]-r.width/2;else{var S=t.getBoxLayoutParams();S.aspect=b,r=NP(S,{width:y,height:w})}this.setViewRect(r.x,r.y,r.width,r.height),this.setCenter(t.get("center"),e),this.setZoom(t.get("zoom"))}TS(XB,Gh);var Xz=new(function(){function t(){this.dimensions=XV}return t.prototype.create=function(t,e){var i=[];function n(t){return{nameProperty:t.get("nameProperty"),aspectScale:t.get("aspectScale"),projection:t.get("projection")}}t.eachComponent("geo",function(t,r){var o=t.get("map"),a=new XB(o+r,o,Tw({nameMap:t.get("nameMap")},n(t)));a.zoomLimit=t.get("scaleLimit"),i.push(a),t.coordinateSystem=a,a.model=t,a.resize=XW,a.resize(t,e)}),t.eachSeries(function(t){if("geo"===t.get("coordinateSystem")){var e=t.get("geoIndex")||0;t.coordinateSystem=i[e]}});var r={};return t.eachSeriesByType("map",function(t){if(!t.getHostGeoModel()){var e=t.getMapType();r[e]=r[e]||[],r[e].push(t)}}),T_(r,function(t,r){var o=new XB(r,r,Tw({nameMap:Tv(TM(t,function(t){return t.get("nameMap")}))},n(t[0])));o.zoomLimit=TW.apply(null,TM(t,function(t){return t.get("scaleLimit")})),i.push(o),o.resize=XW,o.resize(t[0],e),T_(t,function(t){t.coordinateSystem=o,T_(t.get("geoCoord"),function(t,e){o.addGeoCoord(e,t)})})}),i},t.prototype.getFilledRegions=function(t,e,i,n){for(var r=(t||[]).slice(),o=TQ(),a=0;a<r.length;a++)o.set(r[a].name,r[a]);return T_(Xv.load(e,i,n).regions,function(t){var e=t.name;o.get(e)||r.push({name:e})}),r},t}()),Xj=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.init=function(t,e,i){var n=Xv.getGeoResource(t.map);if(n&&"geoJSON"===n.type){var r=t.itemStyle=t.itemStyle||{};"color"in r||(r.color="#eee")}this.mergeDefaultAndTheme(t,i),ko(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,e=this.option;e.regions=Xz.getFilledRegions(e.regions,e.map,e.nameMap,e.nameProperty);var i={};this._optionModelMap=TT(e.regions||[],function(e,n){var r=n.name;return r&&(e.set(r,new L2(n,t,t.ecModel)),n.selected&&(i[r]=!0)),e},TQ()),e.selectedMap||(e.selectedMap=i)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new L2(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,e){var i=this.getRegionModel(t),n="normal"===e?i.get(["label","formatter"]):i.get(["emphasis","label","formatter"]),r={name:t};return TD(n)?(r.status=e,n(r)):TO(n)?n.replace("{a}",null!=t?t:""):void 0},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var e=this.option,i=e.selectedMode;i&&("multiple"!==i&&(e.selectedMap=null),(e.selectedMap||(e.selectedMap={}))[t]=!0)},e.prototype.unSelect=function(t){var e=this.option.selectedMap;e&&(e[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var e=this.option.selectedMap;return!!(e&&e[t])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(NW),XU=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.focusBlurEnabled=!0,i}return M6(e,t),e.prototype.init=function(t,e){this._api=e},e.prototype.render=function(t,e,i,n){if(this._model=t,!t.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new XT(i));var r=this._mapDraw;r.draw(t,e,i,this,n),r.group.on("click",this._handleRegionClick,this),r.group.silent=t.get("silent"),this.group.add(r.group),this.updateSelectStatus(t,e,i)},e.prototype._handleRegionClick=function(t){var e;BE(t.target,function(t){return null!=(e=On(t).eventData)},!0),e&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:e.name})},e.prototype.updateSelectStatus=function(t,e,i){var n=this;this._mapDraw.group.traverse(function(t){var e=On(t).eventData;if(e)return n._model.isSelected(e.name)?i.enterSelect(t):i.leaveSelect(t),!0})},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(Vj);function XG(t,e,i){Xv.registerMap(t,e,i)}function XY(t){function e(e,i){i.update="geo:updateSelectStatus",t.registerAction(i,function(t,i){var n={},r=[];return i.eachComponent({mainType:"geo",query:t},function(i){i[e](t.name),T_(i.coordinateSystem.regions,function(t){n[t.name]=i.isSelected(t.name)||!1});var o=[];T_(n,function(t,e){n[e]&&o.push(e)}),r.push({geoIndex:i.componentIndex,name:o})}),{selected:n,allSelected:r,name:t.name}})}t.registerCoordinateSystem("geo",Xz),t.registerComponentModel(Xj),t.registerComponentView(XU),t.registerImpl("registerMap",XG),t.registerImpl("getMap",function(t){return Xv.getMapForUser(t)}),e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,e,i){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},function(e){var r=e.coordinateSystem;if("geo"===r.type){var o=G9(r,t,e.get("scaleLimit"),i);e.setCenter&&e.setCenter(o.center),e.setZoom&&e.setZoom(o.zoom),"series"===n&&T_(e.seriesGroup,function(t){t.setCenter(o.center),t.setZoom(o.zoom)})}})})}var XX=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i._dataGroup=new Aj,i._initialized=!1,i}return M6(e,t),e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,e,i,n){this._progressiveEls=null;var r=this._dataGroup,o=t.getData(),a=this._data,s=t.coordinateSystem,l=s.dimensions,h=Xq(t);if(o.diff(a).add(function(t){XK(XZ(o,r,t,l,s),o,t,h)}).update(function(e,i){var n=a.getItemGraphicEl(i),r=X$(o,e,l,s);o.setItemGraphicEl(e,n),OK(n,{shape:{points:r}},t,e),O5(n),XK(n,o,e,h)}).remove(function(t){var e=a.getItemGraphicEl(t);r.remove(e)}).execute(),!this._initialized){this._initialized=!0;var u,c,d,p,f,g=(u=function(){setTimeout(function(){r.removeClipPath()})},c=s.model,p=new DK({shape:{x:(d=s.getRect()).x,y:d.y,width:d.width,height:d.height}}),f="horizontal"===c.get("layout")?"width":"height",p.setShape(f,0),OQ(p,{shape:{width:d.width,height:d.height}},t,u),p);r.setClipPath(g)}this._data=o},e.prototype.incrementalPrepareRender=function(t,e,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,e,i){for(var n=e.getData(),r=e.coordinateSystem,o=r.dimensions,a=Xq(e),s=this._progressiveEls=[],l=t.start;l<t.end;l++){var h=XZ(n,this._dataGroup,l,o,r);h.incremental=!0,XK(h,n,l,a),s.push(h)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(VX);function X$(t,e,i,n){for(var r=[],o=0;o<i.length;o++){var a=i[o],s=t.get(t.mapDimension(a),e);("category"===n.getAxis(a).type?null==s:null==s||isNaN(s))||r.push(n.dataToPoint(s,a))}return r}function XZ(t,e,i,n,r){var o=new Pj({shape:{points:X$(t,i,n,r)},z2:10});return e.add(o),t.setItemGraphicEl(i,o),o}function Xq(t){var e,i=t.get("smooth",!0);return!0===i&&(i=.3),(e=i=A9(i))!=e&&(i=0),{smooth:i}}function XK(t,e,i,n){t.useStyle(e.getItemVisual(i,"style")),t.style.fill=null,t.setShape("smooth",n.smooth);var r=e.getItemModel(i),o=r.getModel("emphasis");Oj(t,r,"lineStyle"),OB(t,o.get("focus"),o.get("blurScope"),o.get("disabled"))}var XQ=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.visualStyleAccessPath="lineStyle",i.visualDrawType="stroke",i}return M6(e,t),e.prototype.getInitialData=function(t,e){return zg(null,this,{useEncodeDefaulter:TE(XJ,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var e=this.coordinateSystem,i=this.getData(),n=[];return e.eachActiveState(i,function(e,r){t===e&&n.push(i.getRawIndex(r))}),n},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(VL);function XJ(t){var e=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(e){var i={};return T_(e.dimensions,function(t){var e=+t.replace("dim","");i[t]=e}),i}}var X0=["lineStyle","opacity"],X1={seriesType:"parallel",reset:function(t,e){var i=t.coordinateSystem,n={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(t,e){i.eachActiveState(e,function(t,i){var r=n[t];if("normal"===t&&e.hasItemOption){var o=e.getItemModel(i).get(X0,!0);null!=o&&(r=o)}e.ensureUniqueItemVisual(i,"style").opacity=r},t.start,t.end)}}}};function X2(t){(function(t){if(!t.parallel){var e=!1;T_(t.series,function(t){t&&"parallel"===t.type&&(e=!0)}),e&&(t.parallel=[{}])}})(t),T_(kr(t.parallelAxis),function(e){if(TN(e)){var i=e.parallelIndex||0,n=kr(t.parallel)[i];n&&n.parallelAxisDefault&&Ty(e,n.parallelAxisDefault,!1)}})}var X5=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i){this._model=t,this._api=i,this._handlers||(this._handlers={},T_(X3,function(t,e){i.getZr().on(e,this._handlers[e]=TE(t,this))},this)),V5(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,e){V3(this,"_throttledDispatchExpand"),T_(this._handlers,function(t,i){e.getZr().off(i,t)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(Tw({type:"parallelAxisExpand"},t))},e.type="parallel",e}(Vj),X3={mousedown:function(t){X4(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(X4(this,"click")&&e){var i=[t.offsetX,t.offsetY];if(Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2)>5)return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==n.behavior&&this._dispatchExpand({axisExpandWindow:n.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&X4(this,"mousemove")){var e=this._model,i=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),n=i.behavior;"jump"===n&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===n?null:{axisExpandWindow:i.axisExpandWindow,animation:"jump"===n?null:{duration:0}})}}};function X4(t,e){var i=t._model;return i.get("axisExpandable")&&i.get("axisExpandTriggerOn")===e}var X6=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var e=this.option;t&&Ty(e,t,!0),this._initDimensions()},e.prototype.contains=function(t,e){var i=t.get("parallelIndex");return null!=i&&e.getComponent("parallel",i)===this},e.prototype.setAxisExpand=function(t){T_(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])},this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],e=this.parallelAxisIndex=[];T_(TI(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(t){return(t.get("parallelIndex")||0)===this.componentIndex},this),function(i){t.push("dim"+i.get("dim")),e.push(i.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(NW),X8=function(){function t(t){this._setting=t||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(t){return this._setting[t]},t.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},t.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(t,e){var i=this._extent;isNaN(t)||(i[0]=t),isNaN(e)||(i[1]=e)},t.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(t){this._isBlank=t},t}();kO(X8);var X9=0,X7=function(){function t(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++X9}return t.createByAxisModel=function(e){var i=e.option,n=i.data,r=n&&TM(n,$t);return new t({categories:r,needCollect:!r,deduplication:!1!==i.dedplication})},t.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},t.prototype.parseAndCollect=function(t){var e,i=this._needCollect;if(!TO(t)&&!i)return t;if(i&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var n=this._getOrCreateMap();return null==(e=n.get(t))&&(i?(e=this.categories.length,this.categories[e]=t,n.set(t,e)):e=NaN),e},t.prototype._getOrCreateMap=function(){return this._map||(this._map=TQ(this.categories))},t}();function $t(t){return TN(t)&&null!=t.value?t.value:t+""}function $e(t){return"interval"===t.type||"log"===t.type}function $i(t){var e=Math.pow(10,A3(t)),i=t/e;return i?2===i?i=3:3===i?i=5:i*=2:i=1,Aq(i*e)}function $n(t,e,i){t[e]=Math.max(Math.min(t[e],i[1]),i[0])}function $r(t,e){return t>=e[0]&&t<=e[1]}function $o(t,e){return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])}function $a(t,e){return t*(e[1]-e[0])+e[0]}var $s=function(t){function e(e){var i=t.call(this,e)||this;i.type="ordinal";var n=i.getSetting("ordinalMeta");return n||(n=new X7({})),Tk(n)&&(n=new X7({categories:TM(n,function(t){return TN(t)?t.value:t})})),i._ordinalMeta=n,i._extent=i.getSetting("extent")||[0,n.categories.length-1],i}return M6(e,t),e.prototype.parse=function(t){return null==t?NaN:TO(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return $r(t=this.parse(t),this._extent)&&null!=this._ordinalMeta.categories[t]},e.prototype.normalize=function(t){return $o(t=this._getTickNumber(this.parse(t)),this._extent)},e.prototype.scale=function(t){return t=Math.round($a(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],e=this._extent,i=e[0];i<=e[1];)t.push({value:i}),i++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(null==t){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var e=t.ordinalNumbers,i=this._ordinalNumbersByTick=[],n=this._ticksByOrdinalNumber=[],r=0,o=this._ordinalMeta.categories.length,a=Math.min(o,e.length);r<a;++r){var s=e[r];i[r]=s,n[s]=r}for(var l=0;r<o;++r){for(;null!=n[l];)l++;i.push(l),n[l]=r}},e.prototype._getTickNumber=function(t){var e=this._ticksByOrdinalNumber;return e&&t>=0&&t<e.length?e[t]:t},e.prototype.getRawOrdinalNumber=function(t){var e=this._ordinalNumbersByTick;return e&&t>=0&&t<e.length?e[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var e=this.getRawOrdinalNumber(t.value),i=this._ordinalMeta.categories[e];return null==i?"":i+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(X8);X8.registerClass($s);var $l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return M6(e,t),e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return $r(t,this._extent)},e.prototype.normalize=function(t){return $o(t,this._extent)},e.prototype.scale=function(t){return $a(t,this._extent)},e.prototype.setExtent=function(t,e){var i=this._extent;isNaN(t)||(i[0]=parseFloat(t)),isNaN(e)||(i[1]=parseFloat(e))},e.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),this.setExtent(e[0],e[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=AQ(t)+2},e.prototype.getTicks=function(t){var e=this._interval,i=this._extent,n=this._niceExtent,r=this._intervalPrecision,o=[];if(!e)return o;i[0]<n[0]&&(t?o.push({value:Aq(n[0]-e,r)}):o.push({value:i[0]}));for(var a=n[0];a<=n[1]&&(o.push({value:a}),(a=Aq(a+e,r))!==o[o.length-1].value);)if(o.length>1e4)return[];var s=o.length?o[o.length-1].value:n[1];return i[1]>s&&(t?o.push({value:Aq(s+e,r)}):o.push({value:i[1]})),o},e.prototype.getMinorTicks=function(t){for(var e=this.getTicks(!0),i=[],n=this.getExtent(),r=1;r<e.length;r++){for(var o=e[r],a=e[r-1],s=0,l=[],h=(o.value-a.value)/t;s<t-1;){var u=Aq(a.value+(s+1)*h);u>n[0]&&u<n[1]&&l.push(u),s++}i.push(l)}return i},e.prototype.getLabel=function(t,e){if(null==t)return"";var i=e&&e.precision;return null==i?i=AQ(t.value)||0:"auto"===i&&(i=this._intervalPrecision),NC(Aq(t.value,i,!0))},e.prototype.calcNiceTicks=function(t,e,i){t=t||5;var n=this._extent,r=n[1]-n[0];if(isFinite(r)){r<0&&(r=-r,n.reverse());var o,a,s,l,h,u,c=(a=t,s={},l=n[1]-n[0],h=s.interval=A4(l/a,!0),null!=e&&h<e&&(h=s.interval=e),null!=i&&h>i&&(h=s.interval=i),u=s.intervalPrecision=AQ(h)+2,isFinite((o=s.niceTickExtent=[Aq(Math.ceil(n[0]/h)*h,u),Aq(Math.floor(n[1]/h)*h,u)])[0])||(o[0]=n[0]),isFinite(o[1])||(o[1]=n[1]),$n(o,0,n),$n(o,1,n),o[0]>o[1]&&(o[0]=o[1]),s);this._intervalPrecision=c.intervalPrecision,this._interval=c.interval,this._niceExtent=c.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var e=this._extent;if(e[0]===e[1]){if(0!==e[0]){var i=Math.abs(e[0]);t.fixMax||(e[1]+=i/2),e[0]-=i/2}else e[1]=1}isFinite(e[1]-e[0])||(e[0]=0,e[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var n=this._interval;t.fixMin||(e[0]=Aq(Math.floor(e[0]/n)*n)),t.fixMax||(e[1]=Aq(Math.ceil(e[1]/n)*n))},e.prototype.setNiceExtent=function(t,e){this._niceExtent=[t,e]},e.type="interval",e}(X8);X8.registerClass($l);var $h=function(t,e,i,n){for(;i<n;){var r=i+n>>>1;t[r][1]<e?i=r+1:n=r}return i},$u=function(t){function e(e){var i=t.call(this,e)||this;return i.type="time",i}return M6(e,t),e.prototype.getLabel=function(t){var e=this.getSetting("useUTC");return Ns(t.value,Ni[function(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}(Na(this._minLevelUnit))]||Ni.second,e,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,e,i){var n=this.getSetting("useUTC");return function(t,e,i,n,r){var o=null;if(TO(i))o=i;else if(TD(i))o=i(t.value,e,{level:t.level});else{var a=Tw({},Nt);if(t.level>0)for(var s=0;s<Nn.length;++s)a[Nn[s]]="{primary|"+a[Nn[s]]+"}";var l=i?!1===i.inherit?i:Tb(i,a):a,h=Nl(t.value,r);if(l[h])o=l[h];else if(l.inherit){for(var u=Nr.indexOf(h),s=u-1;s>=0;--s)if(l[h]){o=l[h];break}o=o||a.none}if(Tk(o)){var c=null==t.level?0:t.level>=0?t.level:o.length+t.level;c=Math.min(c,o.length-1),o=o[c]}}return Ns(new Date(t.value),o,r,n)}(t,e,i,this.getSetting("locale"),n)},e.prototype.getTicks=function(){var t=this._interval,e=this._extent,i=[];if(!t)return i;i.push({value:e[0],level:0});var n=this.getSetting("useUTC"),r=function(t,e,i,n){for(var r=0,o=[],a=[],s=0,l=0,h=0;h<Nr.length&&r++<1e4;++h){var u,c=Na(Nr[h]);if((u=Nr[h])===Na(u)&&(function(t,r,o){var a=[],s=!r.length;if(!function(t,e,i,n){var r=A5(e),o=A5(i),a=function(t){return Nh(r,t,n)===Nh(o,t,n)},s=function(){return a("year")},l=function(){return s()&&a("month")},h=function(){return l()&&a("day")},u=function(){return h()&&a("hour")},c=function(){return u()&&a("minute")},d=function(){return c()&&a("second")};switch(t){case"year":return s();case"month":return l();case"day":return h();case"hour":return u();case"minute":return c();case"second":return d();case"millisecond":return d()&&a("millisecond")}}(Na(t),n[0],n[1],i)){s&&(r=[{value:function(t,e,i){var n=new Date(t);switch(Na(e)){case"year":case"month":n[Ny(i)](0);case"day":n[Nv(i)](1);case"hour":n[Nw(i)](0);case"minute":n[Nb(i)](0);case"second":n[Nx(i)](0),n[NS(i)](0)}return n.getTime()}(new Date(n[0]),t,i)},{value:n[1]}]);for(var l=0;l<r.length-1;l++){var h=r[l].value,u=r[l+1].value;if(h!==u){var c,d,p,f=void 0,g=void 0,m=void 0;switch(t){case"year":f=Math.max(1,Math.round(e/864e5/365)),g=Nu(i),m=i?"setUTCFullYear":"setFullYear";break;case"half-year":case"quarter":case"month":f=(c=e/2592e6)>6?6:c>3?3:c>2?2:1,g=Nc(i),m=Ny(i);break;case"week":case"half-week":case"day":f=(d=e/864e5)>16?16:d>7.5?7:d>3.5?4:d>1.5?2:1,g=Nd(i),m=Nv(i);break;case"half-day":case"quarter-day":case"hour":f=(p=e/36e5)>12?12:p>6?6:p>3.5?4:p>2?2:1,g=Np(i),m=Nw(i);break;case"minute":f=$d(e,!0),g=Nf(i),m=Nb(i);break;case"second":f=$d(e,!1),g=Ng(i),m=Nx(i);break;case"millisecond":f=A4(e,!0),g=Nm(i),m=NS(i)}(function(t,e,i,r,o,a,s){for(var l=new Date(e),h=e,u=l[r]();h<i&&h<=n[1];)s.push({value:h}),u+=t,l[o](u),h=l.getTime();s.push({value:h,notAdd:!0})})(f,h,u,g,m,0,a),"year"===t&&o.length>1&&0===l&&o.unshift({value:o[0].value-f})}}for(var l=0;l<a.length;l++)o.push(a[l])}}(Nr[h],o[o.length-1]||[],a),c!==(Nr[h+1]?Na(Nr[h+1]):null))){if(a.length){l=s,a.sort(function(t,e){return t.value-e.value});for(var d=[],p=0;p<a.length;++p){var f=a[p].value;(0===p||a[p-1].value!==f)&&(d.push(a[p]),f>=n[0]&&f<=n[1]&&s++)}var g=(n[1]-n[0])/e;if(s>1.5*g&&l>g/1.5||(o.push(d),s>g||t===Nr[h]))break}a=[]}}for(var m=TI(TM(o,function(t){return TI(t,function(t){return t.value>=n[0]&&t.value<=n[1]&&!t.notAdd})}),function(t){return t.length>0}),y=[],w=m.length-1,h=0;h<m.length;++h)for(var b=m[h],x=0;x<b.length;++x)y.push({value:b[x].value,level:w-h});y.sort(function(t,e){return t.value-e.value});for(var S=[],h=0;h<y.length;++h)(0===h||y[h].value!==y[h-1].value)&&S.push(y[h]);return S}(this._minLevelUnit,this._approxInterval,n,e);return(i=i.concat(r)).push({value:e[1],level:0}),i},e.prototype.calcNiceExtent=function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=864e5,e[1]+=864e5),e[1]===-1/0&&e[0]===1/0){var i=new Date;e[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),e[0]=e[1]-864e5}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,e,i){t=t||10;var n=this._extent,r=n[1]-n[0];this._approxInterval=r/t,null!=e&&this._approxInterval<e&&(this._approxInterval=e),null!=i&&this._approxInterval>i&&(this._approxInterval=i);var o=$c.length,a=Math.min($h($c,this._approxInterval,0,o),o-1);this._interval=$c[a][1],this._minLevelUnit=$c[Math.max(a-1,0)][0]},e.prototype.parse=function(t){return TL(t)?t:+A5(t)},e.prototype.contain=function(t){return $r(this.parse(t),this._extent)},e.prototype.normalize=function(t){return $o(this.parse(t),this._extent)},e.prototype.scale=function(t){return $a(t,this._extent)},e.type="time",e}($l),$c=[["second",1e3],["minute",6e4],["hour",36e5],["quarter-day",216e5],["half-day",432e5],["day",10368e4],["half-week",3024e5],["week",6048e5],["month",26784e5],["quarter",8208e6],["half-year",15768e6],["year",31536e6]];function $d(t,e){return(t/=e?6e4:1e3)>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}X8.registerClass($u);var $p=X8.prototype,$f=$l.prototype,$g=Math.floor,$m=Math.ceil,$y=Math.pow,$v=Math.log,$w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new $l,e._interval=0,e}return M6(e,t),e.prototype.getTicks=function(t){var e=this._originalScale,i=this._extent,n=e.getExtent();return TM($f.getTicks.call(this,t),function(t){var e=t.value,r=Aq($y(this.base,e));return r=e===i[0]&&this._fixMin?Aq(r,AQ(n[0])):r,{value:r=e===i[1]&&this._fixMax?Aq(r,AQ(n[1])):r}},this)},e.prototype.setExtent=function(t,e){var i=$v(this.base);t=$v(Math.max(0,t))/i,e=$v(Math.max(0,e))/i,$f.setExtent.call(this,t,e)},e.prototype.getExtent=function(){var t=this.base,e=$p.getExtent.call(this);e[0]=$y(t,e[0]),e[1]=$y(t,e[1]);var i=this._originalScale.getExtent();return this._fixMin&&(e[0]=Aq(e[0],AQ(i[0]))),this._fixMax&&(e[1]=Aq(e[1],AQ(i[1]))),e},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=$v(t[0])/$v(e),t[1]=$v(t[1])/$v(e),$p.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},e.prototype.calcNiceTicks=function(t){t=t||10;var e=this._extent,i=e[1]-e[0];if(i!==1/0&&!(i<=0)){var n=Math.pow(10,A3(i));for(t/i*n<=.5&&(n*=10);!isNaN(n)&&1>Math.abs(n)&&Math.abs(n)>0;)n*=10;var r=[Aq($m(e[0]/n)*n),Aq($g(e[1]/n)*n)];this._interval=n,this._niceExtent=r}},e.prototype.calcNiceExtent=function(t){$f.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return $r(t=$v(t)/$v(this.base),this._extent)},e.prototype.normalize=function(t){return $o(t=$v(t)/$v(this.base),this._extent)},e.prototype.scale=function(t){return t=$a(t,this._extent),$y(this.base,t)},e.type="log",e}(X8),$b=$w.prototype;$b.getMinorTicks=$f.getMinorTicks,$b.getLabel=$f.getLabel,X8.registerClass($w);var $x=function(){function t(t,e,i){this._prepareParams(t,e,i)}return t.prototype._prepareParams=function(t,e,i){i[1]<i[0]&&(i=[NaN,NaN]),this._dataMin=i[0],this._dataMax=i[1];var n=this._isOrdinal="ordinal"===t.type;this._needCrossZero="interval"===t.type&&e.getNeedCrossZero&&e.getNeedCrossZero();var r=e.get("min",!0);null==r&&(r=e.get("startValue",!0));var o=this._modelMinRaw=r;TD(o)?this._modelMinNum=$M(t,o({min:i[0],max:i[1]})):"dataMin"!==o&&(this._modelMinNum=$M(t,o));var a=this._modelMaxRaw=e.get("max",!0);if(TD(a)?this._modelMaxNum=$M(t,a({min:i[0],max:i[1]})):"dataMax"!==a&&(this._modelMaxNum=$M(t,a)),n)this._axisDataLen=e.getCategories().length;else{var s=e.get("boundaryGap"),l=Tk(s)?s:[s||0,s||0];"boolean"==typeof l[0]||"boolean"==typeof l[1]?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[AO(l[0],1),AO(l[1],1)]}},t.prototype.calculate=function(){var t,e,i=this._isOrdinal,n=this._dataMin,r=this._dataMax,o=this._axisDataLen,a=this._boundaryGapInner,s=i?null:r-n||Math.abs(n),l="dataMin"===this._modelMinRaw?n:this._modelMinNum,h="dataMax"===this._modelMaxRaw?r:this._modelMaxNum,u=null!=l,c=null!=h;null==l&&(l=i?o?0:NaN:n-a[0]*s),null==h&&(h=i?o?o-1:NaN:r+a[1]*s),null!=l&&isFinite(l)||(l=NaN),null!=h&&isFinite(h)||(h=NaN);var d=(t=l)!=t||(e=h)!=e||i&&!o;this._needCrossZero&&(l>0&&h>0&&!u&&(l=0),l<0&&h<0&&!c&&(h=0));var p=this._determinedMin,f=this._determinedMax;return null!=p&&(l=p,u=!0),null!=f&&(h=f,c=!0),{min:l,max:h,minFixed:u,maxFixed:c,isBlank:d}},t.prototype.modifyDataMinMax=function(t,e){this[$C[t]]=e},t.prototype.setDeterminedMinMax=function(t,e){this[$S[t]]=e},t.prototype.freeze=function(){this.frozen=!0},t}(),$S={min:"_determinedMin",max:"_determinedMax"},$C={min:"_dataMin",max:"_dataMax"};function $_(t,e,i){var n=t.rawExtentInfo;return n||(n=new $x(t,e,i),t.rawExtentInfo=n),n}function $M(t,e){return null==e?null:e!=e?NaN:t.parse(e)}function $T(t,e){var i=t.type,n=$_(t,e,t.getExtent()).calculate();t.setBlank(n.isBlank);var r=n.min,o=n.max,a=e.ecModel;if(a&&"time"===i){var s=WJ("bar",a),l=!1;if(T_(s,function(t){l=l||t.getBaseAxis()===e.axis}),l){var h=function(t,e,i,n){var r=i.axis.getExtent(),o=r[1]-r[0],a=function(t,e,i){if(t&&e)return t[WQ(e)]}(n,i.axis);if(void 0===a)return{min:t,max:e};var s=1/0;T_(a,function(t){s=Math.min(t.offset,s)});var l=-1/0;T_(a,function(t){l=Math.max(t.offset+t.width,l)});var h=(s=Math.abs(s))+(l=Math.abs(l)),u=e-t,c=u/(1-(s+l)/o)-u;return e+=l/h*c,{min:t-=s/h*c,max:e}}(r,o,e,W0(s));r=h.min,o=h.max}}return{extent:[r,o],fixMin:n.minFixed,fixMax:n.maxFixed}}function $I(t,e){var i=$T(t,e),n=i.extent,r=e.get("splitNumber");t instanceof $w&&(t.base=e.get("logBase"));var o=t.type,a=e.get("interval"),s="interval"===o||"time"===o;t.setExtent(n[0],n[1]),t.calcNiceExtent({splitNumber:r,fixMin:i.fixMin,fixMax:i.fixMax,minInterval:s?e.get("minInterval"):null,maxInterval:s?e.get("maxInterval"):null}),null!=a&&t.setInterval&&t.setInterval(a)}function $R(t,e){if(e=e||t.get("type"))switch(e){case"category":return new $s({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new $u({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(X8.getClass(e)||$l)}}function $E(t){var e=t.getLabelModel().get("formatter"),i="category"===t.type?t.scale.getExtent()[0]:null;return"time"===t.scale.type?function(i,n){return t.scale.getFormattedLabel(i,n,e)}:TO(e)?function(i){var n=t.scale.getLabel(i);return e.replace("{value}",null!=n?n:"")}:TD(e)?function(n,r){return null!=i&&(r=n.value-i),e($A(t,n),r,null!=n.level?{level:n.level}:null)}:function(e){return t.scale.getLabel(e)}}function $A(t,e){return"category"===t.type?t.scale.getLabel(e):e.value}function $k(t){var e=t.get("interval");return null==e?"auto":e}function $D(t){return"category"===t.type&&0===$k(t.getLabelModel())}function $O(t,e){var i={};return T_(t.mapDimensionsAll(e),function(e){i[WY(t,e)]=!0}),TR(i)}var $P=kg();function $L(t,e){var i=TM(e,function(e){return t.scale.parse(e)});return"time"===t.type&&i.length>0&&(i.sort(),i.unshift(i[0]),i.push(i[i.length-1])),i}function $N(t,e){var i,n,r,o=$H(t,"labels"),a=$k(e);return $V(o,a)||(TD(a)?n=$W(t,a):(r="auto"===a?null!=(i=$P(t).autoInterval)?i:$P(t).autoInterval=t.calculateCategoryInterval():a,n=$F(t,r)),$B(o,a,{labels:n,labelCategoryInterval:r}))}function $H(t,e){return $P(t)[e]||($P(t)[e]=[])}function $V(t,e){for(var i=0;i<t.length;i++)if(t[i].key===e)return t[i].value}function $B(t,e,i){return t.push({key:e,value:i}),i}function $F(t,e,i){var n=$E(t),r=t.scale,o=r.getExtent(),a=t.getLabelModel(),s=[],l=Math.max((e||0)+1,1),h=o[0],u=r.count();0!==h&&l>1&&u/l>2&&(h=Math.round(Math.ceil(h/l)*l));var c=$D(t),d=a.get("showMinLabel")||c,p=a.get("showMaxLabel")||c;d&&h!==o[0]&&g(o[0]);for(var f=h;f<=o[1];f+=l)g(f);function g(t){var e={value:t};s.push(i?t:{formattedLabel:n(e),rawLabel:r.getLabel(e),tickValue:t})}return p&&f-l!==o[1]&&g(o[1]),s}function $W(t,e,i){var n=t.scale,r=$E(t),o=[];return T_(n.getTicks(),function(t){var a=n.getLabel(t),s=t.value;e(t.value,a)&&o.push(i?s:{formattedLabel:r(t),rawLabel:a,tickValue:s})}),o}var $z=[0,1],$j=function(){function t(t,e,i){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=i||[0,0]}return t.prototype.contain=function(t){var e=this._extent,i=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]);return t>=i&&t<=n},t.prototype.containData=function(t){return this.scale.contain(t)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(t){return AJ(t||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(t,e){var i=this._extent;i[0]=t,i[1]=e},t.prototype.dataToCoord=function(t,e){var i=this._extent,n=this.scale;return t=n.normalize(t),this.onBand&&"ordinal"===n.type&&$U(i=i.slice(),n.count()),A$(t,$z,i,e)},t.prototype.coordToData=function(t,e){var i=this._extent,n=this.scale;this.onBand&&"ordinal"===n.type&&$U(i=i.slice(),n.count());var r=A$(t,i,$z,e);return this.scale.scale(r)},t.prototype.pointToData=function(t,e){},t.prototype.getTicksCoords=function(t){var e,i=(t=t||{}).tickModel||this.getTickModel(),n=((e=this.getTickModel().get("customValues"))?{ticks:$L(this,e)}:"category"===this.type?function(t,e){var i,n,r=$H(t,"ticks"),o=$k(e),a=$V(r,o);if(a)return a;if((!e.get("show")||t.scale.isBlank())&&(i=[]),TD(o))i=$W(t,o,!0);else if("auto"===o){var s=$N(t,t.getLabelModel());n=s.labelCategoryInterval,i=TM(s.labels,function(t){return t.tickValue})}else i=$F(t,n=o,!0);return $B(r,o,{ticks:i,tickCategoryInterval:n})}(this,i):{ticks:TM(this.scale.getTicks(),function(t){return t.value})}).ticks,r=TM(n,function(t){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(t):t),tickValue:t}},this);return function(t,e,i,n){var r,o,a=e.length;if(t.onBand&&!i&&a){var s=t.getExtent();if(1===a)e[0].coord=s[0],r=e[1]={coord:s[1]};else{var l=e[a-1].tickValue-e[0].tickValue,h=(e[a-1].coord-e[0].coord)/l;T_(e,function(t){t.coord-=h/2}),o=1+t.scale.getExtent()[1]-e[a-1].tickValue,r={coord:e[a-1].coord+h*o},e.push(r)}var u=s[0]>s[1];c(e[0].coord,s[0])&&(n?e[0].coord=s[0]:e.shift()),n&&c(s[0],e[0].coord)&&e.unshift({coord:s[0]}),c(s[1],r.coord)&&(n?r.coord=s[1]:e.pop()),n&&c(r.coord,s[1])&&e.push({coord:s[1]})}function c(t,e){return t=Aq(t),e=Aq(e),u?t>e:t<e}}(this,r,i.get("alignWithLabel"),t.clamp),r},t.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick").get("splitNumber");return t>0&&t<100||(t=5),TM(this.scale.getMinorTicks(t),function(t){return TM(t,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this)},this)},t.prototype.getViewLabels=function(){return function(t){var e,i,n,r,o=t.getLabelModel().get("customValues");if(o){var a=$E(t);return{labels:$L(t,o).map(function(e){var i={value:e};return{formattedLabel:a(i),rawLabel:t.scale.getLabel(i),tickValue:e}})}}return"category"===t.type?(e=t.getLabelModel(),i=$N(t,e),!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:i.labelCategoryInterval}:i):(n=t.scale.getTicks(),r=$E(t),{labels:TM(n,function(e,i){return{level:e.level,formattedLabel:r(e,i),rawLabel:t.scale.getLabel(e),tickValue:e.value}})})}(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),i=e[1]-e[0]+(this.onBand?1:0);return 0===i&&(i=1),Math.abs(Math.abs(t[1]-t[0]))/i},t.prototype.calculateCategoryInterval=function(){return function(t){var e,i=(e=t.getLabelModel(),{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}),n=$E(t),r=(i.axisRotate-i.labelRotate)/180*Math.PI,o=t.scale,a=o.getExtent(),s=o.count();if(a[1]-a[0]<1)return 0;var l=1;s>40&&(l=Math.max(1,Math.floor(s/40)));for(var h=a[0],u=t.dataToCoord(h+1)-t.dataToCoord(h),c=0,d=0;h<=a[1];h+=l){var p=0,f=0,g=AE(n({value:h}),i.font,"center","top");p=1.3*g.width,f=1.3*g.height,c=Math.max(c,p,7),d=Math.max(d,f,7)}var m=c/Math.abs(u*Math.cos(r)),y=d/Math.abs(u*Math.sin(r));isNaN(m)&&(m=1/0),isNaN(y)&&(y=1/0);var w=Math.max(0,Math.floor(Math.min(m,y))),b=$P(t.model),x=t.getExtent(),S=b.lastAutoInterval,C=b.lastTickCount;return null!=S&&null!=C&&1>=Math.abs(S-w)&&1>=Math.abs(C-s)&&S>w&&b.axisExtent0===x[0]&&b.axisExtent1===x[1]?w=S:(b.lastTickCount=s,b.lastAutoInterval=w,b.axisExtent0=x[0],b.axisExtent1=x[1]),w}(this)},t}();function $U(t,e){var i=(t[1]-t[0])/e/2;t[0]+=i,t[1]-=i}var $G=function(t){function e(e,i,n,r,o){var a=t.call(this,e,i,n)||this;return a.type=r||"value",a.axisIndex=o,a}return M6(e,t),e.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},e}($j);function $Y(t,e,i,n,r,o){t=t||0;var a,s=i[1]-i[0];if(null!=r&&(r=$$(r,[0,s])),null!=o&&(o=Math.max(o,null!=r?r:0)),"all"===n){var l=Math.abs(e[1]-e[0]);l=$$(l,[0,s]),r=o=$$(l,[r,o]),n=0}e[0]=$$(e[0],i),e[1]=$$(e[1],i);var h=$X(e,n);e[n]+=t;var u=r||0,c=i.slice();return h.sign<0?c[0]+=u:c[1]-=u,e[n]=$$(e[n],c),a=$X(e,n),null!=r&&(a.sign!==h.sign||a.span<r)&&(e[1-n]=e[n]+h.sign*r),a=$X(e,n),null!=o&&a.span>o&&(e[1-n]=e[n]+a.sign*o),e}function $X(t,e){var i=t[e]-t[1-e];return{span:Math.abs(i),sign:i>0?-1:i<0?1:e?-1:1}}function $$(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}var $Z=Math.min,$q=Math.max,$K=Math.floor,$Q=Math.ceil,$J=Math.PI,$0=function(){function t(t,e,i){this.type="parallel",this._axesMap=TQ(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,i)}return t.prototype._init=function(t,e,i){var n=t.dimensions,r=t.parallelAxisIndex;T_(n,function(t,i){var n=r[i],o=e.getComponent("parallelAxis",n),a=this._axesMap.set(t,new $G(t,$R(o),[0,0],o.get("type"),n)),s="category"===a.type;a.onBand=s&&o.get("boundaryGap"),a.inverse=o.get("inverse"),o.axis=a,a.model=o,a.coordinateSystem=o.coordinateSystem=this},this)},t.prototype.update=function(t,e){this._updateAxesFromSeries(this._model,t)},t.prototype.containPoint=function(t){var e=this._makeLayoutInfo(),i=e.axisBase,n=e.layoutBase,r=e.pixelDimIndex,o=t[1-r],a=t[r];return o>=i&&o<=i+e.axisLength&&a>=n&&a<=n+e.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(t,e){e.eachSeries(function(i){if(t.contains(i,e)){var n=i.getData();T_(this.dimensions,function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(n,n.mapDimension(t)),$I(e.scale,e.model)},this)}},this)},t.prototype.resize=function(t,e){this._rect=NP(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var t,e=this._model,i=this._rect,n=["x","y"],r=["width","height"],o=e.get("layout"),a="horizontal"===o?0:1,s=i[r[a]],l=[0,s],h=this.dimensions.length,u=$1(e.get("axisExpandWidth"),l),c=$1(e.get("axisExpandCount")||0,[0,h]),d=e.get("axisExpandable")&&h>3&&h>c&&c>1&&u>0&&s>0,p=e.get("axisExpandWindow");p?(t=$1(p[1]-p[0],l),p[1]=p[0]+t):(t=$1(u*(c-1),l),(p=[u*(e.get("axisExpandCenter")||$K(h/2))-t/2])[1]=p[0]+t);var f=(s-t)/(h-c);f<3&&(f=0);var g=[$K(Aq(p[0]/u,1))+1,$Q(Aq(p[1]/u,1))-1],m=f/u*p[0];return{layout:o,pixelDimIndex:a,layoutBase:i[n[a]],layoutLength:s,axisBase:i[n[1-a]],axisLength:i[r[1-a]],axisExpandable:d,axisExpandWidth:u,axisCollapseWidth:f,axisExpandWindow:p,axisCount:h,winInnerIndices:g,axisExpandWindow0Pos:m}},t.prototype._layoutAxes=function(){var t=this._rect,e=this._axesMap,i=this.dimensions,n=this._makeLayoutInfo(),r=n.layout;e.each(function(t){var e=[0,n.axisLength],i=t.inverse?1:0;t.setExtent(e[i],e[1-i])}),T_(i,function(e,i){var o=(n.axisExpandable?function(t,e){var i,n,r=e.layoutLength,o=e.axisExpandWidth,a=e.axisCount,s=e.axisCollapseWidth,l=e.winInnerIndices,h=s,u=!1;return t<l[0]?(i=t*s,n=s):t<=l[1]?(i=e.axisExpandWindow0Pos+t*o-e.axisExpandWindow[0],h=o,u=!0):(i=r-(a-1-t)*s,n=s),{position:i,axisNameAvailableWidth:h,axisLabelShow:u,nameTruncateMaxWidth:n}}:function(t,e){var i=e.layoutLength/(e.axisCount-1);return{position:i*t,axisNameAvailableWidth:i,axisLabelShow:!0}})(i,n),a={horizontal:{x:o.position,y:n.axisLength},vertical:{x:0,y:o.position}},s=[a[r].x+t.x,a[r].y+t.y],l={horizontal:$J/2,vertical:0}[r],h=IV();Ij(h,h,l),Iz(h,h,s),this._axesLayout[e]={position:s,rotation:l,transform:h,axisNameAvailableWidth:o.axisNameAvailableWidth,axisLabelShow:o.axisLabelShow,nameTruncateMaxWidth:o.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},t.prototype.getAxis=function(t){return this._axesMap.get(t)},t.prototype.dataToPoint=function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},t.prototype.eachActiveState=function(t,e,i,n){null==i&&(i=0),null==n&&(n=t.count());var r=this._axesMap,o=this.dimensions,a=[],s=[];T_(o,function(e){a.push(t.mapDimension(e)),s.push(r.get(e).model)});for(var l=this.hasAxisBrushed(),h=i;h<n;h++){var u=void 0;if(l){u="active";for(var c=t.getValues(a,h),d=0,p=o.length;d<p;d++)if("inactive"===s[d].getActiveState(c[d])){u="inactive";break}}else u="normal";e(u,h)}},t.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,e=this._axesMap,i=!1,n=0,r=t.length;n<r;n++)"normal"!==e.get(t[n]).model.getActiveState()&&(i=!0);return i},t.prototype.axisCoordToPoint=function(t,e){return Lb([t,0],this._axesLayout[e].transform)},t.prototype.getAxisLayout=function(t){return Tm(this._axesLayout[t])},t.prototype.getSlidedAxisExpandWindow=function(t){var e,i=this._makeLayoutInfo(),n=i.pixelDimIndex,r=i.axisExpandWindow.slice(),o=r[1]-r[0],a=[0,i.axisExpandWidth*(i.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:r};var s=t[n]-i.layoutBase-i.axisExpandWindow0Pos,l="slide",h=i.axisCollapseWidth,u=this._model.get("axisExpandSlideTriggerArea"),c=null!=u[0];if(h)c&&h&&s<o*u[0]?(l="jump",e=s-o*u[2]):c&&h&&s>o*(1-u[0])?(l="jump",e=s-o*(1-u[2])):(e=s-o*u[1])>=0&&(e=s-o*(1-u[1]))<=0&&(e=0),(e*=i.axisExpandWidth/h)?$Y(e,r,a,"all"):l="none";else{var d=r[1]-r[0];(r=[$q(0,a[1]*s/d-d/2)])[1]=$Z(a[1],r[0]+d),r[0]=r[1]-d}return{axisExpandWindow:r,behavior:l}},t}();function $1(t,e){return $Z($q(t,e[0]),e[1])}var $2={create:function(t,e){var i=[];return t.eachComponent("parallel",function(n,r){var o=new $0(n,t,e);o.name="parallel_"+r,o.resize(n,e),n.coordinateSystem=o,o.model=n,i.push(o)}),t.eachSeries(function(t){if("parallel"===t.get("coordinateSystem")){var e=t.getReferringComponents("parallel",kw).models[0];t.coordinateSystem=e.coordinateSystem}}),i}},$5={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},$3=Ty({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},$5),$4=Ty({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},$5),$6=Ty({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},$4),$8=Tb({logBase:10},$4),$9={category:$3,value:$4,time:$6,log:$8},$7={value:1,category:1,time:1,log:1};function Zt(t,e,i,n){T_($7,function(r,o){var a=Ty(Ty({},$9[o],!0),n,!0),s=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e+"Axis."+o,i}return M6(i,t),i.prototype.mergeDefaultAndTheme=function(t,e){var i=NN(this),n=i?NV(t):{};Ty(t,e.getTheme().get(o+"Axis")),Ty(t,this.getDefaultOption()),t.type=Ze(t),i&&NH(t,n,i)},i.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=X7.createByAxisModel(this))},i.prototype.getCategories=function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},i.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},i.type=e+"Axis."+o,i.defaultOption=a,i}(i);t.registerComponentModel(s)}),t.registerSubTypeDefaulter(e+"Axis",Ze)}function Ze(t){return t.type||(t.data?"category":"value")}var Zi=function(){function t(){}return t.prototype.getNeedCrossZero=function(){return!this.option.scale},t.prototype.getCoordSysModel=function(){},t}(),Zn=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.activeIntervals=[],i}return M6(e,t),e.prototype.getAreaSelectStyle=function(){return kP([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var e=this.activeIntervals=Tm(t);if(e)for(var i=e.length-1;i>=0;i--)AK(e[i])},e.prototype.getActiveState=function(t){var e=this.activeIntervals;if(!e.length)return"normal";if(null==t||isNaN(+t))return"inactive";if(1===e.length){var i=e[0];if(i[0]<=t&&t<=i[1])return"active"}else for(var n=0,r=e.length;n<r;n++)if(e[n][0]<=t&&t<=e[n][1])return"active";return"inactive"},e}(NW);function Zr(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];if(!n.defaultAttr.ignore){var r=n.label,o=r.getComputedTransform(),a=r.getBoundingRect(),s=!o||o[1]<1e-5&&o[2]<1e-5,l=r.style.margin||0,h=a.clone();h.applyTransform(o),h.x-=l/2,h.y-=l/2,h.width+=l,h.height+=l;var u=s?new Lt(a,o):null;e.push({label:r,labelLine:n.labelLine,rect:h,localRect:a,obb:u,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:s,transform:o})}}return e}function Zo(t,e,i,n,r,o){var a,s,l,h=t.length;if(!(h<2)){t.sort(function(t,i){return t.rect[e]-i.rect[e]});for(var u=0,c=!1,d=[],p=0,f=0;f<h;f++){var g=t[f],m=g.rect;(a=m[e]-u)<0&&(m[e]-=a,g.label[e]-=a,c=!0);var y=Math.max(-a,0);d.push(y),p+=y,u=m[e]+m[i]}p>0&&o&&C(-p/h,0,h);var w=t[0],b=t[h-1];return x(),s<0&&_(-s,.8),l<0&&_(l,.8),x(),S(s,l,1),S(l,s,-1),x(),s<0&&M(-s),l<0&&M(l),c}function x(){s=w.rect[e]-n,l=r-b.rect[e]-b.rect[i]}function S(t,e,i){if(t<0){var n=Math.min(e,-t);if(n>0){C(n*i,0,h);var r=n+t;r<0&&_(-r*i,1)}else _(-t*i,1)}}function C(i,n,r){0!==i&&(c=!0);for(var o=n;o<r;o++){var a=t[o],s=a.rect;s[e]+=i,a.label[e]+=i}}function _(n,r){for(var o=[],a=0,s=1;s<h;s++){var l=t[s-1].rect,u=Math.max(t[s].rect[e]-l[e]-l[i],0);o.push(u),a+=u}if(a){var c=Math.min(Math.abs(n)/a,r);if(n>0)for(var s=0;s<h-1;s++){var d=o[s]*c;C(d,0,s+1)}else for(var s=h-1;s>0;s--){var d=o[s-1]*c;C(-d,s,h)}}}function M(t){for(var e=t<0?-1:1,i=Math.ceil((t=Math.abs(t))/(h-1)),n=0;n<h-1;n++)if(e>0?C(i,0,n+1):C(-i,h-n-1,h),(t-=i)<=0)return}}function Za(t,e,i,n){return Zo(t,"y","height",e,i,n)}function Zs(t){var e=[];t.sort(function(t,e){return e.priority-t.priority});var i=new I1(0,0,0,0);function n(t){if(!t.ignore){var e=t.ensureState("emphasis");null==e.ignore&&(e.ignore=!1)}t.ignore=!0}for(var r=0;r<t.length;r++){var o=t[r],a=o.axisAligned,s=o.localRect,l=o.transform,h=o.label,u=o.labelLine;i.copy(o.rect),i.width-=.1,i.height-=.1,i.x+=.05,i.y+=.05;for(var c=o.obb,d=!1,p=0;p<e.length;p++){var f=e[p];if(i.intersect(f.rect)&&(a&&f.axisAligned||(f.obb||(f.obb=new Lt(f.localRect,f.transform)),c||(c=new Lt(s,l)),c.intersect(f.obb)))){d=!0;break}}d?(n(h),u&&n(u)):(h.attr("ignore",o.defaultAttr.ignore),u&&u.attr("ignore",o.defaultAttr.labelGuideIgnore),e.push(o))}}TS(Zn,Zi);var Zl=Math.PI,Zh=function(){function t(t,e){this.group=new Aj,this.opt=e,this.axisModel=t,Tb(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new Aj({x:e.position[0],y:e.position[1],rotation:e.rotation});i.updateTransform(),this._transformGroup=i}return t.prototype.hasBuilder=function(t){return!!Zu[t]},t.prototype.add=function(t){Zu[t](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(t,e,i){var n,r,o=A0(e-t);return A1(o)?(r=i>0?"top":"bottom",n="center"):A1(o-Zl)?(r=i>0?"bottom":"top",n="center"):(r="middle",n=o>0&&o<Zl?i>0?"right":"left":i>0?"left":"right"),{rotation:o,textAlign:n,textVerticalAlign:r}},t.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},t.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},t}(),Zu={axisLine:function(t,e,i,n){var r=e.get(["axisLine","show"]);if("auto"===r&&t.handleAutoShown&&(r=t.handleAutoShown("axisLine")),r){var o=e.axis.getExtent(),a=n.transform,s=[o[0],0],l=[o[1],0],h=s[0]>l[0];a&&(Ih(s,s,a),Ih(l,l,a));var u=Tw({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),c=new PX({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});Lm(c.shape,c.style.lineWidth),c.anid="line",i.add(c);var d=e.get(["axisLine","symbol"]);if(null!=d){var p=e.get(["axisLine","symbolSize"]);TO(d)&&(d=[d,d]),(TO(p)||TL(p))&&(p=[p,p]);var f=Bj(e.get(["axisLine","symbolOffset"])||0,p),g=p[0],m=p[1];T_([{rotate:t.rotation+Math.PI/2,offset:f[0],r:0},{rotate:t.rotation-Math.PI/2,offset:f[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(e,n){if("none"!==d[n]&&null!=d[n]){var r=BW(d[n],-g/2,-m/2,g,m,u.stroke,!0),o=e.r+e.offset,a=h?l:s;r.attr({rotation:e.rotate,x:a[0]+o*Math.cos(t.rotation),y:a[1]-o*Math.sin(t.rotation),silent:!0,z2:11}),i.add(r)}})}}},axisTickLabel:function(t,e,i,n){var r=function(t,e,i,n){var r=i.axis,o=i.getModel("axisTick"),a=o.get("show");if("auto"===a&&n.handleAutoShown&&(a=n.handleAutoShown("axisTick")),!(!a||r.scale.isBlank())){for(var s=o.getModel("lineStyle"),l=n.tickDirection*o.get("length"),h=Zf(r.getTicksCoords(),e.transform,l,Tb(s.getLineStyle(),{stroke:i.get(["axisLine","lineStyle","color"])}),"ticks"),u=0;u<h.length;u++)t.add(h[u]);return h}}(i,n,e,t),o=function(t,e,i,n){var r=i.axis;if(!(!TW(n.axisLabelShow,i.get(["axisLabel","show"]))||r.scale.isBlank())){var o=i.getModel("axisLabel"),a=o.get("margin"),s=r.getViewLabels(),l=(TW(n.labelRotate,o.get("rotate"))||0)*Zl/180,h=Zh.innerTextLayout(n.rotation,l,n.labelDirection),u=i.getCategories&&i.getCategories(!0),c=[],d=Zh.isLabelSilent(i),p=i.get("triggerEvent");return T_(s,function(l,f){var g="ordinal"===r.scale.type?r.scale.getRawOrdinalNumber(l.tickValue):l.tickValue,m=l.formattedLabel,y=l.rawLabel,w=o;if(u&&u[g]){var b=u[g];TN(b)&&b.textStyle&&(w=new L2(b.textStyle,o,i.ecModel))}var x=w.getTextColor()||i.get(["axisLine","lineStyle","color"]),S=r.dataToCoord(g),C=w.getShallow("align",!0)||h.textAlign,_=Tz(w.getShallow("alignMinLabel",!0),C),M=Tz(w.getShallow("alignMaxLabel",!0),C),T=w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||h.textVerticalAlign,I=Tz(w.getShallow("verticalAlignMinLabel",!0),T),R=Tz(w.getShallow("verticalAlignMaxLabel",!0),T),E=new D0({x:S,y:n.labelOffset+n.labelDirection*a,rotation:h.rotation,silent:d,z2:10+(l.level||0),style:LN(w,{text:m,align:0===f?_:f===s.length-1?M:C,verticalAlign:0===f?I:f===s.length-1?R:T,fill:TD(x)?x("category"===r.type?y:"value"===r.type?g+"":g,f):x})});if(E.anid="label_"+g,p){var A=Zh.makeAxisEventDataBase(i);A.targetType="axisLabel",A.value=y,A.tickIndex=f,"category"===r.type&&(A.dataIndex=g),On(E).eventData=A}e.add(E),E.updateTransform(),c.push(E),t.add(E),E.decomposeTransform()}),c}}(i,n,e,t);(function(t,e,i){if(!$D(t.axis)){var n=t.get(["axisLabel","showMinLabel"]),r=t.get(["axisLabel","showMaxLabel"]);i=i||[];var o=(e=e||[])[0],a=e[1],s=e[e.length-1],l=e[e.length-2],h=i[0],u=i[1],c=i[i.length-1],d=i[i.length-2];!1===n?(Zc(o),Zc(h)):Zd(o,a)&&(n?(Zc(a),Zc(u)):(Zc(o),Zc(h))),!1===r?(Zc(s),Zc(c)):Zd(l,s)&&(r?(Zc(l),Zc(d)):(Zc(s),Zc(c)))}})(e,o,r),function(t,e,i,n){var r=i.axis,o=i.getModel("minorTick");if(!(!o.get("show")||r.scale.isBlank())){var a=r.getMinorTicksCoords();if(a.length)for(var s=o.getModel("lineStyle"),l=n*o.get("length"),h=Tb(s.getLineStyle(),Tb(i.getModel("axisTick").getLineStyle(),{stroke:i.get(["axisLine","lineStyle","color"])})),u=0;u<a.length;u++)for(var c=Zf(a[u],e.transform,l,h,"minorticks_"+u),d=0;d<c.length;d++)t.add(c[d])}}(i,n,e,t.tickDirection),e.get(["axisLabel","hideOverlap"])&&Zs(Zr(TM(o,function(t){return{label:t,priority:t.z2,defaultAttr:{ignore:t.ignore}}})))},axisName:function(t,e,i,n){var r,o,a=TW(t.axisName,e.get("name"));if(a){var s,l,h,u,c,d,p=e.get("nameLocation"),f=t.nameDirection,g=e.getModel("nameTextStyle"),m=e.get("nameGap")||0,y=e.axis.getExtent(),w=y[0]>y[1]?-1:1,b=["start"===p?y[0]-w*m:"end"===p?y[1]+w*m:(y[0]+y[1])/2,Zp(p)?t.labelOffset+f*m:0],x=e.get("nameRotate");null!=x&&(x=x*Zl/180),Zp(p)?r=Zh.innerTextLayout(t.rotation,null!=x?x:t.rotation,f):(s=t.rotation,u=A0((x||0)-s),c=y[0]>y[1],d="start"===p&&!c||"start"!==p&&c,A1(u-Zl/2)?(h=d?"bottom":"top",l="center"):A1(u-1.5*Zl)?(h=d?"top":"bottom",l="center"):(h="middle",l=u<1.5*Zl&&u>Zl/2?d?"left":"right":d?"right":"left"),r={rotation:u,textAlign:l,textVerticalAlign:h},null!=(o=t.axisNameAvailableWidth)&&(isFinite(o=Math.abs(o/Math.sin(r.rotation)))||(o=null)));var S=g.getFont(),C=e.get("nameTruncate",!0)||{},_=C.ellipsis,M=TW(t.nameTruncateMaxWidth,C.maxWidth,o),T=new D0({x:b[0],y:b[1],rotation:r.rotation,silent:Zh.isLabelSilent(e),style:LN(g,{text:a,font:S,overflow:"truncate",width:M,ellipsis:_,fill:g.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:g.get("align")||r.textAlign,verticalAlign:g.get("verticalAlign")||r.textVerticalAlign}),z2:1});if(LR({el:T,componentModel:e,itemName:a}),T.__fullText=a,T.anid="name",e.get("triggerEvent")){var I=Zh.makeAxisEventDataBase(e);I.targetType="axisName",I.name=a,On(T).eventData=I}n.add(T),T.updateTransform(),i.add(T),T.decomposeTransform()}}};function Zc(t){t&&(t.ignore=!0)}function Zd(t,e){var i=t&&t.getBoundingRect().clone(),n=e&&e.getBoundingRect().clone();if(i&&n){var r=IB([]);return Ij(r,r,-t.rotation),i.applyTransform(IW([],r,t.getLocalTransform())),n.applyTransform(IW([],r,e.getLocalTransform())),i.intersect(n)}}function Zp(t){return"middle"===t||"center"===t}function Zf(t,e,i,n,r){for(var o=[],a=[],s=[],l=0;l<t.length;l++){var h=t[l].coord;a[0]=h,a[1]=0,s[0]=h,s[1]=i,e&&(Ih(a,a,e),Ih(s,s,e));var u=new PX({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:n,z2:2,autoBatch:!0,silent:!0});Lm(u.shape,u.style.lineWidth),u.anid=r+"_"+t[l].tickValue,o.push(u)}return o}var Zg=Math.min,Zm=Math.max,Zy=Math.pow,Zv="globalPan",Zw={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Zb={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Zx={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},ZS=0,ZC=function(t){function e(e){var i=t.call(this)||this;return i._track=[],i._covers=[],i._handlers={},i._zr=e,i.group=new Aj,i._uid="brushController_"+ZS++,T_(Zq,function(t,e){this._handlers[e]=TE(t,this)},i),i}return M6(e,t),e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var e,i=this._zr;this._enableGlobalPan||(e=this._uid,GR(i)[Zv]=e),T_(this._handlers,function(t,e){i.on(e,t)}),this._brushType=t.brushType,this._brushOption=Ty(Tm(Zx),t,!0)},e.prototype._doDisableBrush=function(){var t,e,i=this._zr;t=this._uid,(e=GR(i))[Zv]===t&&(e[Zv]=null),T_(this._handlers,function(t,e){i.off(e,t)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var e=this._panels={};T_(t,function(t){e[t.panelId]=Tm(t)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=e.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=TM(t,function(t){return Ty(Tm(Zx),t,!0)});var e=this._covers,i=this._covers=[],n=this,r=this._creatingCover;return new ze(e,t,function(t,e){return o(t.__brushOption,e)},o).add(a).update(a).remove(function(t){e[t]!==r&&n.group.remove(e[t])}).execute(),this;function o(t,e){return(null!=t.id?t.id:"\0-brush-index-"+e)+"-"+t.brushType}function a(o,a){var s=t[o];if(null!=a&&e[a]===r)i[o]=e[a];else{var l=i[o]=null!=a?(e[a].__brushOption=s,e[a]):ZM(n,Z_(n,s));ZR(n,l)}}},e.prototype.unmount=function(){return this.enableBrush(!1),ZD(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(If);function Z_(t,e){var i=ZQ[e.brushType].createCover(t,e);return i.__brushOption=e,ZI(i,e),t.group.add(i),i}function ZM(t,e){var i=ZE(e);return i.endCreating&&(i.endCreating(t,e),ZI(e,e.__brushOption)),e}function ZT(t,e){var i=e.__brushOption;ZE(e).updateCoverShape(t,e,i.range,i)}function ZI(t,e){var i=e.z;null==i&&(i=1e4),t.traverse(function(t){t.z=i,t.z2=i})}function ZR(t,e){ZE(e).updateCommon(t,e),ZT(t,e)}function ZE(t){return ZQ[t.__brushOption.brushType]}function ZA(t,e,i){var n,r=t._panels;if(!r)return!0;var o=t._transform;return T_(r,function(t){t.isTargetByCursor(e,i,o)&&(n=t)}),n}function Zk(t,e){var i=t._panels;if(!i)return!0;var n=e.__brushOption.panelId;return null==n||i[n]}function ZD(t){var e=t._covers,i=e.length;return T_(e,function(e){t.group.remove(e)},t),e.length=0,!!i}function ZO(t,e){var i=TM(t._covers,function(t){var e=t.__brushOption,i=Tm(e.range);return{brushType:e.brushType,panelId:e.panelId,range:i}});t.trigger("brush",{areas:i,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function ZP(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function ZL(t,e,i,n){var r=new Aj;return r.add(new DK({name:"main",style:ZB(i),silent:!0,draggable:!0,cursor:"move",drift:TA(Zz,t,e,r,["n","s","w","e"]),ondragend:TA(ZO,e,{isEnd:!0})})),T_(n,function(i){r.add(new DK({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:TA(Zz,t,e,r,i),ondragend:TA(ZO,e,{isEnd:!0})}))}),r}function ZN(t,e,i,n){var r=n.brushStyle.lineWidth||0,o=Zm(r,6),a=i[0][0],s=i[1][0],l=a-r/2,h=s-r/2,u=i[0][1],c=i[1][1],d=u-o+r/2,p=c-o+r/2,f=u-a,g=c-s,m=f+r,y=g+r;ZV(t,e,"main",a,s,f,g),n.transformable&&(ZV(t,e,"w",l,h,o,y),ZV(t,e,"e",d,h,o,y),ZV(t,e,"n",l,h,m,o),ZV(t,e,"s",l,p,m,o),ZV(t,e,"nw",l,h,o,o),ZV(t,e,"ne",d,h,o,o),ZV(t,e,"sw",l,p,o,o),ZV(t,e,"se",d,p,o,o))}function ZH(t,e){var i=e.__brushOption,n=i.transformable,r=e.childAt(0);r.useStyle(ZB(i)),r.attr({silent:!n,cursor:n?"move":"default"}),T_([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var r,o=e.childOfName(i.join("")),a=1===i.length?ZW(t,i[0]):(("e"===(r=[ZW(t,i[0]),ZW(t,i[1])])[0]||"w"===r[0])&&r.reverse(),r.join(""));o&&o.attr({silent:!n,invisible:!n,cursor:n?Zb[a]+"-resize":null})})}function ZV(t,e,i,n,r,o,a){var s,l,h,u=e.childOfName(i);u&&u.setShape({x:l=Zg((s=ZG(t,e,[[n,r],[n+o,r+a]]))[0][0],s[1][0]),y:h=Zg(s[0][1],s[1][1]),width:Zm(s[0][0],s[1][0])-l,height:Zm(s[0][1],s[1][1])-h})}function ZB(t){return Tb({strokeNoScale:!0},t.brushStyle)}function ZF(t,e,i,n){var r=[Zg(t,i),Zg(e,n)],o=[Zm(t,i),Zm(e,n)];return[[r[0],o[0]],[r[1],o[1]]]}function ZW(t,e){return({left:"w",right:"e",top:"n",bottom:"s"})[Lx({w:"left",e:"right",n:"top",s:"bottom"}[e],Lw(t.group))]}function Zz(t,e,i,n,r,o){var a=i.__brushOption,s=t.toRectRange(a.range),l=ZU(e,r,o);T_(n,function(t){var e=Zw[t];s[e[0]][e[1]]+=l[e[0]]}),a.range=t.fromRectRange(ZF(s[0][0],s[1][0],s[0][1],s[1][1])),ZR(e,i),ZO(e,{isEnd:!1})}function Zj(t,e,i,n){var r=e.__brushOption.range,o=ZU(t,i,n);T_(r,function(t){t[0]+=o[0],t[1]+=o[1]}),ZR(t,e),ZO(t,{isEnd:!1})}function ZU(t,e,i){var n=t.group,r=n.transformCoordToLocal(e,i),o=n.transformCoordToLocal(0,0);return[r[0]-o[0],r[1]-o[1]]}function ZG(t,e,i){var n=Zk(t,e);return n&&!0!==n?n.clipPath(i,t._transform):Tm(i)}function ZY(t){var e=t.event;e.preventDefault&&e.preventDefault()}function ZX(t,e,i){return t.childOfName("main").contain(e,i)}function Z$(t,e,i,n){var r,o=t._creatingCover,a=t._creatingPanel,s=t._brushOption;if(t._track.push(i.slice()),function(t){var e=t._track;if(!e.length)return!1;var i=e[e.length-1],n=e[0],r=i[0]-n[0],o=i[1]-n[1];return Zy(r*r+o*o,.5)>6}(t)||o){if(a&&!o){"single"===s.brushMode&&ZD(t);var l=Tm(s);l.brushType=ZZ(l.brushType,a),l.panelId=!0===a?null:a.panelId,o=t._creatingCover=Z_(t,l),t._covers.push(o)}if(o){var h=ZQ[ZZ(t._brushType,a)];o.__brushOption.range=h.getCreatingRange(ZG(t,o,t._track)),n&&(ZM(t,o),h.updateCommon(t,o)),ZT(t,o),r={isEnd:n}}}else n&&"single"===s.brushMode&&s.removeOnClick&&ZA(t,e,i)&&ZD(t)&&(r={isEnd:n,removeOnClick:!0});return r}function ZZ(t,e){return"auto"===t?e.defaultBrushType:t}var Zq={mousedown:function(t){if(this._dragging)ZK(this,t);else if(!t.target||!t.target.draggable){ZY(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null,(this._creatingPanel=ZA(this,t,e))&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,i=t.offsetY,n=this.group.transformCoordToLocal(e,i);if(!function(t,e,i){if(!(!t._brushType||(n=e.offsetX,r=e.offsetY,o=t._zr,n<0||n>o.getWidth()||r<0||r>o.getHeight()))){var n,r,o,a=t._zr,s=t._covers,l=ZA(t,e,i);if(!t._dragging)for(var h=0;h<s.length;h++){var u=s[h].__brushOption;if(l&&(!0===l||u.panelId===l.panelId)&&ZQ[u.brushType].contain(s[h],i[0],i[1]))return}l&&a.setCursorStyle("crosshair")}}(this,t,n),this._dragging){ZY(t);var r=Z$(this,t,n,!1);r&&ZO(this,r)}},mouseup:function(t){ZK(this,t)}};function ZK(t,e){if(t._dragging){ZY(e);var i=e.offsetX,n=e.offsetY,r=t.group.transformCoordToLocal(i,n),o=Z$(t,e,r,!0);t._dragging=!1,t._track=[],t._creatingCover=null,o&&ZO(t,o)}}var ZQ={lineX:ZJ(0),lineY:ZJ(1),rect:{createCover:function(t,e){function i(t){return t}return ZL({toRectRange:i,fromRectRange:i},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=ZP(t);return ZF(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,i,n){ZN(t,e,i,n)},updateCommon:ZH,contain:ZX},polygon:{createCover:function(t,e){var i=new Aj;return i.add(new Pj({name:"main",style:ZB(e),silent:!0})),i},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new PF({name:"main",draggable:!0,drift:TA(Zj,t,e),ondragend:TA(ZO,t,{isEnd:!0})}))},updateCoverShape:function(t,e,i,n){e.childAt(0).setShape({points:ZG(t,e,i)})},updateCommon:ZH,contain:ZX}};function ZJ(t){return{createCover:function(e,i){return ZL({toRectRange:function(e){var i=[e,[0,100]];return t&&i.reverse(),i},fromRectRange:function(e){return e[t]}},e,i,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var i=ZP(e);return[Zg(i[0][t],i[1][t]),Zm(i[0][t],i[1][t])]},updateCoverShape:function(e,i,n,r){var o,a=Zk(e,i);if(!0!==a&&a.getLinearBrushOtherExtent)o=a.getLinearBrushOtherExtent(t);else{var s=e._zr;o=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[n,o];t&&l.reverse(),ZN(e,i,l,r)},updateCommon:ZH,contain:ZX}}function Z0(t){return t=Z5(t),function(e){return LC(e,t)}}function Z1(t,e){return t=Z5(t),function(i){var n=null!=e?e:i,r=n?t.width:t.height,o=n?t.x:t.y;return[o,o+(r||0)]}}function Z2(t,e,i){var n=Z5(t);return function(t,r){return n.contain(r[0],r[1])&&!GN(t,e,i)}}function Z5(t){return I1.create(t)}var Z3=["axisLine","axisTickLabel","axisName"],Z4=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.init=function(e,i){t.prototype.init.apply(this,arguments),(this._brushController=new ZC(i.getZr())).on("brush",TE(this._onBrush,this))},e.prototype.render=function(t,e,i,n){if(!n||"axisAreaSelect"!==n.type||e.findComponents({mainType:"parallelAxis",query:n})[0]!==t){this.axisModel=t,this.api=i,this.group.removeAll();var r=this._axisGroup;if(this._axisGroup=new Aj,this.group.add(this._axisGroup),t.get("show")){var o=e.getComponent("parallel",t.get("parallelIndex")),a=o.coordinateSystem,s=t.getAreaSelectStyle(),l=s.width,h=t.axis.dim,u=Tw({strokeContainThreshold:l},a.getAxisLayout(h)),c=new Zh(t,u);T_(Z3,c.add,c),this._axisGroup.add(c.getGroup()),this._refreshBrushController(u,s,t,o,l,i),LS(r,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,e,i,n,r,o){var a,s=i.axis.getExtent(),l=s[1]-s[0],h=Math.min(30,.1*Math.abs(l)),u=I1.create({x:s[0],y:-r/2,width:l,height:r});u.x-=h,u.width+=2*h,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:Z0(u),isTargetByCursor:Z2(u,o,n),getLinearBrushOtherExtent:Z1(u,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:!0}).updateCovers((a=i.axis,TM(i.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[a.dataToCoord(t[0],!0),a.dataToCoord(t[1],!0)]}})))},e.prototype._onBrush=function(t){var e=t.areas,i=this.axisModel,n=i.axis,r=TM(e,function(t){return[n.coordToData(t.range[0],!0),n.coordToData(t.range[1],!0)]});(!i.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:r})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(Vj),Z6={type:"axisAreaSelect",event:"axisAreaSelected"},Z8={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Z9(t){t.registerComponentView(X5),t.registerComponentModel(X6),t.registerCoordinateSystem("parallel",$2),t.registerPreprocessor(X2),t.registerComponentModel(Zn),t.registerComponentView(Z4),Zt(t,"parallel",Zn,Z8),t.registerAction(Z6,function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(e){e.axis.model.setActiveIntervals(t.intervals)})}),t.registerAction("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(e){e.setAxisExpand(t)})})}var Z7=["itemStyle","borderWidth"],qt=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],qe=new O3.Circle,qi=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i){var n=this.group,r=t.getData(),o=this._data,a=t.coordinateSystem,s=a.getBaseAxis().isHorizontal(),l=a.master.getRect(),h={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:t,coordSys:a,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:qt[+s],categoryDim:qt[1-+s]};r.diff(o).add(function(t){if(r.hasValue(t)){var e=qu(r,t),i=qn(r,t,e,h),o=qp(r,h,i);r.setItemGraphicEl(t,o),n.add(o),qv(o,h,i)}}).update(function(t,e){var i,a,s,l,u=o.getItemGraphicEl(e);if(!r.hasValue(t)){n.remove(u);return}var c=qu(r,t),d=qn(r,t,c,h),p=qg(r,d);u&&p!==u.__pictorialShapeStr&&(n.remove(u),r.setItemGraphicEl(t,null),u=null),u?(i=u,a=d.animationModel,s=d.dataIndex,l=i.__pictorialBundle,O3.updateProps(l,{x:d.bundlePosition[0],y:d.bundlePosition[1]},a,s),d.symbolRepeat?qa(i,h,d,!0):qs(i,h,d,!0),ql(i,d,!0),qh(i,h,d,!0)):u=qp(r,h,d,!0),r.setItemGraphicEl(t,u),u.__pictorialSymbolMeta=d,n.add(u),qv(u,h,d)}).remove(function(t){var e=o.getItemGraphicEl(t);e&&qf(o,t,e.__pictorialSymbolMeta.animationModel,e)}).execute();var u=t.get("clip",!0)?zb(t.coordinateSystem,!1,t):null;return u?n.setClipPath(u):n.removeClipPath(),this._data=r,this.group},e.prototype.remove=function(t,e){var i=this.group,n=this._data;t.get("animation")?n&&n.eachItemGraphicEl(function(e){qf(n,On(e).dataIndex,t,e)}):i.removeAll()},e.type="pictorialBar",e}(VX);function qn(t,e,i,n){var r,o,a,s,l,h,u,c,d,p,f=t.getItemLayout(e),g=i.get("symbolRepeat"),m=i.get("symbolClip"),y=i.get("symbolPosition")||"start",w=(i.get("symbolRotate")||0)*Math.PI/180||0,b=i.get("symbolPatternSize")||2,x=i.isAnimationEnabled(),S={dataIndex:e,layout:f,itemModel:i,symbolType:t.getItemVisual(e,"symbol")||"circle",style:t.getItemVisual(e,"style"),symbolClip:m,symbolRepeat:g,symbolRepeatDirection:i.get("symbolRepeatDirection"),symbolPatternSize:b,rotation:w,animationModel:x?i:null,hoverScale:x&&i.get(["emphasis","scale"]),z2:i.getShallow("z",!0)||0};(function(t,e,i,n,r){var o,a=n.valueDim,s=t.get("symbolBoundingData"),l=n.coordSys.getOtherAxis(n.coordSys.getBaseAxis()),h=l.toGlobalCoord(l.dataToCoord(0)),u=1-+(i[a.wh]<=0);if(Tk(s)){var c=[qr(l,s[0])-h,qr(l,s[1])-h];c[1]<c[0]&&c.reverse(),o=c[u]}else o=null!=s?qr(l,s)-h:e?n.coordSysExtent[a.index][u]-h:i[a.wh];r.boundingLength=o,e&&(r.repeatCutLength=i[a.wh]),r.pxSign=o>0?1:-1})(i,g,f,n,S),r=S.boundingLength,o=S.pxSign,s=n.valueDim,h=Math.abs(f[(l=n.categoryDim).wh]),(a=Tk(u=t.getItemVisual(e,"symbolSize"))?u.slice():null==u?["100%","100%"]:[u,u])[l.index]=AZ(a[l.index],h),a[s.index]=AZ(a[s.index],g?h:Math.abs(r)),S.symbolSize=a,c=S.symbolScale=[a[0]/b,a[1]/b],c[s.index]*=(n.isHorizontal?-1:1)*o,d=S.symbolScale,(p=i.get(Z7)||0)&&(qe.attr({scaleX:d[0],scaleY:d[1],rotation:w}),qe.updateTransform(),p/=qe.getLineScale(),p*=d[n.valueDim.index]),S.valueLineWidth=p||0;var C=S.symbolSize,_=Bj(i.get("symbolOffset"),C);return function(t,e,i,n,r,o,a,s,l,h,u,c){var d=u.categoryDim,p=u.valueDim,f=c.pxSign,g=Math.max(e[p.index]+s,0),m=g;if(n){var y=Math.abs(l),w=TW(t.get("symbolMargin"),"15%")+"",b=!1;w.lastIndexOf("!")===w.length-1&&(b=!0,w=w.slice(0,w.length-1));var x=AZ(w,e[p.index]),S=Math.max(g+2*x,0),C=b?0:2*x,_=A7(n),M=_?n:qw((y+C)/S);x=(y-M*g)/2/(b?M:Math.max(M-1,1)),S=g+2*x,C=b?0:2*x,_||"fixed"===n||(M=h?qw((Math.abs(h)+C)/S):0),m=M*S-C,c.repeatTimes=M,c.symbolMargin=x}var T=m/2*f,I=c.pathPosition=[];I[d.index]=i[d.wh]/2,I[p.index]="start"===a?T:"end"===a?l-T:l/2,o&&(I[0]+=o[0],I[1]+=o[1]);var R=c.bundlePosition=[];R[d.index]=i[d.xy],R[p.index]=i[p.xy];var E=c.barRectShape=Tw({},i);E[p.wh]=f*Math.max(Math.abs(i[p.wh]),Math.abs(I[p.index]+T)),E[d.wh]=i[d.wh];var A=c.clipShape={};A[d.xy]=-i[d.xy],A[d.wh]=u.ecSize[d.wh],A[p.xy]=0,A[p.wh]=i[p.wh]}(i,C,f,g,0,_,y,S.valueLineWidth,S.boundingLength,S.repeatCutLength,n,S),S}function qr(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function qo(t){var e=t.symbolPatternSize,i=BW(t.symbolType,-e/2,-e/2,e,e);return i.attr({culling:!0}),"image"!==i.type&&i.setStyle({strokeNoScale:!0}),i}function qa(t,e,i,n){var r=t.__pictorialBundle,o=i.symbolSize,a=i.valueLineWidth,s=i.pathPosition,l=e.valueDim,h=i.repeatTimes||0,u=0,c=o[e.valueDim.index]+a+2*i.symbolMargin;for(qm(t,function(t){t.__pictorialAnimationIndex=u,t.__pictorialRepeatTimes=h,u<h?qy(t,null,f(u),i,n):qy(t,null,{scaleX:0,scaleY:0},i,n,function(){r.remove(t)}),u++});u<h;u++){var d=qo(i);d.__pictorialAnimationIndex=u,d.__pictorialRepeatTimes=h,r.add(d);var p=f(u);qy(d,{x:p.x,y:p.y,scaleX:0,scaleY:0},{scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},i,n)}function f(t){var e=s.slice(),n=i.pxSign,r=t;return("start"===i.symbolRepeatDirection?n>0:n<0)&&(r=h-1-t),e[l.index]=c*(r-h/2+.5)+s[l.index],{x:e[0],y:e[1],scaleX:i.symbolScale[0],scaleY:i.symbolScale[1],rotation:i.rotation}}}function qs(t,e,i,n){var r=t.__pictorialBundle,o=t.__pictorialMainPath;o?qy(o,null,{x:i.pathPosition[0],y:i.pathPosition[1],scaleX:i.symbolScale[0],scaleY:i.symbolScale[1],rotation:i.rotation},i,n):(o=t.__pictorialMainPath=qo(i),r.add(o),qy(o,{x:i.pathPosition[0],y:i.pathPosition[1],scaleX:0,scaleY:0,rotation:i.rotation},{scaleX:i.symbolScale[0],scaleY:i.symbolScale[1]},i,n))}function ql(t,e,i){var n=Tw({},e.barRectShape),r=t.__pictorialBarRect;r?qy(r,null,{shape:n},e,i):((r=t.__pictorialBarRect=new O3.Rect({z2:2,shape:n,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,t.add(r))}function qh(t,e,i,n){if(i.symbolClip){var r=t.__pictorialClipPath,o=Tw({},i.clipShape),a=e.valueDim,s=i.animationModel,l=i.dataIndex;if(r)O3.updateProps(r,{shape:o},s,l);else{o[a.wh]=0,r=new O3.Rect({shape:o}),t.__pictorialBundle.setClipPath(r),t.__pictorialClipPath=r;var h={};h[a.wh]=i.clipShape[a.wh],O3[n?"updateProps":"initProps"](r,{shape:h},s,l)}}}function qu(t,e){var i=t.getItemModel(e);return i.getAnimationDelayParams=qc,i.isAnimationEnabled=qd,i}function qc(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function qd(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function qp(t,e,i,n){var r=new O3.Group,o=new O3.Group;return r.add(o),r.__pictorialBundle=o,o.x=i.bundlePosition[0],o.y=i.bundlePosition[1],i.symbolRepeat?qa(r,e,i):qs(r,e,i),ql(r,i,n),qh(r,e,i,n),r.__pictorialShapeStr=qg(t,i),r.__pictorialSymbolMeta=i,r}function qf(t,e,i,n){var r=n.__pictorialBarRect;r&&r.removeTextContent();var o=[];qm(n,function(t){o.push(t)}),n.__pictorialMainPath&&o.push(n.__pictorialMainPath),n.__pictorialClipPath&&(i=null),T_(o,function(t){O3.removeElement(t,{scaleX:0,scaleY:0},i,e,function(){n.parent&&n.parent.remove(n)})}),t.setItemGraphicEl(e,null)}function qg(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function qm(t,e,i){T_(t.__pictorialBundle.children(),function(n){n!==t.__pictorialBarRect&&e.call(i,n)})}function qy(t,e,i,n,r,o){e&&t.attr(e),n.symbolClip&&!r?i&&t.attr(i):i&&O3[r?"updateProps":"initProps"](t,i,n.animationModel,n.dataIndex,o)}function qv(t,e,i){var n=i.dataIndex,r=i.itemModel,o=r.getModel("emphasis"),a=o.getModel("itemStyle").getItemStyle(),s=r.getModel(["blur","itemStyle"]).getItemStyle(),l=r.getModel(["select","itemStyle"]).getItemStyle(),h=r.getShallow("cursor"),u=o.get("focus"),c=o.get("blurScope"),d=o.get("scale");qm(t,function(t){if(t instanceof DU){var e=t.style;t.useStyle(Tw({image:e.image,x:e.x,y:e.y,width:e.width,height:e.height},i.style))}else t.useStyle(i.style);var n=t.ensureState("emphasis");n.style=a,d&&(n.scaleX=1.1*t.scaleX,n.scaleY=1.1*t.scaleY),t.ensureState("blur").style=s,t.ensureState("select").style=l,h&&(t.cursor=h),t.z2=i.z2});var p=e.valueDim.posDesc[+(i.boundingLength>0)],f=t.__pictorialBarRect;f.ignoreClip=!0,LP(f,LL(r),{labelFetcher:e.seriesModel,labelDataIndex:n,defaultText:z_(e.seriesModel.getData(),n),inheritColor:i.style.fill,defaultOpacity:i.style.opacity,defaultOutsidePosition:p}),OB(t,u,c,o.get("disabled"))}function qw(t){var e=Math.round(t);return 1e-4>Math.abs(t-e)?e:Math.ceil(t)}var qb=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.hasSymbolVisual=!0,i.defaultSymbol="roundRect",i}return M6(e,t),e.prototype.getInitialData=function(e){return e.stack=null,t.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=L4(zm.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(zm),qx=2*Math.PI,qS=Math.PI/180;function qC(t,e){return NP(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function q_(t,e){var i,n,r=qC(t,e),o=t.get("center"),a=t.get("radius");Tk(a)||(a=[0,a]);var s=AZ(r.width,e.getWidth()),l=AZ(r.height,e.getHeight()),h=Math.min(s,l),u=AZ(a[0],h/2),c=AZ(a[1],h/2),d=t.coordinateSystem;if(d){var p=d.dataToPoint(o);i=p[0]||0,n=p[1]||0}else Tk(o)||(o=[o,o]),i=AZ(o[0],s)+r.x,n=AZ(o[1],l)+r.y;return{cx:i,cy:n,r0:u,r:c}}function qM(t,e,i){e.eachSeriesByType(t,function(t){var e=t.getData(),n=e.mapDimension("value"),r=qC(t,i),o=q_(t,i),a=o.cx,s=o.cy,l=o.r,h=o.r0,u=-t.get("startAngle")*qS,c=t.get("endAngle"),d=t.get("padAngle")*qS;c="auto"===c?u-qx:-c*qS;var p=t.get("minAngle")*qS+d,f=0;e.each(n,function(t){!isNaN(t)&&f++});var g=e.getSum(n),m=Math.PI/(g||f)*2,y=t.get("clockwise"),w=t.get("roseType"),b=t.get("stillShowZeroSum"),x=e.getDataExtent(n);x[0]=0;var S=y?1:-1,C=[u,c],_=S*d/2;DC(C,!y),u=C[0],c=C[1];var M=qT(t);M.startAngle=u,M.endAngle=c,M.clockwise=y;var T=Math.abs(c-u),I=T,R=0,E=u;if(e.setLayout({viewRect:r,r:l}),e.each(n,function(t,i){if(isNaN(t)){e.setItemLayout(i,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:y,cx:a,cy:s,r0:h,r:w?NaN:l});return}(n="area"!==w?0===g&&b?m:t*m:T/f)<p?(n=p,I-=p):R+=t;var n,r=E+S*n,o=0,u=0;d>n?u=o=E+S*n/2:(o=E+_,u=r-_),e.setItemLayout(i,{angle:n,startAngle:o,endAngle:u,clockwise:y,cx:a,cy:s,r0:h,r:w?A$(t,x,[h,l]):l}),E=r}),I<qx&&f){if(I<=.001){var A=T/f;e.each(n,function(t,i){if(!isNaN(t)){var n=e.getItemLayout(i);n.angle=A;var r=0,o=0;A<d?o=r=u+S*(i+.5)*A:(r=u+S*i*A+_,o=u+S*(i+1)*A-_),n.startAngle=r,n.endAngle=o}})}else m=I/R,E=u,e.each(n,function(t,i){if(!isNaN(t)){var n=e.getItemLayout(i),r=n.angle===p?p:t*m,o=0,a=0;r<d?a=o=E+S*r/2:(o=E+_,a=E+S*r-_),n.startAngle=o,n.endAngle=a,E+=S*r}})}})}var qT=kg(),qI=Math.PI/180;function qR(t,e,i,n,r,o,a,s,l,h){if(!(t.length<2)){for(var u=t.length,c=0;c<u;c++)if("outer"===t[c].position&&"labelLine"===t[c].labelAlignTo){var d=t[c].label.x-h;t[c].linePoints[1][0]+=d,t[c].label.x=h}Za(t,l,l+a)&&function(t){for(var o={list:[],maxY:0},a={list:[],maxY:0},s=0;s<t.length;s++)if("none"===t[s].labelAlignTo){var l=t[s],h=l.label.y>i?a:o,u=Math.abs(l.label.y-i);if(u>=h.maxY){var c=l.label.x-e-l.len2*r,d=n+l.len,f=Math.abs(c)<d?Math.sqrt(u*u/(1-c*c/d/d)):d;h.rB=f,h.maxY=u}h.list.push(l)}p(o),p(a)}(t)}function p(t){for(var o=t.rB,a=o*o,s=0;s<t.list.length;s++){var l=t.list[s],h=Math.abs(l.label.y-i),u=n+l.len,c=e+(Math.sqrt(u*u*(1-Math.abs(h*h/a)))+l.len2)*r,d=c-l.label.x,p=l.targetTextWidth-d*r;qE(l,p,!0),l.label.x=c}}}function qE(t,e,i){if(void 0===i&&(i=!1),null==t.labelStyleWidth){var n=t.label,r=n.style,o=t.rect,a=r.backgroundColor,s=r.padding,l=s?s[1]+s[3]:0,h=r.overflow,u=o.width+(a?0:l);if(e<u||i){var c=o.height;if(h&&h.match("break")){n.setStyle("backgroundColor",null),n.setStyle("width",e-l);var d=n.getBoundingRect();n.setStyle("width",Math.ceil(d.width)),n.setStyle("backgroundColor",a)}else{var p=e-l,f=e<u?p:i?p>t.unconstrainedWidth?null:p:null;n.setStyle("width",f)}var g=n.getBoundingRect();o.width=g.width;var m=(n.style.margin||0)+2.1;o.height=g.height+m,o.y-=(o.height-c)/2}}}function qA(t){return"center"===t.position}var qk=function(t){function e(e,i,n){var r=t.call(this)||this;r.z2=2;var o=new D0;return r.setTextContent(o),r.updateData(e,i,n,!0),r}return M6(e,t),e.prototype.updateData=function(t,e,i,n){var r=t.hostModel,o=t.getItemModel(e),a=o.getModel("emphasis"),s=t.getItemLayout(e),l=Tw(zR(o.getModel("itemStyle"),s,!0),s);if(isNaN(l.startAngle)){this.setShape(l);return}if(n){this.setShape(l);var h=r.getShallow("animationType");r.ecModel.ssr?(OQ(this,{scaleX:0,scaleY:0},r,{dataIndex:e,isFrom:!0}),this.originX=l.cx,this.originY=l.cy):"scale"===h?(this.shape.r=s.r0,OQ(this,{shape:{r:s.r}},r,e)):null!=i?(this.setShape({startAngle:i,endAngle:i}),OQ(this,{shape:{startAngle:s.startAngle,endAngle:s.endAngle}},r,e)):(this.shape.endAngle=s.startAngle,OK(this,{shape:{endAngle:s.endAngle}},r,e))}else O5(this),OK(this,{shape:l},r,e);this.useStyle(t.getItemVisual(e,"style")),Oj(this,o);var u=(s.startAngle+s.endAngle)/2,c=r.get("selectedOffset"),d=Math.cos(u)*c,p=Math.sin(u)*c,f=o.getShallow("cursor");f&&this.attr("cursor",f),this._updateLabel(r,t,e),this.ensureState("emphasis").shape=Tw({r:s.r+(a.get("scale")&&a.get("scaleSize")||0)},zR(a.getModel("itemStyle"),s)),Tw(this.ensureState("select"),{x:d,y:p,shape:zR(o.getModel(["select","itemStyle"]),s)}),Tw(this.ensureState("blur"),{shape:zR(o.getModel(["blur","itemStyle"]),s)});var g=this.getTextGuideLine(),m=this.getTextContent();g&&Tw(g.ensureState("select"),{x:d,y:p}),Tw(m.ensureState("select"),{x:d,y:p}),OB(this,a.get("focus"),a.get("blurScope"),a.get("disabled"))},e.prototype._updateLabel=function(t,e,i){var n=e.getItemModel(i),r=n.getModel("labelLine"),o=e.getItemVisual(i,"style"),a=o&&o.fill,s=o&&o.opacity;LP(this,LL(n),{labelFetcher:e.hostModel,labelDataIndex:i,inheritColor:a,defaultOpacity:s,defaultText:t.getFormattedLabel(i,"normal")||e.getName(i)});var l=this.getTextContent();this.setTextConfig({position:null,rotation:null}),l.attr({z2:10});var h=t.get(["label","position"]);if("outside"!==h&&"outer"!==h)this.removeTextGuideLine();else{var u=this.getTextGuideLine();u||(u=new Pj,this.setTextGuideLine(u)),UN(this,UH(n),{stroke:a,opacity:Tj(r.get(["lineStyle","opacity"]),s,1)})}},e}(PO),qD=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return M6(e,t),e.prototype.render=function(t,e,i,n){var r,o=t.getData(),a=this._data,s=this.group;if(!a&&o.count()>0){for(var l=o.getItemLayout(0),h=1;isNaN(l&&l.startAngle)&&h<o.count();++h)l=o.getItemLayout(h);l&&(r=l.startAngle)}if(this._emptyCircleSector&&s.remove(this._emptyCircleSector),0===o.count()&&t.get("showEmptyCircle")){var u=qT(t),c=new PO({shape:Tw(q_(t,i),u)});c.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=c,s.add(c)}o.diff(a).add(function(t){var e=new qk(o,t,r);o.setItemGraphicEl(t,e),s.add(e)}).update(function(t,e){var i=a.getItemGraphicEl(e);i.updateData(o,t,r),i.off("click"),s.add(i),o.setItemGraphicEl(t,i)}).remove(function(e){O2(a.getItemGraphicEl(e),t,e)}).execute(),function(t){var e,i,n=t.getData(),r=[],o=!1,a=(t.get("minShowLabelAngle")||0)*qI,s=n.getLayout("viewRect"),l=n.getLayout("r"),h=s.width,u=s.x,c=s.y,d=s.height;function p(t){t.ignore=!0}n.each(function(t){var s,c,d,f,g=n.getItemGraphicEl(t),m=g.shape,y=g.getTextContent(),w=g.getTextGuideLine(),b=n.getItemModel(t),x=b.getModel("label"),S=x.get("position")||b.get(["emphasis","label","position"]),C=x.get("distanceToLabelLine"),_=x.get("alignTo"),M=AZ(x.get("edgeDistance"),h),T=x.get("bleedMargin"),I=b.getModel("labelLine"),R=I.get("length");R=AZ(R,h);var E=I.get("length2");if(E=AZ(E,h),Math.abs(m.endAngle-m.startAngle)<a){T_(y.states,p),y.ignore=!0,w&&(T_(w.states,p),w.ignore=!0);return}if(function(t){if(!t.ignore)return!0;for(var e in t.states)if(!1===t.states[e].ignore)return!0;return!1}(y)){var A=(m.startAngle+m.endAngle)/2,k=Math.cos(A),D=Math.sin(A);e=m.cx,i=m.cy;var O="inside"===S||"inner"===S;if("center"===S)s=m.cx,c=m.cy,f="center";else{var P=(O?(m.r+m.r0)/2*k:m.r*k)+e,L=(O?(m.r+m.r0)/2*D:m.r*D)+i;if(s=P+3*k,c=L+3*D,!O){var N=P+k*(R+l-m.r),H=L+D*(R+l-m.r),V=N+(k<0?-1:1)*E;s="edge"===_?k<0?u+M:u+h-M:V+(k<0?-C:C),c=H,d=[[P,L],[N,H],[V,H]]}f=O?"center":"edge"===_?k>0?"right":"left":k>0?"left":"right"}var B=Math.PI,F=0,W=x.get("rotate");if(TL(W))F=B/180*W;else if("center"===S)F=0;else if("radial"===W||!0===W)F=k<0?-A+B:-A;else if("tangential"===W&&"outside"!==S&&"outer"!==S){var z=Math.atan2(k,D);z<0&&(z=2*B+z),D>0&&(z=B+z),F=z-B}if(o=!!F,y.x=s,y.y=c,y.rotation=F,y.setStyle({verticalAlign:"middle"}),O){y.setStyle({align:f});var j=y.states.select;j&&(j.x+=y.x,j.y+=y.y)}else{var U=y.getBoundingRect().clone();U.applyTransform(y.getComputedTransform());var G=(y.style.margin||0)+2.1;U.y-=G/2,U.height+=G,r.push({label:y,labelLine:w,position:S,len:R,len2:E,minTurnAngle:I.get("minTurnAngle"),maxSurfaceAngle:I.get("maxSurfaceAngle"),surfaceNormal:new IY(k,D),linePoints:d,textAlign:f,labelDistance:C,labelAlignTo:_,edgeDistance:M,bleedMargin:T,rect:U,unconstrainedWidth:U.width,labelStyleWidth:y.style.width})}g.setTextConfig({inside:O})}}),!o&&t.get("avoidLabelOverlap")&&function(t,e,i,n,r,o,a,s){for(var l=[],h=[],u=Number.MAX_VALUE,c=-Number.MAX_VALUE,d=0;d<t.length;d++){var p=t[d].label;qA(t[d])||(p.x<e?(u=Math.min(u,p.x),l.push(t[d])):(c=Math.max(c,p.x),h.push(t[d])))}for(var d=0;d<t.length;d++){var f=t[d];if(!qA(f)&&f.linePoints){if(null!=f.labelStyleWidth)continue;var p=f.label,g=f.linePoints,m=void 0;m="edge"===f.labelAlignTo?p.x<e?g[2][0]-f.labelDistance-a-f.edgeDistance:a+r-f.edgeDistance-g[2][0]-f.labelDistance:"labelLine"===f.labelAlignTo?p.x<e?u-a-f.bleedMargin:a+r-c-f.bleedMargin:p.x<e?p.x-a-f.bleedMargin:a+r-p.x-f.bleedMargin,f.targetTextWidth=m,qE(f,m)}}qR(h,e,i,n,1,r,o,a,s,c),qR(l,e,i,n,-1,r,o,a,s,u);for(var d=0;d<t.length;d++){var f=t[d];if(!qA(f)&&f.linePoints){var p=f.label,g=f.linePoints,y="edge"===f.labelAlignTo,w=p.style.padding,b=w?w[1]+w[3]:0,x=p.style.backgroundColor?0:b,S=f.rect.width+x,C=g[1][0]-g[2][0];y?p.x<e?g[2][0]=a+f.edgeDistance+S+f.labelDistance:g[2][0]=a+r-f.edgeDistance-S-f.labelDistance:(p.x<e?g[2][0]=p.x+f.labelDistance:g[2][0]=p.x-f.labelDistance,g[1][0]=g[2][0]+C),g[1][1]=g[2][1]=p.y}}}(r,e,i,l,h,d,u,c);for(var f=0;f<r.length;f++){var g=r[f],m=g.label,y=g.labelLine,w=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:g.textAlign}),w&&(T_(m.states,p),m.ignore=!0);var b=m.states.select;b&&(b.x+=m.x,b.y+=m.y)}if(y){var x=g.linePoints;w||!x?(T_(y.states,p),y.ignore=!0):(UO(x,g.minTurnAngle),function(t,e,i){if(i<=180&&i>0){i=i/180*Math.PI,UM.fromArray(t[0]),UT.fromArray(t[1]),UI.fromArray(t[2]),IY.sub(UR,UT,UM),IY.sub(UE,UI,UT);var n=UR.len(),r=UE.len();if(!(n<.001)&&!(r<.001)&&(UR.scale(1/n),UE.scale(1/r),UR.dot(e)<Math.cos(i))){var o=US(UT.x,UT.y,UI.x,UI.y,UM.x,UM.y,Uk,!1);UD.fromArray(Uk);var a=Math.PI/2,s=a+Math.acos(UE.dot(e))-i;if(s>=a)IY.copy(UD,UI);else{UD.scaleAndAdd(UE,o/Math.tan(Math.PI/2-s));var l=UI.x!==UT.x?(UD.x-UT.x)/(UI.x-UT.x):(UD.y-UT.y)/(UI.y-UT.y);if(isNaN(l))return;l<0?IY.copy(UD,UT):l>1&&IY.copy(UD,UI)}UD.toArray(t[1])}}}(x,g.surfaceNormal,g.maxSurfaceAngle),y.setShape({points:x}),m.__hostTarget.textGuideLineConfig={anchor:new IY(x[0][0],x[0][1])})}}}(t),"expansion"!==t.get("animationTypeUpdate")&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,e){var i=e.getData().getItemLayout(0);if(i){var n=t[0]-i.cx,r=t[1]-i.cy,o=Math.sqrt(n*n+r*r);return o<=i.r&&o>=i.r0}},e.type="pie",e}(VX),qO=kg(),qP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new UW(TE(this.getData,this),TE(this.getRawData,this)),this._defaultLabelLine(e)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return zX(this,{coordDimensions:["value"],encodeDefaulter:TA(N2,this)})},e.prototype.getDataParams=function(e){var i=this.getData(),n=qO(i),r=n.seats;if(!r){var o=[];i.each(i.mapDimension("value"),function(t){o.push(t)}),r=n.seats=function(t,e){var i=TT(t,function(t,e){return t+(isNaN(e)?0:e)},0);if(0===i)return[];for(var n=Math.pow(10,e),r=TM(t,function(t){return(isNaN(t)?0:t)/i*n*100}),o=100*n,a=TM(r,function(t){return Math.floor(t)}),s=TT(a,function(t,e){return t+e},0),l=TM(r,function(t,e){return t-a[e]});s<o;){for(var h=Number.NEGATIVE_INFINITY,u=null,c=0,d=l.length;c<d;++c)l[c]>h&&(h=l[c],u=c);++a[u],l[u]=0,++s}return TM(a,function(t){return t/n})}(o,i.hostModel.get("percentPrecision"))}var a=t.prototype.getDataParams.call(this,e);return a.percent=r[e]||0,a.$vars.push("percent"),a},e.prototype._defaultLabelLine=function(t){ko(t,"labelLine",["show"]);var e=t.labelLine,i=t.emphasis.labelLine;e.show=e.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(VL);function qL(t){t.eachSeriesByType("radar",function(t){var e=t.getData(),i=[],n=t.coordinateSystem;if(n){var r=n.getIndicatorAxes();T_(r,function(t,o){e.each(e.mapDimension(r[o].dim),function(t,e){i[e]=i[e]||[];var r=n.dataToPoint(t,o);i[e][o]=qN(r)?r:[n.cx,n.cy]})}),e.each(function(t){var r=function(t,e,i){if(t&&e){for(var n=0,r=t.length;n<r;n++)if(e.call(void 0,t[n],n,t))return t[n]}}(i[t],function(t){return qN(t)})||[n.cx,n.cy];i[t].push(r.slice()),e.setItemLayout(t,i[t])})}})}function qN(t){return!isNaN(t[0])&&!isNaN(t[1])}function qH(t){var e=t.polar;if(e){Tk(e)||(e=[e]);var i=[];T_(e,function(e,n){e.indicator?(e.type&&!e.shape&&(e.shape=e.type),t.radar=t.radar||[],Tk(t.radar)||(t.radar=[t.radar]),t.radar.push(e)):i.push(e)}),t.polar=i}T_(t.series,function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)})}var qV=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i){var n=t.coordinateSystem,r=this.group,o=t.getData(),a=this._data;function s(e,i,n,r,o,a){n.removeAll();for(var s=0;s<i.length-1;s++){var l=function(t,e){var i=t.getItemVisual(e,"symbol")||"circle";if("none"!==i){var n=Bz(t.getItemVisual(e,"symbolSize")),r=BW(i,-1,-1,2,2),o=t.getItemVisual(e,"symbolRotate")||0;return r.attr({style:{strokeNoScale:!0},z2:100,scaleX:n[0]/2,scaleY:n[1]/2,rotation:o*Math.PI/180||0}),r}}(r,o);l&&(l.__dimIdx=s,e[s]?(l.setPosition(e[s]),O3[a?"initProps":"updateProps"](l,{x:i[s][0],y:i[s][1]},t,o)):l.setPosition(i[s]),n.add(l))}}function l(t){return TM(t,function(t){return[n.cx,n.cy]})}o.diff(a).add(function(e){var i=o.getItemLayout(e);if(i){var n=new O3.Polygon,r=new O3.Polyline,a={shape:{points:i}};n.shape.points=l(i),r.shape.points=l(i),O3.initProps(n,a,t,e),O3.initProps(r,a,t,e);var h=new O3.Group,u=new O3.Group;h.add(r),h.add(n),h.add(u),s(r.shape.points,i,u,o,e,!0),o.setItemGraphicEl(e,h)}}).update(function(e,i){var n=a.getItemGraphicEl(i),r=n.childAt(0),l=n.childAt(1),h=n.childAt(2),u={shape:{points:o.getItemLayout(e)}};u.shape.points&&(s(r.shape.points,u.shape.points,h,o,e,!1),O5(l),O5(r),O3.updateProps(r,u,t),O3.updateProps(l,u,t),o.setItemGraphicEl(e,n))}).remove(function(t){r.remove(a.getItemGraphicEl(t))}).execute(),o.eachItemGraphicEl(function(t,e){var i=o.getItemModel(e),n=t.childAt(0),a=t.childAt(1),s=t.childAt(2),l=o.getItemVisual(e,"style"),h=l.fill;r.add(t),n.useStyle(Tb(i.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:h})),Oj(n,i,"lineStyle"),Oj(a,i,"areaStyle");var u=i.getModel("areaStyle"),c=u.isEmpty()&&u.parentModel.isEmpty();a.ignore=c,T_(["emphasis","select","blur"],function(t){var e=i.getModel([t,"areaStyle"]),n=e.isEmpty()&&e.parentModel.isEmpty();a.ensureState(t).ignore=n&&c}),a.useStyle(Tb(u.getAreaStyle(),{fill:h,opacity:.7,decal:l.decal}));var d=i.getModel("emphasis"),p=d.getModel("itemStyle").getItemStyle();s.eachChild(function(t){if(t instanceof DU){var n=t.style;t.useStyle(Tw({image:n.image,x:n.x,y:n.y,width:n.width,height:n.height},l))}else t.useStyle(l),t.setColor(h),t.style.strokeNoScale=!0;t.ensureState("emphasis").style=Tm(p);var r=o.getStore().get(o.getDimensionIndex(t.__dimIdx),e);(null==r||isNaN(r))&&(r=""),LP(t,LL(i),{labelFetcher:o.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:r,inheritColor:h,defaultOpacity:l.opacity})}),OB(t,d.get("focus"),d.get("blurScope"),d.get("disabled"))}),this._data=o},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(VX),qB=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.hasSymbolVisual=!0,i}return M6(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new UW(TE(this.getData,this),TE(this.getRawData,this))},e.prototype.getInitialData=function(t,e){return zX(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,e,i){var n=this.getData(),r=this.coordinateSystem.getIndicatorAxes(),o=this.getData().getName(t),a=""===o?this.name:o,s=VR(this,t);return VS("section",{header:a,sortBlocks:!0,blocks:TM(r,function(e){var i=n.get(n.mapDimension(e.dim),t);return VS("nameValue",{markerType:"subItem",markerColor:s,name:e.name,value:i,sortParam:i})})})},e.prototype.getTooltipPosition=function(t){if(null!=t){for(var e=this.getData(),i=this.coordinateSystem,n=e.getValues(TM(i.dimensions,function(t){return e.mapDimension(t)}),t),r=0,o=n.length;r<o;r++)if(!isNaN(n[r])){var a=i.getIndicatorAxes();return i.coordToPoint(a[r].dataToCoord(n[r]),r)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(VL),qF=$9.value;function qW(t,e){return Tb({show:e},t)}var qz=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),i=this.get("scale"),n=this.get("axisLine"),r=this.get("axisTick"),o=this.get("axisLabel"),a=this.get("axisName"),s=this.get(["axisName","show"]),l=this.get(["axisName","formatter"]),h=this.get("axisNameGap"),u=this.get("triggerEvent"),c=TM(this.get("indicator")||[],function(c){null!=c.max&&c.max>0&&!c.min?c.min=0:null!=c.min&&c.min<0&&!c.max&&(c.max=0);var d=a;null!=c.color&&(d=Tb({color:c.color},a));var p=Ty(Tm(c),{boundaryGap:t,splitNumber:e,scale:i,axisLine:n,axisTick:r,axisLabel:o,name:c.text,showName:s,nameLocation:"end",nameGap:h,nameTextStyle:d,triggerEvent:u},!1);if(TO(l)){var f=p.name;p.name=l.replace("{value}",null!=f?f:"")}else TD(l)&&(p.name=l(p.name,p));var g=new L2(p,null,this.ecModel);return TS(g,Zi.prototype),g.mainType="radar",g.componentIndex=this.componentIndex,g},this);this._indicatorModels=c},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Ty({lineStyle:{color:"#bbb"}},qF.axisLine),axisLabel:qW(qF.axisLabel,!1),axisTick:qW(qF.axisTick,!1),splitLine:qW(qF.splitLine,!0),splitArea:qW(qF.splitArea,!0),indicator:[]},e}(NW),qj=["axisLine","axisTickLabel","axisName"],qU=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var e=t.coordinateSystem;T_(TM(e.getIndicatorAxes(),function(t){var i=t.model.get("showName")?t.name:"";return new Zh(t.model,{axisName:i,position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(t){T_(qj,t.add,t),this.group.add(t.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(t){var e=t.coordinateSystem,i=e.getIndicatorAxes();if(i.length){var n=t.get("shape"),r=t.getModel("splitLine"),o=t.getModel("splitArea"),a=r.getModel("lineStyle"),s=o.getModel("areaStyle"),l=r.get("show"),h=o.get("show"),u=a.get("color"),c=s.get("color"),d=Tk(u)?u:[u],p=Tk(c)?c:[c],f=[],g=[];if("circle"===n)for(var m=i[0].getTicksCoords(),y=e.cx,w=e.cy,b=0;b<m.length;b++){if(l){var x=E(f,d,b);f[x].push(new Pm({shape:{cx:y,cy:w,r:m[b].coord}}))}if(h&&b<m.length-1){var x=E(g,p,b);g[x].push(new PN({shape:{cx:y,cy:w,r0:m[b].coord,r:m[b+1].coord}}))}}else for(var S,C=TM(i,function(t,i){var n=t.getTicksCoords();return S=null==S?n.length-1:Math.min(n.length-1,S),TM(n,function(t){return e.coordToPoint(t.coord,i)})}),_=[],b=0;b<=S;b++){for(var M=[],T=0;T<i.length;T++)M.push(C[T][b]);if(M[0]&&M.push(M[0].slice()),l){var x=E(f,d,b);f[x].push(new Pj({shape:{points:M}}))}if(h&&_){var x=E(g,p,b-1);g[x].push(new PF({shape:{points:M.concat(_)}}))}_=M.slice().reverse()}var I=a.getLineStyle(),R=s.getAreaStyle();T_(g,function(t,e){this.group.add(Lf(t,{style:Tb({stroke:"none",fill:p[e%p.length]},R),silent:!0}))},this),T_(f,function(t,e){this.group.add(Lf(t,{style:Tb({fill:"none",stroke:d[e%d.length]},I),silent:!0}))},this)}function E(t,e,i){var n=i%e.length;return t[n]=t[n]||[],n}},e.type="radar",e}(Vj),qG=function(t){function e(e,i,n){var r=t.call(this,e,i,n)||this;return r.type="value",r.angle=0,r.name="",r}return M6(e,t),e}($j),qY=Math.log;function qX(t,e,i){var n=$l.prototype,r=n.getTicks.call(i),o=n.getTicks.call(i,!0),a=r.length-1,s=n.getInterval.call(i),l=$T(t,e),h=l.extent,u=l.fixMin,c=l.fixMax;if("log"===t.type){var d=qY(t.base);h=[qY(h[0])/d,qY(h[1])/d]}t.setExtent(h[0],h[1]),t.calcNiceExtent({splitNumber:a,fixMin:u,fixMax:c});var p=n.getExtent.call(t);u&&(h[0]=p[0]),c&&(h[1]=p[1]);var f=n.getInterval.call(t),g=h[0],m=h[1];if(u&&c)f=(m-g)/a;else if(u)for(m=h[0]+f*a;m<h[1]&&isFinite(m)&&isFinite(h[1]);)f=$i(f),m=h[0]+f*a;else if(c)for(g=h[1]-f*a;g>h[0]&&isFinite(g)&&isFinite(h[0]);)f=$i(f),g=h[1]-f*a;else{t.getTicks().length-1>a&&(f=$i(f));var y=f*a;(g=Aq((m=Math.ceil(h[1]/f)*f)-y))<0&&h[0]>=0?(g=0,m=Aq(y)):m>0&&h[1]<=0&&(m=0,g=-Aq(y))}var w=(r[0].value-o[0].value)/s,b=(r[a].value-o[a].value)/s;n.setExtent.call(t,g+f*w,m+f*b),n.setInterval.call(t,f),(w||b)&&n.setNiceExtent.call(t,g+f,m-f)}var q$=function(){function t(t,e,i){this.dimensions=[],this._model=t,this._indicatorAxes=TM(t.getIndicatorModels(),function(t,e){var i="indicator_"+e,n=new qG(i,new $l);return n.name=t.get("name"),n.model=t,t.axis=n,this.dimensions.push(i),n},this),this.resize(t,i)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(t,e){var i=this._indicatorAxes[e];return this.coordToPoint(i.dataToCoord(t),e)},t.prototype.coordToPoint=function(t,e){var i=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(i),this.cy-t*Math.sin(i)]},t.prototype.pointToData=function(t){var e,i=t[0]-this.cx,n=t[1]-this.cy,r=Math.sqrt(i*i+n*n);i/=r;for(var o=Math.atan2(-(n/=r),i),a=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var h=this._indicatorAxes[l],u=Math.abs(o-h.angle);u<a&&(e=h,s=l,a=u)}return[s,+(e&&e.coordToData(r))]},t.prototype.resize=function(t,e){var i=t.get("center"),n=e.getWidth(),r=e.getHeight(),o=Math.min(n,r)/2;this.cx=AZ(i[0],n),this.cy=AZ(i[1],r),this.startAngle=t.get("startAngle")*Math.PI/180;var a=t.get("radius");(TO(a)||TL(a))&&(a=[0,a]),this.r0=AZ(a[0],o),this.r=AZ(a[1],o),T_(this._indicatorAxes,function(t,e){t.setExtent(this.r0,this.r);var i=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;i=Math.atan2(Math.sin(i),Math.cos(i)),t.angle=i},this)},t.prototype.update=function(t,e){var i=this._indicatorAxes,n=this._model;T_(i,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(e,r){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===n){var o=e.getData();T_(i,function(t){t.scale.unionExtentFromData(o,o.mapDimension(t.dim))})}},this);var r=n.get("splitNumber"),o=new $l;o.setExtent(0,r),o.setInterval(1),T_(i,function(t,e){qX(t.scale,t.model,o)})},t.prototype.convertToPixel=function(t,e,i){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(t,e,i){return console.warn("Not implemented."),null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.create=function(e,i){var n=[];return e.eachComponent("radar",function(r){var o=new t(r,e,i);n.push(o),r.coordinateSystem=o}),e.eachSeriesByType("radar",function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("radarIndex")||0])}),n},t.dimensions=[],t}();function qZ(t){t.registerCoordinateSystem("radar",q$),t.registerComponentModel(qz),t.registerComponentView(qU),t.registerVisual({seriesType:"radar",reset:function(t){var e=t.getData();e.each(function(t){e.setItemVisual(t,"legendIcon","roundRect")}),e.setVisual("legendIcon","roundRect")}})}var qq=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},qK=function(t){function e(e){return t.call(this,e)||this}return M6(e,t),e.prototype.getDefaultShape=function(){return new qq},e.prototype.buildPath=function(t,e){var i=e.extent;t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),"vertical"===e.orient?(t.lineTo(e.x2+i,e.y2),t.bezierCurveTo(e.cpx2+i,e.cpy2,e.cpx1+i,e.cpy1,e.x1+i,e.y1)):(t.lineTo(e.x2,e.y2+i),t.bezierCurveTo(e.cpx2,e.cpy2+i,e.cpx1,e.cpy1+i,e.x1,e.y1+i)),t.closePath()},e.prototype.highlight=function(){OA(this)},e.prototype.downplay=function(){Ok(this)},e}(DB),qQ=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i._focusAdjacencyDisabled=!1,i}return M6(e,t),e.prototype.render=function(t,e,i){var n,r,o,a=this,s=t.getGraph(),l=this.group,h=t.layoutInfo,u=h.width,c=h.height,d=t.getData(),p=t.getData("edge"),f=t.get("orient");this._model=t,l.removeAll(),l.x=h.x,l.y=h.y,s.eachEdge(function(e){var i,n,r,o,a,s,h,d,g=new qK,m=On(g);m.dataIndex=e.dataIndex,m.seriesIndex=t.seriesIndex,m.dataType="edge";var y=e.getModel(),w=y.getModel("lineStyle"),b=w.get("curveness"),x=e.node1.getLayout(),S=e.node1.getModel(),C=S.get("localX"),_=S.get("localY"),M=e.node2.getLayout(),T=e.node2.getModel(),I=T.get("localX"),R=T.get("localY"),E=e.getLayout();g.shape.extent=Math.max(1,E.dy),g.shape.orient=f,"vertical"===f?(i=(null!=C?C*u:x.x)+E.sy,n=(null!=_?_*c:x.y)+x.dy,r=(null!=I?I*u:M.x)+E.ty,o=null!=R?R*c:M.y,a=i,s=n*(1-b)+o*b,h=r,d=n*b+o*(1-b)):(i=(null!=C?C*u:x.x)+x.dx,n=(null!=_?_*c:x.y)+E.sy,r=null!=I?I*u:M.x,o=(null!=R?R*c:M.y)+E.ty,a=i*(1-b)+r*b,s=n,h=i*b+r*(1-b),d=o),g.setShape({x1:i,y1:n,x2:r,y2:o,cpx1:a,cpy1:s,cpx2:h,cpy2:d}),g.useStyle(w.getItemStyle()),qJ(g.style,f,e);var A=""+y.get("value"),k=LL(y,"edgeLabel");LP(g,k,{labelFetcher:{getFormattedLabel:function(e,i,n,r,o,a){return t.getFormattedLabel(e,i,"edge",r,Tj(o,k.normal&&k.normal.get("formatter"),A),a)}},labelDataIndex:e.dataIndex,defaultText:A}),g.setTextConfig({position:"inside"});var D=y.getModel("emphasis");Oj(g,y,"lineStyle",function(t){var i=t.getItemStyle();return qJ(i,f,e),i}),l.add(g),p.setItemGraphicEl(e.dataIndex,g);var O=D.get("focus");OB(g,"adjacency"===O?e.getAdjacentDataIndices():"trajectory"===O?e.getTrajectoryDataIndices():O,D.get("blurScope"),D.get("disabled"))}),s.eachNode(function(e){var i=e.getLayout(),n=e.getModel(),r=n.get("localX"),o=n.get("localY"),a=n.getModel("emphasis"),s=n.get(["itemStyle","borderRadius"])||0,h=new DK({shape:{x:null!=r?r*u:i.x,y:null!=o?o*c:i.y,width:i.dx,height:i.dy,r:s},style:n.getModel("itemStyle").getItemStyle(),z2:10});LP(h,LL(n),{labelFetcher:{getFormattedLabel:function(e,i){return t.getFormattedLabel(e,i,"node")}},labelDataIndex:e.dataIndex,defaultText:e.id}),h.disableLabelAnimation=!0,h.setStyle("fill",e.getVisual("color")),h.setStyle("decal",e.getVisual("style").decal),Oj(h,n),l.add(h),d.setItemGraphicEl(e.dataIndex,h),On(h).dataType="node";var p=a.get("focus");OB(h,"adjacency"===p?e.getAdjacentDataIndices():"trajectory"===p?e.getTrajectoryDataIndices():p,a.get("blurScope"),a.get("disabled"))}),d.eachItemGraphicEl(function(e,n){d.getItemModel(n).get("draggable")&&(e.drift=function(e,r){a._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=r,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:d.getRawIndex(n),localX:this.shape.x/u,localY:this.shape.y/c})},e.ondragend=function(){a._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move")}),!this._data&&t.isAnimationEnabled()&&l.setClipPath((n=l.getBoundingRect(),r=function(){l.removeClipPath()},OQ(o=new DK({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}}),{shape:{width:n.width+20}},t,r),o)),this._data=t.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(VX);function qJ(t,e,i){switch(t.fill){case"source":t.fill=i.node1.getVisual("color"),t.decal=i.node1.getVisual("style").decal;break;case"target":t.fill=i.node2.getVisual("color"),t.decal=i.node2.getVisual("style").decal;break;case"gradient":var n=i.node1.getVisual("color"),r=i.node2.getVisual("color");TO(n)&&TO(r)&&(t.fill=new P3(0,0,+("horizontal"===e),+("vertical"===e),[{color:n,offset:0},{color:r,offset:1}]))}}var q0=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.getInitialData=function(t,e){var i=t.edges||t.links,n=t.data||t.nodes,r=t.levels;this.levelModels=[];for(var o=this.levelModels,a=0;a<r.length;a++)null!=r[a].depth&&r[a].depth>=0&&(o[r[a].depth]=new L2(r[a],this,e));if(n&&i)return G4(n,i,this,!0,function(t,e){t.wrapMethod("getItemModel",function(t,e){var i=t.parentModel,n=i.getData().getItemLayout(e);if(n){var r=n.depth,o=i.levelModels[r];o&&(t.parentModel=o)}return t}),e.wrapMethod("getItemModel",function(t,e){var i=t.parentModel,n=i.getGraph().getEdgeByIndex(e).node1.getLayout();if(n){var r=n.depth,o=i.levelModels[r];o&&(t.parentModel=o)}return t})}).data},e.prototype.setNodePosition=function(t,e){var i=(this.option.data||this.option.nodes)[t];i.localX=e[0],i.localY=e[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,e,i){function n(t){return isNaN(t)||null==t}if("edge"===i){var r=this.getDataParams(t,i),o=r.data,a=r.value;return VS("nameValue",{name:o.source+" -- "+o.target,value:a,noValue:n(a)})}var s=this.getGraph().getNodeByIndex(t).getLayout().value,l=this.getDataParams(t,i).data.name;return VS("nameValue",{name:null!=l?l+"":null,value:s,noValue:n(s)})},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(e,i){var n=t.prototype.getDataParams.call(this,e,i);if(null==n.value&&"node"===i){var r=this.getGraph().getNodeByIndex(e).getLayout().value;n.value=r}return n},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(VL);function q1(t,e){t.eachSeriesByType("sankey",function(t){var i,n,r=t.get("nodeWidth"),o=t.get("nodeGap"),a=NP(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});t.layoutInfo=a;var s=a.width,l=a.height,h=t.getGraph(),u=h.nodes,c=h.edges;T_(u,function(t){var e=Kt(t.outEdges,q7),i=Kt(t.inEdges,q7),n=t.getValue()||0;t.setLayout({value:Math.max(e,i,n)},!0)});var d=0!==TI(u,function(t){return 0===t.getLayout().value}).length?0:t.get("layoutIterations");(function(t,e,i,n,r,o,a){for(var s,l=[],h=[],u=[],c=[],d=0,p=0;p<e.length;p++)l[p]=1;for(var p=0;p<t.length;p++)h[p]=t[p].inEdges.length,0===h[p]&&u.push(t[p]);for(var f=-1;u.length;){for(var g=0;g<u.length;g++){var m=u[g],y=m.hostGraph.data.getRawDataItem(m.dataIndex),w=null!=y.depth&&y.depth>=0;w&&y.depth>f&&(f=y.depth),m.setLayout({depth:w?y.depth:d},!0),"vertical"===o?m.setLayout({dy:i},!0):m.setLayout({dx:i},!0);for(var b=0;b<m.outEdges.length;b++){var x=m.outEdges[b];l[e.indexOf(x)]=0;var S=x.node2,C=t.indexOf(S);0==--h[C]&&0>c.indexOf(S)&&c.push(S)}}++d,u=c,c=[]}for(var p=0;p<l.length;p++)if(1===l[p])throw Error("Sankey is a DAG, the original data has cycle!");var _=f>d-1?f:d-1;a&&"left"!==a&&function(t,e,i,n){if("right"===e){for(var r=[],o=t,a=0;o.length;){for(var s=0;s<o.length;s++){var l=o[s];l.setLayout({skNodeHeight:a},!0);for(var h=0;h<l.inEdges.length;h++){var u=l.inEdges[h];0>r.indexOf(u.node1)&&r.push(u.node1)}}o=r,r=[],++a}T_(t,function(t){q2(t)||t.setLayout({depth:Math.max(0,n-t.getLayout().skNodeHeight)},!0)})}else"justify"===e&&T_(t,function(t){q2(t)||t.outEdges.length||t.setLayout({depth:n},!0)})}(t,a,0,_),s="vertical"===o?(r-i)/_:(n-i)/_,T_(t,function(t){var e=t.getLayout().depth*s;"vertical"===o?t.setLayout({y:e},!0):t.setLayout({x:e},!0)})})(u,c,r,s,l,i=t.get("orient"),t.get("nodeAlign")),function(t,e,i,n,r,o,a){var s,l,h,u,c=(s=[],l="vertical"===a?"y":"x",(h=kC(t,function(t){return t.getLayout()[l]})).keys.sort(function(t,e){return t-e}),T_(h.keys,function(t){s.push(h.buckets.get(t))}),s);u=1/0,T_(c,function(t){var e=t.length,o=0;T_(t,function(t){o+=t.getLayout().value});var s="vertical"===a?(n-(e-1)*r)/o:(i-(e-1)*r)/o;s<u&&(u=s)}),T_(c,function(t){T_(t,function(t,e){var i=t.getLayout().value*u;"vertical"===a?(t.setLayout({x:e},!0),t.setLayout({dx:i},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:i},!0))})}),T_(e,function(t){var e=+t.getValue()*u;t.setLayout({dy:e},!0)}),q5(c,r,i,n,a);for(var d=1;o>0;o--)(function(t,e,i){T_(t.slice().reverse(),function(t){T_(t,function(t){if(t.outEdges.length){var n=Kt(t.outEdges,q3,i)/Kt(t.outEdges,q7);if(isNaN(n)){var r=t.outEdges.length;n=r?Kt(t.outEdges,q4,i)/r:0}if("vertical"===i){var o=t.getLayout().x+(n-q9(t,i))*e;t.setLayout({x:o},!0)}else{var a=t.getLayout().y+(n-q9(t,i))*e;t.setLayout({y:a},!0)}}})})})(c,d*=.99,a),q5(c,r,i,n,a),function(t,e,i){T_(t,function(t){T_(t,function(t){if(t.inEdges.length){var n=Kt(t.inEdges,q6,i)/Kt(t.inEdges,q7);if(isNaN(n)){var r=t.inEdges.length;n=r?Kt(t.inEdges,q8,i)/r:0}if("vertical"===i){var o=t.getLayout().x+(n-q9(t,i))*e;t.setLayout({x:o},!0)}else{var a=t.getLayout().y+(n-q9(t,i))*e;t.setLayout({y:a},!0)}}})})}(c,d,a),q5(c,r,i,n,a)}(u,c,l,s,o,d,i),n="vertical"===i?"x":"y",T_(u,function(t){t.outEdges.sort(function(t,e){return t.node2.getLayout()[n]-e.node2.getLayout()[n]}),t.inEdges.sort(function(t,e){return t.node1.getLayout()[n]-e.node1.getLayout()[n]})}),T_(u,function(t){var e=0,i=0;T_(t.outEdges,function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy}),T_(t.inEdges,function(t){t.setLayout({ty:i},!0),i+=t.getLayout().dy})})})}function q2(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=e.depth&&e.depth>=0}function q5(t,e,i,n,r){var o="vertical"===r?"x":"y";T_(t,function(t){t.sort(function(t,e){return t.getLayout()[o]-e.getLayout()[o]});for(var a,s,l,h=0,u=t.length,c="vertical"===r?"dx":"dy",d=0;d<u;d++)(l=h-(s=t[d]).getLayout()[o])>0&&(a=s.getLayout()[o]+l,"vertical"===r?s.setLayout({x:a},!0):s.setLayout({y:a},!0)),h=s.getLayout()[o]+s.getLayout()[c]+e;if((l=h-e-("vertical"===r?n:i))>0){a=s.getLayout()[o]-l,"vertical"===r?s.setLayout({x:a},!0):s.setLayout({y:a},!0),h=a;for(var d=u-2;d>=0;--d)(l=(s=t[d]).getLayout()[o]+s.getLayout()[c]+e-h)>0&&(a=s.getLayout()[o]-l,"vertical"===r?s.setLayout({x:a},!0):s.setLayout({y:a},!0)),h=s.getLayout()[o]}})}function q3(t,e){return q9(t.node2,e)*t.getValue()}function q4(t,e){return q9(t.node2,e)}function q6(t,e){return q9(t.node1,e)*t.getValue()}function q8(t,e){return q9(t.node1,e)}function q9(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function q7(t){return t.getValue()}function Kt(t,e,i){for(var n=0,r=t.length,o=-1;++o<r;){var a=+e(t[o],i);isNaN(a)||(n+=a)}return n}var Ke=function(){function t(e){var i,n=e.mappingMethod,r=e.type,o=this.option=Tm(e);this.type=r,this.mappingMethod=n,this._normalizeData=Kc[n];var a=t.visualHandlers[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[n],"piecewise"===n?(Ki(o),i=o.pieceList,o.hasSpecialVisual=!1,T_(i,function(t,e){t.originIndex=e,null!=t.visual&&(o.hasSpecialVisual=!0)})):"category"===n?o.categories?function(t){var e=t.categories,i=t.categoryMap={},n=t.visual;if(T_(e,function(t,e){i[t]=e}),!Tk(n)){var r=[];TN(n)?T_(n,function(t,e){var n=i[e];r[null!=n?n:-1]=t}):r[-1]=n,n=Ku(t,r)}for(var o=e.length-1;o>=0;o--)null==n[o]&&(delete i[e[o]],e.pop())}(o):Ki(o,!0):(TY("linear"!==n||o.dataExtent),Ki(o))}return t.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},t.prototype.getNormalizer=function(){return TE(this._normalizeData,this)},t.listVisualTypes=function(){return TR(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(t,e,i){TN(t)?T_(t,e,i):e.call(i,t)},t.mapVisual=function(e,i,n){var r,o=Tk(e)?[]:TN(e)?{}:(r=!0,null);return t.eachVisual(e,function(t,e){var a=i.call(n,t,e);r?o=a:o[e]=a}),o},t.retrieveVisuals=function(e){var i,n={};return e&&T_(t.visualHandlers,function(t,r){e.hasOwnProperty(r)&&(n[r]=e[r],i=!0)}),i?n:null},t.prepareVisualTypes=function(t){if(Tk(t))t=t.slice();else{if(!TN(t))return[];var e=[];T_(t,function(t,i){e.push(i)}),t=e}return t.sort(function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1}),t},t.dependsOn=function(t,e){return"color"===e?!!(t&&0===t.indexOf(e)):t===e},t.findPieceIndex=function(t,e,i){for(var n,r=1/0,o=0,a=e.length;o<a;o++){var s=e[o].value;if(null!=s){if(s===t||TO(s)&&s===t+"")return o;i&&b(s,o)}}for(var o=0,a=e.length;o<a;o++){var l,h,u,c,d,p,f,g,m=e[o],y=m.interval,w=m.close;if(y){if(y[0]===-1/0){if(l=w[1],h=y[1],l?t<=h:t<h)return o}else if(y[1]===1/0){if(u=w[0],c=y[0],u?c<=t:c<t)return o}else if(d=w[0],p=y[0],(d?p<=t:p<t)&&(f=w[1],g=y[1],f?t<=g:t<g))return o;i&&b(y[0],o),i&&b(y[1],o)}}if(i)return t===1/0?e.length-1:t===-1/0?0:n;function b(e,i){var o=Math.abs(e-t);o<r&&(r=o,n=i)}},t.visualHandlers={color:{applyVisual:Ko("color"),getColorMapper:function(){var t=this.option;return TE("category"===t.mappingMethod?function(t,e){return e||(t=this._normalizeData(t)),Ka.call(this,t)}:function(e,i,n){var r=!!n;return i||(e=this._normalizeData(e)),n=RK(e,t.parsedVisual,n),r?n:R0(n,"rgba")},this)},_normalizedToVisual:{linear:function(t){return R0(RK(t,this.option.parsedVisual),"rgba")},category:Ka,piecewise:function(t,e){var i=Kh.call(this,e);return null==i&&(i=R0(RK(t,this.option.parsedVisual),"rgba")),i},fixed:Ks}},colorHue:Kn(function(t,e){return RQ(t,e)}),colorSaturation:Kn(function(t,e){return RQ(t,null,e)}),colorLightness:Kn(function(t,e){return RQ(t,null,null,e)}),colorAlpha:Kn(function(t,e){return RJ(t,e)}),decal:{applyVisual:Ko("decal"),_normalizedToVisual:{linear:null,category:Ka,piecewise:null,fixed:null}},opacity:{applyVisual:Ko("opacity"),_normalizedToVisual:Kl([0,1])},liftZ:{applyVisual:Ko("liftZ"),_normalizedToVisual:{linear:Ks,category:Ks,piecewise:Ks,fixed:Ks}},symbol:{applyVisual:function(t,e,i){i("symbol",this.mapValueToVisual(t))},_normalizedToVisual:{linear:Kr,category:Ka,piecewise:function(t,e){var i=Kh.call(this,e);return null==i&&(i=Kr.call(this,t)),i},fixed:Ks}},symbolSize:{applyVisual:Ko("symbolSize"),_normalizedToVisual:Kl([0,1])}},t}();function Ki(t,e){var i=t.visual,n=[];TN(i)?T_(i,function(t){n.push(t)}):null!=i&&n.push(i),e||1!==n.length||({color:1,symbol:1}).hasOwnProperty(t.type)||(n[1]=n[0]),Ku(t,n)}function Kn(t){return{applyVisual:function(e,i,n){var r=this.mapValueToVisual(e);n("color",t(i("color"),r))},_normalizedToVisual:Kl([0,1])}}function Kr(t){var e=this.option.visual;return e[Math.round(A$(t,[0,1],[0,e.length-1],!0))]||{}}function Ko(t){return function(e,i,n){n(t,this.mapValueToVisual(e))}}function Ka(t){var e=this.option.visual;return e[this.option.loop&&-1!==t?t%e.length:t]}function Ks(){return this.option.visual[0]}function Kl(t){return{linear:function(e){return A$(e,t,this.option.visual,!0)},category:Ka,piecewise:function(e,i){var n=Kh.call(this,i);return null==n&&(n=A$(e,t,this.option.visual,!0)),n},fixed:Ks}}function Kh(t){var e=this.option,i=e.pieceList;if(e.hasSpecialVisual){var n=Ke.findPieceIndex(t,i),r=i[n];if(r&&r.visual)return r.visual[this.type]}}function Ku(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=TM(e,function(t){return R$(t)||[0,0,0,1]})),e}var Kc={linear:function(t){return A$(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,i=Ke.findPieceIndex(t,e,!0);if(null!=i)return A$(i,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?-1:e},fixed:T5};function Kd(t){t.eachSeriesByType("sankey",function(t){var e=t.getGraph(),i=e.nodes,n=e.edges;if(i.length){var r=1/0,o=-1/0;T_(i,function(t){var e=t.getLayout().value;e<r&&(r=e),e>o&&(o=e)}),T_(i,function(e){var i=new Ke({type:"color",mappingMethod:"linear",dataExtent:[r,o],visual:t.get("color")}).mapValueToVisual(e.getLayout().value),n=e.getModel().get(["itemStyle","color"]);null!=n?(e.setVisual("color",n),e.setVisual("style",{fill:n})):(e.setVisual("color",i),e.setVisual("style",{fill:i}))})}n.length&&T_(n,function(t){var e=t.getModel().get("lineStyle");t.setVisual("style",e)})})}var Kp=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.hasSymbolVisual=!0,i}return M6(e,t),e.prototype.getInitialData=function(t,e){return zg(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},e.prototype.brushSelector=function(t,e,i){return i.point(e.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(VL),Kf=function(){},Kg=function(t){function e(e){var i=t.call(this,e)||this;return i._off=0,i.hoverDataIdx=-1,i}return M6(e,t),e.prototype.getDefaultShape=function(){return new Kf},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,e){var i,n=e.points,r=e.size,o=this.symbolProxy,a=o.shape,s=t.getContext?t.getContext():t,l=s&&r[0]<4,h=this.softClipShape;if(l){this._ctx=s;return}for(this._ctx=null,i=this._off;i<n.length;){var u=n[i++],c=n[i++];!(isNaN(u)||isNaN(c))&&(!h||h.contain(u,c))&&(a.x=u-r[0]/2,a.y=c-r[1]/2,a.width=r[0],a.height=r[1],o.buildPath(t,a,!0))}this.incremental&&(this._off=i,this.notClear=!0)},e.prototype.afterBrush=function(){var t,e=this.shape,i=e.points,n=e.size,r=this._ctx,o=this.softClipShape;if(r){for(t=this._off;t<i.length;){var a=i[t++],s=i[t++];!(isNaN(a)||isNaN(s))&&(!o||o.contain(a,s))&&r.fillRect(a-n[0]/2,s-n[1]/2,n[0],n[1])}this.incremental&&(this._off=t,this.notClear=!0)}},e.prototype.findDataIndex=function(t,e){for(var i=this.shape,n=i.points,r=i.size,o=Math.max(r[0],4),a=Math.max(r[1],4),s=n.length/2-1;s>=0;s--){var l=2*s,h=n[l]-o/2,u=n[l+1]-a/2;if(t>=h&&e>=u&&t<=h+o&&e<=u+a)return s}return -1},e.prototype.contain=function(t,e){var i=this.transformCoordToLocal(t,e),n=this.getBoundingRect();return(t=i[0],e=i[1],n.contain(t,e))?(this.hoverDataIdx=this.findDataIndex(t,e))>=0:(this.hoverDataIdx=-1,!1)},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var e=this.shape,i=e.points,n=e.size,r=n[0],o=n[1],a=1/0,s=1/0,l=-1/0,h=-1/0,u=0;u<i.length;){var c=i[u++],d=i[u++];a=Math.min(c,a),l=Math.max(c,l),s=Math.min(d,s),h=Math.max(d,h)}t=this._rect=new I1(a-r/2,s-o/2,l-a+r,h-s+o)}return t},e}(DB),Km=function(){function t(){this.group=new Aj}return t.prototype.updateData=function(t,e){this._clear();var i=this._create();i.setShape({points:t.getLayout("points")}),this._setCommon(i,t,e)},t.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild(function(t){if(null!=t.startIndex){var i=(t.endIndex-t.startIndex)*2,n=8*t.startIndex;e=new Float32Array(e.buffer,n,i)}t.setShape("points",e),t.reset()})},t.prototype.incrementalPrepareUpdate=function(t){this._clear()},t.prototype.incrementalUpdate=function(t,e,i){var n=this._newAdded[0],r=e.getLayout("points"),o=n&&n.shape.points;if(o&&o.length<2e4){var a=o.length,s=new Float32Array(a+r.length);s.set(o),s.set(r,a),n.endIndex=t.end,n.setShape({points:s})}else{this._newAdded=[];var l=this._create();l.startIndex=t.start,l.endIndex=t.end,l.incremental=!0,l.setShape({points:r}),this._setCommon(l,e,i)}},t.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},t.prototype._create=function(){var t=new Kg({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},t.prototype._setCommon=function(t,e,i){var n=e.hostModel;i=i||{};var r=e.getVisual("symbolSize");t.setShape("size",r instanceof Array?r:[r,r]),t.softClipShape=i.clipShape||null,t.symbolProxy=BW(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var o=t.shape.size[0]<4;t.useStyle(n.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var a=e.getVisual("style"),s=a&&a.fill;s&&t.setColor(s);var l=On(t);l.seriesIndex=n.seriesIndex,t.on("mousemove",function(e){l.dataIndex=null;var i=t.hoverDataIdx;i>=0&&(l.dataIndex=i+(t.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),Ky=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i){var n=t.getData();this._updateSymbolDraw(n,t).updateData(n,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,e,i){var n=t.getData();this._updateSymbolDraw(n,t).incrementalPrepareUpdate(n),this._finished=!1},e.prototype.incrementalRender=function(t,e,i){this._symbolDraw.incrementalUpdate(t,e.getData(),{clipShape:this._getClipShape(e)}),this._finished=t.end===e.getData().count()},e.prototype.updateTransform=function(t,e,i){var n=t.getData();if(this.group.dirty(),!this._finished||n.count()>1e4)return{update:!0};var r=Um("").reset(t,e,i);r.progress&&r.progress({start:0,end:n.count(),count:n.count()},n),this._symbolDraw.updateLayout(n)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var e=t.coordinateSystem;return e&&e.getArea&&e.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,e){var i=this._symbolDraw,n=e.pipelineContext.large;return i&&n===this._isLargeDraw||(i&&i.remove(),i=this._symbolDraw=n?new Km:new Up,this._isLargeDraw=n,this.group.removeAll()),this.group.add(i.group),i},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(VX),Kv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(NW),Kw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",kw).models[0]},e.type="cartesian2dAxis",e}(NW);TS(Kw,Zi);var Kb=function(){function t(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return t.prototype.getAxis=function(t){return this._axes[t]},t.prototype.getAxes=function(){return TM(this._dimList,function(t){return this._axes[t]},this)},t.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),TI(this.getAxes(),function(e){return e.scale.type===t})},t.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},t}(),Kx=["x","y"];function KS(t){return"interval"===t.type||"time"===t.type}var KC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=Kx,e}return M6(e,t),e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,e=this.getAxis("y").scale;if(KS(t)&&KS(e)){var i=t.getExtent(),n=e.getExtent(),r=this.dataToPoint([i[0],n[0]]),o=this.dataToPoint([i[1],n[1]]),a=i[1]-i[0],s=n[1]-n[0];if(a&&s){var l=(o[0]-r[0])/a,h=(o[1]-r[1])/s,u=r[0]-i[0]*l,c=r[1]-n[0]*h,d=this._transform=[l,0,0,h,u,c];this._invTransform=IG([],d)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var e=this.getAxis("x"),i=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&i.contain(i.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,e){var i=this.dataToPoint(t),n=this.dataToPoint(e),r=this.getArea(),o=new I1(i[0],i[1],n[0]-i[0],n[1]-i[1]);return r.intersect(o)},e.prototype.dataToPoint=function(t,e,i){i=i||[];var n=t[0],r=t[1];if(this._transform&&null!=n&&isFinite(n)&&null!=r&&isFinite(r))return Ih(i,t,this._transform);var o=this.getAxis("x"),a=this.getAxis("y");return i[0]=o.toGlobalCoord(o.dataToCoord(n,e)),i[1]=a.toGlobalCoord(a.dataToCoord(r,e)),i},e.prototype.clampData=function(t,e){var i=this.getAxis("x").scale,n=this.getAxis("y").scale,r=i.getExtent(),o=n.getExtent(),a=i.parse(t[0]),s=n.parse(t[1]);return(e=e||[])[0]=Math.min(Math.max(Math.min(r[0],r[1]),a),Math.max(r[0],r[1])),e[1]=Math.min(Math.max(Math.min(o[0],o[1]),s),Math.max(o[0],o[1])),e},e.prototype.pointToData=function(t,e){var i=[];if(this._invTransform)return Ih(i,t,this._invTransform);var n=this.getAxis("x"),r=this.getAxis("y");return i[0]=n.coordToData(n.toLocalCoord(t[0]),e),i[1]=r.coordToData(r.toLocalCoord(t[1]),e),i},e.prototype.getOtherAxis=function(t){return this.getAxis("x"===t.dim?"y":"x")},e.prototype.getArea=function(t){t=t||0;var e=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),n=Math.min(e[0],e[1])-t,r=Math.min(i[0],i[1])-t,o=Math.max(e[0],e[1])-n+t,a=Math.max(i[0],i[1])-r+t;return new I1(n,r,o,a)},e}(Kb),K_=function(t){function e(e,i,n,r,o){var a=t.call(this,e,i,n)||this;return a.index=0,a.type=r||"value",a.position=o||"bottom",a}return M6(e,t),e.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},e.prototype.getGlobalExtent=function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},e.prototype.pointToData=function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},e.prototype.setCategorySortInfo=function(t){if("category"!==this.type)return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}($j);function KM(t,e,i){i=i||{};var n=t.coordinateSystem,r=e.axis,o={},a=r.getAxesOnZeroOf()[0],s=r.position,l=a?"onZero":s,h=r.dim,u=n.getRect(),c=[u.x,u.x+u.width,u.y,u.y+u.height],d={left:0,right:1,top:0,bottom:1,onZero:2},p=e.get("offset")||0,f="x"===h?[c[2]-p,c[3]+p]:[c[0]-p,c[1]+p];if(a){var g=a.toGlobalCoord(a.dataToCoord(0));f[d.onZero]=Math.max(Math.min(g,f[1]),f[0])}o.position=["y"===h?f[d[l]]:c[0],"x"===h?f[d[l]]:c[3]],o.rotation=Math.PI/2*("x"===h?0:1),o.labelDirection=o.tickDirection=o.nameDirection=({top:-1,bottom:1,left:-1,right:1})[s],o.labelOffset=a?f[d[s]]-f[d.onZero]:0,e.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),TW(i.labelInside,e.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var m=e.get(["axisLabel","rotate"]);return o.labelRotate="top"===l?-m:m,o.z2=1,o}function KT(t){return"cartesian2d"===t.get("coordinateSystem")}function KI(t){var e={xAxisModel:null,yAxisModel:null};return T_(e,function(i,n){var r=n.replace(/Model$/,""),o=t.getReferringComponents(r,kw).models[0];e[n]=o}),e}var KR=function(){function t(t,e,i){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Kx,this._initCartesian(t,e,i),this.model=t}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(t,e){var i=this._axesMap;function n(t){var e,i=TR(t),n=i.length;if(n){for(var r=[],o=n-1;o>=0;o--){var a=t[+i[o]],s=a.model,l=a.scale;$e(l)&&s.get("alignTicks")&&null==s.get("interval")?r.push(a):($I(l,s),$e(l)&&(e=a))}r.length&&(e||$I((e=r.pop()).scale,e.model),T_(r,function(t){qX(t.scale,t.model,e.scale)}))}}this._updateScale(t,this.model),n(i.x),n(i.y);var r={};T_(i.x,function(t){KA(i,"y",t,r)}),T_(i.y,function(t){KA(i,"x",t,r)}),this.resize(this.model,e)},t.prototype.resize=function(t,e,i){var n=t.getBoxLayoutParams(),r=!i&&t.get("containLabel"),o=NP(n,{width:e.getWidth(),height:e.getHeight()});this._rect=o;var a=this._axesList;function s(){T_(a,function(t){var e,i,n,r=t.isHorizontal(),a=r?[0,o.width]:[0,o.height],s=t.inverse?1:0;t.setExtent(a[s],a[1-s]),e=r?o.x:o.y,n=(i=t.getExtent())[0]+i[1],t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return n-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return n-t+e}})}s(),r&&(T_(a,function(t){if(!t.model.get(["axisLabel","inside"])){var e=function(t){var e,i,n,r=t.model,o=t.scale;if(!(!r.get(["axisLabel","show"])||o.isBlank())){var a=o.getExtent();i=o instanceof $s?o.count():(e=o.getTicks()).length;var s=t.getLabelModel(),l=$E(t),h=1;i>40&&(h=Math.ceil(i/40));for(var u=0;u<i;u+=h){var c=l(e?e[u]:{value:a[0]+u},u),d=function(t,e){var i=e*Math.PI/180,n=t.width,r=t.height,o=n*Math.abs(Math.cos(i))+Math.abs(r*Math.sin(i)),a=n*Math.abs(Math.sin(i))+Math.abs(r*Math.cos(i));return new I1(t.x,t.y,o,a)}(s.getTextRect(c),s.get("rotate")||0);n?n.union(d):n=d}return n}}(t);if(e){var i=t.isHorizontal()?"height":"width",n=t.model.get(["axisLabel","margin"]);o[i]-=e[i]+n,"top"===t.position?o.y+=e.height+n:"left"===t.position&&(o.x+=e.width+n)}}}),s()),T_(this._coordsList,function(t){t.calcAffineTransform()})},t.prototype.getAxis=function(t,e){var i=this._axesMap[t];if(null!=i)return i[e||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(t,e){if(null!=t&&null!=e){var i="x"+t+"y"+e;return this._coordsMap[i]}TN(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,r=this._coordsList;n<r.length;n++)if(r[n].getAxis("x").index===t||r[n].getAxis("y").index===e)return r[n]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(t,e,i){var n=this._findConvertTarget(e);return n.cartesian?n.cartesian.dataToPoint(i):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(i)):null},t.prototype.convertFromPixel=function(t,e,i){var n=this._findConvertTarget(e);return n.cartesian?n.cartesian.pointToData(i):n.axis?n.axis.coordToData(n.axis.toLocalCoord(i)):null},t.prototype._findConvertTarget=function(t){var e,i,n=t.seriesModel,r=t.xAxisModel||n&&n.getReferringComponents("xAxis",kw).models[0],o=t.yAxisModel||n&&n.getReferringComponents("yAxis",kw).models[0],a=t.gridModel,s=this._coordsList;return n?0>Tx(s,e=n.coordinateSystem)&&(e=null):r&&o?e=this.getCartesian(r.componentIndex,o.componentIndex):r?i=this.getAxis("x",r.componentIndex):o?i=this.getAxis("y",o.componentIndex):a&&a.coordinateSystem===this&&(e=this._coordsList[0]),{cartesian:e,axis:i}},t.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},t.prototype._initCartesian=function(t,e,i){var n=this,r=this,o={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},s={x:0,y:0};if(e.eachComponent("xAxis",l("x"),this),e.eachComponent("yAxis",l("y"),this),!s.x||!s.y){this._axesMap={},this._axesList=[];return}function l(e){return function(i,n){if(KE(i,t)){var l=i.get("position");"x"===e?"top"!==l&&"bottom"!==l&&(l=o.bottom?"top":"bottom"):"left"!==l&&"right"!==l&&(l=o.left?"right":"left"),o[l]=!0;var h=new K_(e,$R(i),[0,0],i.get("type"),l),u="category"===h.type;h.onBand=u&&i.get("boundaryGap"),h.inverse=i.get("inverse"),i.axis=h,h.model=i,h.grid=r,h.index=n,r._axesList.push(h),a[e][n]=h,s[e]++}}}this._axesMap=a,T_(a.x,function(e,i){T_(a.y,function(r,o){var a="x"+i+"y"+o,s=new KC(a);s.master=n,s.model=t,n._coordsMap[a]=s,n._coordsList.push(s),s.addAxis(e),s.addAxis(r)})})},t.prototype._updateScale=function(t,e){function i(t,e){T_($O(t,e.dim),function(i){e.scale.unionExtentFromData(t,i)})}T_(this._axesList,function(t){if(t.scale.setExtent(1/0,-1/0),"category"===t.type){var e=t.model.get("categorySortInfo");t.scale.setSortInfo(e)}}),t.eachSeries(function(t){if(KT(t)){var n=KI(t),r=n.xAxisModel,o=n.yAxisModel;if(KE(r,e)&&KE(o,e)){var a=this.getCartesian(r.componentIndex,o.componentIndex),s=t.getData(),l=a.getAxis("x"),h=a.getAxis("y");i(s,l),i(s,h)}}},this)},t.prototype.getTooltipAxes=function(t){var e=[],i=[];return T_(this.getCartesians(),function(n){var r=null!=t&&"auto"!==t?n.getAxis(t):n.getBaseAxis(),o=n.getOtherAxis(r);0>Tx(e,r)&&e.push(r),0>Tx(i,o)&&i.push(o)}),{baseAxes:e,otherAxes:i}},t.create=function(e,i){var n=[];return e.eachComponent("grid",function(r,o){var a=new t(r,e,i);a.name="grid_"+o,a.resize(r,i,!0),r.coordinateSystem=a,n.push(a)}),e.eachSeries(function(t){if(KT(t)){var e=KI(t),i=e.xAxisModel,n=e.yAxisModel,r=i.getCoordSysModel().coordinateSystem;t.coordinateSystem=r.getCartesian(i.componentIndex,n.componentIndex)}}),n},t.dimensions=Kx,t}();function KE(t,e){return t.getCoordSysModel()===e}function KA(t,e,i,n){i.getAxesOnZeroOf=function(){return r?[r]:[]};var r,o=t[e],a=i.model,s=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(s){if(null!=l)Kk(o[l])&&(r=o[l]);else for(var h in o)if(o.hasOwnProperty(h)&&Kk(o[h])&&!n[u(o[h])]){r=o[h];break}r&&(n[u(r)]=!0)}function u(t){return t.dim+"_"+t.index}}function Kk(t){var e,i,n;return t&&"category"!==t.type&&"time"!==t.type&&(i=(e=t.scale.getExtent())[0],n=e[1],!(i>0&&n>0||i<0&&n<0))}function KD(t,e){return"all"===t||Tk(t)&&Tx(t,e)>=0||t===e}function KO(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[KL(t)]}function KP(t){return!!t.get(["handle","show"])}function KL(t){return t.type+"||"+t.id}var KN={},KH=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(e,i,n,r){this.axisPointerClass&&function(t){var e=KO(t);if(e){var i=e.axisPointerModel,n=e.axis.scale,r=i.option,o=i.get("status"),a=i.get("value");null!=a&&(a=n.parse(a));var s=KP(i);null==o&&(r.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==a||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),r.value=a,s&&(r.status=e.axis.scale.isBlank()?"hide":"show")}}(e),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,n,!0)},e.prototype.updateAxisPointer=function(t,e,i,n){this._doUpdateAxisPointerClass(t,i,!1)},e.prototype.remove=function(t,e){var i=this._axisPointer;i&&i.remove(e)},e.prototype.dispose=function(e,i){this._disposeAxisPointer(i),t.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,i,n){var r=e.getAxisPointerClass(this.axisPointerClass);if(r){var o,a=(o=KO(t))&&o.axisPointerModel;a?(this._axisPointer||(this._axisPointer=new r)).render(t,a,i,n):this._disposeAxisPointer(i)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,e){KN[t]=e},e.getAxisPointerClass=function(t){return t&&KN[t]},e.type="axis",e}(Vj),KV=kg();function KB(t,e,i,n){var r=i.axis;if(!r.scale.isBlank()){var o=i.getModel("splitArea"),a=o.getModel("areaStyle"),s=a.get("color"),l=n.coordinateSystem.getRect(),h=r.getTicksCoords({tickModel:o,clamp:!0});if(h.length){var u=s.length,c=KV(t).splitAreaColors,d=TQ(),p=0;if(c)for(var f=0;f<h.length;f++){var g=c.get(h[f].tickValue);if(null!=g){p=(g+(u-1)*f)%u;break}}var m=r.toGlobalCoord(h[0].coord),y=a.getAreaStyle();s=Tk(s)?s:[s];for(var f=1;f<h.length;f++){var w=r.toGlobalCoord(h[f].coord),b=void 0,x=void 0,S=void 0,C=void 0;r.isHorizontal()?(b=m,x=l.y,S=w-b,C=l.height,m=b+S):(b=l.x,x=m,S=l.width,C=w-x,m=x+C);var _=h[f-1].tickValue;null!=_&&d.set(_,p),e.add(new DK({anid:null!=_?"area_"+_:null,shape:{x:b,y:x,width:S,height:C},style:Tb({fill:s[p]},y),autoBatch:!0,silent:!0})),p=(p+1)%u}KV(t).splitAreaColors=d}}}function KF(t){KV(t).splitAreaColors=null}var KW=["axisLine","axisTickLabel","axisName"],Kz=["splitArea","splitLine","minorSplitLine"],Kj=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.axisPointerClass="CartesianAxisPointer",i}return M6(e,t),e.prototype.render=function(e,i,n,r){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Aj,this.group.add(this._axisGroup),e.get("show")){var a=e.getCoordSysModel(),s=KM(a,e),l=new Zh(e,Tw({handleAutoShown:function(t){for(var i=a.coordinateSystem.getCartesians(),n=0;n<i.length;n++)if($e(i[n].getOtherAxis(e.axis).scale))return!0;return!1}},s));T_(KW,l.add,l),this._axisGroup.add(l.getGroup()),T_(Kz,function(t){e.get([t,"show"])&&KU[t](this,this._axisGroup,e,a)},this),r&&"changeAxisOrder"===r.type&&r.isInitSort||LS(o,this._axisGroup,e),t.prototype.render.call(this,e,i,n,r)}},e.prototype.remove=function(){KF(this)},e.type="cartesianAxis",e}(KH),KU={splitLine:function(t,e,i,n){var r=i.axis;if(!r.scale.isBlank()){var o=i.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=Tk(s)?s:[s];for(var l=n.coordinateSystem.getRect(),h=r.isHorizontal(),u=0,c=r.getTicksCoords({tickModel:o}),d=[],p=[],f=a.getLineStyle(),g=0;g<c.length;g++){var m=r.toGlobalCoord(c[g].coord);h?(d[0]=m,d[1]=l.y,p[0]=m,p[1]=l.y+l.height):(d[0]=l.x,d[1]=m,p[0]=l.x+l.width,p[1]=m);var y=u++%s.length,w=new PX({anid:null!=c[g].tickValue?"line_"+c[g].tickValue:null,autoBatch:!0,shape:{x1:d[0],y1:d[1],x2:p[0],y2:p[1]},style:Tb({stroke:s[y]},f),silent:!0});Lm(w.shape,f.lineWidth),e.add(w)}}},minorSplitLine:function(t,e,i,n){var r=i.axis,o=i.getModel("minorSplitLine").getModel("lineStyle"),a=n.coordinateSystem.getRect(),s=r.isHorizontal(),l=r.getMinorTicksCoords();if(l.length)for(var h=[],u=[],c=o.getLineStyle(),d=0;d<l.length;d++)for(var p=0;p<l[d].length;p++){var f=r.toGlobalCoord(l[d][p].coord);s?(h[0]=f,h[1]=a.y,u[0]=f,u[1]=a.y+a.height):(h[0]=a.x,h[1]=f,u[0]=a.x+a.width,u[1]=f);var g=new PX({anid:"minor_line_"+l[d][p].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:u[0],y2:u[1]},style:c,silent:!0});Lm(g.shape,c.lineWidth),e.add(g)}},splitArea:function(t,e,i,n){KB(t,e,i,n)}},KG=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.type="xAxis",e}(Kj),KY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=KG.type,e}return M6(e,t),e.type="yAxis",e}(Kj),KX=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="grid",e}return M6(e,t),e.prototype.render=function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new DK({shape:t.coordinateSystem.getRect(),style:Tb({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(Vj),K$={offset:0};function KZ(t){t.registerComponentView(KX),t.registerComponentModel(Kv),t.registerCoordinateSystem("cartesian2d",KR),Zt(t,"x",Kw,K$),Zt(t,"y",Kw,K$),t.registerComponentView(KG),t.registerComponentView(KY),t.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}var Kq=function(t){function e(e,i,n,r){var o=t.call(this)||this;o.z2=2,o.textConfig={inside:!0},On(o).seriesIndex=i.seriesIndex;var a=new D0({z2:4,silent:e.getModel().get(["label","silent"])});return o.setTextContent(a),o.updateData(!0,e,i,n,r),o}return M6(e,t),e.prototype.updateData=function(t,e,i,n,r){this.node=e,e.piece=this,i=i||this._seriesModel,n=n||this._ecModel;var o=this;On(o).dataIndex=e.dataIndex;var a=e.getModel(),s=a.getModel("emphasis"),l=e.getLayout(),h=Tw({},l);h.label=null;var u=e.getVisual("style");u.lineJoin="bevel";var c=e.getVisual("decal");c&&(u.decal=Fr(c,r));var d=zR(a.getModel("itemStyle"),h,!0);Tw(h,d),T_(Oh,function(t){var e=o.ensureState(t),i=a.getModel([t,"itemStyle"]);e.style=i.getItemStyle();var n=zR(i,h);n&&(e.shape=n)}),t?(o.setShape(h),o.shape.r=l.r0,OQ(o,{shape:{r:l.r}},i,e.dataIndex)):(OK(o,{shape:h},i),O5(o)),o.useStyle(u),this._updateLabel(i);var p=a.getShallow("cursor");p&&o.attr("cursor",p),this._seriesModel=i||this._seriesModel,this._ecModel=n||this._ecModel;var f=s.get("focus");OB(this,"ancestor"===f?e.getAncestorsIndices():"descendant"===f?e.getDescendantIndices():f,s.get("blurScope"),s.get("disabled"))},e.prototype._updateLabel=function(t){var e=this,i=this.node.getModel(),n=i.getModel("label"),r=this.node.getLayout(),o=r.endAngle-r.startAngle,a=(r.startAngle+r.endAngle)/2,s=Math.cos(a),l=Math.sin(a),h=this,u=h.getTextContent(),c=this.node.dataIndex,d=n.get("minAngle")/180*Math.PI,p=n.get("show")&&!(null!=d&&Math.abs(o)<d);function f(t,e){var i=t.get(e);return null==i?n.get(e):i}u.ignore=!p,T_(Ou,function(n){var d,p="normal"===n?i.getModel("label"):i.getModel([n,"label"]),g="normal"===n,m=g?u:u.ensureState(n),y=t.getFormattedLabel(c,n);g&&(y=y||e.node.name),m.style=LN(p,{},null,"normal"!==n,!0),y&&(m.style.text=y);var w=p.get("show");null==w||g||(m.ignore=!w);var b=f(p,"position"),x=g?h:h.states[n],S=x.style.fill;x.textConfig={outsideFill:"inherit"===p.get("color")?S:null,inside:"outside"!==b};var C=f(p,"distance")||0,_=f(p,"align"),M=f(p,"rotate"),T=.5*Math.PI,I=DR("tangential"===M?Math.PI/2-a:a),R=I>T&&!A1(I-T)&&I<1.5*Math.PI;"outside"===b?(d=r.r+C,_=R?"right":"left"):_&&"center"!==_?"left"===_?(d=r.r0+C,_=R?"right":"left"):"right"===_&&(d=r.r-C,_=R?"left":"right"):(d=o===2*Math.PI&&0===r.r0?0:(r.r+r.r0)/2,_="center"),m.style.align=_,m.style.verticalAlign=f(p,"verticalAlign")||"middle",m.x=d*s+r.cx,m.y=d*l+r.cy;var E=0;"radial"===M?E=DR(-a)+(R?Math.PI:0):"tangential"===M?E=DR(Math.PI/2-a)+(R?Math.PI:0):TL(M)&&(E=M*Math.PI/180),m.rotation=DR(E)}),u.dirtyStyle()},e}(PO);function KK(t,e,i){if(t&&Tx(e,t.type)>=0){var n=i.getData().tree.root,r=t.targetNode;if(TO(r)&&(r=n.getNodeById(r)),r&&n.contains(r))return{node:r};var o=t.targetNodeId;if(null!=o&&(r=n.getNodeById(o)))return{node:r}}}function KQ(t){for(var e=[];t;)(t=t.parentNode)&&e.push(t);return e.reverse()}function KJ(t,e){return Tx(KQ(t),e)>=0}function K0(t,e){for(var i=[];t;){var n=t.dataIndex;i.push({name:t.name,dataIndex:n,value:e.getRawValue(n)}),t=t.parentNode}return i.reverse(),i}var K1="sunburstRootToNode",K2="sunburstHighlight",K5=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i,n){var r=this;this.seriesModel=t,this.api=i,this.ecModel=e;var o=t.getData(),a=o.tree.root,s=t.getViewRoot(),l=this.group,h=t.get("renderLabelForZeroData"),u=[];s.eachNode(function(t){u.push(t)}),function(n,r){function s(t){return t.getId()}function u(s,u){(function(n,r){if(h||!n||n.getValue()||(n=null),n!==a&&r!==a){if(r&&r.piece)n?(r.piece.updateData(!1,n,t,e,i),o.setItemGraphicEl(n.dataIndex,r.piece)):r&&r.piece&&(l.remove(r.piece),r.piece=null);else if(n){var s=new Kq(n,t,e,i);l.add(s),o.setItemGraphicEl(n.dataIndex,s)}}})(null==s?null:n[s],null==u?null:r[u])}(0!==n.length||0!==r.length)&&new ze(r,n,s,s).add(u).update(u).remove(TA(u,null)).execute()}(u,this._oldChildren||[]),s.depth>0?(r.virtualPiece?r.virtualPiece.updateData(!1,a,t,e,i):(r.virtualPiece=new Kq(a,t,e,i),l.add(r.virtualPiece)),s.piece.off("click"),r.virtualPiece.on("click",function(t){r._rootToNode(s.parentNode)})):r.virtualPiece&&(l.remove(r.virtualPiece),r.virtualPiece=null),this._initEvents(),this._oldChildren=u},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(e){var i=!1;t.seriesModel.getViewRoot().eachNode(function(n){if(!i&&n.piece&&n.piece===e.target){var r=n.getModel().get("nodeClick");if("rootToNode"===r)t._rootToNode(n);else if("link"===r){var o=n.getModel(),a=o.get("link");a&&NA(a,o.get("target",!0)||"_blank")}i=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:K1,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,e){var i=e.getData().getItemLayout(0);if(i){var n=t[0]-i.cx,r=t[1]-i.cy,o=Math.sqrt(n*n+r*r);return o<=i.r&&o>=i.r0}},e.type="sunburst",e}(VX),K3=function(){function t(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(t,e,i){TD(t)&&(i=e,e=t,t=null),TO(t=t||{})&&(t={order:t});var n,r=t.order||"preorder",o=this[t.attr||"children"];"preorder"===r&&(n=e.call(i,this));for(var a=0;!n&&a<o.length;a++)o[a].eachNode(t,e,i);"postorder"===r&&e.call(i,this)},t.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var i=0;i<this.children.length;i++){var n=this.children[i];n.updateDepthAndHeight(t+1),n.height>e&&(e=n.height)}this.height=e+1},t.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,i=this.children,n=i.length;e<n;e++){var r=i[e].getNodeById(t);if(r)return r}},t.prototype.contains=function(t){if(t===this)return!0;for(var e=0,i=this.children,n=i.length;e<n;e++){var r=i[e].contains(t);if(r)return r}},t.prototype.getAncestors=function(t){for(var e=[],i=t?this:this.parentNode;i;)e.push(i),i=i.parentNode;return e.reverse(),e},t.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},t.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(e){t.push(e.dataIndex)}),t},t.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},t.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(t)},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},t.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e}return -1},t.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},t.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},t}(),K4=function(){function t(t){this.type="tree",this._nodes=[],this.hostModel=t}return t.prototype.eachNode=function(t,e,i){this.root.eachNode(t,e,i)},t.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},t.prototype.getNodeById=function(t){return this.root.getNodeById(t)},t.prototype.update=function(){for(var t=this.data,e=this._nodes,i=0,n=e.length;i<n;i++)e[i].dataIndex=-1;for(var i=0,n=t.count();i<n;i++)e[t.getRawIndex(i)].dataIndex=i},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(e,i,n){var r=new t(i),o=[],a=1;(function t(e,i){var n,s=e.value;a=Math.max(a,Tk(s)?s.length:1),o.push(e);var l=new K3(kc(e.name,""),r);i?(n=i.children,l.parentNode!==i&&(n.push(l),l.parentNode=i)):r.root=l,r._nodes.push(l);var h=e.children;if(h)for(var u=0;u<h.length;u++)t(h[u],l)})(e),r.root.updateDepthAndHeight(0);var s=new zu(zc(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,i);return s.initData(o),n&&n(s),G3({mainData:s,struct:r,structAttr:"tree"}),r.update(),r},t}();function K6(t){var e=t.getData().tree,i={};e.eachNode(function(e){for(var n=e;n&&n.depth>1;)n=n.parentNode;var r=Ht(t.ecModel,n.name||n.dataIndex+"",i);e.setVisual("decal",r)})}var K8=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.ignoreStyleOnData=!0,i}return M6(e,t),e.prototype.getInitialData=function(t,e){var i={name:t.name,children:t.data};(function t(e){var i=0;T_(e.children,function(e){t(e);var n=e.value;Tk(n)&&(n=n[0]),i+=n});var n=e.value;Tk(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=i),n<0&&(n=0),Tk(e.value)?e.value[0]=n:e.value=n})(i);var n=this._levelModels=TM(t.levels||[],function(t){return new L2(t,this,e)},this),r=K4.createTree(i,this,function(t){t.wrapMethod("getItemModel",function(t,e){var i=n[r.getNodeByDataIndex(e).depth];return i&&(t.parentModel=i),t})});return r.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(e){var i=t.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return i.treePathInfo=K0(n,this),i},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)},e.prototype.enableAriaDecal=function(){K6(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(VL),K9=Math.PI/180;function K7(t,e,i){e.eachSeriesByType(t,function(t){var e=t.get("center"),n=t.get("radius");Tk(n)||(n=[0,n]),Tk(e)||(e=[e,e]);var r=i.getWidth(),o=i.getHeight(),a=Math.min(r,o),s=AZ(e[0],r),l=AZ(e[1],o),h=AZ(n[0],a/2),u=AZ(n[1],a/2),c=-t.get("startAngle")*K9,d=t.get("minAngle")*K9,p=t.getData().tree.root,f=t.getViewRoot(),g=f.depth,m=t.get("sort");null!=m&&function t(e,i){var n=e.children||[];e.children=function(t,e){if(TD(e)){var i=TM(t,function(t,e){var i=t.getValue();return{params:{depth:t.depth,height:t.height,dataIndex:t.dataIndex,getValue:function(){return i}},index:e}});return i.sort(function(t,i){return e(t.params,i.params)}),TM(i,function(e){return t[e.index]})}var n="asc"===e;return t.sort(function(t,e){var i=(t.getValue()-e.getValue())*(n?1:-1);return 0===i?(t.dataIndex-e.dataIndex)*(n?-1:1):i})}(n,i),n.length&&T_(e.children,function(e){t(e,i)})}(f,m);var y=0;T_(f.children,function(t){!isNaN(t.getValue())&&y++});var w=f.getValue(),b=Math.PI/(w||y)*2,x=f.depth>0,S=(u-h)/(f.height-(x?-1:1)||1),C=t.get("clockwise"),_=t.get("stillShowZeroSum"),M=C?1:-1,T=function(e,i){if(e){var n=i;if(e!==p){var r=e.getValue(),o=0===w&&_?b:r*b;o<d&&(o=d),n=i+M*o;var u=e.depth-g-(x?-1:1),c=h+S*u,f=h+S*(u+1),m=t.getLevelModel(e);if(m){var y=m.get("r0",!0),I=m.get("r",!0),R=m.get("radius",!0);null!=R&&(y=R[0],I=R[1]),null!=y&&(c=AZ(y,a/2)),null!=I&&(f=AZ(I,a/2))}e.setLayout({angle:o,startAngle:i,endAngle:n,clockwise:C,cx:s,cy:l,r0:c,r:f})}if(e.children&&e.children.length){var E=0;T_(e.children,function(t){E+=T(t,i+E)})}return n-i}};if(x){var I=2*Math.PI;p.setLayout({angle:I,startAngle:c,endAngle:c+I,clockwise:C,cx:s,cy:l,r0:h,r:h+S})}T(f,c)})}function Qt(t){var e={};t.eachSeriesByType("sunburst",function(t){var i=t.getData(),n=i.tree;n.eachNode(function(r){var o=r.getModel().getModel("itemStyle").getItemStyle();o.fill||(o.fill=function(t,i,n){for(var r=t;r&&r.depth>1;)r=r.parentNode;var o=i.getColorFromPalette(r.name||r.dataIndex+"",e);return t.depth>1&&TO(o)&&(o=Rq(o,(t.depth-1)/(n-1)*.5)),o}(r,t,n.root.height)),Tw(i.ensureUniqueItemVisual(r.dataIndex,"style"),o)})})}var Qe=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i._layers=[],i}return M6(e,t),e.prototype.render=function(t,e,i){var n=t.getData(),r=this,o=this.group,a=t.getLayerSeries(),s=n.getLayout("layoutInfo"),l=s.rect,h=s.boundaryGap;function u(t){return t.name}o.x=0,o.y=l.y+h[0];var c=new ze(this._layersSeries||[],a,u,u),d=[];function p(e,i,s){var l,h,u=r._layers;if("remove"===e){o.remove(u[i]);return}for(var c=[],p=[],f=a[i].indices,g=0;g<f.length;g++){var m=n.getItemLayout(f[g]),y=m.x,w=m.y0,b=m.y;c.push(y,w),p.push(y,w+b),l=n.getItemVisual(f[g],"style")}var x=n.getItemLayout(f[0]),S=t.getModel("label").get("margin"),C=t.getModel("emphasis");if("add"===e){var _,M,T,I=d[i]=new Aj;h=new Yf({shape:{points:c,stackedOnPoints:p,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),I.add(h),o.add(I),t.isAnimationEnabled()&&h.setClipPath((_=h.getBoundingRect(),M=function(){h.removeClipPath()},OQ(T=new DK({shape:{x:_.x-10,y:_.y-10,width:0,height:_.height+20}}),{shape:{x:_.x-50,width:_.width+100,height:_.height+20}},t,M),T))}else{var I=u[s];h=I.childAt(0),o.add(I),d[i]=I,OK(h,{shape:{points:c,stackedOnPoints:p}},t),O5(h)}LP(h,LL(t),{labelDataIndex:f[g-1],defaultText:n.getName(f[g-1]),inheritColor:l.fill},{normal:{verticalAlign:"middle"}}),h.setTextConfig({position:null,local:!0});var R=h.getTextContent();R&&(R.x=x.x-S,R.y=x.y0+x.y/2),h.useStyle(l),n.setItemGraphicEl(i,h),Oj(h,t),OB(h,C.get("focus"),C.get("blurScope"),C.get("disabled"))}c.add(TE(p,this,"add")).update(TE(p,this,"update")).remove(TE(p,this,"remove")).execute(),this._layersSeries=a,this._layers=d},e.type="themeRiver",e}(VX),Qi=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new UW(TE(this.getData,this),TE(this.getRawData,this))},e.prototype.fixData=function(t){var e=t.length,i={},n=kC(t,function(t){return i.hasOwnProperty(t[0]+"")||(i[t[0]+""]=-1),t[2]}),r=[];n.buckets.each(function(t,e){r.push({name:e,dataList:t})});for(var o=r.length,a=0;a<o;++a){for(var s=r[a].name,l=0;l<r[a].dataList.length;++l){var h=r[a].dataList[l][0]+"";i[h]=a}for(var h in i)i.hasOwnProperty(h)&&i[h]!==a&&(i[h]=a,t[e]=[h,0,s],e++)}return t},e.prototype.getInitialData=function(t,e){for(var i=this.getReferringComponents("singleAxis",kw).models[0].get("type"),n=TI(t.data,function(t){return void 0!==t[2]}),r=this.fixData(n||[]),o=[],a=this.nameMap=TQ(),s=0,l=0;l<r.length;++l)o.push(r[l][2]),!a.get(r[l][2])&&(a.set(r[l][2],s),s++);var h=new zu(zc(r,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:zr(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,this);return h.initData(r),h},e.prototype.getLayerSeries=function(){for(var t=this.getData(),e=t.count(),i=[],n=0;n<e;++n)i[n]=n;var r=t.mapDimension("single"),o=kC(i,function(e){return t.get("name",e)}),a=[];return o.buckets.each(function(e,i){e.sort(function(e,i){return t.get(r,e)-t.get(r,i)}),a.push({name:i,indices:e})}),a},e.prototype.getAxisTooltipData=function(t,e,i){Tk(t)||(t=t?[t]:[]);for(var n,r=this.getData(),o=this.getLayerSeries(),a=[],s=o.length,l=0;l<s;++l){for(var h=Number.MAX_VALUE,u=-1,c=o[l].indices.length,d=0;d<c;++d){var p=r.get(t[0],o[l].indices[d]),f=Math.abs(p-e);f<=h&&(n=p,h=f,u=o[l].indices[d])}a.push(u)}return{dataIndices:a,nestestValue:n}},e.prototype.formatTooltip=function(t,e,i){var n=this.getData();return VS("nameValue",{name:n.getName(t),value:n.get(n.mapDimension("value"),t)})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(VL);function Qn(t,e){t.eachSeriesByType("themeRiver",function(t){var e=t.getData(),i=t.coordinateSystem,n={},r=i.getRect();n.rect=r;var o=t.get("boundaryGap"),a=i.getAxis();n.boundaryGap=o,"horizontal"===a.orient?(o[0]=AZ(o[0],r.height),o[1]=AZ(o[1],r.height),Qr(e,t,r.height-o[0]-o[1])):(o[0]=AZ(o[0],r.width),o[1]=AZ(o[1],r.width),Qr(e,t,r.width-o[0]-o[1])),e.setLayout("layoutInfo",n)})}function Qr(t,e,i){if(t.count())for(var n,r=e.coordinateSystem,o=e.getLayerSeries(),a=t.mapDimension("single"),s=t.mapDimension("value"),l=TM(o,function(e){return TM(e.indices,function(e){var i=r.dataToPoint(t.get(a,e));return i[1]=t.get(s,e),i})}),h=function(t){for(var e=t.length,i=t[0].length,n=[],r=[],o=0,a=0;a<i;++a){for(var s=0,l=0;l<e;++l)s+=t[l][a][1];s>o&&(o=s),n.push(s)}for(var h=0;h<i;++h)r[h]=(o-n[h])/2;o=0;for(var u=0;u<i;++u){var c=n[u]+r[u];c>o&&(o=c)}return{y0:r,max:o}}(l),u=h.y0,c=i/h.max,d=o.length,p=o[0].indices.length,f=0;f<p;++f){n=u[f]*c,t.setItemLayout(o[0].indices[f],{layerIndex:0,x:l[0][f][0],y0:n,y:l[0][f][1]*c});for(var g=1;g<d;++g)n+=l[g-1][f][1]*c,t.setItemLayout(o[g].indices[f],{layerIndex:g,x:l[g][f][0],y0:n,y:l[g][f][1]*c})}}function Qo(t,e){var i=t.isExpand?t.children:[],n=t.parentNode.children,r=t.hierNode.i?n[t.hierNode.i-1]:null;if(i.length){!function(t){for(var e=t.children,i=e.length,n=0,r=0;--i>=0;){var o=e[i];o.hierNode.prelim+=n,o.hierNode.modifier+=n,r+=o.hierNode.change,n+=o.hierNode.shift+r}}(t);var o=(i[0].hierNode.prelim+i[i.length-1].hierNode.prelim)/2;r?(t.hierNode.prelim=r.hierNode.prelim+e(t,r),t.hierNode.modifier=t.hierNode.prelim-o):t.hierNode.prelim=o}else r&&(t.hierNode.prelim=r.hierNode.prelim+e(t,r));t.parentNode.hierNode.defaultAncestor=function(t,e,i,n){if(e){for(var r=t,o=t,a=o.parentNode.children[0],s=e,l=r.hierNode.modifier,h=o.hierNode.modifier,u=a.hierNode.modifier,c=s.hierNode.modifier;s=Qh(s),o=Qu(o),s&&o;){r=Qh(r),a=Qu(a),r.hierNode.ancestor=t;var d,p,f=s.hierNode.prelim+c-o.hierNode.prelim-h+n(s,o);f>0&&(function(t,e,i){var n=i/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=n,e.hierNode.shift+=i,e.hierNode.modifier+=i,e.hierNode.prelim+=i,t.hierNode.change+=n}((d=s,p=i,d.hierNode.ancestor.parentNode===t.parentNode?d.hierNode.ancestor:p),t,f),h+=f,l+=f),c+=s.hierNode.modifier,h+=o.hierNode.modifier,l+=r.hierNode.modifier,u+=a.hierNode.modifier}s&&!Qh(r)&&(r.hierNode.thread=s,r.hierNode.modifier+=c-l),o&&!Qu(a)&&(a.hierNode.thread=o,a.hierNode.modifier+=h-u,i=t)}return i}(t,r,t.parentNode.hierNode.defaultAncestor||n[0],e)}function Qa(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function Qs(t){return arguments.length?t:Qc}function Ql(t,e){return{x:e*Math.cos(t-=Math.PI/2),y:e*Math.sin(t)}}function Qh(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function Qu(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function Qc(t,e){return t.parentNode===e.parentNode?1:2}var Qd=function(){this.parentPoint=[],this.childPoints=[]},Qp=function(t){function e(e){return t.call(this,e)||this}return M6(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Qd},e.prototype.buildPath=function(t,e){var i=e.childPoints,n=i.length,r=e.parentPoint,o=i[0],a=i[n-1];if(1===n){t.moveTo(r[0],r[1]),t.lineTo(o[0],o[1]);return}var s=e.orient,l="TB"===s||"BT"===s?0:1,h=1-l,u=AZ(e.forkPosition,1),c=[];c[l]=r[l],c[h]=r[h]+(a[h]-r[h])*u,t.moveTo(r[0],r[1]),t.lineTo(c[0],c[1]),t.moveTo(o[0],o[1]),c[l]=o[l],t.lineTo(c[0],c[1]),c[l]=a[l],t.lineTo(c[0],c[1]),t.lineTo(a[0],a[1]);for(var d=1;d<n-1;d++){var p=i[d];t.moveTo(p[0],p[1]),c[l]=p[l],t.lineTo(c[0],c[1])}},e}(DB),Qf=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i._mainGroup=new Aj,i}return M6(e,t),e.prototype.init=function(t,e){this._controller=new GE(e.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,e,i){var n=t.getData(),r=t.layoutInfo,o=this._mainGroup;"radial"===t.get("layout")?(o.x=r.x+r.width/2,o.y=r.y+r.height/2):(o.x=r.x,o.y=r.y),this._updateViewCoordSys(t,i),this._updateController(t,e,i);var a=this._data;n.diff(a).add(function(e){Qg(n,e)&&Qm(n,e,null,o,t)}).update(function(e,i){var r=a.getItemGraphicEl(i);if(!Qg(n,e)){r&&Qw(a,i,r,o,t);return}Qm(n,e,r,o,t)}).remove(function(e){var i=a.getItemGraphicEl(e);i&&Qw(a,e,i,o,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),!0===t.get("expandAndCollapse")&&n.eachItemGraphicEl(function(e,n){e.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:n})})}),this._data=n},e.prototype._updateViewCoordSys=function(t,e){var i=t.getData(),n=[];i.each(function(t){var e=i.getItemLayout(t);!e||isNaN(e.x)||isNaN(e.y)||n.push([+e.x,+e.y])});var r=[],o=[];Di(n,r,o);var a=this._min,s=this._max;o[0]-r[0]==0&&(r[0]=a?a[0]:r[0]-1,o[0]=s?s[0]:o[0]+1),o[1]-r[1]==0&&(r[1]=a?a[1]:r[1]-1,o[1]=s?s[1]:o[1]+1);var l=t.coordinateSystem=new Gh;l.zoomLimit=t.get("scaleLimit"),l.setBoundingRect(r[0],r[1],o[0]-r[0],o[1]-r[1]),l.setCenter(t.get("center"),e),l.setZoom(t.get("zoom")),this.group.attr({x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY}),this._min=r,this._max=o},e.prototype._updateController=function(t,e,i){var n=this,r=this._controller,o=this._controllerHost,a=this.group;r.setPointerChecker(function(e,n,r){var o=a.getBoundingRect();return o.applyTransform(a.transform),o.contain(n,r)&&!GN(e,i,t)}),r.enable(t.get("roam")),o.zoomLimit=t.get("scaleLimit"),o.zoom=t.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",function(e){GO(o,e.dx,e.dy),i.dispatchAction({seriesId:t.id,type:"treeRoam",dx:e.dx,dy:e.dy})}).on("zoom",function(e){GP(o,e.scale,e.originX,e.originY),i.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),n._updateNodeAndLinkScale(t),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(t){var e=t.getData(),i=this._getNodeGlobalScale(t);e.eachItemGraphicEl(function(t,e){t.setSymbolScale(i)})},e.prototype._getNodeGlobalScale=function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var i=this._nodeScaleRatio,n=e.scaleX||1;return((e.getZoom()-1)*i+1)/n},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(VX);function Qg(t,e){var i=t.getItemLayout(e);return i&&!isNaN(i.x)&&!isNaN(i.y)}function Qm(t,e,i,n,r){var o=!i,a=t.tree.getNodeByDataIndex(e),s=a.getModel(),l=a.getVisual("style").fill,h=!1===a.isExpand&&0!==a.children.length?l:"#fff",u=t.tree.root,c=a.parentNode===u?a:a.parentNode||a,d=t.getItemGraphicEl(c.dataIndex),p=c.getLayout(),f=d?{x:d.__oldX,y:d.__oldY,rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:p,g=a.getLayout();o?((i=new Ul(t,e,null,{symbolInnerColor:h,useNameLabel:!0})).x=f.x,i.y=f.y):i.updateData(t,e,null,{symbolInnerColor:h,useNameLabel:!0}),i.__radialOldRawX=i.__radialRawX,i.__radialOldRawY=i.__radialRawY,i.__radialRawX=g.rawX,i.__radialRawY=g.rawY,n.add(i),t.setItemGraphicEl(e,i),i.__oldX=i.x,i.__oldY=i.y,OK(i,{x:g.x,y:g.y},r);var m=i.getSymbolPath();if("radial"===r.get("layout")){var y=u.children[0],w=y.getLayout(),b=y.children.length,x=void 0,S=void 0;if(g.x===w.x&&!0===a.isExpand&&y.children.length){var C={x:(y.children[0].getLayout().x+y.children[b-1].getLayout().x)/2,y:(y.children[0].getLayout().y+y.children[b-1].getLayout().y)/2};(x=Math.atan2(C.y-w.y,C.x-w.x))<0&&(x=2*Math.PI+x),(S=C.x<w.x)&&(x-=Math.PI)}else(x=Math.atan2(g.y-w.y,g.x-w.x))<0&&(x=2*Math.PI+x),0===a.children.length||0!==a.children.length&&!1===a.isExpand?(S=g.x<w.x)&&(x-=Math.PI):(S=g.x>w.x)||(x-=Math.PI);var _=S?"left":"right",M=s.getModel("label"),T=M.get("rotate"),I=m.getTextContent();I&&(m.setTextConfig({position:M.get("position")||_,rotation:null==T?-x:Math.PI/180*T,origin:"center"}),I.setStyle("verticalAlign","middle"))}var R=s.get(["emphasis","focus"]),E="relative"===R?TJ(a.getAncestorsIndices(),a.getDescendantIndices()):"ancestor"===R?a.getAncestorsIndices():"descendant"===R?a.getDescendantIndices():null;E&&(On(i).focus=E),function(t,e,i,n,r,o,a,s){var l=e.getModel(),h=t.get("edgeShape"),u=t.get("layout"),c=t.getOrient(),d=t.get(["lineStyle","curveness"]),p=t.get("edgeForkPosition"),f=l.getModel("lineStyle").getLineStyle(),g=n.__edge;if("curve"===h)e.parentNode&&e.parentNode!==i&&(g||(g=n.__edge=new PQ({shape:Qb(u,c,d,r,r)})),OK(g,{shape:Qb(u,c,d,o,a)},t));else if("polyline"===h&&"orthogonal"===u&&e!==i&&e.children&&0!==e.children.length&&!0===e.isExpand){for(var m=e.children,y=[],w=0;w<m.length;w++){var b=m[w].getLayout();y.push([b.x,b.y])}g||(g=n.__edge=new Qp({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:c,forkPosition:p}})),OK(g,{shape:{parentPoint:[a.x,a.y],childPoints:y}},t)}g&&!("polyline"===h&&!e.isExpand)&&(g.useStyle(Tb({strokeNoScale:!0,fill:null},f)),Oj(g,l,"lineStyle"),OI(g),s.add(g))}(r,a,u,i,f,p,g,n),i.__edge&&(i.onHoverStateChange=function(e){if("blur"!==e){var n=a.parentNode&&t.getItemGraphicEl(a.parentNode.dataIndex);n&&1===n.hoverState||OM(i.__edge,e)}})}function Qy(t,e,i,n,r){var o=Qv(e.tree.root,t),a=o.source,s=o.sourceLayout,l=e.getItemGraphicEl(t.dataIndex);if(l){var h=e.getItemGraphicEl(a.dataIndex).__edge,u=l.__edge||(!1===a.isExpand||1===a.children.length?h:void 0),c=n.get("edgeShape"),d=n.get("layout"),p=n.get("orient"),f=n.get(["lineStyle","curveness"]);u&&("curve"===c?O0(u,{shape:Qb(d,p,f,s,s),style:{opacity:0}},n,{cb:function(){i.remove(u)},removeOpt:r}):"polyline"===c&&"orthogonal"===n.get("layout")&&O0(u,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},n,{cb:function(){i.remove(u)},removeOpt:r}))}}function Qv(t,e){for(var i,n=e.parentNode===t?e:e.parentNode||e;null==(i=n.getLayout());)n=n.parentNode===t?n:n.parentNode||n;return{source:n,sourceLayout:i}}function Qw(t,e,i,n,r){var o=t.tree.getNodeByDataIndex(e),a=Qv(t.tree.root,o).sourceLayout,s={duration:r.get("animationDurationUpdate"),easing:r.get("animationEasingUpdate")};O0(i,{x:a.x+1,y:a.y+1},r,{cb:function(){n.remove(i),t.setItemGraphicEl(e,null)},removeOpt:s}),i.fadeOut(null,t.hostModel,{fadeLabel:!0,animation:s}),o.children.forEach(function(e){Qy(e,t,n,r,s)}),Qy(o,t,n,r,s)}function Qb(t,e,i,n,r){if("radial"===t){h=n.rawX,c=n.rawY,u=r.rawX,d=r.rawY;var o,a,s,l,h,u,c,d,p=Ql(h,c),f=Ql(h,c+(d-c)*i),g=Ql(u,d+(c-d)*i),m=Ql(u,d);return{x1:p.x||0,y1:p.y||0,x2:m.x||0,y2:m.y||0,cpx1:f.x||0,cpy1:f.y||0,cpx2:g.x||0,cpy2:g.y||0}}return h=n.x,c=n.y,u=r.x,d=r.y,("LR"===e||"RL"===e)&&(o=h+(u-h)*i,a=c,s=u+(h-u)*i,l=d),("TB"===e||"BT"===e)&&(o=h,a=c+(d-c)*i,s=u,l=d+(c-d)*i),{x1:h,y1:c,x2:u,y2:d,cpx1:o,cpy1:a,cpx2:s,cpy2:l}}var Qx=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return M6(e,t),e.prototype.getInitialData=function(t){var e={name:t.name,children:t.data},i=new L2(t.leaves||{},this,this.ecModel),n=K4.createTree(e,this,function(t){t.wrapMethod("getItemModel",function(t,e){var r=n.getNodeByDataIndex(e);return r&&r.children.length&&r.isExpand||(t.parentModel=i),t})}),r=0;n.eachNode("preorder",function(t){t.depth>r&&(r=t.depth)});var o=t.expandAndCollapse&&t.initialTreeDepth>=0?t.initialTreeDepth:r;return n.root.eachNode("preorder",function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&null!=e.collapsed?!e.collapsed:t.depth<=o}),n.data},e.prototype.getOrient=function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,e,i){for(var n=this.getData().tree,r=n.root.children[0],o=n.getNodeByDataIndex(t),a=o.getValue(),s=o.name;o&&o!==r;)s=o.parentNode.name+"."+s,o=o.parentNode;return VS("nameValue",{name:s,value:a,noValue:isNaN(a)||null==a})},e.prototype.getDataParams=function(e){var i=t.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return i.treeAncestors=K0(n,this),i.collapsed=!n.isExpand,i},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(VL);function QS(t,e){for(var i,n=[t];i=n.pop();)if(e(i),i.isExpand){var r=i.children;if(r.length)for(var o=r.length-1;o>=0;o--)n.push(r[o])}}function QC(t,e){t.eachSeriesByType("tree",function(t){!function(t,e){var i=NP(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});t.layoutInfo=i;var n=t.get("layout"),r=0,o=0,a=null;"radial"===n?(r=2*Math.PI,o=Math.min(i.height,i.width)/2,a=Qs(function(t,e){return(t.parentNode===e.parentNode?1:2)/t.depth})):(r=i.width,o=i.height,a=Qs());var s=t.getData().tree.root,l=s.children[0];if(l){!function(t){t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e,i,n=[t];e=n.pop();)if(i=e.children,e.isExpand&&i.length)for(var r=i.length,o=r-1;o>=0;o--){var a=i[o];a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},n.push(a)}}(s),function(t,e,i){for(var n,r=[t],o=[];n=r.pop();)if(o.push(n),n.isExpand){var a=n.children;if(a.length)for(var s=0;s<a.length;s++)r.push(a[s])}for(;n=o.pop();)e(n,i)}(l,Qo,a),s.hierNode.modifier=-l.hierNode.prelim,QS(l,Qa);var h=l,u=l,c=l;QS(l,function(t){var e=t.getLayout().x;e<h.getLayout().x&&(h=t),e>u.getLayout().x&&(u=t),t.depth>c.depth&&(c=t)});var d=h===u?1:a(h,u)/2,p=d-h.getLayout().x,f=0,g=0,m=0,y=0;if("radial"===n)f=r/(u.getLayout().x+d+p),g=o/(c.depth-1||1),QS(l,function(t){m=(t.getLayout().x+p)*f,y=(t.depth-1)*g;var e=Ql(m,y);t.setLayout({x:e.x,y:e.y,rawX:m,rawY:y},!0)});else{var w=t.getOrient();"RL"===w||"LR"===w?(g=o/(u.getLayout().x+d+p),f=r/(c.depth-1||1),QS(l,function(t){y=(t.getLayout().x+p)*g,m="LR"===w?(t.depth-1)*f:r-(t.depth-1)*f,t.setLayout({x:m,y:y},!0)})):("TB"===w||"BT"===w)&&(f=r/(u.getLayout().x+d+p),g=o/(c.depth-1||1),QS(l,function(t){m=(t.getLayout().x+p)*f,y="TB"===w?(t.depth-1)*g:o-(t.depth-1)*g,t.setLayout({x:m,y:y},!0)}))}}}(t,e)})}function Q_(t){t.eachSeriesByType("tree",function(t){var e=t.getData();e.tree.eachNode(function(t){var i=t.getModel().getModel("itemStyle").getItemStyle();Tw(e.ensureUniqueItemVisual(t.dataIndex,"style"),i)})})}var QM=["treemapZoomToNode","treemapRender","treemapMove"],QT=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.preventUsingHoverLayer=!0,i}return M6(e,t),e.prototype.getInitialData=function(t,e){var i={name:t.name,children:t.data};(function t(e){var i=0;T_(e.children,function(e){t(e);var n=e.value;Tk(n)&&(n=n[0]),i+=n});var n=e.value;Tk(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=i),n<0&&(n=0),Tk(e.value)?e.value[0]=n:e.value=n})(i);var n=t.levels||[],r=new L2({itemStyle:this.designatedVisualItemStyle={}},this,e),o=TM((n=t.levels=function(t,e){var i,n,r=kr(e.get("color")),o=kr(e.get(["aria","decal","decals"]));if(r){T_(t=t||[],function(t){var e=new L2(t),r=e.get("color"),o=e.get("decal");(e.get(["itemStyle","color"])||r&&"none"!==r)&&(i=!0),(e.get(["itemStyle","decal"])||o&&"none"!==o)&&(n=!0)});var a=t[0]||(t[0]={});return i||(a.color=r.slice()),!n&&o&&(a.decal=o.slice()),t}}(n,e))||[],function(t){return new L2(t,r,e)},this),a=K4.createTree(i,this,function(t){t.wrapMethod("getItemModel",function(t,e){var i=a.getNodeByDataIndex(e),n=i?o[i.depth]:null;return t.parentModel=n||r,t})});return a.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,e,i){var n=this.getData(),r=this.getRawValue(t);return VS("nameValue",{name:n.getName(t),value:r})},e.prototype.getDataParams=function(e){var i=t.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return i.treeAncestors=K0(n,this),i.treePathInfo=i.treeAncestors,i},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},Tw(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var e=this._idIndexMap;e||(e=this._idIndexMap=TQ(),this._idIndexMapCount=0);var i=e.get(t);return null==i&&e.set(t,i=this._idIndexMapCount++),i},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)},e.prototype.enableAriaDecal=function(){K6(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.1024,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(VL),QI=function(){function t(t){this.group=new Aj,t.add(this.group)}return t.prototype.render=function(t,e,i,n){var r=t.getModel("breadcrumb"),o=this.group;if(o.removeAll(),r.get("show")&&i){var a=r.getModel("itemStyle"),s=r.getModel("emphasis"),l=a.getModel("textStyle"),h=s.getModel(["itemStyle","textStyle"]),u={pos:{left:r.get("left"),right:r.get("right"),top:r.get("top"),bottom:r.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:r.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(i,u,l),this._renderContent(t,u,a,s,l,h,n),NL(o,u.pos,u.box)}},t.prototype._prepare=function(t,e,i){for(var n=t;n;n=n.parentNode){var r=kc(n.getModel().get("name"),""),o=Math.max(i.getTextRect(r).width+16,e.emptyItemWidth);e.totalWidth+=o+8,e.renderList.push({node:n,text:r,width:o})}},t.prototype._renderContent=function(t,e,i,n,r,o,a){for(var s,l,h,u,c,d,p,f,g,m=0,y=e.emptyItemWidth,w=t.get(["breadcrumb","height"]),b=(s=e.pos,u=(l=e.box).width,c=l.height,d=AZ(s.left,u),p=AZ(s.top,c),f=AZ(s.right,u),g=AZ(s.bottom,c),(isNaN(d)||isNaN(parseFloat(s.left)))&&(d=0),(isNaN(f)||isNaN(parseFloat(s.right)))&&(f=u),(isNaN(p)||isNaN(parseFloat(s.top)))&&(p=0),(isNaN(g)||isNaN(parseFloat(s.bottom)))&&(g=c),{width:Math.max(f-d-(h=TG(h||0))[1]-h[3],0),height:Math.max(g-p-h[0]-h[2],0)}),x=e.totalWidth,S=e.renderList,C=n.getModel("itemStyle").getItemStyle(),_=S.length-1;_>=0;_--){var M=S[_],T=M.node,I=M.width,R=M.text;x>b.width&&(x-=I-y,I=y,R=null);var E=new PF({shape:{points:function(t,e,i,n,r,o){var a=[[r?t:t-5,0],[t+i,0],[t+i,e+n],[r?t:t-5,e+n]];return o||a.splice(2,0,[t+i+5,e+n/2]),r||a.push([t,e+n/2]),a}(m,0,I,w,_===S.length-1,0===_)},style:Tb(i.getItemStyle(),{lineJoin:"bevel"}),textContent:new D0({style:LN(r,{text:R})}),textConfig:{position:"inside"},z2:1e5,onclick:TA(a,T)});E.disableLabelAnimation=!0,E.getTextContent().ensureState("emphasis").style=LN(o,{text:R}),E.ensureState("emphasis").style=C,OB(E,n.get("focus"),n.get("blurScope"),n.get("disabled")),this.group.add(E),On(E).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:T&&T.dataIndex,name:T&&T.name},treePathInfo:T&&K0(T,t)},m+=I+8}},t.prototype.remove=function(){this.group.removeAll()},t}(),QR=function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(t,e,i,n,r){return!this._elExistsMap[t.id]&&(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:i,delay:n,easing:r}),!0)},t.prototype.finished=function(t){return this._finishedCallback=t,this},t.prototype.start=function(){for(var t=this,e=this._storage.length,i=function(){--e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},n=0,r=this._storage.length;n<r;n++){var o=this._storage[n];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:i,aborted:i})}return this},t}(),QE="label",QA="upperLabel",Qk=kP([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),QD=function(t){var e=Qk(t);return e.stroke=e.fill=e.lineWidth=null,e},QO=kg(),QP=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i._state="ready",i._storage=QL(),i}return M6(e,t),e.prototype.render=function(t,e,i,n){if(!(0>Tx(e.findComponents({mainType:"series",subType:"treemap",query:n}),t))){this.seriesModel=t,this.api=i,this.ecModel=e;var r=KK(n,["treemapZoomToNode","treemapRootToNode"],t),o=n&&n.type,a=t.layoutInfo,s=!this._oldTree,l=this._storage,h="treemapRootToNode"===o&&r&&l?{rootNodeGroup:l.nodeGroup[r.node.getRawIndex()],direction:n.direction}:null,u=this._giveContainerGroup(a),c=t.get("animation"),d=this._doRender(u,t,h);!c||s||o&&"treemapZoomToNode"!==o&&"treemapRootToNode"!==o?d.renderFinally():this._doAnimation(u,d,t,h),this._resetController(i),this._renderBreadcrumb(t,i,r)}},e.prototype._giveContainerGroup=function(t){var e=this._containerGroup;return e||(e=this._containerGroup=new Aj,this._initEvents(e),this.group.add(e)),e.x=t.x,e.y=t.y,e},e.prototype._doRender=function(t,e,i){var n,r=e.getData().tree,o=this._oldTree,a=QL(),s=QL(),l=this._storage,h=[];(function t(n,r,o,u,c){function d(t){return t.getId()}function p(d,p){var f=null!=d?n[d]:null,g=null!=p?r[p]:null,m=function(t,e,i,n,r,o,a,s,l,h){if(a){var u=a.getLayout(),c=t.getData(),d=a.getModel();if(c.setItemGraphicEl(a.dataIndex,null),u&&u.isInView){var p=u.width,f=u.height,g=u.borderWidth,m=u.invisible,y=a.getRawIndex(),w=s&&s.getRawIndex(),b=a.viewChildren,x=u.upperHeight,S=b&&b.length,C=d.getModel("itemStyle"),_=d.getModel(["emphasis","itemStyle"]),M=d.getModel(["blur","itemStyle"]),T=d.getModel(["select","itemStyle"]),I=C.get("borderRadius")||0,R=B("nodeGroup",Aj);if(R){if(l.add(R),R.x=u.x||0,R.y=u.y||0,R.markRedraw(),QO(R).nodeWidth=p,QO(R).nodeHeight=f,u.isAboveViewRoot)return R;var E=B("background",DK,h,20);E&&function(e,i,n){var r=On(i);if(r.dataIndex=a.dataIndex,r.seriesIndex=t.seriesIndex,i.setShape({x:0,y:0,width:p,height:f,r:I}),m)N(i);else{i.invisible=!1;var o=a.getVisual("style"),s=o.stroke,l=QD(C);l.fill=s;var h=Qk(_);h.fill=_.get("borderColor");var u=Qk(M);u.fill=M.get("borderColor");var c=Qk(T);if(c.fill=T.get("borderColor"),n){var d=p-2*g;H(i,s,o.opacity,{x:g,y:0,width:d,height:x})}else i.removeTextContent();i.setStyle(l),i.ensureState("emphasis").style=h,i.ensureState("blur").style=u,i.ensureState("select").style=c,OI(i)}e.add(i)}(R,E,S&&u.upperLabelHeight);var A=d.getModel("emphasis"),k=A.get("focus"),D=A.get("blurScope"),O=A.get("disabled"),P="ancestor"===k?a.getAncestorsIndices():"descendant"===k?a.getDescendantIndices():k;if(S)OG(R)&&OU(R,!1),E&&(OU(E,!O),c.setItemGraphicEl(a.dataIndex,E),OF(E,P,D));else{var L=B("content",DK,h,30);L&&function(e,i){var n=On(i);n.dataIndex=a.dataIndex,n.seriesIndex=t.seriesIndex;var r=Math.max(p-2*g,0),o=Math.max(f-2*g,0);if(i.culling=!0,i.setShape({x:g,y:g,width:r,height:o,r:I}),m)N(i);else{i.invisible=!1;var s=a.getVisual("style"),l=s.fill,h=QD(C);h.fill=l,h.decal=s.decal;var u=Qk(_),c=Qk(M),d=Qk(T);H(i,l,s.opacity,null),i.setStyle(h),i.ensureState("emphasis").style=u,i.ensureState("blur").style=c,i.ensureState("select").style=d,OI(i)}e.add(i)}(R,L),E.disableMorphing=!0,E&&OG(E)&&OU(E,!1),OU(R,!O),c.setItemGraphicEl(a.dataIndex,R),OF(R,P,D)}return R}}}function N(t){t.invisible||o.push(t)}function H(e,i,n,r){var o=d.getModel(r?QA:QE),s=kc(d.get("name"),null),l=o.getShallow("show");LP(e,LL(d,r?QA:QE),{defaultText:l?s:null,inheritColor:i,defaultOpacity:n,labelFetcher:t,labelDataIndex:a.dataIndex});var h=e.getTextContent();if(h){var c=h.style,p=TG(c.padding||0);r&&(e.setTextConfig({layoutRect:r}),h.disableLabelLayout=!0),h.beforeUpdate=function(){var t=Math.max((r?r.width:e.shape.width)-p[1]-p[3],0),i=Math.max((r?r.height:e.shape.height)-p[0]-p[2],0);(c.width!==t||c.height!==i)&&h.setStyle({width:t,height:i})},c.truncateMinChar=2,c.lineOverflow="truncate",V(c,r,u);var f=h.getState("emphasis");V(f?f.style:null,r,u)}}function V(e,i,n){var r=e?e.text:null;if(!i&&n.isLeafRoot&&null!=r){var o=t.get("drillDownIcon",!0);e.text=o?o+" "+r:r}}function B(t,o,s,l){var h,u,c=null!=w&&i[t][w],d=r[t];return c?(i[t][w]=null,h=c,u=d[y]={},h instanceof Aj?(u.oldX=h.x,u.oldY=h.y):u.oldShape=Tw({},h.shape)):m||((c=new o)instanceof k1&&(c.z2=100*s+l),function(t,e){var i=t[y]={},o=a.parentNode,s=e instanceof Aj;if(o&&(!n||"drillDown"===n.direction)){var l=0,h=0,u=r.background[o.getRawIndex()];!n&&u&&u.oldShape&&(l=u.oldShape.width,h=u.oldShape.height),s?(i.oldX=0,i.oldY=h):i.oldShape={x:l,y:h,width:0,height:0}}i.fadein=!s}(d,c)),e[t][y]=c}}(e,s,l,i,a,h,f,g,o,c);m&&t(f&&f.viewChildren||[],g&&g.viewChildren||[],m,u,c+1)}u?(r=n,T_(n,function(t,e){t.isRemoved()||p(e,e)})):new ze(r,n,d,d).add(p).update(p).remove(TA(p,null)).execute()})(r.root?[r.root]:[],o&&o.root?[o.root]:[],t,r===o||!o,0);var u=(n=QL(),l&&T_(l,function(t,e){var i=n[e];T_(t,function(t){t&&(i.push(t),QO(t).willDelete=!0)})}),n);if(this._oldTree=r,this._storage=s,this._controllerHost){var c=this.seriesModel.layoutInfo,d=r.root.getLayout();d.width===c.width&&d.height===c.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:a,willDeleteEls:u,renderFinally:function(){T_(u,function(t){T_(t,function(t){t.parent&&t.parent.remove(t)})}),T_(h,function(t){t.invisible=!0,t.dirty()})}}},e.prototype._doAnimation=function(t,e,i,n){var r=i.get("animationDurationUpdate"),o=i.get("animationEasing"),a=(TD(r)?0:r)||0,s=(TD(o)?null:o)||"cubicOut",l=new QR;T_(e.willDeleteEls,function(t,e){T_(t,function(t,i){if(!t.invisible){var r,o=t.parent,h=QO(o);if(n&&"drillDown"===n.direction)r=o===n.rootNodeGroup?{shape:{x:0,y:0,width:h.nodeWidth,height:h.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var u=0,c=0;h.willDelete||(u=h.nodeWidth/2,c=h.nodeHeight/2),r="nodeGroup"===e?{x:u,y:c,style:{opacity:0}}:{shape:{x:u,y:c,width:0,height:0},style:{opacity:0}}}r&&l.add(t,r,a,0,s)}})}),T_(this._storage,function(t,i){T_(t,function(t,n){var r=e.lastsForAnimation[i][n],o={};r&&(t instanceof Aj?null!=r.oldX&&(o.x=t.x,o.y=t.y,t.x=r.oldX,t.y=r.oldY):(r.oldShape&&(o.shape=Tw({},t.shape),t.setShape(r.oldShape)),r.fadein?(t.setStyle("opacity",0),o.style={opacity:1}):1!==t.style.opacity&&(o.style={opacity:1})),l.add(t,o,a,0,s))})},this),this._state="animating",l.finished(TE(function(){this._state="ready",e.renderFinally()},this)).start()},e.prototype._resetController=function(t){var e=this._controller,i=this._controllerHost;i||(this._controllerHost={target:this.group},i=this._controllerHost),e||((e=this._controller=new GE(t.getZr())).enable(this.seriesModel.get("roam")),i.zoomLimit=this.seriesModel.get("scaleLimit"),i.zoom=this.seriesModel.get("zoom"),e.on("pan",TE(this._onPan,this)),e.on("zoom",TE(this._onZoom,this)));var n=new I1(0,0,t.getWidth(),t.getHeight());e.setPointerChecker(function(t,e,i){return n.contain(e,i)})},e.prototype._clearController=function(){var t=this._controller;this._controllerHost=null,t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if("animating"!==this._state&&(Math.abs(t.dx)>3||Math.abs(t.dy)>3)){var e=this.seriesModel.getData().tree.root;if(e){var i=e.getLayout();i&&this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+t.dx,y:i.y+t.dy,width:i.width,height:i.height}})}}},e.prototype._onZoom=function(t){var e=t.originX,i=t.originY,n=t.scale;if("animating"!==this._state){var r=this.seriesModel.getData().tree.root;if(!r)return;var o=r.getLayout();if(!o)return;var a=new I1(o.x,o.y,o.width,o.height),s=null,l=this._controllerHost;s=l.zoomLimit;var h=l.zoom=l.zoom||1;if(h*=n,s){var u=s.min||0;h=Math.max(Math.min(s.max||1/0,h),u)}var c=h/l.zoom;l.zoom=h;var d=this.seriesModel.layoutInfo;e-=d.x,i-=d.y;var p=IV();Iz(p,p,[-e,-i]),IU(p,p,[c,c]),Iz(p,p,[e,i]),a.applyTransform(p),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x,y:a.y,width:a.width,height:a.height}})}},e.prototype._initEvents=function(t){var e=this;t.on("click",function(t){if("ready"===e._state){var i=e.seriesModel.get("nodeClick",!0);if(i){var n=e.findTarget(t.offsetX,t.offsetY);if(n){var r=n.node;if(r.getLayout().isLeafRoot)e._rootToNode(n);else if("zoomToNode"===i)e._zoomToNode(n);else if("link"===i){var o=r.hostTree.data.getItemModel(r.dataIndex),a=o.get("link",!0),s=o.get("target",!0)||"blank";a&&NA(a,s)}}}}},this)},e.prototype._renderBreadcrumb=function(t,e,i){var n=this;i||(i=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2))||(i={node:t.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new QI(this.group))).render(t,e,i.node,function(e){"animating"!==n._state&&(KJ(t.getViewRoot(),e)?n._rootToNode({node:e}):n._zoomToNode({node:e}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=QL(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,e){var i;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(n){var r=this._storage.background[n.getRawIndex()];if(r){var o=r.transformCoordToLocal(t,e),a=r.shape;if(!(a.x<=o[0])||!(o[0]<=a.x+a.width)||!(a.y<=o[1])||!(o[1]<=a.y+a.height))return!1;i={node:n,offsetX:o[0],offsetY:o[1]}}},this),i},e.type="treemap",e}(VX);function QL(){return{nodeGroup:[],background:[],content:[]}}var QN=kg(),QH={seriesType:"treemap",reset:function(t){var e=t.getData().tree.root;e.isRemoved()||function t(e,i,n,r){var o,a=e.getModel(),s=e.getLayout(),l=e.hostTree.data;if(s&&!s.invisible&&s.isInView){var h,u,c,d=a.getModel("itemStyle"),p=(h=Tw({},i),u=r.designatedVisualItemStyle,T_(["color","colorAlpha","colorSaturation"],function(t){u[t]=i[t];var e=d.get(t);u[t]=null,null!=e&&(h[t]=e)}),h),f=l.ensureUniqueItemVisual(e.dataIndex,"style"),g=d.get("borderColor"),m=d.get("borderColorSaturation");null!=m&&(g=null!=(c=o=QV(p))?RQ(c,null,null,m):null),f.stroke=g;var y=e.viewChildren;if(y&&y.length){var w=function(t,e,i,n,r,o){if(o&&o.length){var a=QF(e,"color")||null!=r.color&&"none"!==r.color&&(QF(e,"colorAlpha")||QF(e,"colorSaturation"));if(a){var s=e.get("visualMin"),l=e.get("visualMax"),h=i.dataExtent.slice();null!=s&&s<h[0]&&(h[0]=s),null!=l&&l>h[1]&&(h[1]=l);var u=e.get("colorMappingBy"),c={type:a.name,dataExtent:h,visual:a.range};"color"===c.type&&("index"===u||"id"===u)?(c.mappingMethod="category",c.loop=!0):c.mappingMethod="linear";var d=new Ke(c);return QN(d).drColorMappingBy=u,d}}}(0,a,s,0,p,y);T_(y,function(e,i){if(e.depth>=n.length||e===n[e.depth]){var o=function(t,e,i,n,r,o){var a=Tw({},e);if(r){var s=r.type,l="color"===s&&QN(r).drColorMappingBy,h="index"===l?n:"id"===l?o.mapIdToIndex(i.getId()):i.getValue(t.get("visualDimension"));a[s]=r.mapValueToVisual(h)}return a}(a,p,e,i,w,r);t(e,o,n,r)}})}else o=QV(p),f.fill=o}}(e,{},t.getViewRoot().getAncestors(),t)}};function QV(t){var e=QB(t,"color");if(e){var i=QB(t,"colorAlpha"),n=QB(t,"colorSaturation");return n&&(e=RQ(e,null,null,n)),i&&(e=RJ(e,i)),e}}function QB(t,e){var i=t[e];if(null!=i&&"none"!==i)return i}function QF(t,e){var i=t.get(e);return Tk(i)&&i.length?{name:e,range:i}:null}var QW=Math.max,Qz=Math.min,Qj=["itemStyle","borderWidth"],QU=["itemStyle","gapWidth"],QG=["upperLabel","show"],QY=["upperLabel","height"],QX={seriesType:"treemap",reset:function(t,e,i,n){var r=i.getWidth(),o=i.getHeight(),a=t.option,s=NP(t.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()}),l=a.size||[],h=AZ(TW(s.width,l[0]),r),u=AZ(TW(s.height,l[1]),o),c=n&&n.type,d=KK(n,["treemapZoomToNode","treemapRootToNode"],t),p="treemapRender"===c||"treemapMove"===c?n.rootRect:null,f=t.getViewRoot(),g=KQ(f);if("treemapMove"!==c){var m="treemapZoomToNode"===c?function(t,e,i,n,r){var o,a=(e||{}).node,s=[n,r];if(!a||a===i)return s;for(var l=n*r,h=l*t.option.zoomToNodeRatio;o=a.parentNode;){for(var u=0,c=o.children,d=0,p=c.length;d<p;d++)u+=c[d].getValue();var f=a.getValue();if(0===f)return s;h*=u/f;var g=o.getModel(),m=g.get(Qj),y=Math.max(m,QZ(g));(h+=4*m*m+(3*m+y)*Math.pow(h,.5))>9007199254740991&&(h=9007199254740991),a=o}h<l&&(h=l);var w=Math.pow(h/l,.5);return[n*w,r*w]}(t,d,f,h,u):p?[p.width,p.height]:[h,u],y=a.sort;y&&"asc"!==y&&"desc"!==y&&(y="desc");var w={squareRatio:a.squareRatio,sort:y,leafDepth:a.leafDepth};f.hostTree.clearLayouts();var b={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};f.setLayout(b),function t(e,i,n,r){if(!e.isRemoved()){var o,a,s=e.getLayout();o=s.width,a=s.height;var l=e.getModel(),h=l.get(Qj),u=l.get(QU)/2,c=QZ(l),d=Math.max(h,c),p=h-u,f=d-u;e.setLayout({borderWidth:h,upperHeight:d,upperLabelHeight:c},!0);var g=(o=QW(o-2*p,0))*(a=QW(a-p-f,0)),m=function(t,e,i,n,r,o){var a,s,l=t.children||[],h=n.sort;"asc"!==h&&"desc"!==h&&(h=null);var u=null!=n.leafDepth&&n.leafDepth<=o;if(r&&!u)return t.viewChildren=[];a=l=TI(l,function(t){return!t.isRemoved()}),(s=h)&&a.sort(function(t,e){var i="asc"===s?t.getValue()-e.getValue():e.getValue()-t.getValue();return 0===i?"asc"===s?t.dataIndex-e.dataIndex:e.dataIndex-t.dataIndex:i});var c=function(t,e,i){for(var n,r=0,o=0,a=e.length;o<a;o++)r+=e[o].getValue();var s=t.get("visualDimension");return e&&e.length?"value"===s&&i?(n=[e[e.length-1].getValue(),e[0].getValue()],"asc"===i&&n.reverse()):(n=[1/0,-1/0],T_(e,function(t){var e=t.getValue(s);e<n[0]&&(n[0]=e),e>n[1]&&(n[1]=e)})):n=[NaN,NaN],{sum:r,dataExtent:n}}(e,l,h);if(0===c.sum||(c.sum=function(t,e,i,n,r){if(!n)return i;for(var o=t.get("visibleMin"),a=r.length,s=a,l=a-1;l>=0;l--){var h=r["asc"===n?a-l-1:l].getValue();h/i*e<o&&(s=l,i-=h)}return"asc"===n?r.splice(0,a-s):r.splice(s,a-s),i}(e,i,c.sum,h,l),0===c.sum))return t.viewChildren=[];for(var d=0,p=l.length;d<p;d++){var f=l[d].getValue()/c.sum*i;l[d].setLayout({area:f})}return u&&(l.length&&t.setLayout({isLeafRoot:!0},!0),l.length=0),t.viewChildren=l,t.setLayout({dataExtent:c.dataExtent},!0),l}(e,l,g,i,n,r);if(m.length){var y={x:p,y:f,width:o,height:a},w=Qz(o,a),b=1/0,x=[];x.area=0;for(var S=0,C=m.length;S<C;){var _=m[S];x.push(_),x.area+=_.getLayout().area;var M=function(t,e,i){for(var n=0,r=1/0,o=0,a=void 0,s=t.length;o<s;o++)(a=t[o].getLayout().area)&&(a<r&&(r=a),a>n&&(n=a));var l=t.area*t.area,h=e*e*i;return l?QW(h*n/l,l/(h*r)):1/0}(x,w,i.squareRatio);M<=b?(S++,b=M):(x.area-=x.pop().getLayout().area,Q$(x,w,y,u,!1),w=Qz(y.width,y.height),x.length=x.area=0,b=1/0)}if(x.length&&Q$(x,w,y,u,!0),!n){var T=l.get("childrenVisibleMin");null!=T&&g<T&&(n=!0)}for(var S=0,C=m.length;S<C;S++)t(m[S],i,n,r+1)}}}(f,w,!1,0),b=f.getLayout(),T_(g,function(t,e){var i=(g[e+1]||f).getValue();t.setLayout(Tw({dataExtent:[i,i],borderWidth:0,upperHeight:0},b))})}var x=t.getData().tree.root;x.setLayout(function(t,e,i){if(e)return{x:e.x,y:e.y};var n={x:0,y:0};if(!i)return n;var r=i.node,o=r.getLayout();if(!o)return n;for(var a=[o.width/2,o.height/2],s=r;s;){var l=s.getLayout();a[0]+=l.x,a[1]+=l.y,s=s.parentNode}return{x:t.width/2-a[0],y:t.height/2-a[1]}}(s,p,d),!0),t.setLayoutInfo(s),function t(e,i,n,r,o){var a=e.getLayout(),s=n[o],l=s&&s===e;if((!s||l)&&(o!==n.length||e===r)){e.setLayout({isInView:!0,invisible:!l&&!i.intersect(a),isAboveViewRoot:l},!0);var h=new I1(i.x-a.x,i.y-a.y,i.width,i.height);T_(e.viewChildren||[],function(e){t(e,h,n,r,o+1)})}}(x,new I1(-s.x,-s.y,r,o),g,f,0)}};function Q$(t,e,i,n,r){var o=e===i.width?0:1,a=1-o,s=["x","y"],l=["width","height"],h=i[s[o]],u=e?t.area/e:0;(r||u>i[l[a]])&&(u=i[l[a]]);for(var c=0,d=t.length;c<d;c++){var p=t[c],f={},g=u?p.getLayout().area/u:0,m=f[l[a]]=QW(u-2*n,0),y=i[s[o]]+i[l[o]]-h,w=c===d-1||y<g?y:g,b=f[l[o]]=QW(w-2*n,0);f[s[a]]=i[s[a]]+Qz(n,m/2),f[s[o]]=h+Qz(n,b/2),h+=w,p.setLayout(f,!0)}i[s[a]]+=u,i[l[a]]-=u}function QZ(t){return t.get(QG)?t.get(QY):0}var Qq={label:{enabled:!0},decal:{show:!1}},QK=kg(),QQ={};function QJ(t,e){var i=t.getModel("aria");if(i.get("enabled")){var n=Tm(Qq);Ty(n.label,t.getLocaleModel().get("aria"),!1),Ty(i.option,n,!1),function(){if(i.getModel("decal").get("show")){var e=TQ();t.eachSeries(function(t){if(!t.isColorBySeries()){var i=e.get(t.type);i||(i={},e.set(t.type,i)),QK(t).scope=i}}),t.eachRawSeries(function(e){if(!t.isSeriesFiltered(e)){if(TD(e.enableAriaDecal)){e.enableAriaDecal();return}var i=e.getData();if(e.isColorBySeries()){var n=Ht(e.ecModel,e.name,QQ,t.getSeriesCount()),r=i.getVisual("decal");i.setVisual("decal",h(r,n))}else{var o=e.getRawData(),a={},s=QK(e).scope;i.each(function(t){a[i.getRawIndex(t)]=t});var l=o.count();o.each(function(t){var n=a[t],r=o.getName(t)||t+"",u=Ht(e.ecModel,r,s,l),c=i.getItemVisual(n,"decal");i.setItemVisual(n,"decal",h(c,u))})}}function h(t,e){var i=t?Tw(Tw({},e),t):e;return i.dirty=!0,i}})}}(),function(){var n,o=e.getZr().dom;if(o){var a=t.getLocaleModel().get("aria"),s=i.getModel("label");if(s.option=Tb(s.option,a),s.get("enabled")){if(s.get("description")){o.setAttribute("aria-label",s.get("description"));return}var l,h=t.getSeriesCount(),u=s.get(["data","maxCount"])||10,c=Math.min(h,s.get(["series","maxCount"])||10);if(h<1)return;var d=((l=t.get("title"))&&l.length&&(l=l[0]),l&&l.text);n=d?r(s.get(["general","withTitle"]),{title:d}):s.get(["general","withoutTitle"]);var p=[];n+=r(h>1?s.get(["series","multiple","prefix"]):s.get(["series","single","prefix"]),{seriesCount:h}),t.eachSeries(function(e,i){if(i<c){var n,o,a=void 0,l=e.get("name")?"withName":"withoutName";a=r(a=h>1?s.get(["series","multiple",l]):s.get(["series","single",l]),{seriesId:e.seriesIndex,seriesName:e.get("name"),seriesType:(n=e.subType,(o=t.getLocaleModel().get(["series","typeNames"]))[n]||o.chart)});var d=e.getData();d.count()>u?a+=r(s.get(["data","partialData"]),{displayCnt:u}):a+=s.get(["data","allData"]);for(var f=s.get(["data","separator","middle"]),g=s.get(["data","separator","end"]),m=[],y=0;y<d.count();y++)if(y<u){var w=d.getName(y),b=d.getValues(y),x=s.get(["data",w?"withName":"withoutName"]);m.push(r(x,{name:w,value:b.join(f)}))}a+=m.join(f)+g,p.push(a)}});var f=s.getModel(["series","multiple","separator"]),g=f.get("middle"),m=f.get("end");n+=p.join(g)+m,o.setAttribute("aria-label",n)}}}()}function r(t,e){if(!TO(t))return t;var i=t;return T_(e,function(t,e){i=i.replace(RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)}),i}}function Q0(t){if(t&&t.aria){var e=t.aria;null!=e.show&&(e.enabled=e.show),e.label=e.label||{},T_(["description","general","series","data"],function(t){null!=e[t]&&(e.label[t]=e[t])})}}var Q1=kg(),Q2=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(t,e,i,n){var r=e.get("value"),o=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=i,n||this._lastValue!==r||this._lastStatus!==o){this._lastValue=r,this._lastStatus=o;var a=this._group,s=this._handle;if(!o||"hide"===o){a&&a.hide(),s&&s.hide();return}a&&a.show(),s&&s.show();var l={};this.makeElOption(l,r,t,e,i);var h=l.graphicKey;h!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=h;var u=this._moveAnimation=this.determineAnimation(t,e);if(a){var c=TA(Q5,e,u);this.updatePointerEl(a,l,c),this.updateLabelEl(a,l,c,e)}else a=this._group=new O3.Group,this.createPointerEl(a,l,t,e),this.createLabelEl(a,l,t,e),i.getZr().add(a);Q6(a,e,!0),this._renderHandle(r)}},t.prototype.remove=function(t){this.clear(t)},t.prototype.dispose=function(t){this.clear(t)},t.prototype.determineAnimation=function(t,e){var i=e.get("animation"),n=t.axis,r="category"===n.type,o=e.get("snap");if(!o&&!r)return!1;if("auto"===i||null==i){var a=this.animationThreshold;if(r&&n.getBandWidth()>a)return!0;if(o){var s=KO(t).seriesDataCount,l=n.getExtent();return Math.abs(l[0]-l[1])/s>a}return!1}return!0===i},t.prototype.makeElOption=function(t,e,i,n,r){},t.prototype.createPointerEl=function(t,e,i,n){var r=e.pointer;if(r){var o=Q1(t).pointerEl=new O3[r.type](Tm(e.pointer));t.add(o)}},t.prototype.createLabelEl=function(t,e,i,n){if(e.label){var r=Q1(t).labelEl=new O3.Text(Tm(e.label));t.add(r),Q3(r,n)}},t.prototype.updatePointerEl=function(t,e,i){var n=Q1(t).pointerEl;n&&e.pointer&&(n.setStyle(e.pointer.style),i(n,{shape:e.pointer.shape}))},t.prototype.updateLabelEl=function(t,e,i,n){var r=Q1(t).labelEl;r&&(r.setStyle(e.label.style),i(r,{x:e.label.x,y:e.label.y}),Q3(r,n))},t.prototype._renderHandle=function(t){if(!this._dragging&&this.updateHandleTransform){var e,i=this._axisPointerModel,n=this._api.getZr(),r=this._handle,o=i.getModel("handle"),a=i.get("status");if(!o.get("show")||!a||"hide"===a){r&&n.remove(r),this._handle=null;return}this._handle||(e=!0,r=this._handle=O3.createIcon(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){IO(t.event)},onmousedown:TE(this._onHandleDragMove,this,0,0),drift:TE(this._onHandleDragMove,this),ondragend:TE(this._onHandleDragEnd,this)}),n.add(r)),Q6(r,i,!1),r.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=o.get("size");Tk(s)||(s=[s,s]),r.scaleX=s[0]/2,r.scaleY=s[1]/2,V5(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},t.prototype._moveHandleToValue=function(t,e){Q5(this._axisPointerModel,!e&&this._moveAnimation,this._handle,Q4(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(t,e){var i=this._handle;if(i){this._dragging=!0;var n=this.updateHandleTransform(Q4(i),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=n,i.stopAnimation(),i.attr(Q4(n)),Q1(i).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),i=this._group,n=this._handle;e&&i&&(this._lastGraphicKey=null,i&&e.remove(i),n&&e.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),V3(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(t,e,i){return{x:t[i=i||0],y:t[1-i],width:e[i],height:e[1-i]}},t}();function Q5(t,e,i,n){!function t(e,i){if(!(TN(e)&&TN(i)))return e===i;var n=!0;return T_(i,function(i,r){n=n&&t(e[r],i)}),!!n}(Q1(i).lastProp,n)&&(Q1(i).lastProp=n,e?O3.updateProps(i,n,t):(i.stopAnimation(),i.attr(n)))}function Q3(t,e){t[e.get(["label","show"])?"show":"hide"]()}function Q4(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function Q6(t,e,i){var n=e.get("z"),r=e.get("zlevel");t&&t.traverse(function(t){"group"!==t.type&&(null!=n&&(t.z=n),null!=r&&(t.zlevel=r),t.silent=i)})}function Q8(t){var e,i=t.get("type"),n=t.getModel(i+"Style");return"line"===i?(e=n.getLineStyle()).fill=null:"shadow"===i&&((e=n.getAreaStyle()).stroke=null),e}function Q9(t,e,i,n,r){var o,a,s=Q7(i.get("value"),e.axis,e.ecModel,i.get("seriesDataIndices"),{precision:i.get(["label","precision"]),formatter:i.get(["label","formatter"])}),l=i.getModel("label"),h=TG(l.get("padding")||0),u=l.getFont(),c=AE(s,u),d=r.position,p=c.width+h[1]+h[3],f=c.height+h[0]+h[2],g=r.align;"right"===g&&(d[0]-=p),"center"===g&&(d[0]-=p/2);var m=r.verticalAlign;"bottom"===m&&(d[1]-=f),"middle"===m&&(d[1]-=f/2),o=n.getWidth(),a=n.getHeight(),d[0]=Math.min(d[0]+p,o)-p,d[1]=Math.min(d[1]+f,a)-f,d[0]=Math.max(d[0],0),d[1]=Math.max(d[1],0);var y=l.get("backgroundColor");y&&"auto"!==y||(y=e.get(["axisLine","lineStyle","color"])),t.label={x:d[0],y:d[1],style:LN(l,{text:s,font:u,fill:l.getTextColor(),padding:h,backgroundColor:y}),z2:10}}function Q7(t,e,i,n,r){t=e.scale.parse(t);var o=e.scale.getLabel({value:t},{precision:r.precision}),a=r.formatter;if(a){var s={value:$A(e,{value:t}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};T_(n,function(t){var e=i.getSeriesByIndex(t.seriesIndex),n=t.dataIndexInside,r=e&&e.getDataParams(n);r&&s.seriesData.push(r)}),TO(a)?o=a.replace("{value}",o):TD(a)&&(o=a(s))}return o}function Jt(t,e,i){var n=IV();return Ij(n,n,i.rotation),Iz(n,n,i.position),Lb([t.dataToCoord(e),(i.labelOffset||0)+(i.labelDirection||1)*(i.labelMargin||0)],n)}function Je(t,e,i,n,r,o){var a=Zh.innerTextLayout(i.rotation,0,i.labelDirection);i.labelMargin=r.get(["label","margin"]),Q9(e,n,r,o,{position:Jt(n.axis,t,i),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function Ji(t,e,i){return{x1:t[i=i||0],y1:t[1-i],x2:e[i],y2:e[1-i]}}function Jn(t,e,i){return{x:t[i=i||0],y:t[1-i],width:e[i],height:e[1-i]}}function Jr(t,e,i,n,r,o){return{cx:t,cy:e,r0:i,r:n,startAngle:r,endAngle:o,clockwise:!0}}var Jo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.makeElOption=function(t,e,i,n,r){var o=i.axis,a=o.grid,s=n.get("type"),l=Ja(a,o).getOtherAxis(o).getGlobalExtent(),h=o.toGlobalCoord(o.dataToCoord(e,!0));if(s&&"none"!==s){var u=Q8(n),c=Js[s](o,h,l);c.style=u,t.graphicKey=c.type,t.pointer=c}Je(e,t,KM(a.model,i),i,n,r)},e.prototype.getHandleTransform=function(t,e,i){var n=KM(e.axis.grid.model,e,{labelInside:!1});n.labelMargin=i.get(["handle","margin"]);var r=Jt(e.axis,t,n);return{x:r[0],y:r[1],rotation:n.rotation+(n.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,i,n){var r=i.axis,o=r.grid,a=r.getGlobalExtent(!0),s=Ja(o,r).getOtherAxis(r).getGlobalExtent(),l="x"===r.dim?0:1,h=[t.x,t.y];h[l]+=e[l],h[l]=Math.min(a[1],h[l]),h[l]=Math.max(a[0],h[l]);var u=(s[1]+s[0])/2,c=[u,u];return c[l]=h[l],{x:h[0],y:h[1],rotation:t.rotation,cursorPoint:c,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}},e}(Q2);function Ja(t,e){var i={};return i[e.dim+"AxisIndex"]=e.index,t.getCartesian(i)}var Js={line:function(t,e,i){return{type:"Line",subPixelOptimize:!0,shape:Ji([e,i[0]],[e,i[1]],Jl(t))}},shadow:function(t,e,i){var n=Math.max(1,t.getBandWidth()),r=i[1]-i[0];return{type:"Rect",shape:Jn([e-n/2,i[0]],[n,r],Jl(t))}}};function Jl(t){return"x"===t.dim?0:1}var Jh=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(NW),Ju=kg();function Jc(t,e,i){if(!M9.node){var n=e.getZr();Ju(n).records||(Ju(n).records={}),function(t,e){Ju(t).initialized||(Ju(t).initialized=!0,i("click",TA(Jp,"click")),i("mousemove",TA(Jp,"mousemove")),i("globalout",Jd));function i(i,n){t.on(i,function(i){var r,o,a,s,l,h,u=(r={showTip:[],hideTip:[]},{dispatchAction:o=function(t){var i=r[t.type];i?i.push(t):(t.dispatchAction=o,e.dispatchAction(t))},pendings:r});T_(Ju(t).records,function(t){t&&n(t,i,u.dispatchAction)}),l=(a=u.pendings).showTip.length,h=a.hideTip.length,l?s=a.showTip[l-1]:h&&(s=a.hideTip[h-1]),s&&(s.dispatchAction=null,e.dispatchAction(s))})}}(n,e),(Ju(n).records[t]||(Ju(n).records[t]={})).handler=i}}function Jd(t,e,i){t.handler("leave",null,i)}function Jp(t,e,i,n){e.handler(t,i,n)}function Jf(t,e){if(!M9.node){var i=e.getZr();(Ju(i).records||{})[t]&&(Ju(i).records[t]=null)}}var Jg=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i){var n=e.getComponent("tooltip"),r=t.get("triggerOn")||n&&n.get("triggerOn")||"mousemove|click";Jc("axisPointer",i,function(t,e,i){"none"!==r&&("leave"===t||r.indexOf(t)>=0)&&i({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})})},e.prototype.remove=function(t,e){Jf("axisPointer",e)},e.prototype.dispose=function(t,e){Jf("axisPointer",e)},e.type="axisPointer",e}(Vj);function Jm(t,e){var i,n=[],r=t.seriesIndex;if(null==r||!(i=e.getSeriesByIndex(r)))return{point:[]};var o=i.getData(),a=kf(o,t);if(null==a||a<0||Tk(a))return{point:[]};var s=o.getItemGraphicEl(a),l=i.coordinateSystem;if(i.getTooltipPosition)n=i.getTooltipPosition(a)||[];else if(l&&l.dataToPoint){if(t.isStacked){var h=l.getBaseAxis(),u=l.getOtherAxis(h).dim,c=h.dim,d="x"===u||"radius"===u?1:0,p=o.mapDimension(c),f=[];f[d]=o.get(p,a),f[1-d]=o.get(o.getCalculationInfo("stackResultDimension"),a),n=l.dataToPoint(f)||[]}else n=l.dataToPoint(o.getValues(TM(l.dimensions,function(t){return o.mapDimension(t)}),a))||[]}else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),n=[g.x+g.width/2,g.y+g.height/2]}return{point:n,el:s}}var Jy=kg();function Jv(t,e,i){var n=t.currTrigger,r=[t.x,t.y],o=t.dispatchAction||TE(i.dispatchAction,i),a=e.getComponent("axisPointer").coordSysAxesInfo;if(a){JC(r)&&(r=Jm({seriesIndex:t.seriesIndex,dataIndex:t.dataIndex},e).point);var s,l,h,u,c,d,p,f=JC(r),g=t.axesInfo,m=a.axesInfo,y="leave"===n||JC(r),w={},b={},x={list:[],map:{}},S={showPointer:TA(Jb,b),showTooltip:TA(Jx,x)};T_(a.coordSysMap,function(t,e){var i=f||t.containPoint(r);T_(a.coordSysAxesInfo[e],function(t,e){var n=t.axis,o=function(t,e){for(var i=0;i<(t||[]).length;i++){var n=t[i];if(e.axis.dim===n.axisDim&&e.axis.model.componentIndex===n.axisIndex)return n}}(g,t);if(!y&&i&&(!g||o)){var a=o&&o.value;null!=a||f||(a=n.pointToData(r)),null!=a&&Jw(t,a,S,!1,w)}})});var C={};return T_(m,function(t,e){var i=t.linkGroup;i&&!b[e]&&T_(i.axesInfo,function(e,n){var r=b[n];if(e!==t&&r){var o=r.value;i.mapper&&(o=t.axis.scale.parse(i.mapper(o,JS(e),JS(t)))),C[t.key]=o}})}),T_(C,function(t,e){Jw(m[e],t,S,!0,w)}),s=w.axesInfo=[],T_(m,function(t,e){var i=t.axisPointerModel.option,n=b[e];n?(t.useHandle||(i.status="show"),i.value=n.value,i.seriesDataIndices=(n.payloadBatch||[]).slice()):t.useHandle||(i.status="hide"),"show"===i.status&&s.push({axisDim:t.axis.dim,axisIndex:t.axis.model.componentIndex,value:i.value})}),function(t,e,i,n){if(JC(e)||!t.list.length){n({type:"hideTip"});return}var r=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:i.tooltipOption,position:i.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:t.list})}(x,r,t,o),l=i.getZr(),h="axisPointerLastHighlights",u=Jy(l)[h]||{},c=Jy(l)[h]={},T_(m,function(t,e){var i=t.axisPointerModel.option;"show"===i.status&&t.triggerEmphasis&&T_(i.seriesDataIndices,function(t){c[t.seriesIndex+" | "+t.dataIndex]=t})}),d=[],p=[],T_(u,function(t,e){c[e]||p.push(t)}),T_(c,function(t,e){u[e]||d.push(t)}),p.length&&i.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:p}),d.length&&i.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:d}),w}}function Jw(t,e,i,n,r){var o=t.axis;if(!o.scale.isBlank()&&o.containData(e)){if(!t.involveSeries){i.showPointer(t,e);return}var a,s,l,h,u,c,d,p=(a=e,l=(s=t.axis).dim,h=a,u=[],c=Number.MAX_VALUE,d=-1,T_(t.seriesModels,function(t,e){var i,n,r=t.getData().mapDimensionsAll(l);if(t.getAxisTooltipData){var o=t.getAxisTooltipData(r,a,s);n=o.dataIndices,i=o.nestestValue}else{if(!(n=t.getData().indicesOfNearest(r[0],a,"category"===s.type?.5:null)).length)return;i=t.getData().get(r[0],n[0])}if(null!=i&&isFinite(i)){var p=a-i,f=Math.abs(p);f<=c&&((f<c||p>=0&&d<0)&&(c=f,d=p,h=i,u.length=0),T_(n,function(e){u.push({seriesIndex:t.seriesIndex,dataIndexInside:e,dataIndex:t.getData().getRawIndex(e)})}))}}),{payloadBatch:u,snapToValue:h}),f=p.payloadBatch,g=p.snapToValue;f[0]&&null==r.seriesIndex&&Tw(r,f[0]),!n&&t.snap&&o.containData(g)&&null!=g&&(e=g),i.showPointer(t,e,f),i.showTooltip(t,p,g)}}function Jb(t,e,i,n){t[e.key]={value:i,payloadBatch:n}}function Jx(t,e,i,n){var r=i.payloadBatch,o=e.axis,a=o.model,s=e.axisPointerModel;if(e.triggerTooltip&&r.length){var l=e.coordSys.model,h=KL(l),u=t.map[h];u||(u=t.map[h]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(u)),u.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:r.slice()})}}function JS(t){var e=t.axis.model,i={},n=i.axisDim=t.axis.dim;return i.axisIndex=i[n+"AxisIndex"]=e.componentIndex,i.axisName=i[n+"AxisName"]=e.name,i.axisId=i[n+"AxisId"]=e.id,i}function JC(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}function J_(t){KH.registerAxisPointerClass("CartesianAxisPointer",Jo),t.registerComponentModel(Jh),t.registerComponentView(Jg),t.registerPreprocessor(function(t){if(t){t.axisPointer&&0!==t.axisPointer.length||(t.axisPointer={});var e=t.axisPointer.link;e&&!Tk(e)&&(t.axisPointer.link=[e])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(t,e){var i,n,r,o,a,s;t.getComponent("axisPointer").coordSysAxesInfo=(n=i={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}},r=t.getComponent("tooltip"),a=(o=t.getComponent("axisPointer")).get("link",!0)||[],s=[],T_(e.getCoordinateSystems(),function(e){if(e.axisPointerEnabled){var i=KL(e.model),l=n.coordSysAxesInfo[i]={};n.coordSysMap[i]=e;var h=e.model.getModel("tooltip",r);if(T_(e.getAxes(),TA(p,!1,null)),e.getTooltipAxes&&r&&h.get("show")){var u="axis"===h.get("trigger"),c="cross"===h.get(["axisPointer","type"]),d=e.getTooltipAxes(h.get(["axisPointer","axis"]));(u||c)&&T_(d.baseAxes,TA(p,!c||"cross",u)),c&&T_(d.otherAxes,TA(p,"cross",!1))}}function p(i,r,u){var c=u.model.getModel("axisPointer",o),d=c.get("show");if(d&&("auto"!==d||i||KP(c))){null==r&&(r=c.get("triggerTooltip"));var p=(c=i?function(t,e,i,n,r,o){var a=e.getModel("axisPointer"),s={};T_(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(t){s[t]=Tm(a.get(t))}),s.snap="category"!==t.type&&!!o,"cross"===a.get("type")&&(s.type="line");var l=s.label||(s.label={});if(null==l.show&&(l.show=!1),"cross"===r){var h=a.get(["label","show"]);if(l.show=null==h||h,!o){var u=s.lineStyle=a.get("crossStyle");u&&Tb(l,u.textStyle)}}return t.model.getModel("axisPointer",new L2(s,i,n))}(u,h,o,t,i,r):c).get("snap"),f=c.get("triggerEmphasis"),g=KL(u.model),m=r||p||"category"===u.type,y=n.axesInfo[g]={key:g,axis:u,coordSys:e,axisPointerModel:c,triggerTooltip:r,triggerEmphasis:f,involveSeries:m,snap:p,useHandle:KP(c),seriesModels:[],linkGroup:null};l[g]=y,n.seriesInvolved=n.seriesInvolved||m;var w=function(t,e){for(var i=e.model,n=e.dim,r=0;r<t.length;r++){var o=t[r]||{};if(KD(o[n+"AxisId"],i.id)||KD(o[n+"AxisIndex"],i.componentIndex)||KD(o[n+"AxisName"],i.name))return r}}(a,u);if(null!=w){var b=s[w]||(s[w]={axesInfo:{}});b.axesInfo[g]=y,b.mapper=a[w].mapper,y.linkGroup=b}}}}),i.seriesInvolved&&function(t,e){e.eachSeries(function(e){var i=e.coordinateSystem,n=e.get(["tooltip","trigger"],!0),r=e.get(["tooltip","show"],!0);i&&"none"!==n&&!1!==n&&"item"!==n&&!1!==r&&!1!==e.get(["axisPointer","show"],!0)&&T_(t.coordSysAxesInfo[KL(i.model)],function(t){var n=t.axis;i.getAxis(n.dim)===n&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())})})}(i,t),i)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Jv)}var JM=["rect","polygon","keep","clear"];function JT(t,e){var i=kr(t?t.brush:[]);if(i.length){var n,r=[];T_(i,function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];e instanceof Array&&(r=r.concat(e))});var o=t&&t.toolbox;Tk(o)&&(o=o[0]),o||(o={feature:{}},t.toolbox=[o]);var a=o.feature||(o.feature={}),s=a.brush||(a.brush={}),l=s.type||(s.type=[]);l.push.apply(l,r),n={},T_(l,function(t){n[t]=1}),l.length=0,T_(n,function(t,e){l.push(e)}),e&&!l.length&&l.push.apply(l,JM)}}function JI(t){if(t){for(var e in t)if(t.hasOwnProperty(e))return!0}}function JR(t,e,i){var n={};return T_(e,function(e){var r,o=n[e]=((r=function(){}).prototype.__hidden=r.prototype,new r);T_(t[e],function(t,n){if(Ke.isValidType(n)){var r={type:n,visual:t};i&&i(r,e),o[n]=new Ke(r),"opacity"===n&&((r=Tm(r)).type="colorAlpha",o.__hidden.__alphaForOpacity=new Ke(r))}})}),n}function JE(t,e,i){var n;T_(i,function(t){e.hasOwnProperty(t)&&JI(e[t])&&(n=!0)}),n&&T_(i,function(i){e.hasOwnProperty(i)&&JI(e[i])?t[i]=Tm(e[i]):delete t[i]})}var JA={lineX:Jk(0),lineY:Jk(1),rect:{point:function(t,e,i){return t&&i.boundingRect.contain(t[0],t[1])},rect:function(t,e,i){return t&&i.boundingRect.intersect(t)}},polygon:{point:function(t,e,i){return t&&i.boundingRect.contain(t[0],t[1])&&Y6(i.range,t[0],t[1])},rect:function(t,e,i){var n=i.range;if(!t||n.length<=1)return!1;var r=t.x,o=t.y,a=t.width,s=t.height,l=n[0];if(Y6(n,r,o)||Y6(n,r+a,o)||Y6(n,r,o+s)||Y6(n,r+a,o+s)||I1.create(t).contain(l[0],l[1])||LT(r,o,r+a,o,n)||LT(r,o,r,o+s,n)||LT(r+a,o,r+a,o+s,n)||LT(r,o+s,r+a,o+s,n))return!0}}};function Jk(t){var e=["x","y"],i=["width","height"];return{point:function(e,i,n){if(e){var r=n.range;return JD(e[t],r)}},rect:function(n,r,o){if(n){var a=o.range,s=[n[e[t]],n[e[t]]+n[i[t]]];return s[1]<s[0]&&s.reverse(),JD(s[0],a)||JD(s[1],a)||JD(a[0],s)||JD(a[1],s)}}}}function JD(t,e){return e[0]<=t&&t<=e[1]}var JO=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],JP=function(){function t(t,e,i){var n=this;this._targetInfoList=[];var r=JN(e,t);T_(JH,function(t,e){(!i||!i.include||Tx(i.include,e)>=0)&&t(r,n._targetInfoList)})}return t.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(t,e,i){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var n=JF[t.brushType](0,i,e);t.__rangeOffset={offset:Jz[t.brushType](n.values,t.range,[1,1]),xyMinMax:n.xyMinMax}}}),t},t.prototype.matchOutputRanges=function(t,e,i){T_(t,function(t){var n=this.findTargetInfo(t,e);n&&!0!==n&&T_(n.coordSyses,function(n){var r=JF[t.brushType](1,n,t.range,!0);i(t,r.values,n,e)})},this)},t.prototype.setInputRanges=function(t,e){T_(t,function(t){var i=this.findTargetInfo(t,e);if(t.range=t.range||[],i&&!0!==i){t.panelId=i.panelId;var n,r,o,a,s,l=JF[t.brushType](0,i.coordSys,t.coordRange),h=t.__rangeOffset;t.range=h?Jz[t.brushType](l.values,h.offset,(n=l.xyMinMax,r=h.xyMinMax,o=JU(n),a=JU(r),isNaN((s=[o[0]/a[0],o[1]/a[1]])[0])&&(s[0]=1),isNaN(s[1])&&(s[1]=1),s)):l.values}},this)},t.prototype.makePanelOpts=function(t,e){return TM(this._targetInfoList,function(i){var n=i.getPanelRect();return{panelId:i.panelId,defaultBrushType:e?e(i):null,clipPath:Z0(n),isTargetByCursor:Z2(n,t,i.coordSysModel),getLinearBrushOtherExtent:Z1(n)}})},t.prototype.controlSeries=function(t,e,i){var n=this.findTargetInfo(t,i);return!0===n||n&&Tx(n.coordSyses,e.coordinateSystem)>=0},t.prototype.findTargetInfo=function(t,e){for(var i=this._targetInfoList,n=JN(e,t),r=0;r<i.length;r++){var o=i[r],a=t.panelId;if(a){if(o.panelId===a)return o}else for(var s=0;s<JV.length;s++)if(JV[s](n,o))return o}return!0},t}();function JL(t){return t[0]>t[1]&&t.reverse(),t}function JN(t,e){return ky(t,e,{includeMainTypes:JO})}var JH={grid:function(t,e){var i=t.xAxisModels,n=t.yAxisModels,r=t.gridModels,o=TQ(),a={},s={};(i||n||r)&&(T_(i,function(t){var e=t.axis.grid.model;o.set(e.id,e),a[e.id]=!0}),T_(n,function(t){var e=t.axis.grid.model;o.set(e.id,e),s[e.id]=!0}),T_(r,function(t){o.set(t.id,t),a[t.id]=!0,s[t.id]=!0}),o.each(function(t){var r=t.coordinateSystem,o=[];T_(r.getCartesians(),function(t,e){(Tx(i,t.getAxis("x").model)>=0||Tx(n,t.getAxis("y").model)>=0)&&o.push(t)}),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:o[0],coordSyses:o,getPanelRect:JB.grid,xAxisDeclared:a[t.id],yAxisDeclared:s[t.id]})}))},geo:function(t,e){T_(t.geoModels,function(t){var i=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:i,coordSyses:[i],getPanelRect:JB.geo})})}},JV=[function(t,e){var i=t.xAxisModel,n=t.yAxisModel,r=t.gridModel;return!r&&i&&(r=i.axis.grid.model),!r&&n&&(r=n.axis.grid.model),r&&r===e.gridModel},function(t,e){var i=t.geoModel;return i&&i===e.geoModel}],JB={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(Lw(t)),e}},JF={lineX:TA(JW,0),lineY:TA(JW,1),rect:function(t,e,i,n){var r=t?e.pointToData([i[0][0],i[1][0]],n):e.dataToPoint([i[0][0],i[1][0]],n),o=t?e.pointToData([i[0][1],i[1][1]],n):e.dataToPoint([i[0][1],i[1][1]],n),a=[JL([r[0],o[0]]),JL([r[1],o[1]])];return{values:a,xyMinMax:a}},polygon:function(t,e,i,n){var r=[[1/0,-1/0],[1/0,-1/0]];return{values:TM(i,function(i){var o=t?e.pointToData(i,n):e.dataToPoint(i,n);return r[0][0]=Math.min(r[0][0],o[0]),r[1][0]=Math.min(r[1][0],o[1]),r[0][1]=Math.max(r[0][1],o[0]),r[1][1]=Math.max(r[1][1],o[1]),o}),xyMinMax:r}}};function JW(t,e,i,n){var r=i.getAxis(["x","y"][t]),o=JL(TM([0,1],function(t){return e?r.coordToData(r.toLocalCoord(n[t]),!0):r.toGlobalCoord(r.dataToCoord(n[t]))})),a=[];return a[t]=o,a[1-t]=[NaN,NaN],{values:o,xyMinMax:a}}var Jz={lineX:TA(Jj,0),lineY:TA(Jj,1),rect:function(t,e,i){return[[t[0][0]-i[0]*e[0][0],t[0][1]-i[0]*e[0][1]],[t[1][0]-i[1]*e[1][0],t[1][1]-i[1]*e[1][1]]]},polygon:function(t,e,i){return TM(t,function(t,n){return[t[0]-i[0]*e[n][0],t[1]-i[1]*e[n][1]]})}};function Jj(t,e,i,n){return[e[0]-n[t]*i[0],e[1]-n[t]*i[1]]}function JU(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var JG=["inBrush","outOfBrush"],JY="__ecBrushSelect",JX="__ecInBrushSelectEvent";function J$(t){t.eachComponent({mainType:"brush"},function(e){(e.brushTargetManager=new JP(e.option,t)).setInputRanges(e.areas,t)})}function JZ(t,e,i){var n,r,o=[];t.eachComponent({mainType:"brush"},function(t){i&&"takeGlobalCursor"===i.type&&t.setBrushOption("brush"===i.key?i.brushOption:{brushType:!1})}),J$(t),t.eachComponent({mainType:"brush"},function(e,i){var a={brushId:e.id,brushIndex:i,brushName:e.name,areas:Tm(e.areas),selected:[]};o.push(a);var s=e.option,l=s.brushLink,h=[],u=[],c=[],d=!1;i||(n=s.throttleType,r=s.throttleDelay);var p=TM(e.areas,function(t){var e,i,n=JQ[t.brushType],r=Tb({boundingRect:n?n(t):void 0},t);return r.selectors=(e=r.brushType,i={point:function(t){return JA[e].point(t,i,r)},rect:function(t){return JA[e].rect(t,i,r)}}),r}),f=JR(e.option,JG,function(t){t.mappingMethod="fixed"});function g(t){return"all"===l||!!h[t]}function m(t){return!!t.length}Tk(l)&&T_(l,function(t){h[t]=1}),t.eachSeries(function(i,n){var r,o=c[n]=[];"parallel"===i.subType?(r=i.coordinateSystem,d=d||r.hasAxisBrushed(),g(n)&&r.eachActiveState(i.getData(),function(t,e){"active"===t&&(u[e]=1)})):function(i,n,r){if(!(!i.brushSelector||null!=(o=e.option.seriesIndex)&&"all"!==o&&(Tk(o)?0>Tx(o,n):n!==o))&&(T_(p,function(n){e.brushTargetManager.controlSeries(n,i,t)&&r.push(n),d=d||m(r)}),g(n)&&m(r))){var o,a=i.getData();a.each(function(t){JK(i,r,a,t)&&(u[t]=1)})}}(i,n,o)}),t.eachSeries(function(t,e){var i={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};a.selected.push(i);var n=c[e],r=t.getData(),o=g(e)?function(t){return u[t]?(i.dataIndex.push(r.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(e){return JK(t,n,r,e)?(i.dataIndex.push(r.getRawIndex(e)),"inBrush"):"outOfBrush"};(g(e)?d:m(n))&&function(t,e,i,n,r,o){var a,s={};function l(t){return B_(i,a,t)}function h(t,e){BT(i,a,t,e)}T_(t,function(t){var i=Ke.prepareVisualTypes(e[t]);s[t]=i}),i.each(function(t,r){a=t;var o=i.getRawDataItem(a);if(!o||!1!==o.visualMap)for(var u=n.call(void 0,t),c=e[u],d=s[u],p=0,f=d.length;p<f;p++){var g=d[p];c[g]&&c[g].applyVisual(t,l,h)}})}(JG,f,r,o)})}),function(t,e,i,n,r){if(r){var o=t.getZr();o[JX]||(o[JY]||(o[JY]=Jq),V5(o,JY,i,e)(t,n))}}(e,n,r,o,i)}function Jq(t,e){if(!t.isDisposed()){var i=t.getZr();i[JX]=!0,t.dispatchAction({type:"brushSelect",batch:e}),i[JX]=!1}}function JK(t,e,i,n){for(var r=0,o=e.length;r<o;r++){var a=e[r];if(t.brushSelector(n,i,a.selectors,a))return!0}}var JQ={rect:function(t){return JJ(t.range)},polygon:function(t){for(var e,i=t.range,n=0,r=i.length;n<r;n++){e=e||[[1/0,-1/0],[1/0,-1/0]];var o=i[n];o[0]<e[0][0]&&(e[0][0]=o[0]),o[0]>e[0][1]&&(e[0][1]=o[0]),o[1]<e[1][0]&&(e[1][0]=o[1]),o[1]>e[1][1]&&(e[1][1]=o[1])}return e&&JJ(e)}};function JJ(t){return new I1(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var J0=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e,this.model,(this._brushController=new ZC(e.getZr())).on("brush",TE(this._onBrush,this)).mount()},e.prototype.render=function(t,e,i,n){this.model=t,this._updateController(t,e,i,n)},e.prototype.updateTransform=function(t,e,i,n){J$(e),this._updateController(t,e,i,n)},e.prototype.updateVisual=function(t,e,i,n){this.updateTransform(t,e,i,n)},e.prototype.updateView=function(t,e,i,n){this._updateController(t,e,i,n)},e.prototype._updateController=function(t,e,i,n){n&&n.$from===t.id||this._brushController.setPanels(t.brushTargetManager.makePanelOpts(i)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var e=this.model.id,i=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:e,areas:Tm(i),$from:e}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:e,areas:Tm(i),$from:e})},e.type="brush",e}(Vj),J1=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.areas=[],i.brushOption={},i}return M6(e,t),e.prototype.optionUpdated=function(t,e){var i=this.option;e||JE(i,t,["inBrush","outOfBrush"]);var n=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:"#ddd"},n.hasOwnProperty("liftZ")||(n.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=TM(t,function(t){return J2(this.option,t)},this))},e.prototype.setBrushOption=function(t){this.brushOption=J2(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(NW);function J2(t,e){return Ty({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new L2(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}var J5=function(){},J3={},J4=["rect","polygon","lineX","lineY","keep","clear"],J6=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.render=function(t,e,i){var n,r,o;e.eachComponent({mainType:"brush"},function(t){n=t.brushType,r=t.brushOption.brushMode||"single",o=o||!!t.areas.length}),this._brushType=n,this._brushMode=r,T_(t.get("type",!0),function(e){t.setIconStatus(e,("keep"===e?"multiple"===r:"clear"===e?o:e===n)?"emphasis":"normal")})},e.prototype.updateView=function(t,e,i){this.render(t,e,i)},e.prototype.getIcons=function(){var t=this.model,e=t.get("icon",!0),i={};return T_(t.get("type",!0),function(t){e[t]&&(i[t]=e[t])}),i},e.prototype.onclick=function(t,e,i){var n=this._brushType,r=this._brushMode;"clear"===i?(e.dispatchAction({type:"axisAreaSelect",intervals:[]}),e.dispatchAction({type:"brush",command:"clear",areas:[]})):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===i?n:n!==i&&i,brushMode:"keep"===i?"multiple"===r?"single":"multiple":r}})},e.getDefaultOption=function(t){return{show:!0,type:J4.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])}},e}(J5),J8=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.init=function(e,i,n){var r=NV(e);t.prototype.init.apply(this,arguments),J9(e,r)},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),J9(this.option,e)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(NW);function J9(t,e){var i,n=t.cellSize;1===(i=Tk(n)?n:t.cellSize=[n,n]).length&&(i[1]=i[0]);var r=TM([0,1],function(t){return(null!=e[ND[t][0]]||null!=e[ND[t][1]]&&null!=e[ND[t][2]])&&(i[t]="auto"),null!=i[t]&&"auto"!==i[t]});NH(t,e,{type:"box",ignoreSize:r})}var J7=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i){var n=this.group;n.removeAll();var r=t.coordinateSystem,o=r.getRangeInfo(),a=r.getOrient(),s=e.getLocaleModel();this._renderDayRect(t,o,n),this._renderLines(t,o,a,n),this._renderYearText(t,o,a,n),this._renderMonthText(t,s,a,n),this._renderWeekText(t,s,o,a,n)},e.prototype._renderDayRect=function(t,e,i){for(var n=t.coordinateSystem,r=t.getModel("itemStyle").getItemStyle(),o=n.getCellWidth(),a=n.getCellHeight(),s=e.start.time;s<=e.end.time;s=n.getNextNDay(s,1).time){var l=n.dataToRect([s],!1).tl,h=new DK({shape:{x:l[0],y:l[1],width:o,height:a},cursor:"default",style:r});i.add(h)}},e.prototype._renderLines=function(t,e,i,n){var r=this,o=t.coordinateSystem,a=t.getModel(["splitLine","lineStyle"]).getLineStyle(),s=t.get(["splitLine","show"]),l=a.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=e.start,u=0;h.time<=e.end.time;u++){d(h.formatedDate),0===u&&(h=o.getDateInfo(e.start.y+"-"+e.start.m));var c=h.date;c.setMonth(c.getMonth()+1),h=o.getDateInfo(c)}function d(e){r._firstDayOfMonth.push(o.getDateInfo(e)),r._firstDayPoints.push(o.dataToRect([e],!1).tl);var l=r._getLinePointsOfOneWeek(t,e,i);r._tlpoints.push(l[0]),r._blpoints.push(l[l.length-1]),s&&r._drawSplitline(l,a,n)}d(o.getNextNDay(e.end.time,1).formatedDate),s&&this._drawSplitline(r._getEdgesPoints(r._tlpoints,l,i),a,n),s&&this._drawSplitline(r._getEdgesPoints(r._blpoints,l,i),a,n)},e.prototype._getEdgesPoints=function(t,e,i){var n=[t[0].slice(),t[t.length-1].slice()],r="horizontal"===i?0:1;return n[0][r]=n[0][r]-e/2,n[1][r]=n[1][r]+e/2,n},e.prototype._drawSplitline=function(t,e,i){var n=new Pj({z2:20,shape:{points:t},style:e});i.add(n)},e.prototype._getLinePointsOfOneWeek=function(t,e,i){for(var n=t.coordinateSystem,r=n.getDateInfo(e),o=[],a=0;a<7;a++){var s=n.getNextNDay(r.time,a),l=n.dataToRect([s.time],!1);o[2*s.day]=l.tl,o[2*s.day+1]=l["horizontal"===i?"bl":"tr"]}return o},e.prototype._formatterLabel=function(t,e){if(TO(t)&&t){var i;return i=t,T_(e,function(t,e){i=i.replace("{"+e+"}",t)}),i}return TD(t)?t(e):e.nameMap},e.prototype._yearTextPositionControl=function(t,e,i,n,r){var o=e[0],a=e[1],s=["center","bottom"];"bottom"===n?(a+=r,s=["center","top"]):"left"===n?o-=r:"right"===n?(o+=r,s=["center","top"]):a-=r;var l=0;return("left"===n||"right"===n)&&(l=Math.PI/2),{rotation:l,x:o,y:a,style:{align:s[0],verticalAlign:s[1]}}},e.prototype._renderYearText=function(t,e,i,n){var r=t.getModel("yearLabel");if(r.get("show")){var o=r.get("margin"),a=r.get("position");a||(a="horizontal"!==i?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,h=(s[0][1]+s[1][1])/2,u="horizontal"===i?0:1,c={top:[l,s[u][1]],bottom:[l,s[1-u][1]],left:[s[1-u][0],h],right:[s[u][0],h]},d=e.start.y;+e.end.y>+e.start.y&&(d=d+"-"+e.end.y);var p=r.get("formatter"),f={start:e.start.y,end:e.end.y,nameMap:d},g=new D0({z2:30,style:LN(r,{text:this._formatterLabel(p,f)})});g.attr(this._yearTextPositionControl(g,c[a],i,a,o)),n.add(g)}},e.prototype._monthTextPositionControl=function(t,e,i,n,r){var o="left",a="top",s=t[0],l=t[1];return"horizontal"===i?(l+=r,e&&(o="center"),"start"===n&&(a="bottom")):(s+=r,e&&(a="middle"),"start"===n&&(o="right")),{x:s,y:l,align:o,verticalAlign:a}},e.prototype._renderMonthText=function(t,e,i,n){var r=t.getModel("monthLabel");if(r.get("show")){var o=r.get("nameMap"),a=r.get("margin"),s=r.get("position"),l=r.get("align"),h=[this._tlpoints,this._blpoints];(!o||TO(o))&&(o&&(e=L8[o]||e),o=e.get(["time","monthAbbr"])||[]);var u="start"===s?0:1,c="horizontal"===i?0:1;a="start"===s?-a:a;for(var d="center"===l,p=0;p<h[u].length-1;p++){var f=h[u][p].slice(),g=this._firstDayOfMonth[p];if(d){var m=this._firstDayPoints[p];f[c]=(m[c]+h[0][p+1][c])/2}var y=r.get("formatter"),w=o[+g.m-1],b={yyyy:g.y,yy:(g.y+"").slice(2),MM:g.m,M:+g.m,nameMap:w},x=new D0({z2:30,style:Tw(LN(r,{text:this._formatterLabel(y,b)}),this._monthTextPositionControl(f,d,i,s,a))});n.add(x)}}},e.prototype._weekTextPositionControl=function(t,e,i,n,r){var o="center",a="middle",s=t[0],l=t[1],h="start"===i;return"horizontal"===e?(s=s+n+(h?1:-1)*r[0]/2,o=h?"right":"left"):(l=l+n+(h?1:-1)*r[1]/2,a=h?"bottom":"top"),{x:s,y:l,align:o,verticalAlign:a}},e.prototype._renderWeekText=function(t,e,i,n,r){var o=t.getModel("dayLabel");if(o.get("show")){var a=t.coordinateSystem,s=o.get("position"),l=o.get("nameMap"),h=o.get("margin"),u=a.getFirstDayOfWeek();(!l||TO(l))&&(l&&(e=L8[l]||e),l=e.get(["time","dayOfWeekShort"])||TM(e.get(["time","dayOfWeekAbbr"]),function(t){return t[0]}));var c=a.getNextNDay(i.end.time,7-i.lweek).time,d=[a.getCellWidth(),a.getCellHeight()];h=AZ(h,Math.min(d[1],d[0])),"start"===s&&(c=a.getNextNDay(i.start.time,-(7+i.fweek)).time,h=-h);for(var p=0;p<7;p++){var f=a.getNextNDay(c,p),g=a.dataToRect([f.time],!1).center,m=new D0({z2:30,style:Tw(LN(o,{text:l[Math.abs((p+u)%7)]}),this._weekTextPositionControl(g,n,s,h,d))});r.add(m)}}},e.type="calendar",e}(Vj),ttt=function(){function t(e,i,n){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=e}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(t){var e=(t=A5(t)).getFullYear(),i=t.getMonth()+1,n=i<10?"0"+i:""+i,r=t.getDate(),o=r<10?"0"+r:""+r,a=t.getDay();return{y:e+"",m:n,d:o,day:a=Math.abs((a+7-this.getFirstDayOfWeek())%7),time:t.getTime(),formatedDate:e+"-"+n+"-"+o,date:t}},t.prototype.getNextNDay=function(t,e){return 0===(e=e||0)||(t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+e),this.getDateInfo(t)},t.prototype.update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var i=this._rangeInfo.weeks||1,n=["width","height"],r=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),a="horizontal"===this._orient?[i,7]:[7,i];T_([0,1],function(t){h(r,t)&&(o[n[t]]=r[t]*a[t])});var s={width:e.getWidth(),height:e.getHeight()},l=this._rect=NP(o,s);function h(t,e){return null!=t[e]&&"auto"!==t[e]}T_([0,1],function(t){h(r,t)||(r[t]=l[n[t]]/a[t])}),this._sw=r[0],this._sh=r[1]},t.prototype.dataToPoint=function(t,e){Tk(t)&&(t=t[0]),null==e&&(e=!0);var i=this.getDateInfo(t),n=this._rangeInfo,r=i.formatedDate;if(e&&!(i.time>=n.start.time&&i.time<n.end.time+864e5))return[NaN,NaN];var o=i.day,a=this._getRangeInfo([n.start.time,r]).nthWeek;return"vertical"===this._orient?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]:[this._rect.x+a*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},t.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},t.prototype.dataToRect=function(t,e){var i=this.dataToPoint(t,e);return{contentShape:{x:i[0]-(this._sw-this._lineWidth)/2,y:i[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:i,tl:[i[0]-this._sw/2,i[1]-this._sh/2],tr:[i[0]+this._sw/2,i[1]-this._sh/2],br:[i[0]+this._sw/2,i[1]+this._sh/2],bl:[i[0]-this._sw/2,i[1]+this._sh/2]}},t.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,i=Math.floor((t[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(i,e-1,n):this._getDateByWeeksAndDay(e,i-1,n)},t.prototype.convertToPixel=function(t,e,i){var n=tte(e);return n===this?n.dataToPoint(i):null},t.prototype.convertFromPixel=function(t,e,i){var n=tte(e);return n===this?n.pointToData(i):null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var t,e=this._model.get("range");if(Tk(e)&&1===e.length&&(e=e[0]),Tk(e))t=e;else{var i=e.toString();if(/^\d{4}$/.test(i)&&(t=[i+"-01-01",i+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(i)){var n=this.getDateInfo(i),r=n.date;r.setMonth(r.getMonth()+1);var o=this.getNextNDay(r,-1);t=[n.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(i)&&(t=[i,i])}if(!t)return e;var a=this._getRangeInfo(t);return a.start.time>a.end.time&&t.reverse(),t},t.prototype._getRangeInfo=function(t){var e,i=[this.getDateInfo(t[0]),this.getDateInfo(t[1])];i[0].time>i[1].time&&(e=!0,i.reverse());var n=Math.floor(i[1].time/864e5)-Math.floor(i[0].time/864e5)+1,r=new Date(i[0].time),o=r.getDate(),a=i[1].date.getDate();r.setDate(o+n-1);var s=r.getDate();if(s!==a)for(var l=r.getTime()-i[1].time>0?1:-1;(s=r.getDate())!==a&&(r.getTime()-i[1].time)*l>0;)n-=l,r.setDate(s-l);var h=Math.floor((n+i[0].day+6)/7),u=e?-h+1:h-1;return e&&i.reverse(),{range:[i[0].formatedDate,i[1].formatedDate],start:i[0],end:i[1],allDay:n,weeks:h,nthWeek:u,fweek:i[0].day,lweek:i[1].day}},t.prototype._getDateByWeeksAndDay=function(t,e,i){var n=this._getRangeInfo(i);if(t>n.weeks||0===t&&e<n.fweek||t===n.weeks&&e>n.lweek)return null;var r=(t-1)*7-n.fweek+e,o=new Date(n.start.time);return o.setDate(+n.start.d+r),this.getDateInfo(o)},t.create=function(e,i){var n=[];return e.eachComponent("calendar",function(r){var o=new t(r,e,i);n.push(o),r.coordinateSystem=o}),e.eachSeries(function(t){"calendar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("calendarIndex")||0])}),n},t.dimensions=["time","value"],t}();function tte(t){var e=t.calendarModel,i=t.seriesModel;return e?e.coordinateSystem:i?i.coordinateSystem:null}var tti=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return M6(e,t),e.prototype.init=function(e,i,n){t.prototype.init.call(this,e,i,n),this._sourceManager=new Vf(this),Vg(this)},e.prototype.mergeOption=function(e,i){t.prototype.mergeOption.call(this,e,i),Vg(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:NQ},e}(NW),ttn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return M6(e,t),e.type="dataset",e}(Vj),ttr=["x","y","radius","angle","single"],tto=["cartesian2d","polar","singleAxis"];function tta(t){return t+"Axis"}function tts(t){var e=t.ecModel,i={infoList:[],infoMap:TQ()};return t.eachTargetAxis(function(t,n){var r=e.getComponent(tta(t),n);if(r){var o=r.getCoordSysModel();if(o){var a=o.uid,s=i.infoMap.get(a);s||(s={model:o,axisModels:[]},i.infoList.push(s),i.infoMap.set(a,s)),s.axisModels.push(r)}}}),i}var ttl=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},t}(),tth=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i._autoThrottle=!0,i._noTarget=!0,i._rangePropMode=["percent","percent"],i}return M6(e,t),e.prototype.init=function(t,e,i){var n=ttu(t);this.settledOption=n,this.mergeDefaultAndTheme(t,i),this._doInit(n)},e.prototype.mergeOption=function(t){var e=ttu(t);Ty(this.option,t,!0),Ty(this.settledOption,e,!0),this._doInit(e)},e.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var i=this.settledOption;T_([["start","startValue"],["end","endValue"]],function(t,n){"value"===this._rangePropMode[n]&&(e[t[0]]=i[t[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=TQ();this._fillSpecifiedTargetAxis(e)?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each(function(t){t.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return T_(ttr,function(i){var n=this.getReferringComponents(tta(i),kb);if(n.specified){e=!0;var r=new ttl;T_(n.models,function(t){r.add(t.componentIndex)}),t.set(i,r)}},this),e},e.prototype._fillAutoTargetAxisByOrient=function(t,e){var i=this.ecModel,n=!0,r="vertical"===e?"y":"x",o=i.findComponents({mainType:r+"Axis"});if(a(o,r),n){var o=i.findComponents({mainType:"singleAxis",filter:function(t){return t.get("orient",!0)===e}});a(o,"single")}function a(e,i){var r=e[0];if(r){var o=new ttl;if(o.add(r.componentIndex),t.set(i,o),n=!1,"x"===i||"y"===i){var a=r.getReferringComponents("grid",kw).models[0];a&&T_(e,function(t){r.componentIndex!==t.componentIndex&&a===t.getReferringComponents("grid",kw).models[0]&&o.add(t.componentIndex)})}}}n&&T_(ttr,function(e){if(n){var r=i.findComponents({mainType:tta(e),filter:function(t){return"category"===t.get("type",!0)}});if(r[0]){var o=new ttl;o.add(r[0].componentIndex),t.set(e,o),n=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(e){t||(t=e)},this),"y"===t?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var e=this._rangePropMode,i=this.get("rangeMode");T_([["start","startValue"],["end","endValue"]],function(n,r){var o=null!=t[n[0]],a=null!=t[n[1]];o&&!a?e[r]="percent":!o&&a?e[r]="value":i?e[r]=i[r]:o&&(e[r]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(e,i){null==t&&(t=this.ecModel.getComponent(tta(e),i))},this),t},e.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each(function(i,n){T_(i.indexList,function(i){t.call(e,n,i)})})},e.prototype.getAxisProxy=function(t,e){var i=this.getAxisModel(t,e);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(t,e){var i=this._targetAxisInfoMap.get(t);if(i&&i.indexMap[e])return this.ecModel.getComponent(tta(t),e)},e.prototype.setRawRange=function(t){var e=this.option,i=this.settledOption;T_([["start","startValue"],["end","endValue"]],function(n){(null!=t[n[0]]||null!=t[n[1]])&&(e[n[0]]=i[n[0]]=t[n[0]],e[n[1]]=i[n[1]]=t[n[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var e=this.option;T_(["start","startValue","end","endValue"],function(i){e[i]=t[i]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,i=this._targetAxisInfoMap.keys(),n=0;n<i.length;n++)for(var r=i[n],o=this._targetAxisInfoMap.get(r),a=0;a<o.indexList.length;a++){var s=this.getAxisProxy(r,o.indexList[a]);if(s.hostedBy(this))return s;e||(e=s)}return e},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(NW);function ttu(t){var e={};return T_(["start","end","startValue","endValue","throttle"],function(i){t.hasOwnProperty(i)&&(e[i]=t[i])}),e}var ttc=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.type="dataZoom.inside",e.defaultOption=L4(tth.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(tth),ttd=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i,n){this.dataZoomModel=t,this.ecModel=e,this.api=i},e.type="dataZoom",e}(Vj),ttp=kg();function ttf(t,e){if(e){t.removeKey(e.model.uid);var i=e.controller;i&&i.dispose()}}function ttg(t,e){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function ttm(t,e,i,n){return t.coordinateSystem.containPoint([i,n])}var tty=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return M6(e,t),e.prototype.render=function(e,i,n){if(t.prototype.render.apply(this,arguments),e.noTarget()){this._clear();return}this.range=e.getPercentRange(),function(t,e,i){ttp(t).coordSysRecordMap.each(function(t){var n=t.dataZoomInfoMap.get(e.uid);n&&(n.getRange=i)})}(n,e,{pan:TE(ttv.pan,this),zoom:TE(ttv.zoom,this),scrollMove:TE(ttv.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){(function(t,e){for(var i=ttp(t).coordSysRecordMap,n=i.keys(),r=0;r<n.length;r++){var o=n[r],a=i.get(o),s=a.dataZoomInfoMap;if(s){var l=e.uid;s.get(l)&&(s.removeKey(l),s.keys().length||ttf(i,a))}}})(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(ttd),ttv={zoom:function(t,e,i,n){var r=this.range,o=r.slice(),a=t.axisModels[0];if(a){var s=ttb[e](null,[n.originX,n.originY],a,i,t),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(o[1]-o[0])+o[0],h=Math.max(1/n.scale,0);o[0]=(o[0]-l)*h+l,o[1]=(o[1]-l)*h+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if($Y(0,o,[0,100],0,u.minSpan,u.maxSpan),this.range=o,r[0]!==o[0]||r[1]!==o[1])return o}},pan:ttw(function(t,e,i,n,r,o){var a=ttb[n]([o.oldX,o.oldY],[o.newX,o.newY],e,r,i);return a.signal*(t[1]-t[0])*a.pixel/a.pixelLength}),scrollMove:ttw(function(t,e,i,n,r,o){return ttb[n]([0,0],[o.scrollDelta,o.scrollDelta],e,r,i).signal*(t[1]-t[0])*o.scrollDelta})};function ttw(t){return function(e,i,n,r){var o=this.range,a=o.slice(),s=e.axisModels[0];if(s&&($Y(t(a,s,e,i,n,r),a,[0,100],"all"),this.range=a,o[0]!==a[0]||o[1]!==a[1]))return a}}var ttb={grid:function(t,e,i,n,r){var o=i.axis,a={},s=r.model.coordinateSystem.getRect();return t=t||[0,0],"x"===o.dim?(a.pixel=e[0]-t[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=o.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=o.inverse?-1:1),a},polar:function(t,e,i,n,r){var o=i.axis,a={},s=r.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),h=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===i.mainType?(a.pixel=e[0]-t[0],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=o.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=h[1]-h[0],a.pixelStart=h[0],a.signal=o.inverse?-1:1),a},singleAxis:function(t,e,i,n,r){var o=i.axis,a=r.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===o.orient?(s.pixel=e[0]-t[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=o.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=o.inverse?-1:1),s}},ttx=function(){function t(t,e,i,n){this._dimName=t,this._axisIndex=e,this.ecModel=n,this._dataZoomModel=i}return t.prototype.hostedBy=function(t){return this._dataZoomModel===t},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(e){if(Tx(tto,e.get("coordinateSystem"))>=0){var i=tta(this._dimName),n=e.getReferringComponents(i,kw).models[0];n&&this._axisIndex===n.componentIndex&&t.push(e)}},this),t},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return Tm(this._minMaxSpan)},t.prototype.calculateDataWindow=function(t){var e,i=this._dataExtent,n=this.getAxisModel().axis.scale,r=this._dataZoomModel.getRangePropMode(),o=[0,100],a=[],s=[];T_(["start","end"],function(l,h){var u=t[l],c=t[l+"Value"];"percent"===r[h]?(null==u&&(u=o[h]),c=n.parse(A$(u,o,i))):(e=!0,u=A$(c=null==c?i[h]:n.parse(c),i,o)),s[h]=null==c||isNaN(c)?i[h]:c,a[h]=null==u||isNaN(u)?o[h]:u}),AK(s),AK(a);var l=this._minMaxSpan;function h(t,e,i,r,o){var a=o?"Span":"ValueSpan";$Y(0,t,i,"all",l["min"+a],l["max"+a]);for(var s=0;s<2;s++)e[s]=A$(t[s],i,r,!0),o&&(e[s]=n.parse(e[s]))}return e?h(s,a,i,o,!1):h(a,s,o,i,!0),{valueWindow:s,percentWindow:a}},t.prototype.reset=function(t){if(t===this._dataZoomModel){var e,i,n,r,o=this.getTargetSeriesModels();this._dataExtent=(e=this._dimName,i=[1/0,-1/0],T_(o,function(t){var n;(n=t.getData())&&T_($O(n,e),function(t){var e=n.getApproximateExtent(t);e[0]<i[0]&&(i[0]=e[0]),e[1]>i[1]&&(i[1]=e[1])})}),[(r=$_((n=this.getAxisModel()).axis.scale,n,i).calculate()).min,r.max]),this._updateMinMaxSpan();var a=this.calculateDataWindow(t.settledOption);this._valueWindow=a.valueWindow,this._percentWindow=a.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(t,e){if(t===this._dataZoomModel){var i=this._dimName,n=this.getTargetSeriesModels(),r=t.get("filterMode"),o=this._valueWindow;"none"!==r&&T_(n,function(t){var e=t.getData(),n=e.mapDimensionsAll(i);if(n.length){if("weakFilter"===r){var a=e.getStore(),s=TM(n,function(t){return e.getDimensionIndex(t)},e);e.filterSelf(function(t){for(var e,i,r,l=0;l<n.length;l++){var h=a.get(s[l],t),u=!isNaN(h),c=h<o[0],d=h>o[1];if(u&&!c&&!d)return!0;u&&(r=!0),c&&(e=!0),d&&(i=!0)}return r&&e&&i})}else T_(n,function(i){if("empty"===r)t.setData(e=e.map(i,function(t){return t>=o[0]&&t<=o[1]?t:NaN}));else{var n={};n[i]=o,e.selectRange(n)}});T_(n,function(t){e.setApproximateExtent(o,t)})}})}},t.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,i=this._dataExtent;T_(["min","max"],function(n){var r=e.get(n+"Span"),o=e.get(n+"ValueSpan");null!=o&&(o=this.getAxisModel().axis.scale.parse(o)),null!=o?r=A$(i[0]+o,i,[0,100],!0):null!=r&&(o=A$(r,[0,100],i,!0)-i[0]),t[n+"Span"]=r,t[n+"ValueSpan"]=o},this)},t.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,i=this._valueWindow;if(e){var n=AJ(i,[0,500]);n=Math.min(n,20);var r=t.axis.scale.rawExtentInfo;0!==e[0]&&r.setDeterminedMinMax("min",+i[0].toFixed(n)),100!==e[1]&&r.setDeterminedMinMax("max",+i[1].toFixed(n)),r.freeze()}},t}(),ttS={getTargetSeries:function(t){function e(e){t.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(n,r){var o=t.getComponent(tta(n),r);e(n,r,o,i)})})}e(function(t,e,i,n){i.__dzAxisProxy=null});var i=[];e(function(e,n,r,o){r.__dzAxisProxy||(r.__dzAxisProxy=new ttx(e,n,o,t),i.push(r.__dzAxisProxy))});var n=TQ();return T_(i,function(t){T_(t.getTargetSeriesModels(),function(t){n.set(t.uid,t)})}),n},overallReset:function(t,e){t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(e,i){t.getAxisProxy(e,i).reset(t)}),t.eachTargetAxis(function(i,n){t.getAxisProxy(i,n).filterData(t,e)})}),t.eachComponent("dataZoom",function(t){var e=t.findRepresentativeAxisProxy();if(e){var i=e.getDataPercentWindow(),n=e.getDataValueWindow();t.setCalculatedRange({start:i[0],end:i[1],startValue:n[0],endValue:n[1]})}})}},ttC=!1;function tt_(t){ttC||(ttC=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,ttS),function(t){t.registerAction("dataZoom",function(t,e){T_(function(t,e){var i,n=TQ(),r=[],o=TQ();t.eachComponent({mainType:"dataZoom",query:e},function(t){o.get(t.uid)||s(t)});do i=!1,t.eachComponent("dataZoom",a);while(i)function a(t){var e;!o.get(t.uid)&&(e=!1,t.eachTargetAxis(function(t,i){var r=n.get(t);r&&r[i]&&(e=!0)}),e)&&(s(t),i=!0)}function s(t){o.set(t.uid,!0),r.push(t),function(t){t.eachTargetAxis(function(t,e){(n.get(t)||n.set(t,[]))[e]=!0})}(t)}return r}(e,t),function(e){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function ttM(t){tt_(t),t.registerComponentModel(ttc),t.registerComponentView(tty),function(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,function(t,e){var i=ttp(e),n=i.coordSysRecordMap||(i.coordSysRecordMap=TQ());n.each(function(t){t.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(t){T_(tts(t).infoList,function(i){var r,o,a,s=i.model.uid,l=n.get(s)||n.set(s,(a=(o={model:r=i.model,containsPoint:TA(ttm,r),dispatchAction:TA(ttg,e),dataZoomInfoMap:null,controller:null}).controller=new GE(e.getZr()),T_(["pan","zoom","scrollMove"],function(t){a.on(t,function(e){var i=[];o.dataZoomInfoMap.each(function(n){if(e.isAvailableBehavior(n.model.option)){var r=(n.getRange||{})[t],a=r&&r(n.dzReferCoordSysInfo,o.model.mainType,o.controller,e);!n.model.get("disabled",!0)&&a&&i.push({dataZoomId:n.model.id,start:a[0],end:a[1]})}}),i.length&&o.dispatchAction(i)})}),o));(l.dataZoomInfoMap||(l.dataZoomInfoMap=TQ())).set(t.uid,{dzReferCoordSysInfo:i,model:t,getRange:null})})}),n.each(function(t){var e,i,r,o,a,s=t.controller,l=t.dataZoomInfoMap;if(l){var h=l.keys()[0];null!=h&&(a=l.get(h))}if(!a){ttf(n,t);return}var u=(i="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0,l.each(function(t){var n=t.model,a=!n.get("disabled",!0)&&(!n.get("zoomLock",!0)||"move");r[i+a]>r[i+e]&&(e=a),o=o&&n.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o}});s.enable(u.controlType,u.opt),s.setPointerChecker(t.containsPoint),V5(t,"dispatchAction",a.model.get("throttle",!0),"fixRate")})})}(t)}var ttT=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=L4(tth.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(tth),ttI="horizontal",ttR="vertical",ttE=["line","bar","candlestick","scatter"],ttA={easing:"cubicOut",duration:100,delay:0},ttk=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i._displayables={},i}return M6(e,t),e.prototype.init=function(t,e){this.api=e,this._onBrush=TE(this._onBrush,this),this._onBrushEnd=TE(this._onBrushEnd,this)},e.prototype.render=function(e,i,n,r){if(t.prototype.render.apply(this,arguments),V5(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1===e.get("show")){this.group.removeAll();return}if(e.noTarget()){this._clear(),this.group.removeAll();return}r&&"dataZoom"===r.type&&r.from===this.uid||this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){V3(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new Aj;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,i=t.get("brushSelect"),n=this._findCoordRect(),r={width:e.getWidth(),height:e.getHeight()},o=this._orient===ttI?{right:r.width-n.x-n.width,top:r.height-30-7-(i?7:0),width:n.width,height:30}:{right:7,top:n.y,width:30,height:n.height},a=NV(t.option);T_(["right","top","width","height"],function(t){"ph"===a[t]&&(a[t]=o[t])});var s=NP(a,r);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===ttR&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,e=this._location,i=this._orient,n=this.dataZoomModel.getFirstTargetAxisModel(),r=n&&n.get("inverse"),o=this._displayables.sliderGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(i!==ttI||r?i===ttI&&r?{scaleY:a?1:-1,scaleX:-1}:i!==ttR||r?{scaleY:a?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:a?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:a?1:-1,scaleX:1});var s=t.getBoundingRect([o]);t.x=e.x-s.x,t.y=e.y-s.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,i=this._displayables.sliderGroup,n=t.get("brushSelect");i.add(new DK({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var r=new DK({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:TE(this._onClickPanel,this)}),o=this.api.getZr();n?(r.on("mousedown",this._onBrushStart,this),r.cursor="crosshair",o.on("mousemove",this._onBrush),o.on("mouseup",this._onBrushEnd)):(o.off("mousemove",this._onBrush),o.off("mouseup",this._onBrushEnd)),i.add(r)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],t){var e=this._size,i=this._shadowSize||[],n=t.series,r=n.getRawData(),o=n.getShadowDim&&n.getShadowDim(),a=o&&r.getDimensionInfo(o)?n.getShadowDim():t.otherDim;if(null!=a){var s=this._shadowPolygonPts,l=this._shadowPolylinePts;if(r!==this._shadowData||a!==this._shadowDim||e[0]!==i[0]||e[1]!==i[1]){var h,u=r.getDataExtent(a),c=(u[1]-u[0])*.3;u=[u[0]-c,u[1]+c];var d=[0,e[1]],p=[0,e[0]],f=[[e[0],0],[0,0]],g=[],m=p[1]/(r.count()-1),y=0,w=Math.round(r.count()/e[0]);r.each([a],function(t,e){if(w>0&&e%w){y+=m;return}var i=null==t||isNaN(t)||""===t,n=i?0:A$(t,u,d,!0);i&&!h&&e?(f.push([f[f.length-1][0],0]),g.push([g[g.length-1][0],0])):!i&&h&&(f.push([y,0]),g.push([y,0])),f.push([y,n]),g.push([y,n]),y+=m,h=i}),s=this._shadowPolygonPts=f,l=this._shadowPolylinePts=g}this._shadowData=r,this._shadowDim=a,this._shadowSize=[e[0],e[1]];for(var b=this.dataZoomModel,x=0;x<3;x++){var S=function(t){var e=b.getModel(t?"selectedDataBackground":"dataBackground"),i=new Aj,n=new PF({shape:{points:s},segmentIgnoreThreshold:1,style:e.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),r=new Pj({shape:{points:l},segmentIgnoreThreshold:1,style:e.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return i.add(n),i.add(r),i}(1===x);this._displayables.sliderGroup.add(S),this._displayables.dataShadowSegs.push(S)}}}},e.prototype._prepareDataShadowInfo=function(){var t,e=this.dataZoomModel,i=e.get("showDataShadow");if(!1!==i){var n=this.ecModel;return e.eachTargetAxis(function(r,o){T_(e.getAxisProxy(r,o).getTargetSeriesModels(),function(e){if(!t&&!(!0!==i&&0>Tx(ttE,e.get("type")))){var a,s=n.getComponent(tta(r),o).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[r],h=e.coordinateSystem;null!=l&&h.getOtherAxis&&(a=h.getOtherAxis(s).inverse),l=e.getData().mapDimension(l),t={thisAxis:s,series:e,thisDim:r,otherDim:l,otherAxisInverse:a}}},this)},this),t}},e.prototype._renderHandle=function(){var t=this.group,e=this._displayables,i=e.handles=[null,null],n=e.handleLabels=[null,null],r=this._displayables.sliderGroup,o=this._size,a=this.dataZoomModel,s=this.api,l=a.get("borderRadius")||0,h=a.get("brushSelect"),u=e.filler=new DK({silent:h,style:{fill:a.get("fillerColor")},textConfig:{position:"inside"}});r.add(u),r.add(new DK({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1],r:l},style:{stroke:a.get("dataBackgroundColor")||a.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),T_([0,1],function(e){var o=a.get("handleIcon");!BV[o]&&0>o.indexOf("path://")&&0>o.indexOf("image://")&&(o="path://"+o);var s=BW(o,-1,0,2,2,null,!0);s.attr({cursor:ttD(this._orient),draggable:!0,drift:TE(this._onDragMove,this,e),ondragend:TE(this._onDragEnd,this),onmouseover:TE(this._showDataInfo,this,!0),onmouseout:TE(this._showDataInfo,this,!1),z2:5});var l=s.getBoundingRect(),h=a.get("handleSize");this._handleHeight=AZ(h,this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,s.setStyle(a.getModel("handleStyle").getItemStyle()),s.style.strokeNoScale=!0,s.rectHover=!0,s.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),OV(s);var u=a.get("handleColor");null!=u&&(s.style.fill=u),r.add(i[e]=s);var c=a.getModel("textStyle");t.add(n[e]=new D0({silent:!0,invisible:!0,style:LN(c,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:c.getTextColor(),font:c.getFont()}),z2:10}))},this);var c=u;if(h){var d=AZ(a.get("moveHandleSize"),o[1]),p=e.moveHandle=new DK({style:a.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:o[1]-.5,height:d}}),f=.8*d,g=e.moveHandleIcon=BW(a.get("moveHandleIcon"),-f/2,-f/2,f,f,"#fff",!0);g.silent=!0,g.y=o[1]+d/2-.5,p.ensureState("emphasis").style=a.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var m=Math.min(o[1]/2,Math.max(d,10));(c=e.moveZone=new DK({invisible:!0,shape:{y:o[1]-m,height:d+m}})).on("mouseover",function(){s.enterEmphasis(p)}).on("mouseout",function(){s.leaveEmphasis(p)}),r.add(p),r.add(g),r.add(c)}c.attr({draggable:!0,cursor:ttD(this._orient),drift:TE(this._onDragMove,this,"all"),ondragstart:TE(this._showDataInfo,this,!0),ondragend:TE(this._onDragEnd,this),onmouseover:TE(this._showDataInfo,this,!0),onmouseout:TE(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[A$(t[0],[0,100],e,!0),A$(t[1],[0,100],e,!0)]},e.prototype._updateInterval=function(t,e){var i=this.dataZoomModel,n=this._handleEnds,r=this._getViewExtent(),o=i.findRepresentativeAxisProxy().getMinMaxSpan(),a=[0,100];$Y(e,n,r,i.get("zoomLock")?"all":t,null!=o.minSpan?A$(o.minSpan,a,r,!0):null,null!=o.maxSpan?A$(o.maxSpan,a,r,!0):null);var s=this._range,l=this._range=AK([A$(n[0],r,a,!0),A$(n[1],r,a,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},e.prototype._updateView=function(t){var e=this._displayables,i=this._handleEnds,n=AK(i.slice()),r=this._size;T_([0,1],function(t){var n=e.handles[t],o=this._handleHeight;n.attr({scaleX:o/2,scaleY:o/2,x:i[t]+(t?-1:1),y:r[1]/2-o/2})},this),e.filler.setShape({x:n[0],y:0,width:n[1]-n[0],height:r[1]});var o={x:n[0],width:n[1]-n[0]};e.moveHandle&&(e.moveHandle.setShape(o),e.moveZone.setShape(o),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",o.x+o.width/2));for(var a=e.dataShadowSegs,s=[0,n[0],n[1],r[0]],l=0;l<a.length;l++){var h=a[l],u=h.getClipPath();u||(u=new DK,h.setClipPath(u)),u.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:r[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,i=this._displayables,n=i.handleLabels,r=this._orient,o=["",""];if(e.get("showDetail")){var a=e.findRepresentativeAxisProxy();if(a){var s=a.getAxisModel().axis,l=this._range,h=t?a.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:a.getDataValueWindow();o=[this._formatLabel(h[0],s),this._formatLabel(h[1],s)]}}var u=AK(this._handleEnds.slice());function c(t){var e=Lw(i.handles[t].parent,this.group),a=Lx(0===t?"right":"left",e),s=this._handleWidth/2+5,l=Lb([u[t]+(0===t?-s:s),this._size[1]/2],e);n[t].setStyle({x:l[0],y:l[1],verticalAlign:r===ttI?"middle":a,align:r===ttI?a:"center",text:o[t]})}c.call(this,0),c.call(this,1)},e.prototype._formatLabel=function(t,e){var i=this.dataZoomModel,n=i.get("labelFormatter"),r=i.get("labelPrecision");(null==r||"auto"===r)&&(r=e.getPixelPrecision());var o=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(r,20));return TD(n)?n(t,o):TO(n)?n.replace("{value}",o):o},e.prototype._showDataInfo=function(t){t=this._dragging||t;var e=this._displayables,i=e.handleLabels;i[0].attr("invisible",!t),i[1].attr("invisible",!t),e.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](e.moveHandle,1)},e.prototype._onDragMove=function(t,e,i,n){this._dragging=!0,IO(n.event);var r=Lb([e,i],this._displayables.sliderGroup.getLocalTransform(),!0),o=this._updateInterval(t,r[0]),a=this.dataZoomModel.get("realtime");this._updateView(!a),o&&a&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),this.dataZoomModel.get("realtime")||this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var e=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(i[0]<0)&&!(i[0]>e[0])&&!(i[1]<0)&&!(i[1]>e[1])){var n=this._handleEnds,r=(n[0]+n[1])/2,o=this._updateInterval("all",i[0]-r);this._updateView(),o&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var e=t.offsetX,i=t.offsetY;this._brushStart=new IY(e,i),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,e){e.attr("ignore",!0);var i=e.shape;if(!(+new Date-this._brushStartTime<200&&5>Math.abs(i.width))){var n=this._getViewExtent(),r=[0,100];this._range=AK([A$(i.x,n,r,!0),A$(i.x+i.width,n,r,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(IO(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,e){var i=this._displayables,n=this.dataZoomModel,r=i.brushRect;r||(r=i.brushRect=new DK({silent:!0,style:n.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(r)),r.attr("ignore",!1);var o=this._brushStart,a=this._displayables.sliderGroup,s=a.transformCoordToLocal(t,e),l=a.transformCoordToLocal(o.x,o.y),h=this._size;s[0]=Math.max(Math.min(h[0],s[0]),0),r.setShape({x:l[0],y:0,width:s[0]-l[0],height:h[1]})},e.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?ttA:null,start:e[0],end:e[1]})},e.prototype._findCoordRect=function(){var t,e=tts(this.dataZoomModel).infoList;if(!t&&e.length){var i=e[0].model.coordinateSystem;t=i.getRect&&i.getRect()}if(!t){var n=this.api.getWidth(),r=this.api.getHeight();t={x:.2*n,y:.2*r,width:.6*n,height:.6*r}}return t},e.type="dataZoom.slider",e}(ttd);function ttD(t){return"vertical"===t?"ns-resize":"ew-resize"}function ttO(t){t.registerComponentModel(ttT),t.registerComponentView(ttk),tt_(t)}function ttP(t,e){var i;return T_(e,function(e){null!=t[e]&&"auto"!==t[e]&&(i=!0)}),i}var ttL=["transition","enterFrom","leaveTo"],ttN=ttL.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function ttH(t,e,i){if(i&&(!t[i]&&e[i]&&(t[i]={}),t=t[i],e=e[i]),t&&e)for(var n=i?ttL:ttN,r=0;r<n.length;r++){var o=n[r];null==t[o]&&null!=e[o]&&(t[o]=e[o])}}var ttV=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.preventAutoZ=!0,i}return M6(e,t),e.prototype.mergeOption=function(e,i){var n=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,e,i),this.option.elements=n},e.prototype.optionUpdated=function(t,e){var i=this.option,n=(e?i:t).elements,r=i.elements=e?[]:i.elements,o=[];this._flatten(n,o,null);var a=kl(r,o,"normalMerge"),s=this._elOptionsToUpdate=[];T_(a,function(t,e){var i,n,o,a,l=t.newOption;l&&(s.push(l),function(t,e){var i=t.existing;if(e.id=t.keyInfo.id,!e.type&&i&&(e.type=i.type),null==e.parentId){var n=e.parentOption;n?e.parentId=n.id:i&&(e.parentId=i.parentId)}e.parentOption=null}(t,l),i=Tw({},l),n=r[e],"merge"===(o=l.$action||"merge")?n?(Ty(n,i,!0),NH(n,i,{ignoreSize:!0}),NB(l,n),ttH(l,n),ttH(l,n,"shape"),ttH(l,n,"style"),ttH(l,n,"extra"),l.clipPath=n.clipPath):r[e]=i:"replace"===o?r[e]=i:"remove"===o&&n&&(r[e]=null),(a=r[e])&&(a.hv=l.hv=[ttP(l,["left","right"]),ttP(l,["top","bottom"])],"group"===a.type&&(null==a.width&&(a.width=l.width=0),null==a.height&&(a.height=l.height=0))))},this),i.elements=TI(r,function(t){return t&&delete t.$action,null!=t})},e.prototype._flatten=function(t,e,i){T_(t,function(t){if(t){i&&(t.parentOption=i),e.push(t);var n=t.children;n&&n.length&&this._flatten(n,e,t),delete t.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(NW),ttB={path:null,compoundPath:null,group:Aj,image:DU,text:D0},ttF=kg(),ttW=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.init=function(){this._elMap=TQ()},e.prototype.render=function(t,e,i){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,i)},e.prototype._updateElements=function(t){var e=t.useElOptionsToUpdate();if(e){var i=this._elMap,n=this.group,r=t.get("z"),o=t.get("zlevel");T_(e,function(e){var a=kc(e.id,null),s=null!=a?i.get(a):null,l=kc(e.parentId,null),h=null!=l?i.get(l):n,u=e.type,c=e.style;"text"===u&&c&&e.hv&&e.hv[1]&&(c.textVerticalAlign=c.textBaseline=c.verticalAlign=c.align=null);var d=e.textContent,p=e.textConfig;if(c&&jS(c,u,!!p,!!d)){var f=jC(c,u,!0);!p&&f.textConfig&&(p=e.textConfig=f.textConfig),!d&&f.textContent&&(d=f.textContent)}var g=(M=Tw({},M=e),T_(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(Nk),function(t){delete M[t]}),M),m=e.$action||"merge",y="merge"===m,w="replace"===m;if(y){var b=!s,x=s;b?x=ttj(a,h,e.type,i):(x&&(ttF(x).isNew=!1),jj(x)),x&&(jD(x,g,t,{isInit:b}),ttG(x,e,r,o))}else if(w){ttU(s,e,i,t);var S=ttj(a,h,e.type,i);S&&(jD(S,g,t,{isInit:!0}),ttG(S,e,r,o))}else"remove"===m&&(jO(s,e),ttU(s,e,i,t));var C=i.get(a);if(C&&d){if(y){var _=C.getTextContent();_?_.attr(d):C.setTextContent(new D0(d))}else w&&C.setTextContent(new D0(d))}if(C){var M,T,I=e.clipPath;if(I){var R=I.type,E=void 0,b=!1;if(y){var A=C.getClipPath();E=(b=!A||ttF(A).type!==R)?ttz(R):A}else w&&(b=!0,E=ttz(R));C.setClipPath(E),jD(E,I,t,{isInit:b}),jU(E,I.keyframeAnimation,t)}var k=ttF(C);C.setTextConfig(p),k.option=e,T=On(C).eventData,C.silent||C.ignore||T||(T=On(C).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:C.name}),T&&(T.info=e.info),LR({el:C,componentModel:t,itemName:C.name,itemTooltipOption:e.tooltip}),jU(C,e.keyframeAnimation,t)}})}},e.prototype._relocate=function(t,e){for(var i=t.option.elements,n=this.group,r=this._elMap,o=e.getWidth(),a=e.getHeight(),s=["x","y"],l=0;l<i.length;l++){var h=i[l],u=kc(h.id,null),c=null!=u?r.get(u):null;if(c&&c.isGroup){var d=c.parent,p=d===n,f=ttF(c),g=ttF(d);f.width=AZ(f.option.width,p?o:g.width)||0,f.height=AZ(f.option.height,p?a:g.height)||0}}for(var l=i.length-1;l>=0;l--){var h=i[l],u=kc(h.id,null),c=null!=u?r.get(u):null;if(c){var d=c.parent,g=ttF(d),m=d===n?{width:o,height:a}:{width:g.width,height:g.height},y={},w=NL(c,h,m,null,{hv:h.hv,boundingMode:h.bounding},y);if(!ttF(c).isNew&&w){for(var b=h.transition,x={},S=0;S<s.length;S++){var C=s[S],_=y[C];b&&(jL(b)||Tx(b,C)>=0)?x[C]=_:c[C]=_}OK(c,x,t,0)}else c.attr(y)}}},e.prototype._clear=function(){var t=this,e=this._elMap;e.each(function(i){ttU(i,ttF(i).option,e,t._lastGraphicModel)}),this._elMap=TQ()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(Vj);function ttz(t){var e=new(T2(ttB,t)?ttB[t]:Lu(t))({});return ttF(e).type=t,e}function ttj(t,e,i,n){var r=ttz(i);return e.add(r),n.set(t,r),ttF(r).id=t,ttF(r).isNew=!0,r}function ttU(t,e,i,n){t&&t.parent&&("group"===t.type&&t.traverse(function(t){ttU(t,e,i,n)}),jP(t,e,n),i.removeKey(ttF(t).id))}function ttG(t,e,i,n){t.isGroup||T_([["cursor",k1.prototype.cursor],["zlevel",n||0],["z",i||0],["z2",0]],function(i){var n=i[0];T2(e,n)?t[n]=Tz(e[n],i[1]):null==t[n]&&(t[n]=i[1])}),T_(TR(e),function(i){if(0===i.indexOf("on")){var n=e[i];t[i]=TD(n)?n:null}}),T2(e,"draggable")&&(t.draggable=e.draggable),null!=e.name&&(t.name=e.name),null!=e.id&&(t.id=e.id)}var ttY=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.layoutMode={type:"box",ignoreSize:!0},i}return M6(e,t),e.prototype.init=function(t,e,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(e,i){t.prototype.mergeOption.call(this,e,i),this._updateSelector(e)},e.prototype._updateSelector=function(t){var e=t.selector,i=this.ecModel;!0===e&&(e=t.selector=["all","inverse"]),Tk(e)&&T_(e,function(t,n){var r;TO(t)&&(t={type:t}),e[n]=Ty(t,"all"===(r=t.type)?{type:"all",title:i.getLocaleModel().get(["legend","selector","all"])}:"inverse"===r?{type:"inverse",title:i.getLocaleModel().get(["legend","selector","inverse"])}:void 0)})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,i=0;i<t.length;i++){var n=t[i].get("name");if(this.isSelected(n)){this.select(n),e=!0;break}}e||this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var e=[],i=[];t.eachRawSeries(function(n){var r,o=n.name;if(i.push(o),n.legendVisualProvider){var a=n.legendVisualProvider.getAllNames();t.isSeriesFiltered(n)||(i=i.concat(a)),a.length?e=e.concat(a):r=!0}else r=!0;r&&kd(n)&&e.push(n.name)}),this._availableNames=i;var n=this.get("data")||e,r=TQ(),o=TM(n,function(t){return((TO(t)||TL(t))&&(t={name:t}),r.get(t.name))?null:(r.set(t.name,!0),new L2(t,this,this.ecModel))},this);this._data=TI(o,function(t){return!!t})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var e=this.option.selected;"single"===this.get("selectedMode")&&T_(this._data,function(t){e[t.get("name")]=!1}),e[t]=!0},e.prototype.unSelect=function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,e=this.option.selected;T_(t,function(t){e[t.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,e=this.option.selected;T_(t,function(t){var i=t.get("name",!0);e.hasOwnProperty(i)||(e[i]=!0),e[i]=!e[i]})},e.prototype.isSelected=function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&Tx(this._availableNames,t)>=0},e.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(NW);function ttX(t,e){var i=TG(e.get("padding")),n=e.getItemStyle(["color","opacity"]);return n.fill=e.get("backgroundColor"),t=new DK({shape:{x:t.x-i[3],y:t.y-i[0],width:t.width+i[1]+i[3],height:t.height+i[0]+i[2],r:e.get("borderRadius")},style:n,silent:!0,z2:-1})}var tt$=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.newlineDisabled=!1,i}return M6(e,t),e.prototype.init=function(){this.group.add(this._contentGroup=new Aj),this.group.add(this._selectorGroup=new Aj),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,e,i){var n=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var r=t.get("align"),o=t.get("orient");r&&"auto"!==r||(r="right"===t.get("left")&&"vertical"===o?"right":"left");var a=t.get("selector",!0),s=t.get("selectorPosition",!0);a&&(!s||"auto"===s)&&(s="horizontal"===o?"end":"start"),this.renderInner(r,t,e,i,a,o,s);var l=t.getBoxLayoutParams(),h={width:i.getWidth(),height:i.getHeight()},u=t.get("padding"),c=NP(l,h,u),d=this.layoutInner(t,r,c,n,a,s),p=NP(Tb({width:d.width,height:d.height},l),h,u);this.group.x=p.x-d.x,this.group.y=p.y-d.y,this.group.markRedraw(),this.group.add(this._backgroundEl=ttX(d,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,e,i,n,r,o,a){var s=this.getContentGroup(),l=TQ(),h=e.get("selectedMode"),u=[];i.eachRawSeries(function(t){t.get("legendHoverLink")||u.push(t.id)}),T_(e.getData(),function(r,o){var a=r.get("name");if(!this.newlineDisabled&&(""===a||"\n"===a)){var c=new Aj;c.newline=!0,s.add(c);return}var d=i.getSeriesByName(a)[0];if(!l.get(a)){if(d){var p=d.getData(),f=p.getVisual("legendLineStyle")||{},g=p.getVisual("legendIcon"),m=p.getVisual("style"),y=this._createItem(d,a,o,r,e,t,f,m,g,h,n);y.on("click",TA(ttZ,a,null,n,u)).on("mouseover",TA(ttK,d.name,null,n,u)).on("mouseout",TA(ttQ,d.name,null,n,u)),i.ssr&&y.eachChild(function(t){var e=On(t);e.seriesIndex=d.seriesIndex,e.dataIndex=o,e.ssrType="legend"}),l.set(a,!0)}else i.eachRawSeries(function(s){if(!l.get(a)&&s.legendVisualProvider){var c=s.legendVisualProvider;if(c.containName(a)){var d=c.indexOfName(a),p=c.getItemVisual(d,"style"),f=c.getItemVisual(d,"legendIcon"),g=R$(p.fill);g&&0===g[3]&&(g[3]=.2,p=Tw(Tw({},p),{fill:R0(g,"rgba")}));var m=this._createItem(s,a,o,r,e,t,{},p,f,h,n);m.on("click",TA(ttZ,null,a,n,u)).on("mouseover",TA(ttK,null,a,n,u)).on("mouseout",TA(ttQ,null,a,n,u)),i.ssr&&m.eachChild(function(t){var e=On(t);e.seriesIndex=s.seriesIndex,e.dataIndex=o,e.ssrType="legend"}),l.set(a,!0)}}},this)}},this),r&&this._createSelector(r,e,n,o,a)},e.prototype._createSelector=function(t,e,i,n,r){var o=this.getSelectorGroup();T_(t,function(t){var n=t.type,r=new D0({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:"all"===n?"legendAllSelect":"legendInverseSelect"})}});o.add(r),LP(r,{normal:e.getModel("selectorLabel"),emphasis:e.getModel(["emphasis","selectorLabel"])},{defaultText:t.title}),OV(r)})},e.prototype._createItem=function(t,e,i,n,r,o,a,s,l,h,u){var c=t.visualDrawType,d=r.get("itemWidth"),p=r.get("itemHeight"),f=r.isSelected(e),g=n.get("symbolRotate"),m=n.get("symbolKeepAspect"),y=n.get("icon"),w=function(t,e,i,n,r,o,a){function s(t,e){"auto"===t.lineWidth&&(t.lineWidth=e.lineWidth>0?2:0),T_(t,function(i,n){"inherit"===t[n]&&(t[n]=e[n])})}var l=e.getModel("itemStyle"),h=l.getItemStyle(),u=0===t.lastIndexOf("empty",0)?"fill":"stroke",c=l.getShallow("decal");h.decal=c&&"inherit"!==c?Fr(c,a):n.decal,"inherit"===h.fill&&(h.fill=n[r]),"inherit"===h.stroke&&(h.stroke=n[u]),"inherit"===h.opacity&&(h.opacity=("fill"===r?n:i).opacity),s(h,n);var d=e.getModel("lineStyle"),p=d.getLineStyle();if(s(p,i),"auto"===h.fill&&(h.fill=n.fill),"auto"===h.stroke&&(h.stroke=n.fill),"auto"===p.stroke&&(p.stroke=n.fill),!o){var f=e.get("inactiveBorderWidth"),g=h[u];h.lineWidth="auto"===f?n.lineWidth>0&&g?2:0:h.lineWidth,h.fill=e.get("inactiveColor"),h.stroke=e.get("inactiveBorderColor"),p.stroke=d.get("inactiveColor"),p.lineWidth=d.get("inactiveWidth")}return{itemStyle:h,lineStyle:p}}(l=y||l||"roundRect",n,a,s,c,f,u),b=new Aj,x=n.getModel("textStyle");if(TD(t.getLegendIcon)&&(!y||"inherit"===y))b.add(t.getLegendIcon({itemWidth:d,itemHeight:p,icon:l,iconRotate:g,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:m}));else{var S,C,_,M="inherit"===y&&t.getData().getVisual("symbol")?"inherit"===g?t.getData().getVisual("symbolRotate"):g:0;b.add(((_=BW(C=(S={itemWidth:d,itemHeight:p,icon:l,iconRotate:M,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:m}).icon||"roundRect",0,0,S.itemWidth,S.itemHeight,S.itemStyle.fill,S.symbolKeepAspect)).setStyle(S.itemStyle),_.rotation=(S.iconRotate||0)*Math.PI/180,_.setOrigin([S.itemWidth/2,S.itemHeight/2]),C.indexOf("empty")>-1&&(_.style.stroke=_.style.fill,_.style.fill="#fff",_.style.lineWidth=2),_))}var T=r.get("formatter"),I=e;TO(T)&&T?I=T.replace("{name}",null!=e?e:""):TD(T)&&(I=T(e));var R=f?x.getTextColor():n.get("inactiveColor");b.add(new D0({style:LN(x,{text:I,x:"left"===o?d+5:-5,y:p/2,fill:R,align:o,verticalAlign:"middle"},{inheritColor:R})}));var E=new DK({shape:b.getBoundingRect(),style:{fill:"transparent"}}),A=n.getModel("tooltip");return A.get("show")&&LR({el:E,componentModel:r,itemName:e,itemTooltipOption:A.option}),b.add(E),b.eachChild(function(t){t.silent=!0}),E.silent=!h,this.getContentGroup().add(b),OV(b),b.__legendDataIndex=i,b},e.prototype.layoutInner=function(t,e,i,n,r,o){var a=this.getContentGroup(),s=this.getSelectorGroup();NO(t.get("orient"),a,t.get("itemGap"),i.width,i.height);var l=a.getBoundingRect(),h=[-l.x,-l.y];if(s.markRedraw(),a.markRedraw(),!r)return a.x=h[0],a.y=h[1],this.group.getBoundingRect();NO("horizontal",s,t.get("selectorItemGap",!0));var u=s.getBoundingRect(),c=[-u.x,-u.y],d=t.get("selectorButtonGap",!0),p=t.getOrient().index,f=0===p?"width":"height",g=0===p?"height":"width",m=0===p?"y":"x";"end"===o?c[p]+=l[f]+d:h[p]+=u[f]+d,c[1-p]+=l[g]/2-u[g]/2,s.x=c[0],s.y=c[1],a.x=h[0],a.y=h[1];var y={x:0,y:0};return y[f]=l[f]+d+u[f],y[g]=Math.max(l[g],u[g]),y[m]=Math.min(0,u[m]+c[1-p]),y},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(Vj);function ttZ(t,e,i,n){ttQ(t,e,i,n),i.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),ttK(t,e,i,n)}function ttq(t){for(var e,i=t.getZr().storage.getDisplayList(),n=0,r=i.length;n<r&&!(e=i[n].states.emphasis);)n++;return e&&e.hoverLayer}function ttK(t,e,i,n){ttq(i)||i.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:n})}function ttQ(t,e,i,n){ttq(i)||i.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:n})}function ttJ(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(t){for(var i=0;i<e.length;i++)if(!e[i].isSelected(t.name))return!1;return!0})}function tt0(t,e,i){var n,r={},o="toggleSelected"===t;return i.eachComponent("legend",function(i){o&&null!=n?i[n?"select":"unSelect"](e.name):"allSelect"===t||"inverseSelect"===t?i[t]():(i[t](e.name),n=i.isSelected(e.name)),T_(i.getData(),function(t){var e=t.get("name");if("\n"!==e&&""!==e){var n=i.isSelected(e);r.hasOwnProperty(e)?r[e]=r[e]&&n:r[e]=n}})}),"allSelect"===t||"inverseSelect"===t?{selected:r}:{name:e.name,selected:r}}function tt1(t){t.registerComponentModel(ttY),t.registerComponentView(tt$),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,ttJ),t.registerSubTypeDefaulter("legend",function(){return"plain"}),t.registerAction("legendToggleSelect","legendselectchanged",TA(tt0,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",TA(tt0,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",TA(tt0,"inverseSelect")),t.registerAction("legendSelect","legendselected",TA(tt0,"select")),t.registerAction("legendUnSelect","legendunselected",TA(tt0,"unSelect"))}var tt2=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(e,i,n){var r=NV(e);t.prototype.init.call(this,e,i,n),tt5(this,e,r)},e.prototype.mergeOption=function(e,i){t.prototype.mergeOption.call(this,e,i),tt5(this,this.option,e)},e.type="legend.scroll",e.defaultOption=L4(ttY.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(ttY);function tt5(t,e,i){var n=t.getOrient(),r=[1,1];r[n.index]=0,NH(e,i,{type:"box",ignoreSize:!!r})}var tt3=["width","height"],tt4=["x","y"],tt6=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.newlineDisabled=!0,i._currentIndex=0,i}return M6(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new Aj),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Aj)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(e,i,n,r,o,a,s){var l=this;t.prototype.renderInner.call(this,e,i,n,r,o,a,s);var h=this._controllerGroup,u=i.get("pageIconSize",!0),c=Tk(u)?u:[u,u];p("pagePrev",0);var d=i.getModel("pageTextStyle");function p(t,e){var n=LM(i.get("pageIcons",!0)[i.getOrient().name][e],{onclick:TE(l._pageGo,l,t+"DataIndex",i,r)},{x:-c[0]/2,y:-c[1]/2,width:c[0],height:c[1]});n.name=t,h.add(n)}h.add(new D0({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1)},e.prototype.layoutInner=function(t,e,i,n,r,o){var a=this.getSelectorGroup(),s=t.getOrient().index,l=tt3[s],h=tt4[s],u=tt3[1-s],c=tt4[1-s];r&&NO("horizontal",a,t.get("selectorItemGap",!0));var d=t.get("selectorButtonGap",!0),p=a.getBoundingRect(),f=[-p.x,-p.y],g=Tm(i);r&&(g[l]=i[l]-p[l]-d);var m=this._layoutContentAndController(t,n,g,s,l,u,c,h);if(r){if("end"===o)f[s]+=m[l]+d;else{var y=p[l]+d;f[s]-=y,m[h]-=y}m[l]+=p[l]+d,f[1-s]+=m[c]+m[u]/2-p[u]/2,m[u]=Math.max(m[u],p[u]),m[c]=Math.min(m[c],p[c]+f[1-s]),a.x=f[0],a.y=f[1],a.markRedraw()}return m},e.prototype._layoutContentAndController=function(t,e,i,n,r,o,a,s){var l=this.getContentGroup(),h=this._containerGroup,u=this._controllerGroup;NO(t.get("orient"),l,t.get("itemGap"),n?i.width:null,n?null:i.height),NO("horizontal",u,t.get("pageButtonItemGap",!0));var c=l.getBoundingRect(),d=u.getBoundingRect(),p=this._showController=c[r]>i[r],f=[-c.x,-c.y];e||(f[n]=l[s]);var g=[0,0],m=[-d.x,-d.y],y=Tz(t.get("pageButtonGap",!0),t.get("itemGap",!0));p&&("end"===t.get("pageButtonPosition",!0)?m[n]+=i[r]-d[r]:g[n]+=d[r]+y),m[1-n]+=c[o]/2-d[o]/2,l.setPosition(f),h.setPosition(g),u.setPosition(m);var w={x:0,y:0};if(w[r]=p?i[r]:c[r],w[o]=Math.max(c[o],d[o]),w[a]=Math.min(0,d[a]+m[1-n]),h.__rectSize=i[r],p){var b={x:0,y:0};b[r]=Math.max(i[r]-d[r]-y,0),b[o]=w[o],h.setClipPath(new DK({shape:b})),h.__rectSize=b[r]}else u.eachChild(function(t){t.attr({invisible:!0,silent:!0})});var x=this._getPageInfo(t);return null!=x.pageIndex&&OK(l,{x:x.contentPosition[0],y:x.contentPosition[1]},p?t:null),this._updatePageInfoView(t,x),w},e.prototype._pageGo=function(t,e,i){var n=this._getPageInfo(e)[t];null!=n&&i.dispatchAction({type:"legendScroll",scrollDataIndex:n,legendId:e.id})},e.prototype._updatePageInfoView=function(t,e){var i=this._controllerGroup;T_(["pagePrev","pageNext"],function(n){var r=null!=e[n+"DataIndex"],o=i.childOfName(n);o&&(o.setStyle("fill",r?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),o.cursor=r?"pointer":"default")});var n=i.childOfName("pageText"),r=t.get("pageFormatter"),o=e.pageIndex,a=null!=o?o+1:0,s=e.pageCount;n&&r&&n.setStyle("text",TO(r)?r.replace("{current}",null==a?"":a+"").replace("{total}",null==s?"":s+""):r({current:a,total:s}))},e.prototype._getPageInfo=function(t){var e=t.get("scrollDataIndex",!0),i=this.getContentGroup(),n=this._containerGroup.__rectSize,r=t.getOrient().index,o=tt3[r],a=tt4[r],s=this._findTargetItemIndex(e),l=i.children(),h=l[s],u=l.length,c=u?1:0,d={contentPosition:[i.x,i.y],pageCount:c,pageIndex:c-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return d;var p=w(h);d.contentPosition[r]=-p.s;for(var f=s+1,g=p,m=p,y=null;f<=u;++f)(!(y=w(l[f]))&&m.e>g.s+n||y&&!b(y,g.s))&&(g=m.i>g.i?m:y)&&(null==d.pageNextDataIndex&&(d.pageNextDataIndex=g.i),++d.pageCount),m=y;for(var f=s-1,g=p,m=p,y=null;f>=-1;--f)(!(y=w(l[f]))||!b(m,y.s))&&g.i<m.i&&(m=g,null==d.pagePrevDataIndex&&(d.pagePrevDataIndex=g.i),++d.pageCount,++d.pageIndex),g=y;return d;function w(t){if(t){var e=t.getBoundingRect(),i=e[a]+t[a];return{s:i,e:i+e[o],i:t.__legendDataIndex}}}function b(t,e){return t.e>=e&&t.s<=e+n}},e.prototype._findTargetItemIndex=function(t){var e,i;return this._showController?(this.getContentGroup().eachChild(function(n,r){var o=n.__legendDataIndex;null==i&&null!=o&&(i=r),o===t&&(e=r)}),null!=e?e:i):0},e.type="legend.scroll",e}(tt$);function tt8(t){Fz(tt1),t.registerComponentModel(tt2),t.registerComponentView(tt6),function(t){t.registerAction("legendScroll","legendscroll",function(t,e){var i=t.scrollDataIndex;null!=i&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(t){t.setScrollDataIndex(i)})})}(t)}function tt9(t,e){if(!t)return!1;for(var i=Tk(t)?t:[t],n=0;n<i.length;n++)if(i[n]&&i[n][e])return!0;return!1}function tt7(t){ko(t,"label",["show"])}var tet=kg(),tee=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.createdBySelf=!1,i}return M6(e,t),e.prototype.init=function(t,e,i){this.mergeDefaultAndTheme(t,i),this._mergeOption(t,i,!1,!0)},e.prototype.isAnimationEnabled=function(){if(M9.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,e){this._mergeOption(t,e,!1,!1)},e.prototype._mergeOption=function(t,e,i,n){var r=this.mainType;i||e.eachSeries(function(t){var i=t.get(this.mainType,!0),o=tet(t)[r];if(!i||!i.data){tet(t)[r]=null;return}o?o._mergeOption(i,e,!0):(n&&tt7(i),T_(i.data,function(t){t instanceof Array?(tt7(t[0]),tt7(t[1])):tt7(t)}),Tw(o=this.createMarkerModelFromSeries(i,this,e),{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),o.__hostSeries=t),tet(t)[r]=o},this)},e.prototype.formatTooltip=function(t,e,i){var n=this.getData(),r=this.getRawValue(t),o=n.getName(t);return VS("section",{header:this.name,blocks:[VS("nameValue",{name:o,value:r,noName:!o,noValue:null==r})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,e){var i=Hq.prototype.getDataParams.call(this,t,e),n=this.__hostSeries;return n&&(i.seriesId=n.id,i.seriesName=n.name,i.seriesType=n.subType),i},e.getMarkerModelFromSeries=function(t,e){return tet(t)[e]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(NW);TS(tee,Hq.prototype);var tei=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.createMarkerModelFromSeries=function(t,i,n){return new e(t,i,n)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(tee);function ten(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function ter(t,e,i,n,r,o){var a=[],s=WG(e,n)?e.getCalculationInfo("stackResultDimension"):n,l=teu(e,s,t),h=e.indicesOfNearest(s,l)[0];a[r]=e.get(i,h),a[o]=e.get(s,h);var u=e.get(n,h),c=AQ(e.get(n,h));return(c=Math.min(c,20))>=0&&(a[o]=+a[o].toFixed(c)),[a,u]}var teo={min:TA(ter,"min"),max:TA(ter,"max"),average:TA(ter,"average"),median:TA(ter,"median")};function tea(t,e){if(e){var i,n=t.getData(),r=t.coordinateSystem,o=r&&r.dimensions;if(!(!isNaN(parseFloat((i=e).x))&&!isNaN(parseFloat(i.y)))&&!Tk(e.coord)&&Tk(o)){var a=tes(e,n,r,t);if((e=Tm(e)).type&&teo[e.type]&&a.baseAxis&&a.valueAxis){var s=Tx(o,a.baseAxis.dim),l=Tx(o,a.valueAxis.dim),h=teo[e.type](n,a.baseDataDim,a.valueDataDim,s,l);e.coord=h[0],e.value=h[1]}else e.coord=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis]}if(null!=e.coord&&Tk(o))for(var u=e.coord,c=0;c<2;c++)teo[u[c]]&&(u[c]=teu(n,n.mapDimension(o[c]),u[c]));else e.coord=[];return e}}function tes(t,e,i,n){var r,o,a={};return null!=t.valueIndex||null!=t.valueDim?(a.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,a.valueAxis=i.getAxis((r=a.valueDataDim,(o=n.getData().getDimensionInfo(r))&&o.coordDim)),a.baseAxis=i.getOtherAxis(a.valueAxis),a.baseDataDim=e.mapDimension(a.baseAxis.dim)):(a.baseAxis=n.getBaseAxis(),a.valueAxis=i.getOtherAxis(a.baseAxis),a.baseDataDim=e.mapDimension(a.baseAxis.dim),a.valueDataDim=e.mapDimension(a.valueAxis.dim)),a}function tel(t,e){return!t||!t.containData||!e.coord||!!ten(e)||t.containData(e.coord)}function teh(t,e){return t?function(t,i,n,r){return H1(r<2?t.coord&&t.coord[r]:t.value,e[r])}:function(t,i,n,r){return H1(t.value,e[r])}}function teu(t,e,i){if("average"===i){var n=0,r=0;return t.each(e,function(t,e){!isNaN(t)&&(n+=t,r++)}),n/r}return"median"===i?t.getMedian(e):t.getDataExtent(e)["max"===i?1:0]}var tec=kg(),ted=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.init=function(){this.markerGroupMap=TQ()},e.prototype.render=function(t,e,i){var n=this,r=this.markerGroupMap;r.each(function(t){tec(t).keep=!1}),e.eachSeries(function(t){var r=tee.getMarkerModelFromSeries(t,n.type);r&&n.renderSeries(t,r,e,i)}),r.each(function(t){tec(t).keep||n.group.remove(t.group)})},e.prototype.markKeep=function(t){tec(t).keep=!0},e.prototype.toggleBlurSeries=function(t,e){var i=this;T_(t,function(t){var n=tee.getMarkerModelFromSeries(t,i.type);n&&n.getData().eachItemGraphicEl(function(t){t&&(e?O_(t,Ob):O_(t,Ox))})})},e.type="marker",e}(Vj),tep=kg(),tef=function(t,e,i,n){var r=n[0],o=n[1];if(r&&o){var a=tea(t,r),s=tea(t,o),l=a.coord,h=s.coord;l[0]=TW(l[0],-1/0),l[1]=TW(l[1],-1/0),h[0]=TW(h[0],1/0),h[1]=TW(h[1],1/0);var u=Tv([{},a,s]);return u.coord=[a.coord,s.coord],u.x0=a.x,u.y0=a.y,u.x1=s.x,u.y1=s.y,u}};function teg(t){return!isNaN(t)&&!isFinite(t)}function tem(t,e,i,n){var r=1-t;return teg(e[r])&&teg(i[r])}function tey(t,e){var i=e.coord[0],n=e.coord[1],r={coord:i,x:e.x0,y:e.y0},o={coord:n,x:e.x1,y:e.y1};return zC(t,"cartesian2d")?!!(i&&n&&(tem(1,i,n,t)||tem(0,i,n,t)))||!t||!t.containZone||!r.coord||!o.coord||!!ten(r)||!!ten(o)||t.containZone(r.coord,o.coord):tel(t,r)||tel(t,o)}function tev(t,e,i,n,r){var o,a=n.coordinateSystem,s=t.getItemModel(e),l=AZ(s.get(i[0]),r.getWidth()),h=AZ(s.get(i[1]),r.getHeight());if(isNaN(l)||isNaN(h)){if(n.getMarkerPosition){var u=t.getValues(["x0","y0"],e),c=t.getValues(["x1","y1"],e),d=a.clampData(u),p=a.clampData(c),f=[];"x0"===i[0]?f[0]=d[0]>p[0]?c[0]:u[0]:f[0]=d[0]>p[0]?u[0]:c[0],"y0"===i[1]?f[1]=d[1]>p[1]?c[1]:u[1]:f[1]=d[1]>p[1]?u[1]:c[1],o=n.getMarkerPosition(f,i,!0)}else{var g=t.get(i[0],e),m=t.get(i[1],e),y=[g,m];a.clampData&&a.clampData(y,y),o=a.dataToPoint(y,!0)}if(zC(a,"cartesian2d")){var w=a.getAxis("x"),b=a.getAxis("y"),g=t.get(i[0],e),m=t.get(i[1],e);teg(g)?o[0]=w.toGlobalCoord(w.getExtent()["x0"===i[0]?0:1]):teg(m)&&(o[1]=b.toGlobalCoord(b.getExtent()["y0"===i[1]?0:1]))}isNaN(l)||(o[0]=l),isNaN(h)||(o[1]=h)}else o=[l,h];return o}var tew=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],teb=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.updateTransform=function(t,e,i){e.eachSeries(function(t){var e=tee.getMarkerModelFromSeries(t,"markArea");if(e){var n=e.getData();n.each(function(e){var r=TM(tew,function(r){return tev(n,e,r,t,i)});n.setItemLayout(e,r),n.getItemGraphicEl(e).setShape("points",r)})}},this)},e.prototype.renderSeries=function(t,e,i,n){var r=t.coordinateSystem,o=t.id,a=t.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,{group:new Aj});this.group.add(l.group),this.markKeep(l);var h=function(t,e,i){if(t){var n,r,o=TM(t&&t.dimensions,function(t){var i=e.getData();return Tw(Tw({},i.getDimensionInfo(i.mapDimension(t))||{}),{name:t,ordinalMeta:null})});n=new zu(r=TM(["x0","y0","x1","y1"],function(t,e){return{name:t,type:o[e%2].type}}),i)}else n=new zu(r=[{name:"value",type:"float"}],i);var a=TM(i.get("data"),TA(tef,e,t,i));t&&(a=TI(a,TA(tey,t)));var s=t?function(t,e,i,n){return H1(t.coord[Math.floor(n/2)][n%2],r[n])}:function(t,e,i,n){return H1(t.value,r[n])};return n.initData(a,null,s),n.hasItemOption=!0,n}(r,t,e);e.setData(h),h.each(function(e){var i=TM(tew,function(i){return tev(h,e,i,t,n)}),o=r.getAxis("x").scale,s=r.getAxis("y").scale,l=o.getExtent(),u=s.getExtent(),c=[o.parse(h.get("x0",e)),o.parse(h.get("x1",e))],d=[s.parse(h.get("y0",e)),s.parse(h.get("y1",e))];AK(c),AK(d);var p=!(l[0]>c[1]||l[1]<c[0]||u[0]>d[1]||u[1]<d[0]);h.setItemLayout(e,{points:i,allClipped:!p});var f=h.getItemModel(e).getModel("itemStyle").getItemStyle(),g=BM(a,"color");!f.fill&&(f.fill=g,TO(f.fill)&&(f.fill=RJ(f.fill,.4))),f.stroke||(f.stroke=g),h.setItemVisual(e,"style",f)}),h.diff(tep(l).data).add(function(t){var e=h.getItemLayout(t);if(!e.allClipped){var i=new PF({shape:{points:e.points}});h.setItemGraphicEl(t,i),l.group.add(i)}}).update(function(t,i){var n=tep(l).data.getItemGraphicEl(i),r=h.getItemLayout(t);r.allClipped?n&&l.group.remove(n):(n?OK(n,{shape:{points:r.points}},e,t):n=new PF({shape:{points:r.points}}),h.setItemGraphicEl(t,n),l.group.add(n))}).remove(function(t){var e=tep(l).data.getItemGraphicEl(t);l.group.remove(e)}).execute(),h.eachItemGraphicEl(function(t,i){var n=h.getItemModel(i),r=h.getItemVisual(i,"style");t.useStyle(h.getItemVisual(i,"style")),LP(t,LL(n),{labelFetcher:e,labelDataIndex:i,defaultText:h.getName(i)||"",inheritColor:TO(r.fill)?RJ(r.fill,1):"#000"}),Oj(t,n),OB(t,null,null,n.get(["emphasis","disabled"])),On(t).dataModel=e}),tep(l).data=h,l.group.silent=e.get("silent")||t.get("silent")},e.type="markArea",e}(ted),tex=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.createMarkerModelFromSeries=function(t,i,n){return new e(t,i,n)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(tee),teS=kg(),teC=function(t,e,i,n){var r,o=t.getData();if(Tk(n))r=n;else{var a=n.type;if("min"===a||"max"===a||"average"===a||"median"===a||null!=n.xAxis||null!=n.yAxis){var s=void 0,l=void 0;if(null!=n.yAxis||null!=n.xAxis)s=e.getAxis(null!=n.yAxis?"y":"x"),l=TW(n.yAxis,n.xAxis);else{var h=tes(n,o,e,t);s=h.valueAxis;var u=WY(o,h.valueDataDim);l=teu(o,u,a)}var c="x"===s.dim?0:1,d=1-c,p=Tm(n),f={coord:[]};p.type=null,p.coord=[],p.coord[d]=-1/0,f.coord[d]=1/0;var g=i.get("precision");g>=0&&TL(l)&&(l=+l.toFixed(Math.min(g,20))),p.coord[c]=f.coord[c]=l,r=[p,f,{type:a,valueIndex:n.valueIndex,value:l}]}else r=[]}var m=[tea(t,r[0]),tea(t,r[1]),Tw({},r[2])];return m[2].type=m[2].type||null,Ty(m[2],m[0]),Ty(m[2],m[1]),m};function te_(t){return!isNaN(t)&&!isFinite(t)}function teM(t,e,i,n){var r=1-t,o=n.dimensions[t];return te_(e[r])&&te_(i[r])&&e[t]===i[t]&&n.getAxis(o).containData(e[t])}function teT(t,e){if("cartesian2d"===t.type){var i=e[0].coord,n=e[1].coord;if(i&&n&&(teM(1,i,n,t)||teM(0,i,n,t)))return!0}return tel(t,e[0])&&tel(t,e[1])}function teI(t,e,i,n,r){var o,a=n.coordinateSystem,s=t.getItemModel(e),l=AZ(s.get("x"),r.getWidth()),h=AZ(s.get("y"),r.getHeight());if(isNaN(l)||isNaN(h)){if(n.getMarkerPosition)o=n.getMarkerPosition(t.getValues(t.dimensions,e));else{var u=a.dimensions,c=t.get(u[0],e),d=t.get(u[1],e);o=a.dataToPoint([c,d])}if(zC(a,"cartesian2d")){var p=a.getAxis("x"),f=a.getAxis("y"),u=a.dimensions;te_(t.get(u[0],e))?o[0]=p.toGlobalCoord(p.getExtent()[i?0:1]):te_(t.get(u[1],e))&&(o[1]=f.toGlobalCoord(f.getExtent()[i?0:1]))}isNaN(l)||(o[0]=l),isNaN(h)||(o[1]=h)}else o=[l,h];t.setItemLayout(e,o)}var teR=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.updateTransform=function(t,e,i){e.eachSeries(function(t){var e=tee.getMarkerModelFromSeries(t,"markLine");if(e){var n=e.getData(),r=teS(e).from,o=teS(e).to;r.each(function(e){teI(r,e,!0,t,i),teI(o,e,!1,t,i)}),n.each(function(t){n.setItemLayout(t,[r.getItemLayout(t),o.getItemLayout(t)])}),this.markerGroupMap.get(t.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,e,i,n){var r,o,a,s,l,h,u=t.coordinateSystem,c=t.id,d=t.getData(),p=this.markerGroupMap,f=p.get(c)||p.set(c,new GC);this.group.add(f.group);var g=(o=new zu(r=u?TM(u&&u.dimensions,function(e){return Tw(Tw({},t.getData().getDimensionInfo(t.getData().mapDimension(e))||{}),{name:e,ordinalMeta:null})}):[{name:"value",type:"float"}],e),a=new zu(r,e),s=new zu([],e),l=TM(e.get("data"),TA(teC,t,u,e)),u&&(l=TI(l,TA(teT,u))),h=teh(!!u,r),o.initData(TM(l,function(t){return t[0]}),null,h),a.initData(TM(l,function(t){return t[1]}),null,h),s.initData(TM(l,function(t){return t[2]})),s.hasItemOption=!0,{from:o,to:a,line:s}),m=g.from,y=g.to,w=g.line;teS(e).from=m,teS(e).to=y,e.setData(w);var b=e.get("symbol"),x=e.get("symbolSize"),S=e.get("symbolRotate"),C=e.get("symbolOffset");function _(e,i,r){var o=e.getItemModel(i);teI(e,i,r,t,n);var a=o.getModel("itemStyle").getItemStyle();null==a.fill&&(a.fill=BM(d,"color")),e.setItemVisual(i,{symbolKeepAspect:o.get("symbolKeepAspect"),symbolOffset:Tz(o.get("symbolOffset",!0),C[r?0:1]),symbolRotate:Tz(o.get("symbolRotate",!0),S[r?0:1]),symbolSize:Tz(o.get("symbolSize"),x[r?0:1]),symbol:Tz(o.get("symbol",!0),b[r?0:1]),style:a})}Tk(b)||(b=[b,b]),Tk(x)||(x=[x,x]),Tk(S)||(S=[S,S]),Tk(C)||(C=[C,C]),g.from.each(function(t){_(m,t,!0),_(y,t,!1)}),w.each(function(t){var e=w.getItemModel(t).getModel("lineStyle").getLineStyle();w.setItemLayout(t,[m.getItemLayout(t),y.getItemLayout(t)]),null==e.stroke&&(e.stroke=m.getItemVisual(t,"style").fill),w.setItemVisual(t,{fromSymbolKeepAspect:m.getItemVisual(t,"symbolKeepAspect"),fromSymbolOffset:m.getItemVisual(t,"symbolOffset"),fromSymbolRotate:m.getItemVisual(t,"symbolRotate"),fromSymbolSize:m.getItemVisual(t,"symbolSize"),fromSymbol:m.getItemVisual(t,"symbol"),toSymbolKeepAspect:y.getItemVisual(t,"symbolKeepAspect"),toSymbolOffset:y.getItemVisual(t,"symbolOffset"),toSymbolRotate:y.getItemVisual(t,"symbolRotate"),toSymbolSize:y.getItemVisual(t,"symbolSize"),toSymbol:y.getItemVisual(t,"symbol"),style:e})}),f.updateData(w),g.line.eachItemGraphicEl(function(t){On(t).dataModel=e,t.traverse(function(t){On(t).dataModel=e})}),this.markKeep(f),f.group.silent=e.get("silent")||t.get("silent")},e.type="markLine",e}(ted),teE=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.createMarkerModelFromSeries=function(t,i,n){return new e(t,i,n)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(tee);function teA(t,e,i){var n=e.coordinateSystem;t.each(function(r){var o,a=t.getItemModel(r),s=AZ(a.get("x"),i.getWidth()),l=AZ(a.get("y"),i.getHeight());if(isNaN(s)||isNaN(l)){if(e.getMarkerPosition)o=e.getMarkerPosition(t.getValues(t.dimensions,r));else if(n){var h=t.get(n.dimensions[0],r),u=t.get(n.dimensions[1],r);o=n.dataToPoint([h,u])}}else o=[s,l];isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),t.setItemLayout(r,o)})}var tek=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.updateTransform=function(t,e,i){e.eachSeries(function(t){var e=tee.getMarkerModelFromSeries(t,"markPoint");e&&(teA(e.getData(),t,i),this.markerGroupMap.get(t.id).updateLayout())},this)},e.prototype.renderSeries=function(t,e,i,n){var r,o,a,s,l=t.coordinateSystem,h=t.id,u=t.getData(),c=this.markerGroupMap,d=c.get(h)||c.set(h,new Up),p=(o=new zu(r=l?TM(l&&l.dimensions,function(e){return Tw(Tw({},t.getData().getDimensionInfo(t.getData().mapDimension(e))||{}),{name:e,ordinalMeta:null})}):[{name:"value",type:"float"}],e),a=TM(e.get("data"),TA(tea,t)),l&&(a=TI(a,TA(tel,l))),s=teh(!!l,r),o.initData(a,null,s),o);e.setData(p),teA(e.getData(),t,n),p.each(function(t){var i=p.getItemModel(t),n=i.getShallow("symbol"),r=i.getShallow("symbolSize"),o=i.getShallow("symbolRotate"),a=i.getShallow("symbolOffset"),s=i.getShallow("symbolKeepAspect");if(TD(n)||TD(r)||TD(o)||TD(a)){var l=e.getRawValue(t),h=e.getDataParams(t);TD(n)&&(n=n(l,h)),TD(r)&&(r=r(l,h)),TD(o)&&(o=o(l,h)),TD(a)&&(a=a(l,h))}var c=i.getModel("itemStyle").getItemStyle(),d=BM(u,"color");c.fill||(c.fill=d),p.setItemVisual(t,{symbol:n,symbolSize:r,symbolRotate:o,symbolOffset:a,symbolKeepAspect:s,style:c})}),d.updateData(p),this.group.add(d.group),p.eachItemGraphicEl(function(t){t.traverse(function(t){On(t).dataModel=e})}),this.markKeep(d),d.group.silent=e.get("silent")||t.get("silent")},e.type="markPoint",e}(ted),teD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.makeElOption=function(t,e,i,n,r){var o=i.axis;"angle"===o.dim&&(this.animationThreshold=Math.PI/18);var a=o.polar,s=a.getOtherAxis(o).getExtent(),l=o.dataToCoord(e),h=n.get("type");if(h&&"none"!==h){var u=Q8(n),c=teO[h](o,a,l,s);c.style=u,t.graphicKey=c.type,t.pointer=c}var d=function(t,e,i,n,r){var o,a,s,l=e.axis,h=l.dataToCoord(t),u=n.getAngleAxis().getExtent()[0];u=u/180*Math.PI;var c=n.getRadiusAxis().getExtent();if("radius"===l.dim){var d=IV();Ij(d,d,u),Iz(d,d,[n.cx,n.cy]),o=Lb([h,-r],d);var p=e.getModel("axisLabel").get("rotate")||0,f=Zh.innerTextLayout(u,p*Math.PI/180,-1);a=f.textAlign,s=f.textVerticalAlign}else{var g=c[1];o=n.coordToPoint([g+r,h]);var m=n.cx,y=n.cy;a=Math.abs(o[0]-m)/g<.3?"center":o[0]>m?"left":"right",s=Math.abs(o[1]-y)/g<.3?"middle":o[1]>y?"top":"bottom"}return{position:o,align:a,verticalAlign:s}}(e,i,0,a,n.get(["label","margin"]));Q9(t,i,n,r,d)},e}(Q2),teO={line:function(t,e,i,n){return"angle"===t.dim?{type:"Line",shape:Ji(e.coordToPoint([n[0],i]),e.coordToPoint([n[1],i]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:i}}},shadow:function(t,e,i,n){var r=Math.max(1,t.getBandWidth()),o=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:Jr(e.cx,e.cy,n[0],n[1],(-i-r/2)*o,(-i+r/2)*o)}:{type:"Sector",shape:Jr(e.cx,e.cy,i-r/2,i+r/2,0,2*Math.PI)}}},teP=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.findAxisModel=function(t){var e;return this.ecModel.eachComponent(t,function(t){t.getCoordSysModel()===this&&(e=t)},this),e},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(NW),teL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",kw).models[0]},e.type="polarAxis",e}(NW);TS(teL,Zi);var teN=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.type="angleAxis",e}(teL),teH=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.type="radiusAxis",e}(teL),teV=function(t){function e(e,i){return t.call(this,"radius",e,i)||this}return M6(e,t),e.prototype.pointToData=function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},e}($j);teV.prototype.dataToRadius=$j.prototype.dataToCoord,teV.prototype.radiusToData=$j.prototype.coordToData;var teB=kg(),teF=function(t){function e(e,i){return t.call(this,"angle",e,i||[0,360])||this}return M6(e,t),e.prototype.pointToData=function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this.getLabelModel(),e=this.scale,i=e.getExtent(),n=e.count();if(i[1]-i[0]<1)return 0;var r=i[0],o=this.dataToCoord(r+1)-this.dataToCoord(r),a=Math.max(AE(null==r?"":r+"",t.getFont(),"center","top").height,7)/Math.abs(o);isNaN(a)&&(a=1/0);var s=Math.max(0,Math.floor(a)),l=teB(this.model),h=l.lastAutoInterval,u=l.lastTickCount;return null!=h&&null!=u&&1>=Math.abs(h-s)&&1>=Math.abs(u-n)&&h>s?s=h:(l.lastTickCount=n,l.lastAutoInterval=s),s},e}($j);teF.prototype.dataToAngle=$j.prototype.dataToCoord,teF.prototype.angleToData=$j.prototype.coordToData;var teW=["radius","angle"],tez=function(){function t(t){this.dimensions=teW,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new teV,this._angleAxis=new teF,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return t.prototype.containPoint=function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},t.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},t.prototype.getAxis=function(t){return this["_"+t+"Axis"]},t.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},t.prototype.getAxesByScale=function(t){var e=[],i=this._angleAxis,n=this._radiusAxis;return i.scale.type===t&&e.push(i),n.scale.type===t&&e.push(n),e},t.prototype.getAngleAxis=function(){return this._angleAxis},t.prototype.getRadiusAxis=function(){return this._radiusAxis},t.prototype.getOtherAxis=function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},t.prototype.getTooltipAxes=function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},t.prototype.dataToPoint=function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},t.prototype.pointToData=function(t,e){var i=this.pointToCoord(t);return[this._radiusAxis.radiusToData(i[0],e),this._angleAxis.angleToData(i[1],e)]},t.prototype.pointToCoord=function(t){var e=t[0]-this.cx,i=t[1]-this.cy,n=this.getAngleAxis(),r=n.getExtent(),o=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);n.inverse?o=a-360:a=o+360;var s=Math.sqrt(e*e+i*i);e/=s;for(var l=Math.atan2(-(i/=s),e)/Math.PI*180,h=l<o?1:-1;l<o||l>a;)l+=360*h;return[s,l]},t.prototype.coordToPoint=function(t){var e=t[0],i=t[1]/180*Math.PI;return[Math.cos(i)*e+this.cx,-Math.sin(i)*e+this.cy]},t.prototype.getArea=function(){var t=this.getAngleAxis(),e=this.getRadiusAxis().getExtent().slice();e[0]>e[1]&&e.reverse();var i=t.getExtent(),n=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:e[0],r:e[1],startAngle:-i[0]*n,endAngle:-i[1]*n,clockwise:t.inverse,contain:function(t,e){var i=t-this.cx,n=e-this.cy,r=i*i+n*n-1e-4,o=this.r,a=this.r0;return r<=o*o&&r>=a*a}}},t.prototype.convertToPixel=function(t,e,i){return tej(e)===this?this.dataToPoint(i):null},t.prototype.convertFromPixel=function(t,e,i){return tej(e)===this?this.pointToData(i):null},t}();function tej(t){var e=t.seriesModel,i=t.polarModel;return i&&i.coordinateSystem||e&&e.coordinateSystem}function teU(t,e){var i=this,n=i.getAngleAxis(),r=i.getRadiusAxis();if(n.scale.setExtent(1/0,-1/0),r.scale.setExtent(1/0,-1/0),t.eachSeries(function(t){if(t.coordinateSystem===i){var e=t.getData();T_($O(e,"radius"),function(t){r.scale.unionExtentFromData(e,t)}),T_($O(e,"angle"),function(t){n.scale.unionExtentFromData(e,t)})}}),$I(n.scale,n.model),$I(r.scale,r.model),"category"===n.type&&!n.onBand){var o=n.getExtent(),a=360/n.scale.count();n.inverse?o[1]+=a:o[1]-=a,n.setExtent(o[0],o[1])}}function teG(t,e){var i;if(t.type=e.get("type"),t.scale=$R(e),t.onBand=e.get("boundaryGap")&&"category"===t.type,t.inverse=e.get("inverse"),"angleAxis"===e.mainType){t.inverse=t.inverse!==e.get("clockwise");var n=e.get("startAngle"),r=null!==(i=e.get("endAngle"))&&void 0!==i?i:n+(t.inverse?-360:360);t.setExtent(n,r)}e.axis=t,t.model=e}var teY={dimensions:teW,create:function(t,e){var i=[];return t.eachComponent("polar",function(t,n){var r,o,a,s,l,h,u,c=new tez(n+"");c.update=teU;var d=c.getRadiusAxis(),p=c.getAngleAxis(),f=t.findAxisModel("radiusAxis"),g=t.findAxisModel("angleAxis");teG(d,f),teG(p,g),r=t.get("center"),o=e.getWidth(),a=e.getHeight(),c.cx=AZ(r[0],o),c.cy=AZ(r[1],a),s=c.getRadiusAxis(),l=Math.min(o,a)/2,null==(h=t.get("radius"))?h=[0,"100%"]:Tk(h)||(h=[0,h]),u=[AZ(h[0],l),AZ(h[1],l)],s.inverse?s.setExtent(u[1],u[0]):s.setExtent(u[0],u[1]),i.push(c),t.coordinateSystem=c,c.model=t}),t.eachSeries(function(t){if("polar"===t.get("coordinateSystem")){var e=t.getReferringComponents("polar",kw).models[0];t.coordinateSystem=e.coordinateSystem}}),i}},teX=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function te$(t,e,i){e[1]>e[0]&&(e=e.slice().reverse());var n=t.coordToPoint([e[0],i]),r=t.coordToPoint([e[1],i]);return{x1:n[0],y1:n[1],x2:r[0],y2:r[1]}}function teZ(t){return t.getRadiusAxis().inverse?0:1}function teq(t){var e=t[0],i=t[t.length-1];e&&i&&1e-4>Math.abs(Math.abs(e.coord-i.coord)-360)&&t.pop()}var teK=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.axisPointerClass="PolarAxisPointer",i}return M6(e,t),e.prototype.render=function(t,e){if(this.group.removeAll(),t.get("show")){var i=t.axis,n=i.polar,r=n.getRadiusAxis().getExtent(),o=i.getTicksCoords(),a=i.getMinorTicksCoords(),s=TM(i.getViewLabels(),function(t){t=Tm(t);var e=i.scale,n="ordinal"===e.type?e.getRawOrdinalNumber(t.tickValue):t.tickValue;return t.coord=i.dataToCoord(n),t});teq(s),teq(o),T_(teX,function(e){t.get([e,"show"])&&(!i.scale.isBlank()||"axisLine"===e)&&teQ[e](this.group,t,n,o,a,r,s)},this)}},e.type="angleAxis",e}(KH),teQ={axisLine:function(t,e,i,n,r,o){var a,s=e.getModel(["axisLine","lineStyle"]),l=i.getAngleAxis(),h=Math.PI/180,u=l.getExtent(),c=teZ(i),d=c?0:1,p=360===Math.abs(u[1]-u[0])?"Circle":"Arc";(a=0===o[d]?new O3[p]({shape:{cx:i.cx,cy:i.cy,r:o[c],startAngle:-u[0]*h,endAngle:-u[1]*h,clockwise:l.inverse},style:s.getLineStyle(),z2:1,silent:!0}):new O3.Ring({shape:{cx:i.cx,cy:i.cy,r:o[c],r0:o[d]},style:s.getLineStyle(),z2:1,silent:!0})).style.fill=null,t.add(a)},axisTick:function(t,e,i,n,r,o){var a=e.getModel("axisTick"),s=(a.get("inside")?-1:1)*a.get("length"),l=o[teZ(i)],h=TM(n,function(t){return new O3.Line({shape:te$(i,[l,l+s],t.coord)})});t.add(O3.mergePath(h,{style:Tb(a.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,e,i,n,r,o){if(r.length){for(var a=e.getModel("axisTick"),s=e.getModel("minorTick"),l=(a.get("inside")?-1:1)*s.get("length"),h=o[teZ(i)],u=[],c=0;c<r.length;c++)for(var d=0;d<r[c].length;d++)u.push(new O3.Line({shape:te$(i,[h,h+l],r[c][d].coord)}));t.add(O3.mergePath(u,{style:Tb(s.getModel("lineStyle").getLineStyle(),Tb(a.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,e,i,n,r,o,a){var s=e.getCategories(!0),l=e.getModel("axisLabel"),h=l.get("margin"),u=e.get("triggerEvent");T_(a,function(n,r){var a=l,c=n.tickValue,d=o[teZ(i)],p=i.coordToPoint([d+h,n.coord]),f=i.cx,g=i.cy,m=Math.abs(p[0]-f)/d<.3?"center":p[0]>f?"left":"right",y=Math.abs(p[1]-g)/d<.3?"middle":p[1]>g?"top":"bottom";if(s&&s[c]){var w=s[c];TN(w)&&w.textStyle&&(a=new L2(w.textStyle,l,l.ecModel))}var b=new O3.Text({silent:Zh.isLabelSilent(e),style:LN(a,{x:p[0],y:p[1],fill:a.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:n.formattedLabel,align:m,verticalAlign:y})});if(t.add(b),u){var x=Zh.makeAxisEventDataBase(e);x.targetType="axisLabel",x.value=n.rawLabel,On(b).eventData=x}},this)},splitLine:function(t,e,i,n,r,o){var a=e.getModel("splitLine").getModel("lineStyle"),s=a.get("color"),l=0;s=s instanceof Array?s:[s];for(var h=[],u=0;u<n.length;u++){var c=l++%s.length;h[c]=h[c]||[],h[c].push(new O3.Line({shape:te$(i,o,n[u].coord)}))}for(var u=0;u<h.length;u++)t.add(O3.mergePath(h[u],{style:Tb({stroke:s[u%s.length]},a.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(t,e,i,n,r,o){if(r.length){for(var a=e.getModel("minorSplitLine").getModel("lineStyle"),s=[],l=0;l<r.length;l++)for(var h=0;h<r[l].length;h++)s.push(new O3.Line({shape:te$(i,o,r[l][h].coord)}));t.add(O3.mergePath(s,{style:a.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(t,e,i,n,r,o){if(n.length){var a=e.getModel("splitArea").getModel("areaStyle"),s=a.get("color"),l=0;s=s instanceof Array?s:[s];for(var h=[],u=Math.PI/180,c=-n[0].coord*u,d=Math.min(o[0],o[1]),p=Math.max(o[0],o[1]),f=e.get("clockwise"),g=1,m=n.length;g<=m;g++){var y=g===m?n[0].coord:n[g].coord,w=l++%s.length;h[w]=h[w]||[],h[w].push(new O3.Sector({shape:{cx:i.cx,cy:i.cy,r0:d,r:p,startAngle:c,endAngle:-y*u,clockwise:f},silent:!0})),c=-y*u}for(var g=0;g<h.length;g++)t.add(O3.mergePath(h[g],{style:Tb({fill:s[g%s.length]},a.getAreaStyle()),silent:!0}))}}},teJ=["axisLine","axisTickLabel","axisName"],te0=["splitLine","splitArea","minorSplitLine"],te1=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.axisPointerClass="PolarAxisPointer",i}return M6(e,t),e.prototype.render=function(t,e){if(this.group.removeAll(),t.get("show")){var i=this._axisGroup,n=this._axisGroup=new O3.Group;this.group.add(n);var r=t.axis,o=r.polar,a=o.getAngleAxis(),s=r.getTicksCoords(),l=r.getMinorTicksCoords(),h=a.getExtent()[0],u=r.getExtent(),c={position:[o.cx,o.cy],rotation:h/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1},d=new Zh(t,c);T_(teJ,d.add,d),n.add(d.getGroup()),O3.groupTransition(i,n,t),T_(te0,function(e){t.get([e,"show"])&&!r.scale.isBlank()&&te2[e](this.group,t,o,h,u,s,l)},this)}},e.type="radiusAxis",e}(KH),te2={splitLine:function(t,e,i,n,r,o){var a=e.getModel("splitLine").getModel("lineStyle"),s=a.get("color"),l=0,h=i.getAngleAxis(),u=Math.PI/180,c=h.getExtent(),d=360===Math.abs(c[1]-c[0])?"Circle":"Arc";s=s instanceof Array?s:[s];for(var p=[],f=0;f<o.length;f++){var g=l++%s.length;p[g]=p[g]||[],p[g].push(new O3[d]({shape:{cx:i.cx,cy:i.cy,r:Math.max(o[f].coord,0),startAngle:-c[0]*u,endAngle:-c[1]*u,clockwise:h.inverse}}))}for(var f=0;f<p.length;f++)t.add(O3.mergePath(p[f],{style:Tb({stroke:s[f%s.length],fill:null},a.getLineStyle()),silent:!0}))},minorSplitLine:function(t,e,i,n,r,o,a){if(a.length){for(var s=e.getModel("minorSplitLine").getModel("lineStyle"),l=[],h=0;h<a.length;h++)for(var u=0;u<a[h].length;u++)l.push(new O3.Circle({shape:{cx:i.cx,cy:i.cy,r:a[h][u].coord}}));t.add(O3.mergePath(l,{style:Tb({fill:null},s.getLineStyle()),silent:!0}))}},splitArea:function(t,e,i,n,r,o){if(o.length){var a=e.getModel("splitArea").getModel("areaStyle"),s=a.get("color"),l=0;s=s instanceof Array?s:[s];for(var h=[],u=o[0].coord,c=1;c<o.length;c++){var d=l++%s.length;h[d]=h[d]||[],h[d].push(new O3.Sector({shape:{cx:i.cx,cy:i.cy,r0:u,r:o[c].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),u=o[c].coord}for(var c=0;c<h.length;c++)t.add(O3.mergePath(h[c],{style:Tb({fill:s[c%s.length]},a.getAreaStyle()),silent:!0}))}}};function te5(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function te3(t,e){return e.dim+t.model.componentIndex}var te4=function(t,e,i){var n,r,o,a={},s=(n=TI(e.getSeriesByType(t),function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type}),r={},T_(n,function(t,e){var i=t.getData(),n=t.coordinateSystem,o=n.getBaseAxis(),a=te3(n,o),s=o.getExtent(),l="category"===o.type?o.getBandWidth():Math.abs(s[1]-s[0])/i.count(),h=r[a]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},u=h.stacks;r[a]=h;var c=te5(t);!u[c]&&h.autoWidthCount++,u[c]=u[c]||{width:0,maxWidth:0};var d=AZ(t.get("barWidth"),l),p=AZ(t.get("barMaxWidth"),l),f=t.get("barGap"),g=t.get("barCategoryGap");d&&!u[c].width&&(d=Math.min(h.remainedWidth,d),u[c].width=d,h.remainedWidth-=d),p&&(u[c].maxWidth=p),null!=f&&(h.gap=f),null!=g&&(h.categoryGap=g)}),o={},T_(r,function(t,e){o[e]={};var i,n=t.stacks,r=t.bandWidth,a=AZ(t.categoryGap,r),s=AZ(t.gap,1),l=t.remainedWidth,h=t.autoWidthCount,u=(l-a)/(h+(h-1)*s);u=Math.max(u,0),T_(n,function(t,e){var i=t.maxWidth;i&&i<u&&(i=Math.min(i,l),t.width&&(i=Math.min(i,t.width)),l-=i,t.width=i,h--)}),u=Math.max(u=(l-a)/(h+(h-1)*s),0);var c=0;T_(n,function(t,e){t.width||(t.width=u),i=t,c+=t.width*(1+s)}),i&&(c-=i.width*s);var d=-c/2;T_(n,function(t,i){o[e][i]=o[e][i]||{offset:d,width:t.width},d+=t.width*(1+s)})}),o);e.eachSeriesByType(t,function(t){if("polar"===t.coordinateSystem.type){var e=t.getData(),i=t.coordinateSystem,n=i.getBaseAxis(),r=te3(i,n),o=te5(t),l=s[r][o],h=l.offset,u=l.width,c=i.getOtherAxis(n),d=t.coordinateSystem.cx,p=t.coordinateSystem.cy,f=t.get("barMinHeight")||0,g=t.get("barMinAngle")||0;a[o]=a[o]||[];for(var m=e.mapDimension(c.dim),y=e.mapDimension(n.dim),w=WG(e,m),b="radius"!==n.dim||!t.get("roundCap",!0),x=c.model.get("startValue"),S=c.dataToCoord(x||0),C=0,_=e.count();C<_;C++){var M=e.get(m,C),T=e.get(y,C),I=M>=0?"p":"n",R=S;w&&(a[o][T]||(a[o][T]={p:S,n:S}),R=a[o][T][I]);var E=void 0,A=void 0,k=void 0,D=void 0;if("radius"===c.dim){var O=c.dataToCoord(M)-S,P=n.dataToCoord(T);Math.abs(O)<f&&(O=(O<0?-1:1)*f),E=R,A=R+O,D=(k=P-h)-u,w&&(a[o][T][I]=A)}else{var L=c.dataToCoord(M,b)-S,N=n.dataToCoord(T);Math.abs(L)<g&&(L=(L<0?-1:1)*g),A=(E=N+h)+u,k=R,D=R+L,w&&(a[o][T][I]=D)}e.setItemLayout(C,{cx:d,cy:p,r0:E,r:A,startAngle:-k*Math.PI/180,endAngle:-D*Math.PI/180,clockwise:k>=D})}}})},te6={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},te8={splitNumber:5},te9=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.type="polar",e}(Vj);function te7(t,e){e=e||{};var i=t.coordinateSystem,n=t.axis,r={},o=n.position,a=n.orient,s=i.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],h={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};r.position=["vertical"===a?h.vertical[o]:l[0],"horizontal"===a?h.horizontal[o]:l[3]],r.rotation=Math.PI/2*({horizontal:0,vertical:1})[a],r.labelDirection=r.tickDirection=r.nameDirection=({top:-1,bottom:1,right:1,left:-1})[o],t.get(["axisTick","inside"])&&(r.tickDirection=-r.tickDirection),TW(e.labelInside,t.get(["axisLabel","inside"]))&&(r.labelDirection=-r.labelDirection);var u=e.rotate;return null==u&&(u=t.get(["axisLabel","rotate"])),r.labelRotation="top"===o?-u:u,r.z2=1,r}var tit=["axisLine","axisTickLabel","axisName"],tie=["splitArea","splitLine"],tii=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.axisPointerClass="SingleAxisPointer",i}return M6(e,t),e.prototype.render=function(e,i,n,r){var o=this.group;o.removeAll();var a=this._axisGroup;this._axisGroup=new Aj;var s=te7(e),l=new Zh(e,s);T_(tit,l.add,l),o.add(this._axisGroup),o.add(l.getGroup()),T_(tie,function(t){e.get([t,"show"])&&tin[t](this,this.group,this._axisGroup,e)},this),LS(a,this._axisGroup,e),t.prototype.render.call(this,e,i,n,r)},e.prototype.remove=function(){KF(this)},e.type="singleAxis",e}(KH),tin={splitLine:function(t,e,i,n){var r=n.axis;if(!r.scale.isBlank()){var o=n.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=s instanceof Array?s:[s];for(var l=a.get("width"),h=n.coordinateSystem.getRect(),u=r.isHorizontal(),c=[],d=0,p=r.getTicksCoords({tickModel:o}),f=[],g=[],m=0;m<p.length;++m){var y=r.toGlobalCoord(p[m].coord);u?(f[0]=y,f[1]=h.y,g[0]=y,g[1]=h.y+h.height):(f[0]=h.x,f[1]=y,g[0]=h.x+h.width,g[1]=y);var w=new PX({shape:{x1:f[0],y1:f[1],x2:g[0],y2:g[1]},silent:!0});Lm(w.shape,l);var b=d++%s.length;c[b]=c[b]||[],c[b].push(w)}for(var x=a.getLineStyle(["color"]),m=0;m<c.length;++m)e.add(Lf(c[m],{style:Tb({stroke:s[m%s.length]},x),silent:!0}))}},splitArea:function(t,e,i,n){KB(t,i,n,n)}},tir=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(NW);TS(tir,Zi.prototype);var tio=function(t){function e(e,i,n,r,o){var a=t.call(this,e,i,n)||this;return a.type=r||"value",a.position=o||"bottom",a}return M6(e,t),e.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},e.prototype.pointToData=function(t,e){return this.coordinateSystem.pointToData(t)[0]},e}($j),tia=["single"],tis=function(){function t(t,e,i){this.type="single",this.dimension="single",this.dimensions=tia,this.axisPointerEnabled=!0,this.model=t,this._init(t,e,i)}return t.prototype._init=function(t,e,i){var n=new tio(this.dimension,$R(t),[0,0],t.get("type"),t.get("position")),r="category"===n.type;n.onBand=r&&t.get("boundaryGap"),n.inverse=t.get("inverse"),n.orient=t.get("orient"),t.axis=n,n.model=t,n.coordinateSystem=this,this._axis=n},t.prototype.update=function(t,e){t.eachSeries(function(t){if(t.coordinateSystem===this){var e=t.getData();T_(e.mapDimensionsAll(this.dimension),function(t){this._axis.scale.unionExtentFromData(e,t)},this),$I(this._axis.scale,this._axis.model)}},this)},t.prototype.resize=function(t,e){this._rect=NP({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,i=e.isHorizontal(),n=i?[0,t.width]:[0,t.height],r=e.inverse?1:0;e.setExtent(n[r],n[1-r]),this._updateAxisTransform(e,i?t.x:t.y)},t.prototype._updateAxisTransform=function(t,e){var i=t.getExtent(),n=i[0]+i[1],r=t.isHorizontal();t.toGlobalCoord=r?function(t){return t+e}:function(t){return n-t+e},t.toLocalCoord=r?function(t){return t-e}:function(t){return n-t+e}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(t){var e=this.getRect(),i=this.getAxis();return"horizontal"===i.orient?i.contain(i.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:i.contain(i.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},t.prototype.pointToData=function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},t.prototype.dataToPoint=function(t){var e=this.getAxis(),i=this.getRect(),n=[],r="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),n[r]=e.toGlobalCoord(e.dataToCoord(+t)),n[1-r]=0===r?i.y+i.height/2:i.x+i.width/2,n},t.prototype.convertToPixel=function(t,e,i){return til(e)===this?this.dataToPoint(i):null},t.prototype.convertFromPixel=function(t,e,i){return til(e)===this?this.pointToData(i):null},t}();function til(t){var e=t.seriesModel,i=t.singleAxisModel;return i&&i.coordinateSystem||e&&e.coordinateSystem}var tih={create:function(t,e){var i=[];return t.eachComponent("singleAxis",function(n,r){var o=new tis(n,t,e);o.name="single_"+r,o.resize(n,e),n.coordinateSystem=o,i.push(o)}),t.eachSeries(function(t){if("singleAxis"===t.get("coordinateSystem")){var e=t.getReferringComponents("singleAxis",kw).models[0];t.coordinateSystem=e&&e.coordinateSystem}}),i},dimensions:tia},tiu=["x","y"],tic=["width","height"],tid=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.makeElOption=function(t,e,i,n,r){var o=i.axis,a=o.coordinateSystem,s=tig(a,1-tif(o)),l=a.dataToPoint(e)[0],h=n.get("type");if(h&&"none"!==h){var u=Q8(n),c=tip[h](o,l,s);c.style=u,t.graphicKey=c.type,t.pointer=c}Je(e,t,te7(i),i,n,r)},e.prototype.getHandleTransform=function(t,e,i){var n=te7(e,{labelInside:!1});n.labelMargin=i.get(["handle","margin"]);var r=Jt(e.axis,t,n);return{x:r[0],y:r[1],rotation:n.rotation+(n.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,i,n){var r=i.axis,o=r.coordinateSystem,a=tif(r),s=tig(o,a),l=[t.x,t.y];l[a]+=e[a],l[a]=Math.min(s[1],l[a]),l[a]=Math.max(s[0],l[a]);var h=tig(o,1-a),u=(h[1]+h[0])/2,c=[u,u];return c[a]=l[a],{x:l[0],y:l[1],rotation:t.rotation,cursorPoint:c,tooltipOption:{verticalAlign:"middle"}}},e}(Q2),tip={line:function(t,e,i){return{type:"Line",subPixelOptimize:!0,shape:Ji([e,i[0]],[e,i[1]],tif(t))}},shadow:function(t,e,i){var n=t.getBandWidth(),r=i[1]-i[0];return{type:"Rect",shape:Jn([e-n/2,i[0]],[n,r],tif(t))}}};function tif(t){return t.isHorizontal()?0:1}function tig(t,e){var i=t.getRect();return[i[tiu[e]],i[tiu[e]]+i[tic[e]]]}var tim=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.type="single",e}(Vj),tiy=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.layoutMode="box",i}return M6(e,t),e.prototype.init=function(t,e,i){this.mergeDefaultAndTheme(t,i),this._initData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(t>=e&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t,e=this.option,i=e.data||[],n=e.axisType,r=this._names=[];"category"===n?(t=[],T_(i,function(e,i){var n,o=kc(ks(e),"");TN(e)?(n=Tm(e)).value=i:n=i,t.push(n),r.push(o)})):t=i,(this._data=new zu([{name:"value",type:{category:"ordinal",time:"time",value:"number"}[n]||"number"}],this)).initData(t,r)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(NW),tiv=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.type="timeline.slider",e.defaultOption=L4(tiy.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(tiy);TS(tiv,Hq.prototype);var tiw=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.type="timeline",e}(Vj),tib=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n)||this;return o.type=r||"value",o}return M6(e,t),e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},e}($j),tix=Math.PI,tiS=kg(),tiC=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.init=function(t,e){this.api=e},e.prototype.render=function(t,e,i){if(this.model=t,this.api=i,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var n=this._layout(t,i),r=this._createGroup("_mainGroup"),o=this._createGroup("_labelGroup"),a=this._axis=this._createAxis(n,t);t.formatTooltip=function(t){return VS("nameValue",{noName:!0,value:a.scale.getLabel({value:t})})},T_(["AxisLine","AxisTick","Control","CurrentPointer"],function(e){this["_render"+e](n,r,a,t)},this),this._renderAxisLabel(n,o,a,t),this._position(n,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,e){var i,n,r,o,a=t.get(["label","position"]),s=t.get("orient"),l=NP(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding")),h={horizontal:"center",vertical:(i=null==a||"auto"===a?"horizontal"===s?l.y+l.height/2<e.getHeight()/2?"-":"+":l.x+l.width/2<e.getWidth()/2?"+":"-":TO(a)?({horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}})[s][a]:a)>=0||"+"===i?"left":"right"},u="vertical"===s?l.height:l.width,c=t.getModel("controlStyle"),d=c.get("show",!0),p=d?c.get("itemSize"):0,f=d?c.get("itemGap"):0,g=p+f,m=t.get(["label","rotate"])||0;m=m*tix/180;var y=c.get("position",!0),w=d&&c.get("showPlayBtn",!0),b=d&&c.get("showPrevBtn",!0),x=d&&c.get("showNextBtn",!0),S=0,C=u;"left"===y||"bottom"===y?(w&&(n=[0,0],S+=g),b&&(r=[S,0],S+=g)):(w&&(n=[C-p,0],C-=g),b&&(r=[0,0],S+=g)),x&&(o=[C-p,0],C-=g);var _=[S,C];return t.get("inverse")&&_.reverse(),{viewRect:l,mainLength:u,orient:s,rotation:({horizontal:0,vertical:tix/2})[s],labelRotation:m,labelPosOpt:i,labelAlign:t.get(["label","align"])||h[s],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||({horizontal:i>=0||"+"===i?"top":"bottom",vertical:"middle"})[s],playPosition:n,prevBtnPosition:r,nextBtnPosition:o,axisExtent:_,controlSize:p,controlGap:f}},e.prototype._position=function(t,e){var i=this._mainGroup,n=this._labelGroup,r=t.viewRect;if("vertical"===t.orient){var o=IV(),a=r.x,s=r.y+r.height;Iz(o,o,[-a,-s]),Ij(o,o,-tix/2),Iz(o,o,[a,s]),(r=r.clone()).applyTransform(o)}var l=m(r),h=m(i.getBoundingRect()),u=m(n.getBoundingRect()),c=[i.x,i.y],d=[n.x,n.y];d[0]=c[0]=l[0][0];var p=t.labelPosOpt;if(null==p||TO(p)){var f="+"===p?0:1;y(c,h,l,1,f),y(d,u,l,1,1-f)}else{var f=p>=0?0:1;y(c,h,l,1,f),d[1]=c[1]+p}function g(t){t.originX=l[0][0]-t.x,t.originY=l[1][0]-t.y}function m(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function y(t,e,i,n,r){t[n]+=i[n][r]-e[n][r]}i.setPosition(c),n.setPosition(d),i.rotation=n.rotation=t.rotation,g(i),g(n)},e.prototype._createAxis=function(t,e){var i=e.getData(),n=e.get("axisType"),r=function(t,e){if(e=e||t.get("type"))switch(e){case"category":return new $s({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new $u({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new $l}}(e,n);r.getTicks=function(){return i.mapArray(["value"],function(t){return{value:t}})};var o=i.getDataExtent("value");r.setExtent(o[0],o[1]),r.calcNiceTicks();var a=new tib("value",r,t.axisExtent,n);return a.model=e,a},e.prototype._createGroup=function(t){var e=this[t]=new Aj;return this.group.add(e),e},e.prototype._renderAxisLine=function(t,e,i,n){var r=i.getExtent();if(n.get(["lineStyle","show"])){var o=new PX({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:Tw({lineCap:"round"},n.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});e.add(o);var a=this._progressLine=new PX({shape:{x1:r[0],x2:this._currentPointer?this._currentPointer.x:r[0],y1:0,y2:0},style:Tb({lineCap:"round",lineWidth:o.style.lineWidth},n.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});e.add(a)}},e.prototype._renderAxisTick=function(t,e,i,n){var r=this,o=n.getData(),a=i.scale.getTicks();this._tickSymbols=[],T_(a,function(t){var a=i.dataToCoord(t.value),s=o.getItemModel(t.value),l=s.getModel("itemStyle"),h=s.getModel(["emphasis","itemStyle"]),u=s.getModel(["progress","itemStyle"]),c=ti_(s,l,e,{x:a,y:0,onclick:TE(r._changeTimeline,r,t.value)});c.ensureState("emphasis").style=h.getItemStyle(),c.ensureState("progress").style=u.getItemStyle(),OV(c);var d=On(c);s.get("tooltip")?(d.dataIndex=t.value,d.dataModel=n):d.dataIndex=d.dataModel=null,r._tickSymbols.push(c)})},e.prototype._renderAxisLabel=function(t,e,i,n){var r=this;if(i.getLabelModel().get("show")){var o=n.getData(),a=i.getViewLabels();this._tickLabels=[],T_(a,function(n){var a=n.tickValue,s=o.getItemModel(a),l=s.getModel("label"),h=s.getModel(["emphasis","label"]),u=s.getModel(["progress","label"]),c=new D0({x:i.dataToCoord(n.tickValue),y:0,rotation:t.labelRotation-t.rotation,onclick:TE(r._changeTimeline,r,a),silent:!1,style:LN(l,{text:n.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});c.ensureState("emphasis").style=LN(h),c.ensureState("progress").style=LN(u),e.add(c),OV(c),tiS(c).dataIndex=a,r._tickLabels.push(c)})}},e.prototype._renderControl=function(t,e,i,n){var r=t.controlSize,o=t.rotation,a=n.getModel("controlStyle").getItemStyle(),s=n.getModel(["emphasis","controlStyle"]).getItemStyle(),l=n.getPlayState(),h=n.get("inverse",!0);function u(t,i,l,h){if(t){var u,c,d,p,f,g=AO(Tz(n.get(["controlStyle",i+"BtnSize"]),r),r),m=(u=i+"Icon",c=[0,-g/2,g,g],p=(d={x:t[0],y:t[1],originX:r/2,originY:0,rotation:h?-o:0,rectHover:!0,style:a,onclick:l}).style,f=LM(n.get(["controlStyle",u]),d||{},new I1(c[0],c[1],c[2],c[3])),p&&f.setStyle(p),f);m.ensureState("emphasis").style=s,e.add(m),OV(m)}}u(t.nextBtnPosition,"next",TE(this._changeTimeline,this,h?"-":"+")),u(t.prevBtnPosition,"prev",TE(this._changeTimeline,this,h?"+":"-")),u(t.playPosition,l?"stop":"play",TE(this._handlePlayClick,this,!l),!0)},e.prototype._renderCurrentPointer=function(t,e,i,n){var r=n.getData(),o=n.getCurrentIndex(),a=r.getItemModel(o).getModel("checkpointStyle"),s=this;this._currentPointer=ti_(a,a,this._mainGroup,{},this._currentPointer,{onCreate:function(t){t.draggable=!0,t.drift=TE(s._handlePointerDrag,s),t.ondragend=TE(s._handlePointerDragend,s),tiM(t,s._progressLine,o,i,n,!0)},onUpdate:function(t){tiM(t,s._progressLine,o,i,n)}})},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,e,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,e){var i=this._toAxisCoord(t)[0],n=AK(this._axis.getExtent().slice());i>n[1]&&(i=n[1]),i<n[0]&&(i=n[0]),this._currentPointer.x=i,this._currentPointer.markRedraw();var r=this._progressLine;r&&(r.shape.x2=i,r.dirty());var o=this._findNearestTick(i),a=this.model;(e||o!==a.getCurrentIndex()&&a.get("realtime"))&&this._changeTimeline(o)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var e=t.model;t._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){return Lb(t,this._mainGroup.getLocalTransform(),!0)},e.prototype._findNearestTick=function(t){var e,i=this.model.getData(),n=1/0,r=this._axis;return i.each(["value"],function(i,o){var a=Math.abs(r.dataToCoord(i)-t);a<n&&(n=a,e=o)}),e},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),e=this._tickSymbols,i=this._tickLabels;if(e)for(var n=0;n<e.length;n++)e&&e[n]&&e[n].toggleState("progress",n<t);if(i)for(var n=0;n<i.length;n++)i&&i[n]&&i[n].toggleState("progress",tiS(i[n]).dataIndex<=t)},e.type="timeline.slider",e}(tiw);function ti_(t,e,i,n,r,o){var a=e.get("color");r?(r.setColor(a),i.add(r),o&&o.onUpdate(r)):((r=BW(t.get("symbol"),-1,-1,2,2,a)).setStyle("strokeNoScale",!0),i.add(r),o&&o.onCreate(r));var s=e.getItemStyle(["color"]);r.setStyle(s),n=Ty({rectHover:!0,z2:100},n,!0);var l=Bz(t.get("symbolSize"));n.scaleX=l[0]/2,n.scaleY=l[1]/2;var h=Bj(t.get("symbolOffset"),l);h&&(n.x=(n.x||0)+h[0],n.y=(n.y||0)+h[1]);var u=t.get("symbolRotate");return n.rotation=(u||0)*Math.PI/180||0,r.attr(n),r.updateTransform(),r}function tiM(t,e,i,n,r,o){if(!t.dragging){var a=r.getModel("checkpointStyle"),s=n.dataToCoord(r.getData().get("value",i));if(o||!a.get("animation",!0))t.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:a.get("animationDuration",!0),easing:a.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}function tiT(t){var e=t&&t.timeline;Tk(e)||(e=e?[e]:[]),T_(e,function(t){t&&function(t){var e=t.type,i={number:"value",time:"time"};if(i[e]&&(t.axisType=i[e],delete t.type),tiI(t),tiR(t,"controlPosition")){var n=t.controlStyle||(t.controlStyle={});tiR(n,"position")||(n.position=t.controlPosition),"none"!==n.position||tiR(n,"show")||(n.show=!1,delete n.position),delete t.controlPosition}T_(t.data||[],function(t){TN(t)&&!Tk(t)&&(!tiR(t,"value")&&tiR(t,"name")&&(t.value=t.name),tiI(t))})}(t)})}function tiI(t){var e=t.itemStyle||(t.itemStyle={}),i=e.emphasis||(e.emphasis={}),n=t.label||t.label||{},r=n.normal||(n.normal={}),o={normal:1,emphasis:1};T_(n,function(t,e){o[e]||tiR(r,e)||(r[e]=t)}),i.label&&!tiR(n,"emphasis")&&(n.emphasis=i.label,delete i.label)}function tiR(t,e){return t.hasOwnProperty(e)}var tiE=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.layoutMode={type:"box",ignoreSize:!0},i}return M6(e,t),e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(NW),tiA=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.render=function(t,e,i){if(this.group.removeAll(),t.get("show")){var n=this.group,r=t.getModel("textStyle"),o=t.getModel("subtextStyle"),a=t.get("textAlign"),s=Tz(t.get("textBaseline"),t.get("textVerticalAlign")),l=new D0({style:LN(r,{text:t.get("text"),fill:r.getTextColor()},{disableBox:!0}),z2:10}),h=l.getBoundingRect(),u=t.get("subtext"),c=new D0({style:LN(o,{text:u,fill:o.getTextColor(),y:h.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),d=t.get("link"),p=t.get("sublink"),f=t.get("triggerEvent",!0);l.silent=!d&&!f,c.silent=!p&&!f,d&&l.on("click",function(){NA(d,"_"+t.get("target"))}),p&&c.on("click",function(){NA(p,"_"+t.get("subtarget"))}),On(l).eventData=On(c).eventData=f?{componentType:"title",componentIndex:t.componentIndex}:null,n.add(l),u&&n.add(c);var g=n.getBoundingRect(),m=t.getBoxLayoutParams();m.width=g.width,m.height=g.height;var y=NP(m,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));a||("middle"===(a=t.get("left")||t.get("right"))&&(a="center"),"right"===a?y.x+=y.width:"center"!==a||(y.x+=y.width/2)),s||("center"===(s=t.get("top")||t.get("bottom"))&&(s="middle"),"bottom"===s?y.y+=y.height:"middle"===s&&(y.y+=y.height/2),s=s||"top"),n.x=y.x,n.y=y.y,n.markRedraw();var w={align:a,verticalAlign:s};l.setStyle(w),c.setStyle(w),g=n.getBoundingRect();var b=y.margin,x=t.getItemStyle(["color","opacity"]);x.fill=t.get("backgroundColor");var S=new DK({shape:{x:g.x-b[3],y:g.y-b[0],width:g.width+b[1]+b[3],height:g.height+b[0]+b[2],r:t.get("borderRadius")},style:x,subPixelOptimize:!0,silent:!0});n.add(S)}},e.type="title",e}(Vj),tik=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.type="dataZoom.select",e}(tth),tiD=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.type="dataZoom.select",e}(ttd);function tiO(t){t.registerComponentModel(tik),t.registerComponentView(tiD),tt_(t)}var tiP=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;T_(this.option.feature,function(t,i){var n=J3[i];n&&(n.getDefaultOption&&(n.defaultOption=n.getDefaultOption(e)),Ty(t,n.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(NW),tiL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.render=function(t,e,i,n){var r=this.group;if(r.removeAll(),t.get("show")){var o,a,s,l,h=+t.get("itemSize"),u="vertical"===t.get("orient"),c=t.get("feature")||{},d=this._features||(this._features={}),p=[];T_(c,function(t,e){p.push(e)}),new ze(this._featureNames||[],p).add(f).update(f).remove(TA(f,null)).execute(),this._featureNames=p,o=t.getBoxLayoutParams(),a=t.get("padding"),l=NP(o,s={width:i.getWidth(),height:i.getHeight()},a),NO(t.get("orient"),r,t.get("itemGap"),l.width,l.height),NL(r,o,s,a),r.add(ttX(r.getBoundingRect(),t)),u||r.eachChild(function(t){var e=t.__title,n=t.ensureState("emphasis"),o=n.textConfig||(n.textConfig={}),a=t.getTextContent(),s=a&&a.ensureState("emphasis");if(s&&!TD(s)&&e){var l=s.style||(s.style={}),u=AE(e,D0.makeFont(l)),c=t.x+r.x,d=t.y+r.y+h,p=!1;d+u.height>i.getHeight()&&(o.position="top",p=!0);var f=p?-5-u.height:h+10;c+u.width/2>i.getWidth()?(o.position=["100%",f],l.align="right"):c-u.width/2<0&&(o.position=[0,f],l.align="left")}})}function f(o,a){var s,l,f,g,m,y,w,b,x,S=p[o],C=p[a],_=c[S],M=new L2(_,t,t.ecModel);if(n&&null!=n.newTitle&&n.featureName===S&&(_.title=n.newTitle),S&&!C){if(0===S.indexOf("my"))x={onclick:M.option.onclick,featureName:S};else{var T=J3[S];if(!T)return;x=new T}d[S]=x}else if(!(x=d[C]))return;x.uid=L3("toolbox-feature"),x.model=M,x.ecModel=e,x.api=i;var I=x instanceof J5;if(!S&&C){I&&x.dispose&&x.dispose(e,i);return}if(!M.get("show")||I&&x.unusable){I&&x.remove&&x.remove(e,i);return}s=x,g=M.getModel("iconStyle"),m=M.getModel(["emphasis","iconStyle"]),y=s instanceof J5&&s.getIcons?s.getIcons():M.get("icon"),w=M.get("title")||{},TO(y)?(l={})[S]=y:l=y,TO(w)?(f={})[S]=w:f=w,b=M.iconPaths={},T_(l,function(n,o){var a=LM(n,{},{x:-h/2,y:-h/2,width:h,height:h});a.setStyle(g.getItemStyle()),a.ensureState("emphasis").style=m.getItemStyle();var l=new D0({style:{text:f[o],align:m.get("textAlign"),borderRadius:m.get("textBorderRadius"),padding:m.get("textPadding"),fill:null,font:Lz({fontStyle:m.get("textFontStyle"),fontFamily:m.get("textFontFamily"),fontSize:m.get("textFontSize"),fontWeight:m.get("textFontWeight")},e)},ignore:!0});a.setTextContent(l),LR({el:a,componentModel:t,itemName:o,formatterParamsExtra:{title:f[o]}}),a.__title=f[o],a.on("mouseover",function(){var e=m.getItemStyle(),n=u?null==t.get("right")&&"right"!==t.get("left")?"right":"left":null==t.get("bottom")&&"bottom"!==t.get("top")?"bottom":"top";l.setStyle({fill:m.get("textFill")||e.fill||e.stroke||"#000",backgroundColor:m.get("textBackgroundColor")}),a.setTextConfig({position:m.get("textPosition")||n}),l.ignore=!t.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==M.get(["iconStatus",o])&&i.leaveEmphasis(this),l.hide()}),("emphasis"===M.get(["iconStatus",o])?OA:Ok)(a),r.add(a),a.on("click",TE(s.onclick,s,e,i,o)),b[o]=a}),M.setIconStatus=function(t,e){var i=this.option,n=this.iconPaths;i.iconStatus=i.iconStatus||{},i.iconStatus[t]=e,n[t]&&("emphasis"===e?OA:Ok)(n[t])},x instanceof J5&&x.render&&x.render(M,e,i,n)}},e.prototype.updateView=function(t,e,i,n){T_(this._features,function(t){t instanceof J5&&t.updateView&&t.updateView(t.model,e,i,n)})},e.prototype.remove=function(t,e){T_(this._features,function(i){i instanceof J5&&i.remove&&i.remove(t,e)}),this.group.removeAll()},e.prototype.dispose=function(t,e){T_(this._features,function(i){i instanceof J5&&i.dispose&&i.dispose(t,e)})},e.type="toolbox",e}(Vj),tiN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.onclick=function(t,e){var i=this.model,n=i.get("name")||t.get("title.0.text")||"echarts",r="svg"===e.getZr().painter.getType(),o=r?"svg":i.get("type",!0)||"png",a=e.getConnectedDataURL({type:o,backgroundColor:i.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),s=M9.browser;if("function"!=typeof MouseEvent||!s.newEdge&&(s.ie||s.edge)){if(window.navigator.msSaveOrOpenBlob||r){var l=a.split(","),h=l[0].indexOf("base64")>-1,u=r?decodeURIComponent(l[1]):l[1];h&&(u=window.atob(u));var c=n+"."+o;if(window.navigator.msSaveOrOpenBlob){for(var d=u.length,p=new Uint8Array(d);d--;)p[d]=u.charCodeAt(d);var f=new Blob([p]);window.navigator.msSaveOrOpenBlob(f,c)}else{var g=document.createElement("iframe");document.body.appendChild(g);var m=g.contentWindow,y=m.document;y.open("image/svg+xml","replace"),y.write(u),y.close(),m.focus(),y.execCommand("SaveAs",!0,c),document.body.removeChild(g)}}else{var w=i.get("lang"),b='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" title="'+(w&&w[0]||"")+'" /></body>',x=window.open();x.document.write(b),x.document.title=n}}else{var S=document.createElement("a");S.download=n+"."+o,S.target="_blank",S.href=a;var C=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});S.dispatchEvent(C)}},e.getDefaultOption=function(t){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},e}(J5),tiH="__ec_magicType_stack__",tiV=[["line","bar"],["stack"]],tiB=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.getIcons=function(){var t=this.model,e=t.get("icon"),i={};return T_(t.get("type"),function(t){e[t]&&(i[t]=e[t])}),i},e.getDefaultOption=function(t){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},e.prototype.onclick=function(t,e,i){var n,r=this.model,o=r.get(["seriesIndex",i]);if(tiF[i]){var a={series:[]};T_(tiV,function(t){Tx(t,i)>=0&&T_(t,function(t){r.setIconStatus(t,"normal")})}),r.setIconStatus(i,"emphasis"),t.eachComponent({mainType:"series",query:null==o?null:{seriesIndex:o}},function(t){var e=t.subType,n=t.id,o=tiF[i](e,n,t,r);o&&(Tb(o,t.option),a.series.push(o));var s=t.coordinateSystem;if(s&&"cartesian2d"===s.type&&("line"===i||"bar"===i)){var l=s.getAxesByScale("ordinal")[0];if(l){var h=l.dim+"Axis",u=t.getReferringComponents(h,kw).models[0].componentIndex;a[h]=a[h]||[];for(var c=0;c<=u;c++)a[h][u]=a[h][u]||{};a[h][u].boundaryGap="bar"===i}}});var s=i;"stack"===i&&(n=Ty({stack:r.option.title.tiled,tiled:r.option.title.stack},r.option.title),"emphasis"!==r.get(["iconStatus",i])&&(s="tiled")),e.dispatchAction({type:"changeMagicType",currentType:s,newOption:a,newTitle:n,featureName:"magicType"})}},e}(J5),tiF={line:function(t,e,i,n){if("bar"===t)return Ty({id:e,type:"line",data:i.get("data"),stack:i.get("stack"),markPoint:i.get("markPoint"),markLine:i.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(t,e,i,n){if("line"===t)return Ty({id:e,type:"bar",data:i.get("data"),stack:i.get("stack"),markPoint:i.get("markPoint"),markLine:i.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(t,e,i,n){var r=i.get("stack")===tiH;if("line"===t||"bar"===t)return n.setIconStatus("stack",r?"normal":"emphasis"),Ty({id:e,stack:r?"":tiH},n.get(["option","stack"])||{},!0)}};FN({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});var tiW=Array(60).join("-");function tiz(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var tij=RegExp("[	]+","g"),tiU=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.onclick=function(t,e){setTimeout(function(){e.dispatchAction({type:"hideTip"})});var i,n,r,o,a,s,l=e.getDom(),h=this.model;this._dom&&l.removeChild(this._dom);var u=document.createElement("div");u.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",u.style.backgroundColor=h.get("backgroundColor")||"#fff";var c=document.createElement("h4"),d=h.get("lang")||[];c.innerHTML=d[0]||h.get("title"),c.style.cssText="margin:10px 20px",c.style.color=h.get("textColor");var p=document.createElement("div"),f=document.createElement("textarea");p.style.cssText="overflow:auto";var g=h.get("optionToContent"),m=h.get("contentToOption"),y={value:TI([(o=(i={},n=[],r=[],t.eachRawSeries(function(t){var e=t.coordinateSystem;if(e&&("cartesian2d"===e.type||"polar"===e.type)){var o=e.getBaseAxis();if("category"===o.type){var a=o.dim+"_"+o.index;i[a]||(i[a]={categoryAxis:o,valueAxis:e.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),i[a].series.push(t)}else n.push(t)}else n.push(t)}),s={seriesGroupByCategoryAxis:i,other:n,meta:r}).seriesGroupByCategoryAxis,a=[],T_(o,function(t,e){var i=t.categoryAxis,n=t.valueAxis.dim,r=[" "].concat(TM(t.series,function(t){return t.name})),o=[i.model.getCategories()];T_(t.series,function(t){var e=t.getRawData();o.push(t.getRawData().mapArray(e.mapDimension(n),function(t){return t}))});for(var s=[r.join("	")],l=0;l<o[0].length;l++){for(var h=[],u=0;u<o.length;u++)h.push(o[u][l]);s.push(h.join("	"))}a.push(s.join("\n"))}),a.join("\n\n"+tiW+"\n\n")),TM(s.other,function(t){var e=t.getRawData(),i=[t.name],n=[];return e.each(e.dimensions,function(){for(var t=arguments.length,r=arguments[t-1],o=e.getName(r),a=0;a<t-1;a++)n[a]=arguments[a];i.push((o?o+"	":"")+n.join("	"))}),i.join("\n")}).join("\n\n"+tiW+"\n\n")],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join("\n\n"+tiW+"\n\n"),meta:s.meta};if(TD(g)){var w=g(e.getOption());TO(w)?p.innerHTML=w:TB(w)&&p.appendChild(w)}else{f.readOnly=h.get("readOnly");var b=f.style;b.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",b.color=h.get("textColor"),b.borderColor=h.get("textareaBorderColor"),b.backgroundColor=h.get("textareaColor"),f.value=y.value,p.appendChild(f)}var x=y.meta,S=document.createElement("div");S.style.cssText="position:absolute;bottom:5px;left:0;right:0";var C="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",_=document.createElement("div"),M=document.createElement("div");C+=";background-color:"+h.get("buttonColor")+";color:"+h.get("buttonTextColor");var T=this;function I(){l.removeChild(u),T._dom=null}ID(_,"click",I),ID(M,"click",function(){var t,i,n;if(null==m&&null!=g||null!=m&&null==g){I();return}try{TD(m)?t=m(p,e.getOption()):(i=f.value.split(RegExp("\n*"+tiW+"\n*","g")),n={series:[]},T_(i,function(t,e){if(function(t){if(t.slice(0,t.indexOf("\n")).indexOf("	")>=0)return!0}(t)){var i=function(t){for(var e=t.split(/\n+/g),i=tiz(e.shift()).split(tij),n=[],r=TM(i,function(t){return{name:t,data:[]}}),o=0;o<e.length;o++){var a=tiz(e[o]).split(tij);n.push(a.shift());for(var s=0;s<a.length;s++)r[s]&&(r[s].data[o]=a[s])}return{series:r,categories:n}}(t),r=x[e],o=r.axisDim+"Axis";r&&(n[o]=n[o]||[],n[o][r.axisIndex]={data:i.categories},n.series=n.series.concat(i.series))}else{var i=function(t){for(var e=t.split(/\n+/g),i=tiz(e.shift()),n=[],r=0;r<e.length;r++){var o=tiz(e[r]);if(o){var a=o.split(tij),s="",l=void 0,h=!1;isNaN(a[0])?(h=!0,s=a[0],a=a.slice(1),n[r]={name:s,value:[]},l=n[r].value):l=n[r]=[];for(var u=0;u<a.length;u++)l.push(+a[u]);1===l.length&&(h?n[r].value=l[0]:n[r]=l[0])}}return{name:i,data:n}}(t);n.series.push(i)}}),t=n)}catch(t){throw I(),Error("Data view format error "+t)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),I()}),_.innerHTML=d[1],M.innerHTML=d[2],M.style.cssText=_.style.cssText=C,h.get("readOnly")||S.appendChild(M),S.appendChild(_),u.appendChild(c),u.appendChild(p),u.appendChild(S),p.style.height=l.clientHeight-80+"px",l.appendChild(u),this._dom=u},e.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,e){this.remove(t,e)},e.getDefaultOption=function(t){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},e}(J5);FN({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var i=[];T_(t.newOption.series,function(t){var n=e.getSeriesByName(t.name)[0];if(n){var r=n.get("data");i.push({name:t.name,data:TM(t.data,function(t,e){var i=r&&r[e];if(!TN(i)||Tk(i))return t;TN(t)&&!Tk(t)||(t={value:t});var n=null!=i.name&&null==t.name;return t=Tb(t,i),n&&delete t.name,t})})}else i.push(Tw({type:"scatter"},t))}),e.mergeOption(Tb({series:i},t.newOption))});var tiG=kg();function tiY(t){var e=tiG(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var tiX=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.onclick=function(t,e){tiG(t).snapshots=null,e.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])}},e}(J5);FN({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});var ti$=kn+"toolbox-dataZoom_",tiZ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M6(e,t),e.prototype.render=function(t,e,i,n){this._brushController||(this._brushController=new ZC(i.getZr()),this._brushController.on("brush",TE(this._onBrush,this)).mount()),function(t,e,i,n,r){var o=i._isZoomActive;n&&"takeGlobalCursor"===n.type&&(o="dataZoomSelect"===n.key&&n.dataZoomSelectActive),i._isZoomActive=o,t.setIconStatus("zoom",o?"emphasis":"normal");var a=new JP(tiK(t),e,{include:["grid"]}).makePanelOpts(r,function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"});i._brushController.setPanels(a).enableBrush(!!o&&!!a.length&&{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()})}(t,e,this,n,i),function(t,e){t.setIconStatus("back",tiY(e).length>1?"emphasis":"normal")}(t,e)},e.prototype.onclick=function(t,e,i){tiq[i].call(this)},e.prototype.remove=function(t,e){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,e){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var e=t.areas;if(t.isEnd&&e.length){var i,n,r,o={},a=this.ecModel;this._brushController.updateCovers([]),new JP(tiK(this.model),a,{include:["grid"]}).matchOutputRanges(e,a,function(t,e,i){if("cartesian2d"===i.type){var n=t.brushType;"rect"===n?(s("x",i,e[0]),s("y",i,e[1])):s({lineX:"x",lineY:"y"}[n],i,e)}}),i=a,n=o,r=tiY(i),T_(n,function(t,e){for(var n=r.length-1;n>=0&&!r[n][e];n--);if(n<0){var o=i.queryComponents({mainType:"dataZoom",subType:"select",id:e})[0];if(o){var a=o.getPercentRange();r[0][e]={dataZoomId:e,start:a[0],end:a[1]}}}}),r.push(n),this._dispatchZoomAction(o)}function s(t,e,i){var n,r=e.getAxis(t),s=r.model,l=(a.eachComponent({mainType:"dataZoom",subType:"select"},function(e){e.getAxisModel(t,s.componentIndex)&&(n=e)}),n),h=l.findRepresentativeAxisProxy(s).getMinMaxSpan();(null!=h.minValueSpan||null!=h.maxValueSpan)&&(i=$Y(0,i.slice(),r.scale.getExtent(),0,h.minValueSpan,h.maxValueSpan)),l&&(o[l.id]={dataZoomId:l.id,startValue:i[0],endValue:i[1]})}},e.prototype._dispatchZoomAction=function(t){var e=[];T_(t,function(t,i){e.push(Tm(t))}),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},e.getDefaultOption=function(t){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},e}(J5),tiq={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){var t,e,i;this._dispatchZoomAction((e=(t=tiY(this.ecModel))[t.length-1],t.length>1&&t.pop(),i={},T_(e,function(e,n){for(var r=t.length-1;r>=0;r--)if(e=t[r][n]){i[n]=e;break}}),i))}};function tiK(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return null==e.xAxisIndex&&null==e.xAxisId&&(e.xAxisIndex="all"),null==e.yAxisIndex&&null==e.yAxisId&&(e.yAxisIndex="all"),e}tt="dataZoom",te=function(t){var e=t.getComponent("toolbox",0),i=["feature","dataZoom"];if(e&&null!=e.get(i)){var n=e.getModel(i),r=[],o=ky(t,tiK(n));return T_(o.xAxisModels,function(t){return a(t,"xAxis","xAxisIndex")}),T_(o.yAxisModels,function(t){return a(t,"yAxis","yAxisIndex")}),r}function a(t,e,i){var o=t.componentIndex,a={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:ti$+e+o};a[i]=o,r.push(a)}},TY(null==N6.get(tt)&&te),N6.set(tt,te);var tiQ=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(NW);function tiJ(t){var e=t.get("confine");return null!=e?!!e:"richText"===t.get("renderMode")}function ti0(t){if(M9.domSupported){for(var e=document.documentElement.style,i=0,n=t.length;i<n;i++)if(t[i]in e)return t[i]}}var ti1=ti0(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function ti2(t,e){if(!t)return e;e=N_(e,!0);var i=t.indexOf(e);return(t=-1===i?e:"-"+t.slice(0,i)+"-"+e).toLowerCase()}var ti5=ti2(ti0(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),ti3=ti2(ti1,"transform"),ti4="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(M9.transform3dSupported?"will-change:transform;":"");function ti6(t,e,i){var n=t.toFixed(0)+"px",r=e.toFixed(0)+"px";if(!M9.transformSupported)return i?"top:"+r+";left:"+n+";":[["top",r],["left",n]];var o=M9.transform3dSupported,a="translate"+(o?"3d":"")+"("+n+","+r+(o?",0":"")+")";return i?"top:0;left:0;"+ti3+":"+a+";":[["top",0],["left",0],[ti1,a]]}function ti8(t,e,i,n,r){var o=e&&e.painter;if(i){var a=o&&o.getViewportRoot();a&&Ib(Iw,a,n,r,!0)&&Ib(t,i,Iw[0],Iw[1])}else{t[0]=n,t[1]=r;var s=o&&o.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var ti9=function(){function t(t,e){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,M9.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var n=this._zr=t.getZr(),r=e.appendTo,o=r&&(TO(r)?document.querySelector(r):TB(r)?r:TD(r)&&r(t.getDom()));ti8(this._styleCoord,n,o,t.getWidth()/2,t.getHeight()/2),(o||t.getDom()).appendChild(i),this._api=t,this._container=o;var a=this;i.onmouseenter=function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0},i.onmousemove=function(t){if(t=t||window.event,!a._enterable){var e=n.handler;Ik(n.painter.getViewportRoot(),t,!0),e.dispatch("mousemove",t)}},i.onmouseleave=function(){a._inContent=!1,a._enterable&&a._show&&a.hideLater(a._hideDelay)}}return t.prototype.update=function(t){if(!this._container){var e,i,n=this._api.getDom(),r=(e="position",(i=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n))?e?i[e]:i:null),o=n.style;"absolute"!==o.position&&"absolute"!==r&&(o.position="relative")}var a=t.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=t.get("className")||""},t.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i,n,r,o,a,s,l,h,u,c,d,p,f,g,m,y,w,b,x,S,C,_=this.el,M=_.style,T=this._styleCoord;_.innerHTML?M.cssText=ti4+(i=!this._firstShow,n=this._longHide,r=[],o=t.get("transitionDuration"),a=t.get("backgroundColor"),s=t.get("shadowBlur"),l=t.get("shadowColor"),h=t.get("shadowOffsetX"),u=t.get("shadowOffsetY"),c=t.getModel("textStyle"),d=VE(t,"html"),r.push("box-shadow:"+(h+"px "+u+"px ")+s+"px "+l),i&&o&&r.push((g="opacity"+(f=" "+o/2+"s "+(p="cubic-bezier(0.23,1,0.32,1)"))+",visibility"+f,n||(f=" "+o+"s "+p,g+=M9.transformSupported?","+ti3+f:",left"+f+",top"+f),ti5+":"+g)),a&&r.push("background-color:"+a),T_(["width","color","radius"],function(e){var i="border-"+e,n=N_(i),o=t.get(n);null!=o&&r.push(i+":"+o+("color"===e?"":"px"))}),r.push((m=[],y=c.get("fontSize"),(w=c.getTextColor())&&m.push("color:"+w),m.push("font:"+c.getFont()),y&&m.push("line-height:"+Math.round(3*y/2)+"px"),b=c.get("textShadowColor"),x=c.get("textShadowBlur")||0,S=c.get("textShadowOffsetX")||0,C=c.get("textShadowOffsetY")||0,b&&x&&m.push("text-shadow:"+S+"px "+C+"px "+x+"px "+b),T_(["decoration","align"],function(t){var e=c.get(t);e&&m.push("text-"+t+":"+e)}),m.join(";"))),null!=d&&r.push("padding:"+TG(d).join("px ")+"px"),r.join(";")+";")+ti6(T[0],T[1],!0)+"border-color:"+NE(e)+";"+(t.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):M.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(t,e,i,n,r){var o=this.el;if(null==t){o.innerHTML="";return}var a="";if(TO(r)&&"item"===i.get("trigger")&&!tiJ(i)&&(a=function(t,e,i){if(!TO(i)||"inside"===i)return"";var n,r,o=t.get("backgroundColor"),a=t.get("borderWidth");e=NE(e);var s=n="left"===(n=i)?"right":"right"===n?"left":"top"===n?"bottom":"top",l=Math.max(1.5*Math.round(a),6),h="",u=ti3+":";Tx(["left","right"],s)>-1?(h+="top:50%",u+="translateY(-50%) rotate("+(r="left"===s?-225:-45)+"deg)"):(h+="left:50%",u+="translateX(-50%) rotate("+(r="top"===s?225:45)+"deg)");var c=r*Math.PI/180,d=l+a,p=d*Math.abs(Math.cos(c))+d*Math.abs(Math.sin(c));h+=";"+s+":-"+Math.round(((p-Math.SQRT2*a)/2+Math.SQRT2*a-(p-d)/2)*100)/100+"px";var f=e+" solid "+a+"px;";return'<div style="'+["position:absolute;width:"+l+"px;height:"+l+"px;z-index:-1;",h+";"+u+";","border-bottom:"+f,"border-right:"+f,"background-color:"+o+";"].join("")+'"></div>'}(i,n,r)),TO(t))o.innerHTML=t+a;else if(t){o.innerHTML="",Tk(t)||(t=[t]);for(var s=0;s<t.length;s++)TB(t[s])&&t[s].parentNode!==o&&o.appendChild(t[s]);if(a&&o.childNodes.length){var l=document.createElement("div");l.innerHTML=a,o.appendChild(l)}}},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},t.prototype.moveTo=function(t,e){var i=this._styleCoord;if(ti8(i,this._zr,this._container,t,e),null!=i[0]&&null!=i[1]){var n=this.el.style;T_(ti6(i[0],i[1]),function(t){n[t[0]]=t[1]})}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",M9.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(TE(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},t}(),ti7=function(){function t(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),tni(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return t.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(t,e,i,n,r){var o=this;TN(t)&&Hi(""),this.el&&this._zr.remove(this.el);var a=i.getModel("textStyle");this.el=new D0({style:{rich:e.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:a.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:VE(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),T_(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(t){o.el.style[t]=i.get(t)}),T_(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(t){o.el.style[t]=a.get(t)||0}),this._zr.add(this.el);var s=this;this.el.on("mouseover",function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0}),this.el.on("mouseout",function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1})},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),i=tne(t.style);return[e.width+i.left+i.right,e.height+i.top+i.bottom]},t.prototype.moveTo=function(t,e){var i=this.el;if(i){var n=this._styleCoord;tni(n,this._zr,t,e),t=n[0],e=n[1];var r=i.style,o=tnt(r.borderWidth||0),a=tne(r);i.x=t+o+a.left,i.y=e+o+a.top,i.markRedraw()}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(TE(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function tnt(t){return Math.max(0,t)}function tne(t){var e=tnt(t.shadowBlur||0),i=tnt(t.shadowOffsetX||0),n=tnt(t.shadowOffsetY||0);return{left:tnt(e-i),right:tnt(e+i),top:tnt(e-n),bottom:tnt(e+n)}}function tni(t,e,i,n){t[0]=i,t[1]=n,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var tnn=new DK({shape:{x:-1,y:-1,width:2,height:2}}),tnr=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.init=function(t,e){if(!M9.node&&e.getDom()){var i,n=t.getComponent("tooltip"),r=this._renderMode="auto"===(i=n.get("renderMode"))?M9.domSupported?"html":"richText":i||"html";this._tooltipContent="richText"===r?new ti7(e):new ti9(e,{appendTo:n.get("appendToBody",!0)?"body":n.get("appendTo",!0)})}},e.prototype.render=function(t,e,i){if(!M9.node&&i.getDom()){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=i;var n=this._tooltipContent;n.update(t),n.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&t.get("transitionDuration")?V5(this,"_updatePosition",50,"fixRate"):V3(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel.get("triggerOn");Jc("itemTooltip",this._api,TE(function(e,i,n){"none"!==t&&(t.indexOf(e)>=0?this._tryShow(i,n):"leave"===e&&this._hide(n))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,e=this._ecModel,i=this._api,n=t.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==n&&"click"!==n){var r=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){i.isDisposed()||r.manuallyShowTip(t,e,i,{x:r._lastX,y:r._lastY,dataByCoordSys:r._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,e,i,n){if(n.from!==this.uid&&!M9.node&&i.getDom()){var r=tna(n,i);this._ticket="";var o=n.dataByCoordSys,a=function(t,e,i){var n,r=kv(t).queryOptionMap,o=r.keys()[0];if(o&&"series"!==o){var a=kx(e,o,r.get(o),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(a&&(i.getViewOfComponentModel(a).group.traverse(function(e){var i=On(e).tooltipConfig;if(i&&i.name===t.name)return n=e,!0}),n))return{componentMainType:o,componentIndex:a.componentIndex,el:n}}}(n,e,i);if(a){var s=a.el.getBoundingRect().clone();s.applyTransform(a.el.transform),this._tryShow({offsetX:s.x+s.width/2,offsetY:s.y+s.height/2,target:a.el,position:n.position,positionDefault:"bottom"},r)}else if(n.tooltip&&null!=n.x&&null!=n.y)tnn.x=n.x,tnn.y=n.y,tnn.update(),On(tnn).tooltipConfig={name:null,option:n.tooltip},this._tryShow({offsetX:n.x,offsetY:n.y,target:tnn},r);else if(o)this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,dataByCoordSys:o,tooltipOption:n.tooltipOption},r);else if(null!=n.seriesIndex){if(this._manuallyAxisShowTip(t,e,i,n))return;var l=Jm(n,e),h=l.point[0],u=l.point[1];null!=h&&null!=u&&this._tryShow({offsetX:h,offsetY:u,target:l.el,position:n.position,positionDefault:"bottom"},r)}else null!=n.x&&null!=n.y&&(i.dispatchAction({type:"updateAxisPointer",x:n.x,y:n.y}),this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,target:i.getZr().findHover(n.x,n.y).target},r))}},e.prototype.manuallyHideTip=function(t,e,i,n){var r=this._tooltipContent;this._tooltipModel&&r.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,n.from!==this.uid&&this._hide(tna(n,i))},e.prototype._manuallyAxisShowTip=function(t,e,i,n){var r=n.seriesIndex,o=n.dataIndex,a=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=r&&null!=o&&null!=a){var s=e.getSeriesByIndex(r);if(s&&"axis"===tno([s.getData().getItemModel(o),s,(s.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return i.dispatchAction({type:"updateAxisPointer",seriesIndex:r,dataIndex:o,position:n.position}),!0}},e.prototype._tryShow=function(t,e){var i=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var n,r,o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(i){if("legend"===On(i).ssrType)return;this._lastDataByCoordSys=null,BE(i,function(t){return null!=On(t).dataIndex?(n=t,!0):null!=On(t).tooltipConfig?(r=t,!0):void 0},!0),n?this._showSeriesItemTooltip(t,n,e):r?this._showComponentItemTooltip(t,r,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},e.prototype._showOrMove=function(t,e){var i=t.get("showDelay");e=TE(e,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(e,i):e()},e.prototype._showAxisTooltip=function(t,e){var i=this._ecModel,n=this._tooltipModel,r=[e.offsetX,e.offsetY],o=tno([e.tooltipOption],n),a=this._renderMode,s=[],l=VS("section",{blocks:[],noHeader:!0}),h=[],u=new VA;T_(t,function(t){T_(t.dataByAxis,function(t){var e=i.getComponent(t.axisDim+"Axis",t.axisIndex),r=t.value;if(e&&null!=r){var o=Q7(r,e.axis,i,t.seriesDataIndices,t.valueLabelOpt),c=VS("section",{header:o,noHeader:!TX(o),sortBlocks:!0,blocks:[]});l.blocks.push(c),T_(t.seriesDataIndices,function(l){var d=i.getSeriesByIndex(l.seriesIndex),p=l.dataIndexInside,f=d.getDataParams(p);if(!(f.dataIndex<0)){f.axisDim=t.axisDim,f.axisIndex=t.axisIndex,f.axisType=t.axisType,f.axisId=t.axisId,f.axisValue=$A(e.axis,{value:r}),f.axisValueLabel=o,f.marker=u.makeTooltipMarker("item",NE(f.color),a);var g=HK(d.formatTooltip(p,!0,null)),m=g.frag;if(m){var y=tno([d],n).get("valueFormatter");c.blocks.push(y?Tw({valueFormatter:y},m):m)}g.text&&h.push(g.text),s.push(f)}})}})}),l.blocks.reverse(),h.reverse();var c=e.position,d=VM(l,u,a,o.get("order"),i.get("useUTC"),o.get("textStyle"));d&&h.unshift(d);var p="richText"===a?"\n\n":"<br/>",f=h.join(p);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(t,s)?this._updatePosition(o,c,r[0],r[1],this._tooltipContent,s):this._showTooltipContent(o,f,s,Math.random()+"",r[0],r[1],c,null,u)})},e.prototype._showSeriesItemTooltip=function(t,e,i){var n=this._ecModel,r=On(e),o=r.seriesIndex,a=n.getSeriesByIndex(o),s=r.dataModel||a,l=r.dataIndex,h=r.dataType,u=s.getData(h),c=this._renderMode,d=t.positionDefault,p=tno([u.getItemModel(l),s,a&&(a.coordinateSystem||{}).model],this._tooltipModel,d?{position:d}:null),f=p.get("trigger");if(null==f||"item"===f){var g=s.getDataParams(l,h),m=new VA;g.marker=m.makeTooltipMarker("item",NE(g.color),c);var y=HK(s.formatTooltip(l,!1,h)),w=p.get("order"),b=p.get("valueFormatter"),x=y.frag,S=x?VM(b?Tw({valueFormatter:b},x):x,m,c,w,n.get("useUTC"),p.get("textStyle")):y.text,C="item_"+s.name+"_"+l;this._showOrMove(p,function(){this._showTooltipContent(p,S,g,C,t.offsetX,t.offsetY,t.position,t.target,m)}),i({type:"showTip",dataIndexInside:l,dataIndex:u.getRawIndex(l),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,e,i){var n="html"===this._renderMode,r=On(e),o=r.tooltipConfig.option||{},a=o.encodeHTMLContent;if(TO(o)){var s=o;o={content:s,formatter:s},a=!0}a&&n&&o.content&&((o=Tm(o)).content=I_(o.content));var l=[o],h=this._ecModel.getComponent(r.componentMainType,r.componentIndex);h&&l.push(h),l.push({formatter:o.content});var u=t.positionDefault,c=tno(l,this._tooltipModel,u?{position:u}:null),d=c.get("content"),p=Math.random()+"",f=new VA;this._showOrMove(c,function(){var i=Tm(c.get("formatterParams")||{});this._showTooltipContent(c,d,i,p,t.offsetX,t.offsetY,t.position,e,f)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,e,i,n,r,o,a,s,l){if(this._ticket="",t.get("showContent")&&t.get("show")){var h=this._tooltipContent;h.setEnterable(t.get("enterable"));var u=t.get("formatter");a=a||t.get("position");var c=e,d=this._getNearestPoint([r,o],i,t.get("trigger"),t.get("borderColor")).color;if(u){if(TO(u)){var p=t.ecModel.get("useUTC"),f=Tk(i)?i[0]:i,g=f&&f.axisType&&f.axisType.indexOf("time")>=0;c=u,g&&(c=Ns(f.axisValue,c,p)),c=NR(c,i,!0)}else if(TD(u)){var m=TE(function(e,n){e===this._ticket&&(h.setContent(n,l,t,d,a),this._updatePosition(t,a,r,o,h,i,s))},this);this._ticket=n,c=u(i,n,m)}else c=u}h.setContent(c,l,t,d,a),h.show(t,d),this._updatePosition(t,a,r,o,h,i,s)}},e.prototype._getNearestPoint=function(t,e,i,n){return"axis"===i||Tk(e)?{color:n||("html"===this._renderMode?"#fff":"none")}:Tk(e)?void 0:{color:n||e.color||e.borderColor}},e.prototype._updatePosition=function(t,e,i,n,r,o,a){var s=this._api.getWidth(),l=this._api.getHeight();e=e||t.get("position");var h=r.getSize(),u=t.get("align"),c=t.get("verticalAlign"),d=a&&a.getBoundingRect().clone();if(a&&d.applyTransform(a.transform),TD(e)&&(e=e([i,n],o,r.el,d,{viewSize:[s,l],contentSize:h.slice()})),Tk(e))i=AZ(e[0],s),n=AZ(e[1],l);else if(TN(e)){var p=e;p.width=h[0],p.height=h[1];var f=NP(p,{width:s,height:l});i=f.x,n=f.y,u=null,c=null}else if(TO(e)&&a){var g=function(t,e,i,n){var r=i[0],o=i[1],a=Math.ceil(Math.SQRT2*n)+8,s=0,l=0,h=e.width,u=e.height;switch(t){case"inside":s=e.x+h/2-r/2,l=e.y+u/2-o/2;break;case"top":s=e.x+h/2-r/2,l=e.y-o-a;break;case"bottom":s=e.x+h/2-r/2,l=e.y+u+a;break;case"left":s=e.x-r-a,l=e.y+u/2-o/2;break;case"right":s=e.x+h+a,l=e.y+u/2-o/2}return[s,l]}(e,d,h,t.get("borderWidth"));i=g[0],n=g[1]}else{var m,y,w,b,x,S,C,g=(m=i,y=n,w=u?null:20,b=c?null:20,S=(x=r.getSize())[0],C=x[1],null!=w&&(m+S+w+2>s?m-=S+w:m+=w),null!=b&&(y+C+b>l?y-=C+b:y+=b),[m,y]);i=g[0],n=g[1]}if(u&&(i-=tns(u)?h[0]/2:"right"===u?h[0]:0),c&&(n-=tns(c)?h[1]/2:"bottom"===c?h[1]:0),tiJ(t)){var _,M,T,I,R,g=(_=i,M=n,I=(T=r.getSize())[0],R=T[1],_=Math.min(_+I,s)-I,M=Math.min(M+R,l)-R,[_=Math.max(_,0),M=Math.max(M,0)]);i=g[0],n=g[1]}r.moveTo(i,n)},e.prototype._updateContentNotChangedOnAxis=function(t,e){var i=this._lastDataByCoordSys,n=this._cbParamsList,r=!!i&&i.length===t.length;return r&&T_(i,function(i,o){var a=i.dataByAxis||[],s=(t[o]||{}).dataByAxis||[];(r=r&&a.length===s.length)&&T_(a,function(t,i){var o=s[i]||{},a=t.seriesDataIndices||[],l=o.seriesDataIndices||[];(r=r&&t.value===o.value&&t.axisType===o.axisType&&t.axisId===o.axisId&&a.length===l.length)&&T_(a,function(t,e){var i=l[e];r=r&&t.seriesIndex===i.seriesIndex&&t.dataIndex===i.dataIndex}),n&&T_(t.seriesDataIndices,function(t){var i=t.seriesIndex,o=e[i],a=n[i];o&&a&&a.data!==o.data&&(r=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=e,!!r},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,e){!M9.node&&e.getDom()&&(V3(this,"_updatePosition"),this._tooltipContent.dispose(),Jf("itemTooltip",e))},e.type="tooltip",e}(Vj);function tno(t,e,i){var n,r=e.ecModel;i?(n=new L2(i,r,r),n=new L2(e.option,n,r)):n=e;for(var o=t.length-1;o>=0;o--){var a=t[o];a&&(a instanceof L2&&(a=a.get("tooltip",!0)),TO(a)&&(a={formatter:a}),a&&(n=new L2(a,n,r)))}return n}function tna(t,e){return t.dispatchAction||TE(e.dispatchAction,e)}function tns(t){return"center"===t||"middle"===t}var tnl={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},tnh=function(){function t(t){null==(this._condVal=TO(t)?new RegExp(t):"[object RegExp]"===To.call(t)?t:null)&&Hi("")}return t.prototype.evaluate=function(t){var e=typeof t;return TO(e)?this._condVal.test(t):!!TL(e)&&this._condVal.test(t+"")},t}(),tnu=function(){function t(){}return t.prototype.evaluate=function(){return this.value},t}(),tnc=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},t}(),tnd=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},t}(),tnp=function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t}(),tnf=function(){function t(){}return t.prototype.evaluate=function(){for(var t=!!this.valueParser,e=(0,this.getValue)(this.valueGetterParam),i=t?this.valueParser(e):null,n=0;n<this.subCondList.length;n++)if(!this.subCondList[n].evaluate(t?i:e))return!1;return!0},t}();function tng(t,e){if(!0===t||!1===t){var i,n,r,o=new tnu;return o.value=t,o}if(TN(t)&&!TC(t)||Hi(""),t.and)return tnm("and",t,e);if(t.or)return tnm("or",t,e);if(t.not){return TN(i=n=t.not)&&!TC(i)||Hi(""),(r=new tnp).child=tng(n,e),r.child||Hi(""),r}return function(t,e){for(var i=e.prepareGetValue(t),n=[],r=TR(t),o=t.parser,a=o?H2.get(o):null,s=0;s<r.length;s++){var l=r[s];if(!("parser"===l||e.valueGetterAttrMap.get(l))){var h=T2(tnl,l)?tnl[l]:l,u=t[l],c=a?a(u):u,d=("eq"===h||"ne"===h?new H6("eq"===h,c):T2(H5,h)?new H3(h,c):null)||"reg"===h&&new tnh(c);d||Hi(""),n.push(d)}}n.length||Hi("");var p=new tnf;return p.valueGetterParam=i,p.valueParser=a,p.getValue=e.getValue,p.subCondList=n,p}(t,e)}function tnm(t,e,i){var n=e[t];Tk(n)||Hi(""),n.length||Hi("");var r="and"===t?new tnc:new tnd;return r.children=TM(n,function(t){return tng(t,i)}),r.children.length||Hi(""),r}var tny=function(){function t(t,e){this._cond=tng(t,e)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t}(),tnv={type:"echarts:filter",transform:function(t){for(var e,i=t.upstream,n=new tny(t.config,{valueGetterAttrMap:TQ({dimension:!0}),prepareGetValue:function(t){var e=t.dimension;T2(t,"dimension")||Hi("");var n=i.getDimensionInfo(e);return n||Hi(""),{dimIdx:n.index}},getValue:function(t){return i.retrieveValueFromItem(e,t.dimIdx)}}),r=[],o=0,a=i.count();o<a;o++)e=i.getRawDataItem(o),n.evaluate()&&r.push(e);return{data:r}}},tnw={type:"echarts:sort",transform:function(t){var e=t.upstream,i=kr(t.config);i.length||Hi("");var n=[];T_(i,function(t){var i=t.dimension,r=t.order,o=t.parser,a=t.incomparable;null==i&&Hi(""),"asc"!==r&&"desc"!==r&&Hi(""),a&&"min"!==a&&"max"!==a&&Hi(""),"asc"!==r&&"desc"!==r&&Hi("");var s=e.getDimensionInfo(i);s||Hi("");var l=o?H2.get(o):null;o&&!l&&Hi(""),n.push({dimIdx:s.index,parser:l,comparator:new H4(r,a)})});var r=e.sourceFormat;r!==NX&&r!==N$&&Hi("");for(var o=[],a=0,s=e.count();a<s;a++)o.push(e.getRawDataItem(a));return o.sort(function(t,i){for(var r=0;r<n.length;r++){var o=n[r],a=e.retrieveValueFromItem(t,o.dimIdx),s=e.retrieveValueFromItem(i,o.dimIdx);o.parser&&(a=o.parser(a),s=o.parser(s));var l=o.comparator.evaluate(a,s);if(0!==l)return l}return 0}),{data:o}}},tnb={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},tnx={get:function(t,e,i){var n=Tm((tnb[t]||{})[e]);return i&&Tk(n)?n[n.length-1]:n}},tnS=Ke.mapVisual,tnC=Ke.eachVisual,tn_=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.stateList=["inRange","outOfRange"],i.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],i.layoutMode={type:"box",ignoreSize:!0},i.dataBound=[-1/0,1/0],i.targetVisuals={},i.controllerVisuals={},i}return M6(e,t),e.prototype.init=function(t,e,i){this.mergeDefaultAndTheme(t,i)},e.prototype.optionUpdated=function(t,e){var i=this.option;e||JE(i,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var e=this.stateList;t=TE(t,this),this.controllerVisuals=JR(this.option.controller,e,t),this.targetVisuals=JR(this.option.target,e,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries(function(t,i){e.push(i)}):e=kr(t),e},e.prototype.eachTargetSeries=function(t,e){T_(this.getTargetSeriesIndices(),function(i){var n=this.ecModel.getSeriesByIndex(i);n&&t.call(e,n)},this)},e.prototype.isTargetSeries=function(t){var e=!1;return this.eachTargetSeries(function(i){i===t&&(e=!0)}),e},e.prototype.formatValueText=function(t,e,i){var n,r=this.option,o=r.precision,a=this.dataBound,s=r.formatter;i=i||["<",">"],Tk(t)&&(t=t.slice(),n=!0);var l=e?t:n?[h(t[0]),h(t[1])]:h(t);if(TO(s))return s.replace("{value}",n?l[0]:l).replace("{value2}",n?l[1]:l);if(TD(s))return n?s(t[0],t[1]):s(t);if(!n)return l;return t[0]===a[0]?i[0]+" "+l[1]:t[1]===a[1]?i[1]+" "+l[0]:l[0]+" - "+l[1];function h(t){return t===a[0]?"min":t===a[1]?"max":(+t).toFixed(Math.min(o,20))}},e.prototype.resetExtent=function(){var t=this.option,e=AK([t.min,t.max]);this._dataExtent=e},e.prototype.getDataDimensionIndex=function(t){var e=this.option.dimension;if(null!=e)return t.getDimensionIndex(e);for(var i=t.dimensions,n=i.length-1;n>=0;n--){var r=i[n],o=t.getDimensionInfo(r);if(!o.isCalculationCoord)return o.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,e=this.option,i={inRange:e.inRange,outOfRange:e.outOfRange},n=e.target||(e.target={}),r=e.controller||(e.controller={});Ty(n,i),Ty(r,i);var o=this.isCategory();function a(i){Tk(e.color)&&!i.inRange&&(i.inRange={color:e.color.slice().reverse()}),i.inRange=i.inRange||{color:t.get("gradientColor")}}a.call(this,n),a.call(this,r),(function(t,e,i){var n=t[e],r=t[i];n&&!r&&(r=t[i]={},T_(n,function(t,e){if(Ke.isValidType(e)){var i=tnx.get(e,"inactive",o);null==i||(r[e]=i,"color"!==e||r.hasOwnProperty("opacity")||r.hasOwnProperty("colorAlpha")||(r.opacity=[0,0]))}}))}).call(this,n,"inRange","outOfRange"),(function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,i=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,n=this.get("inactiveColor"),r=this.getItemSymbol()||"roundRect";T_(this.stateList,function(a){var s=this.itemSize,l=t[a];l||(l=t[a]={color:o?n:[n]}),null==l.symbol&&(l.symbol=e&&Tm(e)||(o?r:[r])),null==l.symbolSize&&(l.symbolSize=i&&Tm(i)||(o?s[0]:[s[0],s[0]])),l.symbol=tnS(l.symbol,function(t){return"none"===t?r:t});var h=l.symbolSize;if(null!=h){var u=-1/0;tnC(h,function(t){t>u&&(u=t)}),l.symbolSize=tnS(h,function(t){return A$(t,[0,u],[0,s[0]],!0)})}},this)}).call(this,r)},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(NW),tnM=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.optionUpdated=function(e,i){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=20),(null==e[1]||isNaN(e[1]))&&(e[1]=140)},e.prototype._resetRange=function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):Tk(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),T_(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),e=AK((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},e.prototype.getValueState=function(t){var e=this.option.range,i=this.getExtent();return(e[0]<=i[0]||e[0]<=t)&&(e[1]>=i[1]||t<=e[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries(function(i){var n=[],r=i.getData();r.each(this.getDataDimensionIndex(r),function(e,i){t[0]<=e&&e<=t[1]&&n.push(i)},this),e.push({seriesId:i.id,dataIndex:n})},this),e},e.prototype.getVisualMeta=function(t){var e=tnT(this,"outOfRange",this.getExtent()),i=tnT(this,"inRange",this.option.range.slice()),n=[];function r(e,i){n.push({value:e,color:t(e,i)})}for(var o=0,a=0,s=i.length,l=e.length;a<l&&(!i.length||e[a]<=i[0]);a++)e[a]<i[o]&&r(e[a],"outOfRange");for(var h=1;o<s;o++,h=0)h&&n.length&&r(i[o],"outOfRange"),r(i[o],"inRange");for(var h=1;a<l;a++)(!i.length||i[i.length-1]<e[a])&&(h&&(n.length&&r(n[n.length-1].value,"outOfRange"),h=0),r(e[a],"outOfRange"));var u=n.length;return{stops:n,outerColors:[u?n[0].color:"transparent",u?n[u-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=L4(tn_.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(tn_);function tnT(t,e,i){if(i[0]===i[1])return i.slice();for(var n=(i[1]-i[0])/200,r=i[0],o=[],a=0;a<=200&&r<i[1];a++)o.push(r),r+=n;return o.push(i[1]),o}var tnI=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.autoPositionValues={left:1,right:1,top:1,bottom:1},i}return M6(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e},e.prototype.render=function(t,e,i,n){if(this.visualMapModel=t,!1===t.get("show")){this.group.removeAll();return}this.doRender(t,e,i,n)},e.prototype.renderBackground=function(t){var e=this.visualMapModel,i=TG(e.get("padding")||0),n=t.getBoundingRect();t.add(new DK({z2:-1,silent:!0,shape:{x:n.x-i[3],y:n.y-i[0],width:n.width+i[3]+i[1],height:n.height+i[0]+i[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,e,i){var n=(i=i||{}).forceState,r=this.visualMapModel,o={};if("color"===e){var a=r.get("contentColor");o.color=a}function s(t){return o[t]}function l(t,e){o[t]=e}var h=r.controllerVisuals[n||r.getValueState(t)];return T_(Ke.prepareVisualTypes(h),function(n){var r=h[n];i.convertOpacityToAlpha&&"opacity"===n&&(n="colorAlpha",r=h.__alphaForOpacity),Ke.dependsOn(n,e)&&r&&r.applyVisual(t,s,l)}),o[e]},e.prototype.positionGroup=function(t){var e=this.visualMapModel,i=this.api;NL(t,e.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},e.prototype.doRender=function(t,e,i,n){},e.type="visualMap",e}(Vj),tnR=[["left","right","width"],["top","bottom","height"]];function tnE(t,e,i){var n=t.option,r=n.align;if(null!=r&&"auto"!==r)return r;for(var o={width:e.getWidth(),height:e.getHeight()},a="horizontal"===n.orient?1:0,s=tnR[a],l=[0,null,10],h={},u=0;u<3;u++)h[tnR[1-a][u]]=l[u],h[s[u]]=2===u?i[0]:n[s[u]];var c=[["x","width",3],["y","height",0]][a],d=NP(h,o,n.padding);return s[(d.margin[c[2]]||0)+d[c[0]]+.5*d[c[1]]<.5*o[c[1]]?0:1]}function tnA(t,e){return T_(t||[],function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),t}var tnk=Math.min,tnD=Math.max,tnO=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i._shapes={},i._dataInterval=[],i._handleEnds=[],i._hoverLinkDataIndices=[],i}return M6(e,t),e.prototype.init=function(e,i){t.prototype.init.call(this,e,i),this._hoverLinkFromSeriesMouseOver=TE(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=TE(this._hideIndicator,this)},e.prototype.doRender=function(t,e,i,n){n&&"selectDataRange"===n.type&&n.from===this.uid||this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var i=t.get("text");this._renderEndsText(e,i,0),this._renderEndsText(e,i,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},e.prototype._renderEndsText=function(t,e,i){if(e){var n=e[1-i];n=null!=n?n+"":"";var r=this.visualMapModel,o=r.get("textGap"),a=r.itemSize,s=this._shapes.mainGroup,l=this._applyTransform([a[0]/2,0===i?-o:a[1]+o],s),h=this._applyTransform(0===i?"bottom":"top",s),u=this._orient,c=this.visualMapModel.textStyleModel;this.group.add(new D0({style:LN(c,{x:l[0],y:l[1],verticalAlign:"horizontal"===u?"middle":h,align:"horizontal"===u?h:"center",text:n})}))}},e.prototype._renderBar=function(t){var e=this.visualMapModel,i=this._shapes,n=e.itemSize,r=this._orient,o=this._useHandle,a=tnE(e,this.api,n),s=i.mainGroup=this._createBarGroup(a),l=new Aj;s.add(l),l.add(i.outOfRange=tnP()),l.add(i.inRange=tnP(null,o?tnN(this._orient):null,TE(this._dragHandle,this,"all",!1),TE(this._dragHandle,this,"all",!0))),l.setClipPath(new DK({shape:{x:0,y:0,width:n[0],height:n[1],r:3}}));var h=e.textStyleModel.getTextRect(""),u=tnD(h.width,h.height);o&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(e,s,0,n,u,r),this._createHandle(e,s,1,n,u,r)),this._createIndicator(e,s,n,u,r),t.add(s)},e.prototype._createHandle=function(t,e,i,n,r,o){var a=TE(this._dragHandle,this,i,!1),s=TE(this._dragHandle,this,i,!0),l=AO(t.get("handleSize"),n[0]),h=BW(t.get("handleIcon"),-l/2,-l/2,l,l,null,!0),u=tnN(this._orient);h.attr({cursor:u,draggable:!0,drift:a,ondragend:s,onmousemove:function(t){IO(t.event)}}),h.x=n[0]/2,h.useStyle(t.getModel("handleStyle").getItemStyle()),h.setStyle({strokeNoScale:!0,strokeFirst:!0}),h.style.lineWidth*=2,h.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),OU(h,!0),e.add(h);var c=new D0({cursor:u,draggable:!0,drift:a,onmousemove:function(t){IO(t.event)},ondragend:s,style:LN(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});c.ensureState("blur").style={opacity:.1},c.stateTransition={duration:200},this.group.add(c);var d=[l,0],p=this._shapes;p.handleThumbs[i]=h,p.handleLabelPoints[i]=d,p.handleLabels[i]=c},e.prototype._createIndicator=function(t,e,i,n,r){var o=AO(t.get("indicatorSize"),i[0]),a=BW(t.get("indicatorIcon"),-o/2,-o/2,o,o,null,!0);a.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var s=t.getModel("indicatorStyle").getItemStyle();if(a instanceof DU){var l=a.style;a.useStyle(Tw({image:l.image,x:l.x,y:l.y,width:l.width,height:l.height},s))}else a.useStyle(s);e.add(a);var h=new D0({silent:!0,invisible:!0,style:LN(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});this.group.add(h);var u=[("horizontal"===r?n/2:6)+i[0]/2,0],c=this._shapes;c.indicator=a,c.indicatorLabel=h,c.indicatorLabelPoint=u,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,e,i,n){if(this._useHandle){if(this._dragging=!e,!e){var r=this._applyTransform([i,n],this._shapes.mainGroup,!0);this._updateInterval(t,r[1]),this._hideIndicator(),this._updateView()}!this.visualMapModel.get("realtime")===e&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?this._hovering||this._clearHoverLinkToSeries():tnL(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),i=t.getExtent(),n=[0,t.itemSize[1]];this._handleEnds=[A$(e[0],i,n,!0),A$(e[1],i,n,!0)]},e.prototype._updateInterval=function(t,e){e=e||0;var i=this.visualMapModel,n=this._handleEnds,r=[0,i.itemSize[1]];$Y(e,n,r,t,0);var o=i.getExtent();this._dataInterval=[A$(n[0],r,o,!0),A$(n[1],r,o,!0)]},e.prototype._updateView=function(t){var e=this.visualMapModel,i=e.getExtent(),n=this._shapes,r=[0,e.itemSize[1]],o=t?r:this._handleEnds,a=this._createBarVisual(this._dataInterval,i,o,"inRange"),s=this._createBarVisual(i,i,r,"outOfRange");n.inRange.setStyle({fill:a.barColor}).setShape("points",a.barPoints),n.outOfRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),this._updateHandle(o,a)},e.prototype._createBarVisual=function(t,e,i,n){var r={forceState:n,convertOpacityToAlpha:!0},o=this._makeColorGradient(t,r),a=[this.getControllerVisual(t[0],"symbolSize",r),this.getControllerVisual(t[1],"symbolSize",r)],s=this._createBarPoints(i,a);return{barColor:new P3(0,0,0,1,o),barPoints:s,handlesColor:[o[0].color,o[o.length-1].color]}},e.prototype._makeColorGradient=function(t,e){var i=[],n=(t[1]-t[0])/100;i.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var r=1;r<100;r++){var o=t[0]+n*r;if(o>t[1])break;i.push({color:this.getControllerVisual(o,"color",e),offset:r/100})}return i.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),i},e.prototype._createBarPoints=function(t,e){var i=this.visualMapModel.itemSize;return[[i[0]-e[0],t[0]],[i[0],t[0]],[i[0],t[1]],[i[0]-e[1],t[1]]]},e.prototype._createBarGroup=function(t){var e=this._orient,i=this.visualMapModel.get("inverse");return new Aj("horizontal"!==e||i?"horizontal"===e&&i?{scaleX:"bottom"===t?-1:1,rotation:-Math.PI/2}:"vertical"!==e||i?{scaleX:"left"===t?1:-1}:{scaleX:"left"===t?1:-1,scaleY:-1}:{scaleX:"bottom"===t?1:-1,rotation:Math.PI/2})},e.prototype._updateHandle=function(t,e){if(this._useHandle){var i=this._shapes,n=this.visualMapModel,r=i.handleThumbs,o=i.handleLabels,a=n.itemSize,s=n.getExtent();T_([0,1],function(l){var h=r[l];h.setStyle("fill",e.handlesColor[l]),h.y=t[l];var u=A$(t[l],[0,a[1]],s,!0),c=this.getControllerVisual(u,"symbolSize");h.scaleX=h.scaleY=c/a[0],h.x=a[0]-c/2;var d=Lb(i.handleLabelPoints[l],Lw(h,this.group));o[l].setStyle({x:d[0],y:d[1],text:n.formatValueText(this._dataInterval[l]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",i.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,e,i,n){var r=this.visualMapModel,o=r.getExtent(),a=r.itemSize,s=[0,a[1]],l=this._shapes,h=l.indicator;if(h){h.attr("invisible",!1);var u=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0}),c=this.getControllerVisual(t,"symbolSize"),d=A$(t,o,s,!0),p=a[0]-c/2,f={x:h.x,y:h.y};h.y=d,h.x=p;var g=Lb(l.indicatorLabelPoint,Lw(h,this.group)),m=l.indicatorLabel;m.attr("invisible",!1);var y=this._applyTransform("left",l.mainGroup),w="horizontal"===this._orient;m.setStyle({text:(i||"")+r.formatValueText(e),verticalAlign:w?y:"middle",align:w?"center":y});var b={x:p,y:d,style:{fill:u}},x={style:{x:g[0],y:g[1]}};if(r.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var S={duration:100,easing:"cubicInOut",additive:!0};h.x=f.x,h.y=f.y,h.animateTo(b,S),m.animateTo(x,S)}else h.attr(b),m.attr(x);this._firstShowIndicator=!1;var C=this._shapes.handleLabels;if(C)for(var _=0;_<C.length;_++)this.api.enterBlur(C[_])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var i=t.visualMapModel.itemSize,n=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);n[1]=tnk(tnD(0,n[1]),i[1]),t._doHoverLinkToSeries(n[1],0<=n[0]&&n[0]<=i[0])}}).on("mouseout",function(){t._hovering=!1,t._dragging||t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,e){var i=this.visualMapModel,n=i.itemSize;if(i.option.hoverLink){var r,o,a=[0,n[1]],s=i.getExtent();t=tnk(tnD(a[0],t),a[1]);var l=(r=6,(o=i.get("hoverLinkDataSize"))&&(r=A$(o,s,a,!0)/2),r),h=[t-l,t+l],u=A$(t,a,s,!0),c=[A$(h[0],a,s,!0),A$(h[1],a,s,!0)];h[0]<a[0]&&(c[0]=-1/0),h[1]>a[1]&&(c[1]=1/0),e&&(c[0]===-1/0?this._showIndicator(u,c[1],"< ",l):c[1]===1/0?this._showIndicator(u,c[0],"> ",l):this._showIndicator(u,u," ",l));var d=this._hoverLinkDataIndices,p=[];(e||tnL(i))&&(p=this._hoverLinkDataIndices=i.findTargetDataIndices(c));var f=function(t,e){var i={},n={};return r(t||[],i),r(e||[],n,i),[o(i),o(n)];function r(t,e,i){for(var n=0,r=t.length;n<r;n++){var o=kc(t[n].seriesId,null);if(null==o)return;for(var a=kr(t[n].dataIndex),s=i&&i[o],l=0,h=a.length;l<h;l++){var u=a[l];s&&s[u]?s[u]=null:(e[o]||(e[o]={}))[u]=1}}}function o(t,e){var i=[];for(var n in t)if(t.hasOwnProperty(n)&&null!=t[n]){if(e)i.push(+n);else{var r=o(t[n],!0);r.length&&i.push({seriesId:n,dataIndex:r})}}return i}}(d,p);this._dispatchHighDown("downplay",tnA(f[0],i)),this._dispatchHighDown("highlight",tnA(f[1],i))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){if(BE(t.target,function(t){var i=On(t);if(null!=i.dataIndex)return e=i,!0},!0),e){var e,i=this.ecModel.getSeriesByIndex(e.seriesIndex),n=this.visualMapModel;if(n.isTargetSeries(i)){var r=i.getData(e.dataType),o=r.getStore().get(n.getDataDimensionIndex(r),e.dataIndex);isNaN(o)||this._showIndicator(o,o)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var i=0;i<e.length;i++)this.api.leaveBlur(e[i])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",tnA(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,e,i,n){var r=Lw(e,n?null:this.group);return Tk(t)?Lb(t,r,i):Lx(t,r,i)},e.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(tnI);function tnP(t,e,i,n){return new PF({shape:{points:t},draggable:!!i,cursor:e,drift:i,onmousemove:function(t){IO(t.event)},ondragend:n})}function tnL(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function tnN(t){return"vertical"===t?"ns-resize":"ew-resize"}var tnH={type:"selectDataRange",event:"dataRangeSelected",update:"update"},tnV=function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(e){e.setSelected(t.selected)})},tnB=[{createOnAllSeries:!0,reset:function(t,e){var i=[];return e.eachComponent("visualMap",function(e){var n,r,o,a,s,l=t.pipelineContext;!e.isTargetSeries(t)||l&&l.large||i.push((n=e.stateList,r=e.targetVisuals,o=TE(e.getValueState,e),a=e.getDataDimensionIndex(t.getData()),s={},T_(n,function(t){var e=Ke.prepareVisualTypes(r[t]);s[t]=e}),{progress:function(t,e){function i(t){return B_(e,h,t)}function n(t,i){BT(e,h,t,i)}null!=a&&(l=e.getDimensionIndex(a));for(var l,h,u=e.getStore();null!=(h=t.next());){var c=e.getRawDataItem(h);if(!c||!1!==c.visualMap)for(var d=null!=a?u.get(l,h):h,p=o(d),f=r[p],g=s[p],m=0,y=g.length;m<y;m++){var w=g[m];f[w]&&f[w].applyVisual(d,i,n)}}}}))}),i}},{createOnAllSeries:!0,reset:function(t,e){var i=t.getData(),n=[];e.eachComponent("visualMap",function(e){if(e.isTargetSeries(t)){var r=e.getVisualMeta(TE(tnF,null,t,e))||{stops:[],outerColors:[]},o=e.getDataDimensionIndex(i);o>=0&&(r.dimension=o,n.push(r))}}),t.getData().setVisual("visualMeta",n)}}];function tnF(t,e,i,n){for(var r=e.targetVisuals[n],o=Ke.prepareVisualTypes(r),a={color:BM(t.getData(),"color")},s=0,l=o.length;s<l;s++){var h=o[s],u=r["opacity"===h?"__alphaForOpacity":h];u&&u.applyVisual(i,c,d)}return a.color;function c(t){return a[t]}function d(t,e){a[t]=e}}function tnW(t){var e=t&&t.visualMap;Tk(e)||(e=e?[e]:[]),T_(e,function(t){if(t){tnz(t,"splitList")&&!tnz(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&Tk(e)&&T_(e,function(t){TN(t)&&(tnz(t,"start")&&!tnz(t,"min")&&(t.min=t.start),tnz(t,"end")&&!tnz(t,"max")&&(t.max=t.end))})}})}function tnz(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var tnj=!1;function tnU(t){tnj||(tnj=!0,t.registerSubTypeDefaulter("visualMap",function(t){return t.categories||(t.pieces?t.pieces.length>0:t.splitNumber>0)&&!t.calculable?"piecewise":"continuous"}),t.registerAction(tnH,tnV),T_(tnB,function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)}),t.registerPreprocessor(tnW))}function tnG(t){t.registerComponentModel(tnM),t.registerComponentView(tnO),tnU(t)}var tnY=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i._pieceList=[],i}return M6(e,t),e.prototype.optionUpdated=function(e,i){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],tnX[this._mode].call(this,this._pieceList),this._resetSelected(e,i);var r=this.option.categories;this.resetVisual(function(t,e){"categories"===n?(t.mappingMethod="category",t.categories=Tm(r)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=TM(this._pieceList,function(t){return t=Tm(t),"inRange"!==e&&(t.visual=null),t}))})},e.prototype.completeVisualOption=function(){var e=this.option,i={},n=Ke.listVisualTypes(),r=this.isCategory();function o(t,e,i){return t&&t[e]&&t[e].hasOwnProperty(i)}T_(e.pieces,function(t){T_(n,function(e){t.hasOwnProperty(e)&&(i[e]=1)})}),T_(i,function(t,i){var n=!1;T_(this.stateList,function(t){n=n||o(e,t,i)||o(e.target,t,i)},this),n||T_(this.stateList,function(t){(e[t]||(e[t]={}))[i]=tnx.get(i,"inRange"===t?"active":"inactive",r)})},this),t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,e){var i=this.option,n=this._pieceList,r=(e?i:t).selected||{};if(i.selected=r,T_(n,function(t,e){var i=this.getSelectedMapKey(t);r.hasOwnProperty(i)||(r[i]=!0)},this),"single"===i.selectedMode){var o=!1;T_(n,function(t,e){var i=this.getSelectedMapKey(t);r[i]&&(o?r[i]=!1:o=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return"categories"===this._mode?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=Tm(t)},e.prototype.getValueState=function(t){var e=Ke.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[],i=this._pieceList;return this.eachTargetSeries(function(n){var r=[],o=n.getData();o.each(this.getDataDimensionIndex(o),function(e,n){Ke.findPieceIndex(e,i)===t&&r.push(n)},this),e.push({seriesId:n.id,dataIndex:r})},this),e},e.prototype.getRepresentValue=function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var i=t.interval||[];e=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return e},e.prototype.getVisualMeta=function(t){if(!this.isCategory()){var e=[],i=["",""],n=this,r=this._pieceList.slice();if(r.length){var o=r[0].interval[0];o!==-1/0&&r.unshift({interval:[-1/0,o]}),(o=r[r.length-1].interval[1])!==1/0&&r.push({interval:[o,1/0]})}else r.push({interval:[-1/0,1/0]});var a=-1/0;return T_(r,function(t){var e=t.interval;e&&(e[0]>a&&s([a,e[0]],"outOfRange"),s(e.slice()),a=e[1])},this),{stops:e,outerColors:i}}function s(r,o){var a=n.getRepresentValue({interval:r});o||(o=n.getValueState(a));var s=t(a,o);r[0]===-1/0?i[0]=s:r[1]===1/0?i[1]=s:e.push({value:r[0],color:s},{value:r[1],color:s})}},e.type="visualMap.piecewise",e.defaultOption=L4(tn_.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(tn_),tnX={splitNumber:function(t){var e=this.option,i=Math.min(e.precision,20),n=this.getExtent(),r=e.splitNumber;r=Math.max(parseInt(r,10),1),e.splitNumber=r;for(var o=(n[1]-n[0])/r;+o.toFixed(i)!==o&&i<5;)i++;e.precision=i,o=+o.toFixed(i),e.minOpen&&t.push({interval:[-1/0,n[0]],close:[0,0]});for(var a=0,s=n[0];a<r;s+=o,a++){var l=a===r-1?n[1]:s+o;t.push({interval:[s,l],close:[1,1]})}e.maxOpen&&t.push({interval:[n[1],1/0],close:[0,0]}),A8(t),T_(t,function(t,e){t.index=e,t.text=this.formatValueText(t.interval)},this)},categories:function(t){var e=this.option;T_(e.categories,function(e){t.push({text:this.formatValueText(e,!0),value:e})},this),tn$(e,t)},pieces:function(t){var e=this.option;T_(e.pieces,function(e,i){TN(e)||(e={value:e});var n={text:"",index:i};if(null!=e.label&&(n.text=e.label),e.hasOwnProperty("value")){var r=n.value=e.value;n.interval=[r,r],n.close=[1,1]}else{for(var o=n.interval=[],a=n.close=[0,0],s=[1,0,1],l=[-1/0,1/0],h=[],u=0;u<2;u++){for(var c=[["gte","gt","min"],["lte","lt","max"]][u],d=0;d<3&&null==o[u];d++)o[u]=e[c[d]],a[u]=s[d],h[u]=2===d;null==o[u]&&(o[u]=l[u])}h[0]&&o[1]===1/0&&(a[0]=0),h[1]&&o[0]===-1/0&&(a[1]=0),o[0]===o[1]&&a[0]&&a[1]&&(n.value=o[0])}n.visual=Ke.retrieveVisuals(e),t.push(n)},this),tn$(e,t),A8(t),T_(t,function(t){var e=t.close,i=[["<",""][e[1]],[">",""][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,i)},this)}};function tn$(t,e){var i=t.inverse;("vertical"===t.orient?!i:i)&&e.reverse()}var tnZ=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return M6(e,t),e.prototype.doRender=function(){var t=this.group;t.removeAll();var e=this.visualMapModel,i=e.get("textGap"),n=e.textStyleModel,r=n.getFont(),o=n.getTextColor(),a=this._getItemAlign(),s=e.itemSize,l=this._getViewData(),h=l.endsText,u=TW(e.get("showLabel",!0),!h);h&&this._renderEndsText(t,h[0],s,u,a),T_(l.viewPieceList,function(n){var l=n.piece,h=new Aj;h.onclick=TE(this._onItemClick,this,l),this._enableHoverLink(h,n.indexInModelPieceList);var c=e.getRepresentValue(l);if(this._createItemSymbol(h,c,[0,0,s[0],s[1]]),u){var d=this.visualMapModel.getValueState(c);h.add(new D0({style:{x:"right"===a?-i:s[0]+i,y:s[1]/2,text:l.text,verticalAlign:"middle",align:a,font:r,fill:o,opacity:"outOfRange"===d?.5:1}}))}t.add(h)},this),h&&this._renderEndsText(t,h[1],s,u,a),NO(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,e){var i=this;t.on("mouseover",function(){return n("highlight")}).on("mouseout",function(){return n("downplay")});var n=function(t){var n=i.visualMapModel;n.option.hoverLink&&i.api.dispatchAction({type:t,batch:tnA(n.findTargetDataIndices(e),n)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return tnE(t,this.api,t.itemSize);var i=e.align;return i&&"auto"!==i||(i="left"),i},e.prototype._renderEndsText=function(t,e,i,n,r){if(e){var o=new Aj,a=this.visualMapModel.textStyleModel;o.add(new D0({style:LN(a,{x:n?"right"===r?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:n?r:"center",text:e})})),t.add(o)}},e.prototype._getViewData=function(){var t=this.visualMapModel,e=TM(t.getPieceList(),function(t,e){return{piece:t,indexInModelPieceList:e}}),i=t.get("text"),n=t.get("orient"),r=t.get("inverse");return("horizontal"===n?r:!r)?e.reverse():i&&(i=i.slice().reverse()),{viewPieceList:e,endsText:i}},e.prototype._createItemSymbol=function(t,e,i){t.add(BW(this.getControllerVisual(e,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(e,"color")))},e.prototype._onItemClick=function(t){var e=this.visualMapModel,i=e.option,n=i.selectedMode;if(n){var r=Tm(i.selected),o=e.getSelectedMapKey(t);"single"===n||!0===n?(r[o]=!0,T_(r,function(t,e){r[e]=e===o})):r[o]=!r[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:r})}},e.type="visualMap.piecewise",e}(tnI);function tnq(t){t.registerComponentModel(tnY),t.registerComponentView(tnZ),tnU(t)}var tnK=["align","verticalAlign","width","height","fontSize"],tnQ=new AC,tnJ=kg(),tn0=kg();function tn1(t,e,i){for(var n=0;n<i.length;n++){var r=i[n];null!=e[r]&&(t[r]=e[r])}}var tn2=["x","y","rotation"],tn5=function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(t,e,i,n,r){var o,a=n.style,s=n.__hostTarget.textConfig||{},l=n.getComputedTransform(),h=n.getBoundingRect().plain();I1.applyTransform(h,h,l),l?tnQ.setLocalTransform(l):(tnQ.x=tnQ.y=tnQ.rotation=tnQ.originX=tnQ.originY=0,tnQ.scaleX=tnQ.scaleY=1),tnQ.rotation=DR(tnQ.rotation);var u=n.__hostTarget;if(u){o=u.getBoundingRect().plain();var c=u.getComputedTransform();I1.applyTransform(o,o,c)}var d=o&&u.getTextGuideLine();this._labelList.push({label:n,labelLine:d,seriesModel:i,dataIndex:t,dataType:e,layoutOption:r,computedLayoutOption:null,rect:h,hostRect:o,priority:o?o.width*o.height:0,defaultAttr:{ignore:n.ignore,labelGuideIgnore:d&&d.ignore,x:tnQ.x,y:tnQ.y,scaleX:tnQ.scaleX,scaleY:tnQ.scaleY,rotation:tnQ.rotation,style:{x:a.x,y:a.y,align:a.align,verticalAlign:a.verticalAlign,width:a.width,height:a.height,fontSize:a.fontSize},cursor:n.cursor,attachedPos:s.position,attachedRot:s.rotation}})},t.prototype.addLabelsOfSeries=function(t){var e=this;this._chartViewList.push(t);var i=t.__model,n=i.get("labelLayout");(TD(n)||TR(n).length)&&t.group.traverse(function(t){if(t.ignore)return!0;var r=t.getTextContent(),o=On(t);r&&!r.disableLabelLayout&&e._addLabel(o.dataIndex,o.dataType,i,r,n)})},t.prototype.updateLayoutConfig=function(t){for(var e=t.getWidth(),i=t.getHeight(),n=0;n<this._labelList.length;n++){var r=this._labelList[n],o=r.label,a=o.__hostTarget,s=r.defaultAttr,l=void 0;l=(l=TD(r.layoutOption)?r.layoutOption(function(t,e){var i=t.label,n=e&&e.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:i.style.align,verticalAlign:i.style.verticalAlign,labelLinePoints:function(t){if(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].slice());return e}}(n&&n.shape.points)}}(r,a)):r.layoutOption)||{},r.computedLayoutOption=l;var h=Math.PI/180;a&&a.setTextConfig({local:!1,position:null!=l.x||null!=l.y?null:s.attachedPos,rotation:null!=l.rotate?l.rotate*h:s.attachedRot,offset:[l.dx||0,l.dy||0]});var u=!1;if(null!=l.x?(o.x=AZ(l.x,e),o.setStyle("x",0),u=!0):(o.x=s.x,o.setStyle("x",s.style.x)),null!=l.y?(o.y=AZ(l.y,i),o.setStyle("y",0),u=!0):(o.y=s.y,o.setStyle("y",s.style.y)),l.labelLinePoints){var c=a.getTextGuideLine();c&&(c.setShape({points:l.labelLinePoints}),u=!1)}tnJ(o).needsUpdateLabelLine=u,o.rotation=null!=l.rotate?l.rotate*h:s.rotation,o.scaleX=s.scaleX,o.scaleY=s.scaleY;for(var d=0;d<tnK.length;d++){var p=tnK[d];o.setStyle(p,null!=l[p]?l[p]:s.style[p])}if(l.draggable){if(o.draggable=!0,o.cursor="move",a){var f=r.seriesModel;null!=r.dataIndex&&(f=r.seriesModel.getData(r.dataType).getItemModel(r.dataIndex)),o.on("drag",function(t,e){return function(){UA(t,e)}}(a,f.getModel("labelLine")))}}else o.off("drag"),o.cursor=s.cursor}},t.prototype.layout=function(t){var e=t.getWidth(),i=t.getHeight(),n=Zr(this._labelList),r=TI(n,function(t){return"shiftX"===t.layoutOption.moveOverlap}),o=TI(n,function(t){return"shiftY"===t.layoutOption.moveOverlap});Zo(r,"x","width",0,e,void 0),Za(o,0,i),Zs(TI(n,function(t){return t.layoutOption.hideOverlap}))},t.prototype.processLabelsOverall=function(){var t=this;T_(this._chartViewList,function(e){var i=e.__model,n=e.ignoreLabelLineUpdate,r=i.isAnimationEnabled();e.group.traverse(function(e){if(e.ignore&&!e.forceLabelAnimation)return!0;var o=!n,a=e.getTextContent();!o&&a&&(o=tnJ(a).needsUpdateLabelLine),o&&t._updateLabelLine(e,i),r&&t._animateLabels(e,i)})})},t.prototype._updateLabelLine=function(t,e){var i=t.getTextContent(),n=On(t),r=n.dataIndex;if(i&&null!=r){var o=e.getData(n.dataType),a=o.getItemModel(r),s={},l=o.getItemVisual(r,"style");if(l){var h=o.getVisual("drawType");s.stroke=l[h]}var u=a.getModel("labelLine");UN(t,UH(a),s),UA(t,u)}},t.prototype._animateLabels=function(t,e){var i=t.getTextContent(),n=t.getTextGuideLine();if(i&&(t.forceLabelAnimation||!i.ignore&&!i.invisible&&!t.disableLabelAnimation&&!OJ(t))){var r=tnJ(i),o=r.oldLayout,a=On(t),s=a.dataIndex,l={x:i.x,y:i.y,rotation:i.rotation},h=e.getData(a.dataType);if(o){i.attr(o);var u=t.prevStates;u&&(Tx(u,"select")>=0&&i.attr(r.oldLayoutSelect),Tx(u,"emphasis")>=0&&i.attr(r.oldLayoutEmphasis)),OK(i,l,e,s)}else if(i.attr(l),!Lj(i).valueAnimation){var c=Tz(i.style.opacity,1);i.style.opacity=0,OQ(i,{style:{opacity:c}},e,s)}if(r.oldLayout=l,i.states.select){var d=r.oldLayoutSelect={};tn1(d,l,tn2),tn1(d,i.states.select,tn2)}if(i.states.emphasis){var p=r.oldLayoutEmphasis={};tn1(p,l,tn2),tn1(p,i.states.emphasis,tn2)}LG(i,s,h,e,e)}if(n&&!n.ignore&&!n.invisible){var r=tn0(n),o=r.oldLayout,f={points:n.shape.points};o?(n.attr({shape:o}),OK(n,{shape:f},e)):(n.setShape(f),n.style.strokePercent=0,OQ(n,{style:{strokePercent:1}},e)),r.oldLayout=f}},t}(),tn3=kg(),tn4=D_.CMD;function tn6(t,e){return 1e-5>Math.abs(t-e)}function tn8(t){var e,i,n,r,o,a=t.data,s=t.len(),l=[],h=0,u=0,c=0,d=0;function p(t,i){e&&e.length>2&&l.push(e),e=[t,i]}function f(t,i,n,r){tn6(t,n)&&tn6(i,r)||e.push(t,i,n,r,n,r)}for(var g=0;g<s;){var m=a[g++],y=1===g;switch(y&&(h=a[g],u=a[g+1],c=h,d=u,(m===tn4.L||m===tn4.C||m===tn4.Q)&&(e=[c,d])),m){case tn4.M:h=c=a[g++],u=d=a[g++],p(c,d);break;case tn4.L:f(h,u,i=a[g++],n=a[g++]),h=i,u=n;break;case tn4.C:e.push(a[g++],a[g++],a[g++],a[g++],h=a[g++],u=a[g++]);break;case tn4.Q:i=a[g++],n=a[g++],r=a[g++],o=a[g++],e.push(h+2/3*(i-h),u+2/3*(n-u),r+2/3*(i-r),o+2/3*(n-o),r,o),h=r,u=o;break;case tn4.A:var w=a[g++],b=a[g++],x=a[g++],S=a[g++],C=a[g++],_=a[g++]+C;g+=1;var M=!a[g++];i=Math.cos(C)*x+w,n=Math.sin(C)*S+b,y?p(c=i,d=n):f(h,u,i,n),h=Math.cos(_)*x+w,u=Math.sin(_)*S+b;for(var T=(M?-1:1)*Math.PI/2,I=C;M?I>_:I<_;I+=T){var R=M?Math.max(I+T,_):Math.min(I+T,_);!function(t,i,n,r,o,a){var s=4*Math.tan(Math.abs(i-t)/4)/3,l=i<t?-1:1,h=Math.cos(t),u=Math.sin(t),c=Math.cos(i),d=Math.sin(i),p=c*o+n,f=d*a+r,g=o*s*l,m=a*s*l;e.push(h*o+n-g*u,u*a+r+m*h,p+g*d,f-m*c,p,f)}(I,R,w,b,x,S)}break;case tn4.R:c=h=a[g++],d=u=a[g++],i=c+a[g++],n=d+a[g++],p(i,d),f(i,d,i,n),f(i,n,c,n),f(c,n,c,d),f(c,d,i,d);break;case tn4.Z:e&&f(h,u,c,d),h=c,u=d}}return e&&e.length>2&&l.push(e),l}function tn9(t,e,i){var n=Math.ceil(Math.sqrt(Math.abs(t[e]/t[1-e])*i)),r=Math.floor(i/n);0===r&&(r=1,n=i);for(var o=[],a=0;a<n;a++)o.push(r);var s=i-n*r;if(s>0)for(var a=0;a<s;a++)o[a%n]+=1;return o}function tn7(t,e,i){for(var n=t.r0,r=t.r,o=t.startAngle,a=Math.abs(t.endAngle-o),s=a*r,l=r-n,h=s>Math.abs(l),u=tn9([s,l],h?0:1,e),c=(h?a:l)/u.length,d=0;d<u.length;d++)for(var p=(h?l:a)/u[d],f=0;f<u[d];f++){var g={};h?(g.startAngle=o+c*d,g.endAngle=o+c*(d+1),g.r0=n+p*f,g.r=n+p*(f+1)):(g.startAngle=o+p*f,g.endAngle=o+p*(f+1),g.r0=n+c*d,g.r=n+c*(d+1)),g.clockwise=t.clockwise,g.cx=t.cx,g.cy=t.cy,i.push(g)}}function trt(t,e){var i=t[t.length-1];i&&i[0]===e[0]&&i[1]===e[1]||t.push(e)}function tre(t){var e=t.points,i=[],n=[];Di(e,i,n);var r=new I1(i[0],i[1],n[0]-i[0],n[1]-i[1]),o=r.width,a=r.height,s=r.x,l=r.y,h=new IY,u=new IY;return o>a?(h.x=u.x=s+o/2,h.y=l,u.y=l+a):(h.y=u.y=l+a/2,h.x=s,u.x=s+o),function(t,e,i){for(var n=t.length,r=[],o=0;o<n;o++){var a=t[o],s=t[(o+1)%n],l=function(t,e,i,n,r,o,a,s){var l=i-t,h=n-e,u=a-r,c=s-o,d=u*h-l*c;if(1e-6>Math.abs(d))return null;var p=((t-r)*c-u*(e-o))/d;return p<0||p>1?null:new IY(p*l+t,p*h+e)}(a[0],a[1],s[0],s[1],e.x,e.y,i.x,i.y);l&&r.push({projPt:function(t,e,i){var n=new IY;IY.sub(n,i,e),n.normalize();var r=new IY;return IY.sub(r,t,e),r.dot(n)}(l,e,i),pt:l,idx:o})}if(r.length<2)return[{points:t},{points:t}];r.sort(function(t,e){return t.projPt-e.projPt});var h=r[0],u=r[r.length-1];if(u.idx<h.idx){var c=h;h=u,u=c}for(var d=[h.pt.x,h.pt.y],p=[u.pt.x,u.pt.y],f=[d],g=[p],o=h.idx+1;o<=u.idx;o++)trt(f,t[o].slice());trt(f,p),trt(f,d);for(var o=u.idx+1;o<=h.idx+n;o++)trt(g,t[o%n].slice());return trt(g,d),trt(g,p),[{points:f},{points:g}]}(e,h,u)}function tri(t,e,i,n){if(1===i)n.push(e);else{var r=Math.floor(i/2),o=t(e);tri(t,o[0],r,n),tri(t,o[1],i-r,n)}return n}function trn(t,e){for(var i=t.length,n=t[i-2],r=t[i-1],o=[],a=0;a<e.length;)o[a++]=n,o[a++]=r;return o}function trr(t){for(var e=0,i=0,n=0,r=t.length,o=0,a=r-2;o<r;a=o,o+=2){var s=t[a],l=t[a+1],h=t[o],u=t[o+1],c=s*u-h*l;e+=c,i+=(s+h)*c,n+=(l+u)*c}return 0===e?[t[0]||0,t[1]||0]:[i/e/3,n/e/3,e]}function tro(t){return t.__isCombineMorphing}var tra="__mOriginal_";function trs(t,e,i){var n=tra+e,r=t[n]||t[e];t[n]||(t[n]=t[e]);var o=i.replace,a=i.after,s=i.before;t[e]=function(){var t,e=arguments;return s&&s.apply(this,e),t=o?o.apply(this,e):r.apply(this,e),a&&a.apply(this,e),t}}function trl(t,e){var i=tra+e;t[i]&&(t[e]=t[i],t[i]=null)}function trh(t,e){for(var i=0;i<t.length;i++)for(var n=t[i],r=0;r<n.length;){var o=n[r],a=n[r+1];n[r++]=e[0]*o+e[2]*a+e[4],n[r++]=e[1]*o+e[3]*a+e[5]}}function tru(t,e){var i=t.getUpdatedPathProxy(),n=e.getUpdatedPathProxy(),r=function(t,e){for(var i,n,r,o=[],a=[],s=0;s<Math.max(t.length,e.length);s++){var l=t[s],h=e[s],u=void 0,c=void 0;l?h?(u=(i=function(t,e){var i=t.length,n=e.length;if(i===n)return[t,e];for(var r=[],o=[],a=i<n?t:e,s=Math.min(i,n),l=Math.abs(n-i)/6,h=Math.ceil(l/((s-2)/6))+1,u=[a[0],a[1]],c=l,d=2;d<s;){var p=a[d-2],f=a[d-1],g=a[d++],m=a[d++],y=a[d++],w=a[d++],b=a[d++],x=a[d++];if(c<=0){u.push(g,m,y,w,b,x);continue}for(var S=Math.min(c,h-1)+1,C=1;C<=S;C++){var _=C/S;R_(p,g,y,b,_,r),R_(f,m,w,x,_,o),p=r[3],f=o[3],u.push(r[1],o[1],r[2],o[2],p,f),g=r[5],m=o[5],y=r[6],w=o[6]}c-=S-1}return a===t?[u,e]:[t,u]}(l,h))[0],c=i[1],n=u,r=c):(c=trn(r||l,l),u=l):(u=trn(n||h,h),c=h),o.push(u),a.push(c)}return[o,a]}(tn8(i),tn8(n)),o=r[0],a=r[1],s=t.getComputedTransform(),l=e.getComputedTransform();s&&trh(o,s),l&&trh(a,l),trs(e,"updateTransform",{replace:function(){this.transform=null}}),e.transform=null;var h=function(t,e,i,n){for(var r,o=[],a=0;a<t.length;a++){var s=t[a],l=e[a],h=trr(s),u=trr(l);null==r&&(r=h[2]<0!=u[2]<0);var c=[],d=[],p=0,f=1/0,g=[],m=s.length;r&&(s=function(t){for(var e=[],i=t.length,n=0;n<i;n+=2)e[n]=t[i-n-2],e[n+1]=t[i-n-1];return e}(s));for(var y=6*function(t,e,i,n){for(var r=(t.length-2)/6,o=1/0,a=0,s=t.length,l=s-2,h=0;h<r;h++){for(var u=6*h,c=0,d=0;d<s;d+=2){var p=0===d?u:(u+d-2)%l+2,f=t[p]-i[0],g=t[p+1]-i[1],m=e[d]-n[0],y=e[d+1]-n[1],w=m-f,b=y-g;c+=w*w+b*b}c<o&&(o=c,a=h)}return a}(s,l,h,u),w=m-2,b=0;b<w;b+=2){var x=(y+b)%w+2;c[b+2]=s[x]-h[0],c[b+3]=s[x+1]-h[1]}c[0]=s[y]-h[0],c[1]=s[y+1]-h[1];for(var S=n/10,C=-n/2;C<=n/2;C+=S){for(var _=Math.sin(C),M=Math.cos(C),T=0,b=0;b<s.length;b+=2){var I=c[b],R=c[b+1],E=l[b]-u[0],A=l[b+1]-u[1],k=E*M-A*_,D=E*_+A*M;g[b]=k,g[b+1]=D;var O=k-I,P=D-R;T+=O*O+P*P}if(T<f){f=T,p=C;for(var L=0;L<g.length;L++)d[L]=g[L]}}o.push({from:c,to:d,fromCp:h,toCp:u,rotation:-p})}return o}(o,a,0,Math.PI),u=[];trs(e,"buildPath",{replace:function(t){for(var i=e.__morphT,n=1-i,r=[],o=0;o<h.length;o++){var a=h[o],s=a.from,l=a.to,c=a.rotation*i,d=a.fromCp,p=a.toCp,f=Math.sin(c),g=Math.cos(c);Il(r,d,p,i);for(var m=0;m<s.length;m+=2){var y=s[m],w=s[m+1],b=l[m],x=l[m+1],S=y*n+b*i,C=w*n+x*i;u[m]=S*g-C*f+r[0],u[m+1]=S*f+C*g+r[1]}var _=u[0],M=u[1];t.moveTo(_,M);for(var m=2;m<s.length;){var b=u[m++],x=u[m++],T=u[m++],I=u[m++],R=u[m++],E=u[m++];_===b&&M===x&&T===R&&I===E?t.lineTo(R,E):t.bezierCurveTo(b,x,T,I,R,E),_=R,M=E}}}})}function trc(t,e,i){if(!t||!e)return e;var n=i.done,r=i.during;return tru(t,e),e.__morphT=0,e.animateTo({__morphT:1},Tb({during:function(t){e.dirtyShape(),r&&r(t)},done:function(){trl(e,"buildPath"),trl(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape(),n&&n()}},i)),e}function trd(t){var e=1/0,i=1/0,n=-1/0,r=-1/0,o=TM(t,function(t){var o=t.getBoundingRect(),a=t.getComputedTransform(),s=o.x+o.width/2+(a?a[4]:0),l=o.y+o.height/2+(a?a[5]:0);return e=Math.min(s,e),i=Math.min(l,i),n=Math.max(s,n),r=Math.max(l,r),[s,l]});return TM(o,function(o,a){return{cp:o,z:function(t,e,i,n,r,o){t=r===i?0:Math.round(32767*(t-i)/(r-i)),e=o===n?0:Math.round(32767*(e-n)/(o-n));for(var a,s=0,l=32768;l>0;l/=2){var h=0,u=0;(t&l)>0&&(h=1),(e&l)>0&&(u=1),s+=l*l*(3*h^u),0===u&&(1===h&&(t=l-1-t,e=l-1-e),a=t,t=e,e=a)}return s}(o[0],o[1],e,i,n,r),path:t[a]}}).sort(function(t,e){return t.z-e.z}).map(function(t){return t.path})}function trp(t){return function(t,e){var i,n=[],r=t.shape;switch(t.type){case"rect":!function(t,e,i){for(var n=t.width,r=t.height,o=n>r,a=tn9([n,r],o?0:1,e),s=o?"width":"height",l=o?"height":"width",h=o?"x":"y",u=o?"y":"x",c=t[s]/a.length,d=0;d<a.length;d++)for(var p=t[l]/a[d],f=0;f<a[d];f++){var g={};g[h]=d*c,g[u]=f*p,g[s]=c,g[l]=p,g.x+=t.x,g.y+=t.y,i.push(g)}}(r,e,n),i=DK;break;case"sector":tn7(r,e,n),i=PO;break;case"circle":tn7({r0:0,r:r.r,startAngle:0,endAngle:2*Math.PI,cx:r.cx,cy:r.cy},e,n),i=PO;break;default:var o=t.getComputedTransform(),a=o?Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1],o[2]*o[2]+o[3]*o[3])):1,s=TM(function(t,e){var i=tn8(t),n=[];e=e||1;for(var r=0;r<i.length;r++){var o=i[r],a=[],s=o[0],l=o[1];a.push(s,l);for(var h=2;h<o.length;){var u=o[h++],c=o[h++],d=o[h++],p=o[h++],f=o[h++],g=o[h++];!function t(e,i,n,r,o,a,s,l,h,u){if(tn6(e,n)&&tn6(i,r)&&tn6(o,s)&&tn6(a,l)){h.push(s,l);return}var c=2/u,d=c*c,p=s-e,f=l-i,g=Math.sqrt(p*p+f*f);p/=g,f/=g;var m=n-e,y=r-i,w=o-s,b=a-l,x=m*m+y*y,S=w*w+b*b;if(x<d&&S<d){h.push(s,l);return}var C=p*m+f*y,_=-p*w-f*b;if(x-C*C<d&&C>=0&&S-_*_<d&&_>=0){h.push(s,l);return}var M=[],T=[];R_(e,n,o,s,.5,M),R_(i,r,a,l,.5,T),t(M[0],T[0],M[1],T[1],M[2],T[2],M[3],T[3],h,u),t(M[4],T[4],M[5],T[5],M[6],T[6],M[7],T[7],h,u)}(s,l,u,c,d,p,f,g,a,e),s=f,l=g}n.push(a)}return n}(t.getUpdatedPathProxy(),a),function(t){return function(t){for(var e=[],i=0;i<t.length;)e.push([t[i++],t[i++]]);return e}(t)}),l=s.length;if(0===l)tri(tre,{points:s[0]},e,n);else if(l===e)for(var h=0;h<l;h++)n.push({points:s[h]});else{var u=0,c=TM(s,function(t){var e=[],i=[];Di(t,e,i);var n=(i[1]-e[1])*(i[0]-e[0]);return u+=n,{poly:t,area:n}});c.sort(function(t,e){return e.area-t.area});for(var d=e,h=0;h<l;h++){var p=c[h];if(d<=0)break;var f=h===l-1?d:Math.ceil(p.area/u*e);f<0||(tri(tre,{points:p.poly},f,n),d-=f)}}i=PF}if(!i)return function(t,e){for(var i=[],n=0;n<e;n++)i.push(Pp(t));return i}(t,e);for(var g=[],h=0;h<n.length;h++){var m=new i;m.setShape(n[h]),m.setStyle(t.style),m.z=t.z,m.z2=t.z2,m.zlevel=t.zlevel,g.push(m)}return g}(t.path,t.count)}function trf(){return{fromIndividuals:[],toIndividuals:[],count:0}}function trg(t,e){for(var i=[],n=t.length,r=0;r<n;r++)i.push({one:t[r],many:[]});for(var r=0;r<e.length;r++){var o=e[r].length,a=void 0;for(a=0;a<o;a++)i[a%n].many.push(e[r][a])}for(var s=0,r=n-1;r>=0;r--)if(!i[r].many.length){var l=i[s].many;if(l.length<=1){if(!s)return i;s=0}var o=l.length,h=Math.ceil(o/2);i[r].many=l.slice(h,o),i[s].many=l.slice(0,h),s++}return i}var trm={clone:function(t){for(var e=[],i=1-Math.pow(1-t.path.style.opacity,1/t.count),n=0;n<t.count;n++){var r=Pp(t.path);r.setStyle("opacity",i),e.push(r)}return e},split:null};function trv(t,e,i,n,r,o){if(t.length&&e.length){var a,s,l=OZ("update",n,r);if(l&&l.duration>0){var h=n.getModel("universalTransition").get("delay"),u=Object.assign({setToFinal:!0},l);Tk(t[0])&&(a=t,s=e),Tk(e[0])&&(a=e,s=t);for(var c=a?a===t:t.length>e.length,d=a?trg(s,a):trg(c?e:t,[c?t:e]),p=0,f=0;f<d.length;f++)p+=d[f].many.length;for(var g=0,f=0;f<d.length;f++)(function t(e,n,r,a,s){var l=e.many,c=e.one;if(1!==l.length||s)for(var d=Tb({dividePath:trm[i],individualDelay:h&&function(t,e,i,n){return h(t+r,a)}},u),p=n?function(t,e,i){var n=[];!function t(e){for(var i=0;i<e.length;i++){var r=e[i];tro(r)?t(r.childrenRef()):r instanceof DB&&n.push(r)}}(t);var r=n.length;if(!r)return trf();var o=(i.dividePath||trp)({path:e,count:r});if(o.length!==r)return console.error("Invalid morphing: unmatched splitted path"),trf();n=trd(n),o=trd(o);for(var a=i.done,s=i.during,l=i.individualDelay,h=new AC,u=0;u<r;u++){var c=n[u],d=o[u];d.parent=e,d.copyTransform(h),l||tru(c,d)}function p(t){for(var e=0;e<o.length;e++)o[e].addSelfToZr(t)}function f(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,trl(e,"addSelfToZr"),trl(e,"removeSelfFromZr")}e.__isCombineMorphing=!0,e.childrenRef=function(){return o},trs(e,"addSelfToZr",{after:function(t){p(t)}}),trs(e,"removeSelfFromZr",{after:function(t){for(var e=0;e<o.length;e++)o[e].removeSelfFromZr(t)}});var g=o.length;if(l)for(var m=g,y=function(){0==--m&&(f(),a&&a())},u=0;u<g;u++){var w=l?Tb({delay:(i.delay||0)+l(u,g,n[u],o[u]),done:y},i):i;trc(n[u],o[u],w)}else e.__morphT=0,e.animateTo({__morphT:1},Tb({during:function(t){for(var i=0;i<g;i++){var n=o[i];n.__morphT=e.__morphT,n.dirtyShape()}s&&s(t)},done:function(){f();for(var e=0;e<t.length;e++)trl(t[e],"updateTransform");a&&a()}},i));return e.__zr&&p(e.__zr),{fromIndividuals:n,toIndividuals:o,count:g}}(l,c,d):function(t,e,i){var n=e.length,r=[],o=i.dividePath||trp;if(tro(t)){!function t(e){for(var i=0;i<e.length;i++){var n=e[i];tro(n)?t(n.childrenRef()):n instanceof DB&&r.push(n)}}(t.childrenRef());var a=r.length;if(a<n)for(var s=0,l=a;l<n;l++)r.push(Pp(r[s++%a]));r.length=n}else{r=o({path:t,count:n});for(var h=t.getComputedTransform(),l=0;l<r.length;l++)r[l].setLocalTransform(h);if(r.length!==n)return console.error("Invalid morphing: unmatched splitted path"),trf()}r=trd(r),e=trd(e);for(var u=i.individualDelay,l=0;l<n;l++){var c=u?Tb({delay:(i.delay||0)+u(l,n,r[l],e[l])},i):i;trc(r[l],e[l],c)}return{fromIndividuals:r,toIndividuals:e,count:e.length}}(c,l,d),f=p.fromIndividuals,g=p.toIndividuals,m=f.length,y=0;y<m;y++){var w=h?Tb({delay:h(y,m)},u):u;o(f[y],g[y],n?l[y]:e.one,n?e.one:l[y],w)}else{var b=n?l[0]:c,x=n?c:l[0];if(tro(b))t({many:[b],one:x},!0,r,a,!0);else{var w=h?Tb({delay:h(r,a)},u):u;trc(b,x,w),o(b,x,b,x,w)}}})(d[f],c,g,p),g+=d[f].many.length}}}function trw(t){if(!t)return[];if(Tk(t)){for(var e=[],i=0;i<t.length;i++)e.push(trw(t[i]));return e}var n=[];return t.traverse(function(t){t instanceof DB&&!t.disableMorphing&&!t.invisible&&!t.ignore&&n.push(t)}),n}var trb=kg();function trx(t,e,i,n){var r=function(t,e){for(var i=t.dimensions,n=0;n<i.length;n++){var r=t.getDimensionInfo(i[n]);if(r&&0===r.otherDims[e])return i[n]}}(t,n?"itemChildGroupId":"itemGroupId");if(r)return function(t,e,i){var n=t.getDimensionInfo(i),r=n&&n.ordinalMeta;if(n){var o=t.get(n.name,e);return r&&r.categories[o]||o+""}}(t,e,r);var o=t.getRawDataItem(e),a=n?"childGroupId":"groupId";return o&&o[a]?o[a]+"":n?void 0:i||t.getId(e)}function trS(t){var e=[];return T_(t,function(t){var i=t.data,n=t.dataGroupId;if(!(i.count()>1e4))for(var r=i.getIndices(),o=0;o<r.length;o++)e.push({data:i,groupId:trx(i,o,n,!1),childGroupId:trx(i,o,n,!0),divide:t.divide,dataIndex:o})}),e}function trC(t,e,i){t.traverse(function(t){t instanceof DB&&OQ(t,{style:{opacity:0}},e,{dataIndex:i,isFrom:!0})})}function tr_(t){if(t.parent){var e=t.getComputedTransform();t.setLocalTransform(e),t.parent.remove(t)}}function trM(t){t.stopAnimation(),t.isGroup&&t.traverse(function(t){t.stopAnimation()})}function trT(t,e,i){var n=trS(t),r=trS(e);function o(t,e,i,n,r){(i||t)&&e.animateFrom({style:i&&i!==t?Tw(Tw({},i.style),t.style):t.style},r)}var a=!1,s=0,l=TQ(),h=TQ();n.forEach(function(t){t.groupId&&l.set(t.groupId,!0),t.childGroupId&&h.set(t.childGroupId,!0)});for(var u=0;u<r.length;u++){var c=r[u].groupId;if(h.get(c)){s=1;break}var d=r[u].childGroupId;if(d&&l.get(d)){s=2;break}}function p(t,e){return function(i){var n=i.data,r=i.dataIndex;return e?n.getId(r):t?1===s?i.childGroupId:i.groupId:2===s?i.childGroupId:i.groupId}}var f=function(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++){var r=t[n],o=e[n];if(r.data.getId(r.dataIndex)!==o.data.getId(o.dataIndex))return!1}return!0}(n,r),g={};if(!f)for(var u=0;u<r.length;u++){var m=r[u],y=m.data.getItemGraphicEl(m.dataIndex);y&&(g[y.id]=!0)}function w(t,e){var i,s=n[e],l=r[t],h=l.data.hostModel,u=s.data.getItemGraphicEl(s.dataIndex),c=l.data.getItemGraphicEl(l.dataIndex);if(u===c){c&&(i=OZ("update",h,l.dataIndex))&&c.traverse(function(t){if(t instanceof k1){var e=O$(t).oldStyle;e&&t.animateFrom({style:e},i)}});return}u&&g[u.id]||!c||(trM(c),u?(trM(u),tr_(u),a=!0,trv(trw(u),trw(c),l.divide,h,t,o)):trC(c,h,t))}new ze(n,r,p(!0,f),p(!1,f),null,"multiple").update(w).updateManyToOne(function(t,e){var i=r[t],s=i.data,l=s.hostModel,h=s.getItemGraphicEl(i.dataIndex),u=TI(TM(e,function(t){return n[t].data.getItemGraphicEl(n[t].dataIndex)}),function(t){return t&&t!==h&&!g[t.id]});h&&(trM(h),u.length?(T_(u,function(t){trM(t),tr_(t)}),a=!0,trv(trw(u),trw(h),i.divide,l,t,o)):trC(h,l,i.dataIndex))}).updateOneToMany(function(t,e){var i=n[e],s=i.data.getItemGraphicEl(i.dataIndex);if(!s||!g[s.id]){var l=TI(TM(t,function(t){return r[t].data.getItemGraphicEl(r[t].dataIndex)}),function(t){return t&&t!==s}),h=r[t[0]].data.hostModel;l.length&&(T_(l,function(t){return trM(t)}),s?(trM(s),tr_(s),a=!0,trv(trw(s),trw(l),i.divide,h,t[0],o)):T_(l,function(e){return trC(e,h,t[0])}))}}).updateManyToMany(function(t,e){new ze(e,t,function(t){return n[t].data.getId(n[t].dataIndex)},function(t){return r[t].data.getId(r[t].dataIndex)}).update(function(i,n){w(t[i],e[n])}).execute()}).execute(),a&&T_(e,function(t){var e=t.data.hostModel,n=e&&i.getViewOfSeriesModel(e),r=OZ("update",e,0);n&&e.isAnimationEnabled()&&r&&r.duration>0&&n.group.traverse(function(t){t instanceof DB&&!t.animators.length&&t.animateFrom({style:{opacity:0}},r)})})}function trI(t){return t.getModel("universalTransition").get("seriesKey")||t.id}function trR(t){return Tk(t)?t.sort().join(","):t}function trE(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function trA(t,e){for(var i=0;i<t.length;i++)if(null!=e.seriesIndex&&e.seriesIndex===t[i].seriesIndex||null!=e.seriesId&&e.seriesId===t[i].id)return i}Fz([function(t){t.registerPainter("canvas",FG)}]),Fz([function(t){t.registerPainter("svg",WH)}]),Fz([function(t){t.registerChartView(YC),t.registerSeriesModel(Yr),t.registerLayout(Um("line",!0)),t.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),i=t.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",i)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,W9("line"))},function(t){t.registerChartView(zk),t.registerSeriesModel(zy),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,TA(W2,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,W5("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,W9("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){var i=t.componentType||"series";e.eachComponent({mainType:i,query:t},function(e){t.sortInfo&&e.axis.setCategorySortInfo(t.sortInfo)})})},function(t){t.registerChartView(qD),t.registerSeriesModel(qP),BI("pie",t.registerAction),t.registerLayout(TA(qM,"pie")),t.registerProcessor(UU("pie")),t.registerProcessor({seriesType:"pie",reset:function(t,e){var i=t.getData();i.filterSelf(function(t){var e=i.mapDimension("value"),n=i.get(e,t);return!TL(n)||!!isNaN(n)||!(n<0)})}})},function(t){Fz(KZ),t.registerSeriesModel(Kp),t.registerChartView(Ky),t.registerLayout(Um("scatter"))},function(t){Fz(qZ),t.registerChartView(qV),t.registerSeriesModel(qB),t.registerLayout(qL),t.registerProcessor(UU("radar")),t.registerPreprocessor(qH)},function(t){Fz(XY),t.registerChartView(XO),t.registerSeriesModel(XP),t.registerLayout(XN),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,XL),BI("map",t.registerAction)},function(t){t.registerChartView(Qf),t.registerSeriesModel(Qx),t.registerLayout(QC),t.registerVisual(Q_),t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var i=t.dataIndex,n=e.getData().tree.getNodeByDataIndex(i);n.isExpand=!n.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e,i){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=G9(e.coordinateSystem,t,void 0,i);e.setCenter&&e.setCenter(n.center),e.setZoom&&e.setZoom(n.zoom)})})},function(t){t.registerSeriesModel(QT),t.registerChartView(QP),t.registerVisual(QH),t.registerLayout(QX),function(t){for(var e=0;e<QM.length;e++)t.registerAction({type:QM[e],update:"updateView"},T5);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"treemap",query:t},function(e,i){var n=KK(t,["treemapZoomToNode","treemapRootToNode"],e);if(n){var r=e.getViewRoot();r&&(t.direction=KJ(r,n.node)?"rollUp":"drillDown"),e.resetViewRoot(n.node)}})})}(t)},function(t){t.registerChartView(GU),t.registerSeriesModel(G6),t.registerProcessor(Uq),t.registerVisual(UK),t.registerVisual(UJ),t.registerLayout(U7),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,Gs),t.registerLayout(Gl),t.registerCoordinateSystem("graphView",{dimensions:Gh.dimensions,create:Gc}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},T5),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},T5),t.registerAction(G7,function(t,e,i){e.eachComponent({mainType:"series",query:t},function(e){var n=G9(e.coordinateSystem,t,void 0,i);e.setCenter&&e.setCenter(n.center),e.setZoom&&e.setZoom(n.zoom)})})},function(t){t.registerChartView(U$),t.registerSeriesModel(UZ)},function(t){t.registerChartView(UF),t.registerSeriesModel(Uz),t.registerLayout(Uj),t.registerProcessor(UU("funnel"))},function(t){Fz(Z9),t.registerChartView(XX),t.registerSeriesModel(XQ),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,X1)},function(t){t.registerChartView(qQ),t.registerSeriesModel(q0),t.registerLayout(q1),t.registerVisual(Kd),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})})},function(t){t.registerSeriesModel(zZ),t.registerChartView(zq),t.registerLayout(z1),t.registerTransform(z2)},function(t){t.registerChartView(z3),t.registerSeriesModel(jr),t.registerPreprocessor(jo),t.registerVisual(jc),t.registerLayout(jd)},function(t){t.registerChartView(Uy),t.registerSeriesModel(Uv),t.registerLayout(Um("effectScatter"))},function(t){t.registerChartView(Yk),t.registerSeriesModel(YL),t.registerLayout(YA),t.registerVisual(YH)},function(t){t.registerChartView(Yi),t.registerSeriesModel(Yn)},function(t){t.registerChartView(qi),t.registerSeriesModel(qb),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,TA(W2,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,W5("pictorialBar"))},function(t){t.registerChartView(Qe),t.registerSeriesModel(Qi),t.registerLayout(Qn),t.registerProcessor(UU("themeRiver"))},function(t){t.registerChartView(K5),t.registerSeriesModel(K8),t.registerLayout(TA(K7,"sunburst")),t.registerProcessor(TA(UU,"sunburst")),t.registerVisual(Qt),t.registerAction({type:K1,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,i){var n=KK(t,[K1],e);if(n){var r=e.getViewRoot();r&&(t.direction=KJ(r,n.node)?"rollUp":"drillDown"),e.resetViewRoot(n.node)}})}),t.registerAction({type:K2,update:"none"},function(t,e,i){t=Tw({},t),e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e){var i=KK(t,[K2],e);i&&(t.dataIndex=i.node.dataIndex)}),i.dispatchAction(Tw(t,{type:"highlight"}))}),t.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(t,e,i){t=Tw({},t),i.dispatchAction(Tw(t,{type:"downplay"}))})},function(t){t.registerChartView(j5),t.registerSeriesModel(jy)}]),Fz(function(t){Fz(KZ),Fz(J_)}),Fz(function(t){Fz(J_),KH.registerAxisPointerClass("PolarAxisPointer",teD),t.registerCoordinateSystem("polar",teY),t.registerComponentModel(teP),t.registerComponentView(te9),Zt(t,"angle",teN,te6),Zt(t,"radius",teH,te8),t.registerComponentView(teK),t.registerComponentView(te1),t.registerLayout(TA(te4,"bar"))}),Fz(XY),Fz(function(t){Fz(J_),KH.registerAxisPointerClass("SingleAxisPointer",tid),t.registerComponentView(tim),t.registerComponentView(tii),t.registerComponentModel(tir),Zt(t,"single",tir,tir.defaultOption),t.registerCoordinateSystem("single",tih)}),Fz(Z9),Fz(function(t){t.registerComponentModel(J8),t.registerComponentView(J7),t.registerCoordinateSystem("calendar",ttt)}),Fz(function(t){t.registerComponentModel(ttV),t.registerComponentView(ttW),t.registerPreprocessor(function(t){var e=t.graphic;Tk(e)?e[0]&&e[0].elements?t.graphic=[t.graphic[0]]:t.graphic=[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])})}),Fz(function(t){t.registerComponentModel(tiP),t.registerComponentView(tiL),J3.saveAsImage=tiN,J3.magicType=tiB,J3.dataView=tiU,J3.dataZoom=tiZ,J3.restore=tiX,Fz(tiO)}),Fz(function(t){Fz(J_),t.registerComponentModel(tiQ),t.registerComponentView(tnr),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},T5),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},T5)}),Fz(J_),Fz(function(t){t.registerComponentView(J0),t.registerComponentModel(J1),t.registerPreprocessor(JT),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,JZ),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(e){e.setAreas(t.areas)})}),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},T5),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},T5),J3.brush=J6}),Fz(function(t){t.registerComponentModel(tiE),t.registerComponentView(tiA)}),Fz(function(t){t.registerComponentModel(tiv),t.registerComponentView(tiC),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e,i){var n=e.getComponent("timeline");return n&&null!=t.currentIndex&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),i.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),e.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),Tb({currentIndex:n.option.currentIndex},t)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var i=e.getComponent("timeline");i&&null!=t.playState&&i.setPlayState(t.playState)}),t.registerPreprocessor(tiT)}),Fz(function(t){t.registerComponentModel(teE),t.registerComponentView(tek),t.registerPreprocessor(function(t){tt9(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}),Fz(function(t){t.registerComponentModel(tex),t.registerComponentView(teR),t.registerPreprocessor(function(t){tt9(t.series,"markLine")&&(t.markLine=t.markLine||{})})}),Fz(function(t){t.registerComponentModel(tei),t.registerComponentView(teb),t.registerPreprocessor(function(t){tt9(t.series,"markArea")&&(t.markArea=t.markArea||{})})}),Fz(function(t){Fz(tt1),Fz(tt8)}),Fz(function(t){Fz(ttM),Fz(ttO)}),Fz(ttM),Fz(ttO),Fz(function(t){Fz(tnG),Fz(tnq)}),Fz(tnG),Fz(tnq),Fz(function(t){t.registerPreprocessor(Q0),t.registerVisual(t.PRIORITY.VISUAL.ARIA,QJ)}),Fz(function(t){t.registerTransform(tnv),t.registerTransform(tnw)}),Fz(function(t){t.registerComponentModel(tti),t.registerComponentView(ttn)}),Fz(function(t){t.registerUpdateLifecycle("series:beforeupdate",function(t,e,i){T_(kr(i.seriesTransition),function(t){T_(kr(t.to),function(t){for(var e=i.updatedSeries,n=0;n<e.length;n++)(null!=t.seriesIndex&&t.seriesIndex===e[n].seriesIndex||null!=t.seriesId&&t.seriesId===e[n].id)&&(e[n][VP]=!0)})})}),t.registerUpdateLifecycle("series:transition",function(t,e,i){var n=trb(e);if(n.oldSeries&&i.updatedSeries&&i.optionChanged){var r=i.seriesTransition;if(r)T_(kr(r),function(t){var r,o;r=[],o=[],T_(kr(t.from),function(t){var e=trA(n.oldSeries,t);e>=0&&r.push({dataGroupId:n.oldDataGroupIds[e],data:n.oldData[e],divide:trE(n.oldData[e]),groupIdDim:t.dimension})}),T_(kr(t.to),function(t){var e=trA(i.updatedSeries,t);if(e>=0){var r=i.updatedSeries[e].getData();o.push({dataGroupId:n.oldDataGroupIds[e],data:r,divide:trE(r),groupIdDim:t.dimension})}}),r.length>0&&o.length>0&&trT(r,o,e)});else{var o,a,s,l=(o=TQ(),a=TQ(),s=TQ(),T_(n.oldSeries,function(t,e){var i=n.oldDataGroupIds[e],r=n.oldData[e],o=trI(t),l=trR(o);a.set(l,{dataGroupId:i,data:r}),Tk(o)&&T_(o,function(t){s.set(t,{key:l,dataGroupId:i,data:r})})}),T_(i.updatedSeries,function(t){if(t.isUniversalTransitionEnabled()&&t.isAnimationEnabled()){var e=t.get("dataGroupId"),i=t.getData(),n=trI(t),r=trR(n),l=a.get(r);if(l)o.set(r,{oldSeries:[{dataGroupId:l.dataGroupId,divide:trE(l.data),data:l.data}],newSeries:[{dataGroupId:e,divide:trE(i),data:i}]});else if(Tk(n)){var h=[];T_(n,function(t){var e=a.get(t);e.data&&h.push({dataGroupId:e.dataGroupId,divide:trE(e.data),data:e.data})}),h.length&&o.set(r,{oldSeries:h,newSeries:[{dataGroupId:e,data:i,divide:trE(i)}]})}else{var u=s.get(n);if(u){var c=o.get(u.key);c||(c={oldSeries:[{dataGroupId:u.dataGroupId,data:u.data,divide:trE(u.data)}],newSeries:[]},o.set(u.key,c)),c.newSeries.push({dataGroupId:e,data:i,divide:trE(i)})}}}}),o);T_(l.keys(),function(t){var i=l.get(t);trT(i.oldSeries,i.newSeries,e)})}T_(i.updatedSeries,function(t){t[VP]&&(t[VP]=!1)})}for(var h=t.getSeries(),u=n.oldSeries=[],c=n.oldDataGroupIds=[],d=n.oldData=[],p=0;p<h.length;p++){var f=h[p].getData();1e4>f.count()&&(u.push(h[p]),c.push(h[p].get("dataGroupId")),d.push(f))}})}),Fz(function(t){t.registerUpdateLifecycle("series:beforeupdate",function(t,e,i){var n=tn3(e).labelManager;n||(n=tn3(e).labelManager=new tn5),n.clearLabels()}),t.registerUpdateLifecycle("series:layoutlabels",function(t,e,i){var n=tn3(e).labelManager;i.updatedSeries.forEach(function(t){n.addLabelsOfSeries(e.getViewOfSeriesModel(t))}),n.updateLayoutConfig(e),n.layout(e),n.processLabelsOverall()})}),(ti=t1||(t1={}))[ti.UNLOCKED=0]="UNLOCKED",ti[ti.LOCKED=1]="LOCKED",ti[ti.UNPL_MODIFIED=2]="UNPL_MODIFIED",ti[ti.LNPL_MODIFIED=4]="LNPL_MODIFIED",ti[ti.AVGX_MODIFIED=8]="AVGX_MODIFIED";const trk={avgX:0,LNPL:1/0,UNPL:-1/0,avgMovement:0,URL:-1/0},trD="steelblue",trO={tableData:[],lockedLimitBaseData:[],xLabel:"Date",yLabel:"",xdata:[],movements:[],dividerLines:[],lockedLimits:structuredClone(trk),lockedLimitStatus:0};let trP=FD(document.getElementById("xplot")),trL=FD(document.getElementById("mrplot"));function trN(t,e){if(t.length<8)return;let i=0;for(let n=0;n<7;n++)t[n].value>e&&(i|=1<<n%8);for(let n=7;n<t.length;n++)if(t[n].value>e?i|=1<<n%8:i&=~(1<<n%8),0==i||255==i)for(let e=n-7;e<=n;e++)t[e].status=tn.RUN_OF_EIGHT_EXCEPTION}function trH(t,e,i){if(t.length<4)return;let n=0,r=0;for(let o=0;o<3;o++)t[o].value<e?n+=1:t[o].value>i&&(r+=1);for(let o=3;o<t.length;o++){if(t[o].value<e?n+=1:t[o].value>i&&(r+=1),n>=3||r>=3)for(let e=o-3;e<=o;e++)t[e].status=tn.FOUR_NEAR_LIMIT_EXCEPTION;t[o-3].value<e?n-=1:t[o-3].value>i&&(r-=1)}}function trV(t,e,i){t.forEach(t=>{t.value<e?t.status=tn.NPL_EXCEPTION:t.value>i&&(t.status=tn.NPL_EXCEPTION)})}function trB(){let t=trO.dividerLines.length-2;if(t>=3)return;let[e,i]=trP.convertFromPixel("grid",[trP.getWidth()*(t+1)/4,0]);e%10&&(e+=1);let n={id:`divider-${t+1}`,x:e};trO.dividerLines.push(n),trF()}function trF(t=!0){let e,n,r,o=function(){var t;let e,i,n=trO.dividerLines;n.sort((t,e)=>t.x-e.x),console.assert(n.length>=2,"dividerLines should contain at least two divider lines");let r=trO.tableData.filter(t=>t.x&&(t.value||0==t.value));r.sort((t,e)=>trK(t.x)-trK(e.x)),trQ(trO.xdata,r);let{min:o,max:a}=(t=trO.xdata,e=1/0,i=-1/0,t.forEach(t=>{let n=trK(t.x);e=Math.min(e,n),i=Math.max(i,n)}),{min:e,max:i});n[0].x=o,n[n.length-1].x=a;let s={xchartMin:1/0,xchartMax:-1/0,mrchartMax:-1/0,lineValues:[],xdataPerRange:[],movementsPerRange:[]},l=[],h=[];for(let t=0;t<n.length-1;t++){let e=n[t].x,i=n[t+1].x,r=trO.xdata.filter(t=>trK(t.x)>=e&&trK(t.x)<=i),o=trz(r);if(0===r.length){console.log(`No data in range ${e} - ${i}`);continue}let{avgX:a,avgMovement:u,UNPL:c,LNPL:d,URL:p,lowerQuartile:f,upperQuartile:g}=trU(r),m={xLeft:e,xRight:i,avgX:a,avgMovement:u,UNPL:c,LNPL:d,URL:p,lowerQuartile:f,upperQuartile:g};if(s.lineValues.push(m),s.xchartMin=Math.min(s.xchartMin,d),s.xchartMax=Math.max(s.xchartMax,c),s.mrchartMax=Math.max(s.mrchartMax,p),r.forEach(t=>t.status=tn.NORMAL),0==t&&tr0()){let t=trZ();trN(r,trO.lockedLimits.avgX),trH(r,t.useLowerQuartile?trO.lockedLimits.lowerQuartile:-1/0,t.useUpperQuartile?trO.lockedLimits.upperQuartile:1/0),trV(r,trO.lockedLimits.LNPL,trO.lockedLimits.UNPL)}else trN(r,a),trH(r,f,g),trV(r,d,c);l=l.concat(r),s.xdataPerRange.push(r),o.forEach(t=>t.status=tn.NORMAL),0==t&&tr0()?trV(o,0,trO.lockedLimits.URL):trV(o,0,p),h=h.concat(o),s.movementsPerRange.push(o)}return trQ(trO.xdata,l),trQ(trO.movements,h),trO.xdata.forEach(t=>{t.value>s.xchartMax&&(s.xchartMax=t.value),t.value<s.xchartMin&&(s.xchartMin=t.value)}),trO.movements.forEach(t=>{t.value>s.mrchartMax&&(s.mrchartMax=t.value)}),tr0()&&(s.xchartMax=Math.max(s.xchartMax,trO.lockedLimits.UNPL),s.xchartMin=Math.min(s.xchartMin,trO.lockedLimits.LNPL),s.mrchartMax=Math.max(s.mrchartMax,trO.lockedLimits.URL)),s}();return trO.dividerLines.length>2?document.querySelector("#remove-divider").classList.remove("text-slate-400"):document.querySelector("#remove-divider").classList.add("text-slate-400"),trO.dividerLines.length<5?(document.querySelector("#add-divider").classList.remove("bg-slate-700"),document.querySelector("#add-divider").classList.remove("hover:bg-slate-600")):(document.querySelector("#add-divider").classList.add("bg-slate-700"),document.querySelector("#add-divider").classList.add("hover:bg-slate-600")),e=document.querySelector("#charts-container > div"),n=document.querySelector("#xplot"),r=document.querySelector("#mrplot"),trO.xdata.length>31?(e.classList.remove("lg:flex-nowrap"),n.classList.add("w-full"),r.classList.add("w-full")):(e.classList.add("lg:flex-nowrap"),n.classList.remove("w-full"),r.classList.remove("w-full")),function(t=!1){trP.setOption({...t7},t),trL.setOption({...t7},t),trP.setOption({title:{text:""!==trO.yLabel.toLowerCase()?trO.yLabel:"X Plot"},xAxis:{name:trO.xLabel},yAxis:{name:""}}),trL.setOption({title:{text:"s"!==trO.yLabel.toLowerCase()?`${trO.yLabel} Range`:"MR Plot"},xAxis:{name:trO.xLabel},yAxis:{name:""}})}(!0),trP.setOption({series:o.xdataPerRange.map(ee)}),trL.setOption({series:o.movementsPerRange.map(ee)}),function(t){let e=Math.min(...t.xdataPerRange.map(t=>Math.min(...t.map(t=>i(t8)(t.x).valueOf())))),n=Math.max(...t.movementsPerRange.map(t=>Math.max(...t.map(t=>i(t8)(t.x).valueOf()))),...t.xdataPerRange.map(t=>Math.max(...t.map(t=>i(t8)(t.x).valueOf()))));n=i(t8)(n).add(2,"day").valueOf();let[r,o]=tot(t),a=t9(t.xdataPerRange),s=Math.ceil((o-r)/a);trP.setOption({yAxis:{min:r,max:o,interval:a,splitNumber:Math.min(7,s)},xAxis:{min:e,max:n}});let l=t9([t.movementsPerRange.flat()]),h=tr7(1.1*t.mrchartMax);trL.setOption({yAxis:{min:0,max:h,interval:l,splitNumber:Math.min(7,Math.ceil(h/l))},xAxis:{min:e,max:n}})}(o),function(t){let e=[],n=[];for(let r=0;r<t.lineValues.length;r++){let o=t.lineValues[r],a=2,s="dashed",l={useUpperQuartile:!0,useLowerQuartile:!0};0==r&&tr0()&&(l=trZ(),trO.lockedLimits.xLeft=o.xLeft,trO.lockedLimits.xRight=o.xRight,o=trO.lockedLimits,a=3,s="solid");let h=({name:e,lineStyle:n,statisticY:a,showLabel:s=!1})=>({name:e,type:"line",markLine:{symbol:["none","none"],lineStyle:n,tooltip:{show:!1},label:{formatter:s&&`${a}`,fontSize:11,color:"#000"},emphasis:{disabled:!0},data:[[{xAxis:o.xLeft,yAxis:a},{xAxis:r==t.lineValues.length-1?i(t8)(o.xRight).add(1,"day").valueOf():o.xRight,yAxis:a}]]}});n=n.concat([h({name:`${r}-avgmovement`,lineStyle:{color:"red",width:a,type:s},statisticY:o.avgMovement??0,showLabel:!0}),h({name:`${r}-URL`,lineStyle:{color:trD,width:a,type:s},statisticY:o.URL??0,showLabel:!0})]),e=e.concat([l.useLowerQuartile&&h({name:`${r}-low-Q`,lineStyle:{color:"gray",type:"dashed",dashOffset:15,width:1},statisticY:o.lowerQuartile??0}),l.useUpperQuartile&&h({name:`${r}-upp-Q`,lineStyle:{color:"gray",type:"dashed",dashOffset:15,width:1},statisticY:o.upperQuartile??0}),h({name:`${r}-avg`,lineStyle:{color:"red",width:a,type:s},statisticY:o.avgX??0,showLabel:!0}),h({name:`${r}-unpl`,lineStyle:{color:trD,width:a,type:s},statisticY:o.UNPL??0,showLabel:!0}),h({name:`${r}-lnpl`,lineStyle:{color:trD,width:a,type:s},statisticY:o.LNPL??0,showLabel:!0})])}trP.setOption({series:e}),trL.setOption({series:n})}(o),trO.dividerLines.forEach(t=>(function(t,e){if(tr9(t))return;let[i,n]=tot(e),r=trP.convertToPixel("grid",[t.x,i]),o=trP.convertToPixel("grid",[t.x,n]);trP.setOption({graphic:[{type:"line",id:t.id,shape:{x1:r[0],y1:r[1],x2:o[0],y2:o[1]},z:100,style:{lineWidth:4,lineDash:"solid",stroke:"purple"},draggable:"horizontal",ondragend:t=>{for(let e of trO.dividerLines)if(e.id==t.target.id){let i=trP.convertFromPixel("grid",[t.offsetX,0]);e.x=i[0];break}trF()}}]})})(t,o)),o}function trW(){let t=`divider-${trO.dividerLines.length-2}`;trO.dividerLines=trO.dividerLines.filter(e=>e.id!=t),trF()}function trz(t){let e=[];for(let i=1;i<t.length;i++){let n=tr8(Math.abs(t[i].value-t[i-1].value));e.push({order:t[i].order,x:t[i].x,value:n})}return e}function trj(){let t=new URLSearchParams(window.location.search);return t.has("d")?t:new URLSearchParams(window.location.hash.slice(1))}function trU(t){let e=trz(t),i=t.reduce((t,e)=>t+e.value,0)/t.length,n=e.reduce((t,e)=>t+e.value,0)/Math.max(e.length,1),r=i+2.66*n,o=i-2.66*n;return{avgX:tr8(i),avgMovement:tr8(n),UNPL:tr8(r),LNPL:tr8(o),URL:tr8(3.268*n),lowerQuartile:tr8((o+i)/2),upperQuartile:tr8((r+i)/2)}}function trG(){return trU(trO.lockedLimitBaseData.filter(t=>t.x&&(t.value||0==t.value)))}function trY(t){let e=trG();document.querySelectorAll(".lock-limit-input").forEach(i=>{i.value=t?e[i.dataset.limit]:trO.lockedLimits[i.dataset.limit]}),t&&(trO.lockedLimitStatus&=-9,trO.lockedLimitStatus&=-5,trO.lockedLimitStatus&=-3),document.querySelector('.lock-limit-input[data-limit="avgX"]').style.color=(8&trO.lockedLimitStatus)==8?"rgb(220 38 38)":"black",document.querySelector('.lock-limit-input[data-limit="avgX"]').placeholder=`${e.avgX}`,document.querySelector('.lock-limit-input[data-limit="UNPL"]').style.color=(2&trO.lockedLimitStatus)==2?"rgb(220 38 38)":"black",document.querySelector('.lock-limit-input[data-limit="UNPL"]').placeholder=`${e.UNPL}`,document.querySelector('.lock-limit-input[data-limit="LNPL"]').style.color=(4&trO.lockedLimitStatus)==4?"rgb(220 38 38)":"black",document.querySelector('.lock-limit-input[data-limit="LNPL"]').placeholder=`${e.LNPL}`,document.querySelector('.lock-limit-input[data-limit="avgMovement"]').placeholder=`${e.avgMovement}`,document.querySelector('.lock-limit-input[data-limit="URL"]').placeholder=`${e.URL}`}function trX(t,e,i,n){if(1==e.from.col)return t;let r=t.map(t=>new Date(trK(t[0]))),o=864e5;if(r.length>=2){o=r[1].valueOf()-r[0].valueOf();for(let e=2;e<r.length;e++)if(r[e].valueOf()-r[e-1].valueOf()!=o)return t}let a=[];if(r.length<2){if("down"==n){a=r.map(t=>new Date(new Date(t.valueOf()).setDate(t.getDate()+1)));for(let t=a.length;t<=i.to.row-i.from.row;t++){let t=a[a.length-1];a.push(new Date(new Date(t.valueOf()).setDate(t.getDate()+1)))}}else if("up"==n){a=r.map(t=>new Date(new Date(t.valueOf()).setDate(t.getDate()-1)));for(let t=a.length;t<=i.to.row-i.from.row;t++){let t=a[0];a=[new Date(new Date(t.valueOf()).setDate(t.getDate()-1)),...a]}}return a.map(t=>[trq(t)])}if("down"==n){a=r.map(t=>new Date(t.valueOf()+r.length*o));for(let t=a.length;t<=i.to.row-i.from.row;t++)a.push(new Date(a[a.length-1].valueOf()+o))}else if("up"==n){a=r.map(t=>new Date(t.valueOf()-r.length*o));for(let t=a.length;t<=i.to.row-i.from.row;t++)a=[new Date(a[0].valueOf()-o),...a]}return a.map(t=>[trq(t)])}function tr$(t,e){if(e.length>1)return;let i=e[0];for(let e=i.startRow+t.length;e<=i.endRow;e++)t.push(["",""])}function trZ(){if((-2&trO.lockedLimitStatus)==0)return{useUpperQuartile:!0,useLowerQuartile:!0};if((4&trO.lockedLimitStatus)==4&&(2&trO.lockedLimitStatus)==2||(8&trO.lockedLimitStatus)==8){var t;return(t=trO.lockedLimits.avgX,.001>Math.abs(trO.lockedLimits.UNPL+trO.lockedLimits.LNPL-2*t))?{useUpperQuartile:!0,useLowerQuartile:!0}:{useUpperQuartile:!1,useLowerQuartile:!1}}return(2&trO.lockedLimitStatus)==2?{useUpperQuartile:!1,useLowerQuartile:!0}:(4&trO.lockedLimitStatus)==4?{useUpperQuartile:!0,useLowerQuartile:!1}:(console.assert(!1),{useUpperQuartile:!0,useLowerQuartile:!0})}function trq(t){let e=t.getTimezoneOffset();return(t=new Date(t.getTime()-6e4*e)).toISOString().slice(0,10)}function trK(t){return i(t8)(t).valueOf()}function trQ(t,e){t.splice(0,t.length,...trJ(e))}function trJ(t){return t.map(t=>({x:t.x,value:t.value,order:t.order,status:t.status}))}function tr0(){return(1&trO.lockedLimitStatus)==1}function tr1(t){let e=new ArrayBuffer(4*t.length),i=new DataView(e);return t.forEach((t,e)=>{i.setFloat32(4*e,t)}),tr2(new Uint8Array(e).reduce((t,e)=>t+String.fromCharCode(e),""))}function tr2(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function tr5(t){return atob(t.replace(/-/g,"+").replace(/_/g,"/"))}function tr3(t){let e=tr5(t);var i=new Uint8Array(e.length);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);let n=new DataView(i.buffer),r=[];for(let t=0;t<i.length/4;t++)r.push(n.getFloat32(4*t));return r}async function tr4(t,e,n,r){let o=[],a=[];if("1"==t){let t=await fetch(e),i=await t.json();a=[i.xLabel??"Date",i.yLabel??"Value"],o=i.xdata.map((t,e)=>({order:e,x:t.x,value:tr8(+t.value),status:tn.NORMAL}))}else{e=decodeURIComponent(e),n=decodeURIComponent(n);let[t,r]=e.split(".",2),s=i(M3).decompress(tr5(t)),l=tr3(r),h=s.split(",").map(t=>t.replace(";",","));a=h.splice(0,2),o=h.map((t,e)=>({order:e,x:t,value:tr8(l[e]),status:tn.NORMAL}))}let s=[];n?.length>0&&(s=s.concat(tr3(n).map((t,e)=>({id:`divider-${e+1}`,x:t}))));let l=structuredClone(trk),h=0;if(r?.length>0){let[t,e,i,n,o,...a]=tr3(r).map(tr8);a.length>0&&(h=a[0]),l={avgX:t,avgMovement:e,LNPL:i,UNPL:n,URL:o,lowerQuartile:(t+i)/2,upperQuartile:(t+n)/2}}return{xLabel:a[0].replace(";",","),yLabel:a[1].replace(";",","),data:o,dividerLines:s,lockedLimits:l,lockedLimitStatus:h}}function tr6(){trQ(trO.xdata,trO.tableData.filter(t=>t.x&&(t.value||0==t.value))),trQ(trO.movements,trz(trO.xdata)),trO.dividerLines=trO.dividerLines.filter(t=>!tr9(t)).concat([{id:"divider-start",x:0},{id:"divider-end",x:1/0}]),trF()}function tr8(t){return Math.round(100*t)/100}function tr9(t){return null!=t.id&&("divider-start"==t.id||"divider-end"==t.id)}function tr7(t){return 10>Math.abs(t)?Math.ceil(t):100>Math.abs(t)?10*Math.ceil(t/10):1e3>Math.abs(t)?50*Math.ceil(t/50):500*Math.ceil(t/500)}function tot(t){var e;return[10>Math.abs(e=t.xchartMin-(t.xchartMax-t.xchartMin)*.1)?Math.floor(e):100>Math.abs(e)?10*Math.floor(e/10):1e3>Math.abs(e)?50*Math.floor(e/50):500*Math.floor(e/500),tr7(t.xchartMax+(t.xchartMax-t.xchartMin)*.1)]}function toe(){let e=prompt("Insert a new column name",trO.yLabel);if(e){let i=t.getColHeader();i[1]=e,trO.yLabel=e,t.updateSettings({colHeaders:i}),trF()}}window.matchMedia("(max-width: 767px)").addEventListener("change",t=>{trF()}),screen.orientation.addEventListener("change",t=>{trF()}),document.addEventListener("DOMContentLoaded",async function(n){let r=trj();if(r.has("d")){let t=r.get("v")||"0",e=r.get("s")||"",i=r.get("l")||"",{xLabel:n,yLabel:o,data:a,dividerLines:s,lockedLimits:l,lockedLimitStatus:h}=await tr4(t,r.get("d"),e,i);trO.xLabel=n,trO.yLabel=o,trO.tableData=a,trO.dividerLines=s,trO.lockedLimits=l,trO.lockedLimitStatus=h}else!function(){let t=[5045,4350,4350,3975,4290,4430,4485,4285,3980,3925,3645,3760,3300,3685,3463,5200].map(function(t,e){return{order:e,x:`2020-01-${(e<9?"0":"")+(e+1)}`,value:t,status:tn.NORMAL}});trO.tableData=t}();trO.lockedLimitBaseData=trJ(trO.tableData),tr6();let o=document.querySelector("#add-divider"),a=document.querySelector("#remove-divider");o.addEventListener("click",trB),a.addEventListener("click",trW);let s=document.querySelector("#lock-limit-btn"),l=document.querySelector("#lock-limit-warning"),h=document.querySelector("#lock-limit-dialog"),u=document.querySelector("#lock-limit-close"),c=document.querySelector("#lock-limit-add");tr0()&&(document.querySelectorAll(".lock-limit-remove").forEach(t=>t.classList.remove("hidden")),l.classList.remove("hidden")),s.addEventListener("click",t=>{tr0()||(trQ(trO.lockedLimitBaseData,trO.tableData),e.updateSettings({data:trO.lockedLimitBaseData,colHeaders:[trO.xLabel,trO.yLabel]})),trY(!tr0()),h.showModal()}),u.addEventListener("click",t=>{h.close()}),document.querySelectorAll(".lock-limit-remove").forEach(t=>t.addEventListener("click",()=>{t.classList.add("hidden"),l.classList.add("hidden"),trO.lockedLimitStatus&=-2,h.close(),trF()})),c.addEventListener("click",()=>{(function(){let t=trG(),e=structuredClone(trk);if(document.querySelectorAll(".lock-limit-input").forEach(i=>{e[i.dataset.limit]=""!==i.value?Number(i.value):t[i.dataset.limit]}),e.lowerQuartile=tr8((e.avgX+e.LNPL)/2),e.upperQuartile=tr8((e.avgX+e.UNPL)/2),e.avgX<e.LNPL||e.avgX>e.UNPL||e.avgMovement>e.URL){alert("Please ensure that the following limits are satisfied:\n1. Average X is between Lower Natural Process Limit (LNPL) and Upper Natural Process Limit (UNPL)\n2. Average Movement is less than or equal to Upper Range Limit (URL)");return}t.avgX!=e.avgX&&(trO.lockedLimitStatus|=8),t.LNPL!=e.LNPL&&(trO.lockedLimitStatus|=4),t.UNPL!=e.UNPL&&(trO.lockedLimitStatus|=2),trO.lockedLimits=e,trO.lockedLimitStatus|=1,trF()})(),h.close(),document.querySelectorAll(".lock-limit-remove").forEach(t=>t.classList.remove("hidden")),l.classList.remove("hidden")}),function(){let i=document.querySelector("#lock-limit-dataTable"),n=document.querySelector("#dataTable");e=new uA(i,{data:trO.lockedLimitBaseData,dataSchema:{x:null,value:null},columns:[{data:"x",type:"date",dateFormat:"YYYY-MM-DD",validator:(t,e)=>{if(!t){e(!0);return}let i=new Date(trK(t));e(i instanceof Date&&!isNaN(i.getTime()))}},{data:"value",type:"numeric"}],colHeaders:[trO.xLabel,trO.yLabel],contextMenu:!0,allowRemoveColumn:!1,minSpareRows:1,height:"auto",stretchH:"all",fillHandle:{autoInsertRow:!0,direction:"vertical"},beforeAutofill:(t,e,i,n)=>trX(t,e,i,n),beforePaste:(t,e)=>tr$(t,e),afterChange(t,e){"loadData"!==e&&trY(!0)},afterValidate(t,e,i,n,r){let o=document.getElementById("data-table-error");if(t){o.classList.add("hidden");return}return o.classList.remove("hidden"),!1},licenseKey:"non-commercial-and-evaluation"}),t=new uA(n,{data:trO.tableData,dataSchema:{x:null,value:null},columns:[{data:"x",type:"date",dateFormat:"YYYY-MM-DD",validator:(t,e)=>{if(!t){e(!0);return}let i=new Date(trK(t));e(i instanceof Date&&!isNaN(i.getTime()))}},{data:"value",type:"numeric"}],colHeaders:[trO.xLabel??"Date","Value"===trO.yLabel?"Value ()":trO.yLabel],afterOnCellMouseDown:function(t,e){if(-1!==e.row)return;let i=prompt("Insert a new column name",this.getColHeader()[e.col]);if(i){let t=this.getColHeader();t[e.col]=i,this.updateSettings({colHeaders:t}),0==e.col?trO.xLabel=i:trO.yLabel=i,trF()}},contextMenu:!0,allowRemoveColumn:!1,minSpareRows:1,height:"auto",stretchH:"all",fillHandle:{autoInsertRow:!0,direction:"vertical"},beforeAutofill:(t,e,i,n)=>trX(t,e,i,n),beforePaste:(t,e)=>tr$(t,e),beforeChange(t,e){var i;let n,r,o=trO.xdata.map(t=>t.x);t.forEach(([e,i,n,r],a)=>{"x"==i&&(o[e]=r),"value"==i&&(t[a][3]=r?r.replace(/[^0-9.\-]/g,""):r)}),i=this,n={},r=!1,o.forEach((t,e)=>{t&&(t in n?(i.setCellMeta(e,0,"className","duplicate"),r=!0):i.setCellMeta(e,0,"className",""),n[t]=!0)}),r?document.getElementById("duplicate-data-warning").classList.remove("hidden"):document.getElementById("duplicate-data-warning").classList.add("hidden")},afterChange(t,e){"loadData"!=e&&trF()},afterValidate(t,e,i,n,r){let o=document.getElementById("data-table-error");if(t){o.classList.add("hidden");return}return o.classList.remove("hidden"),!1},licenseKey:"non-commercial-and-evaluation"})}();let d=document.getElementById("csv-file");d.addEventListener("change",e=>{if(!d.files?.length){console.log("No file input");return}let i=d.files[0],n=new FileReader;n.addEventListener("loadend",()=>{let{passed:e,multiplier:i,xLabel:r,yLabel:o,xdata:a}=function(t,e=","){let i="",n="",r=0,o=[],a=t.indexOf("\r\n");if(-1==a){let t=document.getElementById("file-error");return t.style.display="block",t.innerText="Missing CSV labels and/or data.",{passed:!1,multiplier:r,xLabel:i,yLabel:n,xdata:o}}let s=t.slice(0,a).split(e);if(s.length<2){let t=document.getElementById("file-error");return t.style.display="block",t.innerText="First row of CSV must have 2 columns.",{passed:!1,multiplier:r,xLabel:i,yLabel:n,xdata:o}}if(""===s[0]||""===s[1]){let t=document.getElementById("file-error");return t.style.display="block",t.innerText="Missing CSV label(s).",{passed:!1,multiplier:r,xLabel:i,yLabel:n,xdata:o}}if("date"!=s[0].toLowerCase()){let t=document.getElementById("file-error");return t.style.display="block",t.innerText="First column of CSV must be 'Date'.",{passed:!1,multiplier:r,xLabel:i,yLabel:n,xdata:o}}i="Date",n=s[1];let l=t.slice(a+2).split("\r\n");if(0==l.length){let t=document.getElementById("file-error");return t.style.display="block",t.innerText="Missing CSV data.",{passed:!1,multiplier:r,xLabel:i,yLabel:n,xdata:o}}for(let t=0;t<l.length;t++){let a=l[t].split(e);if(""===a[0]||""===a[1]){if(""!==l.slice(t+1).join(e).replace(/,/g,"")){let t=document.getElementById("file-error");return t.style.display="block",t.innerText="Fragmented CSV data.",{passed:!1,multiplier:0,xLabel:i,yLabel:n,xdata:o}}break}if(!Date.parse(a[0])){let t=document.getElementById("file-error");return t.style.display="block",t.innerText="Please input date in YYYY-MM-DD format (if on Excel, change date format settings).",{passed:!1,multiplier:r,xLabel:i,yLabel:n,xdata:o}}let s=Number(a[1]);if(isNaN(s)){let t=document.getElementById("file-error");return t.style.display="block",t.innerText="Values must be numbers.",{passed:!1,multiplier:r,xLabel:i,yLabel:n,xdata:o}}for(;Math.abs(s)/10**r>=1e4;)r+=3;o.push({order:t,x:a[0],value:s,status:tn.NORMAL})}return{passed:!0,multiplier:r,xLabel:i,yLabel:n,xdata:o}}(n.result);if(!e)return;if(console.log(e,i,r,o,a),i>0){o+=` (x10${i.toString().split("").map(function(t){return""[Number(t)]}).join("")})`;for(let t=0;t<a.length;t++)a[t].value/=10**i}let s=document.getElementById("file-error");s.style.display="none",s.innerText="",trO.xLabel=r,trO.yLabel=o,trO.tableData=a,trO.lockedLimitBaseData=trJ(trO.tableData),t.updateSettings({data:a,colHeaders:[r,o]}),trO.dividerLines=[],tr6()}),n.readAsText(i)});let p=document.querySelector("#download-data"),f=document.querySelector("#refresh-charts"),g=document.querySelector("#share-link");p.addEventListener("click",()=>{let t=`${trO.xLabel},${trO.yLabel}\r
`+trO.xdata.filter(t=>t.x||t.value).map(t=>`${t.x||""},${tr8(t.value)||""}`).join("\r\n");tr0()&&(t+=`\r
\r
limit_lines,value\r
avg_x,${trO.lockedLimits.avgX}
LNPL,${trO.lockedLimits.LNPL}
UNPL,${trO.lockedLimits.UNPL}
avg_movement,${trO.lockedLimits.avgMovement}
URL,${trO.lockedLimits.URL}`);let e=new Blob([t],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(e),n=document.createElement("a");n.setAttribute("href",i),n.setAttribute("download","xmr-data.csv"),n.click(),n.remove(),URL.revokeObjectURL(i)}),f.addEventListener("click",()=>{tr6()}),g.addEventListener("click",()=>{let t=function(t){let e=trj(),n={v:e.get("v")??"0"};if("1"==n.v)n.d=e.get("d");else{let e=t.xdata.filter(t=>t.x||t.value),r=`${t.xLabel.replace(",",";")},${t.yLabel.replace(",",";")},`+e.map(t=>t.x?t.x.replace(",",";"):"").join(","),o=e.map(t=>tr8(t.value));n.d=tr2(i(M3).compress(r))+"."+tr1(o)}if(t.dividerLines){let e=tr1(t.dividerLines.filter(t=>!tr9(t)).map(t=>t.x));e.length>0&&(n.s=e)}t.lockedLimits&&(1&t.lockedLimitStatus)==1&&(n.l=tr1([t.lockedLimits.avgX,t.lockedLimits.avgMovement,t.lockedLimits.LNPL,t.lockedLimits.UNPL,t.lockedLimits.URL,t.lockedLimitStatus]));let r=new URLSearchParams(n);return`${window.location.origin}${window.location.pathname}#${r.toString()}`}(trO);if(t.length>2e3){alert("Link too long! Consider removing a few datapoints.");return}navigator.clipboard.writeText(t).then(function(){console.log("Async: Copying to clipboard was successful!")},function(t){console.error("Async: Could not copy text: ",t)});let e=document.getElementById("data-copied-msg");e.classList.remove("hidden"),setTimeout(()=>{e.classList.add("hidden")},2e3)})}),trP.on("click",t=>{"title"===t.componentType&&toe()}),trL.on("click",t=>{"title"===t.componentType&&toe()});
//# sourceMappingURL=index.ed131686.js.map
